(function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/L7-draw/",n(n.s=0)})({"+3Ak":function(t,e,n){var r=n("HIsA");r({target:"Math",stat:!0},{DEG_PER_RAD:Math.PI/180})},"+3y3":function(t,e,n){"use strict";var r=n("HIsA"),i=n("PaPB"),o=n("t0cd"),a="Invalid number representation",s="Invalid radix",u=/^[\da-z]+$/;r({target:"Number",stat:!0},{fromString:function(t,e){var n,r,c=1;if("string"!=typeof t)throw TypeError(a);if(!t.length)throw SyntaxError(a);if("-"==t.charAt(0)&&(c=-1,t=t.slice(1),!t.length))throw SyntaxError(a);if(n=void 0===e?10:i(e),n<2||n>36)throw RangeError(s);if(!u.test(t)||(r=o(t,n)).toString(n)!==t)throw SyntaxError(a);return c*r}})},"+4Fn":function(t,e,n){"use strict";var r=n("POrF");t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},"+4Yi":function(t,e,n){var r=n("JqKL");r("Float64",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},"+65X":function(t,e){function n(t){return this.__data__.get(t)}t.exports=n},"+7Kl":function(t,e,n){"use strict";var r=n("HIsA"),i=n("Hiyu"),o=n("QD/U"),a=n("DDwO"),s=n("hXyk"),u=n("pxmn"),c=n("xOST"),l=n("2RC6").f,f=n("D8FR"),p=n("masK"),h=n("0Ccx"),d=n("Ji6T"),v=n("liI8"),m=n("kPvK"),g=n("twJ5"),y=m("observable"),b=g.get,_=g.set,x=function(t){return null==t?void 0:a(t)},w=function(t){var e=t.cleanup;if(e){t.cleanup=void 0;try{e()}catch(n){v(n)}}},E=function(t){return void 0===t.observer},S=function(t,e){if(!i){t.closed=!0;var n=e.subscriptionObserver;n&&(n.closed=!0)}e.observer=void 0},C=function(t,e){var n,r=_(this,{cleanup:void 0,observer:s(t),subscriptionObserver:void 0});i||(this.closed=!1);try{(n=x(t.start))&&n.call(t,this)}catch(l){v(l)}if(!E(r)){var o=r.subscriptionObserver=new T(this);try{var u=e(o),c=u;null!=u&&(r.cleanup="function"===typeof u.unsubscribe?function(){c.unsubscribe()}:a(u))}catch(l){return void o.error(l)}E(r)&&w(r)}};C.prototype=p({},{unsubscribe:function(){var t=b(this);E(t)||(S(this,t),w(t))}}),i&&l(C.prototype,"closed",{configurable:!0,get:function(){return E(b(this))}});var T=function(t){_(this,{subscription:t}),i||(this.closed=!1)};T.prototype=p({},{next:function(t){var e=b(b(this).subscription);if(!E(e)){var n=e.observer;try{var r=x(n.next);r&&r.call(n,t)}catch(i){v(i)}}},error:function(t){var e=b(this).subscription,n=b(e);if(!E(n)){var r=n.observer;S(e,n);try{var i=x(r.error);i?i.call(r,t):v(t)}catch(o){v(o)}w(n)}},complete:function(){var t=b(this).subscription,e=b(t);if(!E(e)){var n=e.observer;S(t,e);try{var r=x(n.complete);r&&r.call(n)}catch(i){v(i)}w(e)}}}),i&&l(T.prototype,"closed",{configurable:!0,get:function(){return E(b(b(this).subscription))}});var O=function(t){c(this,O,"Observable"),_(this,{subscriber:a(t)})};p(O.prototype,{subscribe:function(t){var e=arguments.length;return new C("function"===typeof t?{next:t,error:e>1?arguments[1]:void 0,complete:e>2?arguments[2]:void 0}:u(t)?t:{},b(this).subscriber)}}),p(O,{from:function(t){var e="function"===typeof this?this:O,n=x(s(t)[y]);if(n){var r=s(n.call(t));return r.constructor===e?r:new e((function(t){return r.subscribe(t)}))}var i=h(t);return new e((function(t){d(i,(function(e){if(t.next(e),t.closed)return d.stop()}),void 0,!1,!0),t.complete()}))},of:function(){var t="function"===typeof this?this:O,e=arguments.length,n=new Array(e),r=0;while(r<e)n[r]=arguments[r++];return new t((function(t){for(var r=0;r<e;r++)if(t.next(n[r]),t.closed)return;t.complete()}))}}),f(O.prototype,y,(function(){return this})),r({global:!0},{Observable:O}),o("Observable")},"+D6J":function(t,e){function n(t){return t!==t}t.exports=n},"+G+T":function(t,e,n){n("n2r9")},"+Gi7":function(t,e){var n=Array.isArray;t.exports=n},"+OvE":function(t,e,n){"use strict";var r=n("gUnd"),i=Object.prototype.hasOwnProperty,o=Array.isArray,a=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),s=function(t){while(t.length>1){var e=t.pop(),n=e.obj[e.prop];if(o(n)){for(var r=[],i=0;i<n.length;++i)"undefined"!==typeof n[i]&&r.push(n[i]);e.obj[e.prop]=r}}},u=function(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)"undefined"!==typeof t[r]&&(n[r]=t[r]);return n},c=function t(e,n,r){if(!n)return e;if("object"!==typeof n){if(o(e))e.push(n);else{if(!e||"object"!==typeof e)return[e,n];(r&&(r.plainObjects||r.allowPrototypes)||!i.call(Object.prototype,n))&&(e[n]=!0)}return e}if(!e||"object"!==typeof e)return[e].concat(n);var a=e;return o(e)&&!o(n)&&(a=u(e,r)),o(e)&&o(n)?(n.forEach((function(n,o){if(i.call(e,o)){var a=e[o];a&&"object"===typeof a&&n&&"object"===typeof n?e[o]=t(a,n,r):e.push(n)}else e[o]=n})),e):Object.keys(n).reduce((function(e,o){var a=n[o];return i.call(e,o)?e[o]=t(e[o],a,r):e[o]=a,e}),a)},l=function(t,e){return Object.keys(e).reduce((function(t,n){return t[n]=e[n],t}),t)},f=function(t,e,n){var r=t.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(i){return r}},p=function(t,e,n,i,o){if(0===t.length)return t;var s=t;if("symbol"===typeof t?s=Symbol.prototype.toString.call(t):"string"!==typeof t&&(s=String(t)),"iso-8859-1"===n)return escape(s).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var u="",c=0;c<s.length;++c){var l=s.charCodeAt(c);45===l||46===l||95===l||126===l||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||o===r.RFC1738&&(40===l||41===l)?u+=s.charAt(c):l<128?u+=a[l]:l<2048?u+=a[192|l>>6]+a[128|63&l]:l<55296||l>=57344?u+=a[224|l>>12]+a[128|l>>6&63]+a[128|63&l]:(c+=1,l=65536+((1023&l)<<10|1023&s.charCodeAt(c)),u+=a[240|l>>18]+a[128|l>>12&63]+a[128|l>>6&63]+a[128|63&l])}return u},h=function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],r=0;r<e.length;++r)for(var i=e[r],o=i.obj[i.prop],a=Object.keys(o),u=0;u<a.length;++u){var c=a[u],l=o[c];"object"===typeof l&&null!==l&&-1===n.indexOf(l)&&(e.push({obj:o,prop:c}),n.push(l))}return s(e),t},d=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},v=function(t){return!(!t||"object"!==typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},m=function(t,e){return[].concat(t,e)},g=function(t,e){if(o(t)){for(var n=[],r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)};t.exports={arrayToObject:u,assign:l,combine:m,compact:h,decode:f,encode:p,isBuffer:v,isRegExp:d,maybeMap:g,merge:c}},"+RP0":function(t,e,n){"use strict";n.r(e),n.d(e,"container",(function(){return i["o"]})),n.d(e,"createSceneContainer",(function(){return i["q"]})),n.d(e,"createLayerContainer",(function(){return i["p"]})),n.d(e,"lazyInject",(function(){return i["s"]})),n.d(e,"lazyMultiInject",(function(){return i["t"]})),n.d(e,"TYPES",(function(){return i["n"]})),n.d(e,"packCircleVertex",(function(){return i["u"]})),n.d(e,"BasePostProcessingPass",(function(){return i["b"]})),n.d(e,"BlendType",(function(){return i["c"]})),n.d(e,"ScaleTypes",(function(){return i["k"]})),n.d(e,"StyleScaleType",(function(){return i["m"]})),n.d(e,"AttributeType",(function(){return i["a"]})),n.d(e,"MapServiceEvent",(function(){return i["h"]})),n.d(e,"CoordinateSystem",(function(){return i["e"]})),n.d(e,"CoordinateUniform",(function(){return i["f"]})),n.d(e,"CameraUniform",(function(){return i["d"]})),n.d(e,"SceneEventList",(function(){return i["l"]})),n.d(e,"PositionType",(function(){return i["j"]})),n.d(e,"InteractionEvent",(function(){return i["g"]})),n.d(e,"PassType",(function(){return i["i"]})),n.d(e,"gl",(function(){return i["r"]})),n.d(e,"Scene",(function(){return pe})),n.d(e,"GaodeMap",(function(){return he["GaodeMap"]})),n.d(e,"GaodeMapV2",(function(){return he["GaodeMapV2"]})),n.d(e,"Mapbox",(function(){return he["Mapbox"]})),n.d(e,"Map",(function(){return he["Map"]})),n.d(e,"BaseLayer",(function(){return sn})),n.d(e,"PointLayer",(function(){return Lo})),n.d(e,"PolygonLayer",(function(){return Zo})),n.d(e,"LineLayer",(function(){return Mi})),n.d(e,"CityBuildingLayer",(function(){return fr})),n.d(e,"ImageLayer",(function(){return ei})),n.d(e,"RasterLayer",(function(){return ha})),n.d(e,"HeatmapLayer",(function(){return Hr})),n.d(e,"Control",(function(){return A})),n.d(e,"Logo",(function(){return R})),n.d(e,"Scale",(function(){return j})),n.d(e,"Zoom",(function(){return B})),n.d(e,"Layers",(function(){return P})),n.d(e,"Marker",(function(){return H})),n.d(e,"Popup",(function(){return ot})),n.d(e,"MarkerLayer",(function(){return tt})),n.d(e,"djb2hash",(function(){return x["m"]})),n.d(e,"BKDRHash",(function(){return x["a"]})),n.d(e,"getJSON",(function(){return x["s"]})),n.d(e,"getArrayBuffer",(function(){return x["q"]})),n.d(e,"getImage",(function(){return x["r"]})),n.d(e,"extent",(function(){return x["o"]})),n.d(e,"tranfrormCoord",(function(){return x["B"]})),n.d(e,"lngLatToMeters",(function(){return x["u"]})),n.d(e,"metersToLngLat",(function(){return x["x"]})),n.d(e,"longitude",(function(){return x["w"]})),n.d(e,"latitude",(function(){return x["t"]})),n.d(e,"validateLngLat",(function(){return x["D"]})),n.d(e,"aProjectFlat",(function(){return x["e"]})),n.d(e,"unProjectFlat",(function(){return x["C"]})),n.d(e,"lnglatDistance",(function(){return x["v"]})),n.d(e,"project",(function(){return x["z"]})),n.d(e,"padBounds",(function(){return x["y"]})),n.d(e,"boundsContains",(function(){return x["k"]})),n.d(e,"bBoxToBounds",(function(){return x["i"]})),n.d(e,"LRUCache",(function(){return x["c"]})),n.d(e,"bindAll",(function(){return x["j"]})),n.d(e,"rgb2arr",(function(){return x["A"]})),n.d(e,"decodePickingColor",(function(){return x["l"]})),n.d(e,"encodePickingColor",(function(){return x["n"]})),n.d(e,"generateColorRamp",(function(){return x["p"]})),n.d(e,"anchorType",(function(){return x["g"]})),n.d(e,"anchorTranslate",(function(){return x["f"]})),n.d(e,"applyAnchorClass",(function(){return x["h"]})),n.d(e,"DOM",(function(){return x["b"]})),n.d(e,"Satistics",(function(){return x["d"]})),n.d(e,"version",(function(){return Lh}));var r,i=n("/LZe"),o=n("m5Te"),a=n.n(o),s=n("txMq"),u=n.n(s),c=n("RgF4"),l=n.n(c),f=n("Xrqc"),p=n.n(f),h=n("cZYw"),d=n.n(h),v=n("r9+l"),m=n.n(v),g=n("hbjN"),y=n.n(g),b=n("fI5W"),_=n.n(b),x=n("IyCX"),w=n("2pGt");function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function C(t){var e=T();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function T(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(function(t){t["TOPRIGHT"]="topright",t["TOPLEFT"]="topleft",t["BOTTOMRIGHT"]="bottomright",t["BOTTOMLEFT"]="bottomleft"})(r||(r={}));var O=0,A=function(t){m()(n,t);var e=C(n);function n(t){var r;return u()(this,n),r=e.call(this),p()(d()(r),"controlOption",void 0),p()(d()(r),"container",void 0),p()(d()(r),"sceneContainer",void 0),p()(d()(r),"mapsService",void 0),p()(d()(r),"renderService",void 0),p()(d()(r),"layerService",void 0),p()(d()(r),"controlService",void 0),p()(d()(r),"isShow",void 0),r.controlOption=S(S({},r.getDefault()),t||{}),r}return l()(n,[{key:"getDefault",value:function(){return{position:r.TOPRIGHT,name:"".concat(O++)}}},{key:"setPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bottomright",e=this.controlService;return e&&e.removeControl(this),this.controlOption.position=t,e&&e.addControl(this,this.sceneContainer),this}},{key:"addTo",value:function(t){this.mapsService=t.get(i["n"].IMapService),this.renderService=t.get(i["n"].IRendererService),this.layerService=t.get(i["n"].ILayerService),this.controlService=t.get(i["n"].IControlService),this.sceneContainer=t,this.isShow=!0,this.container=this.onAdd();var e=this.container,n=this.controlOption.position,r=this.controlService.controlCorners[n];return x["b"].addClass(e,"l7-control"),-1!==n.indexOf("bottom")?r.insertBefore(e,r.firstChild):r.appendChild(e),this}},{key:"onAdd",value:function(){throw new Error("Method not implemented.")}},{key:"onRemove",value:function(){throw new Error("Method not implemented.")}},{key:"hide",value:function(){var t=this.container;x["b"].addClass(t,"l7-control-hide"),this.isShow=!1}},{key:"show",value:function(){var t=this.container;x["b"].removeClass(t,"l7-control-hide"),this.isShow=!0}},{key:"remove",value:function(){if(!this.mapsService)return this;x["b"].remove(this.container),this.onRemove()}},{key:"_refocusOnMap",value:function(t){if(this.mapsService&&t&&t.screenX>0&&t.screenY>0){var e=this.mapsService.getContainer();null!==e&&e.focus()}}}]),n}(w["EventEmitter"]);function k(t){var e=M();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function M(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var P=function(t){m()(n,t);var e=k(n);function n(t){var r;return u()(this,n),r=e.call(this,t),p()(d()(r),"layerControlInputs",void 0),p()(d()(r),"layers",void 0),p()(d()(r),"lastZIndex",void 0),p()(d()(r),"handlingClick",void 0),p()(d()(r),"layersLink",void 0),p()(d()(r),"baseLayersList",void 0),p()(d()(r),"separator",void 0),p()(d()(r),"overlaysList",void 0),p()(d()(r),"form",void 0),r.layerControlInputs=[],r.layers=[],r.lastZIndex=0,r.handlingClick=!1,r.initLayers(),Object(x["j"])(["checkDisabledLayers","onLayerChange","collapse","extend","expand","onInputClick"],d()(r)),r}return l()(n,[{key:"getDefault",value:function(){return{collapsed:!0,position:i["j"].TOPRIGHT,autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,name:"layers"}}},{key:"onAdd",value:function(){var t=this;return this.initLayout(),this.update(),this.mapsService.on("zoomend",this.checkDisabledLayers),this.layers.forEach((function(e){e.layer.on("remove",t.onLayerChange),e.layer.on("add",t.onLayerChange)})),this.container}},{key:"addVisualLayer",value:function(t,e){return this.addLayer(t,e,!0),this.mapsService?this.update():this}},{key:"expand",value:function(){var t=this.renderService.getViewportSize(),e=t.height;x["b"].addClass(this.container,"l7-control-layers-expanded"),this.form.style.height="null";var n=e-(this.container.offsetTop+50);return n<this.form.clientHeight?(x["b"].addClass(this.form,"l7-control-layers-scrollbar"),this.form.style.height=n+"px"):x["b"].removeClass(this.form,"l7-control-layers-scrollbar"),this.checkDisabledLayers(),this}},{key:"collapse",value:function(){return x["b"].removeClass(this.container,"l7-control-layers-expanded"),this}},{key:"onRemove",value:function(){var t=this;this.mapsService&&(this.mapsService.off("click",this.collapse),this.layers.forEach((function(e){e.layer.off("remove",t.onLayerChange),e.layer.off("add",t.onLayerChange)})))}},{key:"initLayout",value:function(){var t="l7-control-layers",e=this.container=x["b"].create("div",t),n=this.controlOption.collapsed;e.setAttribute("aria-haspopup","true");var r=this.form=x["b"].create("form",t+"-list");n&&(this.mapsService.on("click",this.collapse),e.addEventListener("mouseenter",this.expand),e.addEventListener("mouseleave",this.collapse)),this.layersLink=x["b"].create("a",t+"-toggle",e);var i=this.layersLink;i.title="Layers",n||this.expand(),this.baseLayersList=x["b"].create("div",t+"-base",r),this.separator=x["b"].create("div",t+"-separator",r),this.overlaysList=x["b"].create("div",t+"-overlays",r),e.appendChild(r)}},{key:"initLayers",value:function(){var t=this,e=this.controlOption,n=e.baseLayers,r=void 0===n?{}:n,i=e.overlayers,o=void 0===i?{}:i;Object.keys(r).forEach((function(e,n){t.addLayer(r[e],e,!1)})),Object.keys(o).forEach((function(e,n){t.addLayer(o[e],e,!0)}))}},{key:"update",value:function(){if(!this.container)return this;var t,e,n,r;x["b"].empty(this.baseLayersList),x["b"].empty(this.overlaysList),this.layerControlInputs=[];var i=0;for(n=0;n<this.layers.length;n++)r=this.layers[n],this.addItem(r),e=e||r.overlay,t=t||!r.overlay,i+=r.overlay?0:1;return this.controlOption.hideSingleBase&&(t=t&&i>1,this.baseLayersList.style.display=t?"":"none"),this.separator.style.display=e&&t?"":"none",this}},{key:"checkDisabledLayers",value:function(){for(var t,e,n=this.layerControlInputs,r=this.mapsService.getZoom(),i=n.length-1;i>=0;i--)if(t=n[i],e=this.layerService.getLayer(t.layerId),e&&e.inited){var o=e.getMinZoom(),a=e.getMaxZoom();t.disabled=r<o||r>a}}},{key:"addLayer",value:function(t,e,n){this.mapsService&&(t.on("add",this.onLayerChange),t.on("remove",this.onLayerChange)),this.layers.push({layer:t,name:e,overlay:n});var r=this.controlOption,i=r.sortLayers,o=r.sortFunction,a=r.autoZIndex;i&&this.layers.sort((function(t,e){return o(t.layer,e.layer,t.name,e.name)})),a&&t.setZIndex&&(this.lastZIndex++,t.setZIndex(this.lastZIndex)),this.expandIfNotCollapsed()}},{key:"expandIfNotCollapsed",value:function(){return this.mapsService&&!this.controlOption.collapsed&&this.expand(),this}},{key:"onLayerChange",value:function(t){this.handlingClick||this.update();var e=this.layerService.getLayer(t.target.layerId),n=null!==e&&void 0!==e&&e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this.emit(n,e)}},{key:"createRadioElement",value:function(t,e){var n='<input type="radio" class="l7-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild}},{key:"addItem",value:function(t){var e,n=document.createElement("label"),r=this.layerService.getLayer(t.layer.id),i=r&&r.inited&&t.layer.isVisible();t.overlay?(e=document.createElement("input"),e.type="checkbox",e.className="l7-control-layers-selector",e.defaultChecked=i):e=this.createRadioElement("l7-base-layers",i),this.layerControlInputs.push(e),e.layerId=t.layer.id,e.addEventListener("click",this.onInputClick);var o=document.createElement("span");o.innerHTML=" "+t.name;var a=document.createElement("div");n.appendChild(a),a.appendChild(e),a.appendChild(o);var s=t.overlay?this.overlaysList:this.baseLayersList;return s.appendChild(n),this.checkDisabledLayers(),n}},{key:"onInputClick",value:function(){var t,e,n=this.layerControlInputs,r=[],i=[];this.handlingClick=!0;for(var o=n.length-1;o>=0;o--)t=n[o],e=this.layerService.getLayer(t.layerId),t.checked?r.push(e):t.checked||i.push(e);i.forEach((function(t){t.hide()})),r.forEach((function(t){t.show()})),this.handlingClick=!1}}]),n}(A);function I(t){var e=L();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function L(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var R=function(t){m()(n,t);var e=I(n);function n(){return u()(this,n),e.apply(this,arguments)}return l()(n,[{key:"getDefault",value:function(){return{position:r.BOTTOMLEFT,name:"logo"}}},{key:"onAdd",value:function(){var t="l7-control-logo",e=x["b"].create("div",t),n=x["b"].create("a","l7-ctrl-logo");return n.target="_blank",n.rel="noopener nofollow",n.href="https://antv.alipay.com/l7",n.setAttribute("aria-label","AntV logo"),n.setAttribute("rel","noopener nofollow"),e.appendChild(n),e}},{key:"onRemove",value:function(){return null}}]),n}(A);function D(t){var e=N();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function N(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var j=function(t){m()(n,t);var e=D(n);function n(t){var r;return u()(this,n),r=e.call(this,t),p()(d()(r),"mScale",void 0),p()(d()(r),"iScale",void 0),Object(x["j"])(["update"],d()(r)),r}return l()(n,[{key:"getDefault",value:function(){return{position:r.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,name:"scale"}}},{key:"onAdd",value:function(){var t="l7-control-scale",e=x["b"].create("div",t);this.addScales(t+"-line",e);var n=this.controlOption.updateWhenIdle;return this.mapsService.on(n?"moveend":"mapmove",this.update),this.mapsService.on(n?"zoomend":"zoomchange",this.update),this.update(),e}},{key:"onRemove",value:function(){var t=this.controlOption.updateWhenIdle;this.mapsService.off(t?"zoomend":"zoomchange",this.update),this.mapsService.off(t?"moveend":"mapmove",this.update)}},{key:"update",value:function(){var t=this.mapsService,e=this.controlOption.maxWidth,n=t.getSize()[1]/2,r=t.containerToLngLat([0,n]),i=t.containerToLngLat([e,n]),o=Object(x["v"])([r.lng,r.lat],[i.lng,i.lat]);this.updateScales(o)}},{key:"updateScales",value:function(t){var e=this.controlOption,n=e.metric,r=e.imperial;n&&t&&this.updateMetric(t),r&&t&&this.updateImperial(t)}},{key:"updateMetric",value:function(t){var e=this.getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this.updateScale(this.mScale,n,e/t)}},{key:"updateImperial",value:function(t){var e,n,r,i=3.2808399*t;i>5280?(e=i/5280,n=this.getRoundNum(e),this.updateScale(this.iScale,n+" mi",n/e)):(r=this.getRoundNum(i),this.updateScale(this.iScale,r+" ft",r/i))}},{key:"updateScale",value:function(t,e,n){var r=this.controlOption.maxWidth;t.style.width=Math.round(r*n)+"px",t.innerHTML=e}},{key:"getRoundNum",value:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}},{key:"addScales",value:function(t,e){var n=this.controlOption,r=n.metric,i=n.imperial;r&&(this.mScale=x["b"].create("div",t,e)),i&&(this.iScale=x["b"].create("div",t,e))}}]),n}(A);function F(t){var e=z();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function z(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var B=function(t){m()(n,t);var e=F(n);function n(t){var r;return u()(this,n),r=e.call(this,t),p()(d()(r),"disabled",void 0),p()(d()(r),"zoomInButton",void 0),p()(d()(r),"zoomOutButton",void 0),Object(x["j"])(["updateDisabled","zoomIn","zoomOut"],d()(r)),r}return l()(n,[{key:"getDefault",value:function(){return{position:r.TOPLEFT,zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out",name:"zoom"}}},{key:"onAdd",value:function(){var t="l7-control-zoom",e=x["b"].create("div",t+" l7-bar");return this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,t+"-in",e,this.zoomIn),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,t+"-out",e,this.zoomOut),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),this.updateDisabled(),e}},{key:"onRemove",value:function(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}},{key:"disable",value:function(){return this.disabled=!0,this.updateDisabled(),this}},{key:"enable",value:function(){return this.disabled=!1,this.updateDisabled(),this}},{key:"zoomIn",value:function(){!this.disabled&&this.mapsService.getZoom()<this.mapsService.getMaxZoom()&&this.mapsService.zoomIn()}},{key:"zoomOut",value:function(){!this.disabled&&this.mapsService.getZoom()>this.mapsService.getMinZoom()&&this.mapsService.zoomOut()}},{key:"createButton",value:function(t,e,n,r,i){var o=x["b"].create("a",n,r);return o.innerHTML=t,o.title=e,o.href="javascript:void(0)",o.addEventListener("click",i),o}},{key:"updateDisabled",value:function(){var t=this.mapsService,e="l7-disabled";x["b"].removeClass(this.zoomInButton,e),x["b"].removeClass(this.zoomOutButton,e),(this.disabled||t.getZoom()<=t.getMinZoom())&&x["b"].addClass(this.zoomOutButton,e),(this.disabled||t.getZoom()>=t.getMaxZoom())&&x["b"].addClass(this.zoomInButton,e)}}]),n}(A);function U(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function V(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?U(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function q(t){var e=G();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function G(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var H=function(t){m()(n,t);var e=q(n);function n(t){var r;return u()(this,n),r=e.call(this),p()(d()(r),"markerOption",void 0),p()(d()(r),"defaultMarker",void 0),p()(d()(r),"popup",void 0),p()(d()(r),"mapsService",void 0),p()(d()(r),"sceneSerive",void 0),p()(d()(r),"lngLat",void 0),p()(d()(r),"scene",void 0),p()(d()(r),"added",!1),p()(d()(r),"eventHandle",(function(t){r.emit(t.type,{target:t,data:r.markerOption.extData,lngLat:r.lngLat})})),r.markerOption=V(V({},r.getDefault()),t),Object(x["j"])(["update","onMove","onUp","addDragHandler","onMapClick"],d()(r)),r.init(),r}return l()(n,[{key:"getDefault",value:function(){return{element:void 0,anchor:x["g"].BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}},{key:"addTo",value:function(t){this.scene=t,this.mapsService=t.get(i["n"].IMapService),this.sceneSerive=t.get(i["n"].ISceneService);var e=this.markerOption,n=e.element;e.draggable;return this.mapsService.getMarkerContainer().appendChild(n),this.registerMarkerEvent(n),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.update(),this.added=!0,this.emit("added"),this}},{key:"remove",value:function(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("mousedown",this.addDragHandler),this.mapsService.off("touchstart",this.addDragHandler),this.mapsService.off("mouseup",this.onUp),this.mapsService.off("touchend",this.onUp)),this.unRegisterMarkerEvent(),this.removeAllListeners();var t=this.markerOption.element;return t&&x["b"].remove(t),this.popup&&this.popup.remove(),this}},{key:"setLnglat",value:function(t){return this.lngLat=t,Array.isArray(t)&&(this.lngLat={lng:t[0],lat:t[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"getElement",value:function(){return this.markerOption.element}},{key:"setElement",value:function(t){var e=this;if(!this.added)return this.once("added",(function(){e.setElement(t)})),this;var n=this.markerOption.element;return n&&x["b"].remove(n),this.markerOption.element=t,this.init(),this.mapsService.getMarkerContainer().appendChild(t),this.registerMarkerEvent(t),this.update(),this}},{key:"openPopup",value:function(){var t=this;if(!this.added)return this.once("added",(function(){t.openPopup()})),this;var e=this.popup;return e?(e.isOpen()||e.addTo(this.scene),this):this}},{key:"closePopup",value:function(){var t=this;this.added||this.once("added",(function(){t.closePopup()}));var e=this.popup;return e&&e.remove(),this}},{key:"setPopup",value:function(t){return this.popup=t,this.lngLat&&this.popup.setLnglat(this.lngLat),this}},{key:"togglePopup",value:function(){var t=this.popup;return t?(t.isOpen()?t.remove():t.addTo(this.scene),this):this}},{key:"getPopup",value:function(){return this.popup}},{key:"getOffset",value:function(){return this.markerOption.offsets}},{key:"setDraggable",value:function(t){throw new Error("Method not implemented.")}},{key:"isDraggable",value:function(){return this.markerOption.draggable}},{key:"getExtData",value:function(){return this.markerOption.extData}},{key:"setExtData",value:function(t){this.markerOption.extData=t}},{key:"update",value:function(){if(this.mapsService){var t=this.markerOption,e=t.element,n=t.anchor;this.updatePosition(),x["b"].setTransform(e,"".concat(x["f"][n]))}}},{key:"onMapClick",value:function(t){var e=this.markerOption.element;this.popup&&e&&this.togglePopup()}},{key:"updatePosition",value:function(){if(this.mapsService){var t=this.markerOption,e=t.element,n=t.offsets,r=this.lngLat,i=r.lng,o=r.lat,a=this.mapsService.getBounds(),s=this.mapsService.lngLatToContainer([i,o]);if(e){e.style.display="block";var u=this.mapsService.getContainer(),c=0,l=0;if(u&&(c=u.scrollWidth,l=u.scrollHeight),Math.abs(a[0][0])>180||Math.abs(a[1][0])>180){if(s.x>c){var f=this.mapsService.lngLatToContainer([i-360,o]);s.x=f.x}if(s.x<0){var p=this.mapsService.lngLatToContainer([i+360,o]);s.x=p.x}}(s.x>c||s.x<0||s.y>l||s.y<0)&&(e.style.display="none"),e.style.left=s.x+n[0]+"px",e.style.top=s.y-n[1]+"px"}}}},{key:"init",value:function(){var t=this,e=this.markerOption.element,n=this.markerOption,r=n.color,i=n.anchor;if(!e){this.defaultMarker=!0,e=x["b"].create("div"),this.markerOption.element=e;var o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height","48px"),o.setAttributeNS(null,"width","48px"),o.setAttributeNS(null,"viewBox","0 0 1024 1024");var a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),a.setAttributeNS(null,"fill",r),o.appendChild(a),e.appendChild(o)}x["b"].addClass(e,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach((function(n){var r,i,o=(null===(r=t.markerOption)||void 0===r?void 0:r.style)&&(null===(i=t.markerOption)||void 0===i?void 0:i.style[n]);e&&(e.style[n]=o)})),e.addEventListener("click",(function(e){t.onMapClick(e)})),e.addEventListener("click",this.eventHandle),Object(x["h"])(e,i,"marker")}},{key:"registerMarkerEvent",value:function(t){t.addEventListener("mousemove",this.eventHandle),t.addEventListener("click",this.eventHandle),t.addEventListener("mousedown",this.eventHandle),t.addEventListener("mouseup",this.eventHandle),t.addEventListener("dblclick",this.eventHandle),t.addEventListener("contextmenu",this.eventHandle),t.addEventListener("mouseover",this.eventHandle),t.addEventListener("mouseout",this.eventHandle)}},{key:"unRegisterMarkerEvent",value:function(){var t=this.getElement();t.removeEventListener("mousemove",this.eventHandle),t.removeEventListener("click",this.eventHandle),t.removeEventListener("mousedown",this.eventHandle),t.removeEventListener("mouseup",this.eventHandle),t.removeEventListener("dblclick",this.eventHandle),t.removeEventListener("contextmenu",this.eventHandle),t.removeEventListener("mouseover",this.eventHandle),t.removeEventListener("mouseout",this.eventHandle)}},{key:"addDragHandler",value:function(t){throw new Error("Method not implemented.")}},{key:"onUp",value:function(t){throw new Error("Method not implemented.")}}]),n}(w["EventEmitter"]),W=n("Ixdt"),X=n.n(W),Z=n("VtbN"),Y=n.n(Z);function K(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function J(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?K(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Q(t){var e=$();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function $(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var tt=function(t){m()(n,t);var e=Q(n);function n(t){var r,i;return u()(this,n),i=e.call(this),p()(d()(i),"markers",[]),p()(d()(i),"markerLayerOption",void 0),p()(d()(i),"clusterIndex",void 0),p()(d()(i),"points",[]),p()(d()(i),"clusterMarkers",[]),p()(d()(i),"mapsService",void 0),p()(d()(i),"scene",void 0),p()(d()(i),"zoom",void 0),p()(d()(i),"bbox",void 0),i.markerLayerOption=X()(i.getDefault(),t),Object(x["j"])(["update"],d()(i)),i.zoom=(null===(r=i.markerLayerOption.clusterOption)||void 0===r?void 0:r.zoom)||-99,i}return l()(n,[{key:"getDefault",value:function(){return{cluster:!1,clusterOption:{radius:80,maxZoom:20,minZoom:0,zoom:-99,style:{},className:""}}}},{key:"addTo",value:function(t){return this.scene=t,this.mapsService=t.get(i["n"].IMapService),this.markerLayerOption.cluster&&(this.initCluster(),this.update(),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.addMarkers(),this}},{key:"addMarker",value:function(t){var e=this.markerLayerOption.cluster;e&&this.addPoint(t,this.markers.length),this.markers.push(t)}},{key:"removeMarker",value:function(t){this.markers.indexOf(t);var e=this.markers.indexOf(t);e>-1&&this.markers.splice(e,1)}},{key:"hide",value:function(){this.markers.map((function(t){t.getElement().style.opacity="0"}))}},{key:"show",value:function(){this.markers.map((function(t){t.getElement().style.opacity="1"}))}},{key:"getMarkers",value:function(){var t=this.markerLayerOption.cluster;return t?this.clusterMarkers:this.markers}},{key:"addMarkers",value:function(){var t=this;this.getMarkers().forEach((function(e){e.addTo(t.scene)}))}},{key:"clear",value:function(){this.markers.forEach((function(t){t.remove()})),this.clusterMarkers.forEach((function(t){t.remove()})),this.mapsService.off("camerachange",this.update),this.markers=[],this.clusterMarkers=[]}},{key:"destroy",value:function(){this.clear(),this.removeAllListeners()}},{key:"addPoint",value:function(t,e){var n=t.getLnglat(),r=n.lng,i=n.lat,o={geometry:{type:"Point",coordinates:[r,i]},properties:J(J({},t.getExtData()),{},{marker_id:e})};this.points.push(o)}},{key:"initCluster",value:function(){if(this.markerLayerOption.cluster){var t=this.markerLayerOption.clusterOption,e=t.radius,n=t.minZoom,r=void 0===n?0:n,i=t.maxZoom;this.clusterIndex=new Y.a({radius:e,minZoom:r,maxZoom:i}),this.clusterIndex.load(this.points)}}},{key:"getClusterMarker",value:function(t,e){var n=this,r=t[0].concat(t[1]),i=this.clusterIndex.getClusters(r,e);this.clusterMarkers.forEach((function(t){t.remove()})),this.clusterMarkers=[],i.forEach((function(t){var e,r=n.markerLayerOption.clusterOption,i=r.field,o=r.method;if(t.properties&&null!==(e=t.properties)&&void 0!==e&&e.cluster_id){var a,s=n.getLeaves(null===(a=t.properties)||void 0===a?void 0:a.cluster_id);if(t.properties.clusterData=s,i&&o){var u=null===s||void 0===s?void 0:s.map((function(t){var e=p()({},i,t.properties[i]);return e})),c=x["d"].getColumn(u,i),l=x["d"].getSatByColumn(o,c),f="point_"+o;t.properties[f]=l.toFixed(2)}}var h=n.clusterMarker(t);n.clusterMarkers.push(h),h.addTo(n.scene)}))}},{key:"getLeaves",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t?this.clusterIndex.getLeaves(t,e,n):null}},{key:"clusterMarker",value:function(t){var e=this.markerLayerOption.clusterOption,n=e,r=n.element,i=void 0===r?this.generateElement.bind(this):r,o=new H({element:i(t)}).setLnglat({lng:t.geometry.coordinates[0],lat:t.geometry.coordinates[1]});return o}},{key:"normalMarker",value:function(t){var e=t.properties.marker_id;return this.markers[e]}},{key:"update",value:function(){var t=this.mapsService.getZoom(),e=this.mapsService.getBounds();(!this.bbox||Math.abs(t-this.zoom)>=1||!Object(x["k"])(this.bbox,e))&&(this.bbox=Object(x["y"])(e,.5),this.zoom=Math.floor(t),this.getClusterMarker(this.bbox,this.zoom))}},{key:"generateElement",value:function(t){var e=x["b"].create("div","l7-marker-cluster"),n=x["b"].create("div","",e),r=x["b"].create("span","",n),i=this.markerLayerOption.clusterOption,o=i.field,a=i.method;t.properties.point_count=t.properties.point_count||1;var s=o&&a?t.properties["point_"+a]||t.properties[o]:t.properties.point_count;return r.textContent=s,e}}]),n}(w["EventEmitter"]);function et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function nt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?et(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function rt(t){var e=it();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function it(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var ot=function(t){m()(n,t);var e=rt(n);function n(t){var r;return u()(this,n),r=e.call(this),p()(d()(r),"popupOption",void 0),p()(d()(r),"mapsService",void 0),p()(d()(r),"sceneSerive",void 0),p()(d()(r),"lngLat",void 0),p()(d()(r),"content",void 0),p()(d()(r),"closeButton",void 0),p()(d()(r),"timeoutInstance",void 0),p()(d()(r),"container",void 0),p()(d()(r),"tip",void 0),p()(d()(r),"scene",void 0),r.popupOption=nt(nt({},r.getdefault()),t),Object(x["j"])(["update","onClickClose","remove"],d()(r)),r}return l()(n,[{key:"addTo",value:function(t){var e=this;return this.mapsService=t.get(i["n"].IMapService),this.sceneSerive=t.get(i["n"].ISceneService),this.mapsService.on("camerachange",this.update),this.scene=t,this.update(),this.popupOption.closeOnClick&&(this.timeoutInstance=setTimeout((function(){e.mapsService.on("click",e.onClickClose)}),30)),this.emit("open"),this}},{key:"close",value:function(){this.remove()}},{key:"open",value:function(){this.addTo(this.scene)}},{key:"setHTML",value:function(t){var e,n=window.document.createDocumentFragment(),r=window.document.createElement("body");r.innerHTML=t;while(1){if(e=r.firstChild,!e)break;n.appendChild(e)}return this.setDOMContent(n)}},{key:"setLnglat",value:function(t){return this.lngLat=t,Array.isArray(t)&&(this.lngLat={lng:t[0],lat:t[1]}),this.mapsService&&this.mapsService.on("camerachange",this.update),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"setText",value:function(t){return this.setDOMContent(window.document.createTextNode(t))}},{key:"setMaxWidth",value:function(t){return this.popupOption.maxWidth=t,this.update(),this}},{key:"setDOMContent",value:function(t){return this.createContent(),this.content.appendChild(t),this.update(),this}},{key:"remove",value:function(){return this.content&&this.removeDom(this.content),this.container&&(this.removeDom(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("click",this.onClickClose),delete this.mapsService),clearTimeout(this.timeoutInstance),this.emit("close"),this}},{key:"isOpen",value:function(){return!!this.mapsService}},{key:"createContent",value:function(){this.content&&x["b"].remove(this.content),this.content=x["b"].create("div","l7-popup-content",this.container),this.popupOption.closeButton&&(this.closeButton=x["b"].create("button","l7-popup-close-button",this.content),this.popupOption.closeButtonOffsets&&(this.closeButton.style.right=this.popupOption.closeButtonOffsets[0]+"px",this.closeButton.style.top=this.popupOption.closeButtonOffsets[1]+"px"),this.closeButton.setAttribute("aria-label","Close popup"),this.closeButton.innerHTML="&#215;",this.closeButton.addEventListener("click",this.onClickClose))}},{key:"creatDom",value:function(t,e,n){var r=window.document.createElement(t);return void 0!==e&&(r.className=e),n&&n.appendChild(r),r}},{key:"removeDom",value:function(t){t.parentNode&&t.parentNode.removeChild(t)}},{key:"getdefault",value:function(){return{closeButton:!0,closeOnClick:!0,maxWidth:"240px",offsets:[0,0],anchor:x["g"].BOTTOM,className:"",stopPropagation:!0}}},{key:"onClickClose",value:function(t){t.stopPropagation&&t.stopPropagation(),this.remove()}},{key:"update",value:function(){var t=this,e=this.lngLat,n=this.popupOption,r=n.className,i=n.maxWidth,o=n.anchor;if(this.mapsService&&e&&this.content){var a=this.mapsService.getMarkerContainer();if(!this.container&&a){this.container=this.creatDom("div","l7-popup",a),this.tip=this.creatDom("div","l7-popup-tip",this.container),this.container.appendChild(this.content),r&&r.split(" ").forEach((function(e){return t.container.classList.add(e)}));var s=this.popupOption.stopPropagation;s&&["mousemove","mousedown","mouseup","click","dblclick"].forEach((function(e){t.container.addEventListener(e,(function(t){t.stopPropagation()}))}))}i&&this.container.style.maxWidth!==i&&(this.container.style.maxWidth=i),this.updatePosition(),x["b"].setTransform(this.container,"".concat(x["f"][o])),Object(x["h"])(this.container,o,"popup")}}},{key:"updatePosition",value:function(){if(this.mapsService){var t=this.lngLat,e=t.lng,n=t.lat,r=this.popupOption.offsets,i=this.mapsService.lngLatToContainer([e,n]);this.container.style.left=i.x+r[0]+"px",this.container.style.top=i.y-r[1]+"px"}}}]),n}(w["EventEmitter"]);function at(t,e){if(e||(e=document),e){var n=e.head||e.getElementsByTagName("head")[0];if(!n){n=e.createElement("head");var r=e.body||e.getElementsByTagName("body")[0];r?r.parentNode.insertBefore(n,r):e.documentElement.appendChild(n)}var i=e.createElement("style");return i.type="text/css",i.styleSheet?i.styleSheet.cssText=t:i.appendChild(e.createTextNode(t)),n.appendChild(i),i}}at('.l7-marker-container {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  position: absolute;\n }\n\n.l7-marker {\n\tposition: absolute !important;\n\ttop: 0;\n\tleft: 0;\n  z-index: 5;\n  cursor: pointer;\n}\n\n.l7-marker-cluster {\n  background-clip: padding-box;\n  border-radius: 20px;\n  background-color: rgba(181, 226, 140, 0.6);\n  width: 40px;\n  height: 40px;\n}\n.l7-marker-cluster div {\n  width: 30px;\n  height: 30px;\n  margin-left: 5px;\n  margin-top: 5px;\n  text-align: center;\n  border-radius: 15px;\n  font: 12px "Helvetica Neue", Arial, Helvetica, sans-serif;\n  background-color: rgba(110, 204, 57, 0.6);\n}\n.l7-marker-cluster span {\n  line-height: 30px;\n}\n\n.l7-popup-anchor-bottom,\n.l7-popup-anchor-bottom-left,\n.l7-popup-anchor-bottom-right {\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: reverse;\n        -ms-flex-direction: column-reverse;\n            flex-direction: column-reverse;\n}\n\n.l7-popup-close-button {\n  position: absolute;\n  right: 0;\n  top: 0;\n  border: 0;\n  border-radius: 0 3px 0 0;\n  cursor: pointer;\n  background-color: transparent;\n}\n\n.l7-popup-close-button:hover {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n\n.l7-popup-content {\n  position: relative;\n  background: #fff;\n  border-radius: 3px;\n  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n  padding: 10px 10px 15px;\n  pointer-events: auto;\n}\n\n\t/* layers control */\n\n.l7-control-layers {\n\t-webkit-box-shadow: 0 1px 5px rgba(0,0,0,0.4);\n\t        box-shadow: 0 1px 5px rgba(0,0,0,0.4);\n\tbackground: #fff;\n\tborder-radius: 5px;\n\t}\n.l7-popup-anchor-top,\n.l7-popup-anchor-top-left,\n.l7-popup-anchor-top-right {\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n}\n\n\n.l7-popup-anchor-left {\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: row;\n            flex-direction: row;\n}\n\n.l7-popup-anchor-right {\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: reverse;\n        -ms-flex-direction: row-reverse;\n            flex-direction: row-reverse;\n}\n.l7-popup {\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  will-change: transform;\n  pointer-events: none;\n  z-index: 5;\n}\n.l7-popup-tip {\n  width: 0;\n  height: 0;\n  border: 10px solid transparent;\n  z-index: 1;\n}\n.l7-popup-anchor-top .l7-popup-tip {\n\t-webkit-align-self: center;\n\t-ms-flex-item-align: center;\n\t    align-self: center;\n\tborder-top: none;\n\tborder-bottom-color: #fff;\n}\n\n.l7-popup-anchor-top-left .l7-popup-tip {\n\t-webkit-align-self: flex-start;\n\t-ms-flex-item-align: start;\n\t    align-self: flex-start;\n\tborder-top: none;\n\tborder-left: none;\n\tborder-bottom-color: #fff;\n}\n\n.l7-popup-anchor-top-right .l7-popup-tip {\n\t-webkit-align-self: flex-end;\n\t-ms-flex-item-align: end;\n\t    align-self: flex-end;\n\tborder-top: none;\n\tborder-right: none;\n\tborder-bottom-color: #fff;\n}\n\n.l7-popup-anchor-bottom .l7-popup-tip {\n\t-webkit-align-self: center;\n\t-ms-flex-item-align: center;\n\t    align-self: center;\n\tborder-bottom: none;\n\tborder-top-color: #fff;\n}\n\n.l7-popup-anchor-bottom-left .l7-popup-tip {\n\t-webkit-align-self: flex-start;\n\t-ms-flex-item-align: start;\n\t    align-self: flex-start;\n\tborder-bottom: none;\n\tborder-left: none;\n\tborder-top-color: #fff;\n}\n\n.l7-popup-anchor-bottom-right .l7-popup-tip {\n\t-webkit-align-self: flex-end;\n\t-ms-flex-item-align: end;\n\t    align-self: flex-end;\n\tborder-bottom: none;\n\tborder-right: none;\n\tborder-top-color: #fff;\n}\n\n.l7-popup-anchor-left .l7-popup-tip {\n\t-webkit-align-self: center;\n\t-ms-flex-item-align: center;\n\t    align-self: center;\n\tborder-left: none;\n\tborder-right-color: #fff;\n}\n\n.l7-popup-anchor-right .l7-popup-tip {\n\t-webkit-align-self: center;\n\t-ms-flex-item-align: center;\n\t    align-self: center;\n\tborder-right: none;\n\tborder-left-color: #fff;\n}\n\n.l7-popup-close-button {\n\tposition: absolute;\n\tright: 0;\n\ttop: 0;\n\tborder: 0;\n\tpadding: 0;\n\tfont-size: 25px;\n\tline-height: 20px;\n\tborder-radius: 0 3px 0 0;\n\tcursor: pointer;\n\tbackground-color: transparent;\n}\n\n.l7-popup-close-button:hover {\n\tbackground-color: rgba(0, 0, 0, 0.05);\n}\n\n.l7-popup-content {\n\tposition: relative;\n\tbackground: #fff;\n\tborder-radius: 3px;\n\t-webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n\t        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n\tpadding: 10px 10px 15px;\n\tpointer-events: auto;\n}\n\n.l7-popup-anchor-top-left .l7-popup-content {\n\tborder-top-left-radius: 0;\n}\n\n.l7-popup-anchor-top-right .l7-popup-content {\n\tborder-top-right-radius: 0;\n}\n\n.l7-popup-anchor-bottom-left .l7-popup-content {\n\tborder-bottom-left-radius: 0;\n}\n\n.l7-popup-anchor-bottom-right .l7-popup-content {\n\tborder-bottom-right-radius: 0;\n}\n\n.l7-popup-track-pointer {\n\tdisplay: none;\n}\n\n.l7-popup-track-pointer * {\n\tpointer-events: none;\n\t-webkit-user-select: none;\n\t   -moz-user-select: none;\n\t    -ms-user-select: none;\n\t        user-select: none;\n}\n\n.l7-map:hover .l7-popup-track-pointer {\n\tdisplay: -webkit-box;\n\tdisplay: -ms-flexbox;\n\tdisplay: flex;\n}\n\n.l7-map:active .l7-popup-track-pointer {\n\tdisplay: none;\n}\n\n\n.l7-popup-close-button:hover {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n\n.l7-popup-content {\n  position: relative;\n  background: #fff;\n  border-radius: 3px;\n  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n  padding: 10px 10px 15px;\n  pointer-events: auto;\n}\n\n/* general toolbar styles */\n\n.l7-bar {\n\t-webkit-box-shadow: 0 1px 5px rgba(0,0,0,0.65);\n\t        box-shadow: 0 1px 5px rgba(0,0,0,0.65);\n\tborder-radius: 4px;\n\t}\n.l7-bar a,\n.l7-bar a:hover {\n\tbackground-color: #fff;\n\twidth: 30px;\n\theight: 30px;\n  font-size: 20px;\n\tdisplay: block;\n\ttext-align: center;\n\ttext-decoration: none;\n\tcolor: #8E9DAB;\n\t}\n.l7-bar a,\n.l7-control-layers-toggle {\n\tbackground-position: 50% 50%;\n\tbackground-repeat: no-repeat;\n\tdisplay: block;\n\t}\n.l7-bar a:hover {\n\tbackground-color: #f4f4f4;\n\t}\n.l7-bar a:first-child {\n\tborder-top-left-radius: 2px;\n\tborder-top-right-radius: 2px;\n\t}\n.l7-bar a:last-child {\n\tborder-bottom-left-radius: 2px;\n\tborder-bottom-right-radius: 2px;\n\tborder-bottom: none;\n\t}\n.l7-bar a.l7-disabled {\n\tcursor: default;\n\tbackground-color: #f4f4f4;\n\tcolor: #bbb;\n\t}\n\n\n/* control positioning */\n\n.l7-control-container {\n\tfont: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;\n}\n.l7-control-hide {\n\tdisplay: none;\n}\n.l7-control {\n\tposition: relative;\n\tz-index: 800;\n\tpointer-events: visiblePainted; /* IE 9-10 doesn\'t have auto */\n\tpointer-events: auto;\n\t}\n.l7-control {\n\tfloat: left;\n\tclear: both;\n\t}.l7-top,\n  .l7-bottom {\n    position: absolute;\n    z-index: 1000;\n    pointer-events: none;\n    }\n  .l7-top {\n    top: 0;\n    }\n  .l7-right {\n    right: 0;\n    }\n  .l7-bottom {\n    bottom: 0;\n    }\n  .l7-left {\n    left: 0;\n    }\n\n  .l7-control {\n    float: left;\n    clear: both;\n    }\n  .l7-right .l7-control {\n    float: right;\n    }\n  .l7-top .l7-control {\n    margin-top: 10px;\n    }\n  .l7-bottom .l7-control {\n    margin-bottom: 10px;\n    }\n  .l7-left .l7-control {\n    margin-left: 10px;\n    }\n  .l7-right .l7-control {\n    margin-right: 10px;\n    }\n\n  /* attribution and scale controls */\n\n.l7-control-container .l7-control-attribution {\n\tbackground: #fff;\n\tbackground: rgba(255, 255, 255, 0.7);\n\tmargin: 0;\n\t}\n.l7-control-attribution,\n.l7-control-scale-line {\n\tpadding: 0 5px;\n  color: #333;\n\t}\n.l7-control-attribution a {\n\ttext-decoration: none;\n\t}\n.l7-control-attribution a:hover {\n\ttext-decoration: underline;\n\t}\n.l7-container .l7-control-attribution,\n.l7-container .l7-control-scale {\n  font-size: 11px;\n  padding: 5px 5px 2px 5px;\n  background: rgba(255, 255, 255, 0.7);\n\t}\n.l7-left .l7-control-scale {\n\tmargin-left: 5px;\n\t}\n.l7-bottom .l7-control-scale {\n\tmargin-bottom: 5px;\n\t}\n.l7-control-scale-line {\n\tborder: 2px solid #000;\n  border-top: none;\n  color: #000;\n\tline-height: 1.1;\n\tpadding: 2px 5px 1px;\n\tfont-size: 11px;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\t-webkit-box-sizing: border-box;\n\t        box-sizing: border-box;\n\n\tbackground: #fff;\n\t}\n.l7-control-scale-line:not(:first-child) {\n\tborder-top: 2px solid #777;\n\tborder-bottom: none;\n\tmargin-top: -2px;\n\t}\n.l7-control-scale-line:not(:first-child):not(:last-child) {\n\tborder-bottom: 2px solid #777;\n\t}\n\n.l7-touch .l7-control-attribution,\n.l7-touch .l7-control-layers,\n.l7-touch .l7-bar {\n\t-webkit-box-shadow: none;\n\t        box-shadow: none;\n\t}\n.l7-touch .l7-control-layers,\n.l7-touch .l7-bar {\n\tborder: 2px solid rgba(0,0,0,0.2);\n\tbackground-clip: padding-box;\n  }\n  /*logo */\n\n  .l7-ctrl-logo {\n    background-size: 100% 100%;\n    width: 89px;\n    height: 16px;\n    margin: 0 0 -3px -3px;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    background-repeat: no-repeat;\n    cursor: pointer;\n    background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALIAAAAgCAYAAAHBIxK2AAAABGdBTUEAALGPC/xhBQAAIJZJREFUeAHtfAl8Tkf3/9z7PNmDRFbZSawhQcRSaqva1xCqpataqrT2UkuUUiqlaKtafe1VS1pUiypB0dIgIkpKRPZIELI/2/zO98akN48nltL3838//84nNzNzzpkzc+eee+bMOXMfxijNaMJ7LOrGO/HdYfZ8fb12gD2JJINJdR8WNHVQnRtSn7hilpz0u2DMKaEcFhZmhdzLNbiPyNVlwPxcm4Qh93Fr0gO4Ol5hfqiz6Q14G+QzGpYzQ9nXrUl7X/fgbrXdG3skX7m26+bNW2fQqJ5XmCs6RQKd6EQwB0zgtKgsvCidGF+N8wV/SBLqSKnXzx2WKIHw1xNxq2xtrKsBXqgrbePt1rivJFmloa5OoD129NcVQwa9Phxwaflw3ifvHCus1YIVjW7fwEF66dIhdYO/XV7Qk+9HY/5F7RA+w0G5TdRxq7gw10FBPWwA+3r9jpkYGcoJ5/7YiFxMiYCjLspsekOeCiJ1AhJJNER+8rfTX/j4BNcUMNCLMmhF+wC3cE9RZmMd/0IQjeTtGdwJjURD5EajsRQN1EwEHjAkUVce2LLhnKf8xGId3ZhkX4uxmj7MMKqJz0ZmMr3MJNZBmphV8WDBOCCgo+2QiE7DF3005wvU75e8vMLs4+P3HwwN7do5MzOu2NcjpPHRX/csCqjt2wvtxEAy8xJ3o+7j3jjkcurpn2xtrT0EPiS0oQPKSOfi/ygqL9H/qNbls8EXuer4+65xUa149QnBvGYFgapAN21EZ+pnuH3rrrnKdNA/zCRmjoqGzu36RoL21q38BLAAjRgo6iir63g1QAOcOoU27DAgwKtpPzVMKU+qBWIuve3Jx0zw4j/eQ0CASeNnjUi5mrYH72ZxUfFV0emJ479/BvrM9KxDAgZZEjziTp1d8+pL415sEdJloIAhF7QCZmnQoCkuLkkXNPfkozU8b4wVb30P4i4ADNQ41P08mtSBogHc27Vx70CPEHeUgRNwgUOuTqBR8wwODraGSIkrKipKxqVuI300mntri1jz9OOs0IHeHUdvms2t0iG+vn5nxmnan5QeUff6GGWttpidSjvGbCSZJdAAGTMwtjWSH2G5XrOp3oEv9wuWxqdeUPchZkW8OGqcedmcdujgUcMOH/zltmgL2YW2Fu22fbMz6q2xM+IEvmvHiCGyRq7AK3QLe959+T6v46co0uVBisLk0/9SqIIhcnQiVBPqULJ4dPVd2ypLg6Dx8wxuhAGDHrCOHTtqUfZ2b6KsYYIOuUiXL1/dKW4SMJRxkbbpG9nv5ecVutlt+PSoNvw7VPg8V4X5wqf4YQVp9g+NDQZDITr2cm/8lNIGlbvp+edGD/946eqJqOKmoBJRhjyjrclk0qlZAqeumw8YOEwE6ILdgh0raN9pcHeWx9n3mViPh9IKnlmBVBWI4bfoePDAEcOGPz9WWUDBzMe1cUdft5CnUfb2DvFR8rsz2avrkOdmT18wJisz5zDaqthVWjwAtzRgtBF9VbSdVofXIPWmB2CCouYqUBUFH59QbwwEqg0XykAi96/VuCEetRrm59msEfA+nqEtAUeqNEt324JGJEsDxpMi26gnaCpUxqJk6bahkGFp3akrZO8IBurcVGponpGW+VOdQP++uIAznzE1/cBBvRRZTc+OP0miUBJ78OiyxNxE6uX+KSP3vDIZuEE/z9BgWZZtHHj1oxZbkS6uJFNqIn+SWSy1AubjFtLd171xoHrQooyFQJRB7+0eHBrk2cxNtBW5mgYwoYNFXg5r7CvoFXWxajQ3mjiTc84wVkB2kTWt5NYk3lZ02SCvzphDDVrNZOY2p3mdA0wrhQoGSm5ig6SRyTsqwSxUaMKk+t4tXJIy4/IsoP82yNu7pYusKwk2WdslZmScvGHOyNs1tJ5GNrjVaeT2W2xsLCnuv5J6woQq/QtbXoLCMJqYtbWj208pKbGK4aamgWJR19XlCvpFEdxn6SDOl0byAjXB/cp8rlM/PteZ83k1T92PTuAw0Ly8GychmosWLB/v7xFSW+AeJQ/0auyLiYFEBgQ0dYKdDRsJfFOvpe0V76fgCVrgkNQTao63hAONr2vjFtAFltoTTFLzB415Al7RFdNipHRviWlLbzCHhZ05HxfEy9e7T/zX8FV+XLk+96e8Tl0xOJZfOpjdKp4kzboZXgGrouDj1rTunHnTQl1caoZ/unLNlKnTx32sNxobR0ZGakQTDCY8tEtEkG+LfihDg+NC2ccjpBXoyMTqVaLjTaFLduxe219XqH+67HYGKU5D0pbN30X5+vl0a9m6mZOPTxvFUIayPRAbM1RpS1uztp0a/SD6e9hcYlKVqgi7QEg/DAyRsAUsKSlNLyvT56Bs8e2Ias4LZzfnfEowJyOOVocZDs9jt8YnMDvUZzblZ+jis1rwtqg/KMHgwEThCUOCUS64U/An6iiL9oIGcFjwqMOQQB0JdTyEXd/tfR/1rMzsWCrPBxwPCxJMfJMELVYq0KO+fNkXk6CHRV/qXPSLXA0XZejpqiRZ0IgcY7hzu+AS2TB3quInaNnU2vzSlNqcT/fhHSqAVJgawAunEXxCPU4W9MMlcRN0ryZMAl2XcOHm6YlnYgMAToIOuxks+YBBErGrAa0YtKDDDkeYAaBFErjSUl2uKOfm5v1GE9y1nOLe/4IO+b3YchfKw0wy3lZ6m2arxyr4KV4RURH54qtS/fGufEMZZ7Hja/Ko0ptsgYML0+kKGM+4wbTbmGQUtPfLMfBrWWc3gIZenX4aJmUp9OQdqunk4nv2QmzMus0rO730wtj0qu2DqnuQjCYbrOjYrINq5JuRe/CKQp3QtRMweivm0yur+FBQf9xk6WFQX99Tvw2GDO0390jssWXW1vKf6n4q7Dc1EOXledJwQxF7RV/EomQbptMXssJlNyT5YSe4dq1m/s907eik1WprNKjdur9sW/1AWt7535Ur6/zvN2/lpcds/37eM892mEgTXGHuHD1y4qLRYK0YvrJsMly5knKu0tg0csmObbvfC2/ZbETK9bOnW4TU7xtGEw0a2geZbKysz/Xu9txQvV6fX6VOrMTw/hVsdF8b/tbGgX1feqF1m7Bq5hda+/o+pVgXm9Ztmzk0ctTBlMyEi/fnaoZ9g3HH1xmv5GgwI/m3+oAZUOzkj4fx7rQBt7qdxnhJDiuj/YlBe9dG1pLNbF9D8c2dem2xVMA3NQhjBk6WMyVaelmZVaL0+vmcB/Tz/zVa+8lIPlWW2SLMQh559ZSNCE2sbCq/FBuLyrrbLJVHsYZMr/sdfpiKJOv1pOxtyISp0tQRtHXqhNWQZffSy5d/LBOwJ5H71mrcAnzSSA2Z84ObJPlCbiujSZubkRefZI5X61hL5pavbzMvY4kuTCuzm6nXE4+Ztwf/lBRmcW1zcSkwxsXF6bWmEnbQSPJsoqWMZumwUqYC7QCVi3Y6tMmnCZdYDItiJezj0v3MaLJmRmXX58w0zKJ3w3ww2IwE+fk7JSUll9b2Crl4NfPcJXOav1OH7fyfdSs6cS7zl18Y65GRd36Pmk/S+dwex0/tHTN54pxNJ0/I2tTsM5WccqDFQgn9rW4nyphg4J95ut9gZis7p6Ym3BI4L9eQ+sS/ntrbLXDIE8/fLKaHVP7goyN5whKyKKMHcsWboSasqsznORfSRYEaz3v29uZt4JiDxMC8QVJLjzntg+ow+dBe7BhRJ1MwQ/AVkRbwQbBj7OtTXgVu49qt79LDrW/OX4yrqjEJ/OIPVrwlfM2CB/rW6XQ3wd9SgjsM41SsC9pLt+H0AptK2fdRjFdYHHwdhY0QOsL1VZDimkIHfLLD8xThcmCF+p3SjOxc0WlV+Zervm2x68dN/QQ+MLC2DVSHqOOVw6ZFXDRgCXjUBQ1y7Py+3bO+HyQLO0bArGV2auRrkxRv1orPPgjXF6XVARxJz0vCPvz4vbkoT50899yTenvAD0ljLx0L8Gr2Et4C9XXnTkEiecNKv/xiU/q1nHNXlQmN2iYVlpWwL0qLmSR3ZNFgQCpCogXuLDMa45WrTH8AcCVpTL8Q7ChbVDhAgO6XmwwGj7AWoa9lZ+UcBt3ufZvn6Ar0bUSbP/+42cJQ7NhbNjj3ybpW2p0G3LtP966DUIYk0TbZDr4Kk9Ho7lXLw1+0g6qo6Wtz8+f9sfmARQzqPZNWiCCBJ/NLtrOz9SkoKPxDlmT1SiJIHiuH6oAeF5e1o9XRGjWqa6pXrxbcqlm3YY7Wtifu6WDeU1xHF59an1cDki9wm8nnU7h3AV0fergDNrsln0+BtKUoP0yizYJr/57DhuJ1wnY5/mziepTVr6e3R0hrsbPLyck7BrxIZO/eAi2uuwE4I3Aok5rIAtzPPbjtxQuXtgCOOtQTwkqrPvlqMmBd2vcfDGeSpfGCXrS7H96SujCnBy+oj6LComSoEoGvUA0A6EvZ8DLaO9nYsUOoSzNy57Oi4mJyBu2SpuRcj2rGvZievUsRgleBf5gk6cpabd62egFoaYtr6NFl8DaUoz96LzTAq0kDlNWppLhE2UTg9Tuf8MdG2sw4DRjQU9H7e3b/FE2vomLoU3nJjm92rYSEwoXZuX3EJvDZsWtdz/+sjGlqMJqCXx/90jzALlz4syQl5awi7aj/EwnxPfC1srJy7ti232Sb6jZHRT+VJvm909I3pjKWayxjYdODeLkO1hnC2OLC/mhQWsJO6UvInCtjHQWDB+XKK2tvF3Dq5JkvVR4t/tzwiHk6namuefunwruvEq9ft86RW4Ef9sqQcK2WXRkzYtKBgtsFGYCNHjHpt3enzd+cnpvwo8pHbKQd2Wg9M3qDhjz9tqd+O7tao2XZqP+TKf8Ga3vyzP630EdGRpY+OTnutuiv0iQDqDOxVgaaSDLpjqMuResukoXHpwTw7jT5XnQlfHBBOgPcgxIiEqu+jG4NuoYN63a4mHzio0vJvy7Blhcwa2srWW0NAFZVgh0uaTSKj0LQYFERZVmy+WP1Z2uno25vZyd/tX5FO5T79x72faoF+xm4J5m4geLOPl7PHPvl1CeyLF1T875nkpdckq7qdOwIqY4aEz35i+XEXCYJ30MXs7dnSghSzaSqMunN2n36dZsBfG7uzYt3r0vpaVm/AHbkxJ4xJYWpD80PbapK6bmnL8+dvURRJXsPbXu5W49OU6n/ItA/zEapKr4PA8fC7OVVS1EXgwe8sq9Nh4aJ6nYWdyrFmayLvQsrIwleF8n4Jk9ntlCvo00gZ6ujE6UHBujQAZw2ZY52Cv8fvj/wwahXJu6VGFdu2sh4rdTs+M6+fl7dSAI+kTS0yfkbCWEndbhJIzPdjRu3TgcGBijqbcHc6Km21iz+b7C22KTEaGxFi1slHDyLsrGgKHr5kvYCsW3btkpeynskGYSrmaQnvTufLubhyL6WDGwK0zH9ypvSKMHoQXmuoaztz0diJoHu9VfePp6el3BYeOGstVYJ0Ys/VSR81OjhPmQqKAvbg3hqZNOd9PTsZNAt/3Rhi+5dW/cmy6SzaGfv7HS817NDlUUWsFWfrU9LzkxMFfjHyadMe3MZ7HPzCwJjMnK/8JbNI6rib1GSQfxpoTT7TRs+mYzLSJJoWkTYsKqYWIIbTNzWuaZTA0iWOT4l+2zKxx99fpXCUKxXv+5hn6/akP7n5eRztbw9O5rToi7cnx5+0rWIvi/uSU4/M2BgZJ/ZAwb2KiO9HynaXLp0rIAkTZeff/tc7MFju2Qm0T7r8RPcnJa43MjL1+PtocUif8SrE2ZkpWWX0Tmbex4q5q/KNFLLO8mcHSTXRc7nRsmzSkILCOzWsJkAypLjBXE4U+mdtmSCGclC+AEbC8US0Wh+u5Jz7jraIWREYfRGuJG064n7AAvxCHHIMxorpLcac4q9lHesYjLRb06qrgtZMoVpuecqzCi0tZRg2wq4pXEiKCDwlnIRMMD9WFvrjGqrwhK9RRj5kp+bwLgS37NI8C/wgTOgSPLyV7ibxoa9Rp7kV8nrVo1E3qSjJSr/CuNlBUxHTswSZmLFkhWTtLSGUqSEjO7yXEN1DZW1FBuQrQllxzK5FVuTc5HtnnOIwlRf1X6Waa1GM24KoNGQT69SkpiGFtIyYwwrMK1jb1+9/U9bApV6/7fyxGYAwewzZ1IdiosNBvF2PzHmD8FIWfcoKPIV7ZZ7Q8rImmJGPWPpR0jqdMxEAs5IgEkWCUm6mf6YRITIOXIFUC6heCvIyguhPIR5s1PE9TYrMixlWkM9ZqRwC2jLkywKSm4tPc005KKeOxe+qb+oKhE9fAUOvLLi0ubYH6AVNpoaLU++lnWezs8/OLbw8D09GUp8HkB7wHCEEwVHjBkOxqvX7x906kgOzMvn89qZWLm7SbSXmXwnqLHLMdVmWKAq5eolSY2wtDyp8aIcFNSqekl+Uftjhy5IbduGV0tKulrCdMEGrcRupeYm/iLoLOXkMpJqe4fUN+hZHRM3keQ9Wip3IGiSEIupmLjooXwByeoUA2daCrSw4nx2Kucye86qhJUq7MUKSznt+SqSHcq0KAqY1okZxqySrlcQUIEvJ7e+RDocW2JdmR3T8K0UT2lOwk1viKQnh2oUuaIqrFt120ct4ySGwaALHDPuVb8ZM9+OxjlFOh95oGXzrsvpxk2e/jb7ERB6VL6PQw9hS79427lUqzOOGBGZj5i64IcPYUp1paHDXxzs+UH07NUCvnrVumlzZ334h0ajuZqWc+68gKtz+Bq//CSmq4kbrRL/PDbPyalGKPDJySm7n27V+wtJywozshMPqduYl4Ugw/oHDm455A8ryDjEhp3CkV+/HxEYGKC0/XDRyreXLVmVbKeyE8HTPOE0DNmONhS3Gu0f4NPTHP+gOj7JGRwx4icYzRU7kUlfSzMW9+PJJMTLS03MztqahXs1YuuK8tmAqFgp70FM74eXxpeHTvhkR3eKY2wic6K5YmRoWBE51UdI825tuV/7h8Uh1qQzFAf26vusy8zZE1eKdt6+Xl1ooovbt+795fVUXRuC03rzzyecisZBYwoCsvETRgbcupFfunrl1mwSHtIW7EpqduKF5My4VBIG9w3rt7L+g3qtggsRI3t91IvzNq7d/sKVK1drk8bOtaSZ16zc3pw0sdV332/sLYSYzofd7tdj+H/Aw1O2/S0DhX8wlWvFv7eI0jpJqs1gs33brv09ej6TT7wqFKulIbt7utalw5RKxJwO4+yCEGMDFdjILbFCkNFw6k7py0XP8qu0Fm8nl4UTcW1nY81ORHXjPaL2SZcFcxq2xNbUXsSstB0oiCbA5TkWCCMvYQbda9KotCuVkCbTQGYyNCFb3ESh72wmayOlRbePV6L5m5UAOh+sK8wNh4tzxaeLF99lY6KjunGuri7h0BZf/GfZBfhQfDyaNEnPSUgw70o5bm8yuZrDUcdSTXftYL4EaiT5tobZJqXknsq+p52e+wB28vT+cfQyPYtyxOA+nw/oPXwPyiKl5ibE+Xs06UJb9x/OJB4OdXd3aUMmkPX2XWsnNAvu8EGZJDWhZfi62izyouPDRh2v9cabr/iGt2o6UvCa9c7CqfQFo0Gy0ZyJyyg/uiZw/0SuNocelX9qbvwv8F5+suxzv6VLPo211J6EvRZWnCXL5jUb+sKAoaDBh5SYKzyT1JxzRzAvlQQZRNN+kn6Oepq3JXn8gar+JKZBRPQbffnSJ+qEpAgdCTjnt/UbGCt7jkq+lbZwVmQqGPlcaVJWhRBHPcXd6ciG29xDbOecNtIGCm3VkKJLnqiy0JfcbIvxxx7fOc7Gxkpx6G3ZEDNn1rsLEy5cOb6GIkIuPXt3eef5FwaO3LxpByNteTM9Pb7yGO7az7+fPTBR+Km2bIyZPWPa/Pi1m1b0b0FONnt7Oz/0g0Su6oLLSVd+GP/G9G9154uLtZL2lsnGPo6XFjyDB0wx33JCC/8NBoavKQKBogB8noskH89jxs5dOw78MC7h5/VkUjiSQD+1fvPKDi8+/+ZhX0/lawzl5bv70jZ1dHTQTJ0xfr5gv+/HQ4vXr/smC/GC9Ixz6QL+T+aPo5ExrvT0E/BwX7I0RoR9TSajFebgmWc7TgINjk6OG/POKVnLctKzE06SECtNK2+67nKLOipdIEEOp7jI73QKg+lKWE3aDB56N5wPuUvCpInpCazEEM7yS86wQloh7tBVXFLEbpa8REL8fjkdl2Y158NItDOp/XnZimXM/ZW3lJY+WSH2dwttRt5o+6+3r+6C4A/6Tkq6EjNp4uz44pIS05wZi94V4164ZNYSN1cXKyz54hyowFnK+0X0GJGccXpneKuwQRcvJB3YvXPfAgSX6CPVeBK2avUb1huy79COLecuHp1Dx5fgU+wCId70zapnhNdZaGPwb9mq2SgBRx45uK87p1Xgjh3NjrV0FmHm92YtnirGggfYp09XV5PRFIBNIeDGohstke/9edtrCNmifC0l/YdXXxz3Cxy76dfPVz4DC4L/sYQvkhFh+HT1h62EEP+45+dFEGJ8xp6enXhSfUsWBRkEM45KubIDe5qE+DsE9XSlNM2lbMv0YP4OxaJIzsm+ePd6DivMb8vu6GKYviyJFRq7Se/d+hq4KMa104PZLBLgDXRiRkPhbU5h7s03PNgx4J9UCvBsGqDnBh/YoO07PDUefEtLyzK7tI9Yh80dQtTr1m7JPHL4+HLg6GxB9f2Hy0M1CNtg5wx4VUnWaO1bNn12YJBfizf69hr+5Zujpqx5PnLUp43rtZvVtFHHCBFAdHFxDlu28v1w8JEljf6FIaN/FseJ8DGe4I9wvYAj37Z113XZVnsaZxUyM8+nkYJJw5Gjn386/JFos3Tl+3NQ1nMpDB/aGbmpxkfL329Wu46fcqiD7je7U9u+n0M72jr5nhDt/ldzH7fgIJOJ+0+aNjaw34AeihI6ezph7YiX3zpGk3sjI/fsWfN7q1KQQUibvNIF51kECfMysmuNlFPUjy2sHchWvhzAyXNM9aWshDTsQOmD0vrShwWKkI704vZFddkXRDuXhJgsELKYS9n7CxKkF1b8KNFr8WQS3Gw6g74JztRNeefNDwXXyeNnzSIBI88gl40GpkRyhg4aeeD69RvKQ8aSHbNrfS+Exvy8yn9OQ7Q1z2kCd+D8BDZnGdcTTqTmJCTjRKgky3nQntezc0+JNl7etRT7WqM1XcOuX9ZoKnlvBB1yrdb6CmhwqU2cjNzEs/A2vPj82Nj0tMz9oLWzt/Pfd3DbYNjntJmr06x5Ywf6ZEIRbuBHvz5lWplOp7jrnvRxZPD/byZ8IE0u3IZ16wbaTpw8Zgn6pjBiQq9uQ2Po6/SyjJwEiy/qfQW5/AYkvviyNIEEcgIFqstweou07GgXA4sZ6cxrlNP89X9MDe7sILM9JK4v60CrYyUlejZy0Z/SrL+oHr8EB7w4q7hr78ZZcLMJritXL16jXr5FGZsoQdOqTfNRM2ZNrGvU81pVfXUGWnoZlN2seqOl8PgH/dFWtm4noF07te33KX0GmIv+GjdpOIzs4SCUN2xZ9Q5lyrPbuuW7uT/tPXjLykq6bMmzAfr/pVQs3WmG8W785rMRlCkr//w50eWrKWPx9zyHuzenvZs/MItOl1a85cGvajjbpJNYdYpd97C3YkfH2fGeK0qkdDCg3x4JoI3fXknH6hMNRnFLx9igZTnSwQd28IgExw9fpO9PTVbQVOR6CkFzslvP0pI/+36scLwRp+9A88a4Vxbt2bV3WHz8hUb0uzm3yn9i4H6tVbgHmCQqykcuptBX2/6uYXFk37d4+413pn62Jvo/YPLm+Nfmt+/QZouzs5PiL066dHnrhHEz4xB8QLDnkTv6hxuQtyWAPESKXV9VV5JReyM193QWBNTXlT4Y4boaeGF9fL26og3cbF9vjsmRtdqcq9nxVX6R9NCCDKYf50jfv+3EO5gYHYbjzItATZg1OzVG5t3IFrWmjeGPpL9cCQ8HXYpGw3rQB38XUX2SCd8ilOmMrouXzAmBpgJvsnUNg/u/shBlnMC2dD7Wzy24HTaAzVuFxtSrFxhBk6fd+u1X8+rXaT2Jlcmt6ZzVHQMYPKEk0SecYEVnd/WCpZNzjZoKjII28FrgvK9tDftjly//dkfQIL+WF5dF9nDyrl37WLeYZ+b3j+g5kzaX9s2aN3kV+OLC4iud2vXfiMMqdYJdfk2NBfT/jfTc0P49unXrVKXQiVEWFhUXvT12xgHaK+jpxf3doNH7IUjWf0DPZwXNvh8OHkFZMsiKshRw8/yRBBmNl+VLZ0fb8ZayzH4krdyEnpQnudbiKRxMAbry9Y5gJwnfOzpfUpZF804fp46dOwlxvY5dnnZ64aVIRbOC39ovN8/GAW9ZsrpoSYhBU82dnczPkbpiI5iUcrK1ra2Nl2M1x7oHf/lueOd2/TeYmEnxAID2iSSDdQbZVp6ff7J214IPZ3YnnnLdunUiyNSJuMvfSC/fi8eOnepAp6EOnss5Rydc/kp0EDORfuXOZeyoqSeDmzSIQVtg8Q3K4IGvzkSZW9vd87sdgP+3Ejw05n3hFxroMgffU6f7KBs4uM8fy5euTjFKRkf6ks4FRJ61PJojL7hTePH99z5Kwsuael3R2gBbTPcMwiKVBeBkxh0KtGw7mQ/dhbeUynihvrU2sKEr2JPb1Km7h238a+ylp4zc6IRNXsdObV3JTswqKCw0kUeCNmLxiWp68zLOBpTeLm5LGydt377dXJycnazhewUd/K/YLZPmk8aOf80/LSW96Ntvf8jFRGodXA5iyRf88Es5xQZda0GbkZZVtGP77ntocaKXlRW3wQOv5ugot+vUyqluUGB18CGT5hZ+jwuOfRx0FbzVOcLQaz7Z0Q6eCsDRHzayiodCI58URwXVbR6l/Lghavw6hYGZsDr/rYSNLSKQcfS7AwiOSGWF4eJewRAmRVAD59MPOjPytwUZncAN5yyzhVacDSFlbDJIbO1qkzQXuP9Gql+/bTXj7WLbUq1t4V3H+kN3q5zWOnq5Jn05Jdm6GvMTExPJnC9PCDgYC2/X1Mp6o38j1xv3m0Q1LT5wu985DghlzGcxdqUaKzvSRpLJXtaFhdUpND8mLsZhKQcPuhSTxRL+UWFCkM3bPexZC/N2/9b/nYF/Z+AxZuD/AA8zEhkTLyOGAAAAAElFTkSuQmCC\');\n}\n\n\n\t/* layers control */\n\n.l7-control-layers {\n\t-webkit-box-shadow: 0 1px 8px rgba(0,0,0,0.4);\n\t        box-shadow: 0 1px 8px rgba(0,0,0,0.4);\n\tbackground: #fff;\n\tborder-radius: 2px;\n\t}\n.l7-control-layers-toggle {\n\tbackground-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAkCAYAAAGf7Ah0AAAABGdBTUEAALGPC/xhBQAABzdJREFUWAnVV3lslEUUn/l2F0tpwdAih1HEqCReDcphNCo1EkgFkXa5PNpuC0Fo2e7Wgko8KiaKWrvbK5672xYFpNtiRRuNiY0aURA14BGviBcVlaKltVa6+42/N9v5Mrtt05rwj/PHzjt+8743b+a9N8vYwKgMNlUQyemnMtAkaJajvb3dToQSGp8e6boopkr4VYgEMYwO0vhCTfMVzBcMf8bx086YyODcuM80zTqp9IWat+7evW8sMdIxIqqCLa6oiAaJpuEtcBqcc2HEWMZ0JclgZR/Nchf++ubrzKjJSguXS4tVjXvPjfb3/UAAacGTn/MOMb7QnjNpNqP/bKZ50Ai0tqYmCi0n4zbM+W+lBc7JBOa+QPhDwcTsxJXE2+32edKCL9h8hRDmRzpIOWydAylhrcMfDN+ugBRKSdP3KwPhsFJIPth02FISIYQwYsDYcVfWhy/Bon4JgumffMGmiGTwQ0B/sHml4q2ZFAD3WQIQVhx0IdFw8B189lolN+w8w5PnjPmlhJgtA8/vfn3iye7u3yGzDljDxZEG4097Cp3rSSjBtMHunp6vFR+HHoIxmbgTe1xHKssDHecLNFUjMzbqMs5ZlHF7ute17M84+TMHDzr+OvR9JwKdCms9yRkzJq6bPTsWXh05QOPUN+PUHyPWMPhm6UHd7vaUohWZPSRE8OqxpTyibQa/qcTlbEP0vwF7AWUAT3JM9dy69FfSNza+MU4awNE8iQtXSkJuGLleV852ov2h5jkwVof0mUs8aO4LhTuYYFOAjExId0wcFIPahpaLTkWiX9ECfHG/sLNi1i8+HODfgLFFRI96+INNi0cNTgTS1obKQh03aAuk9DeELzcj4pACYivvwvXrFK/PcQZiQWo+hmidpYMUjQC7EOB6xdNsGfAHwk/RDdOVw9Dm+NTUSWtWLDohDVQ37JkbiUT2DwMeVswZP+gtdM4x3HnLDhjcGM2XLWOISaenIGee9MCSgqgMht/H/q/SZYk0qviV3oKcj5XcioESyOoqIseFYDYloxnAGm/hcrcuk3JV2XBMl+pKqn6mENux11+w12m6jpqMMFn7rPPTHdwfCm8yTfG4tMaNu+GepPUFiqbM7T105ARSPQU+dY/LOC/N2gI65WEkyWUEtjmSppfkLvlRLaQ5VnZFDtGGzbheNRROKZmbu/AvUvh3tE4Wff2/0IUC+y2q+4VVoXBW1BSvkR7Rb8BW84lWJQBdlGozcs7GLy3Nd35OSqTxBqtfgkc1+sPjcqbDgEl6xK0dH5lv545LOCVL1/F+3CoY4eyY1+WcBiC2KYEHQBd5XDkyndE17xCm2Ug6BLcSwb3LigE1AlOYu6TS4HUwVEw0Df1osfBnLDwnpiFDCQPuvQ73Fkqxg8/hEVYLXt66MXbbzOK8bKre1hhkgDT0RDja3fEHytwZxCMLH0YWPkD0fxqjqUZDejDSV3z1LbexqPkEPJxKWLqtKOGbvPnZL460NlE/KgfkIZiRrfjShsQcG2QQDUwwXjcuZcID61Ys6ErUJ/LDOiCfLUzUjVQdEg0O4jn/ABEq0iuIjrEcwE0x/KGWNbjPj4BO00Gni0ZOoIPzLR5X9vMqqaQDqDzzENra4V5zp8sBZQcROYjsLvYUOPdbEVBKeiZ193QjCmwtZCM+ldS6EWYTH3wuNSV1i+pFCj/IAaWgGUfBq0N78qPM3DZcp9TxcTQeyzZm3ON2LatXpSlOP8BIB6qDLddHmHnFrBlpNZmZmdZbNXEB9XsRlZXFennqGHzoXW5DaId4iSoc/Q365EjnRjszPnYXZL9NDWUtGsqzCjAw7xprTypbn7fkaILcYqkInzzeX06C8emO8sKlS7stZQLxVMPes/+O9FVAvEpXob+utY6gZmfrtMjf/RUI+2odhF7wJbq+Gzf3zTj5CAwyaoEwozVoCzN1KKK00z7WUbZx9dIOklsO6CAZpu87i5gpHoJ8gtLh9vZixSO2KckV7qysf5Sc5uq2tjOix3rL0FW3IJuSNV0XM/iDs85LqxvqeKUD8n3LxUobt5WVuLJlS9IM4O9i09VRwWtxLWfpcix+hXjs8mZdjn19YuOiuKRgufzXqOuqQi2r8O+yAk/tl2Q/RMW7ETe8UdX1GJhHDM5qjDHJ5e7bs07qBp7ZsTe9t6/vUXykkLKEdLFbLgLJSUn3rrt1yXEdX/1C23jzVG+5Keg/B5r2wJD9g/NcaUAJq4MvXxxl/TWoATcoGc0Av4eUKnIXZlsvXpLHO0CS2KgOtGQgdeuwqWuUjGbUgrdszLHRXXDLF0oe54AS0kyPnc5Iz/2CmV7EeIzSwcjvsHQPXkUhld/kCP6Xu+DRNjg/SWHh+SnODF+aPeVh9XCydAPEsA4kAqsCzcuiTPiw7+maTj6SwGsVk/9gY9xbUpizR8MNS47aAd0C7s35CG8VdrxYyjl/FcdUgo73nY77X9D/Au9RDMh+aBoVAAAAAElFTkSuQmCC\');\n\twidth: 30px;\n  height: 30px;\n  background-size: 20px 20px;\n\t}\n\n.l7-touch .l7-control-layers-toggle {\n\twidth: 44px;\n\theight: 44px;\n\t}\n.l7-control-layers .l7-control-layers-list,\n.l7-control-layers-expanded .l7-control-layers-toggle {\n\tdisplay: none;\n\t}\n.l7-control-layers-expanded .l7-control-layers-list {\n\tdisplay: block;\n\tposition: relative;\n\t}\n.l7-control-layers-expanded {\n\tpadding: 6px 10px 6px 6px;\n\tcolor: #59626B;\n\tbackground: #fff;\n\t}\n.l7-control-layers-scrollbar {\n\toverflow-y: scroll;\n\toverflow-x: hidden;\n\tpadding-right: 5px;\n\t}\n.l7-control-layers-selector {\n\tmargin-top: 2px;\n\tposition: relative;\n\ttop: 1px;\n\t}\n.l7-control-layers label {\n  display: block;\n  padding: 8px;\n  }\n  .l7-control-layers label input[type="radio"],\n  .l7-control-layers label input[type="checkbox"] {\n  width: 14px;\n  height: 14px;\n  margin: 0;\n}\n.l7-control-layers-separator {\n\theight: 0;\n\tborder-top: 1px solid #D8D8D8;\n\tmargin: 5px -10px 5px -6px;\n}\n.mapboxgl-ctrl-logo {\n  display: none !important;\n }\n .amap-logo{\n  display: none !important;\n }\n');var st,ut,ct,lt,ft,pt,ht,dt,vt,mt,gt,yt,bt,_t,xt=n("/2LT"),wt=n.n(xt),Et=n("TFir"),St=n.n(Et),Ct=n("YcyD"),Tt=(n("BLox"),n("T0ZP")),Ot=n.n(Tt),At=function(){function t(e,n){u()(this,t),p()(this,"attribute",void 0),p()(this,"buffer",void 0);var r=n.buffer,i=n.offset,o=n.stride,a=n.normalized,s=n.size,c=n.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:i||0,stride:o||0,normalized:a||!1,divisor:c||0},s&&(this.attribute.size=s)}return l()(t,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),kt=(st={},p()(st,i["r"].POINTS,"points"),p()(st,i["r"].LINES,"lines"),p()(st,i["r"].LINE_LOOP,"line loop"),p()(st,i["r"].LINE_STRIP,"line strip"),p()(st,i["r"].TRIANGLES,"triangles"),p()(st,i["r"].TRIANGLE_FAN,"triangle fan"),p()(st,i["r"].TRIANGLE_STRIP,"triangle strip"),st),Mt=(ut={},p()(ut,i["r"].STATIC_DRAW,"static"),p()(ut,i["r"].DYNAMIC_DRAW,"dynamic"),p()(ut,i["r"].STREAM_DRAW,"stream"),ut),Pt=(ct={},p()(ct,i["r"].BYTE,"int8"),p()(ct,i["r"].UNSIGNED_INT,"int16"),p()(ct,i["r"].INT,"int32"),p()(ct,i["r"].UNSIGNED_BYTE,"uint8"),p()(ct,i["r"].UNSIGNED_SHORT,"uint16"),p()(ct,i["r"].UNSIGNED_INT,"uint32"),p()(ct,i["r"].FLOAT,"float"),ct),It=(lt={},p()(lt,i["r"].ALPHA,"alpha"),p()(lt,i["r"].LUMINANCE,"luminance"),p()(lt,i["r"].LUMINANCE_ALPHA,"luminance alpha"),p()(lt,i["r"].RGB,"rgb"),p()(lt,i["r"].RGBA,"rgba"),p()(lt,i["r"].RGBA4,"rgba4"),p()(lt,i["r"].RGB5_A1,"rgb5 a1"),p()(lt,i["r"].RGB565,"rgb565"),p()(lt,i["r"].DEPTH_COMPONENT,"depth"),p()(lt,i["r"].DEPTH_STENCIL,"depth stencil"),lt),Lt=(ft={},p()(ft,i["r"].DONT_CARE,"dont care"),p()(ft,i["r"].NICEST,"nice"),p()(ft,i["r"].FASTEST,"fast"),ft),Rt=(pt={},p()(pt,i["r"].NEAREST,"nearest"),p()(pt,i["r"].LINEAR,"linear"),p()(pt,i["r"].LINEAR_MIPMAP_LINEAR,"mipmap"),p()(pt,i["r"].NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),p()(pt,i["r"].LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),p()(pt,i["r"].NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),pt),Dt=(ht={},p()(ht,i["r"].REPEAT,"repeat"),p()(ht,i["r"].CLAMP_TO_EDGE,"clamp"),p()(ht,i["r"].MIRRORED_REPEAT,"mirror"),ht),Nt=(dt={},p()(dt,i["r"].NONE,"none"),p()(dt,i["r"].BROWSER_DEFAULT_WEBGL,"browser"),dt),jt=(vt={},p()(vt,i["r"].NEVER,"never"),p()(vt,i["r"].ALWAYS,"always"),p()(vt,i["r"].LESS,"less"),p()(vt,i["r"].LEQUAL,"lequal"),p()(vt,i["r"].GREATER,"greater"),p()(vt,i["r"].GEQUAL,"gequal"),p()(vt,i["r"].EQUAL,"equal"),p()(vt,i["r"].NOTEQUAL,"notequal"),vt),Ft=(mt={},p()(mt,i["r"].FUNC_ADD,"add"),p()(mt,i["r"].MIN_EXT,"min"),p()(mt,i["r"].MAX_EXT,"max"),p()(mt,i["r"].FUNC_SUBTRACT,"subtract"),p()(mt,i["r"].FUNC_REVERSE_SUBTRACT,"reverse subtract"),mt),zt=(gt={},p()(gt,i["r"].ZERO,"zero"),p()(gt,i["r"].ONE,"one"),p()(gt,i["r"].SRC_COLOR,"src color"),p()(gt,i["r"].ONE_MINUS_SRC_COLOR,"one minus src color"),p()(gt,i["r"].SRC_ALPHA,"src alpha"),p()(gt,i["r"].ONE_MINUS_SRC_ALPHA,"one minus src alpha"),p()(gt,i["r"].DST_COLOR,"dst color"),p()(gt,i["r"].ONE_MINUS_DST_COLOR,"one minus dst color"),p()(gt,i["r"].DST_ALPHA,"dst alpha"),p()(gt,i["r"].ONE_MINUS_DST_ALPHA,"one minus dst alpha"),p()(gt,i["r"].CONSTANT_COLOR,"constant color"),p()(gt,i["r"].ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),p()(gt,i["r"].CONSTANT_ALPHA,"constant alpha"),p()(gt,i["r"].ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),p()(gt,i["r"].SRC_ALPHA_SATURATE,"src alpha saturate"),gt),Bt=(yt={},p()(yt,i["r"].NEVER,"never"),p()(yt,i["r"].ALWAYS,"always"),p()(yt,i["r"].LESS,"less"),p()(yt,i["r"].LEQUAL,"lequal"),p()(yt,i["r"].GREATER,"greater"),p()(yt,i["r"].GEQUAL,"gequal"),p()(yt,i["r"].EQUAL,"equal"),p()(yt,i["r"].NOTEQUAL,"notequal"),yt),Ut=(bt={},p()(bt,i["r"].ZERO,"zero"),p()(bt,i["r"].KEEP,"keep"),p()(bt,i["r"].REPLACE,"replace"),p()(bt,i["r"].INVERT,"invert"),p()(bt,i["r"].INCR,"increment"),p()(bt,i["r"].DECR,"decrement"),p()(bt,i["r"].INCR_WRAP,"increment wrap"),p()(bt,i["r"].DECR_WRAP,"decrement wrap"),bt),Vt=(_t={},p()(_t,i["r"].FRONT,"front"),p()(_t,i["r"].BACK,"back"),_t),qt=function(){function t(e,n){u()(this,t),p()(this,"buffer",void 0);var r=n.data,o=n.usage,a=n.type;this.buffer=e.buffer({data:r,usage:Mt[o||i["r"].STATIC_DRAW],type:Pt[a||i["r"].UNSIGNED_BYTE]})}return l()(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(t){var e=t.data,n=t.offset;this.buffer.subdata(e,n)}}]),t}(),Gt=function(){function t(e,n){u()(this,t),p()(this,"elements",void 0);var r=n.data,o=n.usage,a=n.type,s=n.count;this.elements=e.elements({data:r,usage:Mt[o||i["r"].STATIC_DRAW],type:Pt[a||i["r"].UNSIGNED_BYTE],count:s})}return l()(t,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(t){var e=t.data;this.elements.subdata(e)}},{key:"destroy",value:function(){}}]),t}(),Ht=function(){function t(e,n){u()(this,t),p()(this,"framebuffer",void 0);var r=n.width,i=n.height,o=n.color,a=n.colors,s=(n.depth,n.stencil,{width:r,height:i});Array.isArray(a)&&(s.colors=a.map((function(t){return t.get()}))),o&&"boolean"!==typeof o&&(s.color=o.get()),this.framebuffer=e.framebuffer(s)}return l()(t,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.framebuffer.resize(e,n)}}]),t}(),Wt=n("6aLv"),Xt=n.n(Wt),Zt=n("lOrw"),Yt=n.n(Zt),Kt=n("LtJ/"),Jt=n.n(Kt);function Qt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $t(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Qt(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var te,ee,ne=function(){function t(e,n){u()(this,t),p()(this,"reGl",void 0),p()(this,"destroyed",!1),p()(this,"drawCommand",void 0),p()(this,"drawParams",void 0),p()(this,"options",void 0),p()(this,"uniforms",{}),this.reGl=e;var r=n.vs,o=n.fs,a=n.attributes,s=n.uniforms,c=n.primitive,l=n.count,f=n.elements,h=n.depth,d=n.blend,v=n.stencil,m=n.cull,g=n.instances,y={};this.options=n,s&&(this.uniforms=this.extractUniforms(s),Object.keys(s).forEach((function(t){y[t]=e.prop(t)})));var b={};Object.keys(a).forEach((function(t){b[t]=a[t].get()}));var _={attributes:b,frag:o,uniforms:y,vert:r,primitive:kt[void 0===c?i["r"].TRIANGLES:c]};g&&(_.instances=g),l&&(_.count=l),f&&(_.elements=f.get()),this.initDepthDrawParams({depth:h},_),this.initBlendDrawParams({blend:d},_),this.initStencilDrawParams({stencil:v},_),this.initCullDrawParams({cull:m},_),this.drawCommand=e(_),this.drawParams=_}return l()(t,[{key:"addUniforms",value:function(t){this.uniforms=$t($t({},this.uniforms),this.extractUniforms(t))}},{key:"draw",value:function(t){if(!this.drawParams.attributes||0!==Object.keys(this.drawParams.attributes).length){var e=$t($t({},this.uniforms),this.extractUniforms(t.uniforms||{})),n={};Object.keys(e).forEach((function(t){var r=Xt()(e[t]);"boolean"===r||"number"===r||Array.isArray(e[t])||e[t].BYTES_PER_ELEMENT?n[t]=e[t]:n[t]=e[t].get()})),this.drawCommand(n)}}},{key:"destroy",value:function(){this.drawParams.elements.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach((function(t){t.destroy()})),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(t,e){var n=t.depth;n&&(e.depth={enable:void 0===n.enable||!!n.enable,mask:void 0===n.mask||!!n.mask,func:jt[n.func||i["r"].LESS],range:n.range||[0,1]})}},{key:"initBlendDrawParams",value:function(t,e){var n=t.blend;if(n){var r=n.enable,o=n.func,a=n.equation,s=n.color,u=void 0===s?[0,0,0,0]:s;e.blend={enable:!!r,func:{srcRGB:zt[o&&o.srcRGB||i["r"].SRC_ALPHA],srcAlpha:zt[o&&o.srcAlpha||i["r"].SRC_ALPHA],dstRGB:zt[o&&o.dstRGB||i["r"].ONE_MINUS_SRC_ALPHA],dstAlpha:zt[o&&o.dstAlpha||i["r"].ONE_MINUS_SRC_ALPHA]},equation:{rgb:Ft[a&&a.rgb||i["r"].FUNC_ADD],alpha:Ft[a&&a.alpha||i["r"].FUNC_ADD]},color:u}}}},{key:"initStencilDrawParams",value:function(t,e){var n=t.stencil;if(n){var r=n.enable,o=n.mask,a=void 0===o?-1:o,s=n.func,u=void 0===s?{cmp:i["r"].ALWAYS,ref:0,mask:-1}:s,c=n.opFront,l=void 0===c?{fail:i["r"].KEEP,zfail:i["r"].KEEP,zpass:i["r"].KEEP}:c,f=n.opBack,p=void 0===f?{fail:i["r"].KEEP,zfail:i["r"].KEEP,zpass:i["r"].KEEP}:f;e.stencil={enable:!!r,mask:a,func:$t($t({},u),{},{cmp:Bt[u.cmp]}),opFront:{fail:Ut[l.fail],zfail:Ut[l.zfail],zpass:Ut[l.zpass]},opBack:{fail:Ut[p.fail],zfail:Ut[p.zfail],zpass:Ut[p.zpass]}}}}},{key:"initCullDrawParams",value:function(t,e){var n=t.cull;if(n){var r=n.enable,o=n.face,a=void 0===o?i["r"].BACK:o;e.cull={enable:!!r,face:Vt[a]}}}},{key:"extractUniforms",value:function(t){var e=this,n={};return Object.keys(t).forEach((function(r){e.extractUniformsRecursively(r,t[r],n,"")})),n}},{key:"extractUniformsRecursively",value:function(t,e,n,r){var i=this;null===e||"number"===typeof e||"boolean"===typeof e||Array.isArray(e)&&"number"===typeof e[0]||Yt()(e)||""===e||"resize"in e?n["".concat(r&&r+".").concat(t)]=e:(Jt()(e)&&Object.keys(e).forEach((function(o){i.extractUniformsRecursively(o,e[o],n,"".concat(r&&r+".").concat(t))})),Array.isArray(e)&&e.forEach((function(e,o){Object.keys(e).forEach((function(a){i.extractUniformsRecursively(a,e[a],n,"".concat(r&&r+".").concat(t,"[").concat(o,"]"))}))})))}}]),t}(),re=function(){function t(e,n){u()(this,t),p()(this,"texture",void 0),p()(this,"width",void 0),p()(this,"height",void 0);var r=n.data,o=n.type,a=void 0===o?i["r"].UNSIGNED_BYTE:o,s=n.width,c=n.height,l=n.flipY,f=void 0!==l&&l,h=n.format,d=void 0===h?i["r"].RGBA:h,v=n.mipmap,m=void 0!==v&&v,g=n.wrapS,y=void 0===g?i["r"].CLAMP_TO_EDGE:g,b=n.wrapT,_=void 0===b?i["r"].CLAMP_TO_EDGE:b,x=n.aniso,w=void 0===x?0:x,E=n.alignment,S=void 0===E?1:E,C=n.premultiplyAlpha,T=void 0!==C&&C,O=n.mag,A=void 0===O?i["r"].NEAREST:O,k=n.min,M=void 0===k?i["r"].NEAREST:k,P=n.colorSpace,I=void 0===P?i["r"].BROWSER_DEFAULT_WEBGL:P;this.width=s,this.height=c;var L={width:s,height:c,type:Pt[a],format:It[d],wrapS:Dt[y],wrapT:Dt[_],mag:Rt[A],min:Rt[M],alignment:S,flipY:f,colorSpace:Nt[I],premultiplyAlpha:T,aniso:w};r&&(L.data=r),"number"===typeof m?L.mipmap=Lt[m]:"boolean"===typeof m&&(L.mipmap=m),this.texture=e.texture(L)}return l()(t,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.texture(t)}},{key:"bind",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.texture.resize(e,n),this.width=e,this.height=n}},{key:"destroy",value:function(){this.texture.destroy()}}]),t}(),ie=(te=Object(Ct["injectable"])(),te(ee=function(){function t(){var e=this;u()(this,t),p()(this,"extensionObject",void 0),p()(this,"gl",void 0),p()(this,"$container",void 0),p()(this,"canvas",void 0),p()(this,"width",void 0),p()(this,"height",void 0),p()(this,"isDirty",void 0),p()(this,"createModel",(function(t){return new ne(e.gl,t)})),p()(this,"createAttribute",(function(t){return new At(e.gl,t)})),p()(this,"createBuffer",(function(t){return new qt(e.gl,t)})),p()(this,"createElements",(function(t){return new Gt(e.gl,t)})),p()(this,"createTexture2D",(function(t){return new re(e.gl,t)})),p()(this,"createFramebuffer",(function(t){return new Ht(e.gl,t)})),p()(this,"useFramebuffer",(function(t,n){e.gl({framebuffer:t?t.get():null})(n)})),p()(this,"clear",(function(t){var n=t.color,r=t.depth,i=t.stencil,o=t.framebuffer,a=void 0===o?null:o,s={color:n,depth:r,stencil:i};s.framebuffer=null===a?a:a.get(),e.gl.clear(s)})),p()(this,"viewport",(function(t){var n=t.x,r=t.y,i=t.width,o=t.height;e.gl._gl.viewport(n,r,i,o),e.width=i,e.height=o,e.gl._refresh()})),p()(this,"readPixels",(function(t){var n=t.framebuffer,r=t.x,i=t.y,o=t.width,a=t.height,s={x:r,y:i,width:o,height:a};return n&&(s.framebuffer=n.get()),e.gl.read(s)})),p()(this,"getViewportSize",(function(){return{width:e.gl._gl.drawingBufferWidth,height:e.gl._gl.drawingBufferHeight}})),p()(this,"getContainer",(function(){var t;return null===(t=e.canvas)||void 0===t?void 0:t.parentElement})),p()(this,"getCanvas",(function(){return e.canvas})),p()(this,"getGLContext",(function(){return e.gl._gl})),p()(this,"destroy",(function(){e.gl.destroy()}))}return l()(t,[{key:"init",value:function(){var t=wt()(St.a.mark((function t(e,n){var r=this;return St.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.canvas=e,t.next=3,new Promise((function(t,e){Ot()({canvas:r.canvas,attributes:{alpha:!0,antialias:n.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:n.preserveDrawingBuffer},extensions:["OES_element_index_uint","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(n,r){!n&&r||e(n),t(r)}})}));case 3:this.gl=t.sent,this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")};case 5:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"testExtension",value:function(t){return!!this.getGLContext().getExtension(t)}},{key:"setBaseState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setCustomLayerDefaults",value:function(){var t=this.getGLContext();t.disable(t.CULL_FACE)}},{key:"setDirty",value:function(t){this.isDirty=t}},{key:"getDirty",value:function(){return this.isDirty}}]),t}())||ee);function oe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ae(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?oe(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var se,ue,ce,le,fe,pe=function(){function t(e){u()(this,t),p()(this,"sceneService",void 0),p()(this,"mapService",void 0),p()(this,"controlService",void 0),p()(this,"layerService",void 0),p()(this,"iconService",void 0),p()(this,"markerService",void 0),p()(this,"popupService",void 0),p()(this,"fontService",void 0),p()(this,"interactionService",void 0),p()(this,"container",void 0);var n=e.id,r=e.map,o=Object(i["q"])();this.container=o,r.setContainer(o,n),o.bind(i["n"].IRendererService).to(ie).inSingletonScope(),this.sceneService=o.get(i["n"].ISceneService),this.mapService=o.get(i["n"].IMapService),this.iconService=o.get(i["n"].IIconService),this.fontService=o.get(i["n"].IFontService),this.controlService=o.get(i["n"].IControlService),this.layerService=o.get(i["n"].ILayerService),this.markerService=o.get(i["n"].IMarkerService),this.interactionService=o.get(i["n"].IInteractionService),this.popupService=o.get(i["n"].IPopupService),this.initComponent(n),this.sceneService.init(e),this.initControl()}return l()(t,[{key:"getServiceContainer",value:function(){return this.container}},{key:"getSize",value:function(){return this.mapService.getSize()}},{key:"getMinZoom",value:function(){return this.mapService.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.mapService.getMaxZoom()}},{key:"getType",value:function(){return this.mapService.getType()}},{key:"getMapContainer",value:function(){return this.mapService.getMapContainer()}},{key:"getMapCanvasContainer",value:function(){return this.mapService.getMapCanvasContainer()}},{key:"getMapService",value:function(){return this.mapService}},{key:"exportPng",value:function(t){return this.sceneService.exportPng(t)}},{key:"exportMap",value:function(t){return this.sceneService.exportPng(t)}},{key:"registerRenderService",value:function(t){var e=this;if(this.sceneService.loaded){var n=new t(this);n.init()}else this.on("loaded",(function(){var n=new t(e);n.init()}))}},{key:"map",get:function(){return this.mapService.map}},{key:"addLayer",value:function(t){var e=Object(i["p"])(this.container);t.setContainer(e),this.sceneService.addLayer(t)}},{key:"getLayers",value:function(){return this.layerService.getLayers()}},{key:"getLayer",value:function(t){return this.layerService.getLayer(t)}},{key:"getLayerByName",value:function(t){return this.layerService.getLayerByName(t)}},{key:"removeLayer",value:function(t){this.layerService.remove(t)}},{key:"removeAllLayer",value:function(){this.layerService.removeAllLayers()}},{key:"render",value:function(){this.sceneService.render()}},{key:"addIconFont",value:function(t,e){this.fontService.addIconFont(t,e)}},{key:"addIconFonts",value:function(t){var e=this;t.forEach((function(t){var n=a()(t,2),r=n[0],i=n[1];e.fontService.addIconFont(r,i)}))}},{key:"addFontFace",value:function(t,e){this.sceneService.addFontFace(t,e)}},{key:"addImage",value:function(t,e){this.iconService.addImage(t,e)}},{key:"hasImage",value:function(t){return this.iconService.hasImage(t)}},{key:"removeImage",value:function(t){this.iconService.removeImage(t)}},{key:"addIconFontGlyphs",value:function(t,e){this.fontService.addIconGlyphs(e)}},{key:"addControl",value:function(t){this.controlService.addControl(t,this.container)}},{key:"removeControl",value:function(t){this.controlService.removeControl(t)}},{key:"getControlByName",value:function(t){return this.controlService.getControlByName(t)}},{key:"addMarker",value:function(t){this.markerService.addMarker(t)}},{key:"addMarkerLayer",value:function(t){this.markerService.addMarkerLayer(t)}},{key:"removeMarkerLayer",value:function(t){this.markerService.removeMarkerLayer(t)}},{key:"removeAllMakers",value:function(){this.markerService.removeAllMarkers()}},{key:"addPopup",value:function(t){this.popupService.addPopup(t)}},{key:"on",value:function(t,e){-1===i["l"].indexOf(t)?this.mapService.on(t,e):this.sceneService.on(t,e)}},{key:"once",value:function(t,e){-1===i["l"].indexOf(t)?this.mapService.once(t,e):this.sceneService.once(t,e)}},{key:"off",value:function(t,e){-1===i["l"].indexOf(t)?this.mapService.off(t,e):this.sceneService.off(t,e)}},{key:"getZoom",value:function(){return this.mapService.getZoom()}},{key:"getCenter",value:function(t){return this.mapService.getCenter(t)}},{key:"setCenter",value:function(t,e){return this.mapService.setCenter(t,e)}},{key:"getPitch",value:function(){return this.mapService.getPitch()}},{key:"setPitch",value:function(t){return this.mapService.setPitch(t)}},{key:"getRotation",value:function(){return this.mapService.getRotation()}},{key:"getBounds",value:function(){return this.mapService.getBounds()}},{key:"setRotation",value:function(t){this.mapService.setRotation(t)}},{key:"zoomIn",value:function(){this.mapService.zoomIn()}},{key:"zoomOut",value:function(){this.mapService.zoomOut()}},{key:"panTo",value:function(t){this.mapService.panTo(t)}},{key:"panBy",value:function(t){this.mapService.panBy(t)}},{key:"getContainer",value:function(){return this.mapService.getContainer()}},{key:"setZoom",value:function(t){this.mapService.setZoom(t)}},{key:"fitBounds",value:function(t,e){var n=this.sceneService.getSceneConfig(),r=n.fitBoundsOptions,i=n.animate;this.mapService.fitBounds(t,e||ae(ae({},r),{},{animate:i}))}},{key:"setZoomAndCenter",value:function(t,e){this.mapService.setZoomAndCenter(t,e)}},{key:"setMapStyle",value:function(t){this.mapService.setMapStyle(t)}},{key:"setMapStatus",value:function(t){this.mapService.setMapStatus(t)}},{key:"pixelToLngLat",value:function(t){return this.mapService.pixelToLngLat(t)}},{key:"lngLatToPixel",value:function(t){return this.mapService.lngLatToPixel(t)}},{key:"containerToLngLat",value:function(t){return this.mapService.containerToLngLat(t)}},{key:"lngLatToContainer",value:function(t){return this.mapService.lngLatToContainer(t)}},{key:"destroy",value:function(){this.sceneService.destroy()}},{key:"registerPostProcessingPass",value:function(t,e){this.container.bind(i["n"].IPostProcessingPass).to(t).whenTargetNamed(e)}},{key:"initComponent",value:function(t){this.controlService.init({container:x["b"].getContainer(t)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}},{key:"initControl",value:function(){var t=this.sceneService.getSceneConfig(),e=t.logoVisible,n=t.logoPosition;e&&this.addControl(new R({position:n}))}}]),t}(),he=n("vTej"),de=n("jCe1"),ve=n.n(de),me=n("aDRW"),ge=n.n(me),ye=n("+ti2"),be=n.n(ye),_e=(n("+ynn"),n("E5vS")),xe=n.n(_e),we=n("wmqP"),Ee=n.n(we),Se=n("Tj1F");function Ce(t){return t.map((function(t){return"string"===typeof t&&(t=[t,{}]),t}))}var Te,Oe=(se=Object(Ct["injectable"])(),ue=Object(Ct["inject"])(i["n"].IGlobalConfigService),se((le=function(){function t(){u()(this,t),ge()(this,"configService",fe,this),p()(this,"enabled",void 0)}return l()(t,[{key:"apply",value:function(t,e){var n=this,r=(e.rendererService,e.postProcessingPassFactory),i=e.normalPassFactory;t.hooks.init.tap("MultiPassRendererPlugin",(function(){var e=t.getLayerConfig(),o=e.enableMultiPassRenderer,a=e.passes,s=void 0===a?[]:a;n.enabled=!!o&&!1!==t.getLayerConfig().enableMultiPassRenderer,n.enabled&&(t.multiPassRenderer=n.createMultiPassRenderer(t,s,r,i),t.multiPassRenderer.setRenderFlag(!0))})),t.hooks.beforeRender.tap("MultiPassRendererPlugin",(function(){}))}},{key:"createMultiPassRenderer",value:function(t,e,n,r){var i=t.multiPassRenderer,o=t.getLayerConfig(),a=o.enablePicking;o.enableTAA;return a&&i.add(r("pixelPicking")),i}}]),t}(),fe=be()(le.prototype,"configService",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=le))||ce),Ae=(Te={},p()(Te,i["c"].additive,{enable:!0,func:{srcRGB:i["r"].ONE,dstRGB:i["r"].ONE,srcAlpha:1,dstAlpha:1}}),p()(Te,i["c"].none,{enable:!1}),p()(Te,i["c"].normal,{enable:!0,func:{srcRGB:i["r"].SRC_ALPHA,dstRGB:i["r"].ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}),p()(Te,i["c"].subtractive,{enable:!0,func:{srcRGB:i["r"].ONE,dstRGB:i["r"].ONE,srcAlpha:i["r"].ZERO,dstAlpha:i["r"].ONE_MINUS_SRC_COLOR},equation:{rgb:i["r"].FUNC_SUBTRACT,alpha:i["r"].FUNC_SUBTRACT}}),p()(Te,i["c"].max,{enable:!0,func:{srcRGB:i["r"].ONE,dstRGB:i["r"].ONE},equation:{rgb:i["r"].MAX_EXT}}),p()(Te,i["c"].min,{enable:!0,func:{srcRGB:i["r"].ONE,dstRGB:i["r"].ONE},equation:{rgb:i["r"].MIN_EXT}}),Te),ke=n("BaLd"),Me=n.n(ke),Pe=n("03A1"),Ie=n.n(Pe),Le=n("+Gi7"),Re=n.n(Le);function De(t,e,n,r,i){e.updateStyleAttribute(t,n,r,i)}function Ne(t,e){t.opacity&&je("opacity",e,t.opacity),t.strokeWidth&&je("strokeWidth",e,t.strokeWidth),t.strokeOpacity&&je("strokeOpacity",e,t.strokeOpacity),t.stroke&&ze("stroke",e,t.stroke),t.offsets&&Fe("offsets",e,t.offsets),t.textOffset&&Fe("textOffset",e,t.textOffset)}function je(t,e,n){Me()(n)?De(t,e,n,(function(t){return t})):Ie()(n)?De(t,e,[n],void 0):Re()(n)&&2===n.length&&(Me()(n[0])&&Ee()(n[1])||Me()(n[0])&&Re()(n[1])&&Ie()(n[1][0])&&Ie()(n[1][1]))?De(t,e,n[0],n[1]):De(t,e,[1],void 0)}function Fe(t,e,n){Me()(n)?De(t,e,n,(function(t){return t})):Re()(n)&&2===n.length&&Me()(n[0])&&Ee()(n[1])?De(t,e,n[0],n[1]):Re()(n)&&2===n.length&&Ie()(n[0])&&Ie()(n[1])?De(t,e,n,void 0):De(t,e,[0,0],void 0)}function ze(t,e,n){Me()(n)?De(t,e,n,void 0):Re()(n)&&2===n.length&&(Me()(n[0])&&Ee()(n[1])||Me()(n[0])&&Re()(n[1])&&n[1].length>0)?De(t,e,n[0],n[1]):De(t,e,"#fff",void 0)}var Be,Ue,Ve,qe,Ge,He=["passes"],We=["moduleName","vertexShader","fragmentShader","triangulation"];function Xe(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Ze(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function Ze(t,e){if(t){if("string"===typeof t)return Ye(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ye(t,e):void 0}}function Ye(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ke(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Je(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ke(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Qe(t){var e=$e();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function $e(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var tn,en,nn,rn,on,an=0,sn=(Be=Object(i["s"])(i["n"].IGlobalConfigService),Ue=Object(i["s"])(i["n"].IShaderModuleService),Ve=function(t){m()(n,t);var e=Qe(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u()(this,n),t=e.call(this),p()(d()(t),"id","".concat(an++)),p()(d()(t),"name","".concat(an)),p()(d()(t),"type",void 0),p()(d()(t),"visible",!0),p()(d()(t),"zIndex",0),p()(d()(t),"minZoom",void 0),p()(d()(t),"maxZoom",void 0),p()(d()(t),"inited",!1),p()(d()(t),"layerModelNeedUpdate",!1),p()(d()(t),"pickedFeatureID",null),p()(d()(t),"selectedFeatureID",null),p()(d()(t),"styleNeedUpdate",!1),p()(d()(t),"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),p()(d()(t),"hooks",{init:new Se["b"],afterInit:new Se["b"],beforeRender:new Se["b"],beforeRenderData:new Se["d"],afterRender:new Se["c"],beforePickingEncode:new Se["c"],afterPickingEncode:new Se["c"],beforeHighlight:new Se["c"](["pickedColor"]),afterHighlight:new Se["c"],beforeSelect:new Se["c"](["pickedColor"]),afterSelect:new Se["c"],beforeDestroy:new Se["c"],afterDestroy:new Se["c"]}),p()(d()(t),"models",[]),p()(d()(t),"multiPassRenderer",void 0),p()(d()(t),"plugins",void 0),p()(d()(t),"sourceOption",void 0),p()(d()(t),"layerModel",void 0),ge()(d()(t),"configService",qe,d()(t)),ge()(d()(t),"shaderModuleService",Ge,d()(t)),p()(d()(t),"cameraService",void 0),p()(d()(t),"coordinateService",void 0),p()(d()(t),"iconService",void 0),p()(d()(t),"fontService",void 0),p()(d()(t),"pickingService",void 0),p()(d()(t),"rendererService",void 0),p()(d()(t),"layerService",void 0),p()(d()(t),"interactionService",void 0),p()(d()(t),"mapService",void 0),p()(d()(t),"styleAttributeService",void 0),p()(d()(t),"layerSource",void 0),p()(d()(t),"postProcessingPassFactory",void 0),p()(d()(t),"normalPassFactory",void 0),p()(d()(t),"animateOptions",{enable:!1}),p()(d()(t),"container",void 0),p()(d()(t),"encodedData",void 0),p()(d()(t),"configSchema",void 0),p()(d()(t),"currentPickId",null),p()(d()(t),"rawConfig",void 0),p()(d()(t),"needUpdateConfig",void 0),p()(d()(t),"pendingStyleAttributes",[]),p()(d()(t),"scaleOptions",{}),p()(d()(t),"animateStartTime",void 0),p()(d()(t),"aniamateStatus",!1),p()(d()(t),"sourceEvent",(function(){t.dataState.dataSourceNeedUpdate=!0;var e=t.getLayerConfig(),n=e.autoFit,r=e.fitBoundsOptions;n&&t.fitBounds(r),t.emit("dataUpdate"),t.reRender()})),t.name=r.name||t.id,t.zIndex=r.zIndex||0,t.rawConfig=r,t}return l()(n,[{key:"getLayerConfig",value:function(){return this.configService.getLayerConfig(this.id)}},{key:"updateLayerConfig",value:function(t){if(this.inited){var e=this.container.get(i["n"].SceneID);Ne(t,this),this.configService.setLayerConfig(e,this.id,Je(Je(Je({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),t)),this.needUpdateConfig={}}else this.needUpdateConfig=Je(Je({},this.needUpdateConfig),t)}},{key:"setContainer",value:function(t){this.container=t}},{key:"getContainer",value:function(){return this.container}},{key:"addPlugin",value:function(t){return this.plugins.push(t),this}},{key:"init",value:function(){var t=this,e=this.container.get(i["n"].SceneID),n=this.rawConfig.enableMultiPassRenderer,r=void 0!==n&&n;this.configService.setLayerConfig(e,this.id,{enableMultiPassRenderer:r}),this.iconService=this.container.get(i["n"].IIconService),this.fontService=this.container.get(i["n"].IFontService),this.rendererService=this.container.get(i["n"].IRendererService),this.layerService=this.container.get(i["n"].ILayerService),this.interactionService=this.container.get(i["n"].IInteractionService),this.pickingService=this.container.get(i["n"].IPickingService),this.mapService=this.container.get(i["n"].IMapService),this.cameraService=this.container.get(i["n"].ICameraService),this.coordinateService=this.container.get(i["n"].ICoordinateSystemService),this.postProcessingPassFactory=this.container.get(i["n"].IFactoryPostProcessingPass),this.normalPassFactory=this.container.get(i["n"].IFactoryNormalPass),this.styleAttributeService=this.container.get(i["n"].IStyleAttributeService),this.multiPassRenderer=this.container.get(i["n"].IMultiPassRenderer),this.multiPassRenderer.setLayer(this),this.pendingStyleAttributes.forEach((function(e){var n=e.attributeName,r=e.attributeField,i=e.attributeValues,o=e.updateOptions;t.styleAttributeService.updateStyleAttribute(n,{scale:Je({field:r},t.splitValuesAndCallbackInAttribute(i,t.getLayerConfig()[n]))},o)})),this.pendingStyleAttributes=[],this.plugins=this.container.getAll(i["n"].ILayerPlugin);var o,a=Xe(this.plugins);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.apply(this,{rendererService:this.rendererService,mapService:this.mapService,styleAttributeService:this.styleAttributeService,normalPassFactory:this.normalPassFactory,postProcessingPassFactory:this.postProcessingPassFactory})}}catch(u){a.e(u)}finally{a.f()}return this.hooks.init.call(),this.hooks.afterInit.call(),this.emit("inited",{target:this,type:"inited"}),this.emit("add",{target:this,type:"add"}),this}},{key:"prepareBuildModel",value:function(){this.inited=!0,this.updateLayerConfig(Je(Je({},this.getDefaultConfig()),this.rawConfig));var t=this.getLayerConfig(),e=t.animateOption;null!==e&&void 0!==e&&e.enable&&(this.layerService.startAnimate(),this.aniamateStatus=!0)}},{key:"color",value:function(t,e,n){return this.updateStyleAttribute("color",t,e,n),this}},{key:"texture",value:function(t,e,n){return this.updateStyleAttribute("texture",t,e,n),this}},{key:"rotate",value:function(t,e,n){return this.updateStyleAttribute("rotate",t,e,n),this}},{key:"size",value:function(t,e,n){return this.updateStyleAttribute("size",t,e,n),this}},{key:"filter",value:function(t,e,n){return this.updateStyleAttribute("filter",t,e,n),this}},{key:"shape",value:function(t,e,n){return this.updateStyleAttribute("shape",t,e,n),this}},{key:"label",value:function(t,e,n){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:t,attributeValues:e,updateOptions:n}),this}},{key:"animate",value:function(t){var e={};return xe()(t)?(e.enable=!0,e=Je(Je({},e),t)):e.enable=t,this.updateLayerConfig({animateOption:e}),this}},{key:"source",value:function(t,e){return this.sourceOption={data:t,options:e},this}},{key:"setData",value:function(t,e){var n=this;return this.inited?this.layerSource.setData(t,e):this.on("inited",(function(){n.layerSource.setData(t,e)})),this}},{key:"style",value:function(t){var e=this,n=t.passes,r=ve()(t,He);return n&&Ce(n).forEach((function(t){var n=e.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(t[0]);n&&n.updateOptions(t[1])})),this.rawConfig=Je(Je({},this.rawConfig),r),this.container&&(this.updateLayerConfig(this.rawConfig),this.styleNeedUpdate=!0),this}},{key:"scale",value:function(t,e){return xe()(t)?this.scaleOptions=Je(Je({},this.scaleOptions),t):this.scaleOptions[t]=e,this}},{key:"render",value:function(){return 0!==this.getEncodedData().length&&this.renderModels(),this}},{key:"active",value:function(t){var e={};return e.enableHighlight=!!xe()(t)||t,xe()(t)?(e.enableHighlight=!0,t.color&&(e.highlightColor=t.color)):e.enableHighlight=!!t,this.updateLayerConfig(e),this}},{key:"setActive",value:function(t,e){var n=this;if(xe()(t)){var r=t.x,i=void 0===r?0:r,o=t.y,a=void 0===o?0:o;this.updateLayerConfig({highlightColor:xe()(e)?e.color:this.getLayerConfig().highlightColor}),this.pick({x:i,y:a})}else this.updateLayerConfig({pickedFeatureID:t,highlightColor:xe()(e)?e.color:this.getLayerConfig().highlightColor}),this.hooks.beforeSelect.call(Object(x["n"])(t)).then((function(){setTimeout((function(){n.reRender()}),1)}))}},{key:"select",value:function(t){var e={};return e.enableSelect=!!xe()(t)||t,xe()(t)?(e.enableSelect=!0,t.color&&(e.selectColor=t.color)):e.enableSelect=!!t,this.updateLayerConfig(e),this}},{key:"setSelect",value:function(t,e){var n=this;if(xe()(t)){var r=t.x,i=void 0===r?0:r,o=t.y,a=void 0===o?0:o;this.updateLayerConfig({selectColor:xe()(e)?e.color:this.getLayerConfig().selectColor}),this.pick({x:i,y:a})}else this.updateLayerConfig({pickedFeatureID:t,selectColor:xe()(e)?e.color:this.getLayerConfig().selectColor}),this.hooks.beforeSelect.call(Object(x["n"])(t)).then((function(){setTimeout((function(){n.reRender()}),1)}))}},{key:"setBlend",value:function(t){this.updateLayerConfig({blend:t}),this.layerModelNeedUpdate=!0,this.reRender()}},{key:"show",value:function(){return this.updateLayerConfig({visible:!0}),this.reRender(),this}},{key:"hide",value:function(){return this.updateLayerConfig({visible:!1}),this.reRender(),this}},{key:"setIndex",value:function(t){return this.zIndex=t,this.layerService.updateRenderOrder(),this}},{key:"setCurrentPickId",value:function(t){this.currentPickId=t}},{key:"getCurrentPickId",value:function(){return this.currentPickId}},{key:"setCurrentSelectedId",value:function(t){this.selectedFeatureID=t}},{key:"getCurrentSelectedId",value:function(){return this.selectedFeatureID}},{key:"isVisible",value:function(){var t=this.mapService.getZoom(),e=this.getLayerConfig(),n=e.visible,r=e.minZoom,i=void 0===r?-1/0:r,o=e.maxZoom,a=void 0===o?1/0:o;return!!n&&t>=i&&t<=a}},{key:"setMinZoom",value:function(t){return this.updateLayerConfig({minZoom:t}),this}},{key:"getMinZoom",value:function(){var t=this.getLayerConfig(),e=t.minZoom;return e}},{key:"getMaxZoom",value:function(){var t=this.getLayerConfig(),e=t.maxZoom;return e}},{key:"get",value:function(t){var e=this.getLayerConfig();return e[t]}},{key:"setMaxZoom",value:function(t){return this.updateLayerConfig({maxZoom:t}),this}},{key:"fitBounds",value:function(t){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;var e=this.getSource(),n=e.extent,r=n.some((function(t){return Math.abs(t)===1/0}));return r||this.mapService.fitBounds([[n[0],n[1]],[n[2],n[3]]],t),this}},{key:"destroy",value:function(){this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),this.multiPassRenderer.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),this.emit("remove",{target:this,type:"remove"}),this.removeAllListeners()}},{key:"clear",value:function(){this.styleAttributeService.clearAllAttributes()}},{key:"clearModels",value:function(){this.models.forEach((function(t){return t.destroy()})),this.layerModel.clearModels()}},{key:"isDirty",value:function(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter((function(t){return t.needRescale||t.needRemapping||t.needRegenerateVertices})).length}},{key:"setSource",value:function(t){if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=t,this.inited&&this.layerSource.cluster){var e=this.mapService.getZoom();this.layerSource.updateClusterData(e)}this.layerSource.on("update",this.sourceEvent)}},{key:"getSource",value:function(){return this.layerSource}},{key:"getScaleOptions",value:function(){return this.scaleOptions}},{key:"setEncodedData",value:function(t){this.encodedData=t}},{key:"getEncodedData",value:function(){return this.encodedData}},{key:"getLegendItems",value:function(t){var e=this.styleAttributeService.getLayerAttributeScale(t);if(!e)return[];if(e.ticks){var n=e.ticks().map((function(n){return p()({value:n},t,e(n))}));return n}if(e.invertExtent){var r=e.range().map((function(n){return p()({value:e.invertExtent(n)},t,n)}));return r}}},{key:"pick",value:function(t){var e=t.x,n=t.y;this.interactionService.triggerHover({x:e,y:n})}},{key:"boxSelect",value:function(t,e){this.pickingService.boxPickLayer(this,t,e)}},{key:"buildLayerModel",value:function(t){var e=t.moduleName,n=t.vertexShader,r=t.fragmentShader,o=t.triangulation,a=ve()(t,We);this.shaderModuleService.registerModule(e,{vs:n,fs:r});var s=this.shaderModuleService.getModule(e),u=s.vs,c=s.fs,l=s.uniforms,f=this.rendererService.createModel,p=this.styleAttributeService.createAttributesAndIndices(this.encodedData,o),h=p.attributes,d=p.elements;return f(Je({attributes:h,uniforms:l,fs:c,vs:u,elements:d,blend:Ae[i["c"].normal]},a))}},{key:"getTime",value:function(){return this.layerService.clock.getDelta()}},{key:"setAnimateStartTime",value:function(){this.animateStartTime=this.layerService.clock.getElapsedTime()}},{key:"stopAnimate",value:function(){this.aniamateStatus&&(this.layerService.stopAnimate(),this.aniamateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}},{key:"getLayerAnimateTime",value:function(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}},{key:"needPick",value:function(t){var e=this.getLayerConfig(),n=e.enableHighlight,r=void 0===n||n,i=e.enableSelect,o=void 0===i||i,a=-1!==this.eventNames().indexOf(t)||-1!==this.eventNames().indexOf("un"+t);return"click"!==t&&"dblclick"!==t||!o||(a=!0),"mousemove"!==t||!r&&-1===this.eventNames().indexOf("mouseenter")&&-1===this.eventNames().indexOf("unmousemove")&&-1===this.eventNames().indexOf("mouseout")||(a=!0),this.isVisible()&&a}},{key:"buildModels",value:function(){throw new Error("Method not implemented.")}},{key:"rebuildModels",value:function(){throw new Error("Method not implemented.")}},{key:"renderModels",value:function(){var t=this;return this.getEncodedData().length>0&&(this.layerModelNeedUpdate&&this.layerModel&&(this.models=this.layerModel.buildModels(),this.hooks.beforeRender.call(),this.layerModelNeedUpdate=!1),this.models.forEach((function(e){e.draw({uniforms:t.layerModel.getUninforms()})}))),this}},{key:"updateStyleAttribute",value:function(t,e,n,r){this.inited?this.styleAttributeService.updateStyleAttribute(t,{scale:Je({field:e},this.splitValuesAndCallbackInAttribute(n,this.getLayerConfig()[e]))},r):this.pendingStyleAttributes.push({attributeName:t,attributeField:e,attributeValues:n,updateOptions:r})}},{key:"getConfigSchema",value:function(){throw new Error("Method not implemented.")}},{key:"getModelType",value:function(){throw new Error("Method not implemented.")}},{key:"getDefaultConfig",value:function(){return{}}},{key:"reRender",value:function(){this.inited&&this.layerService.renderLayers()}},{key:"splitValuesAndCallbackInAttribute",value:function(t,e){return{values:Ee()(t)?void 0:t||e,callback:Ee()(t)?t:void 0}}}]),n}(w["EventEmitter"]),qe=be()(Ve.prototype,"configService",[Be],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ge=be()(Ve.prototype,"shaderModuleService",[Ue],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ve),un=n("5EKB"),cn=n.n(un),ln=n("Zx9X"),fn=n.n(ln),pn=n("GfBb");function hn(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=dn(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function dn(t,e){if(t){if("string"===typeof t)return vn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vn(t,e):void 0}}function vn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var mn=(tn=Object(i["s"])(i["n"].IGlobalConfigService),en=Object(i["s"])(i["n"].IShaderModuleService),nn=function(){function t(e){u()(this,t),p()(this,"triangulation",void 0),p()(this,"createTexture2D",void 0),p()(this,"layer",void 0),p()(this,"dataTexture",void 0),p()(this,"DATA_TEXTURE_WIDTH",void 0),p()(this,"rowCount",void 0),p()(this,"cacheStyleProperties",void 0),p()(this,"cellLength",void 0),p()(this,"cellProperties",void 0),p()(this,"cellTypeLayout",void 0),p()(this,"stylePropertyesExist",void 0),p()(this,"dataTextureTest",void 0),ge()(this,"configService",rn,this),ge()(this,"shaderModuleService",on,this),p()(this,"rendererService",void 0),p()(this,"iconService",void 0),p()(this,"fontService",void 0),p()(this,"styleAttributeService",void 0),p()(this,"mapService",void 0),p()(this,"cameraService",void 0),p()(this,"layerService",void 0),this.layer=e,this.rendererService=e.getContainer().get(i["n"].IRendererService),this.styleAttributeService=e.getContainer().get(i["n"].IStyleAttributeService),this.mapService=e.getContainer().get(i["n"].IMapService),this.iconService=e.getContainer().get(i["n"].IIconService),this.fontService=e.getContainer().get(i["n"].IFontService),this.cameraService=e.getContainer().get(i["n"].ICameraService),this.layerService=e.getContainer().get(i["n"].ILayerService),this.registerBuiltinAttributes(),this.startModelAnimate();var n=this.rendererService.createTexture2D;this.createTexture2D=n,this.DATA_TEXTURE_WIDTH=1024,this.rowCount=1,this.cellLength=0,this.cellProperties=[],this.cacheStyleProperties={opacity:void 0,strokeOpacity:void 0,strokeWidth:void 0,stroke:void 0,offsets:void 0},this.stylePropertyesExist={hasOpacity:0,hasStrokeOpacity:0,hasStrokeWidth:0,hasStroke:0,hasOffsets:0},this.dataTextureTest=this.layerService.getOESTextureFloat(),this.dataTextureTest||(this.dataTexture=this.createTexture2D({data:new ImageData(1,1).data,mag:i["r"].NEAREST,min:i["r"].NEAREST,width:1,height:1}))}return l()(t,[{key:"clearLastCalRes",value:function(){this.cellProperties=[],this.cellLength=0,this.stylePropertyesExist={hasOpacity:0,hasStrokeOpacity:0,hasStrokeWidth:0,hasStroke:0,hasOffsets:0}}},{key:"getCellTypeLayout",value:function(){return this.dataTextureTest?[this.rowCount,this.DATA_TEXTURE_WIDTH,0,0,this.stylePropertyesExist.hasOpacity,this.stylePropertyesExist.hasStrokeOpacity,this.stylePropertyesExist.hasStrokeWidth,this.stylePropertyesExist.hasStroke,this.stylePropertyesExist.hasOffsets,0,0,0,0,0,0,1]:[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,-1]}},{key:"dataTextureNeedUpdate",value:function(t){var e=!1;return fn()(t.opacity,this.cacheStyleProperties.opacity)||(e=!0,this.cacheStyleProperties.opacity=t.opacity),fn()(t.strokeOpacity,this.cacheStyleProperties.strokeOpacity)||(e=!0,this.cacheStyleProperties.strokeOpacity=t.strokeOpacity),fn()(t.strokeWidth,this.cacheStyleProperties.strokeWidth)||(e=!0,this.cacheStyleProperties.strokeWidth=t.strokeWidth),fn()(t.stroke,this.cacheStyleProperties.stroke)||(e=!0,this.cacheStyleProperties.stroke=t.stroke),fn()(t.offsets,this.cacheStyleProperties.offsets)||(e=!0,this.cacheStyleProperties.offsets=t.offsets),void 0===this.dataTexture&&(e=!0),e}},{key:"judgeStyleAttributes",value:function(t){this.clearLastCalRes(),void 0===t.opacity||Ie()(t.opacity)||(this.cellProperties.push({attr:"opacity",count:1}),this.stylePropertyesExist.hasOpacity=1,this.cellLength+=1),void 0===t.strokeOpacity||Ie()(t.strokeOpacity)||(this.cellProperties.push({attr:"strokeOpacity",count:1}),this.stylePropertyesExist.hasStrokeOpacity=1,this.cellLength+=1),void 0===t.strokeWidth||Ie()(t.strokeWidth)||(this.cellProperties.push({attr:"strokeWidth",count:1}),this.stylePropertyesExist.hasStrokeWidth=1,this.cellLength+=1),void 0===t.stroke||this.isStaticColor(t.stroke)||(this.cellProperties.push({attr:"stroke",count:4}),this.stylePropertyesExist.hasStroke=1,this.cellLength+=4),void 0===t.offsets||this.isOffsetStatic(t.offsets)||(this.cellProperties.push({attr:"offsets",count:2}),this.stylePropertyesExist.hasOffsets=1,this.cellLength+=2)}},{key:"isStaticColor",value:function(t){return!!Me()(t)&&!!Object(pn["a"])(t)}},{key:"getStrokeColor",value:function(t){if(this.isStaticColor(t)){var e=Object(x["A"])(t);return e[0]=e[0]?e[0]:0,e[1]=e[1]?e[1]:0,e[2]=e[2]?e[2]:0,e[3]=e[3]?e[3]:0,e}return[0,0,0,0]}},{key:"isOffsetStatic",value:function(t){return!!(Re()(t)&&2===t.length&&Ie()(t[0])&&Ie()(t[1]))}},{key:"patchMod",value:function(t,e){for(var n=0;n<e;n++)t.push(-1)}},{key:"patchData",value:function(t,e,n){var r,i=hn(n);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.attr,s=o.count,u=e[a];u?"stroke"===a?t.push.apply(t,cn()(Object(x["A"])(u))):"offsets"===a?this.isOffsetStatic(u)?t.push(-u[0],u[1]):t.push(0,0):t.push(Ie()(u)?u:1):this.patchMod(t,s)}}catch(c){i.e(c)}finally{i.f()}}},{key:"calDataFrame",value:function(t,e,n){for(var r=e.length,i=Math.ceil(r*t/this.DATA_TEXTURE_WIDTH),o=i*this.DATA_TEXTURE_WIDTH,a=[],s=0;s<r;s++){var u=e[s];this.patchData(a,u,n)}for(var c=a.length;c<o;c++)a.push(-1);return{data:a,width:this.DATA_TEXTURE_WIDTH,height:i}}},{key:"getBlend",value:function(){var t=this.layer.getLayerConfig(),e=t.blend,n=void 0===e?"normal":e;return Ae[i["c"][n]]}},{key:"getDefaultStyle",value:function(){return{}}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"needUpdate",value:function(){return!1}},{key:"buildModels",value:function(){throw new Error("Method not implemented.")}},{key:"initModels",value:function(){throw new Error("Method not implemented.")}},{key:"clearModels",value:function(){}},{key:"getAttribute",value:function(){throw new Error("Method not implemented.")}},{key:"render",value:function(){throw new Error("Method not implemented.")}},{key:"registerBuiltinAttributes",value:function(){throw new Error("Method not implemented.")}},{key:"animateOption2Array",value:function(t){return[t.enable?0:1,t.duration||4,t.interval||.2,t.trailLength||.1]}},{key:"startModelAnimate",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption;e.enable&&this.layer.setAnimateStartTime()}}]),t}(),rn=be()(nn.prototype,"configService",[tn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),on=be()(nn.prototype,"shaderModuleService",[en],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nn),gn=n("J9FK"),yn=n.n(gn),bn=n("99LQ"),_n=bn["c"].create(),xn=(bn["c"].create(),bn["c"].create()),wn=bn["c"].create(),En=bn["c"].create();function Sn(t,e,n,r,i){bn["c"].add(t,n,r),bn["c"].normalize(t,t),e=bn["c"].fromValues(-t[1],t[0]);var o=bn["c"].fromValues(-n[1],n[0]);return[i/bn["c"].dot(e,o),e]}function Cn(t,e){return bn["c"].set(t,-e[1],e[0])}function Tn(t,e,n){return bn["c"].sub(t,e,n),bn["c"].normalize(t,t),t}function On(t,e){return t[0]===e[0]&&t[1]===e[1]}var An,kn,Mn,Pn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u()(this,t),p()(this,"complex",void 0),p()(this,"join",void 0),p()(this,"cap",void 0),p()(this,"miterLimit",void 0),p()(this,"thickness",void 0),p()(this,"normal",void 0),p()(this,"lastFlip",-1),p()(this,"miter",bn["c"].fromValues(0,0)),p()(this,"started",!1),p()(this,"dash",!1),p()(this,"totalDistance",0),this.join=e.join||"miter",this.cap=e.cap||"butt",this.miterLimit=e.miterLimit||10,this.thickness=e.thickness||1,this.dash=e.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0}}return l()(t,[{key:"extrude_gaode2",value:function(t,e){var n=this.complex;if(t.length<=1)return n;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=t.length,i=n.startIndex,o=1;o<r;o++){var a=t[o-1],s=e[o-1],u=t[o],c=e[o],l=o<t.length-1?t[o+1]:null,f=o<e.length-1?e[o+1]:null,p=this.segment_gaode2(n,i,a,u,l,s,c,f);i+=p}if(this.dash)for(var h=0;h<n.positions.length/6;h++)n.positions[6*h+5]=this.totalDistance;return n.startIndex=n.positions.length/6,n}},{key:"extrude",value:function(t){var e=this.complex;if(t.length<=1)return e;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=t.length,r=e.startIndex,i=1;i<n;i++){var o=t[i-1],a=t[i],s=i<t.length-1?t[i+1]:null,u=this.segment(e,r,o,a,s);r+=u}if(this.dash)for(var c=0;c<e.positions.length/6;c++)e.positions[6*c+5]=this.totalDistance;return e.startIndex=e.positions.length/6,e}},{key:"segment_gaode2",value:function(t,e,n,r,i,o,s,u){var c=0,l=t.indices,f=t.positions,p=t.normals,h="square"===this.cap,d="bevel"===this.join,v=Object(x["e"])([s[0],s[1]]),m=Object(x["e"])([o[0],o[1]]);Tn(xn,r,n);var g=0;if(this.dash&&(g=this.lineSegmentDistance(v,m),this.totalDistance+=g),this.normal||(this.normal=bn["c"].create(),Cn(this.normal,xn)),!this.started)if(this.started=!0,h){var y=bn["c"].create(),b=bn["c"].create();bn["c"].add(y,this.normal,xn),bn["c"].add(b,this.normal,xn),p.push(b[0],b[1],0),p.push(y[0],y[1],0),f.push(n[0],n[1],0,this.totalDistance-g,-this.thickness,0),f.push(n[0],n[1],0,this.totalDistance-g,this.thickness,0)}else this.extrusions(f,p,n,this.normal,this.thickness,this.totalDistance-g);if(l.push(e+0,e+1,e+2),i){On(r,i)&&bn["c"].add(i,r,bn["c"].normalize(i,bn["c"].subtract(i,r,n))),Tn(wn,i,r);var _=Sn(En,bn["c"].create(),xn,wn,this.thickness),w=a()(_,2),E=w[0],S=w[1],C=bn["c"].dot(En,this.normal)<0?-1:1,T=d;if(!T&&"miter"===this.join){var O=E;O>this.miterLimit&&(T=!0)}T?(p.push(this.normal[0],this.normal[1],0),p.push(S[0],S[1],0),f.push(r[0],r[1],0,this.totalDistance,-this.thickness*C,0),f.push(r[0],r[1],0,this.totalDistance,this.thickness*C,0),l.push.apply(l,cn()(this.lastFlip!==-C?[e,e+2,e+3]:[e+2,e+1,e+3])),l.push(e+2,e+3,e+4),Cn(_n,wn),bn["c"].copy(this.normal,_n),p.push(this.normal[0],this.normal[1],0),f.push(r[0],r[1],0,this.totalDistance,-this.thickness*C,0),c+=3):(this.extrusions(f,p,r,S,E,this.totalDistance),l.push.apply(l,cn()(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),C=-1,bn["c"].copy(this.normal,S),c+=2),this.lastFlip=C}else{if(Cn(this.normal,xn),h){var A=bn["c"].create(),k=bn["c"].create();bn["c"].sub(k,xn,this.normal),bn["c"].add(A,xn,this.normal),p.push(k[0],k[1],0),p.push(A[0],A[1],0),f.push(r[0],r[1],0,this.totalDistance,this.thickness,0),f.push(r[0],r[1],0,this.totalDistance,this.thickness,0)}else this.extrusions(f,p,r,this.normal,this.thickness,this.totalDistance);l.push.apply(l,cn()(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),c+=2}return c}},{key:"segment",value:function(t,e,n,r,i){var o=0,s=t.indices,u=t.positions,c=t.normals,l="square"===this.cap,f="bevel"===this.join,p=Object(x["e"])([r[0],r[1]]),h=Object(x["e"])([n[0],n[1]]);Tn(xn,p,h);var d=0;if(this.dash&&(d=this.lineSegmentDistance(p,h),this.totalDistance+=d),this.normal||(this.normal=bn["c"].create(),Cn(this.normal,xn)),!this.started)if(this.started=!0,l){var v=bn["c"].create(),m=bn["c"].create();bn["c"].add(v,this.normal,xn),bn["c"].add(m,this.normal,xn),c.push(m[0],m[1],0),c.push(v[0],v[1],0),u.push(n[0],n[1],0,this.totalDistance-d,-this.thickness,0),u.push(n[0],n[1],0,this.totalDistance-d,this.thickness,0)}else this.extrusions(u,c,n,this.normal,this.thickness,this.totalDistance-d);if(s.push(e+0,e+1,e+2),i){var g=Object(x["e"])([i[0],i[1]]);On(p,g)&&bn["c"].add(g,p,bn["c"].normalize(g,bn["c"].subtract(g,p,h))),Tn(wn,g,p);var y=Sn(En,bn["c"].create(),xn,wn,this.thickness),b=a()(y,2),_=b[0],w=b[1],E=bn["c"].dot(En,this.normal)<0?-1:1,S=f;if(!S&&"miter"===this.join){var C=_;C>this.miterLimit&&(S=!0)}S?(c.push(this.normal[0],this.normal[1],0),c.push(w[0],w[1],0),u.push(r[0],r[1],0,this.totalDistance,-this.thickness*E,0),u.push(r[0],r[1],0,this.totalDistance,this.thickness*E,0),s.push.apply(s,cn()(this.lastFlip!==-E?[e,e+2,e+3]:[e+2,e+1,e+3])),s.push(e+2,e+3,e+4),Cn(_n,wn),bn["c"].copy(this.normal,_n),c.push(this.normal[0],this.normal[1],0),u.push(r[0],r[1],0,this.totalDistance,-this.thickness*E,0),o+=3):(this.extrusions(u,c,r,w,_,this.totalDistance),s.push.apply(s,cn()(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),E=-1,bn["c"].copy(this.normal,w),o+=2),this.lastFlip=E}else{if(Cn(this.normal,xn),l){var T=bn["c"].create(),O=bn["c"].create();bn["c"].sub(O,xn,this.normal),bn["c"].add(T,xn,this.normal),c.push(O[0],O[1],0),c.push(T[0],T[1],0),u.push(r[0],r[1],0,this.totalDistance,this.thickness,0),u.push(r[0],r[1],0,this.totalDistance,this.thickness,0)}else this.extrusions(u,c,r,this.normal,this.thickness,this.totalDistance);s.push.apply(s,cn()(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),o+=2}return o}},{key:"extrusions",value:function(t,e,n,r,i,o){e.push(r[0],r[1],0),e.push(r[0],r[1],0),t.push(n[0],n[1],0,o,-i,0),t.push(n[0],n[1],0,o,i,0)}},{key:"lineSegmentDistance",value:function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}}]),t}();function In(t){if(Ie()(t[0]))return t;if(Ie()(t[0][0]))throw new Error("\u5f53\u524d\u6570\u636e\u4e0d\u652f\u6301\u6807\u6ce8");if(Ie()(t[0][0][0])){var e=t,n=0,r=0,i=0;return e.forEach((function(t){t.forEach((function(t){n+=t[0],r+=t[1],i++}))})),[n/i,r/i,0]}throw new Error("\u5f53\u524d\u6570\u636e\u4e0d\u652f\u6301\u6807\u6ce8")}function Ln(t){var e=t[0][0],n=t[0][t[0].length-1];e[0]===n[0]&&e[1]===n[1]&&(t[0]=t[0].slice(0,t[0].length-1));for(var r=t[0].length,i=yn.a.flatten(t),o=i.vertices,a=i.dimensions,s=[],u=[],c=0;c<o.length/a;c++)2===a?s.push(o[2*c],o[2*c+1],1):s.push(o[3*c],o[3*c+1],1);var l=yn()(i.vertices,i.holes,i.dimensions);u.push.apply(u,cn()(l));for(var f=function(t){var e=i.vertices.slice(t*a,(t+1)*a),n=i.vertices.slice((t+1)*a,(t+2)*a);0===n.length&&(n=i.vertices.slice(0,a));var r=s.length/3;s.push(e[0],e[1],1,n[0],n[1],1,e[0],e[1],0,n[0],n[1],0),u.push.apply(u,cn()([0,2,1,2,3,1].map((function(t){return t+r}))))},p=0;p<r;p++)f(p);return{positions:s,index:u}}function Rn(t){var e=yn.a.flatten(t),n=yn()(e.vertices,e.holes,e.dimensions);return{positions:e.vertices,index:n}}function Dn(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t[0][0],r=t[0][t[0].length-1];n[0]===r[0]&&n[1]===r[1]&&(t[0]=t[0].slice(0,t[0].length-1));for(var i=t[0].length,o=yn.a.flatten(t),a=o.vertices,s=o.dimensions,u=[],c=[],l=[],f=0;f<a.length/s;f++)2===s?u.push(a[2*f],a[2*f+1],1,-1,-1):u.push(a[3*f],a[3*f+1],1,-1,-1),l.push(0,0,1);var p=yn()(o.vertices,o.holes,o.dimensions);c.push.apply(c,cn()(p));for(var h=function(t){var n=o.vertices.slice(t*s,(t+1)*s),r=o.vertices.slice((t+1)*s,(t+2)*s);0===r.length&&(r=o.vertices.slice(0,s));var i=u.length/5;u.push(n[0],n[1],1,0,0,r[0],r[1],1,.1,0,n[0],n[1],0,0,.8,r[0],r[1],0,.1,.8);var a=Nn([r[0],r[1],1],[n[0],n[1],0],[n[0],n[1],1],e);l.push.apply(l,cn()(a).concat(cn()(a),cn()(a),cn()(a))),c.push.apply(c,cn()([1,2,0,3,2,1].map((function(t){return t+i}))))},d=0;d<i;d++)h(d);return{positions:u,index:c,normals:l}}function Nn(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=bn["d"].create(),o=bn["d"].create(),a=bn["d"].create();r&&(t=Object(x["u"])(t),e=Object(x["u"])(e),n=Object(x["u"])(n));var s=bn["d"].fromValues.apply(bn["d"],cn()(t)),u=bn["d"].fromValues.apply(bn["d"],cn()(e)),c=bn["d"].fromValues.apply(bn["d"],cn()(n));bn["d"].sub(i,c,u),bn["d"].sub(o,s,u),bn["d"].cross(a,i,o);var l=bn["d"].create();return bn["d"].normalize(l,a),l}function jn(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=2*Math.PI/t,r=[],i=0;i<t;i++)r.push(n*i+e*Math.PI/12);var o=r.map((function(t){var e=Math.sin(t+Math.PI/4),n=Math.cos(t+Math.PI/4);return[e,n,0]}));return o}function Fn(){return jn(30)}function zn(){return jn(4)}function Bn(){return jn(3)}function Un(){return jn(6,1)}function Vn(){return jn(5)}(function(t){t["CYLINDER"]="cylinder",t["SQUARECOLUMN"]="squareColumn",t["TRIANGLECOLUMN"]="triangleColumn",t["HEXAGONCOLUMN"]="hexagonColumn",t["PENTAGONCOLUMN"]="pentagonColumn"})(kn||(kn={})),function(t){t["CIRCLE"]="circle",t["SQUARE"]="square",t["TRIANGLE"]="triangle",t["HEXAGON"]="hexagon",t["PENTAGON"]="pentagon"}(Mn||(Mn={}));var qn=(An={},p()(An,Mn.CIRCLE,Fn),p()(An,Mn.HEXAGON,Un),p()(An,Mn.TRIANGLE,Bn),p()(An,Mn.SQUARE,zn),p()(An,Mn.PENTAGON,Vn),p()(An,kn.CYLINDER,Fn),p()(An,kn.HEXAGONCOLUMN,Un),p()(An,kn.TRIANGLECOLUMN,Bn),p()(An,kn.SQUARECOLUMN,zn),p()(An,kn.PENTAGONCOLUMN,Vn),An),Gn={};function Hn(t){var e=In(t.coordinates);return{vertices:[].concat(cn()(e),cn()(e),cn()(e),cn()(e)),indices:[0,1,2,2,3,0],size:e.length}}function Wn(t){var e=t.shape,n=er(e,!1),r=n.positions,i=n.index,o=n.normals;return{vertices:r,indices:i,normals:o,size:5}}function Xn(t){var e=In(t.coordinates);return{vertices:cn()(e),indices:[0],size:e.length}}function Zn(t){var e=t.coordinates,n=t.originCoordinates,r=t.version,i=new Pn({dash:!0,join:"bevel"});if("GAODE2.x"===r){var o=e;Array.isArray(o[0][0])||(o=[e]);var a=n;Array.isArray(a[0][0])||(a=[n]);for(var s=0;s<o.length;s++){var u=o[s],c=a[s];i.extrude_gaode2(u,c)}}else{var l=e;Array.isArray(l[0][0])||(l=[e]),l.forEach((function(t){i.extrude(t)}))}var f=i.complex;return{vertices:f.positions,indices:f.indices,normals:f.normals,size:6}}function Yn(t){var e=t.coordinates,n=yn.a.flatten(e),r=n.vertices,i=n.dimensions,o=n.holes;return{indices:yn()(r,o,i),vertices:r,size:i}}function Kn(t){var e=t.coordinates,n=Dn(e,!0),r=n.positions,i=n.index,o=n.normals;return{vertices:r,indices:i,normals:o,size:5}}function Jn(t){var e=t.shape,n=nr(e),r=n.positions,i=n.index;return{vertices:r,indices:i,size:3}}function Qn(t){var e=t.coordinates,n=[].concat(cn()(e[0]),[0,0,1,e[1][0],e[0][1],0,1,1],cn()(e[1]),[0,1,0],cn()(e[0]),[0,0,1],cn()(e[1]),[0,1,0,e[0][0],e[1][1],0,0,0]),r=[0,1,2,3,4,5];return{vertices:n,indices:r,size:5}}function $n(t){for(var e=30,n=t.coordinates,r=[],i=[],o=function(t){r.push(t,1,t,n[0][0],n[0][1],n[1][0],n[1][1],t,-1,t,n[0][0],n[0][1],n[1][0],n[1][1]),t!==e-1&&i.push.apply(i,cn()([0,1,2,1,3,2].map((function(e){return 2*t+e}))))},a=0;a<e;a++)o(a);return{vertices:r,indices:i,size:7}}function tr(t){var e=t.coordinates;2===e.length&&e.push(0);t.size;var n=rr(-1,1),r=rr(1,1),i=rr(-1,-1),o=rr(1,-1),a=[].concat(cn()(e),cn()(n),cn()(e),cn()(i),cn()(e),cn()(o),cn()(e),cn()(r)),s=[0,1,2,3,0,2];return{vertices:a,indices:s,size:5}}function er(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Gn&&Gn[t])return Gn[t];var n=qn[t]?qn[t]():qn.cylinder(),r=Dn([n],e);return Gn[t]=r,r}function nr(t){var e=["cylinder","triangleColumn","hexagonColumn","squareColumn"],n=qn[t]?qn[t]():qn.circle(),r=-1===e.indexOf(t)?Rn([n]):Ln([n]);return r}function rr(t,e){var n=(t+1)/2,r=(e+1)/2;return[n,r]}function ir(t){var e=or();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function or(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var ar='uniform float u_opacity: 1.0;\nuniform vec4 u_baseColor : [ 1.0, 0, 0, 1.0 ];\nuniform vec4 u_brightColor : [ 1.0, 0, 0, 1.0 ];\nuniform vec4 u_windowColor : [ 1.0, 0, 0, 1.0 ];\nuniform float u_near : 0;\nuniform float u_far : 1;\nvarying vec4 v_Color;\nvarying vec2 v_texCoord;\nuniform float u_Zoom : 1;\nuniform float u_time;\n\n#pragma include "picking"\n\nvec3 getWindowColor(float n, float hot, vec3 brightColor, vec3 darkColor) {\n    float s = step(hot, n);\n    vec3 color = mix(brightColor,vec3(0.9,0.9,1.0),n);\n\n    return mix(darkColor, color, s);\n}\nfloat random (vec2 st) {\n    return fract(sin(dot(st.xy, vec2(12.9898,78.233)))* 43758.5453123);\n}\n\nfloat LinearizeDepth()\n{\n    float z = gl_FragCoord.z * 2.0 - 1.0;\n    return (2.0 * u_near * u_far) / (u_far + u_near - z * (u_far - u_near));\n}\n\nvec3 fog(vec3 color, vec3 fogColor, float depth){\n    float fogFactor=clamp(depth,0.0,1.0);\n    vec3 output_color=mix(fogColor,color,fogFactor);\n    return output_color;\n}\n\nfloat sdRect(vec2 p, vec2 sz) {\n  vec2 d = abs(p) - sz;\n  float outside = length(max(d, 0.));\n  float inside = min(max(d.x, d.y), 0.);\n  return outside + inside;\n}\n\nvoid main() {\n  gl_FragColor = v_Color;\n  vec3 baseColor = u_baseColor.xyz;\n  vec3 brightColor = u_brightColor.xyz;\n  vec3 windowColor = u_windowColor.xyz;\n  float targetColId = 5.;\n  float depth = 1.0 - LinearizeDepth() / u_far * u_Zoom;\n  vec3 fogColor = vec3(23.0/255.0,31.0/255.0,51.0/255.0);\n  if(v_texCoord.x < 0.) { //\u9876\u90e8\u989c\u8272\n       vec3 foggedColor = fog(baseColor.xyz + vec3(0.12*0.9,0.2*0.9,0.3*0.9),fogColor,depth);\n       gl_FragColor = vec4( foggedColor, v_Color.w);\n  }else { // \u4fa7\u9762\u989c\u8272\n        vec2 st = v_texCoord;\n        vec2  UvScale = v_texCoord;\n        float tStep = min(0.08,max(0.05* (18.0-u_Zoom),0.02));\n        float tStart = 0.25 * tStep;\n        float tEnd = 0.75 * tStep;\n        float u = mod(UvScale.x, tStep);\n        float v = mod(UvScale.y, tStep);\n        float ux = floor(UvScale.x/tStep);\n        float uy = floor(UvScale.y/tStep);\n        float n = random(vec2(ux,uy));\n        float lightP = u_time;\n        float head = 1.0- step(0.005,st.y);\n        /*step3*/\n        // \u5c06\u7a97\u6237\u989c\u8272\u548c\u5899\u9762\u989c\u8272\u533a\u522b\u5f00\u6765\n        float sU = step(tStart, u) - step(tEnd, u);\n        float sV = step(tStart, v) - step(tEnd, v);\n        vec2 windowSize = vec2(abs(tEnd-tStart),abs(tEnd-tStart));\n        float dist = sdRect(vec2(u,v), windowSize);\n        float s = sU * sV;\n\n        float curColId = floor(UvScale.x / tStep);\n        float sCol = step(targetColId - 0.2, curColId) - step(targetColId + 0.2, curColId);\n\n        float mLightP = mod(lightP, 2.);\n        float sRow = step(mLightP - 0.2, st.y) - step(mLightP, st.y);\n        if(ux == targetColId){\n            n =0.;\n        }\n        float timeP = min(0.75, abs ( sin(u_time/3.0) ) );\n        float hot = smoothstep(1.0,0.0,timeP);\n        vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), s);\n        //vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), 1.0);\n        float sFinal = s * sCol * sRow;\n        color += mix(baseColor, brightColor, sFinal*n);\n        if (st.y<0.01){\n        color = baseColor;\n         }\n        if(head ==1.0) { // \u9876\u90e8\u4eae\u7ebf\n            color = brightColor;\n        }\n        color = color * v_Color.rgb;\n\n        vec3 foggedColor = fog(color,fogColor,depth);\n\n        gl_FragColor = vec4(foggedColor,1.0);\n  }\n  gl_FragColor.a *= u_opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',sr='precision highp float;\n\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\n\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n\nvarying vec4 v_Color;\nuniform mat4 u_Mvp;\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nvoid main() {\n  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);\n  vec4 project_pos = project_position(pos);\n   v_texCoord = a_Uv;\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n\n  float lightWeight = calc_lighting(pos);\n  // v_Color = a_Color;\n  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);\n\n  setPickingColor(a_PickingColor);\n}\n',ur=function(t){m()(n,t);var e=ir(n);function n(){return u()(this,n),e.apply(this,arguments)}return l()(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.baseColor,i=void 0===r?"rgb(16,16,16)":r,o=t.brightColor,a=void 0===o?"rgb(255,176,38)":o,s=t.windowColor,u=void 0===s?"rgb(30,60,89)":s,c=t.time,l=void 0===c?0:c;return{u_opacity:n,u_baseColor:Object(x["A"])(i),u_brightColor:Object(x["A"])(a),u_windowColor:Object(x["A"])(u),u_time:this.layer.getLayerAnimateTime()||l}}},{key:"initModels",value:function(){return this.startModelAnimate(),[this.layer.buildLayerModel({moduleName:"cityBuilding",vertexShader:sr,fragmentShader:ar,triangulation:Kn})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:i["a"].Attribute,descriptor:{name:"a_Normal",buffer:{usage:i["r"].STATIC_DRAW,data:[],type:i["r"].FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:i["a"].Attribute,descriptor:{name:"a_Size",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:1,update:function(t,e,n,r){var i=t.size,o=void 0===i?10:i;return Array.isArray(o)?[o[0]]:[o]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:i["a"].Attribute,descriptor:{name:"a_Uv",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:2,update:function(t,e,n,r){t.size;return[n[3],n[4]]}}})}}]),n}(mn);function cr(t){var e=lr();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function lr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var fr=function(t){m()(n,t);var e=cr(n);function n(){var t;u()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),p()(d()(t),"type","PolygonLayer"),t}return l()(n,[{key:"buildModels",value:function(){this.layerModel=new ur(this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"setLight",value:function(t){this.updateLayerConfig({time:t})}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){return"citybuilding"}}]),n}(sn);function pr(t){var e=hr();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function hr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var dr='precision highp float;\r\n// \u591a\u8fb9\u5f62\u9876\u70b9\u5750\u6807\r\nattribute vec3 a_Position;\r\n// \u591a\u8fb9\u5f62\u7ecf\u7eac\u5ea6\u5750\u6807\r\nattribute vec3 a_Pos;\r\nattribute float a_Size;\r\nattribute vec4 a_Color;\r\nuniform vec2 u_radius;\r\nuniform float u_coverage: 0.9;\r\nuniform float u_angle: 0;\r\nuniform mat4 u_ModelMatrix;\r\nuniform mat4 u_Mvp;\r\nvarying vec4 v_color;\r\n\r\nuniform vec2 u_SceneCenterMKT;\r\n\r\n#pragma include "projection"\r\n#pragma include "project"\r\n#pragma include "picking"\r\n\r\nvoid main() {\r\n  v_color = a_Color;\r\n\r\n  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\r\n  vec2 offset = a_Position.xy * u_radius * rotationMatrix * u_coverage ;\r\n  // vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r\n  // vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\r\n  // gl_Position = project_common_position_to_clipspace(project_pos);\r\n\r\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\r\n    vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r\n    vec2 customLnglat = customProject(lnglat) - u_SceneCenterMKT; // \u5c06\u7ecf\u7eac\u5ea6\u8f6c\u6362\u4e3a\u9ad8\u5fb72.0\u9700\u8981\u7684\u5e73\u9762\u5750\u6807\r\n    vec4 project_pos = project_position(vec4(customLnglat, 0, 1.0));\r\n    gl_Position = u_Mvp * (project_pos);\r\n  } else {\r\n     vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r\n    vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\r\n    gl_Position = project_common_position_to_clipspace(project_pos);\r\n  }\r\n\r\n  setPickingColor(a_PickingColor);\r\n}\r\n',vr='precision highp float;\nvarying vec4 v_color;\nuniform float u_opacity: 1;\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n  gl_FragColor.a *= u_opacity;\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',mr=function(t){m()(n,t);var e=pr(n);function n(){return u()(this,n),e.apply(this,arguments)}return l()(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=t.coverage,r=t.angle;return{u_opacity:e||1,u_coverage:n||.9,u_angle:r||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"gridheatmap",vertexShader:dr,fragmentShader:vr,triangulation:Jn,depth:{enable:!1},primitive:i["r"].TRIANGLES,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:i["a"].Attribute,descriptor:{name:"a_Pos",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:3,update:function(t,e){var n="GAODE2.x"===t.version?t.originCoordinates:t.coordinates;return[n[0],n[1],0]}}})}}]),n}(mn);function gr(t){var e=yr();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function yr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var br,_r,xr='precision highp float;\n// \u591a\u8fb9\u5f62\u9876\u70b9\u5750\u6807\nattribute vec3 a_Position;\n// \u591a\u8fb9\u5f62\u7ecf\u7eac\u5ea6\u5750\u6807\nattribute vec3 a_Pos;\n\nattribute vec3 a_Normal;\nattribute float a_Size;\nattribute vec4 a_Color;\nuniform vec2 u_radius;\nuniform float u_coverage: 0.9;\nuniform float u_angle: 0;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nvarying vec4 v_color;\n\nuniform vec2 u_SceneCenterMKT;\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "light"\n#pragma include "picking"\n\n\nvoid main() {\n  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\n  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));\n  // vec2 lnglat = unProjectFlat(a_Pos.xy + offset); // \u5b9e\u9645\u7684\u7ecf\u7eac\u5ea6\n  // vec2 lnglat = (a_Pos.xy + offset); \n  // vec4 project_pos = project_position(vec4(lnglat, a_Position.z * a_Size, 1.0));\n  // gl_Position = project_common_position_to_clipspace(project_pos);\n  // float lightWeight = calc_lighting(project_pos);\n  // v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    // vec2 lnglat = (a_Pos.xy + offset); \n    // vec4 project_pos = project_position(vec4(lnglat, a_Position.z * a_Size, 1.0));\n\n    // float lightWeight = calc_lighting(project_pos);\n    // v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);\n  \n    // gl_Position = u_Mvp * vec4(lnglat , a_Position.z * a_Size, 1.0);\n    vec2 lnglat = unProjectFlat(a_Pos.xy + offset); // \u7ecf\u7eac\u5ea6\n    vec2 customLnglat = customProject(lnglat) - u_SceneCenterMKT; // \u5c06\u7ecf\u7eac\u5ea6\u8f6c\u6362\u4e3a\u9ad8\u5fb72.0\u9700\u8981\u7684\u5e73\u9762\u5750\u6807\n    vec4 project_pos = project_position(vec4(customLnglat, a_Position.z * a_Size, 1.0));\n\n    float lightWeight = calc_lighting(project_pos);\n    v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);\n  \n    gl_Position = u_Mvp * vec4(customLnglat , a_Position.z * a_Size, 1.0);\n  } else {\n    vec2 lnglat = unProjectFlat(a_Pos.xy + offset); // \u5b9e\u9645\u7684\u7ecf\u7eac\u5ea6\n    vec4 project_pos = project_position(vec4(lnglat, a_Position.z * a_Size, 1.0));\n    \n    float lightWeight = calc_lighting(project_pos);\n    v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);\n    \n    gl_Position = project_common_position_to_clipspace(project_pos);\n  }\n\n\n\n  setPickingColor(a_PickingColor);\n}\n',wr='precision highp float;\nvarying vec4 v_color;\nuniform float u_opacity: 1;\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n  gl_FragColor.a *= u_opacity;\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',Er=function(t){m()(n,t);var e=gr(n);function n(){return u()(this,n),e.apply(this,arguments)}return l()(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=t.coverage,r=t.angle;return{u_opacity:e||1,u_coverage:n||1,u_angle:r||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"grid3dheatmap",vertexShader:xr,fragmentShader:wr,triangulation:Wn,depth:{enable:!0},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:i["a"].Attribute,descriptor:{name:"a_Size",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:1,update:function(t,e,n,r){var i=t.size;return Array.isArray(i)?[i[0]]:[i]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:i["a"].Attribute,descriptor:{name:"a_Normal",buffer:{usage:i["r"].STATIC_DRAW,data:[],type:i["r"].FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:i["a"].Attribute,descriptor:{name:"a_Pos",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:3,update:function(t,e){var n="GAODE2.x"===t.version?t.originCoordinates:t.coordinates;return[n[0],n[1],0]}}})}}]),n}(mn);function Sr(t,e){for(var n=[],r=[],i=[],o=t+1,a=e+1,s=t/2,u=e/2,c=0;c<a;c++)for(var l=c-u,f=0;f<o;f++){var p=f-s;r.push(p/s,-l/u,0),i.push(f/t),i.push(1-c/e)}for(var h=0;h<e;h++)for(var d=0;d<t;d++){var v=d+o*h,m=d+o*(h+1),g=d+1+o*(h+1),y=d+1+o*h;n.push(v,m,y),n.push(m,g,y)}return{vertices:r,indices:n,uvs:i}}function Cr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Tr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Cr(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Or(t){var e=Ar();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function Ar(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var kr="uniform sampler2D u_texture;\nuniform sampler2D u_colorTexture;\nuniform float u_opacity;\nvarying vec2 v_texCoord;\nvarying float v_intensity;\n\nvoid main(){\n   \n     float intensity = texture2D(u_texture, v_texCoord).r;\n    vec4 color = texture2D(u_colorTexture,vec2(intensity, 0));\n    gl_FragColor = color;\n    // gl_FragColor.a = color.a * smoothstep(0.1,0.2,intensity)* u_opacity;\n     gl_FragColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;\n}\n",Mr='precision highp float;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nuniform sampler2D u_texture;\nvarying vec2 v_texCoord;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_InverseViewProjectionMatrix;\nuniform mat4 u_ViewProjectionMatrixUncentered;\nvarying float v_intensity;\n\n\nvec2 toBezier(float t, vec2 P0, vec2 P1, vec2 P2, vec2 P3) {\n    float t2 = t * t;\n    float one_minus_t = 1.0 - t;\n    float one_minus_t2 = one_minus_t * one_minus_t;\n    return (P0 * one_minus_t2 * one_minus_t + P1 * 3.0 * t * one_minus_t2 + P2 * 3.0 * t2 * one_minus_t + P3 * t2 * t);\n}\nvec2 toBezier(float t, vec4 p){\n    return toBezier(t, vec2(0.0, 0.0), vec2(p.x, p.y), vec2(p.z, p.w), vec2(1.0, 1.0));\n}\n#pragma include "projection"\nvoid main() {\n  v_texCoord = a_Uv;\n\n  vec2 pos = a_Uv * vec2(2.0) - vec2(1.0); // \u5c06\u539f\u672c 0 -> 1 \u7684 uv \u8f6c\u6362\u4e3a -1 -> 1 \u7684\u6807\u51c6\u5750\u6807\u7a7a\u95f4\uff08NDC\uff09\n\n  vec4 p1 = vec4(pos, 0.0, 1.0); // x/y \u5e73\u9762\u4e0a\u7684\u70b9\uff08z == 0\uff09\u53ef\u4ee5\u8ba4\u4e3a\u662f\u4e09\u7ef4\u4e0a\u7684\u70b9\u88ab\u6295\u5f71\u5230\u5e73\u9762\u540e\u7684\u70b9\n\tvec4 p2 = vec4(pos, 1.0, 1.0); // \u5e73\u884c\u4e8ex/y\u5e73\u9762\u3001z==1 \u7684\u5e73\u9762\u4e0a\u7684\u70b9\n\n\tvec4 inverseP1 = u_InverseViewProjectionMatrix * p1; // \u6839\u636e\u89c6\u56fe\u6295\u5f71\u77e9\u9635\u7684\u9006\u77e9\u9635\u5e73\u9762\u4e0a\u7684\u53cd\u7b97\u51fa\u4e09\u7ef4\u7a7a\u95f4\u4e2d\u7684\u70b9\uff08p1\u5e73\u9762\u4e0a\u7684\u70b9\uff09\n\tvec4 inverseP2 = u_InverseViewProjectionMatrix * p2;\n\n  inverseP1 = inverseP1 / inverseP1.w; // \u5f52\u4e00\u5316\u64cd\u4f5c\uff08\u5f52\u4e00\u5316\u540e\u4e3a\u4e16\u754c\u5750\u6807\uff09\n\tinverseP2 = inverseP2 / inverseP2.w;\n\n\tfloat zPos = (0.0 - inverseP1.z) / (inverseP2.z - inverseP1.z); // ??\n\tvec4 position = inverseP1 + zPos * (inverseP2 - inverseP1);\n\n  vec4 b= vec4(0.5000, 0.0, 1.0, 0.5000);\n  float fh;\n\n  v_intensity = texture2D(u_texture, v_texCoord).r;\n  fh = toBezier(v_intensity, b).y;\n  gl_Position = u_ViewProjectionMatrixUncentered * vec4(position.xy, fh * project_pixel(50.), 1.0);\n \n}\n',Pr="uniform sampler2D u_texture;\nuniform sampler2D u_colorTexture;\nuniform float u_opacity;\nvarying vec2 v_texCoord;\nvarying float v_intensity;\n\nvoid main(){\n     float intensity = texture2D(u_texture, v_texCoord).r;\n    vec4 color = texture2D(u_colorTexture,vec2(intensity, 0));\n    gl_FragColor =color;\n    gl_FragColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;\n\n}\n",Ir="precision highp float;\nuniform float u_intensity;\nvarying float v_weight;\nvarying vec2 v_extrude;\n#define GAUSS_COEF  0.3989422804014327\nvoid main(){\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = v_weight * u_intensity * GAUSS_COEF * exp(d);\n    gl_FragColor = vec4(val, 1., 1., 1.);\n}\n",Lr='precision highp float;\nattribute vec3 a_Position;\nattribute float a_Size;\nattribute vec2 a_Dir;\nuniform float u_intensity;\nuniform float u_radius;\nvarying vec2 v_extrude;\nvarying float v_weight;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\n#define GAUSS_COEF  0.3989422804014327\n\n#pragma include "projection"\n\nvoid main(){\n    v_weight = a_Size;\n    float ZERO = 1.0 / 255.0 / 16.0;\n    float extrude_x = a_Dir.x * 2.0 -1.0;\n    float extrude_y = a_Dir.y * 2.0 -1.0;\n    vec2 extrude_dir = normalize(vec2(extrude_x,extrude_y));\n    float S = sqrt(-2.0 * log(ZERO / a_Size / u_intensity / GAUSS_COEF)) / 3.0;\n    v_extrude = extrude_dir * S;\n\n    vec2 offset = project_pixel(v_extrude * u_radius);\n    vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));\n\n    // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));\n\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n        gl_Position = u_Mvp * (vec4(project_pos.xy + offset, 0.0, 1.0));\n    } else {\n        gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));\n    }\n}\n',Rr="precision highp float;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nuniform sampler2D u_texture;\nvarying vec2 v_texCoord;\nvarying float v_intensity;\nvoid main() {\n  v_texCoord = a_Uv;\n  v_intensity = texture2D(u_texture, v_texCoord).r;\n  gl_Position = vec4(a_Position.xy, 0, 1.);\n}\n",Dr=(br=Object(Ct["injectable"])(),br(_r=function(t){m()(n,t);var e=Or(n);function n(){var t;u()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),p()(d()(t),"texture",void 0),p()(d()(t),"colorTexture",void 0),p()(d()(t),"heatmapFramerBuffer",void 0),p()(d()(t),"intensityModel",void 0),p()(d()(t),"colorModel",void 0),p()(d()(t),"shapeType",void 0),t}return l()(n,[{key:"render",value:function(){var t=this,e=this.rendererService,n=e.clear,r=e.useFramebuffer;r(this.heatmapFramerBuffer,(function(){n({color:[0,0,0,0],depth:1,stencil:0,framebuffer:t.heatmapFramerBuffer}),t.drawIntensityMode()})),this.layer.styleNeedUpdate&&this.updateColorTexture(),"heatmap"===this.shapeType?this.drawColorMode():this.draw3DHeatMap()}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"initModels",value:function(){var t,e=this.rendererService,n=e.createFramebuffer,r=(e.clear,e.getViewportSize),o=e.createTexture2D,a=(e.useFramebuffer,this.styleAttributeService.getLayerStyleAttribute("shape")),s=(null===a||void 0===a||null===(t=a.scale)||void 0===t?void 0:t.field)||"heatmap";this.shapeType=s,this.intensityModel=this.buildHeatMapIntensity(),this.colorModel="heatmap"===s?this.buildHeatmapColor():this.build3dHeatMap();var u=this.layer.getLayerConfig(),c=u.rampColors,l=(Object(x["p"])(c),r()),f=l.width,p=l.height;return this.heatmapFramerBuffer=n({color:o({width:Math.floor(f/4),height:Math.floor(p/4),wrapS:i["r"].CLAMP_TO_EDGE,wrapT:i["r"].CLAMP_TO_EDGE,min:i["r"].LINEAR,mag:i["r"].LINEAR}),depth:!1}),this.updateColorTexture(),[this.intensityModel,this.colorModel]}},{key:"buildModels",value:function(){return this.initModels()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"dir",type:i["a"].Attribute,descriptor:{name:"a_Dir",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:2,update:function(t,e,n,r){return[n[3],n[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:i["a"].Attribute,descriptor:{name:"a_Size",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:1,update:function(t,e,n,r){var i=t.size,o=void 0===i?1:i;return[o]}}})}},{key:"buildHeatMapIntensity",value:function(){return this.layer.buildLayerModel({moduleName:"heatmapintensity",vertexShader:Lr,fragmentShader:Ir,triangulation:tr,depth:{enable:!1},blend:{enable:!0,func:{srcRGB:i["r"].ONE,srcAlpha:1,dstRGB:i["r"].ONE,dstAlpha:1}}})}},{key:"buildHeatmapColor",value:function(){this.shaderModuleService.registerModule("heatmapColor",{vs:Rr,fs:Pr});var t=this.shaderModuleService.getModule("heatmapColor"),e=t.vs,n=t.fs,r=t.uniforms,o=this.rendererService,a=o.createAttribute,s=o.createElements,u=o.createBuffer,c=o.createModel;return c({vs:e,fs:n,attributes:{a_Position:a({buffer:u({data:[-1,1,0,1,1,0,-1,-1,0,1,-1,0],type:i["r"].FLOAT}),size:3}),a_Uv:a({buffer:u({data:[0,1,1,1,0,0,1,0],type:i["r"].FLOAT}),size:2})},uniforms:Tr({},r),depth:{enable:!1},blend:this.getBlend(),count:6,elements:s({data:[0,2,1,2,3,1],type:i["r"].UNSIGNED_INT,count:6})})}},{key:"drawIntensityMode",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=t.intensity,r=void 0===n?10:n,i=t.radius,o=void 0===i?5:i;this.intensityModel.draw({uniforms:{u_opacity:e||1,u_radius:o,u_intensity:r}})}},{key:"drawColorMode",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity;this.colorModel.draw({uniforms:{u_opacity:e||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer}})}},{key:"draw3DHeatMap",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=bn["b"].create();bn["b"].invert(n,this.cameraService.getViewProjectionMatrixUncentered()),this.colorModel.draw({uniforms:{u_opacity:e||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer,u_ViewProjectionMatrixUncentered:this.cameraService.getViewProjectionMatrixUncentered(),u_InverseViewProjectionMatrix:cn()(n)}})}},{key:"build3dHeatMap",value:function(){var t=this.rendererService.getViewportSize,e=t(),n=e.width,r=e.height,o=Sr(n/4,r/4);this.shaderModuleService.registerModule("heatmap3dColor",{vs:Mr,fs:kr});var a=this.shaderModuleService.getModule("heatmap3dColor"),s=a.vs,u=a.fs,c=a.uniforms,l=this.rendererService,f=l.createAttribute,p=l.createElements,h=l.createBuffer,d=l.createModel;return d({vs:s,fs:u,attributes:{a_Position:f({buffer:h({data:o.vertices,type:i["r"].FLOAT}),size:3}),a_Uv:f({buffer:h({data:o.uvs,type:i["r"].FLOAT}),size:2})},primitive:i["r"].TRIANGLES,uniforms:Tr({},c),depth:{enable:!0},blend:{enable:!0,func:{srcRGB:i["r"].SRC_ALPHA,srcAlpha:1,dstRGB:i["r"].ONE_MINUS_SRC_ALPHA,dstAlpha:1}},elements:p({data:o.indices,type:i["r"].UNSIGNED_INT,count:o.indices.length})})}},{key:"updateStyle",value:function(){this.updateColorTexture()}},{key:"updateColorTexture",value:function(){var t=this.rendererService.createTexture2D;this.texture&&this.texture.destroy();var e=this.layer.getLayerConfig(),n=e.rampColors,r=Object(x["p"])(n);this.colorTexture=t({data:new Uint8Array(r.data),width:r.width,height:r.height,wrapS:i["r"].CLAMP_TO_EDGE,wrapT:i["r"].CLAMP_TO_EDGE,min:i["r"].NEAREST,mag:i["r"].NEAREST,flipY:!1})}}]),n}(mn))||_r);function Nr(t){var e=jr();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function jr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Fr='precision highp float;\nvarying vec4 v_color;\nuniform float u_opacity: 1;\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n  gl_FragColor.a *= u_opacity;\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',zr='precision highp float;\n// \u591a\u8fb9\u5f62\u9876\u70b9\u5750\u6807\nattribute vec3 a_Position;\n// \u591a\u8fb9\u5f62\u7ecf\u7eac\u5ea6\u5750\u6807\nattribute vec3 a_Pos;\nattribute float a_Size;\nattribute vec4 a_Color;\nuniform vec2 u_radius;\nuniform float u_coverage: 0.9;\nuniform float u_angle: 0;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nvarying vec4 v_color;\n\nuniform vec2 u_SceneCenterMKT;\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nvoid main() {\n  v_color = a_Color;\n    \n  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\n  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));\n  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\n \n  // vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0., 1.0));\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    // gl_Position = u_Mvp * (vec4(project_pos.xy, 0., 1.0));\n    // gl_Position = u_Mvp * (vec4(a_Pos.xy + offset, 0., 1.0));\n    vec2 customLnglat = customProject(lnglat) - u_SceneCenterMKT;\n    vec4 project_pos = project_position(vec4(customLnglat, 0, 1.0));\n    gl_Position = u_Mvp * vec4(project_pos.xy, 0.0, 1.0);\n  } else {\n    vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0., 1.0));\n  }\n  setPickingColor(a_PickingColor);\n}\n',Br=function(t){m()(n,t);var e=Nr(n);function n(){return u()(this,n),e.apply(this,arguments)}return l()(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=t.coverage,r=t.angle;return{u_opacity:e||1,u_coverage:n||.9,u_angle:r||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"hexagonheatmap",vertexShader:zr,fragmentShader:Fr,triangulation:Jn,depth:{enable:!1},primitive:i["r"].TRIANGLES,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:i["a"].Attribute,descriptor:{name:"a_Pos",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:3,update:function(t,e){var n="GAODE2.x"===t.version?t.originCoordinates:t.coordinates;return[n[0],n[1],0]}}})}}]),n}(mn),Ur={heatmap:Dr,heatmap3d:Dr,grid:mr,grid3d:Er,hexagon:Br},Vr=Ur;function qr(t){var e=Gr();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function Gr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Hr=function(t){m()(n,t);var e=qr(n);function n(){var t;u()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),p()(d()(t),"type","HeatMapLayer"),t}return l()(n,[{key:"buildModels",value:function(){var t=this.getModelType();this.layerModel=new Vr[t](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"renderModels",value:function(){var t=this,e=this.getModelType();return"heatmap"===e?(this.layerModel&&this.layerModel.render(),this):(this.layerModelNeedUpdate&&(this.models=this.layerModel.buildModels(),this.layerModelNeedUpdate=!1),this.models.forEach((function(e){return e.draw({uniforms:t.layerModel.getUninforms()})})),this)}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){var t,e=this.styleAttributeService.getLayerStyleAttribute("shape"),n=this.getLayerConfig(),r=n.shape3d,i=this.getSource(),o=i.data.type,a=(null===e||void 0===e||null===(t=e.scale)||void 0===t?void 0:t.field)||"heatmap";return"heatmap"===a||"heatmap3d"===a?"heatmap":"hexagon"===o?-1===(null===r||void 0===r?void 0:r.indexOf(a))?"hexagon":"grid3d":"grid"===o?-1===(null===r||void 0===r?void 0:r.indexOf(a))?"grid":"grid3d":"heatmap"}}]),n}(sn);function Wr(t){var e=Xr();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function Xr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Zr="precision mediump float;\nuniform float u_opacity: 1.0;\nuniform sampler2D u_texture;\nvarying vec2 v_texCoord;\nvoid main() {\n  vec4 color = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y));\n  gl_FragColor = color;\n  gl_FragColor.a *= u_opacity;\n}\n",Yr='precision highp float;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n#pragma include "projection"\nvoid main() {\n   v_texCoord = a_Uv;\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n   // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));\n   } else {\n      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n   }\n}\n',Kr=function(t){m()(n,t);var e=Wr(n);function n(){var t;u()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),p()(d()(t),"texture",void 0),t}return l()(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity;return{u_opacity:e||1,u_texture:this.texture}}},{key:"initModels",value:function(){var t=this,e=this.layer.getSource(),n=this.rendererService.createTexture2D;return this.texture=n({height:0,width:0}),e.data.images.then((function(e){t.texture=n({data:e[0],width:e[0].width,height:e[0].height}),t.layerService.renderLayers()})),[this.layer.buildLayerModel({moduleName:"RasterImage",vertexShader:Yr,fragmentShader:Zr,triangulation:Qn,primitive:i["r"].TRIANGLES,depth:{enable:!1},blend:this.getBlend()})]}},{key:"buildModels",value:function(){return this.initModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:i["a"].Attribute,descriptor:{name:"a_Uv",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:2,update:function(t,e,n,r){return[n[3],n[4]]}}})}}]),n}(mn),Jr={image:Kr},Qr=Jr;function $r(t){var e=ti();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function ti(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var ei=function(t){m()(n,t);var e=$r(n);function n(){var t;u()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),p()(d()(t),"type","ImageLayer"),t}return l()(n,[{key:"buildModels",value:function(){var t=this.getModelType();this.layerModel=new Qr[t](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var t=this.getModelType(),e={image:{}};return e[t]}},{key:"getModelType",value:function(){return"image"}}]),n}(sn);function ni(t){var e=ri();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function ri(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var ii='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\n\nuniform float u_opacity;\nuniform float u_textureBlend;\nuniform float u_blur : 0.9;\nuniform float u_line_type: 0.0;\nvarying vec2 v_normal;\nvarying vec4 v_dash_array;\nvarying float v_distance_ratio;\nvarying vec4 v_color;\n\nuniform float u_time;\nuniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];\n\nuniform float u_line_texture;\nuniform sampler2D u_texture;\nuniform vec2 u_textSize;\n\nuniform float segmentNumber;\nvarying float v_segmentIndex;\nvarying float v_arcDistrance;\nvarying float v_pixelLen;\nvarying float v_a;\nvarying vec2 v_offset;\nvarying vec2 v_iconMapUV;\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\nuniform float u_linearColor: 0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\n\n#pragma include "picking"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float animateSpeed = 0.0; // \u8fd0\u52a8\u901f\u5ea6\n\n  if(u_linearColor == 1.0) { // \u4f7f\u7528\u6e10\u53d8\u989c\u8272\n    gl_FragColor = mix(u_sourceColor, u_targetColor, v_segmentIndex/segmentNumber);\n  } else { // \u4f7f\u7528 color \u65b9\u6cd5\u4f20\u5165\u7684\u989c\u8272\n     gl_FragColor = v_color;\n  }\n\n  // gl_FragColor = v_color;\n  \n  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));\n  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));\n  gl_FragColor.a *= opacity;\n  if(u_line_type == LineTypeDash) {\n   float flag = 0.;\n    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);\n    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {\n      flag = 1.;\n    }\n    gl_FragColor.a *=flag;\n  }\n\n  if(u_aimate.x == Animate) {\n      animateSpeed = u_time / u_aimate.y;\n      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);\n      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;\n      // alpha = smoothstep(0., 1., alpha);\n      alpha = clamp(alpha, 0.0, 1.0);\n      gl_FragColor.a *= alpha;\n  }\n\n  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture\n    float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));\n    // float arcRadio = smoothstep( 0.0, 1.0, v_distance_ratio);\n    // float arcRadio = v_segmentIndex / (segmentNumber - 1.0);\n    float count = floor(v_arcDistrance/v_pixelLen);\n\n    float u = 1.0 - fract(arcRadio * count + animateSpeed);\n\n    if(u_aimate.x == Animate) {\n      u = gl_FragColor.a/opacity;\n    }\n    float v = length(v_offset)/(v_a); // \u6a2a\u5411\n    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;\n\n    vec4 pattern = texture2D(u_texture, uv);\n\n    if(u_textureBlend == 0.0) { // normal\n      pattern.a = 0.0;\n      gl_FragColor = filterColor(gl_FragColor + pattern);\n    } else { // replace\n        pattern.a *= opacity;\n        if(gl_FragColor.a <= 0.0) {\n          pattern.a = 0.0;\n        }\n        gl_FragColor = filterColor(pattern);\n    }\n    // gl_FragColor = vec4(1.0 - fract(arcRadio * 20000.0), 0.0, 0.0, 1.0);\n    // gl_FragColor = filterColor(gl_FragColor + texture2D(u_texture, uv));\n    // gl_FragColor = filterColor(texture2D(u_texture, uv));\n    \n  } else {\n     gl_FragColor = filterColor(gl_FragColor);\n  }\n  // gl_FragColor = filterColor(gl_FragColor);\n\n}',oi='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\n\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float segmentNumber;\nuniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];\nvarying vec4 v_color;\nvarying vec2 v_normal;\n\nvarying float v_distance_ratio;\nuniform float u_line_type: 0.0;\nuniform vec4 u_dash_array: [10.0, 5., 0, 0];\nuniform float u_lineDir: 1.0;\nvarying vec4 v_dash_array;\n\nuniform float u_icon_step: 100;\nuniform float u_line_texture: 0.0;\nvarying float v_segmentIndex;\nvarying float v_arcDistrance;\nvarying float v_pixelLen;\nvarying float v_a;\nvarying vec2 v_offset;\nattribute vec2 a_iconMapUV;\nvarying vec2 v_iconMapUV;\n\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat bezier3(vec3 arr, float t) {\n  float ut = 1. - t;\n  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;\n}\nvec2 midPoint(vec2 source, vec2 target) {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  vec2 center = target - source;\n  float r = length(center);\n  float theta = atan(center.y, center.x);\n  float thetaOffset = 0.314;\n  float r2 = r / 2.0 / cos(thetaOffset);\n  float theta2 = theta + thetaOffset;\n  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);\n  if(u_lineDir == 1.0) { // \u6b63\u5411\n    return mid;\n  } else { // \u9006\u5411\n    // (mid + vmin)/2 = (s + t)/2\n    vec2 vmid = source + target - mid;\n    return vmid;\n  }\n  // return mid;\n}\nfloat getSegmentRatio(float index) {\n    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));\n}\nvec2 interpolate (vec2 source, vec2 target, float t) {\n  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation\n  vec2 mid = midPoint(source, target);\n  vec3 x = vec3(source.x, mid.x, target.x);\n  vec3 y = vec3(source.y, mid.y, target.y);\n  return vec2(bezier3(x ,t), bezier3(y,t));\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\n\nvoid main() {\n  v_color = a_Color;\n  \n\n  vec2 source = a_Instance.rg;\n  vec2 target =  a_Instance.ba;\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  if(u_line_type == LineTypeDash) {\n      v_distance_ratio = segmentIndex / segmentNumber;\n      vec2 s = source;\n      vec2 t = target;\n      \n      if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n        s = unProjCustomCoord(source);\n        t = unProjCustomCoord(target);\n      }\n      float total_Distance = pixelDistance(s, t) / 2.0 * PI;\n      // float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;\n      v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);\n  }\n  \n  if(u_aimate.x == Animate) {\n      v_distance_ratio = segmentIndex / segmentNumber;\n      if(u_lineDir != 1.0) {\n        v_distance_ratio = 1.0 - v_distance_ratio;\n      }\n  }\n\n  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio), 0.0, 1.0));\n  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio), 0.0, 1.0));\n  v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n  //unProjCustomCoord\n  \n  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));\n\n  v_segmentIndex = a_Position.x + 1.0;\n  if(LineTexture == u_line_texture) { // \u5f00\u542f\u8d34\u56fe\u6a21\u5f0f\n\n    v_arcDistrance = length(source - target);\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap\n      v_arcDistrance *= 1000000.0;\n    }\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox\n      // v_arcDistrance *= 8.0;\n      v_arcDistrance = project_pixel_allmap(v_arcDistrance);\n    }\n    v_iconMapUV = a_iconMapUV;\n    v_pixelLen = project_pixel(u_icon_step);\n    v_a = project_pixel(a_Size);\n    v_offset = offset + offset * sign(a_Position.y);\n  }\n  \n\n  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    // gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));\n    gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));\n  }\n  setPickingColor(a_PickingColor);\n}\n',ai={solid:0,dash:1},si=function(t){m()(n,t);var e=ni(n);function n(){var t;u()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o)),p()(d()(t),"texture",void 0),p()(d()(t),"updateTexture",(function(){var e=t.rendererService.createTexture2D;if(t.texture)return t.texture.update({data:t.iconService.getCanvas()}),void t.layer.render();t.texture=e({data:t.iconService.getCanvas(),mag:i["r"].NEAREST,min:i["r"].NEAREST,premultiplyAlpha:!1,width:1024,height:t.iconService.canvasHeight||128})})),t}return l()(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=t.sourceColor,r=t.targetColor,o=t.textureBlend,a=void 0===o?"normal":o,s=t.lineType,u=void 0===s?"solid":s,c=t.dashArray,l=void 0===c?[10,5]:c,f=t.forward,p=void 0===f||f,h=t.lineTexture,d=void 0!==h&&h,v=t.iconStep,m=void 0===v?100:v;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:e})){this.judgeStyleAttributes({opacity:e});var g=this.layer.getEncodedData(),y=this.calDataFrame(this.cellLength,g,this.cellProperties),b=y.data,_=y.width,w=y.height;this.rowCount=w,this.dataTexture=this.cellLength>0&&b.length>0?this.createTexture2D({flipY:!0,data:b,format:i["r"].LUMINANCE,type:i["r"].FLOAT,width:_,height:w}):this.createTexture2D({flipY:!0,data:[1],format:i["r"].LUMINANCE,type:i["r"].FLOAT,width:1,height:1})}2===l.length&&l.push(0,0);var E=0,S=[0,0,0,0],C=[0,0,0,0];return n&&r&&(S=Object(x["A"])(n),C=Object(x["A"])(r),E=1),this.rendererService.getDirty()&&this.texture.bind(),{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Ie()(e)?e:1,u_textureBlend:"normal"===a?0:1,segmentNumber:30,u_line_type:ai[u||"solid"],u_dash_array:l,u_blur:.9,u_lineDir:p?1:-1,u_texture:this.texture,u_line_texture:d?1:0,u_icon_step:m,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:E,u_sourceColor:S,u_targetColor:C}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption;return{u_aimate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),this.buildModels()}},{key:"clearModels",value:function(){var t,e;null===(t=this.texture)||void 0===t||t.destroy(),null===(e=this.dataTexture)||void 0===e||e.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"arc2dline",vertexShader:oi,fragmentShader:ii,triangulation:$n,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:i["a"].Attribute,descriptor:{name:"a_Size",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:1,update:function(t,e,n,r){var i=t.size,o=void 0===i?1:i;return Array.isArray(o)?[o[0]]:[o]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:i["a"].Attribute,descriptor:{name:"a_Instance",buffer:{usage:i["r"].STATIC_DRAW,data:[],type:i["r"].FLOAT},size:4,update:function(t,e,n,r){return[n[3],n[4],n[5],n[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:i["a"].Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:2,update:function(e,n,r,i){var o=t.iconService.getIconMap(),a=e.texture,s=o[a]||{x:0,y:0},u=s.x,c=s.y;return[u,c]}}})}}]),n}(mn);function ui(t){var e=ci();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function ci(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var li='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\n\nuniform float u_opacity;\nuniform float u_textureBlend;\nuniform float u_blur : 0.9;\nuniform float u_line_type: 0.0;\nvarying vec2 v_normal;\nvarying vec4 v_dash_array;\nvarying float v_distance_ratio;\nvarying vec4 v_color;\n\nuniform float u_line_texture: 0.0;\nuniform sampler2D u_texture;\nuniform vec2 u_textSize;\nvarying float v_segmentIndex;\nuniform float segmentNumber;\nvarying float v_arcDistrance;\nvarying float v_pixelLen;\nvarying float v_a;\nvarying vec2 v_offset;\nvarying vec2 v_iconMapUV;\n\nuniform float u_time;\nuniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];\n\nuniform float u_linearColor: 0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\n\nvarying mat4 styleMappingMat;\n\n#pragma include "picking"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float animateSpeed = 0.0; // \u8fd0\u52a8\u901f\u5ea6\n\n  if(u_linearColor == 1.0) { // \u4f7f\u7528\u6e10\u53d8\u989c\u8272\n    gl_FragColor = mix(u_sourceColor, u_targetColor, v_segmentIndex/segmentNumber);\n  } else { // \u4f7f\u7528 color \u65b9\u6cd5\u4f20\u5165\u7684\u989c\u8272\n     gl_FragColor = v_color;\n  }\n\n  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));\n  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));\n  gl_FragColor.a *= opacity;\n  if(u_line_type == LineTypeDash) {\n   float flag = 0.;\n    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);\n    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {\n      flag = 1.;\n    }\n    gl_FragColor.a *=flag;\n  }\n\n  if(u_aimate.x == Animate) {\n      animateSpeed = u_time / u_aimate.y;\n      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);\n\n      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;\n      // alpha = smoothstep(0., 1., alpha);\n      alpha = clamp(alpha, 0.0, 1.0);\n      gl_FragColor.a *= alpha;\n  }\n\n  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture\n    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));\n    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);\n    float count = floor(v_arcDistrance/v_pixelLen);\n\n    float u = fract(arcRadio * count - animateSpeed * count);\n \n    if(u_aimate.x == Animate) {\n      u = gl_FragColor.a/opacity;\n    }\n    float v = length(v_offset)/(v_a); // \u6a2a\u5411\n\n    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;\n    vec4 pattern = texture2D(u_texture, uv);\n\n    if(u_textureBlend == 0.0) { // normal\n      pattern.a = 0.0;\n      gl_FragColor = filterColor(gl_FragColor + pattern);\n    } else { // replace\n        pattern.a *= opacity;\n        if(gl_FragColor.a <= 0.0) {\n          pattern.a = 0.0;\n          discard;\n        } else {\n          gl_FragColor = filterColor(pattern);\n        }\n    }\n\n  } else {\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n\n  // gl_FragColor = filterColor(gl_FragColor);\n}\n',fi='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute vec4 a_Color;\nattribute float a_Size;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float segmentNumber;\nuniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_distance_ratio;\nuniform float u_line_type: 0.0;\nuniform vec4 u_dash_array: [10.0, 5., 0, 0];\nvarying vec4 v_dash_array;\n\nuniform float u_icon_step: 100;\nuniform float u_line_texture: 0.0;\nvarying float v_segmentIndex;\nvarying float v_arcDistrance;\nvarying float v_pixelLen;\nvarying float v_a;\nvarying vec2 v_offset;\nattribute vec2 a_iconMapUV;\nvarying vec2 v_iconMapUV;\n\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat maps (float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));\n}\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n  vec2 x = mix(source, target, ratio);\n  vec2 center = mix(source, target, 0.5);\n  float dSourceCenter = distance(source, center);\n  float dXCenter = distance(x, center);\n  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n  float vertex_height = paraboloid(source, target, segmentRatio);\n\n  return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n  );\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;\n\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  v_color = a_Color;\n  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;\n  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n\n   if(u_line_type == LineTypeDash) {\n    v_distance_ratio = segmentIndex / segmentNumber;\n    // float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;\n    vec2 s = source;\n    vec2 t = target;\n    \n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      s = unProjCustomCoord(source);\n      t = unProjCustomCoord(target);\n    }\n    float total_Distance = pixelDistance(s, t) / 2.0 * PI;\n    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);\n  }\n    if(u_aimate.x == Animate) {\n      v_distance_ratio = segmentIndex / segmentNumber;\n  }\n\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  vec3 curr = getPos(source, target, segmentRatio);\n  vec3 next = getPos(source, target, nextSegmentRatio);\n  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);\n  v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n\n\n  v_segmentIndex = a_Position.x;\n  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5f00\u542f\u8d34\u56fe\u6a21\u5f0f  \n    v_arcDistrance = length(source - target);\n    v_pixelLen = project_pixel(u_icon_step);\n\n    vec2 projectOffset = project_pixel(offset);\n    v_offset = projectOffset + projectOffset * sign(a_Position.y);\n    v_a = project_pixel(a_Size);\n    v_iconMapUV = a_iconMapUV;\n  }\n  \n\n  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  }\n  setPickingColor(a_PickingColor);\n}\n',pi={solid:0,dash:1},hi=function(t){m()(n,t);var e=ui(n);function n(){var t;u()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o)),p()(d()(t),"texture",void 0),p()(d()(t),"updateTexture",(function(){var e=t.rendererService.createTexture2D;if(t.texture)return t.texture.update({data:t.iconService.getCanvas()}),void t.layer.render();t.texture=e({data:t.iconService.getCanvas(),mag:i["r"].NEAREST,min:i["r"].NEAREST,premultiplyAlpha:!1,width:1024,height:t.iconService.canvasHeight||128})})),t}return l()(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=t.sourceColor,r=t.targetColor,o=t.textureBlend,a=void 0===o?"normal":o,s=t.lineType,u=void 0===s?"solid":s,c=t.dashArray,l=void 0===c?[10,5]:c,f=t.lineTexture,p=void 0!==f&&f,h=t.iconStep,d=void 0===h?100:h;2===l.length&&l.push(0,0);var v=0,m=[0,0,0,0],g=[0,0,0,0];if(n&&r&&(m=Object(x["A"])(n),g=Object(x["A"])(r),v=1),this.rendererService.getDirty()&&this.texture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:e})){this.judgeStyleAttributes({opacity:e});var y=this.layer.getEncodedData(),b=this.calDataFrame(this.cellLength,y,this.cellProperties),_=b.data,w=b.width,E=b.height;this.rowCount=E,this.dataTexture=this.cellLength>0&&_.length>0?this.createTexture2D({flipY:!0,data:_,format:i["r"].LUMINANCE,type:i["r"].FLOAT,width:w,height:E}):this.createTexture2D({flipY:!0,data:[1],format:i["r"].LUMINANCE,type:i["r"].FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Ie()(e)?e:1,u_textureBlend:"normal"===a?0:1,segmentNumber:30,u_line_type:pi[u]||0,u_dash_array:l,u_texture:this.texture,u_line_texture:p?1:0,u_icon_step:d,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:v,u_sourceColor:m,u_targetColor:g}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption;return{u_aimate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),this.buildModels()}},{key:"clearModels",value:function(){var t,e;null===(t=this.texture)||void 0===t||t.destroy(),null===(e=this.dataTexture)||void 0===e||e.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"arc3Dline",vertexShader:fi,fragmentShader:li,triangulation:$n,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:i["a"].Attribute,descriptor:{name:"a_Size",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:1,update:function(t,e,n,r){var i=t.size,o=void 0===i?1:i;return Array.isArray(o)?[o[0]]:[o]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:i["a"].Attribute,descriptor:{name:"a_Instance",buffer:{usage:i["r"].STATIC_DRAW,data:[],type:i["r"].FLOAT},size:4,update:function(t,e,n,r){return[n[3],n[4],n[5],n[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:i["a"].Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:2,update:function(e,n,r,i){var o=t.iconService.getIconMap(),a=e.texture,s=o[a]||{x:0,y:0},u=s.x,c=s.y;return[u,c]}}})}}]),n}(mn);function di(t){var e=vi();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function vi(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var mi='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\n\nuniform float u_opacity;\nuniform float u_textureBlend;\nuniform float u_blur : 0.9;\nuniform float u_line_type: 0.0;\nvarying vec2 v_normal;\nvarying vec4 v_dash_array;\nvarying float v_distance_ratio;\nvarying vec4 v_color;\n\nuniform float u_time;\nuniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];\n\nuniform float u_line_texture: 0.0;\nuniform sampler2D u_texture;\nuniform vec2 u_textSize;\nuniform float segmentNumber;\nvarying float v_segmentIndex;\nvarying float v_arcDistrance;\nvarying float v_pixelLen;\nvarying vec2 v_offset;\nvarying float v_a;\nvarying vec2 v_iconMapUV;\n\nuniform float u_linearColor: 0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\n\nvarying mat4 styleMappingMat;\n\n#pragma include "picking"\n#pragma include "project"\n#pragma include "projection"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float animateSpeed = 0.0;\n  // gl_FragColor = v_color;\n  \n  if(u_linearColor == 1.0) { // \u4f7f\u7528\u6e10\u53d8\u989c\u8272\n    gl_FragColor = mix(u_sourceColor, u_targetColor, v_segmentIndex/segmentNumber);\n  } else { // \u4f7f\u7528 color \u65b9\u6cd5\u4f20\u5165\u7684\u989c\u8272\n     gl_FragColor = v_color;\n  }\n\n  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));\n  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));\n  gl_FragColor.a *= opacity;\n  if(u_line_type == LineTypeDash) {\n   float flag = 0.;\n    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);\n    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {\n      flag = 1.;\n    }\n    gl_FragColor.a *=flag;\n  }\n\n  if(u_aimate.x == Animate) {\n      animateSpeed = u_time / u_aimate.y;\n      float alpha =1.0 - fract( mod(1.0- smoothstep(0.0, 1.0, v_distance_ratio), u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);\n      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;\n      alpha = smoothstep(0., 1., alpha);\n      gl_FragColor.a *= alpha;\n  }\n\n  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5f00\u542f\u8d34\u56fe\u6a21\u5f0f\n    float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / (segmentNumber - 1.0)));\n    // float arcRadio = v_segmentIndex / (segmentNumber - 1.0);\n    float count = floor(v_arcDistrance/v_pixelLen);\n    float u = fract(arcRadio * count - animateSpeed * count);\n    // float u = fract(arcRadio * count - animateSpeed);\n    if(u_aimate.x == Animate) {\n      u = gl_FragColor.a/opacity;\n    }\n\n    float v = length(v_offset)/(v_a); // \u6a2a\u5411\n\n    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;\n    vec4 pattern = texture2D(u_texture, uv);\n    \n\n    if(u_textureBlend == 0.0) { // normal\n      pattern.a = 0.0;\n      gl_FragColor = filterColor(gl_FragColor + pattern);\n    } else { // replace\n        pattern.a *= opacity;\n        if(gl_FragColor.a <= 0.0) {\n          pattern.a = 0.0;\n        }\n        gl_FragColor = filterColor(pattern);\n    }\n  } else {\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n\n  // gl_FragColor = filterColor(gl_FragColor);\n}',gi='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\n\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float segmentNumber;\nuniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];\nvarying vec4 v_color;\nvarying vec2 v_normal;\n\nvarying float v_distance_ratio;\nuniform float u_line_type: 0.0;\nuniform vec4 u_dash_array: [10.0, 5., 0, 0];\nvarying vec4 v_dash_array;\n\nuniform float u_icon_step: 100;\nuniform float u_line_texture: 0.0;\nvarying float v_segmentIndex;\nvarying float v_arcDistrance;\nvarying float v_pixelLen;\nvarying vec2 v_offset;\nvarying float v_a;\n\nattribute vec2 a_iconMapUV;\nvarying vec2 v_iconMapUV;\n\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat maps (float value, float start1, float stop1, float start2, float stop2) {\n    return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat getSegmentRatio(float index) {\n    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));\n}\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n    vec2 x = mix(source, target, ratio);\n    vec2 center = mix(source, target, 0.5);\n    float dSourceCenter = distance(source, center);\n    float dXCenter = distance(x, center);\n    return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n     float vertex_height = paraboloid(source, target, segmentRatio);\n\n    return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n    );\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size)/ 2.0;\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\nfloat getAngularDist (vec2 source, vec2 target) {\n  vec2 delta = source - target;\n  vec2 sin_half_delta = sin(delta / 2.0);\n  float a =\n    sin_half_delta.y * sin_half_delta.y +\n    cos(source.y) * cos(target.y) *\n    sin_half_delta.x * sin_half_delta.x;\n  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));\n}\n\nvec2 midPoint(vec2 source, vec2 target) {\n  vec2 center = target - source;\n  float r = length(center);\n  float theta = atan(center.y, center.x);\n  float thetaOffset = 0.314;\n  float r2 = r / 2.0 / cos(thetaOffset);\n  float theta2 = theta + thetaOffset;\n  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);\n  return mid;\n}\nfloat bezier3(vec3 arr, float t) {\n  float ut = 1. - t;\n  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;\n}\n\nvec2 interpolate (vec2 source, vec2 target, float angularDist, float t) {\n  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    vec2 mid = midPoint(source, target);\n    vec3 x = vec3(source.x, mid.x, target.x);\n    vec3 y = vec3(source.y, mid.y, target.y);\n    return vec2(bezier3(x ,t), bezier3(y,t));\n  }else {\n    if(abs(angularDist - PI) < 0.001) {\n      return (1.0 - t) * source + t * target;\n    }\n    float a = sin((1.0 - t) * angularDist) / sin(angularDist);\n    float b = sin(t * angularDist) / sin(angularDist);\n    vec2 sin_source = sin(source);\n    vec2 cos_source = cos(source);\n    vec2 sin_target = sin(target);\n    vec2 cos_target = cos(target);\n    float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;\n    float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;\n    float z = a * sin_source.y + b * sin_target.y;\n    return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));\n  }\n}\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  v_color = a_Color;\n  vec2 source = radians(a_Instance.rg);\n  vec2 target = radians(a_Instance.ba);\n  float angularDist = getAngularDist(source, target);\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  if(u_line_type == LineTypeDash) {\n    v_distance_ratio = segmentIndex / segmentNumber;\n    vec2 s = source;\n    vec2 t = target;\n    \n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      s = unProjCustomCoord(source);\n      t = unProjCustomCoord(target);\n    }\n    float total_Distance = pixelDistance(s, t) / 2.0 * PI;\n    total_Distance = total_Distance*8.0;\n    // float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba);\n    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);\n  }\n  if(u_aimate.x == Animate) {\n      v_distance_ratio = segmentIndex / segmentNumber;\n  }\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  v_distance_ratio = segmentIndex / segmentNumber;\n  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0));\n  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0));\n  v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));\n  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));\n  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));\n\n  v_segmentIndex = a_Position.x;\n  if(LineTexture == u_line_texture) { // \u5f00\u542f\u8d34\u56fe\u6a21\u5f0f  \n    // v_arcDistrance = length(source - target);\n    // float mapZoomScale = u_CoordinateSystem !== COORDINATE_SYSTEM_P20_2?10000000.0:1.0;\n    v_arcDistrance = length(source - target);\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap\n      v_arcDistrance = v_arcDistrance * 1000000.0;\n    }\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox\n    //   v_arcDistrance *= 10.0;\n      v_arcDistrance = project_pixel_allmap(v_arcDistrance);\n    }\n    v_pixelLen = project_pixel(u_icon_step)/8.0;\n\n    v_a = project_pixel(a_Size);\n    v_offset = offset + offset * sign(a_Position.y);\n    v_iconMapUV = a_iconMapUV;\n  }\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(curr.xy + offset, curr.z, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));\n  }\n  setPickingColor(a_PickingColor);\n}\n\n',yi={solid:0,dash:1},bi=function(t){m()(n,t);var e=di(n);function n(){var t;u()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o)),p()(d()(t),"texture",void 0),p()(d()(t),"updateTexture",(function(){var e=t.rendererService.createTexture2D;if(t.texture)return t.texture.update({data:t.iconService.getCanvas()}),void t.layer.render();t.texture=e({data:t.iconService.getCanvas(),mag:i["r"].NEAREST,min:i["r"].NEAREST,premultiplyAlpha:!1,width:1024,height:t.iconService.canvasHeight||128})})),t}return l()(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=t.sourceColor,r=t.targetColor,o=t.textureBlend,a=void 0===o?"normal":o,s=t.lineType,u=void 0===s?"solid":s,c=t.dashArray,l=void 0===c?[10,5]:c,f=t.lineTexture,p=void 0!==f&&f,h=t.iconStep,d=void 0===h?100:h;2===l.length&&l.push(0,0),this.rendererService.getDirty()&&this.texture.bind();var v=0,m=[0,0,0,0],g=[0,0,0,0];if(n&&r&&(m=Object(x["A"])(n),g=Object(x["A"])(r),v=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:e})){this.judgeStyleAttributes({opacity:e});var y=this.layer.getEncodedData(),b=this.calDataFrame(this.cellLength,y,this.cellProperties),_=b.data,w=b.width,E=b.height;this.rowCount=E,this.dataTexture=this.cellLength>0&&_.length>0?this.createTexture2D({flipY:!0,data:_,format:i["r"].LUMINANCE,type:i["r"].FLOAT,width:w,height:E}):this.createTexture2D({flipY:!0,data:[1],format:i["r"].LUMINANCE,type:i["r"].FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Ie()(e)?e:1,u_textureBlend:"normal"===a?0:1,segmentNumber:30,u_line_type:yi[u]||0,u_dash_array:l,u_texture:this.texture,u_line_texture:p?1:0,u_icon_step:d,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:v,u_sourceColor:m,u_targetColor:g}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption;return{u_aimate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),this.buildModels()}},{key:"clearModels",value:function(){var t,e;null===(t=this.texture)||void 0===t||t.destroy(),null===(e=this.dataTexture)||void 0===e||e.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"arc2dline",vertexShader:gi,fragmentShader:mi,triangulation:$n,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:i["a"].Attribute,descriptor:{name:"a_Size",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:1,update:function(t,e,n,r){var i=t.size,o=void 0===i?1:i;return Array.isArray(o)?[o[0]]:[o]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:i["a"].Attribute,descriptor:{name:"a_Instance",buffer:{usage:i["r"].STATIC_DRAW,data:[],type:i["r"].FLOAT},size:4,update:function(t,e,n,r){return[n[3],n[4],n[5],n[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:i["a"].Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:2,update:function(e,n,r,i){var o=t.iconService.getIconMap(),a=e.texture,s=o[a]||{x:0,y:0},u=s.x,c=s.y;return[u,c]}}})}}]),n}(mn);function _i(t){var e=xi();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function xi(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var wi='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\nuniform float u_blur : 0.99;\nuniform float u_line_type: 0.0;\nuniform float u_opacity : 1.0;\nuniform float u_textureBlend;\nvarying vec4 v_color;\nvarying vec2 v_normal;\n\n// line texture\nuniform float u_line_texture;\nuniform sampler2D u_texture;\nuniform vec2 u_textSize;\n\n// dash\nuniform float u_dash_offset : 0.0;\nuniform float u_dash_ratio : 0.1;\nvarying float v_distance_ratio;\nvarying vec4 v_dash_array;\nvarying float v_side;\n\nvarying float v_distance;\nvarying vec2 v_offset;\nvarying float v_a;\nvarying float v_pixelLen;\nvarying vec2 v_iconMapUV;\n\nuniform float u_linearColor: 0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\n\n#pragma include "picking"\n\nuniform float u_time;\nuniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ]; // \u63a7\u5236\u8fd0\u52a8\n\nvarying mat4 styleMappingMat;\n// [animate, duration, interval, trailLength],\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float animateSpeed = 0.0; // \u8fd0\u52a8\u901f\u5ea6\n  \n  // gl_FragColor = v_color;\n\n  if(u_linearColor == 1.0) { // \u4f7f\u7528\u6e10\u53d8\u989c\u8272\n    gl_FragColor = mix(u_sourceColor, u_targetColor, v_distance_ratio);\n  } else { // \u4f7f\u7528 color \u65b9\u6cd5\u4f20\u5165\u7684\u989c\u8272\n     gl_FragColor = v_color;\n  }\n\n  // anti-alias\n  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));\n  gl_FragColor.a *= opacity; // \u5168\u5c40\u900f\u660e\u5ea6\n  if(u_aimate.x == Animate) {\n      animateSpeed = u_time / u_aimate.y;\n      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + animateSpeed);\n      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;\n      alpha = smoothstep(0., 1., alpha);\n      gl_FragColor.a *= alpha;\n  }\n // dash line\n  if(u_line_type == LineTypeDash) {\n    float flag = 0.;\n    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);\n    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {\n      flag = 1.;\n    }\n    gl_FragColor.a *=flag;\n    // gl_FragColor.a *=(1.0- step(v_dash_array.x, mod(v_distance_ratio, dashLength)));\n  }\n\n  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture\n    float u = fract(mod(v_distance, v_pixelLen)/v_pixelLen - animateSpeed);\n    float v = length(v_offset)/(v_a*2.0);\n    v = max(smoothstep(0.95, 1.0, v), v);\n    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;\n    // gl_FragColor = filterColor(gl_FragColor + texture2D(u_texture, vec2(u, v)));\n    // gl_FragColor = filterColor(gl_FragColor + texture2D(u_texture, uv));\n     vec4 pattern = texture2D(u_texture, uv);\n\n    if(u_textureBlend == 0.0) { // normal\n      pattern.a = 0.0;\n      gl_FragColor = filterColor(gl_FragColor + pattern);\n    } else { // replace\n        pattern.a *= opacity;\n        if(gl_FragColor.a <= 0.0) {\n          pattern.a = 0.0;\n        }\n        gl_FragColor = filterColor(pattern);\n    }\n  } else {\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n  // gl_FragColor = filterColor(vec4(1.0, 0.0, 0.0, 1.0));\n \n  // if(rV < r || rV > 1.0 - r) {\n  //   gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\n  // } \n  // float v = length(v_offset)/(v_a*2.0);\n  // if(v > 0.9) {\n  //   gl_FragColor = vec4(0.17647, 0.43921568, 0.2, 1.0);\n  // } else if(v < 0.1) {\n  //   gl_FragColor = vec4(0.17647, 0.43921568, 0.2, 1.0);\n  // }\n\n  // gl_FragColor = filterColor(gl_FragColor);\n}\n',Ei='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n\nattribute float a_Miter;\nattribute vec4 a_Color;\nattribute vec2 a_Size;\nattribute vec3 a_Normal;\nattribute vec3 a_Position;\n\nattribute vec2 a_iconMapUV;\n\n// dash line\nattribute float a_Total_Distance;\nattribute float a_Distance;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float u_line_type: 0.0;\nuniform vec4 u_dash_array: [10.0, 5., 0, 0];\nuniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];\nuniform float u_icon_step: 100;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvarying vec4 v_color;\nvarying vec4 v_dash_array;\nvarying vec2 v_normal;\nvarying float v_distance_ratio;\nvarying float v_side;\n\nvarying float v_distance;\nvarying vec2 v_offset;\nvarying float v_size;\nvarying float v_a;\nvarying float v_pixelLen;\nvarying vec2 v_iconMapUV;\nuniform float u_linearColor: 0;\n\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  v_iconMapUV = a_iconMapUV;\n  v_distance = a_Distance;\n  v_pixelLen = project_pixel(u_icon_step);\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    v_pixelLen *= 10.0;\n  }\n\n  if(u_line_type == LineTypeDash) {\n    v_distance_ratio = a_Distance / a_Total_Distance;\n    // v_distance_ratio = 0.01;\n    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;\n  }\n  if(u_aimate.x == Animate || u_linearColor == 1.0) {\n      v_distance_ratio = a_Distance / a_Total_Distance;\n  }\n  v_normal = vec2(reverse_offset_normal(a_Normal) * sign(a_Miter));\n\n\n  v_color = a_Color;\n  v_a = project_pixel(a_Size.x);\n  \n\n  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);\n\n  vec2 offset = project_pixel(size.xy);\n\n  v_offset = offset + offset * sign(a_Miter);\n\n  v_side = a_Miter * a_Size.x;\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));\n\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    // gl_Position = u_Mvp * (vec4(project_pos.xy + offset, a_Size.y, 1.0));\n    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, a_Size.y / 8.0, 1.0)); // \u989d\u5916\u9664 8.0 \u662f\u4e3a\u4e86\u548cgaode1.x\u7684\u9ad8\u5ea6\u517c\u5bb9\n  } else {\n    float lineHeight = a_Size.y;\n    // \u517c\u5bb9 mapbox \u5728\u7ebf\u9ad8\u5ea6\u4e0a\u7684\u6548\u679c\u8868\u73b0\u57fa\u672c\u4e00\u81f4\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      lineHeight = lineHeight*2.0/pow(2.0, 20.0 - u_Zoom);\n    }\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight, 1.0));\n  }\n\n  setPickingColor(a_PickingColor);\n}\n',Si={solid:0,dash:1},Ci=function(t){m()(n,t);var e=_i(n);function n(){var t;u()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o)),p()(d()(t),"texture",void 0),p()(d()(t),"updateTexture",(function(){var e=t.rendererService.createTexture2D;if(t.texture)return t.texture.update({data:t.iconService.getCanvas()}),void t.layer.render();t.texture=e({data:t.iconService.getCanvas(),mag:i["r"].NEAREST,min:i["r"].NEAREST,premultiplyAlpha:!1,width:1024,height:t.iconService.canvasHeight||128})})),t}return l()(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=t.sourceColor,r=t.targetColor,o=t.textureBlend,a=void 0===o?"normal":o,s=t.lineType,u=void 0===s?"solid":s,c=t.dashArray,l=void 0===c?[10,5,0,0]:c,f=t.lineTexture,p=void 0!==f&&f,h=t.iconStep,d=void 0===h?100:h;2===l.length&&l.push(0,0),this.rendererService.getDirty()&&this.texture.bind();var v=0,m=[0,0,0,0],g=[0,0,0,0];if(n&&r&&(m=Object(x["A"])(n),g=Object(x["A"])(r),v=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:e})){this.judgeStyleAttributes({opacity:e});var y=this.layer.getEncodedData(),b=this.calDataFrame(this.cellLength,y,this.cellProperties),_=b.data,w=b.width,E=b.height;this.rowCount=E,this.dataTexture=this.cellLength>0&&_.length>0?this.createTexture2D({flipY:!0,data:_,format:i["r"].LUMINANCE,type:i["r"].FLOAT,width:w,height:E}):this.createTexture2D({flipY:!0,data:[1],format:i["r"].LUMINANCE,type:i["r"].FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Ie()(e)?e:1,u_textureBlend:"normal"===a?0:1,u_line_type:Si[u],u_dash_array:l,u_texture:this.texture,u_line_texture:p?1:0,u_icon_step:d,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:v,u_sourceColor:m,u_targetColor:g}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption;return{u_aimate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),this.buildModels()}},{key:"clearModels",value:function(){var t,e;null===(t=this.texture)||void 0===t||t.destroy(),null===(e=this.dataTexture)||void 0===e||e.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"line",vertexShader:Ei,fragmentShader:wi,triangulation:Zn,primitive:i["r"].TRIANGLES,blend:this.getBlend(),depth:{enable:!1}})]}},{key:"registerBuiltinAttributes",value:function(){var t=this,e=this.layer.getLayerConfig();e.lineType;this.styleAttributeService.registerStyleAttribute({name:"distance",type:i["a"].Attribute,descriptor:{name:"a_Distance",buffer:{usage:i["r"].STATIC_DRAW,data:[],type:i["r"].FLOAT},size:1,update:function(t,e,n,r){return[n[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:i["a"].Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:i["r"].STATIC_DRAW,data:[],type:i["r"].FLOAT},size:1,update:function(t,e,n,r){return[n[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:i["a"].Attribute,descriptor:{name:"a_Size",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:2,update:function(t,e,n,r){var i=t.size,o=void 0===i?1:i;return Array.isArray(o)?[o[0],o[1]]:[o,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:i["a"].Attribute,descriptor:{name:"a_Normal",buffer:{usage:i["r"].STATIC_DRAW,data:[],type:i["r"].FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:i["a"].Attribute,descriptor:{name:"a_Miter",buffer:{usage:i["r"].STATIC_DRAW,data:[],type:i["r"].FLOAT},size:1,update:function(t,e,n,r){return[n[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:i["a"].Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:2,update:function(e,n,r,i){var o=t.iconService.getIconMap(),a=e.texture,s=o[a]||{x:0,y:0},u=s.x,c=s.y;return[u,c]}}})}},{key:"loadImage",value:function(t){return new Promise((function(e,n){if(t instanceof HTMLImageElement)e(t);else{var r=new Image;r.crossOrigin="anonymous",r.onload=function(){e(r)},r.onerror=function(){n(new Error("Could not load image at "+t))},r.src=t instanceof File?URL.createObjectURL(t):t}}))}}]),n}(mn),Ti={arc:si,arc3d:hi,greatcircle:bi,line:Ci},Oi=Ti;function Ai(t){var e=ki();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function ki(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Mi=function(t){m()(n,t);var e=Ai(n);function n(){var t;u()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),p()(d()(t),"type","LineLayer"),t}return l()(n,[{key:"buildModels",value:function(){var t=this.getModelType();this.layerModel=new Oi[t](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var t=this.getModelType(),e={line:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"}};return e[t]}},{key:"getModelType",value:function(){var t,e=this.styleAttributeService.getLayerStyleAttribute("shape"),n=null===e||void 0===e||null===(t=e.scale)||void 0===t?void 0:t.field;return n||"line"}}]),n}(sn);function Pi(t){var e=Ii();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function Ii(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Li='varying vec4 v_color;\nuniform float u_opacity: 1.0;\n\n#pragma include "picking"\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  gl_FragColor = v_color;\n  // gl_FragColor.a *= u_opacity;\n  gl_FragColor.a *= opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',Ri='precision highp float;\n\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nattribute vec3 a_Position;\nattribute vec3 a_Pos;\nattribute vec4 a_Color;\nattribute vec3 a_Size;\nattribute vec3 a_Normal;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nvarying vec4 v_color;\n\nuniform float u_opacity : 1;\n\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nvoid main() {\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  vec3 size = a_Size * a_Position;\n\n  vec2 offset = project_pixel(size.xy);\n\n  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));\n\n  vec4 pos = vec4(project_pos.xy + offset, project_pixel(size.z), 1.0);\n\n  float lightWeight = calc_lighting(pos);\n  v_color =vec4(a_Color.rgb * lightWeight, a_Color.w);\n\n  // gl_Position = project_common_position_to_clipspace(pos);\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * pos;\n  } else {\n    gl_Position = project_common_position_to_clipspace(pos);\n  }\n  setPickingColor(a_PickingColor);\n}\n',Di=function(t){m()(n,t);var e=Pi(n);function n(){return u()(this,n),e.apply(this,arguments)}return l()(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n})){this.judgeStyleAttributes({opacity:n});var r=this.layer.getEncodedData(),o=this.calDataFrame(this.cellLength,r,this.cellProperties),a=o.data,s=o.width,u=o.height;this.rowCount=u,this.dataTexture=this.cellLength>0&&a.length>0?this.createTexture2D({flipY:!0,data:a,format:i["r"].LUMINANCE,type:i["r"].FLOAT,width:s,height:u}):this.createTexture2D({flipY:!0,data:[1],format:i["r"].LUMINANCE,type:i["r"].FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Ie()(n)?n:1}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"pointExtrude2",vertexShader:Ri,fragmentShader:Li,triangulation:Wn,blend:this.getBlend()})]}},{key:"clearModels",value:function(){var t;null===(t=this.dataTexture)||void 0===t||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:i["a"].Attribute,descriptor:{name:"a_Size",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:3,update:function(t,e,n,r){var i=t.size;if(i){var o=[];return Array.isArray(i)&&(o=2===i.length?[i[0],i[0],i[1]]:i),Array.isArray(i)||(o=[i]),o}return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:i["a"].Attribute,descriptor:{name:"a_Normal",buffer:{usage:i["r"].STATIC_DRAW,data:[],type:i["r"].FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:i["a"].Attribute,descriptor:{name:"a_Pos",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:3,update:function(t,e){var n=In(t.coordinates);return[n[0],n[1],0]}}})}}]),n}(mn);function Ni(t){var e=ji();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function ji(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Fi="#define Animate 0.0\n\nuniform float u_blur : 0;\n// uniform float u_stroke_width : 1;\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\nuniform float u_time;\nuniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];\n\n#pragma include \"sdf_2d\"\n#pragma include \"picking\"\n\n\nvoid main() {\n  int shape = int(floor(v_data.w + 0.5));\n\n \n  vec4 textrueStroke = vec4(\n    styleMappingMat[1][0],\n    styleMappingMat[1][1],\n    styleMappingMat[1][2],\n    styleMappingMat[1][3]\n  );\n\n  float opacity = styleMappingMat[0][0];\n  float stroke_opacity = styleMappingMat[0][1];\n  float strokeWidth = styleMappingMat[0][2];\n  vec4 strokeColor = textrueStroke == vec4(0) ? v_color : textrueStroke;\n\n  lowp float antialiasblur = v_data.z;\n  float antialiased_blur = -max(u_blur, antialiasblur);\n  // float r = v_radius / (v_radius + u_stroke_width);\n  float r = v_radius / (v_radius + strokeWidth);\n\n  float outer_df;\n  float inner_df;\n  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'\n  if (shape == 0) {\n    outer_df = sdCircle(v_data.xy, 1.0);\n    inner_df = sdCircle(v_data.xy, r);\n  } else if (shape == 1) {\n    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);\n    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);\n  } else if (shape == 2) {\n    outer_df = sdBox(v_data.xy, vec2(1.));\n    inner_df = sdBox(v_data.xy, vec2(r));\n  } else if (shape == 3) {\n    outer_df = sdPentagon(v_data.xy, 0.8);\n    inner_df = sdPentagon(v_data.xy, r * 0.8);\n  } else if (shape == 4) {\n    outer_df = sdHexagon(v_data.xy, 0.8);\n    inner_df = sdHexagon(v_data.xy, r * 0.8);\n  } else if (shape == 5) {\n    outer_df = sdOctogon(v_data.xy, 1.0);\n    inner_df = sdOctogon(v_data.xy, r);\n  } else if (shape == 6) {\n    outer_df = sdHexagram(v_data.xy, 0.52);\n    inner_df = sdHexagram(v_data.xy, r * 0.52);\n  } else if (shape == 7) {\n    outer_df = sdRhombus(v_data.xy, vec2(1.0));\n    inner_df = sdRhombus(v_data.xy, vec2(r));\n  } else if (shape == 8) {\n    outer_df = sdVesica(v_data.xy, 1.1, 0.8);\n    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);\n  }\n\n  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);\n  // float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(\n  //   antialiased_blur,\n  //   0.0,\n  //   inner_df\n  // );\n   float color_t = strokeWidth < 0.01 ? 0.0 : smoothstep(\n    antialiased_blur,\n    0.0,\n    inner_df\n  );\n  float PI = 3.14159;\n  float N_RINGS = 3.0;\n  float FREQ = 1.0;\n\n  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), strokeColor * stroke_opacity, color_t);\n\n  \n  gl_FragColor.a = gl_FragColor.a * opacity_t;\n  if(u_aimate.x == Animate) {\n    float d = length(v_data.xy);\n    float intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_aimate.z - u_aimate.y * u_time)), 0.0, 1.0);\n    gl_FragColor = vec4(gl_FragColor.xyz, intensity);\n  }\n\n  gl_FragColor = filterColor(gl_FragColor);\n\n}\n",zi='attribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec2 a_Extrude;\nattribute float a_Size;\nattribute float a_Shape;\n\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\n\nuniform float u_opacity : 1;\nuniform float u_stroke_opacity : 1;\nuniform float u_stroke_width : 2;\nuniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];\nuniform vec2 u_offsets;\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n#pragma include "styleMappingCalStrokeOpacity"\n#pragma include "styleMappingCalStrokeWidth"\n\n#pragma include "projection"\n#pragma include "picking"\n\n\nvoid main() {\n  vec2 extrude = a_Extrude;\n  float shape_type = a_Shape;\n  float newSize = setPickingSize(a_Size);\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n\n  vec2 strokeOpacityAndOffset = calStrokeOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][1] = strokeOpacityAndOffset.r;\n  textureOffset = strokeOpacityAndOffset.g;\n\n  vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][2] = strokeWidthAndOffset.r;\n  textureOffset = strokeWidthAndOffset.g;\n\n  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);\n  if(hasStroke()) {\n    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R\n    textureOffset += 1.0;\n\n    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G\n    textureOffset += 1.0;\n\n    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B\n    textureOffset += 1.0;\n\n    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A\n    textureOffset += 1.0;\n  } else {\n    if(u_stroke_color == vec4(0.0)) {\n      styleMappingMat[1][0] = v_color.r;\n      styleMappingMat[1][1] = v_color.g;\n      styleMappingMat[1][2] = v_color.b;\n      styleMappingMat[1][3] = v_color.a;\n    } else {\n      styleMappingMat[1][0] = u_stroke_color.r;\n      styleMappingMat[1][1] = u_stroke_color.g;\n      styleMappingMat[1][2] = u_stroke_color.b;\n      styleMappingMat[1][3] = u_stroke_color.a;\n    }\n  }\n\n  vec2 textrueOffsets = vec2(0.0, 0.0);\n  if(hasOffsets()) {\n    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x\n    textureOffset += 1.0;\n\n    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x\n    textureOffset += 1.0;\n  } else {\n    textrueOffsets = u_offsets;\n  }\n\n  // cal style mapping\n\n  // unpack color(vec2)\n  v_color = a_Color;\n\n  // radius(16-bit)\n  v_radius = newSize;\n\n  // TODO: billboard\n  // anti-alias\n  float antialiasblur = 1.0 / u_DevicePixelRatio / (newSize + u_stroke_width);\n\n  // construct point coords\n  v_data = vec4(extrude, antialiasblur,shape_type);\n\n  // vec2 offset = project_pixel(extrude * (newSize + u_stroke_width) + u_offsets);\n  vec2 offset = project_pixel(extrude * (newSize + u_stroke_width) + textrueOffsets);\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * vec4(project_pos.xy + offset, 0.0, 1.0);\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));\n  }\n\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));\n\n  setPickingColor(a_PickingColor);\n}\n',Bi=function(t){m()(n,t);var e=Ni(n);function n(){return u()(this,n),e.apply(this,arguments)}return l()(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.strokeOpacity,o=void 0===r?1:r,a=t.strokeWidth,s=void 0===a?0:a,u=t.stroke,c=void 0===u?"rgba(0,0,0,0)":u,l=t.offsets,f=void 0===l?[0,0]:l;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n,strokeOpacity:o,strokeWidth:s,stroke:c,offsets:f})){this.judgeStyleAttributes({opacity:n,strokeOpacity:o,strokeWidth:s,stroke:c,offsets:f});var p=this.layer.getEncodedData(),h=this.calDataFrame(this.cellLength,p,this.cellProperties),d=h.data,v=h.width,m=h.height;this.rowCount=m,this.dataTexture=this.cellLength>0&&d.length>0?this.createTexture2D({flipY:!0,data:d,format:i["r"].LUMINANCE,type:i["r"].FLOAT,width:v,height:m}):this.createTexture2D({flipY:!0,data:[1],format:i["r"].LUMINANCE,type:i["r"].FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Ie()(n)?n:1,u_stroke_opacity:Ie()(o)?o:1,u_stroke_width:Ie()(s)?s:0,u_stroke_color:this.getStrokeColor(c),u_offsets:this.isOffsetStatic(f)?f:[0,0]}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption;return{u_aimate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Hn)}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"pointfill",vertexShader:zi,fragmentShader:Fi,triangulation:Hn,depth:{enable:!1},blend:this.getBlend()})]}},{key:"clearModels",value:function(){var t;null===(t=this.dataTexture)||void 0===t||t.destroy()}},{key:"animateOption2Array",value:function(t){return[t.enable?0:1,t.speed||1,t.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:i["a"].Attribute,descriptor:{name:"a_Extrude",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:2,update:function(t,e,n,r){var i=[1,1,-1,1,-1,-1,1,-1],o=r%4*2;return[i[o],i[o+1]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:i["a"].Attribute,descriptor:{name:"a_Size",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:1,update:function(t,e,n,r){var i=t.size,o=void 0===i?5:i;return Array.isArray(o)?[o[0]]:[o]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:i["a"].Attribute,descriptor:{name:"a_Shape",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:1,update:function(e,n,r,i){var o=e.shape,a=void 0===o?2:o,s=t.layer.getLayerConfig().shape2d,u=s.indexOf(a);return[u]}}})}}]),n}(mn);function Ui(t){var e=Vi();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function Vi(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var qi='\nuniform sampler2D u_texture;\nvarying vec4 v_color;\nvarying vec2 v_uv;\nuniform vec2 u_textSize;\nuniform float u_opacity : 1;\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\nvarying float v_size;\n#pragma include "picking"\nvoid main(){\n      float opacity = styleMappingMat[0][0];\n      vec2 pos= v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;\n      vec4 textureColor=texture2D(u_texture,pos);\n      if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){\n            gl_FragColor= textureColor;\n      }else {\n            gl_FragColor= step(0.01, textureColor.z) * v_color;\n      }\n      // gl_FragColor.a =gl_FragColor.a * u_opacity;\n      gl_FragColor.a =gl_FragColor.a * opacity;\n      gl_FragColor = filterColor(gl_FragColor);\n}\n',Gi='precision highp float;\nattribute vec3 a_Position;\nattribute vec4 a_Color;\nattribute vec2 a_Uv;\nattribute float a_Size;\nvarying vec4 v_color;\nvarying vec2 v_uv;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float u_stroke_width : 1;\nuniform vec2 u_offsets;\nvarying float v_size;\n\nuniform float u_opacity : 1;\n\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n\n  vec2 textrueOffsets = vec2(0.0, 0.0);\n  if(hasOffsets()) {\n    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x\n    textureOffset += 1.0;\n\n    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x\n    textureOffset += 1.0;\n  } else {\n    textrueOffsets = u_offsets;\n  }\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n   v_color = a_Color;\n   v_uv = a_Uv;\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n   v_size = a_Size;\n  //  vec2 offset = project_pixel(u_offsets);\n  vec2 offset = project_pixel(textrueOffsets);\n\n  //  gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));\n\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      gl_Position = u_Mvp * vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0);\n    } else {\n      gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));\n    }\n   gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;\n\n  setPickingColor(a_PickingColor);\n\n}\n',Hi=function(t){m()(n,t);var e=Ui(n);function n(){var t;u()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),p()(d()(t),"texture",void 0),t}return l()(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity;return{u_opacity:e||1,u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128]}}},{key:"initModels",value:function(){var t=this;return this.initIconFontGlyphs(),this.registerBuiltinAttributes(),this.updateTexture(),this.iconService.on("imageUpdate",(function(){t.updateTexture(),t.layer.render()})),[this.layer.buildLayerModel({moduleName:"pointiconImage",vertexShader:Gi,fragmentShader:qi,triangulation:Xn,primitive:i["r"].POINTS,depth:{enable:!1},blend:this.getBlend()})]}},{key:"clearModels",value:function(){var t;null===(t=this.dataTexture)||void 0===t||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:i["a"].Attribute,descriptor:{name:"a_Size",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:1,update:function(t,e,n,r){var i=t.size;return Array.isArray(i)?[i[0]]:[i]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:i["a"].Attribute,descriptor:{name:"a_Uv",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:2,update:function(e,n,r,i){var o=t.fontService.mapping,a=e.shape,s=t.fontService.getGlyph(a),u=o[s],c=u.x,l=u.y;return[c,l]}}})}},{key:"updateTexture",value:function(){var t=this.rendererService.createTexture2D,e=this.fontService.canvas;this.texture=t({data:e,mag:i["r"].LINEAR,min:i["r"].LINEAR,width:e.width,height:e.height})}},{key:"initIconFontGlyphs",value:function(){var t=this,e=this.layer.getLayerConfig(),n=e.fontWeight,r=void 0===n?"normal":n,i=e.fontFamily,o=void 0===i?"sans-serif":i,a=this.layer.getEncodedData(),s=[];a.forEach((function(e){var n=e.shape,r=void 0===n?"":n;r=r.toString();var i=t.fontService.getGlyph(r);-1===s.indexOf(i)&&s.push(i)})),this.fontService.setFontOptions({characterSet:s,fontWeight:r,fontFamily:o,fontSize:48})}}]),n}(mn);function Wi(t){var e=Xi();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function Xi(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Zi='\nuniform sampler2D u_texture;\nvarying vec4 v_color;\nvarying vec2 v_uv;\nuniform vec2 u_textSize;\nuniform float u_opacity : 1;\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\nvarying float v_size;\n#pragma include "picking"\nvoid main(){\n      float opacity = styleMappingMat[0][0];\n      vec2 pos= v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;\n      vec4 textureColor=texture2D(u_texture,pos);\n      if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){\n            gl_FragColor= textureColor;\n      }else {\n            gl_FragColor= step(0.01, textureColor.z) * v_color;\n      }\n      // gl_FragColor.a =gl_FragColor.a * u_opacity;\n      gl_FragColor.a =gl_FragColor.a * opacity;\n      gl_FragColor = filterColor(gl_FragColor);\n}\n',Yi='precision highp float;\nattribute vec3 a_Position;\nattribute vec4 a_Color;\nattribute vec2 a_Uv;\nattribute float a_Size;\nvarying vec4 v_color;\nvarying vec2 v_uv;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float u_stroke_width : 1;\nuniform vec2 u_offsets;\nvarying float v_size;\n\nuniform float u_opacity : 1;\n\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n\n  vec2 textrueOffsets = vec2(0.0, 0.0);\n  if(hasOffsets()) {\n    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x\n    textureOffset += 1.0;\n\n    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x\n    textureOffset += 1.0;\n  } else {\n    textrueOffsets = u_offsets;\n  }\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n   v_color = a_Color;\n   v_uv = a_Uv;\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n   v_size = a_Size;\n  //  vec2 offset = project_pixel(u_offsets);\n  vec2 offset = project_pixel(textrueOffsets);\n\n  //  gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));\n\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      gl_Position = u_Mvp * vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0);\n    } else {\n      gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));\n    }\n   gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;\n\n  setPickingColor(a_PickingColor);\n\n}\n',Ki=function(t){m()(n,t);var e=Wi(n);function n(){var t;u()(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o)),p()(d()(t),"texture",void 0),p()(d()(t),"updateTexture",(function(){var e=t.rendererService.createTexture2D;if(t.texture)return t.texture.update({data:t.iconService.getCanvas()}),void t.layer.render();t.texture=e({data:t.iconService.getCanvas(),mag:i["r"].NEAREST,min:i["r"].NEAREST,premultiplyAlpha:!1,width:1024,height:t.iconService.canvasHeight||128})})),t}return l()(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=t.offsets,r=void 0===n?[0,0]:n;if(this.rendererService.getDirty()&&this.texture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:e,offsets:r})){this.judgeStyleAttributes({opacity:e,offsets:r});var o=this.layer.getEncodedData(),a=this.calDataFrame(this.cellLength,o,this.cellProperties),s=a.data,u=a.width,c=a.height;this.rowCount=c,this.dataTexture=this.cellLength>0&&s.length>0?this.createTexture2D({flipY:!0,data:s,format:i["r"].LUMINANCE,type:i["r"].FLOAT,width:u,height:c}):this.createTexture2D({flipY:!0,data:[1],format:i["r"].LUMINANCE,type:i["r"].FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128],u_opacity:Ie()(e)?e:1,u_offsets:this.isOffsetStatic(r)?r:[0,0]}}},{key:"initModels",value:function(){return this.registerBuiltinAttributes(),this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),this.buildModels()}},{key:"clearModels",value:function(){var t,e;null===(t=this.texture)||void 0===t||t.destroy(),null===(e=this.dataTexture)||void 0===e||e.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"pointImage",vertexShader:Yi,fragmentShader:Zi,triangulation:Xn,primitive:i["r"].POINTS,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:i["a"].Attribute,descriptor:{name:"a_Size",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:1,update:function(t,e,n,r){var i=t.size,o=void 0===i?5:i;return Array.isArray(o)?[o[0]]:[o]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:i["a"].Attribute,descriptor:{name:"a_Uv",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:2,update:function(e,n,r,i){var o=t.iconService.getIconMap(),a=e.shape,s=o[a]||{x:0,y:0},u=s.x,c=s.y;return[u,c]}}})}}]),n}(mn);function Ji(t){var e=Qi();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function Qi(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var $i='\nuniform float u_opacity : 1;\nuniform vec2 u_offsets;\nvarying vec4 v_color;\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\n#pragma include "picking"\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n\n  gl_FragColor = v_color;\n  // gl_FragColor.a =gl_FragColor.a * u_opacity;\n  gl_FragColor.a =gl_FragColor.a * opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',to='\nattribute vec3 a_Position;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nattribute float a_Size;\nattribute vec4 a_Color;\nvarying vec4 v_color;\n\n\n\nuniform float u_opacity : 1;\nuniform vec2 u_offsets;\n\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "picking"\n#pragma include "project"\nvoid main() {\n  v_color = a_Color;\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\nstyleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n\n  vec2 textrueOffsets = vec2(0.0, 0.0);\n  if(hasOffsets()) {\n    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x\n    textureOffset += 1.0;\n\n    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x\n    textureOffset += 1.0;\n  } else {\n    textrueOffsets = u_offsets;\n  }\n\n  // cal style mapping\n  \n  // vec2 offset = project_pixel(u_offsets);\n  vec2 offset = project_pixel(textrueOffsets);\n  // vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);\n  // gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));\\\n  // \n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    // vec2 offset = project_pixel((u_offsets));\n    gl_Position = u_Mvp * vec4(a_Position.xy + offset, a_Position.z, 1.0);\n  } else { // else\n    // vec2 offset = project_pixel(u_offsets);\n    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);\n    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));\n  }\n\n  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;\n  setPickingColor(a_PickingColor);\n}\n';function eo(t){var e=t.coordinates;return{vertices:cn()(e),indices:[0],size:e.length}}var no=function(t){m()(n,t);var e=Ji(n);function n(){return u()(this,n),e.apply(this,arguments)}return l()(n,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.offsets,o=void 0===r?[0,0]:r;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n,offsets:o})){this.judgeStyleAttributes({opacity:n,offsets:o});var a=this.layer.getEncodedData(),s=this.calDataFrame(this.cellLength,a,this.cellProperties),u=s.data,c=s.width,l=s.height;this.rowCount=l,this.dataTexture=this.cellLength>0&&u.length>0?this.createTexture2D({flipY:!0,data:u,format:i["r"].LUMINANCE,type:i["r"].FLOAT,width:c,height:l}):this.createTexture2D({flipY:!0,data:[1],format:i["r"].LUMINANCE,type:i["r"].FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Ie()(n)?n:1,u_offsets:this.isOffsetStatic(o)?o:[0,0]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"normalpoint",vertexShader:to,fragmentShader:$i,triangulation:eo,depth:{enable:!1},primitive:i["r"].POINTS,blend:this.getBlend()})]}},{key:"clearModels",value:function(){var t;null===(t=this.dataTexture)||void 0===t||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:i["a"].Attribute,descriptor:{name:"a_Size",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:1,update:function(t,e,n,r){var i=t.size,o=void 0===i?1:i;return Array.isArray(o)?[o[0]]:[o]}}})}},{key:"defaultStyleOptions",value:function(){return{blend:i["c"].additive}}}]),n}(mn);function ro(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=io(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function io(t,e){if(t){if("string"===typeof t)return oo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oo(t,e):void 0}}function oo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ao=function(){function t(e,n,r){u()(this,t),p()(this,"boxCells",[]),p()(this,"xCellCount",void 0),p()(this,"yCellCount",void 0),p()(this,"boxKeys",void 0),p()(this,"bboxes",void 0),p()(this,"width",void 0),p()(this,"height",void 0),p()(this,"xScale",void 0),p()(this,"yScale",void 0),p()(this,"boxUid",void 0);var i=this.boxCells;this.xCellCount=Math.ceil(e/r),this.yCellCount=Math.ceil(n/r);for(var o=0;o<this.xCellCount*this.yCellCount;o++)i.push([]);this.boxKeys=[],this.bboxes=[],this.width=e,this.height=n,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/n,this.boxUid=0}return l()(t,[{key:"insert",value:function(t,e,n,r,i){this.forEachCell(e,n,r,i,this.insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}},{key:"query",value:function(t,e,n,r,i){return this.queryHitTest(t,e,n,r,!1,i)}},{key:"hitTest",value:function(t,e,n,r,i){return this.queryHitTest(t,e,n,r,!0,i)}},{key:"insertBoxCell",value:function(t,e,n,r,i,o){this.boxCells[i].push(o)}},{key:"queryHitTest",value:function(t,e,n,r,i,o){if(n<0||t>this.width||r<0||e>this.height)return!i&&[];var a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});return o?a.filter(o):a}var u={hitTest:i,seenUids:{box:{},circle:{}}};return this.forEachCell(t,e,n,r,this.queryCell,a,u,o),i?a.length>0:a}},{key:"queryCell",value:function(t,e,n,r,i,o,a,s){var u=a.seenUids,c=this.boxCells[i];if(null!==c){var l,f=this.bboxes,p=ro(c);try{for(p.s();!(l=p.n()).done;){var h=l.value;if(!u.box[h]){u.box[h]=!0;var d=4*h;if(t<=f[d+2]&&e<=f[d+3]&&n>=f[d+0]&&r>=f[d+1]&&(!s||s(this.boxKeys[h]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[h],x1:f[d],y1:f[d+1],x2:f[d+2],y2:f[d+3]})}}}}catch(v){p.e(v)}finally{p.f()}}return!1}},{key:"forEachCell",value:function(t,e,n,r,i,o,a,s){for(var u=this.convertToXCellCoord(t),c=this.convertToYCellCoord(e),l=this.convertToXCellCoord(n),f=this.convertToYCellCoord(r),p=u;p<=l;p++)for(var h=c;h<=f;h++){var d=this.xCellCount*h+p;if(i.call(this,t,e,n,r,d,o,a,s))return}}},{key:"convertToXCellCoord",value:function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}},{key:"convertToYCellCoord",value:function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}}]),t}(),so=ao,uo=function(){function t(e,n){u()(this,t),p()(this,"width",void 0),p()(this,"height",void 0),p()(this,"grid",void 0),p()(this,"viewportPadding",100),p()(this,"screenRightBoundary",void 0),p()(this,"screenBottomBoundary",void 0),p()(this,"gridRightBoundary",void 0),p()(this,"gridBottomBoundary",void 0),this.width=e,this.height=n,this.viewportPadding=Math.max(e,n),this.grid=new so(e+this.viewportPadding,n+this.viewportPadding,25),this.screenRightBoundary=e+this.viewportPadding,this.screenBottomBoundary=n+this.viewportPadding,this.gridRightBoundary=e+2*this.viewportPadding,this.gridBottomBoundary=n+2*this.viewportPadding}return l()(t,[{key:"placeCollisionBox",value:function(t){var e=t.x1+t.anchorPointX+this.viewportPadding,n=t.y1+t.anchorPointY+this.viewportPadding,r=t.x2+t.anchorPointX+this.viewportPadding,i=t.y2+t.anchorPointY+this.viewportPadding;return!this.isInsideGrid(e,n,r,i)||this.grid.hitTest(e,n,r,i)?{box:[]}:{box:[e,n,r,i]}}},{key:"insertCollisionBox",value:function(t,e){var n={featureIndex:e};this.grid.insert(n,t[0],t[1],t[2],t[3])}},{key:"project",value:function(t,e,n){var r=bn["e"].fromValues(e,n,0,1),i=bn["e"].create(),o=bn["b"].fromValues.apply(bn["b"],cn()(t));return bn["e"].transformMat4(i,r,o),{x:(i[0]/i[3]+1)/2*this.width+this.viewportPadding,y:(-i[1]/i[3]+1)/2*this.height+this.viewportPadding}}},{key:"isInsideGrid",value:function(t,e,n,r){return n>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary}}]),t}();function co(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=lo(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function lo(t,e){if(t){if("string"===typeof t)return fo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fo(t,e):void 0}}function fo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function po(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0;break;default:e=.5}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0;break;default:n=.5}return{horizontalAlign:e,verticalAlign:n}}function ho(t,e,n,r,i){if(i){var o=t[r],a=o.glyph;if(a)for(var s=e[a].advance*o.scale,u=(t[r].x+s)*i,c=n;c<=r;c++)t[c].x-=u}}function vo(t,e,n,r,i,o,a){var s,u=(e-n)*i,c=(-r*a+.5)*o,l=co(t);try{for(l.s();!(s=l.n()).done;){var f=s.value;f.x+=u,f.y+=c}}catch(p){l.e(p)}finally{l.f()}}function mo(t,e,n,r,i,o,a){var s=-8,u=0,c=s,l=0,f=t.positionedGlyphs,p="right"===o?1:"left"===o?0:.5,h=f.length;n.forEach((function(t){if(t.split("").forEach((function(t){var n=e[t],r=0;n&&(f.push({glyph:t,x:u,y:c+r,vertical:!1,scale:1,metrics:n}),u+=n.advance+a)})),f.length!==h){var n=u-a;l=Math.max(n,l),ho(f,e,h,f.length-1,p)}u=0,c+=r}));var d=po(i),v=d.horizontalAlign,m=d.verticalAlign;vo(f,p,v,m,l,r,n.length);var g=c-s;t.top+=-m*g,t.bottom=t.top+g,t.left+=-v*l,t.right=t.left+l}function go(t,e,n,r,i,o,a){var s=-8,u=0,c=s,l=0,f=t.positionedGlyphs,p="right"===o?1:"left"===o?0:.5,h=f.length;n.forEach((function(t){var n=e[t],i=0;if(n&&(f.push({glyph:t,x:u,y:c+i,vertical:!1,scale:1,metrics:n}),u+=n.advance+a),f.length!==h){var o=u-a;l=Math.max(o,l),ho(f,e,h,f.length-1,p)}u=0,c+=r}));var d=po(i),v=d.horizontalAlign,m=d.verticalAlign;vo(f,p,v,m,l,r,n.length);var g=c-s;t.top+=-m*g,t.bottom=t.top+g,t.left+=-v*l,t.right=t.left+l}function yo(t,e,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[0,0],s=arguments.length>7?arguments[7]:void 0,u=t.split("\n"),c=[],l={positionedGlyphs:c,top:a[1],bottom:a[1],left:a[0],right:a[0],lineCount:u.length,text:t};return s?go(l,e,u,n,r,i,o):mo(l,e,u,n,r,i,o),!!c.length&&l}function bo(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],r=arguments.length>2?arguments[2]:void 0,i=t.positionedGlyphs,o=void 0===i?[]:i,a=[],s=co(o);try{for(s.s();!(e=s.n()).done;){var u=e.value,c=u.metrics,l=4,f=c.advance*u.scale/2,p=r?[u.x+f,u.y]:[0,0],h=r?[0,0]:[u.x+f+n[0],u.y+n[1]],d=(0-l)*u.scale-f+h[0],v=(0-l)*u.scale+h[1],m=d+c.width*u.scale,g=v+c.height*u.scale,y={x:d,y:v},b={x:m,y:v},_={x:d,y:g},x={x:m,y:g};a.push({tl:y,tr:b,bl:_,br:x,tex:c,glyphOffset:p})}}catch(w){s.e(w)}finally{s.f()}return a}function _o(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=xo(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function xo(t,e){if(t){if("string"===typeof t)return wo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wo(t,e):void 0}}function wo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Eo(t){var e=So();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function So(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Co='#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105\n#define FONT_SIZE 48.0\nuniform sampler2D u_sdf_map;\nuniform float u_gamma_scale : 0.5;\n// uniform float u_font_size : 24.0;\nuniform float u_opacity : 1.0;\nuniform vec4 u_stroke_color : [0, 0, 0, 1];\nuniform float u_stroke_width : 2.0;\nuniform float u_halo_blur : 0.5;\nuniform float u_DevicePixelRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_uv;\nvarying float v_gamma_scale;\nvarying float v_fontScale;\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\n#pragma include "picking"\nvoid main() {\n  // get style data mapping\n  float opacity = styleMappingMat[0][0];\n  float strokeWidth = styleMappingMat[0][2];\n  vec4 textrueStroke = vec4(\n    styleMappingMat[1][0],\n    styleMappingMat[1][1],\n    styleMappingMat[1][2],\n    styleMappingMat[1][3]\n  );\n\n  // get sdf from atlas\n  float dist = texture2D(u_sdf_map, v_uv).a;\n\n  // float fontScale = u_font_size / FONT_SIZE;\n\n  // lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;\n  lowp float buff = (6.0 - strokeWidth / v_fontScale) / SDF_PX;\n  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;\n\n  highp float gamma_scaled = gamma * v_gamma_scale;\n\n  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n  // gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), vec4(u_stroke_color.rgb, u_stroke_color.a * u_opacity), smoothstep(0., 0.5, 1. - dist));\n  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), vec4(textrueStroke.rgb, textrueStroke.a * opacity), smoothstep(0., 0.5, 1. - dist));\n  gl_FragColor.a= gl_FragColor.a * alpha;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',To='#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105\n#define FONT_SIZE 24.0\nattribute vec3 a_Position;\nattribute vec2 a_tex;\nattribute vec2 a_textOffsets;\nattribute vec4 a_Color;\nattribute float a_Size;\nattribute float a_Rotate;\n\nuniform vec2 u_sdf_map_size;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nvarying vec2 v_uv;\nvarying float v_gamma_scale;\nvarying vec4 v_color;\nvarying float v_fontScale;\n\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\nuniform float u_opacity : 1;\nuniform float u_stroke_width : 2;\nuniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n#pragma include "styleMappingCalStrokeWidth"\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n   styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n\n   vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][2] = strokeWidthAndOffset.r;\n  textureOffset = strokeWidthAndOffset.g;\n\n  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);\n  if(hasStroke()) {\n    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R\n    textureOffset += 1.0;\n\n    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G\n    textureOffset += 1.0;\n\n    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B\n    textureOffset += 1.0;\n\n    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A\n    textureOffset += 1.0;\n  } else {\n    if(u_stroke_color == vec4(0.0)) {\n      styleMappingMat[1][0] = v_color.r;\n      styleMappingMat[1][1] = v_color.g;\n      styleMappingMat[1][2] = v_color.b;\n      styleMappingMat[1][3] = v_color.a;\n    } else {\n      styleMappingMat[1][0] = u_stroke_color.r;\n      styleMappingMat[1][1] = u_stroke_color.g;\n      styleMappingMat[1][2] = u_stroke_color.b;\n      styleMappingMat[1][3] = u_stroke_color.a;\n    }\n  }\n  \n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  v_color = a_Color;\n  v_uv = a_tex / u_sdf_map_size;\n\n  // \u6587\u672c\u7f29\u653e\u6bd4\u4f8b\n  float fontScale = a_Size / FONT_SIZE;\n  v_fontScale = fontScale;\n\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  highp float angle_sin = sin(a_Rotate);\n  highp float angle_cos = cos(a_Rotate);\n  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n  \n  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);\n\n  vec4 projected_position;\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n   projected_position  = u_Mvp * (vec4(a_Position.xyz, 1.0));\n  } else { // else\n   projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n\n  gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);\n  v_gamma_scale = gl_Position.w;\n  setPickingColor(a_PickingColor);\n\n}\n';function Oo(t){var e=this,n=t.id,r=[],i=[];if(!e.glyphInfoMap||!e.glyphInfoMap[n])return{vertices:[],indices:[],size:7};var o=e.glyphInfoMap[n].centroid,a=2===o.length?[o[0],o[1],0]:o;return e.glyphInfoMap[n].glyphQuads.forEach((function(t,e){r.push.apply(r,cn()(a).concat([t.tex.x,t.tex.y+t.tex.height,t.tl.x,t.tl.y],cn()(a),[t.tex.x+t.tex.width,t.tex.y+t.tex.height,t.tr.x,t.tr.y],cn()(a),[t.tex.x+t.tex.width,t.tex.y,t.br.x,t.br.y],cn()(a),[t.tex.x,t.tex.y,t.bl.x,t.bl.y])),i.push(0+4*e,1+4*e,2+4*e,2+4*e,3+4*e,0+4*e)})),{vertices:r,indices:i,size:7}}var Ao=function(t){m()(n,t);var e=Eo(n);function n(){var t;u()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),p()(d()(t),"glyphInfo",void 0),p()(d()(t),"glyphInfoMap",{}),p()(d()(t),"texture",void 0),p()(d()(t),"currentZoom",-1),p()(d()(t),"extent",void 0),p()(d()(t),"textureHeight",0),p()(d()(t),"textCount",0),p()(d()(t),"preTextStyle",{}),p()(d()(t),"buildModels",(function(){return t.initGlyph(),t.updateTexture(),t.filterGlyphs(),t.reBuildModel(),[t.layer.buildLayerModel({moduleName:"pointText",vertexShader:To,fragmentShader:Co,triangulation:Oo.bind(d()(t)),depth:{enable:!1},blend:t.getBlend()})]})),t}return l()(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.stroke,o=void 0===r?"#fff":r,a=t.strokeWidth,s=void 0===a?0:a,u=t.textAnchor,c=void 0===u?"center":u,l=t.textAllowOverlap,f=void 0!==l&&l,p=t.halo,h=void 0===p?.5:p,d=t.gamma,v=void 0===d?2:d,m=this.fontService,g=m.canvas,y=m.mapping;if(Object.keys(y).length!==this.textCount&&(this.updateTexture(),this.textCount=Object.keys(y).length),this.preTextStyle={textAnchor:c,textAllowOverlap:f},this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n,strokeWidth:s,stroke:o})){this.judgeStyleAttributes({opacity:n,strokeWidth:s,stroke:o});var b=this.layer.getEncodedData(),_=this.calDataFrame(this.cellLength,b,this.cellProperties),x=_.data,w=_.width,E=_.height;this.rowCount=E,this.dataTexture=this.cellLength>0&&x.length>0?this.createTexture2D({flipY:!0,data:x,format:i["r"].LUMINANCE,type:i["r"].FLOAT,width:w,height:E}):this.createTexture2D({flipY:!0,data:[1],format:i["r"].LUMINANCE,type:i["r"].FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Ie()(n)?n:1,u_stroke_width:Ie()(s)?s:0,u_stroke_color:this.getStrokeColor(o),u_sdf_map:this.texture,u_halo_blur:h,u_gamma_scale:v,u_sdf_map_size:[g.width,g.height]}}},{key:"initModels",value:function(){this.layer.on("remapping",this.buildModels),this.extent=this.textExtent();var t=this.layer.getLayerConfig(),e=t.textAnchor,n=void 0===e?"center":e,r=t.textAllowOverlap,i=void 0===r||r;return this.preTextStyle={textAnchor:n,textAllowOverlap:i},this.buildModels()}},{key:"needUpdate",value:function(){var t=this.layer.getLayerConfig(),e=t.textAllowOverlap,n=void 0!==e&&e,r=this.mapService.getZoom(),i=this.mapService.getBounds(),o=Object(x["k"])(this.extent,i);return(!n&&(Math.abs(this.currentZoom-r)>1||!o)||n!==this.preTextStyle.textAllowOverlap)&&(this.reBuildModel(),!0)}},{key:"clearModels",value:function(){var t;null===(t=this.dataTexture)||void 0===t||t.destroy(),this.layer.off("remapping",this.buildModels)}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"rotate",type:i["a"].Attribute,descriptor:{name:"a_Rotate",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:1,update:function(t,e,n,r){var i=t.rotate,o=void 0===i?0:i;return Array.isArray(o)?[o[0]]:[o]}}}),this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:i["a"].Attribute,descriptor:{name:"a_textOffsets",buffer:{usage:i["r"].STATIC_DRAW,data:[],type:i["r"].FLOAT},size:2,update:function(t,e,n,r){return[n[5],n[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:i["a"].Attribute,descriptor:{name:"a_Size",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:1,update:function(t,e,n,r){var i=t.size,o=void 0===i?12:i;return Array.isArray(o)?[o[0]]:[o]}}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:i["a"].Attribute,descriptor:{name:"a_tex",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:2,update:function(t,e,n,r){return[n[3],n[4]]}}})}},{key:"textExtent",value:function(){var t=this.mapService.getBounds();return Object(x["y"])(t,.5)}},{key:"initTextFont",value:function(){var t=this.layer.getLayerConfig(),e=t.fontWeight,n=void 0===e?"400":e,r=t.fontFamily,i=void 0===r?"sans-serif":r,o=this.layer.getEncodedData(),a=[];o.forEach((function(t){var e=t.shape,n=void 0===e?"":e;n=n.toString();var r,i=_o(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;-1===a.indexOf(o)&&a.push(o)}}catch(s){i.e(s)}finally{i.f()}})),this.fontService.setFontOptions({characterSet:a,fontWeight:n,fontFamily:i,iconfont:!1})}},{key:"initIconFontTex",value:function(){var t=this.layer.getLayerConfig(),e=t.fontWeight,n=void 0===e?"400":e,r=t.fontFamily,i=void 0===r?"sans-serif":r,o=this.layer.getEncodedData(),a=[];o.forEach((function(t){var e=t.shape,n=void 0===e?"":e;n=n.toString(),-1===a.indexOf(n)&&a.push(n)})),this.fontService.setFontOptions({characterSet:a,fontWeight:n,fontFamily:i,iconfont:!0})}},{key:"generateGlyphLayout",value:function(t){var e=this,n=this.fontService.mapping,r=this.layer.getLayerConfig(),i=r.spacing,o=void 0===i?2:i,a=r.textAnchor,s=void 0===a?"center":a,u=this.layer.getEncodedData();this.glyphInfo=u.map((function(r){var i=r.shape,a=void 0===i?"":i,u=r.id,c=r.size,l=void 0===c?1:c,f=r.textOffset,p=void 0===f?[0,0]:f,h=yo(a.toString(),n,l,s,"center",o,p,t),d=bo(h,p,!1);return r.shaping=h,r.glyphQuads=d,r.centroid=In(r.coordinates),r.originCentroid="GAODE2.x"===r.version?In(r.originCoordinates):r.originCentroid=r.centroid,e.glyphInfoMap[u]={shaping:h,glyphQuads:d,centroid:In(r.coordinates)},r}))}},{key:"filterGlyphs",value:function(){var t=this,e=this.layer.getLayerConfig(),n=e.padding,r=void 0===n?[4,4]:n,i=e.textAllowOverlap,o=void 0!==i&&i;if(!o){this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();var a=this.rendererService.getViewportSize(),s=a.width,u=a.height,c=new uo(s,u),l=this.glyphInfo.filter((function(e){var n=e.shaping,i=e.id,o=void 0===i?0:i,a="GAODE2.x"===e.version?e.originCentroid:e.centroid,s=e.size,u=s/24,l=t.mapService.lngLatToContainer(a),f=c.placeCollisionBox({x1:n.left*u-r[0],x2:n.right*u+r[0],y1:n.top*u-r[1],y2:n.bottom*u+r[1],anchorPointX:l.x,anchorPointY:l.y}),p=f.box;return!(!p||!p.length)&&(c.insertCollisionBox(p,o),!0)}));l.forEach((function(e){t.glyphInfoMap[e.id]=e}))}}},{key:"initGlyph",value:function(){var t=this.layer.getLayerConfig(),e=t.iconfont,n=void 0!==e&&e;n?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(n)}},{key:"updateTexture",value:function(){var t=this.rendererService.createTexture2D,e=this.fontService.canvas;this.textureHeight=e.height,this.texture&&this.texture.destroy(),this.texture=t({data:e,mag:i["r"].LINEAR,min:i["r"].LINEAR,width:e.width,height:e.height})}},{key:"reBuildModel",value:function(){this.filterGlyphs(),this.layer.models=[this.layer.buildLayerModel({moduleName:"pointText",vertexShader:To,fragmentShader:Co,triangulation:Oo.bind(this),depth:{enable:!1},blend:this.getBlend()})]}}]),n}(mn),ko={fill:Bi,image:Ki,normal:no,extrude:Di,text:Ao,icon:Hi},Mo=ko;function Po(t){var e=Io();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function Io(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Lo=function(t){m()(n,t);var e=Po(n);function n(){var t;u()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),p()(d()(t),"type","PointLayer"),t}return l()(n,[{key:"buildModels",value:function(){var t=this.getModelType();this.layerModel=new Mo[t](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var t=this.getModelType(),e={normal:{blend:"additive"},fill:{blend:"normal"},extrude:{},image:{},icon:{},text:{blend:"normal"}};return e[t]}},{key:"getModelType",value:function(){var t=this.getEncodedData(),e=this.getLayerConfig(),n=e.shape2d,r=e.shape3d,i=this.iconService.getIconMap(),o=t.find((function(t){return t.hasOwnProperty("shape")}));if(o){var a=o.shape;return"dot"===a?"normal":-1!==(null===n||void 0===n?void 0:n.indexOf(a))?"fill":-1!==(null===r||void 0===r?void 0:r.indexOf(a))?"extrude":i.hasOwnProperty(a)?"image":""!==this.fontService.getGlyph(a)?"icon":"text"}return"normal"}}]),n}(sn);function Ro(t){var e=Do();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function Do(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var No='uniform float u_opacity: 1.0;\nvarying vec4 v_Color;\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n#pragma include "picking"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  gl_FragColor = v_Color;\n  // gl_FragColor.a *= u_opacity;\n  gl_FragColor.a *= opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',jo='precision highp float;\n\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nvarying vec4 v_Color;\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);\n  vec4 project_pos = project_position(pos);\n\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    // gl_Position = u_Mvp * (vec4(project_pos.xyz * vec3(1.0, 1.0, -1.0), 1.0));\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n\n  float lightWeight = calc_lighting(pos);\n  // v_Color = a_Color;\n  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);\n\n  setPickingColor(a_PickingColor);\n}\n',Fo=function(t){m()(n,t);var e=Ro(n);function n(){return u()(this,n),e.apply(this,arguments)}return l()(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n})){this.judgeStyleAttributes({opacity:n});var r=this.layer.getEncodedData(),o=this.calDataFrame(this.cellLength,r,this.cellProperties),a=o.data,s=o.width,u=o.height;this.rowCount=u,this.dataTexture=this.cellLength>0&&a.length>0?this.createTexture2D({flipY:!0,data:a,format:i["r"].LUMINANCE,type:i["r"].FLOAT,width:s,height:u}):this.createTexture2D({flipY:!0,data:[1],format:i["r"].LUMINANCE,type:i["r"].FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Ie()(n)?n:1}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"polygonExtrude",vertexShader:jo,fragmentShader:No,triangulation:Kn})]}},{key:"clearModels",value:function(){var t;null===(t=this.dataTexture)||void 0===t||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:i["a"].Attribute,descriptor:{name:"a_Normal",buffer:{usage:i["r"].STATIC_DRAW,data:[],type:i["r"].FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:i["a"].Attribute,descriptor:{name:"a_Size",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:1,update:function(t,e,n,r){var i=t.size,o=void 0===i?10:i;return Array.isArray(o)?[o[0]]:[o]}}})}}]),n}(mn);function zo(t){var e=Bo();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function Bo(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Uo='uniform float u_opacity: 1.0;\nvarying vec4 v_Color;\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\n#pragma include "picking"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  gl_FragColor = v_Color;\n  // gl_FragColor.a *= u_opacity;\n  gl_FragColor.a *= opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',Vo='attribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nvarying vec4 v_Color;\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\nstyleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  v_Color = a_Color;\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n\n  setPickingColor(a_PickingColor);\n}\n\n',qo=function(t){m()(n,t);var e=zo(n);function n(){return u()(this,n),e.apply(this,arguments)}return l()(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n})){this.judgeStyleAttributes({opacity:n});var r=this.layer.getEncodedData(),o=this.calDataFrame(this.cellLength,r,this.cellProperties),a=o.data,s=o.width,u=o.height;this.rowCount=u,this.dataTexture=this.cellLength>0&&a.length>0?this.createTexture2D({flipY:!0,data:a,format:i["r"].LUMINANCE,type:i["r"].FLOAT,width:s,height:u}):this.createTexture2D({flipY:!0,data:[1],format:i["r"].LUMINANCE,type:i["r"].FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Ie()(n)?n:1}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"polygon",vertexShader:Vo,fragmentShader:Uo,triangulation:Yn,blend:this.getBlend(),depth:{enable:!1}})]}},{key:"clearModels",value:function(){var t;null===(t=this.dataTexture)||void 0===t||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){}}]),n}(mn),Go={fill:qo,line:Ci,extrude:Fo,text:Ao,point_fill:Bi,point_image:Ki,point_normal:no,point_extrude:Di},Ho=Go;function Wo(t){var e=Xo();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function Xo(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Zo=function(t){m()(n,t);var e=Wo(n);function n(){var t;u()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),p()(d()(t),"type","PolygonLayer"),t}return l()(n,[{key:"buildModels",value:function(){var t=this.getModelType();this.layerModel=new Ho[t](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){var t,e=this.styleAttributeService.getLayerStyleAttribute("shape"),n=null===e||void 0===e||null===(t=e.scale)||void 0===t?void 0:t.field;return"fill"===n?"fill":"extrude"===n?"extrude":"line"===n?"line":this.getPointModelType()}},{key:"getPointModelType",value:function(){var t=this.getEncodedData(),e=this.getLayerConfig(),n=e.shape2d,r=e.shape3d,i=this.iconService.getIconMap(),o=t.find((function(t){return t.hasOwnProperty("shape")}));if(o){var a=o.shape;return"dot"===a?"point_normal":-1!==(null===n||void 0===n?void 0:n.indexOf(a))?"point_fill":-1!==(null===r||void 0===r?void 0:r.indexOf(a))?"point_extrude":i.hasOwnProperty(a)?"point_image":"text"}return"fill"}}]),n}(sn);function Yo(t){var e=Ko();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function Ko(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Jo="precision mediump float;\nuniform float u_opacity: 1.0;\nuniform sampler2D u_texture;\nuniform sampler2D u_colorTexture;\nuniform float u_min;\nuniform float u_max;\nuniform vec2 u_domain;\nuniform float u_noDataValue;\nuniform bool u_clampLow: true;\nuniform bool u_clampHigh: true;\nvarying vec2 v_texCoord;\n\nvoid main() {\n\n  float value = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y)).r;\n  if (value == u_noDataValue)\n    gl_FragColor = vec4(0.0, 0, 0, 0.0);\n  else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1]))\n    gl_FragColor = vec4(0, 0, 0, 0);\n  else {\n    float normalisedValue =(value - u_domain[0]) / (u_domain[1] -u_domain[0]);\n    vec4 color = texture2D(u_colorTexture,vec2(normalisedValue, 0));\n    gl_FragColor = color;\n    gl_FragColor.a =  gl_FragColor.a * u_opacity ;\n  }\n\n\n}\n",Qo='precision highp float;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n#pragma include "projection"\nvoid main() {\n   v_texCoord = a_Uv;\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n   gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n\n   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));\n   } else {\n      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n   }\n}\n',$o=function(t){m()(n,t);var e=Yo(n);function n(){var t;u()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),p()(d()(t),"texture",void 0),p()(d()(t),"colorTexture",void 0),t}return l()(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.clampLow,i=void 0===r||r,o=t.clampHigh,a=void 0===o||o,s=t.noDataValue,u=void 0===s?-9999999:s,c=t.domain,l=void 0===c?[0,1]:c;return this.updateColorTexure(),{u_opacity:n||1,u_texture:this.texture,u_domain:l,u_clampLow:i,u_clampHigh:"undefined"!==typeof a?a:i,u_noDataValue:u,u_colorTexture:this.colorTexture}}},{key:"initModels",value:function(){var t=this.layer.getSource(),e=this.rendererService.createTexture2D,n=t.data.dataArray[0];this.texture=e({data:n.data,width:n.width,height:n.height,format:i["r"].LUMINANCE,type:i["r"].FLOAT});var r=this.layer.getLayerConfig(),o=r.rampColors,a=Object(x["p"])(o);return this.colorTexture=e({data:a.data,width:a.width,height:a.height,flipY:!1}),[this.layer.buildLayerModel({moduleName:"RasterImageData",vertexShader:Qo,fragmentShader:Jo,triangulation:Qn,primitive:i["r"].TRIANGLES,depth:{enable:!1},blend:this.getBlend()})]}},{key:"buildModels",value:function(){return this.initModels()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:i["a"].Attribute,descriptor:{name:"a_Uv",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:2,update:function(t,e,n,r){return[n[3],n[4]]}}})}},{key:"updateColorTexure",value:function(){var t=this.rendererService.createTexture2D,e=this.layer.getLayerConfig(),n=e.rampColors,r=Object(x["p"])(n);this.colorTexture=t({data:r.data,width:r.width,height:r.height,flipY:!1})}}]),n}(mn),ta={raster:$o,raster3d:$o},ea=ta;function na(t){var e=ra();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function ra(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var ia,oa,aa,sa,ua,ca,la,fa,pa,ha=function(t){m()(n,t);var e=na(n);function n(){var t;u()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),p()(d()(t),"type","RasterLayer"),t}return l()(n,[{key:"buildModels",value:function(){var t=this.getModelType();this.layerModel=new ea[t](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var t=this.getModelType(),e={raster:{},raster3d:{}};return e[t]}},{key:"getModelType",value:function(){return"raster"}}]),n}(sn),da=n("CvKH"),va=n.n(da);function ma(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ga(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ma(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ma(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ya=(ia=Object(Ct["injectable"])(),oa=Object(Ct["inject"])(i["n"].IGlobalConfigService),aa=Object(Ct["inject"])(i["n"].IMapService),sa=Object(Ct["inject"])(i["n"].IFontService),ia((ca=function(){function t(){u()(this,t),ge()(this,"configService",la,this),ge()(this,"mapService",fa,this),ge()(this,"fontService",pa,this)}return l()(t,[{key:"apply",value:function(t,e){var n=this,r=e.styleAttributeService;t.hooks.init.tap("DataMappingPlugin",(function(){n.generateMaping(t,{styleAttributeService:r})})),t.hooks.beforeRenderData.tap("DataMappingPlugin",(function(){return t.dataState.dataMappingNeedUpdate=!1,n.generateMaping(t,{styleAttributeService:r}),!0})),t.hooks.beforeRender.tap("DataMappingPlugin",(function(){if(!t.layerModelNeedUpdate){var e=r.getLayerStyleAttributes()||[],i=r.getLayerStyleAttribute("filter"),o=t.getSource().data.dataArray,a=e.filter((function(t){return t.needRemapping})),s=o;null!==i&&void 0!==i&&i.needRemapping&&null!==i&&void 0!==i&&i.scale&&(s=o.filter((function(t){return n.applyAttributeMapping(i,t)[0]}))),a.length&&(null!==i&&void 0!==i&&i.needRemapping?(t.setEncodedData(n.mapping(e,s)),i.needRemapping=!1):t.setEncodedData(n.mapping(a,s,t.getEncodedData())),t.emit("remapping",null))}}))}},{key:"generateMaping",value:function(t,e){var n=this,r=e.styleAttributeService,i=r.getLayerStyleAttributes()||[],o=r.getLayerStyleAttribute("filter"),a=t.getSource().data.dataArray,s=a;null!==o&&void 0!==o&&o.scale&&(s=a.filter((function(t){return n.applyAttributeMapping(o,t)[0]}))),t.setEncodedData(this.mapping(i,s))}},{key:"mapping",value:function(t,e,n){var r=this,i=e.map((function(e,i){var o=n?n[i]:{},a=ga({id:e._id,coordinates:e.coordinates},o);return t.filter((function(t){return void 0!==t.scale})).forEach((function(t){var n=r.applyAttributeMapping(t,e);t.needRemapping=!1,"color"===t.name&&(n=n.map((function(t){return Object(x["A"])(t)}))),a[t.name]=Array.isArray(n)&&1===n.length?n[0]:n,"shape"===t.name&&(a.shape=r.fontService.getIconFontKey(a[t.name]))})),a}));return i.length>0&&"GAODE2.x"===this.mapService.version&&("number"===typeof i[0].coordinates[0]?i.map((function(t){t.version="GAODE2.x",t.originCoordinates=va()(t.coordinates),t.coordinates=r.mapService.lngLatToCoord(t.coordinates)})):i.map((function(t){t.version="GAODE2.x",t.originCoordinates=va()(t.coordinates),t.coordinates=r.mapService.lngLatToCoords(t.coordinates)}))),i}},{key:"applyAttributeMapping",value:function(t,e){var n;if(!t.scale)return[];var r=(null===t||void 0===t||null===(n=t.scale)||void 0===n?void 0:n.scalers)||[],i=[];return r.forEach((function(n){var r,o=n.field;(e.hasOwnProperty(o)||"variable"===(null===(r=t.scale)||void 0===r?void 0:r.type))&&i.push(e[o])})),t.mapping?t.mapping(i):[]}}]),t}(),la=be()(ca.prototype,"configService",[oa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fa=be()(ca.prototype,"mapService",[aa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pa=be()(ca.prototype,"fontService",[sa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ua=ca))||ua),ba={},_a={},xa=function(t){return _a[t]},wa=function(t,e){_a[t]=e},Ea=function(t){return ba[t]},Sa=function(t,e){ba[t]=e},Ca={},Ta={},Oa=34,Aa=10,ka=13;function Ma(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function Pa(t,e){var n=Ma(t);return function(r,i){return e(n(r),i,t)}}function Ia(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function La(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Ra(t){return t<0?"-"+La(-t,6):t>9999?"+"+La(t,6):La(t,4)}function Da(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Ra(t.getUTCFullYear(),4)+"-"+La(t.getUTCMonth()+1,2)+"-"+La(t.getUTCDate(),2)+(i?"T"+La(e,2)+":"+La(n,2)+":"+La(r,2)+"."+La(i,3)+"Z":r?"T"+La(e,2)+":"+La(n,2)+":"+La(r,2)+"Z":n||e?"T"+La(e,2)+":"+La(n,2)+"Z":"")}var Na=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var n,r,o=i(t,(function(t,i){if(n)return n(t,i-1);r=t,n=e?Pa(t,e):Ma(t)}));return o.columns=r||[],o}function i(t,e){var r,i=[],o=t.length,a=0,s=0,u=o<=0,c=!1;function l(){if(u)return Ta;if(c)return c=!1,Ca;var e,r,i=a;if(t.charCodeAt(i)===Oa){while(a++<o&&t.charCodeAt(a)!==Oa||t.charCodeAt(++a)===Oa);return(e=a)>=o?u=!0:(r=t.charCodeAt(a++))===Aa?c=!0:r===ka&&(c=!0,t.charCodeAt(a)===Aa&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}while(a<o){if((r=t.charCodeAt(e=a++))===Aa)c=!0;else if(r===ka)c=!0,t.charCodeAt(a)===Aa&&++a;else if(r!==n)continue;return t.slice(i,e)}return u=!0,t.slice(i,o)}t.charCodeAt(o-1)===Aa&&--o,t.charCodeAt(o-1)===ka&&--o;while((r=l())!==Ta){var f=[];while(r!==Ca&&r!==Ta)f.push(r),r=l();e&&null==(f=e(f,s++))||i.push(f)}return i}function o(e,n){return e.map((function(e){return n.map((function(t){return l(e[t])})).join(t)}))}function a(e,n){return null==n&&(n=Ia(e)),[n.map(l).join(t)].concat(o(e,n)).join("\n")}function s(t,e){return null==e&&(e=Ia(t)),o(t,e).join("\n")}function u(t){return t.map(c).join("\n")}function c(e){return e.map(l).join(t)}function l(t){return null==t?"":t instanceof Date?Da(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:r,parseRows:i,format:a,formatBody:s,formatRows:u,formatRow:c,formatValue:l}},ja=Na(","),Fa=ja.parse,za=(ja.parseRows,ja.format,ja.formatBody,ja.formatRows,ja.formatRow,ja.formatValue,n("KgZ/")),Ba=n.n(za);function Ua(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Va(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ua(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ua(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function qa(t,e){var n=e.x,r=e.y,i=e.x1,o=e.y1,a=e.coordinates,s=[];return t.forEach((function(t,e){var u=[];if(n&&r&&(u=[parseFloat(t[n]),parseFloat(t[r])]),n&&r&&i&&o){var c=[parseFloat(t[n]),parseFloat(t[r])],l=[parseFloat(t[i]),parseFloat(t[o])];u=[c,l]}if(a){var f="Polygon";Array.isArray(a[0])||(f="Point"),Array.isArray(a[0])&&!Array.isArray(a[0][0])&&(f="LineString");var p={type:f,coordinates:cn()(t[a])};Ba()(p,!0),u=p.coordinates}var h=Va(Va({},t),{},{_id:e,coordinates:u});s.push(h)})),{dataArray:s}}function Ga(t,e){var n=Fa(t);return qa(n,e)}var Ha=n("Rtff"),Wa=n("lqff");function Xa(t,e){var n,r,i,o,a,s,u,c,l,f,p=0,h="FeatureCollection"===t.type,d="Feature"===t.type,v=h?t.features.length:1;for(n=0;n<v;n++){for(s=h?t.features[n].geometry:d?t.geometry:t,c=h?t.features[n].properties:d?t.properties:{},l=h?t.features[n].bbox:d?t.bbox:void 0,f=h?t.features[n].id:d?t.id:void 0,u=!!s&&"GeometryCollection"===s.type,a=u?s.geometries.length:1,i=0;i<a;i++)if(o=u?s.geometries[i]:s,null!==o)switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,c,l,f))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],p,c,l,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,c,l,f))return!1;p++}}function Za(t,e){Xa(t,(function(t,n,r,i,o){var a,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Object(Wa["b"])(t,r,{bbox:i,id:o}),n,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon";break}for(var u=0;u<t.coordinates.length;u++){var c=t.coordinates[u],l={type:a,coordinates:c};if(!1===e(Object(Wa["b"])(l,r),n,u))return!1}}))}function Ya(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ka(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ya(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ya(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ja(t,e){var n=[],r={};if(t.features=t.features.filter((function(t){var e=t.geometry;return null!=t&&e&&e.type&&e.coordinates&&e.coordinates.length>0})),Ba()(t,!0),0===t.features.length)return{dataArray:[],featureKeys:r};return Za(t,(function(t,e){var r=Object(Ha["b"])(t),i=e,o=Ka(Ka({},t.properties),{},{coordinates:r,_id:i});n.push(o)})),{dataArray:n,featureKeys:r}}function Qa(t,e){var n=e.extent,r=new Promise((function(e){$a(t,(function(t){e(t)}))})),i={images:r,_id:1,dataArray:[{_id:0,coordinates:[[n[0],n[1]],[n[2],n[3]]]}]};return i}function $a(t,e){var n=t,r=[];if("string"===typeof n)Object(x["r"])({url:n},(function(t,n){r.push(n),e(r)}));else{var i=n.length,o=0;n.forEach((function(t){Object(x["r"])({url:t},(function(t,n){o++,r.push(n),o===i&&e(r)}))}))}return Qa}function ts(t,e){var n=e.extent,r=e.width,i=e.height,o=e.min,a=e.max,s={_id:1,dataArray:[{_id:1,data:Array.from(t),width:r,height:i,min:o,max:a,coordinates:[[n[0],n[1]],[n[2],n[3]]]}]};return s}var es=n("E7L/"),ns=n.n(es);function rs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function is(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rs(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rs(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function os(t,e){var n=e.radius,r=void 0===n?40:n,i=e.maxZoom,o=void 0===i?18:i,a=e.minZoom,s=void 0===a?0:a,u=e.zoom,c=void 0===u?2:u;if(t.pointIndex){var l=t.pointIndex.getClusters(t.extent,Math.floor(c));return t.dataArray=as(l),t}var f=new Y.a({radius:r,minZoom:s,maxZoom:o}),p={type:"FeatureCollection",features:[]};return p.features=t.dataArray.map((function(t){return{type:"Feature",geometry:{type:"Point",coordinates:t.coordinates},properties:is({},t)}})),f.load(p.features),f}function as(t){return t.map((function(t,e){return is({coordinates:t.geometry.coordinates,_id:e+1},t.properties)}))}function ss(t){if(0===t.length)throw new Error("max requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]>e&&(e=t[n]);return e}function us(t){if(0===t.length)throw new Error("min requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]<e&&(e=t[n]);return e}function cs(t){if(0===t.length)return 0;for(var e,n=t[0],r=0,i=1;i<t.length;i++)e=n+1*t[i],Math.abs(n)>=Math.abs(t[i])?r+=n-e+t[i]:r+=t[i]-e+n,n=e;return n+1*r}function ls(t){if(0===t.length)throw new Error("mean requires at least one data point");return cs(t)/t.length}var fs={min:us,max:ss,mean:ls,sum:cs};function ps(t,e){return t.map((function(t){return 1*t[e]}))}function hs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ds(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?hs(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hs(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function vs(t){var e=ms();return function(){var n,r=_()(t);if(e){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y()(this,n)}}function ms(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function gs(t,e){if(Array.isArray(e))return e}var ys=function(t){m()(n,t);var e=vs(n);function n(t,r){var i;return u()(this,n),i=e.call(this),p()(d()(i),"data",void 0),p()(d()(i),"extent",void 0),p()(d()(i),"hooks",{init:new Se["c"]}),p()(d()(i),"parser",{type:"geojson"}),p()(d()(i),"transforms",[]),p()(d()(i),"cluster",!1),p()(d()(i),"clusterOptions",{enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"}),p()(d()(i),"mapService",void 0),p()(d()(i),"invalidExtent",!1),p()(d()(i),"originData",void 0),p()(d()(i),"rawData",void 0),p()(d()(i),"cfg",{}),p()(d()(i),"clusterIndex",void 0),i.originData=t,i.initCfg(r),i.hooks.init.tap("parser",(function(){i.excuteParser()})),i.hooks.init.tap("cluster",(function(){i.initCluster()})),i.hooks.init.tap("transform",(function(){i.executeTrans()})),i.init(),i}return l()(n,[{key:"setData",value:function(t,e){this.rawData=t,this.originData=t,this.initCfg(e),this.init(),this.emit("update")}},{key:"getClusters",value:function(t){return this.clusterIndex.getClusters(this.caculClusterExtent(2),t)}},{key:"getClustersLeaves",value:function(t){return this.clusterIndex.getLeaves(t,1/0)}},{key:"updateClusterData",value:function(t){var e=this,n=this.clusterOptions,r=n.method,i=void 0===r?"sum":r,o=n.field,a=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(t));this.clusterOptions.zoom=t,a.forEach((function(t){t.id||(t.properties.point_count=1)})),(o||Ee()(i))&&(a=a.map((function(t){var n=t.id;if(n){var r,a=e.clusterIndex.getLeaves(n,1/0),s=a.map((function(t){return t.properties}));if(Me()(i)&&o){var u=ps(s,o);r=fs[i](u)}Ee()(i)&&(r=i(s)),t.properties.stat=r}else t.properties.point_count=1;return t}))),this.data=xa("geojson")({type:"FeatureCollection",features:a}),this.executeTrans()}},{key:"getFeatureById",value:function(t){var e=this.parser.type,n=void 0===e?"geojson":e;if("geojson"!==n||this.cluster)return t<this.data.dataArray.length?this.data.dataArray[t]:"null";var r=t<this.originData.features.length?this.originData.features[t]:"null",i=va()(r);if(0!==this.transforms.length){var o=this.data.dataArray.find((function(e){return e._id===t}));i.properties=o}return i}},{key:"getFeatureId",value:function(t,e){var n=this.data.dataArray.find((function(e){return e[t]===name}));return null===n||void 0===n?void 0:n._id}},{key:"destroy",value:function(){this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null}},{key:"caculClusterExtent",value:function(t){var e=[[-1/0,-1/0],[1/0,1/0]];return this.invalidExtent||(e=Object(x["y"])(Object(x["i"])(this.extent),t)),e[0].concat(e[1])}},{key:"initCfg",value:function(t){this.cfg=ns()(this.cfg,t,gs);var e=this.cfg;e&&(e.parser&&(this.parser=e.parser),e.transforms&&(this.transforms=e.transforms),this.cluster=e.cluster||!1,e.clusterOptions&&(this.cluster=!0,this.clusterOptions=ds(ds({},this.clusterOptions),e.clusterOptions)))}},{key:"excuteParser",value:function(){var t=this.parser,e=t.type||"geojson",n=xa(e);this.data=n(this.originData,t),this.extent=Object(x["o"])(this.data.dataArray),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3]}},{key:"executeTrans",value:function(){var t=this,e=this.transforms;e.forEach((function(e){var n=e.type,r=Ea(n)(t.data,e);Object.assign(t.data,r)}))}},{key:"initCluster",value:function(){if(this.cluster){var t=this.clusterOptions||{};this.clusterIndex=os(this.data,t)}}},{key:"init",value:function(){this.hooks.init.call(this)}}]),n}(w["EventEmitter"]);function bs(t,e){var n=e.callback;return n&&(t.dataArray=t.dataArray.filter(n)),t}function _s(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=xs(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function xs(t,e){if(t){if("string"===typeof t)return ws(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ws(t,e):void 0}}function ws(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Es=6378e3;function Ss(t,e){var n=t.dataArray,r=e.size,i=void 0===r?10:r,o=i/(2*Math.PI*Es)*(256<<20)/2,a=Cs(n,i),s=a.gridHash,u=a.gridOffset,c=ks(s,u,e);return{yOffset:o,xOffset:o,radius:o,type:"grid",dataArray:c}}function Cs(t,e){var n,r,i=1/0,o=-1/0,a=_s(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;n=s.coordinates[1],Number.isFinite(n)&&(i=n<i?n:i,o=n>o?n:o)}}catch(b){a.e(b)}finally{a.f()}var u=(i+o)/2,c=Ts(e,u);if(c.xOffset<=0||c.yOffset<=0)return{gridHash:{},gridOffset:c};var l,f={},p=_s(t);try{for(p.s();!(l=p.n()).done;){var h=l.value,d=h.coordinates[1],v=h.coordinates[0];if(Number.isFinite(d)&&Number.isFinite(v)){var m=Math.floor((d+90)/c.yOffset),g=Math.floor((v+180)/c.xOffset),y="".concat(m,"-").concat(g);f[y]=f[y]||{count:0,points:[]},f[y].count+=1,f[y].points.push(h)}}}catch(b){p.e(b)}finally{p.f()}return{gridHash:f,gridOffset:c}}function Ts(t,e){var n=Os(t),r=As(e,t);return{yOffset:n,xOffset:r}}function Os(t){return t/Es*(180/Math.PI)}function As(t,e){return e/Es*(180/Math.PI)/Math.cos(t*Math.PI/180)}function ks(t,e,n){return Object.keys(t).reduce((function(r,i,o){var a=i.split("-"),s=parseInt(a[0],10),u=parseInt(a[1],10),c={};if(n.field&&n.method){var l=x["d"].getColumn(t[i].points,n.field);c[n.method]=x["d"].statMap[n.method](l)}return Object.assign(c,{_id:o,coordinates:Object(x["e"])([e.xOffset*(u+.5)-180,e.yOffset*(s+.5)-90]),rawData:t[i].points,count:t[i].count}),r.push(c),r}),[])}var Ms=Math.PI/3,Ps=[0,Ms,2*Ms,3*Ms,4*Ms,5*Ms];function Is(t){return t[0]}function Ls(t){return t[1]}var Rs=function(){var t,e,n,r=0,i=0,o=1,a=1,s=Is,u=Ls;function c(t){var r,i={},o=[],a=t.length;for(r=0;r<a;++r)if(!isNaN(l=+s.call(null,c=t[r],r,t))&&!isNaN(f=+u.call(null,c,r,t))){var c,l,f,p=Math.round(f/=n),h=Math.round(l=l/e-(1&p)/2),d=f-p;if(3*Math.abs(d)>1){var v=l-h,m=h+(l<h?-1:1)/2,g=p+(f<p?-1:1),y=l-m,b=f-g;v*v+d*d>y*y+b*b&&(h=m+(1&p?1:-1)/2,p=g)}var _=h+"-"+p,x=i[_];x?x.push(c):(o.push(x=i[_]=[c]),x.x=(h+(1&p)/2)*e,x.y=p*n)}return o}function l(t){var e=0,n=0;return Ps.map((function(r){var i=Math.sin(r)*t,o=-Math.cos(r)*t,a=i-e,s=o-n;return e=i,n=o,[a,s]}))}return c.hexagon=function(e){return"m"+l(null==e?t:+e).join("l")+"z"},c.centers=function(){for(var s=[],u=Math.round(i/n),c=Math.round(r/e),l=u*n;l<a+t;l+=n,++u)for(var f=c*e+(1&u)*e/2;f<o+e/2;f+=e)s.push([f,l]);return s},c.mesh=function(){var e=l(t).slice(0,4).join("l");return c.centers().map((function(t){return"M"+t+"m"+e})).join("")},c.x=function(t){return arguments.length?(s=t,c):s},c.y=function(t){return arguments.length?(u=t,c):u},c.radius=function(r){return arguments.length?(t=+r,e=2*t*Math.sin(Ms),n=1.5*t,c):t},c.size=function(t){return arguments.length?(r=i=0,o=+t[0],a=+t[1],c):[o-r,a-i]},c.extent=function(t){return arguments.length?(r=+t[0][0],i=+t[0][1],o=+t[1][0],a=+t[1][1],c):[[r,i],[o,a]]},c.radius(1)};function Ds(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ns(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ds(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ds(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var js=6378e3;function Fs(t,e){var n=t.dataArray,r=e.size,i=void 0===r?10:r,o=e.method,s=void 0===o?"sum":o,u=i/(2*Math.PI*js)*(256<<20)/2,c=n.map((function(t){var e=Object(x["e"])(t.coordinates),n=a()(e,2),r=n[0],i=n[1];return Ns(Ns({},t),{},{coordinates:[r,i]})})),l=Rs().radius(u).x((function(t){return t.coordinates[0]})).y((function(t){return t.coordinates[1]})),f=l(c),h={dataArray:f.map((function(t,n){var r;if(e.field&&s){var i=x["d"].getColumn(t,e.field);t[s]=x["d"].statMap[s](i)}return r={},p()(r,e.method,t[s]),p()(r,"count",t.length),p()(r,"rawData",t),p()(r,"coordinates",[t.x,t.y]),p()(r,"_id",n),r})),radius:u,xOffset:u,yOffset:u,type:"hexagon"};return h}function zs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Bs(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zs(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zs(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Us(t,e){var n=e.sourceField,r=e.targetField,i=e.data,o={};return i.forEach((function(t){o[t[n]]=t})),t.dataArray=t.dataArray.map((function(t){var e=t[r];return Bs(Bs({},t),o[e])})),t}function Vs(t,e){var n=e.callback;return n&&(t.dataArray=t.dataArray.map(n)),t}var qs,Gs,Hs=ys;wa("geojson",Ja),wa("image",Qa),wa("csv",Ga),wa("json",qa),wa("raster",ts),Sa("cluster",os),Sa("filter",bs),Sa("join",Us),Sa("map",Vs),Sa("grid",Ss),Sa("hexagon",Fs);var Ws=(qs=Object(Ct["injectable"])(),qs(Gs=function(){function t(){u()(this,t),p()(this,"mapService",void 0)}return l()(t,[{key:"apply",value:function(t){var e=this;this.mapService=t.getContainer().get(i["n"].IMapService),t.hooks.init.tap("DataSourcePlugin",(function(){var n=t.getSource();if(!n){var r=t.sourceOption,i=r.data,o=r.options;t.setSource(new Hs(i,o))}e.updateClusterData(t)})),t.hooks.beforeRenderData.tap("DataSourcePlugin",(function(){var n=e.updateClusterData(t),r=t.dataState.dataSourceNeedUpdate;return t.dataState.dataSourceNeedUpdate=!1,n||r}))}},{key:"updateClusterData",value:function(t){var e=t.getSource(),n=e.cluster,r=e.clusterOptions,i=r.zoom,o=void 0===i?0:i,a=r.maxZoom,s=void 0===a?16:a,u=this.mapService.getZoom()-1,c=t.dataState.dataSourceNeedUpdate;return!!(n&&(c||Math.abs(o-u)>1)&&s>o)&&(e.updateClusterData(Math.floor(u)),!0)}}]),t}())||Gs),Xs=n("9Sz/"),Zs=n.n(Xs),Ys=n("B7nT"),Ks=n.n(Ys),Js=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},Qs=function(t){return 1===t.length&&(t=$s(t)),{left:function(e,n,r,i){null==r&&(r=0),null==i&&(i=e.length);while(r<i){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){null==r&&(r=0),null==i&&(i=e.length);while(r<i){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}};function $s(t){return function(e,n){return Js(t(e),n)}}var tu=Qs(Js),eu=tu.right,nu=(tu.left,eu);var ru=function(t){return null===t?NaN:+t},iu=function(t,e){var n,r,i,o=t.length,a=-1;if(null==e){while(++a<o)if(null!=(n=t[a])&&n>=n){r=i=n;while(++a<o)null!=(n=t[a])&&(r>n&&(r=n),i<n&&(i=n))}}else while(++a<o)if(null!=(n=e(t[a],a,t))&&n>=n){r=i=n;while(++a<o)null!=(n=e(t[a],a,t))&&(r>n&&(r=n),i<n&&(i=n))}return[r,i]},ou=Array.prototype,au=(ou.slice,ou.map,Math.sqrt(50)),su=Math.sqrt(10),uu=Math.sqrt(2),cu=function(t,e,n){var r,i,o,a,s=-1;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=lu(t,e,n))||!isFinite(a))return[];if(a>0){t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));while(++s<i)o[s]=(t+s)*a}else{t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));while(++s<i)o[s]=(t-s)/a}return r&&o.reverse(),o};function lu(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=au?10:o>=su?5:o>=uu?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=au?10:o>=su?5:o>=uu?2:1)}function fu(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=au?i*=10:o>=su?i*=5:o>=uu&&(i*=2),e<t?-i:i}var pu=function(t,e,n){if(null==n&&(n=ru),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t),s=+n(t[o+1],o+1,t);return a+(s-a)*(i-o)}};function hu(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var du="$";function vu(){}function mu(t,e){var n=new vu;if(t instanceof vu)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)while(++i<o)n.set(i,t[i]);else while(++i<o)n.set(e(r=t[i],i,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}vu.prototype=mu.prototype={constructor:vu,has:function(t){return du+t in this},get:function(t){return this[du+t]},set:function(t,e){return this[du+t]=e,this},remove:function(t){var e=du+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===du&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===du&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===du&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===du&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===du&&++t;return t},empty:function(){for(var t in this)if(t[0]===du)return!1;return!0},each:function(t){for(var e in this)e[0]===du&&t(this[e],e.slice(1),this)}};var gu=mu;function yu(){}var bu=gu.prototype;function _u(t,e){var n=new yu;if(t instanceof yu)t.each((function(t){n.add(t)}));else if(t){var r=-1,i=t.length;if(null==e)while(++r<i)n.add(t[r]);else while(++r<i)n.add(e(t[r],r,t))}return n}yu.prototype=_u.prototype={constructor:yu,has:bu.has,add:function(t){return t+="",this[du+t]=t,this},remove:bu.remove,clear:bu.clear,values:bu.keys,size:bu.size,empty:bu.empty,each:bu.each};var xu=Array.prototype,wu=xu.map,Eu=xu.slice,Su={name:"implicit"};function Cu(){var t=gu(),e=[],n=[],r=Su;function i(i){var o=i+"",a=t.get(o);if(!a){if(r!==Su)return r;t.set(o,a=e.push(i))}return n[(a-1)%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=gu();var r,o,a=-1,s=n.length;while(++a<s)t.has(o=(r=n[a])+"")||t.set(o,e.push(r));return i},i.range=function(t){return arguments.length?(n=Eu.call(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Cu(e,n).unknown(r)},hu.apply(i,arguments),i}function Tu(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}var Ou=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return Tu((n-r/e)*e,a,i,o,s)}},Au=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return Tu((n-r/e)*e,i,o,a,s)}},ku=function(t){return function(){return t}};function Mu(t,e){return function(n){return t+n*e}}function Pu(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Iu(t){return 1===(t=+t)?Lu:function(e,n){return n-e?Pu(e,n,t):ku(isNaN(e)?n:e)}}function Lu(t,e){var n=e-t;return n?Mu(t,n):ku(isNaN(t)?e:t)}var Ru=function t(e){var n=Iu(e);function r(t,e){var r=n((t=Object(pn["b"])(t)).r,(e=Object(pn["b"])(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=Lu(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function Du(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Object(pn["b"])(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}Du(Ou),Du(Au);var Nu=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}};function ju(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Fu(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Xu(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}var zu=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}},Bu=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},Uu=function(t,e){var n,r={},i={};for(n in null!==t&&"object"===typeof t||(t={}),null!==e&&"object"===typeof e||(e={}),e)n in t?r[n]=Xu(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},Vu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qu=new RegExp(Vu.source,"g");function Gu(t){return function(){return t}}function Hu(t){return function(e){return t(e)+""}}var Wu=function(t,e){var n,r,i,o=Vu.lastIndex=qu.lastIndex=0,a=-1,s=[],u=[];t+="",e+="";while((n=Vu.exec(t))&&(r=qu.exec(e)))(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:Bu(n,r)})),o=qu.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?Hu(u[0].x):Gu(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})},Xu=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?ku(e):("number"===r?Bu:"string"===r?(n=Object(pn["a"])(e))?(e=n,Ru):Wu:e instanceof pn["a"]?Ru:e instanceof Date?zu:ju(e)?Nu:Array.isArray(e)?Fu:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?Uu:Bu)(t,e)},Zu=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}},Yu=function(t){return function(){return t}},Ku=function(t){return+t},Ju=[0,1];function Qu(t){return t}function $u(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Yu(isNaN(e)?NaN:.5)}function tc(t){var e,n=t[0],r=t[t.length-1];return n>r&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function ec(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=$u(i,r),o=n(a,o)):(r=$u(r,i),o=n(o,a)),function(t){return o(r(t))}}function nc(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());while(++a<r)i[a]=$u(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=nu(t,e,1,r)-1;return o[n](i[n](e))}}function rc(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ic(){var t,e,n,r,i,o,a=Ju,s=Ju,u=Xu,c=Qu;function l(){return r=Math.min(a.length,s.length)>2?nc:ec,i=o=null,f}function f(e){return isNaN(e=+e)?n:(i||(i=r(a.map(t),s,u)))(t(c(e)))}return f.invert=function(n){return c(e((o||(o=r(s,a.map(t),Bu)))(n)))},f.domain=function(t){return arguments.length?(a=wu.call(t,Ku),c===Qu||(c=tc(a)),l()):a.slice()},f.range=function(t){return arguments.length?(s=Eu.call(t),l()):s.slice()},f.rangeRound=function(t){return s=Eu.call(t),u=Zu,l()},f.clamp=function(t){return arguments.length?(c=t?tc(a):Qu,f):c!==Qu},f.interpolate=function(t){return arguments.length?(u=t,l()):u},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,l()}}function oc(t,e){return ic()(t,e)}var ac=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function sc(t){if(!(e=ac.exec(t)))throw new Error("invalid format: "+t);var e;return new uc({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function uc(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}sc.prototype=uc.prototype,uc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var cc=function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)};function lc(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}var fc,pc,hc,dc,vc=function(t){return t=lc(Math.abs(t)),t?t[1]:NaN},mc=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(vc(e)/3)))-vc(Math.abs(t)))},gc=function(t,e){return function(n,r){var i=n.length,o=[],a=0,s=t[0],u=0;while(i>0&&s>0){if(u+s+1>r&&(s=Math.max(1,r-u)),o.push(n.substring(i-=s,i+s)),(u+=s+1)>r)break;s=t[a=(a+1)%t.length]}return o.reverse().join(e)}},yc=function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}},bc=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(e+1):t},_c=function(t,e){var n=lc(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(fc=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+lc(t,Math.max(0,e+o-1))[0]},xc=function(t,e){var n=lc(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},wc={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:cc,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return xc(100*t,e)},r:xc,s:_c,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Ec=function(t){return t},Sc=Array.prototype.map,Cc=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"],Tc=function(t){var e=void 0===t.grouping||void 0===t.thousands?Ec:gc(Sc.call(t.grouping,Number),t.thousands+""),n=void 0===t.currency?"":t.currency[0]+"",r=void 0===t.currency?"":t.currency[1]+"",i=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?Ec:yc(Sc.call(t.numerals,String)),a=void 0===t.percent?"%":t.percent+"",s=void 0===t.minus?"-":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function c(t){t=sc(t);var c=t.fill,l=t.align,f=t.sign,p=t.symbol,h=t.zero,d=t.width,v=t.comma,m=t.precision,g=t.trim,y=t.type;"n"===y?(v=!0,y="g"):wc[y]||(void 0===m&&(m=12),g=!0,y="g"),(h||"0"===c&&"="===l)&&(h=!0,c="0",l="=");var b="$"===p?n:"#"===p&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",_="$"===p?r:/[%p]/.test(y)?a:"",x=wc[y],w=/[defgprs%]/.test(y);function E(t){var n,r,a,p=b,E=_;if("c"===y)E=x(t)+E,t="";else{t=+t;var S=t<0||1/t<0;if(t=isNaN(t)?u:x(Math.abs(t),m),g&&(t=bc(t)),S&&0===+t&&"+"!==f&&(S=!1),p=(S?"("===f?f:s:"-"===f||"("===f?"":f)+p,E=("s"===y?Cc[8+fc/3]:"")+E+(S&&"("===f?")":""),w){n=-1,r=t.length;while(++n<r)if(a=t.charCodeAt(n),48>a||a>57){E=(46===a?i+t.slice(n+1):t.slice(n))+E,t=t.slice(0,n);break}}}v&&!h&&(t=e(t,1/0));var C=p.length+t.length+E.length,T=C<d?new Array(d-C+1).join(c):"";switch(v&&h&&(t=e(T+t,T.length?d-E.length:1/0),T=""),l){case"<":t=p+t+E+T;break;case"=":t=p+T+t+E;break;case"^":t=T.slice(0,C=T.length>>1)+p+t+E+T.slice(C);break;default:t=T+p+t+E;break}return o(t)}return m=void 0===m?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),E.toString=function(){return t+""},E}function l(t,e){var n=c((t=sc(t),t.type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(vc(e)/3))),i=Math.pow(10,-r),o=Cc[8+r/3];return function(t){return n(i*t)+o}}return{format:c,formatPrefix:l}};function Oc(t){return pc=Tc(t),hc=pc.format,dc=pc.formatPrefix,pc}Oc({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var Ac=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,vc(e)-vc(t))+1},kc=function(t){return Math.max(0,-vc(Math.abs(t)))},Mc=function(t,e,n,r){var i,o=fu(t,e,n);switch(r=sc(null==r?",f":r),r.type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=mc(o,a))||(r.precision=i),dc(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=Ac(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=kc(o))||(r.precision=i-2*("%"===r.type));break}return hc(r)};function Pc(t){var e=t.domain;return t.ticks=function(t){var n=e();return cu(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Mc(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),o=0,a=i.length-1,s=i[o],u=i[a];return u<s&&(r=s,s=u,u=r,r=o,o=a,a=r),r=lu(s,u,n),r>0?(s=Math.floor(s/r)*r,u=Math.ceil(u/r)*r,r=lu(s,u,n)):r<0&&(s=Math.ceil(s*r)/r,u=Math.floor(u*r)/r,r=lu(s,u,n)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(u/r)*r,e(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(u*r)/r,e(i)),t},t}function Ic(){var t=oc(Qu,Qu);return t.copy=function(){return rc(t,Ic())},hu.apply(t,arguments),Pc(t)}function Lc(t){var e;function n(t){return isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=wu.call(e,Ku),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return Lc(t).unknown(e)},t=arguments.length?wu.call(t,Ku):[0,1],Pc(n)}var Rc=function(t,e){t=t.slice();var n,r=0,i=t.length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t};function Dc(t){return Math.log(t)}function Nc(t){return Math.exp(t)}function jc(t){return-Math.log(-t)}function Fc(t){return-Math.exp(-t)}function zc(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Bc(t){return 10===t?zc:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function Uc(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function Vc(t){return function(e){return-t(-e)}}function qc(t){var e,n,r=t(Dc,Nc),i=r.domain,o=10;function a(){return e=Uc(o),n=Bc(o),i()[0]<0?(e=Vc(e),n=Vc(n),t(jc,Fc)):t(Dc,Nc),r}return r.base=function(t){return arguments.length?(o=+t,a()):o},r.domain=function(t){return arguments.length?(i(t),a()):i()},r.ticks=function(t){var r,a=i(),s=a[0],u=a[a.length-1];(r=u<s)&&(p=s,s=u,u=p);var c,l,f,p=e(s),h=e(u),d=null==t?10:+t,v=[];if(!(o%1)&&h-p<d){if(p=Math.round(p)-1,h=Math.round(h)+1,s>0){for(;p<h;++p)for(l=1,c=n(p);l<o;++l)if(f=c*l,!(f<s)){if(f>u)break;v.push(f)}}else for(;p<h;++p)for(l=o-1,c=n(p);l>=1;--l)if(f=c*l,!(f<s)){if(f>u)break;v.push(f)}}else v=cu(p,h,Math.min(h-p,d)).map(n);return r?v.reverse():v},r.tickFormat=function(t,i){if(null==i&&(i=10===o?".0e":","),"function"!==typeof i&&(i=hc(i)),t===1/0)return i;null==t&&(t=10);var a=Math.max(1,o*t/r.ticks().length);return function(t){var r=t/n(Math.round(e(t)));return r*o<o-.5&&(r*=o),r<=a?i(t):""}},r.nice=function(){return i(Rc(i(),{floor:function(t){return n(Math.floor(e(t)))},ceil:function(t){return n(Math.ceil(e(t)))}}))},r}function Gc(){var t=qc(ic()).domain([1,10]);return t.copy=function(){return rc(t,Gc()).base(t.base())},hu.apply(t,arguments),t}function Hc(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Wc(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Xc(t){return t<0?-t*t:t*t}function Zc(t){var e=t(Qu,Qu),n=1;function r(){return 1===n?t(Qu,Qu):.5===n?t(Wc,Xc):t(Hc(n),Hc(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},Pc(e)}function Yc(){var t=Zc(ic());return t.copy=function(){return rc(t,Yc()).exponent(t.exponent())},hu.apply(t,arguments),t}function Kc(){var t,e=[],n=[],r=[];function i(){var t=0,i=Math.max(1,n.length);r=new Array(i-1);while(++t<i)r[t-1]=pu(e,t/i);return o}function o(e){return isNaN(e=+e)?t:n[nu(r,e)]}return o.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},o.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var n,r=0,o=t.length;r<o;++r)n=t[r],null==n||isNaN(n=+n)||e.push(n);return e.sort(Js),i()},o.range=function(t){return arguments.length?(n=Eu.call(t),i()):n.slice()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.quantiles=function(){return r.slice()},o.copy=function(){return Kc().domain(e).range(n).unknown(t)},hu.apply(o,arguments)}function Jc(){var t,e=0,n=1,r=1,i=[.5],o=[0,1];function a(e){return e<=e?o[nu(i,e,0,r)]:t}function s(){var t=-1;i=new Array(r);while(++t<r)i[t]=((t+1)*n-(t-r)*e)/(r+1);return a}return a.domain=function(t){return arguments.length?(e=+t[0],n=+t[1],s()):[e,n]},a.range=function(t){return arguments.length?(r=(o=Eu.call(t)).length-1,s()):o.slice()},a.invertExtent=function(t){var a=o.indexOf(t);return a<0?[NaN,NaN]:a<1?[e,i[0]]:a>=r?[i[r-1],n]:[i[a-1],i[a]]},a.unknown=function(e){return arguments.length?(t=e,a):a},a.thresholds=function(){return i.slice()},a.copy=function(){return Jc().domain([e,n]).range(o).unknown(t)},hu.apply(Pc(a),arguments)}function Qc(){var t,e=[.5],n=[0,1],r=1;function i(i){return i<=i?n[nu(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Eu.call(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Eu.call(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return Qc().domain(e).range(n).unknown(t)},hu.apply(i,arguments)}var $c=new Date,tl=new Date;function el(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<r);return s},i.filter=function(n){return el((function(e){if(e>=e)while(t(e),!n(e))e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)while(++r<=0)while(e(t,-1),!n(t));else while(--r>=0)while(e(t,1),!n(t));}))},n&&(i.count=function(e,r){return $c.setTime(+e),tl.setTime(+r),t($c),t(tl),Math.floor(n($c,tl))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t===0}:function(e){return i.count(0,e)%t===0}):i:null}),i}var nl=el((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));nl.every=function(t){return isFinite(t=Math.floor(t))&&t>0?el((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var rl=nl,il=(nl.range,el((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),ol=il,al=(il.range,1e3),sl=6e4,ul=36e5,cl=864e5,ll=6048e5;function fl(t){return el((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*sl)/ll}))}var pl=fl(0),hl=fl(1),dl=fl(2),vl=fl(3),ml=fl(4),gl=fl(5),yl=fl(6),bl=(pl.range,hl.range,dl.range,vl.range,ml.range,gl.range,yl.range,el((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*sl)/cl}),(function(t){return t.getDate()-1}))),_l=bl,xl=(bl.range,el((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*al-t.getMinutes()*sl)}),(function(t,e){t.setTime(+t+e*ul)}),(function(t,e){return(e-t)/ul}),(function(t){return t.getHours()}))),wl=xl,El=(xl.range,el((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*al)}),(function(t,e){t.setTime(+t+e*sl)}),(function(t,e){return(e-t)/sl}),(function(t){return t.getMinutes()}))),Sl=El,Cl=(El.range,el((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*al)}),(function(t,e){return(e-t)/al}),(function(t){return t.getUTCSeconds()}))),Tl=Cl,Ol=(Cl.range,el((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t})));Ol.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?el((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):Ol:null};var Al=Ol;Ol.range;function kl(t){return el((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/ll}))}var Ml=kl(0),Pl=kl(1),Il=kl(2),Ll=kl(3),Rl=kl(4),Dl=kl(5),Nl=kl(6),jl=(Ml.range,Pl.range,Il.range,Ll.range,Rl.range,Dl.range,Nl.range,el((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/cl}),(function(t){return t.getUTCDate()-1}))),Fl=jl,zl=(jl.range,el((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));zl.every=function(t){return isFinite(t=Math.floor(t))&&t>0?el((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Bl=zl;zl.range;function Ul(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Vl(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ql(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Gl(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,c=$l(i),l=tf(i),f=$l(o),p=tf(o),h=$l(a),d=tf(a),v=$l(s),m=tf(s),g=$l(u),y=tf(u),b={a:L,A:R,b:D,B:N,c:null,d:wf,e:wf,f:Of,g:Ff,G:Bf,H:Ef,I:Sf,j:Cf,L:Tf,m:Af,M:kf,p:j,q:F,Q:cp,s:lp,S:Mf,u:Pf,U:If,V:Rf,w:Df,W:Nf,x:null,X:null,y:jf,Y:zf,Z:Uf,"%":up},_={a:z,A:B,b:U,B:V,c:null,d:Vf,e:Vf,f:Xf,g:ip,G:ap,H:qf,I:Gf,j:Hf,L:Wf,m:Zf,M:Yf,p:q,q:G,Q:cp,s:lp,S:Kf,u:Jf,U:Qf,V:tp,w:ep,W:np,x:null,X:null,y:rp,Y:op,Z:sp,"%":up},x={a:T,A:O,b:A,B:k,c:M,d:pf,e:pf,f:yf,g:uf,G:sf,H:df,I:df,j:hf,L:gf,m:ff,M:vf,p:C,q:lf,Q:_f,s:xf,S:mf,u:nf,U:rf,V:of,w:ef,W:af,x:P,X:I,y:uf,Y:sf,Z:cf,"%":bf};function w(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,c=t.length;n instanceof Date||(n=new Date(+n));while(++s<c)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=Xl[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function E(t,e){return function(n){var r,i,o=ql(1900,void 0,1),a=S(o,t,n+="",0);if(a!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(r=Vl(ql(o.y,0,1)),i=r.getUTCDay(),r=i>4||0===i?Pl.ceil(r):Pl(r),r=Fl.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(r=Ul(ql(o.y,0,1)),i=r.getDay(),r=i>4||0===i?hl.ceil(r):hl(r),r=_l.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Vl(ql(o.y,0,1)).getUTCDay():Ul(ql(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Vl(o)):Ul(o)}}function S(t,e,n,r){var i,o,a=0,s=e.length,u=n.length;while(a<s){if(r>=u)return-1;if(i=e.charCodeAt(a++),37===i){if(i=e.charAt(a++),o=x[i in Xl?e.charAt(a++):i],!o||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function C(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=l[r[0].toLowerCase()],n+r[0].length):-1}function T(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=d[r[0].toLowerCase()],n+r[0].length):-1}function O(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1}function A(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=y[r[0].toLowerCase()],n+r[0].length):-1}function k(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=m[r[0].toLowerCase()],n+r[0].length):-1}function M(t,n,r){return S(t,e,n,r)}function P(t,e,r){return S(t,n,e,r)}function I(t,e,n){return S(t,r,e,n)}function L(t){return a[t.getDay()]}function R(t){return o[t.getDay()]}function D(t){return u[t.getMonth()]}function N(t){return s[t.getMonth()]}function j(t){return i[+(t.getHours()>=12)]}function F(t){return 1+~~(t.getMonth()/3)}function z(t){return a[t.getUTCDay()]}function B(t){return o[t.getUTCDay()]}function U(t){return u[t.getUTCMonth()]}function V(t){return s[t.getUTCMonth()]}function q(t){return i[+(t.getUTCHours()>=12)]}function G(t){return 1+~~(t.getUTCMonth()/3)}return b.x=w(n,b),b.X=w(r,b),b.c=w(e,b),_.x=w(n,_),_.X=w(r,_),_.c=w(e,_),{format:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=E(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",_);return e.toString=function(){return t},e},utcParse:function(t){var e=E(t+="",!0);return e.toString=function(){return t},e}}}var Hl,Wl,Xl={"-":"",_:" ",0:"0"},Zl=/^\s*\d+/,Yl=/^%/,Kl=/[\\^$*+?|[\]().{}]/g;function Jl(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Ql(t){return t.replace(Kl,"\\$&")}function $l(t){return new RegExp("^(?:"+t.map(Ql).join("|")+")","i")}function tf(t){var e={},n=-1,r=t.length;while(++n<r)e[t[n].toLowerCase()]=n;return e}function ef(t,e,n){var r=Zl.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function nf(t,e,n){var r=Zl.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function rf(t,e,n){var r=Zl.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function of(t,e,n){var r=Zl.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function af(t,e,n){var r=Zl.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function sf(t,e,n){var r=Zl.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function uf(t,e,n){var r=Zl.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function cf(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function lf(t,e,n){var r=Zl.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function ff(t,e,n){var r=Zl.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function pf(t,e,n){var r=Zl.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function hf(t,e,n){var r=Zl.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function df(t,e,n){var r=Zl.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function vf(t,e,n){var r=Zl.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function mf(t,e,n){var r=Zl.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function gf(t,e,n){var r=Zl.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function yf(t,e,n){var r=Zl.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function bf(t,e,n){var r=Yl.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function _f(t,e,n){var r=Zl.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function xf(t,e,n){var r=Zl.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function wf(t,e){return Jl(t.getDate(),e,2)}function Ef(t,e){return Jl(t.getHours(),e,2)}function Sf(t,e){return Jl(t.getHours()%12||12,e,2)}function Cf(t,e){return Jl(1+_l.count(rl(t),t),e,3)}function Tf(t,e){return Jl(t.getMilliseconds(),e,3)}function Of(t,e){return Tf(t,e)+"000"}function Af(t,e){return Jl(t.getMonth()+1,e,2)}function kf(t,e){return Jl(t.getMinutes(),e,2)}function Mf(t,e){return Jl(t.getSeconds(),e,2)}function Pf(t){var e=t.getDay();return 0===e?7:e}function If(t,e){return Jl(pl.count(rl(t)-1,t),e,2)}function Lf(t){var e=t.getDay();return e>=4||0===e?ml(t):ml.ceil(t)}function Rf(t,e){return t=Lf(t),Jl(ml.count(rl(t),t)+(4===rl(t).getDay()),e,2)}function Df(t){return t.getDay()}function Nf(t,e){return Jl(hl.count(rl(t)-1,t),e,2)}function jf(t,e){return Jl(t.getFullYear()%100,e,2)}function Ff(t,e){return t=Lf(t),Jl(t.getFullYear()%100,e,2)}function zf(t,e){return Jl(t.getFullYear()%1e4,e,4)}function Bf(t,e){var n=t.getDay();return t=n>=4||0===n?ml(t):ml.ceil(t),Jl(t.getFullYear()%1e4,e,4)}function Uf(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Jl(e/60|0,"0",2)+Jl(e%60,"0",2)}function Vf(t,e){return Jl(t.getUTCDate(),e,2)}function qf(t,e){return Jl(t.getUTCHours(),e,2)}function Gf(t,e){return Jl(t.getUTCHours()%12||12,e,2)}function Hf(t,e){return Jl(1+Fl.count(Bl(t),t),e,3)}function Wf(t,e){return Jl(t.getUTCMilliseconds(),e,3)}function Xf(t,e){return Wf(t,e)+"000"}function Zf(t,e){return Jl(t.getUTCMonth()+1,e,2)}function Yf(t,e){return Jl(t.getUTCMinutes(),e,2)}function Kf(t,e){return Jl(t.getUTCSeconds(),e,2)}function Jf(t){var e=t.getUTCDay();return 0===e?7:e}function Qf(t,e){return Jl(Ml.count(Bl(t)-1,t),e,2)}function $f(t){var e=t.getUTCDay();return e>=4||0===e?Rl(t):Rl.ceil(t)}function tp(t,e){return t=$f(t),Jl(Rl.count(Bl(t),t)+(4===Bl(t).getUTCDay()),e,2)}function ep(t){return t.getUTCDay()}function np(t,e){return Jl(Pl.count(Bl(t)-1,t),e,2)}function rp(t,e){return Jl(t.getUTCFullYear()%100,e,2)}function ip(t,e){return t=$f(t),Jl(t.getUTCFullYear()%100,e,2)}function op(t,e){return Jl(t.getUTCFullYear()%1e4,e,4)}function ap(t,e){var n=t.getUTCDay();return t=n>=4||0===n?Rl(t):Rl.ceil(t),Jl(t.getUTCFullYear()%1e4,e,4)}function sp(){return"+0000"}function up(){return"%"}function cp(t){return+t}function lp(t){return Math.floor(+t/1e3)}function fp(t){return Hl=Gl(t),Wl=Hl.format,Hl.parse,Hl.utcFormat,Hl.utcParse,Hl}fp({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var pp=1e3,hp=60*pp,dp=60*hp,vp=24*dp,mp=7*vp,gp=30*vp,yp=365*vp;function bp(t){return new Date(t)}function _p(t){return t instanceof Date?+t:+new Date(+t)}function xp(t,e,n,r,i,o,a,s,u){var c=oc(Qu,Qu),l=c.invert,f=c.domain,p=u(".%L"),h=u(":%S"),d=u("%I:%M"),v=u("%I %p"),m=u("%a %d"),g=u("%b %d"),y=u("%B"),b=u("%Y"),_=[[a,1,pp],[a,5,5*pp],[a,15,15*pp],[a,30,30*pp],[o,1,hp],[o,5,5*hp],[o,15,15*hp],[o,30,30*hp],[i,1,dp],[i,3,3*dp],[i,6,6*dp],[i,12,12*dp],[r,1,vp],[r,2,2*vp],[n,1,mp],[e,1,gp],[e,3,3*gp],[t,1,yp]];function x(s){return(a(s)<s?p:o(s)<s?h:i(s)<s?d:r(s)<s?v:e(s)<s?n(s)<s?m:g:t(s)<s?y:b)(s)}function w(e,n,r,i){if(null==e&&(e=10),"number"===typeof e){var o=Math.abs(r-n)/e,a=Qs((function(t){return t[2]})).right(_,o);a===_.length?(i=fu(n/yp,r/yp,e),e=t):a?(a=_[o/_[a-1][2]<_[a][2]/o?a-1:a],i=a[1],e=a[0]):(i=Math.max(fu(n,r,e),1),e=s)}return null==i?e:e.every(i)}return c.invert=function(t){return new Date(l(t))},c.domain=function(t){return arguments.length?f(wu.call(t,_p)):f().map(bp)},c.ticks=function(t,e){var n,r=f(),i=r[0],o=r[r.length-1],a=o<i;return a&&(n=i,i=o,o=n),n=w(t,i,o,e),n=n?n.range(i,o+1):[],a?n.reverse():n},c.tickFormat=function(t,e){return null==e?x:u(e)},c.nice=function(t,e){var n=f();return(t=w(t,n[0],n[n.length-1],e))?f(Rc(n,t)):c},c.copy=function(){return rc(c,xp(t,e,n,r,i,o,a,s,u))},c}var wp,Ep,Sp,Cp,Tp,Op,Ap=function(){return hu.apply(xp(rl,ol,pl,_l,wl,Sl,Tl,Al,Wl).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},kp=el((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),Mp=(kp.range,el((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*ul)}),(function(t,e){return(e-t)/ul}),(function(t){return t.getUTCHours()}))),Pp=(Mp.range,el((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*sl)}),(function(t,e){return(e-t)/sl}),(function(t){return t.getUTCMinutes()})));Pp.range;var Ip,Lp,Rp,Dp,Np,jp,Fp,zp=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,Bp=(wp={},p()(wp,i["k"].LINEAR,Ic),p()(wp,i["k"].POWER,Yc),p()(wp,i["k"].LOG,Gc),p()(wp,i["k"].IDENTITY,Lc),p()(wp,i["k"].TIME,Ap),p()(wp,i["k"].QUANTILE,Kc),p()(wp,i["k"].QUANTIZE,Jc),p()(wp,i["k"].THRESHOLD,Qc),p()(wp,i["k"].CAT,Cu),wp),Up=(Ep=Object(Ct["injectable"])(),Sp=Object(Ct["inject"])(i["n"].IGlobalConfigService),Ep((Tp=function(){function t(){u()(this,t),ge()(this,"configService",Op,this),p()(this,"scaleCache",{}),p()(this,"scaleOptions",{})}return l()(t,[{key:"apply",value:function(t,e){var n=this,r=e.styleAttributeService;t.hooks.init.tap("FeatureScalePlugin",(function(){n.scaleOptions=t.getScaleOptions();var e=r.getLayerStyleAttributes(),i=t.getSource().data.dataArray;0!==i.length&&n.caculateScalesForAttributes(e||[],i)})),t.hooks.beforeRenderData.tap("FeatureScalePlugin",(function(){n.scaleOptions=t.getScaleOptions();var e=r.getLayerStyleAttributes(),i=t.getSource().data.dataArray;return n.caculateScalesForAttributes(e||[],i),t.layerModelNeedUpdate=!0,!0})),t.hooks.beforeRender.tap("FeatureScalePlugin",(function(){if(!t.layerModelNeedUpdate){n.scaleOptions=t.getScaleOptions();var e=r.getLayerStyleAttributes();if(e){var i=t.getSource().data.dataArray;if(0===i.length)return;var o=e.filter((function(t){return t.needRescale}));o.length&&n.caculateScalesForAttributes(o,i)}}}))}},{key:"isNumber",value:function(t){return!isNaN(parseFloat(t))&&isFinite(t)}},{key:"caculateScalesForAttributes",value:function(t,e){var n=this;this.scaleCache={},t.forEach((function(t){if(t.scale){var r=t.scale,o=t.name;r.names=n.parseFields(t.scale.field||[]);var a=[];r.names.forEach((function(r){a.push(n.getOrCreateScale(r,t,e))})),a.some((function(t){return t.type===i["m"].VARIABLE}))?(r.type=i["m"].VARIABLE,a.forEach((function(t){var e;if(!r.callback)if(r.values&&"text"!==r.values){var n;if("linear"===(null===(n=t.option)||void 0===n?void 0:n.type)&&r.values.length>2){var i=t.scale.ticks(r.values.length);"color"===o&&t.scale.domain(i)}t.scale.range(r.values)}else"cat"===(null===(e=t.option)||void 0===e?void 0:e.type)&&t.scale.range(t.option.domain)}))):(r.type=i["m"].CONSTANT,r.defaultValues=a.map((function(t,e){return t.scale(r.names[e])}))),r.scalers=a.map((function(t){return{field:t.field,func:t.scale,option:t.option}})),t.needRescale=!1}}))}},{key:"getOrCreateScale",value:function(t,e,n){[t,e.name].join("_");var r,i=null===(r=e.scale)||void 0===r?void 0:r.values,o=this.createScale(t,e.name,i,n);return o}},{key:"parseFields",value:function(t){return Array.isArray(t)?t:Me()(t)?t.split("*"):[t]}},{key:"createScale",value:function(t,e,n,r){var o,a,s=this.scaleOptions[e]&&(null===(o=this.scaleOptions[e])||void 0===o?void 0:o.field)===t?this.scaleOptions[e]:this.scaleOptions[t],u={field:t,scale:void 0,type:i["m"].VARIABLE,option:s};if(!r||!r.length)return s&&s.type?u.scale=this.createDefaultScale(s):(u.scale=Cu([t]),u.type=i["m"].CONSTANT),u;var c=null===(a=r.find((function(e){return!Ks()(e[t])})))||void 0===a?void 0:a[t];if(this.isNumber(t)||Ks()(c)&&!s)u.scale=Cu([t]),u.type=i["m"].CONSTANT;else{var l=s&&s.type||this.getDefaultType(c);"text"===n&&(l=i["k"].CAT);var f=this.createDefaultScaleConfig(l,t,r);Object.assign(f,s),u.scale=this.createDefaultScale(f),u.option=f}return u}},{key:"getDefaultType",value:function(t){var e=i["k"].LINEAR;return"string"===typeof t&&(e=zp.test(t)?i["k"].TIME:i["k"].CAT),e}},{key:"createDefaultScaleConfig",value:function(t,e,n){var r={type:t},o=(null===n||void 0===n?void 0:n.map((function(t){return t[e]})))||[];return t!==i["k"].CAT&&t!==i["k"].QUANTILE?r.domain=iu(o):t===i["k"].CAT?r.domain=Zs()(o):t===i["k"].QUANTILE&&(r.domain=o),r}},{key:"createDefaultScale",value:function(t){var e=t.type,n=t.domain,r=Bp[e]();return n&&r.domain(n),r}}]),t}(),Op=be()(Tp.prototype,"configService",[Sp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cp=Tp))||Cp);function Vp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function qp(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Vp(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Gp,Hp,Wp,Xp,Zp,Yp,Kp=(Ip=Object(Ct["injectable"])(),Lp=Object(Ct["inject"])(i["n"].ICameraService),Rp=Object(Ct["inject"])(i["n"].IRendererService),Ip((Np=function(){function t(){u()(this,t),ge()(this,"cameraService",jp,this),ge()(this,"rendererService",Fp,this)}return l()(t,[{key:"apply",value:function(t){t.hooks.beforeRender.tap("LayerAnimateStylePlugin",(function(){t.models.forEach((function(e){e.addUniforms(qp({},t.layerModel.getAnimateUniforms()))}))}))}}]),t}(),jp=be()(Np.prototype,"cameraService",[Lp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fp=be()(Np.prototype,"rendererService",[Rp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dp=Np))||Dp),Jp=(Gp=Object(Ct["injectable"])(),Gp(Hp=function(){function t(){u()(this,t)}return l()(t,[{key:"apply",value:function(t){t.hooks.init.tap("LayerModelPlugin",(function(){t.prepareBuildModel(),t.buildModels(),t.styleNeedUpdate=!1})),t.hooks.beforeRenderData.tap("DataSourcePlugin",(function(){return t.prepareBuildModel(),t.clearModels(),t.buildModels(),t.layerModelNeedUpdate=!1,!1}))}}]),t}())||Hp),Qp=(Wp=Object(Ct["injectable"])(),Wp(Xp=function(){function t(){u()(this,t)}return l()(t,[{key:"apply",value:function(t){t.hooks.afterInit.tap("LayerStylePlugin",(function(){t.updateLayerConfig({});var e=t.getLayerConfig(),n=e.autoFit,r=e.fitBoundsOptions;n&&setTimeout((function(){t.fitBounds(r)}),100)}))}}]),t}())||Xp),$p=["type"];function th(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function eh(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?th(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):th(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var nh={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},rh={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},ih={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},oh={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5};function ah(t){var e={u_DirectionalLights:new Array(3).fill(eh({},ih)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill(eh({},oh)),u_NumOfSpotLights:0};return t&&t.length||(t=[rh]),t.forEach((function(t,n){var r=t.type,i=void 0===r?"directional":r,o=ve()(t,$p),a=nh[i].lights,s=nh[i].num,u=e[s];e[a][u]=eh(eh({},e[a][u]),o),e[s]++})),e}var sh,uh,ch,lh,fh,ph,hh,dh,vh,mh,gh,yh,bh,_h,xh,wh,Eh,Sh,Ch,Th=(Zp=Object(Ct["injectable"])(),Zp(Yp=function(){function t(){u()(this,t)}return l()(t,[{key:"apply",value:function(t){t.hooks.beforeRender.tap("LightingPlugin",(function(){var e=t.getLayerConfig(),n=e.enableLighting;n&&t.models.forEach((function(t){return t.addUniforms(eh({},ah()))}))}))}}]),t}())||Yp),Oh={NONE:0,ENCODE:1,HIGHLIGHT:2},Ah=(sh=Object(Ct["injectable"])(),sh(uh=function(){function t(){u()(this,t)}return l()(t,[{key:"apply",value:function(t,e){e.rendererService;var n=e.styleAttributeService;t.hooks.init.tap("PixelPickingPlugin",(function(){var e=t.getLayerConfig(),r=e.enablePicking;n.registerStyleAttribute({name:"pickingColor",type:i["a"].Attribute,descriptor:{name:"a_PickingColor",buffer:{data:[],type:i["r"].FLOAT},size:3,update:function(t,e){var n=t.id;return r?Object(x["n"])(n):[0,0,0]}}})})),t.hooks.beforePickingEncode.tap("PixelPickingPlugin",(function(){var e=t.getLayerConfig(),n=e.enablePicking;n&&t.isVisible()&&t.models.forEach((function(t){return t.addUniforms({u_PickingStage:Oh.ENCODE})}))})),t.hooks.afterPickingEncode.tap("PixelPickingPlugin",(function(){var e=t.getLayerConfig(),n=e.enablePicking;n&&t.isVisible()&&t.models.forEach((function(t){return t.addUniforms({u_PickingStage:Oh.HIGHLIGHT})}))})),t.hooks.beforeHighlight.tap("PixelPickingPlugin",(function(e){var n=t.getLayerConfig(),r=n.highlightColor,i="string"===typeof r?Object(x["A"])(r):r||[1,0,0,1];t.updateLayerConfig({pickedFeatureID:Object(x["l"])(new Uint8Array(e))}),t.models.forEach((function(t){return t.addUniforms({u_PickingStage:Oh.HIGHLIGHT,u_PickingColor:e,u_HighlightColor:i.map((function(t){return 255*t}))})}))})),t.hooks.beforeSelect.tap("PixelPickingPlugin",(function(e){var n=t.getLayerConfig(),r=n.selectColor,i="string"===typeof r?Object(x["A"])(r):r||[1,0,0,1];t.updateLayerConfig({pickedFeatureID:Object(x["l"])(new Uint8Array(e))}),t.models.forEach((function(t){return t.addUniforms({u_PickingStage:Oh.HIGHLIGHT,u_PickingColor:e,u_HighlightColor:i.map((function(t){return 255*t}))})}))}))}}]),t}())||uh),kh=(ch=Object(Ct["injectable"])(),ch(lh=function(){function t(){u()(this,t)}return l()(t,[{key:"apply",value:function(t,e){var n=this,r=e.styleAttributeService;t.hooks.init.tap("RegisterStyleAttributePlugin",(function(){n.registerBuiltinAttributes(r)}))}},{key:"registerBuiltinAttributes",value:function(t){t.registerStyleAttribute({name:"position",type:i["a"].Attribute,descriptor:{name:"a_Position",buffer:{data:[],type:i["r"].FLOAT},size:3,update:function(t,e,n){return 2===n.length?[n[0],n[1],0]:[n[0],n[1],n[2]]}}}),t.registerStyleAttribute({name:"filter",type:i["a"].Attribute,descriptor:{name:"filter",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:1,update:function(t,e){var n=t.filter;return n?[1]:[0]}}}),t.registerStyleAttribute({name:"color",type:i["a"].Attribute,descriptor:{name:"a_Color",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:4,update:function(t,e){var n=t.color;return n&&n.length?n:[1,1,1,1]}}}),t.registerStyleAttribute({name:"vertexId",type:i["a"].Attribute,descriptor:{name:"a_vertexId",buffer:{usage:i["r"].DYNAMIC_DRAW,data:[],type:i["r"].FLOAT},size:1,update:function(t,e,n,r){return[e]}}})}}]),t}())||lh),Mh=(fh=Object(Ct["injectable"])(),ph=Object(Ct["inject"])(i["n"].ICameraService),hh=Object(Ct["inject"])(i["n"].ICoordinateSystemService),dh=Object(Ct["inject"])(i["n"].IRendererService),vh=Object(Ct["inject"])(i["n"].IMapService),fh((gh=function(){function t(){u()(this,t),ge()(this,"cameraService",yh,this),ge()(this,"coordinateSystemService",bh,this),ge()(this,"rendererService",_h,this),ge()(this,"mapService",xh,this)}return l()(t,[{key:"apply",value:function(t){var e=this,n=this.mapService.version,r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],o=[0,0];t.hooks.beforeRender.tap("ShaderUniformPlugin",(function(){e.coordinateSystemService.refresh(),"GAODE2.x"===n&&(r=e.mapService.map.customCoords.getMVPMatrix(),o=e.mapService.getCustomCoordCenter());var a=e.rendererService.getViewportSize(),s=a.width,u=a.height;t.models.forEach((function(n){var a;n.addUniforms((a={},p()(a,i["d"].ProjectionMatrix,e.cameraService.getProjectionMatrix()),p()(a,i["d"].ViewMatrix,e.cameraService.getViewMatrix()),p()(a,i["d"].ViewProjectionMatrix,e.cameraService.getViewProjectionMatrix()),p()(a,i["d"].Zoom,e.cameraService.getZoom()),p()(a,i["d"].ZoomScale,e.cameraService.getZoomScale()),p()(a,i["d"].FocalDistance,e.cameraService.getFocalDistance()),p()(a,i["d"].CameraPosition,e.cameraService.getCameraPosition()),p()(a,i["f"].CoordinateSystem,e.coordinateSystemService.getCoordinateSystem()),p()(a,i["f"].ViewportCenter,e.coordinateSystemService.getViewportCenter()),p()(a,i["f"].ViewportCenterProjection,e.coordinateSystemService.getViewportCenterProjection()),p()(a,i["f"].PixelsPerDegree,e.coordinateSystemService.getPixelsPerDegree()),p()(a,i["f"].PixelsPerDegree2,e.coordinateSystemService.getPixelsPerDegree2()),p()(a,i["f"].PixelsPerMeter,e.coordinateSystemService.getPixelsPerMeter()),p()(a,i["f"].Mvp,r),p()(a,"u_SceneCenterMKT",o),p()(a,"u_ViewportSize",[s,u]),p()(a,"u_DevicePixelRatio",window.devicePixelRatio),p()(a,"u_ModelMatrix",[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),p()(a,"u_PickingBuffer",t.getLayerConfig().pickingBuffer||0),a))}))}))}}]),t}(),yh=be()(gh.prototype,"cameraService",[ph],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bh=be()(gh.prototype,"coordinateSystemService",[hh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_h=be()(gh.prototype,"rendererService",[dh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xh=be()(gh.prototype,"mapService",[vh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mh=gh))||mh),Ph=(wh=Object(Ct["injectable"])(),wh(Eh=function(){function t(){u()(this,t)}return l()(t,[{key:"apply",value:function(t){t.hooks.beforeRender.tap("UpdateModelPlugin",(function(){t.layerModel&&t.layerModel.needUpdate()}))}}]),t}())||Eh),Ih=(Sh=Object(Ct["injectable"])(),Sh(Ch=function(){function t(){u()(this,t)}return l()(t,[{key:"apply",value:function(t,e){var n=this,r=e.styleAttributeService;t.hooks.init.tap("UpdateStyleAttributePlugin",(function(){n.initStyleAttribute(t,{styleAttributeService:r})})),t.hooks.beforeRender.tap("UpdateStyleAttributePlugin",(function(){t.layerModelNeedUpdate||n.updateStyleAtrribute(t,{styleAttributeService:r})}))}},{key:"updateStyleAtrribute",value:function(t,e){var n=e.styleAttributeService,r=n.getLayerStyleAttributes()||[],i=n.getLayerStyleAttribute("filter"),o=n.getLayerStyleAttribute("shape");if(i&&i.needRegenerateVertices||o&&o.needRegenerateVertices)return t.layerModelNeedUpdate=!0,void r.forEach((function(t){return t.needRegenerateVertices=!1}));r.filter((function(t){return t.needRegenerateVertices})).forEach((function(e){n.updateAttributeByFeatureRange(e.name,t.getEncodedData(),e.featureRange.startIndex,e.featureRange.endIndex),e.needRegenerateVertices=!1}))}},{key:"initStyleAttribute",value:function(t,e){var n=e.styleAttributeService,r=n.getLayerStyleAttributes()||[];r.filter((function(t){return t.needRegenerateVertices})).forEach((function(e){n.updateAttributeByFeatureRange(e.name,t.getEncodedData(),e.featureRange.startIndex,e.featureRange.endIndex),e.needRegenerateVertices=!1}))}}]),t}())||Ch);i["o"].bind(i["n"].ILayerPlugin).to(Ws).inRequestScope(),i["o"].bind(i["n"].ILayerPlugin).to(kh).inRequestScope(),i["o"].bind(i["n"].ILayerPlugin).to(Up).inRequestScope(),i["o"].bind(i["n"].ILayerPlugin).to(ya).inRequestScope(),i["o"].bind(i["n"].ILayerPlugin).to(Qp).inRequestScope(),i["o"].bind(i["n"].ILayerPlugin).to(Ih).inRequestScope(),i["o"].bind(i["n"].ILayerPlugin).to(Ph).inRequestScope(),i["o"].bind(i["n"].ILayerPlugin).to(Oe).inRequestScope(),i["o"].bind(i["n"].ILayerPlugin).to(Mh).inRequestScope(),i["o"].bind(i["n"].ILayerPlugin).to(Kp).inRequestScope(),i["o"].bind(i["n"].ILayerPlugin).to(Th).inRequestScope(),i["o"].bind(i["n"].ILayerPlugin).to(Ah).inRequestScope(),i["o"].bind(i["n"].ILayerPlugin).to(Jp).inRequestScope();var Lh="2.5.7"},"+eKy":function(t,e,n){var r=n("HIsA"),i=n("bXon"),o=n("DDwO"),a=n("hXyk"),s=n("7+LC"),u=i("Reflect","apply"),c=Function.apply,l=!s((function(){u((function(){}))}));r({target:"Reflect",stat:!0,forced:l},{apply:function(t,e,n){return o(t),a(n),u?u(t,e,n):c.call(t,e,n)}})},"+hmf":function(t,e,n){"use strict";var r={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages"},i=n("M2Sr"),o={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},a=o,s={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},u=s,c={lang:Object(i["a"])({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},a),timePickerLocale:Object(i["a"])({},u)},l=c,f=l,p="${label} is not a valid ${type}",h={locale:"en",Pagination:r,DatePicker:l,TimePicker:u,Calendar:f,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:p,method:p,array:p,object:p,number:p,date:p,boolean:p,integer:p,float:p,regexp:p,email:p,url:p,hex:p},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}};e["a"]=h},"+kF3":function(t,e,n){"use strict";var r=n("NVMI"),i=n("4dbd"),o=n("2I03");t.exports=function(t){var e=r(this),n=o(e.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);while(c>s)e[s++]=t;return e}},"+noq":function(t,e,n){n("1Xnk")},"+pX7":function(t,e,n){"use strict";function r(){var t=i(n("xwgP"));return r=function(){return t},t}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o=r()["default"].createContext({config:{mode:"doc",title:"",navs:{},menus:{},locales:[],repository:{branch:"master"},theme:{}},meta:{title:""},menu:[],nav:[],base:"",routes:[]});e["default"]=o},"+qhb":function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},"+ti2":function(t,e){function n(t,e,n,r,i){var o={};return Object.keys(r).forEach((function(t){o[t]=r[t]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},"+xk1":function(t,e){function n(t){var e=t.target||t.srcElement;e.__resizeRAF__&&cancelAnimationFrame(e.__resizeRAF__),e.__resizeRAF__=requestAnimationFrame((function(){var n=e.__resizeTrigger__,r=n&&n.__resizeListeners__;r&&r.forEach((function(e){e.call(n,t)}))}))}var r=function(t,e){var r,i=this,o=i.document,a=o.attachEvent;function s(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",n)}if("undefined"!==typeof navigator&&(r=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/)),!t.__resizeListeners__)if(t.__resizeListeners__=[],a)t.__resizeTrigger__=t,t.attachEvent("onresize",n);else{"static"===getComputedStyle(t).position&&(t.style.position="relative");var u=t.__resizeTrigger__=o.createElement("object");u.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),u.setAttribute("class","resize-sensor"),u.setAttribute("tabindex","-1"),u.setAttribute("title",""),u.__resizeElement__=t,u.onload=s,u.type="text/html",r&&t.appendChild(u),u.data="about:blank",r||t.appendChild(u)}t.__resizeListeners__.push(e)};t.exports="undefined"===typeof window?r:r.bind(window),t.exports.unbind=function(t,e){var r=document.attachEvent,i=t.__resizeListeners__||[];if(e){var o=i.indexOf(e);-1!==o&&i.splice(o,1)}else i=t.__resizeListeners__=[];if(!i.length){if(r)t.detachEvent("onresize",n);else if(t.__resizeTrigger__){var a=t.__resizeTrigger__.contentDocument,s=a&&a.defaultView;s&&(s.removeEventListener("resize",n),delete s.__resizeTrigger__),t.__resizeTrigger__=!t.removeChild(t.__resizeTrigger__)}delete t.__resizeListeners__}}},"+ynn":function(t,e){function n(t,e){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},"/2LT":function(t,e){function n(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function r(t){return function(){var e=this,r=arguments;return new Promise((function(i,o){var a=t.apply(e,r);function s(t){n(a,i,o,s,u,"next",t)}function u(t){n(a,i,o,s,u,"throw",t)}s(void 0)}))}}t.exports=r,t.exports["default"]=t.exports,t.exports.__esModule=!0},"/40y":function(t,e,n){var r=n("wvav"),i=n("AmsH"),o=n("ubI+");function a(t){return i(t)?o(t):r(t)}t.exports=a},"/5yA":function(t,e,n){var r=n("Hiyu"),i=n("7+LC"),o=n("+qhb"),a=Object.defineProperty,s={},u=function(t){throw t};t.exports=function(t,e){if(o(s,t))return s[t];e||(e={});var n=[][t],c=!!o(e,"ACCESSORS")&&e.ACCESSORS,l=o(e,0)?e[0]:u,f=o(e,1)?e[1]:void 0;return s[t]=!!n&&!i((function(){if(c&&!r)return!0;var t={length:-1};c?a(t,1,{enumerable:!0,get:u}):t[1]=1,n.call(t,l,f)}))}},"/6M7":function(t,e){function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},"/7QA":function(t,e,n){"use strict";n.r(e),n.d(e,"DrawCircle",(function(){return Yt})),n.d(e,"DrawFeature",(function(){return Zt})),n.d(e,"DrawRect",(function(){return se})),n.d(e,"DrawPolygon",(function(){return ie})),n.d(e,"DrawPoint",(function(){return ae})),n.d(e,"DrawLine",(function(){return oe})),n.d(e,"DrawMode",(function(){return Vt})),n.d(e,"DrawDelete",(function(){return qt})),n.d(e,"DrawRuler",(function(){return ue})),n.d(e,"DrawBoxSelect",(function(){return ce})),n.d(e,"DrawControl",(function(){return fe}));var r=n("TWOK"),i=n("+RP0"),o=n("lqff"),a=n("qTvU"),s=n.n(a);class u{static getInstance(){return this.instance||(this.instance=new this),this.instance}}u.instance=void 0;class c extends u{constructor(){super(...arguments),this.styleVariant="line"}execute(t,e){var n=e[this.styleVariant],r=new i["LineLayer"]({pickingBuffer:3}).source(t).shape("line").color(n.color).size(n.size).style(n.style);return[r]}}class l extends u{constructor(){super(...arguments),this.styleVariant="point"}execute(t,e){var n,r,o=e[this.styleVariant];if(null!==(n=t.features[0])&&void 0!==n&&null!==(r=n.properties)&&void 0!==r&&r.value)return[];var a=new i["PointLayer"]({zIndex:2,pickingBuffer:3}).source(t).shape("circle").color(o.color).size(o.size).style(o.style);return[a]}}class f extends u{constructor(){super(...arguments),this.styleVariant="polygon"}execute(t,e){var n=e[this.styleVariant],r=(new i["PolygonLayer"]).source(t).shape("fill").color(n.color).size(n.size).style({opacity:n.style.opacity});n.active&&r.active(n.active);var o=(new i["PolygonLayer"]).source(t).shape("line").color(n.style.stroke).size(n.style.strokeWidth).style({opacity:n.style.strokeOpacity,lineType:n.style.lineType,dashArray:n.style.dashArray});return n.active&&o.active(n.active),[r,o]}}class p extends u{constructor(){super(...arguments),this.styleVariant="point"}execute(t,e){var n,r,o=e[this.styleVariant];if(null===(n=t.features[0])||void 0===n||null===(r=n.properties)||void 0===r||!r.value)return[];var a=new i["PointLayer"]({zIndex:2,pickingBuffer:3}).source(t).style(o.style).shape("value","text").size(14).color(o.color);return[a]}}class h{constructor(){this.strategyMap=void 0,this.strategyMap={}}static defaultRenderer(){var t=new h;return t.setStrategy(l.getInstance(),"Point"),t.setStrategy(p.getInstance(),"Point"),t.setStrategy(f.getInstance(),"Polygon"),t.setStrategy(c.getInstance(),"LineString"),t}setStrategy(t,e){var n=this.strategyMap[e];this.strategyMap[e]=(n||[]).concat(t)}renderFeature(t,e){var n,r,i=null===(n=t.features[0])||void 0===n||null===(r=n.geometry)||void 0===r?void 0:r.type,o=this.strategyMap[i]||[],a=o.map((n=>n.execute(t,e)));return s()(a)}}var d=h.defaultRenderer();class v{constructor(t){this.drawLayers=[],this.draw=void 0,this.isEnableDrag=void 0,this.isEnableEdit=void 0,this.styleVariant="normal",this.draw=t}update(t){this.removeLayers(),this.drawLayers=d.renderFeature(t,this.draw.getStyle(this.styleVariant)),this.addLayers()}on(t,e){var n=this.drawLayers[0];n.on(t,e)}off(t,e){var n=this.drawLayers[0];n.off(t,e)}emit(t,e){var n=this.drawLayers[0];n.emit(t,e)}updateData(t){0===this.drawLayers.length&&this.update(t),this.drawLayers.forEach((e=>e.setData(t)))}destroy(){this.removeLayers()}removeLayers(){0!==this.drawLayers.length&&this.drawLayers.forEach((t=>this.draw.scene.removeLayer(t)))}addLayers(){this.drawLayers.forEach((t=>this.draw.scene.addLayer(t)))}show(){this.drawLayers.forEach((t=>t.show()))}hide(){this.drawLayers.forEach((t=>t.hide()))}}var m=t=>"LineString"===t.geometry.type,g=t=>"Polygon"===t.geometry.type,y=n("Rtff");function b(t,e,n){void 0===n&&(n={});var r=Object(y["a"])(t),i=Object(y["a"])(e),a=Object(o["a"])(i[1]-r[1]),s=Object(o["a"])(i[0]-r[0]),u=Object(o["a"])(r[1]),c=Object(o["a"])(i[1]),l=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(u)*Math.cos(c);return Object(o["k"])(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),n.units)}var _=b,x=6371008.8,w={meters:x,metres:x,millimeters:1e3*x,millimetres:1e3*x,centimeters:100*x,centimetres:100*x,kilometers:x/1e3,kilometres:x/1e3,miles:x/1609.344,nauticalmiles:x/1852,inches:39.37*x,yards:x/1.0936,feet:3.28084*x,radians:1,degrees:x/111325};function E(t,e,n){if(n=n||{},!M(n))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&P(r),i&&I(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function S(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!k(t[0])||!k(t[1]))throw new Error("coordinates must contain numbers");return E({type:"Point",coordinates:t},e,n)}function C(t,e){if(void 0===t||null===t)throw new Error("radians is required");if(e&&"string"!==typeof e)throw new Error("units must be a string");var n=w[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}function T(t,e){if(void 0===t||null===t)throw new Error("distance is required");if(e&&"string"!==typeof e)throw new Error("units must be a string");var n=w[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}function O(t){if(null===t||void 0===t)throw new Error("radians is required");var e=t%(2*Math.PI);return 180*e/Math.PI}function A(t){if(null===t||void 0===t)throw new Error("degrees is required");var e=t%360;return e*Math.PI/180}function k(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function M(t){return!!t&&t.constructor===Object}function P(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!k(t))throw new Error("bbox must only contain numbers")}))}function I(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function L(t,e){var n,r,i,o,a,s,u,c,l,f,p=0,h="FeatureCollection"===t.type,d="Feature"===t.type,v=h?t.features.length:1;for(n=0;n<v;n++){for(s=h?t.features[n].geometry:d?t.geometry:t,c=h?t.features[n].properties:d?t.properties:{},l=h?t.features[n].bbox:d?t.bbox:void 0,f=h?t.features[n].id:d?t.id:void 0,u=!!s&&"GeometryCollection"===s.type,a=u?s.geometries.length:1,i=0;i<a;i++)if(o=u?s.geometries[i]:s,null!==o)switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,c,l,f))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],p,c,l,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,c,l,f))return!1;p++}}function R(t,e,n){var r=n;return L(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)})),r}function D(t){return R(t,(function(t,e){return t+j(e)}),0)}var N=6378137;function j(t){var e,n=0;switch(t.type){case"Polygon":return F(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=F(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(e=0;e<t.geometries.length;e++)n+=j(t.geometries[e]);return n}}function F(t){var e=0;if(t&&t.length>0){e+=Math.abs(z(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(z(t[n]))}return e}function z(t){var e,n,r,i,o,a,s,u=0,c=t.length;if(c>2){for(s=0;s<c;s++)s===c-2?(i=c-2,o=c-1,a=0):s===c-1?(i=c-1,o=0,a=1):(i=s,o=s+1,a=s+2),e=t[i],n=t[o],r=t[a],u+=(B(r[0])-B(e[0]))*Math.sin(B(n[1]));u=u*N*N/2}return u}function B(t){return t*Math.PI/180}var U,V,q,G=D,H=(t,e)=>_(t,e,{units:"kilometers"}).toFixed(2)+"km",W=t=>(G(t)/1e6).toFixed(2)+"km2",X=new h;class Z extends u{constructor(){super(...arguments),this.styleVariant="polygon"}execute(t,e){var n=e[this.styleVariant],r=(new i["PolygonLayer"]).source(t).shape("fill").color(n.color).style({opacity:n.style.opacity}).active(n.active),a=t.features[0],s=[];if(g(a)){var u=a.geometry.coordinates[0];s=Object(o["c"])(u.map(((t,e)=>{if(u[e+1])return Object(o["g"])([t,u[e+1]])})).filter(Boolean))}var c=e["line"],l=new i["LineLayer"]({pickingBuffer:3}).source(s).color(c.style.stroke).size(c.style.strokeWidth).style({opacity:c.style.strokeOpacity,lineType:c.style.lineType,dashArray:c.style.dashArray}).active(c.active);return l.setBlend("max"),[r,l]}}class Y extends u{constructor(){super(...arguments),this.styleVariant="line"}execute(t,e){var n=e[this.styleVariant],r=t.features[0],a=[];if(m(r)){var s=r.geometry.coordinates;a=Object(o["c"])(s.map(((t,e)=>{if(s[e+1])return Object(o["g"])([t,s[e+1]])})).filter(Boolean))}var u=new i["LineLayer"]({pickingBuffer:5}).source(a).color(n.style.stroke).size(n.style.strokeWidth).style({opacity:n.style.strokeOpacity,lineType:n.style.lineType,dashArray:n.style.dashArray}).active(n.active);return u.setBlend("max"),[u]}}X.setStrategy(Z.getInstance(),"Polygon"),X.setStrategy(Y.getInstance(),"LineString");class K extends v{constructor(t){super(t),this.styleVariant="ruler",this.popup=void 0,this.currentFeature=void 0,this.popup=new i["Popup"]({closeButton:!1,anchor:"left",closeOnClick:!1}),this.draw.scene.addPopup(this.popup),Object(i["bindAll"])(["onMouseEnter","onMouseOut"],this)}update(t){if(0!==t.features.length){this.removeLayers();var e=t.features[0],n=this.draw.getStyle(this.styleVariant);this.drawLayers=X.renderFeature(Object(o["c"])([e]),n),this.drawLayers.forEach((t=>{t.on("mouseout",this.onMouseOut),t.on("mouseenter",this.onMouseEnter)})),this.addLayers()}}onMouseEnter(t){var e=t.lngLat||t.lnglat,n=t.feature,r="";if(m(n)){var i=n.geometry.coordinates;r=H(i[0],i[1])}g(n)&&(r=W(n.geometry)),this.popup.open(),this.popup.setLnglat(e),this.popup.setText(r||"")}onMouseOut(t){this.popup.close()}}function J(t,e,n,r){void 0===r&&(r={});var i=Object(y["a"])(t),a=Object(o["a"])(i[0]),s=Object(o["a"])(i[1]),u=Object(o["a"])(n),c=Object(o["f"])(e,r.units),l=Math.asin(Math.sin(s)*Math.cos(c)+Math.cos(s)*Math.sin(c)*Math.cos(u)),f=a+Math.atan2(Math.sin(u)*Math.sin(c)*Math.cos(s),Math.cos(c)-Math.sin(s)*Math.sin(l)),p=Object(o["j"])(f),h=Object(o["j"])(l);return Object(o["h"])([p,h],r.properties)}function Q(t,e,n){void 0===n&&(n={});for(var r=n.steps||64,i=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},a=[],s=0;s<r;s++)a.push(J(t,e,-360*s/r,n).geometry.coordinates);return a.push(a[0]),Object(o["i"])([a],i)}(function(t){t["CREATE"]="draw.create",t["DELETE"]="draw.delete",t["Move"]="draw.move",t["Edit"]="draw.edit",t["UPDATE"]="draw.update",t["CHANGE"]="draw.change",t["SELECTION_CHANGE"]="draw.selectionchange",t["MODE_CHANGE"]="draw.modechange",t["ACTIONABLE"]="draw.actionable",t["RENDER"]="draw.render",t["COMBINE_FEATURES"]="draw.combine",t["UNCOMBINE_FEATURES"]="draw.uncombine",t["ADD_POINT"]="draw.addpoint",t["MEASURE"]="draw.measure",t["MULTI_SELECT"]="draw.multiselect",t["BOX_SELECT"]="draw.boxselect"})(U||(U={})),function(t){t["DRAW_Circle"]="draw_circle",t["DRAW_Rect"]="draw_rect",t["DRAW_LINE_STRING"]="draw_line_string",t["DRAW_POLYGON"]="draw_polygon",t["DRAW_POINT"]="draw_point",t["SIMPLE_SELECT"]="simple_select",t["DIRECT_SELECT"]="direct_select",t["STATIC"]="static",t["RULER"]="ruler"}(V||(V={})),function(t){t["FEATURE"]="Feature",t["POLYGON"]="Polygon",t["LINE_STRING"]="LineString",t["POINT"]="Point",t["FEATURE_COLLECTION"]="FeatureCollection",t["MULTI_PREFIX"]="Multi",t["MULTI_POINT"]="MultiPoint",t["MULTI_LINE_STRING"]="MultiLineString",t["MULTI_POLYGON"]="MultiPolygon"}(q||(q={}));var $=Q;function tt(t,e,n){var i=_(Object(o["h"])(t),Object(o["h"])(e),n),a=$(t,i,{units:n.units,steps:n.steps,properties:Object(r["a"])(Object(r["a"])({},n),{},{active:!0,type:"circle",radius:i,startPoint:{lng:t[0],lat:t[1]},endPoint:{lng:e[0],lat:e[1]}})});return a}function et(t,e,n){var i=Math.min(t[0],e[0]),o=Math.min(t[1],e[1]),a=Math.max(t[0],e[0]),s=Math.max(t[1],e[1]),u={type:"Feature",properties:Object(r["a"])({type:"rect",active:!0,startPoint:{lng:t[0],lat:t[1]},endPoint:{lng:e[0],lat:e[1]}},n),geometry:{type:"Polygon",coordinates:[[[i,o],[i,s],[a,s],[a,o],[i,o]]]}};return u}function nt(t,e){var n=t.map((t=>[t.lng,t.lat]));return t.length<2?Object(o["h"])(n[0],e):t.length<3?Object(o["g"])(n,e):(n.push(n[0]),Object(o["i"])([n],e))}function rt(t,e){var n=t.map((t=>[t.lng,t.lat]));return t.length>0&&t.length<2?Object(o["h"])(n[0],e):t.length>=2?Object(o["g"])(n,e):{type:"FeatureCollection",features:[]}}function it(t){var e=t.map(((t,e)=>Object(o["h"])([t.lng,t.lat],{active:!0,id:e.toString()})));return Object(o["c"])(e)}function ot(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=0,r=0,i=0,o=t.length,a=o-1;i<o;a=i++){var s=(t[i].lng-t[a].lng)*(t[a].lat+t[i].lat),u=n+s;r+=Math.abs(n)>=Math.abs(s)?n-u+s:s-u+n,n=u}return n+r>=0!==!e}var at=function(t,e){return t.forEach((t=>{var n,r=t.geometry,i=r.type,o=r.coordinates;switch(i){case q.POINT:n=st(o,e);break;case q.LINE_STRING:case q.MULTI_POINT:n=ut(o,e);break;case q.POLYGON:case q.MULTI_LINE_STRING:n=ct(o,e);break;case q.MULTI_POLYGON:n=o.map((t=>ct(t,e)));break}n&&(r.coordinates=n)})),t};function st(t,e){return[t[0]+e.lng,t[1]+e.lat]}function ut(t,e){return t.map((t=>st(t,e)))}function ct(t,e){return t.map((t=>ut(t,e)))}var lt=h.defaultRenderer();class ft extends v{constructor(t){super(t),this.styleVariant="normal",Object(i["bindAll"])(["onDeleteClick","onClick"],this)}update(t){if(this.drawLayers.length>0)this.updateData(t);else{this.removeLayers();var e=this.draw.getStyle(this.styleVariant);this.drawLayers=lt.renderFeature(t,e),this.addFilter(),this.addLayers()}}enableSelect(){if(!this.isEnableDrag&&this.draw.selectEnable){var t=this.drawLayers[0];t&&(t.on("click",this.onClick),this.isEnableDrag=!0)}}disableSelect(){if(this.isEnableDrag){var t=this.drawLayers[0];t.off("click",this.onClick),this.isEnableDrag=!1}}enableDelete(){this.disableSelect();var t=this.drawLayers[0];t.on("click",this.onDeleteClick)}disableDelete(){var t=this.drawLayers[0];t.off("click",this.onDeleteClick)}addFilter(){this.drawLayers.forEach((t=>t.filter("active",(t=>!t))))}onClick(t){this.draw.getDrawable()&&(this.draw.source.setFeatureUnActive(this.draw.getCurrentFeature()),this.draw.setCurrentFeature(t.feature),this.draw.source.setFeatureActive(t.feature),this.updateData(this.draw.source.data),this.draw.emit(U.MODE_CHANGE,V.SIMPLE_SELECT))}onDeleteClick(t){this.draw.source.removeFeature(t.feature),this.updateData(this.draw.source.data)}}var pt=h.defaultRenderer();class ht extends v{constructor(t){super(t),this.styleVariant="active",Object(i["bindAll"])(["onMouseMove","onUnMouseMove","onClick","onUnClick"],this)}update(t){this.removeLayers();var e=this.draw.getStyle(this.styleVariant);this.drawLayers=pt.renderFeature(t,e),this.addLayers()}enableSelect(){if(this.show(),!this.isEnableDrag){var t=this.drawLayers[0];t.on("mouseenter",this.onMouseMove),t.on("mouseout",this.onUnMouseMove),this.draw.editEnable&&t.on("click",this.onClick),t.on("unclick",this.onUnClick),this.isEnableDrag=!0}}disableSelect(){if(this.isEnableDrag){var t=this.drawLayers[0];t.off("mouseenter",this.onMouseMove),t.off("mouseout",this.onUnMouseMove),t.off("click",this.onClick),t.off("unclick",this.onUnClick),this.isEnableDrag=!1}}enableEdit(){if(!this.isEnableEdit){var t=this.drawLayers[0];t.on("unclick",this.onUnClick),this.isEnableDrag=!0}}disableEdit(){if(this.isEnableEdit){var t=this.drawLayers[0];t.off("unclick",this.onUnClick),this.isEnableDrag=!1}}onMouseMove(t){this.draw.setCursor("move"),this.draw.selectMode.enable(),this.draw.measureMode.enable()}onUnMouseMove(t){this.draw.resetCursor(),this.draw.selectMode.disable()}onClick(t){this.draw.getDrawable()&&(this.draw.selectMode.disable(),this.draw.editMode.enable(),this.disableSelect(),this.draw.resetCursor(),this.enableEdit(),this.draw.setCurrentFeature(t.feature),this.draw.emit(U.MODE_CHANGE,V.DIRECT_SELECT))}onUnClick(t){this.draw.selectMode.disable(),this.draw.editMode.disable(),this.draw.source.setFeatureUnActive(this.draw.getCurrentFeature()),this.disableSelect(),this.disableEdit(),this.hide(),this.draw.emit(U.MODE_CHANGE,V.STATIC)}}class dt extends v{constructor(t){super(t),this.styleVariant="active",Object(i["bindAll"])(["onMouseEnter","onMouseOut","onClick"],this)}enableSelect(){}disableSelect(){}enableEdit(){if(!this.isEnableEdit){var t=this.drawLayers[0];t.on("mouseenter",this.onMouseEnter),t.on("mouseout",this.onMouseOut),t.on("click",this.onClick),this.isEnableEdit=!0}}disableEdit(){if(this.isEnableEdit){var t=this.drawLayers[0];t.off("mouseenter",this.onMouseEnter),t.off("mouseout",this.onMouseOut),t.off("click",this.onClick),this.isEnableEdit=!1}}onMouseEnter(t){this.draw.setCursor("move"),this.draw.setCurrentVertex(t.feature),this.draw.editMode.enable()}onMouseOut(t){this.draw.resetCursor(),this.draw.editMode.disable()}onClick(t){this.draw.getDrawable()&&(this.draw.setCurrentVertex(t.feature),this.draw.editMode.enable())}}function vt(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&t.length>=2&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function mt(t,e,n){if(n=n||{},!M(n))throw new Error("options is invalid");var r=n["final"];if(!0===r)return gt(t,e);var i=vt(t),o=vt(e),a=A(i[0]),s=A(o[0]),u=A(i[1]),c=A(o[1]),l=Math.sin(s-a)*Math.cos(c),f=Math.cos(u)*Math.sin(c)-Math.sin(u)*Math.cos(c)*Math.cos(s-a);return O(Math.atan2(l,f))}function gt(t,e){var n=mt(e,t);return n=(n+180)%360,n}var yt=mt;function bt(t,e,n,r){if(r=r||{},!M(r))throw new Error("options is invalid");var i=r.units,o=r.properties,a=vt(t),s=A(a[0]),u=A(a[1]),c=A(n),l=T(e,i),f=Math.asin(Math.sin(u)*Math.cos(l)+Math.cos(u)*Math.sin(l)*Math.cos(c)),p=s+Math.atan2(Math.sin(c)*Math.sin(l)*Math.cos(u),Math.cos(l)-Math.sin(u)*Math.sin(f)),h=O(p),d=O(f);return S([h,d],o)}var _t=bt;function xt(t,e,n){if(n=n||{},!M(n))throw new Error("options is invalid");var r=n.units,i=vt(t),o=vt(e),a=A(o[1]-i[1]),s=A(o[0]-i[0]),u=A(i[1]),c=A(o[1]),l=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(u)*Math.cos(c);return C(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),r)}var wt=xt;function Et(t,e){var n=wt(t,e),r=yt(t,e),i=_t(t,n/2,r);return i}var St=Et,Ct=h.defaultRenderer();class Tt extends v{constructor(){super(...arguments),this.showLine=!0}update(t){if(!t.features.every(m))throw new Error("All features must be LineString in order to calculate distance.");this.removeLayers();var e=t.features.map((t=>{var e,n,r=null===t||void 0===t||null===(e=t.geometry)||void 0===e?void 0:e.coordinates[0],i=null===t||void 0===t||null===(n=t.geometry)||void 0===n?void 0:n.coordinates[1],o=H(r,i),a=St(r,i);return a.properties.value=o,a})),n=this.draw.getStyle("active");this.drawLayers=Ct.renderFeature(Object(o["c"])(e),n),this.showLine&&this.drawLayers.push(...Ct.renderFeature(t,n)),this.addLayers()}}var Ot=n("Xhqw"),At=h.defaultRenderer();class kt extends v{constructor(){super(...arguments),this.showArea=!0}update(t){if(!t.features.every(g))throw new Error("All features must be LineString in order to calculate distance.");this.removeLayers();var e=t.features.map((t=>Object(Ot["centerOfMass"])(t,{value:W(t.geometry)}))),n=this.draw.getStyle("active");this.drawLayers=At.renderFeature(Object(o["c"])(e),n),this.showArea&&this.drawLayers.push(...At.renderFeature(t,n)),this.addLayers()}}var Mt=n("2pGt"),Pt=n("Ixdt"),It=n.n(Pt),Lt=n("5xYg"),Rt=n.n(Lt),Dt=n("CvKH"),Nt=n.n(Dt);class jt{constructor(t){this.data=void 0,this.initData=void 0,"FeatureCollection"!==(null===t||void 0===t?void 0:t.type)?(t&&(this.initData=t),this.data=this.getDefaultData()):this.data=Rt()(t||this.getDefaultData(),!0)}addFeature(t){this.data.features.push(t)}getData(){var t=Nt()(this.data.features);return{type:"FeatureCollection",features:t}}getFeature(t){var e,n=null===(e=this.data)||void 0===e?void 0:e.features.find((e=>{var n;return(null===e||void 0===e||null===(n=e.properties)||void 0===n?void 0:n.id)===t}));return n}removeAllFeatures(){this.data=this.getDefaultData()}removeFeature(t){var e=this.getFeatureIndex(t);void 0!==e&&this.data.features.splice(e,1)}setFeatureActive(t){var e,n=this.getFeature(null===t||void 0===t||null===(e=t.properties)||void 0===e?void 0:e.id);n&&n.properties&&(n.properties.active=!0)}setFeatureUnActive(t){var e,n=this.getFeature(null===t||void 0===t||null===(e=t.properties)||void 0===e?void 0:e.id);n&&n.properties&&(n.properties.active=!1)}clearFeatureActive(){this.data.features.forEach((t=>{t&&t.properties&&(t.properties.active=!1)}))}updateFeature(t){this.removeFeature(t),this.addFeature(t)}destroy(){this.data=this.getDefaultData()}getDefaultData(){return{type:"FeatureCollection",features:[]}}getFeatureIndex(t){return this.data.features.findIndex((e=>{var n,r;return(null===e||void 0===e||null===(n=e.properties)||void 0===n?void 0:n.id)===(null===t||void 0===t||null===(r=t.properties)||void 0===r?void 0:r.id)}))}}var Ft={boxSelect:{polygon:{shape:"fill",color:"#black",style:{stroke:"black",strokeWidth:1,strokeOpacity:1,lineType:"dash",dashArray:[1,1]}}},active:{point:{type:"PointLayer",shape:"circle",color:"#fbb03b",size:5,style:{stroke:"#fff",strokeWidth:2}},line:{type:"LineLayer",shape:"line",color:"#fbb03b",size:1,style:{opacity:1,lineType:"dash",dashArray:[2,2]}},polygon:{shape:"fill",color:"#fbb03b",style:{opacity:.1,stroke:"#fbb03b",strokeWidth:1,strokeOpacity:1,lineType:"dash",dashArray:[2,2]}}},normal:{polygon:{type:"PolygonLayer",shape:"fill",color:"#3bb2d0",style:{opacity:.1,stroke:"#3bb2d0",strokeWidth:1,strokeOpacity:1,lineType:"solid",dashArray:[2,2]}},line:{type:"LineLayer",shape:"line",size:1,color:"#3bb2d0",style:{opacity:1}},point:{type:"PointLayer",shape:"circle",color:"#3bb2d0",size:3,style:{stroke:"#fff",strokeWidth:2}}},normal_point:{type:"PointLayer",shape:"circle",color:"#3bb2d0",size:3,style:{stroke:"#fff",strokeWidth:2}},mid_point:{point:{type:"PointLayer",shape:"circle",color:"#fbb03b",size:3,style:{}}},ruler:{polygon:{type:"PolygonLayer",shape:"fill",active:{color:"#FB93FF"},color:"#883BF2",style:{opacity:.1,stroke:"#883BF2",strokeWidth:1,strokeOpacity:1,lineType:"solid",dashArray:[2,2]}},line:{type:"LineLayer",shape:"line",size:1,color:"#883BF2",active:{color:"#FB93FF"},style:{stroke:"#883BF2",strokeWidth:1,strokeOpacity:1,lineType:"solid"}},point:{type:"PointLayer",shape:"circle",color:"#883BF2",size:3,style:{stroke:"#fff",strokeWidth:2}}}},zt=Ft,Bt=0;class Ut extends Mt["EventEmitter"]{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.source=void 0,this.scene=void 0,this.type=void 0,this.title=void 0,this.isEnable=!1,this.options={style:zt},this.drawStatus="Drawing",this.currentFeature=void 0,this.currentVertex=void 0,this.popup=void 0,this.drawMode=void 0,this.drawable=!0;var n=e.data;this.scene=t,this.source=new jt(n),this.options=It()(this.options,this.getDefaultOptions(),e),this.title=this.getOption("title"),Object(i["bindAll"])(["onDragStart","onDragging","onDragEnd","onClick","onCheckDrawable"],this)}getDrawMode(){return this.drawMode}enable(){this.scene.setMapStatus({dragEnable:!1}),this.isEnable||(this.drawStatus="Drawing",this.scene.on("dragstart",this.onDragStart),this.scene.on("dragging",this.onDragging),this.scene.on("dragend",this.onDragEnd),this.scene.on("click",this.onClick),this.scene.on("mousemove",this.onCheckDrawable),this.setCursor(this.getOption("cursor")),this.isEnable=!0)}resetDraw(){}disable(){this.isEnable&&(this.scene.off("dragstart",this.onDragStart),this.scene.off("dragging",this.onDragging),this.scene.off("dragend",this.onDragEnd),this.scene.off("click",this.onClick),this.scene.off("mousemove",this.onCheckDrawable),this.resetCursor(),this.scene.setMapStatus({dragEnable:!0}),this.isEnable=!1,this.drawStatus="DrawFinish")}onCheckDrawable(t){var e=t.lnglat,n=this.getOption("checkDrawable");n&&"Drawing"===this.drawStatus&&(n(e,this)?(this.setCursor(this.getOption("cursor")),this.drawable=!0):(this.setCursor("not-allowed"),this.drawable=!1))}setCurrentFeature(t){this.currentFeature=t,this.source.setFeatureActive(t)}setCurrentVertex(t){this.currentVertex=t}deleteCurrentFeature(){throw new Error("\u5b50\u7c7b\u672a\u5b9e\u73b0\u8be5\u65b9\u6cd5")}getCurrentVertex(){return this.currentVertex}getCurrentFeature(){return this.currentFeature}getOption(t){return this.options[t]}setOption(t,e){return this.options[t]=e}getStyle(t){return this.getOption("style")[t]}getUniqId(){return Bt++}setCursor(t){var e=this.scene.getMapCanvasContainer();if(e){var n,r,i=null!==(n=this.getOption("rewriteCursor"))&&void 0!==n?n:{};e.style.cursor=null!==(r=i[t])&&void 0!==r?r:t}}resetCursor(){var t=this.scene.getMapCanvasContainer();t&&t.removeAttribute("style")}getCursor(){var t,e=this.scene.getMapCanvasContainer();if(e)return null!==(t=e.style.cursor)&&void 0!==t?t:""}destroy(){Bt=0,this.removeAllListeners(),this.disable()}getDrawable(){return this.drawable}setDrawMode(t){this.drawMode=t}getDefaultOptions(){return{}}onClick(t){return null}}var Vt=Ut;class qt extends Vt{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e)}enable(){this.emit(U.DELETE,"")}disable(){return null}getDefaultOptions(){return Object(r["a"])(Object(r["a"])({},super.getDefaultOptions()),{},{title:"\u5220\u9664\u56fe\u5f62"})}onDragStart(t){throw new Error("Method not implemented.")}onDragging(t){}onDragEnd(){throw new Error("Method not implemented.")}onClick(){return null}}class Gt extends Vt{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.endPoint=void 0,this.onDragStart=t=>{},this.onDragging=t=>{this.endPoint=t.lngLat,this.emit(U.Edit,this.endPoint)},this.onDragEnd=()=>{this.emit(U.UPDATE,this.currentFeature),this.resetCursor(),this.disable()},this.onClick=()=>null}setEditFeature(t){this.currentFeature=t}getDefaultOptions(){return{steps:64,units:"kilometers",cursor:"move"}}}class Ht extends Vt{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.center=void 0,this.dragStartPoint=void 0}setSelectedFeature(t){this.currentFeature=t}onDragStart(t){this.scene.setMapStatus({dragEnable:!1}),this.dragStartPoint=t.lngLat}getDefaultOptions(){return{steps:64,units:"kilometers",cursor:"move"}}onDragging(t){var e={lng:t.lngLat.lng-this.dragStartPoint.lng,lat:t.lngLat.lat-this.dragStartPoint.lat};this.emit(U.Move,e),this.dragStartPoint=t.lngLat}onDragEnd(){this.emit(U.UPDATE,this.currentFeature)}onClick(){return null}}class Wt extends v{update(t){}on(t,e){}off(t,e){}emit(t,e){}updateData(t){}destroy(){}removeLayers(){}addLayers(){}show(){}hide(){}}class Xt extends Vt{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e)}setSelectedFeature(t){this.currentFeature=t,this.emit(U.MEASURE,this.currentFeature)}onDragStart(t){}getDefaultOptions(){return{steps:64,units:"kilometers",cursor:"move"}}onDragging(t){}onDragEnd(){}onClick(){}}class Zt extends Vt{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.selectMode=void 0,this.editMode=void 0,this.measureMode=void 0,this.deleteMode=void 0,this.editEnable=void 0,this.showDistance=void 0,this.showArea=void 0,this.selectEnable=void 0,this.normalLayer=void 0,this.drawLayer=void 0,this.drawVertexLayer=void 0,this.drawDistanceLayer=void 0,this.drawAreaLayer=void 0,this.onModeChange=t=>{var e,n,r,i;switch(this.setDrawMode(t),t){case V.DIRECT_SELECT:if(!this.editEnable)return;this.editMode.enable(),this.editMode.setEditFeature(this.currentFeature),this.drawLayer.updateData(Object(o["c"])([this.currentFeature])),this.drawVertexLayer.updateData(Object(o["c"])(null===(e=this.currentFeature)||void 0===e||null===(n=e.properties)||void 0===n?void 0:n.pointFeatures)),this.drawVertexLayer.show(),this.drawVertexLayer.enableEdit(),this.drawDistanceLayer.show(),this.drawAreaLayer.show(),this.showOtherLayer(),this.drawStatus="DrawEdit";break;case V.SIMPLE_SELECT:if(!this.selectEnable)return this.drawLayer.hide(),this.drawVertexLayer.hide(),this.hideOtherLayer(),void this.emit(U.MODE_CHANGE,V.STATIC);this.selectMode.setSelectedFeature(this.currentFeature),this.selectMode.enable(),this.measureMode.setSelectedFeature(this.currentFeature),this.measureMode.enable(),this.drawLayer.updateData(Object(o["c"])([this.currentFeature])),this.drawLayer.enableSelect(),this.drawVertexLayer.updateData(Object(o["c"])(null===(r=this.currentFeature)||void 0===r||null===(i=r.properties)||void 0===i?void 0:i.pointFeatures)),this.drawVertexLayer.disableEdit(),this.drawVertexLayer.show(),this.drawDistanceLayer.show(),this.drawAreaLayer.show(),this.drawLayer.show(),this.showOtherLayer(),this.drawStatus="DrawSelected";break;case V.STATIC:if(!this.getOption("showFeature"))return;this.source.updateFeature(this.currentFeature),this.selectMode.disable(),this.editMode.disable(),this.measureMode.disable(),this.source.clearFeatureActive(),this.drawVertexLayer.hide(),this.drawDistanceLayer.hide(),this.drawAreaLayer.hide(),this.drawVertexLayer.disableEdit(),this.hideOtherLayer(),this.normalLayer.update(this.source.data),this.normalLayer.enableSelect(),this.drawStatus="DrawFinish";break}},this.onDrawCreate=t=>{this.source.addFeature(t)},this.onDrawUpdate=t=>{this.source.updateFeature(this.currentFeature),this.emit(U.UPDATE,this.currentFeature)},this.onDrawMove=t=>{"DrawSelected"!==this.drawStatus&&"DrawFinish"!==this.drawStatus||this.moveFeature(t)},this.onDrawEdit=t=>{this.editFeature(t)},this.onDrawDelete=()=>{"DrawSelected"===this.drawStatus&&(this.clear(),this.source.removeFeature(this.currentFeature),this.normalLayer.update(this.source.data),this.drawLayer.disableSelect(),this.selectMode.disable(),this.currentFeature=null)},this.addKeyDownEvent=t=>{var e=t||window.event;e&&8===e.keyCode&&this.deleteMode.enable(),e&&90===e.keyCode&&e.ctrlKey&&"Drawing"===this.drawStatus&&this.removeLatestVertex()},this.selectEnable=this.getOption("selectEnable"),this.editEnable=this.getOption("editEnable"),this.showDistance=this.getOption("showDistance"),this.showArea=this.getOption("showArea"),this.drawLayer=new ht(this),this.drawVertexLayer=new dt(this),this.showDistance?this.drawDistanceLayer=new Tt(this):this.drawDistanceLayer=new Wt(this),this.showArea?this.drawAreaLayer=new kt(this):this.drawAreaLayer=new Wt(this),this.normalLayer=new ft(this),this.selectMode=new Ht(this.scene,{}),this.editMode=new Gt(this.scene,{}),this.deleteMode=new qt(this.scene,{}),this.measureMode=new Xt(this.scene,{}),this.selectMode.on(U.UPDATE,this.onDrawUpdate),this.selectMode.on(U.Move,this.onDrawMove),this.editMode.on(U.MODE_CHANGE,this.onModeChange),this.editMode.on(U.UPDATE,this.onDrawUpdate),this.editMode.on(U.Edit,this.onDrawEdit),this.selectMode.on(U.MODE_CHANGE,this.onModeChange),this.deleteMode.on(U.DELETE,this.onDrawDelete),this.on(U.CREATE,this.onDrawCreate),this.on(U.MODE_CHANGE,this.onModeChange),document.addEventListener("keydown",this.addKeyDownEvent),this.options.data&&this.initData()&&(this.normalLayer.update(this.source.data),this.normalLayer.enableSelect())}setCurrentFeature(t){this.currentFeature=t,this.pointFeatures=t.properties.pointFeatures,this.source.setFeatureActive(t)}deleteCurrentFeature(){this.deleteMode.enable()}disableLayer(){this.drawLayer.disableSelect()}enableLayer(){this.drawLayer.enableSelect()}getData(){return this.source.getData()}resetData(t){this.source=new jt(t),this.options=It()(this.options,this.getDefaultOptions(),{data:t}),this.initData(),this.normalLayer.update(this.source.data),this.normalLayer.enableSelect(),this.normalLayer.show()}removeAllData(){this.resetData()}clear(){this.drawLayer.disableSelect(),this.drawLayer.disableEdit(),this.drawLayer.hide(),this.drawVertexLayer.hide(),this.hideOtherLayer(),this.emit(U.MODE_CHANGE,V.STATIC)}reset(){this.drawLayer.show(),this.drawVertexLayer.show(),this.showOtherLayer()}addVertex(t){throw new Error("\u5b50\u7c7b\u672a\u5b9e\u73b0\u8be5\u65b9\u6cd5")}onRemove(){this.destroy(),this.selectMode.destroy(),this.editMode.destroy(),this.measureMode.destroy(),this.source.destroy(),this.drawLayer.destroy(),this.drawVertexLayer.destroy(),this.normalLayer.destroy(),document.removeEventListener("keydown",this.addKeyDownEvent)}getDefaultOptions(){return{steps:64,units:"kilometers",cursor:"crosshair",editEnable:!0,selectEnable:!0,showFeature:!0,enableCustomDraw:!0}}initData(){return!1}addDrawPopup(t,e){var n=new i["Popup"]({anchor:"left",closeButton:!1}).setLnglat(t).setText("\u534a\u5f84:".concat(e.toFixed(2),"\u5343\u7c73"));this.scene.addPopup(n),this.popup=n}}class Yt extends Zt{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.startPoint=void 0,this.endPoint=void 0,this.pointFeatures=void 0,this.centerLayer=void 0,this.drawRulerLayer=void 0,Object(i["bindAll"])(["onMeasure"],this),this.type="circle",this.on(U.MODE_CHANGE,this.addDistanceLayerEvent),this.on(U.MODE_CHANGE,this.addAreaLayerEvent),this.setDrawMode(V.DRAW_Circle),this.drawRulerLayer=new K(this)}onMeasure(t){this.drawRulerLayer.update(Object(o["c"])([t]))}enableMeasure(){this.measureMode.on(U.MEASURE,this.onMeasure)}disableMeasure(){this.measureMode.off(U.MEASURE,this.onMeasure)}drawFinish(){return null}addDistanceLayerEvent(t){switch(t){case V.SIMPLE_SELECT:this.drawDistanceLayer.update(this.getDistanceLineString()),this.drawDistanceLayer.show();break;case V.STATIC:this.drawDistanceLayer.hide();break}}getDistanceLineString(){return Object(o["c"])([Object(o["g"])([[this.startPoint.lng,this.startPoint.lat],[this.endPoint.lng,this.endPoint.lat]])])}addAreaLayerEvent(t){switch(t){case V.SIMPLE_SELECT:this.drawAreaLayer.update(this.getAreaPolygon()),this.drawAreaLayer.show();break;case V.STATIC:this.drawAreaLayer.hide();break}}getAreaPolygon(){return this.source.data||Object(o["c"])([])}setCurrentFeature(t){this.currentFeature=t,this.pointFeatures=t.properties.pointFeatures,this.startPoint=t.properties.startPoint,this.endPoint=t.properties.endPoint,this.source.setFeatureActive(t)}removeLatestVertex(){return null}getDefaultOptions(){return Object(r["a"])(Object(r["a"])({},super.getDefaultOptions()),{},{title:"\u7ed8\u5236\u5706"})}onDragStart(t){"Drawing"!==this.drawStatus&&this.drawLayer.emit("unclick",null),this.startPoint=t.lngLat,this.setCursor("grabbing"),this.initCenterLayer(),this.centerLayer.setData([this.startPoint])}onDragging(t){this.endPoint=t.lngLat;var e=this.createFeature(),n=e.properties;this.drawLayer.update(Object(o["c"])([e])),this.drawVertexLayer.update(Object(o["c"])(n.pointFeatures)),this.drawDistanceLayer.update(this.getDistanceLineString()),this.drawAreaLayer.update(this.getAreaPolygon())}onDragEnd(){var t=this.createFeature("".concat(this.getUniqId())),e=t.properties;this.drawLayer.update(Object(o["c"])([t])),this.drawVertexLayer.update(Object(o["c"])(e.pointFeatures)),this.drawDistanceLayer.update(this.getDistanceLineString()),this.drawAreaLayer.update(this.getAreaPolygon()),this.emit(U.CREATE,this.currentFeature),this.emit(U.MODE_CHANGE,V.SIMPLE_SELECT),this.disable()}moveFeature(t){var e=at([this.currentFeature],t),n=at(this.pointFeatures,t);this.drawLayer.updateData(Object(o["c"])(e)),this.drawVertexLayer.updateData(Object(o["c"])(n)),this.drawDistanceLayer.update(this.getDistanceLineString()),this.drawAreaLayer.update(this.getAreaPolygon());var i=st([this.startPoint.lng,this.startPoint.lat],t);this.startPoint={lat:i[1],lng:i[0]};var a=st([this.endPoint.lng,this.endPoint.lat],t),s={lat:a[1],lng:a[0]};e[0].properties=Object(r["a"])(Object(r["a"])({},e[0].properties),{},{startPoint:this.startPoint,endPoint:s,pointFeatures:n}),this.centerLayer.setData([this.startPoint]),this.setCurrentFeature(e[0]);var u=Object(r["a"])({},e[0]);this.emit(U.CHANGE,u)}createFeature(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0",e=it([this.endPoint]),n=tt([this.startPoint.lng,this.startPoint.lat],[this.endPoint.lng,this.endPoint.lat],{pointFeatures:e.features,units:this.getOption("units"),steps:this.getOption("steps"),id:t});return this.setCurrentFeature(n),n}editFeature(t){this.endPoint=t;var e=this.createFeature(),n=e.properties;this.drawLayer.updateData(Object(o["c"])([e])),this.drawVertexLayer.updateData(Object(o["c"])(n.pointFeatures)),this.drawDistanceLayer.update(this.getDistanceLineString()),this.emit(U.CHANGE,Object(o["c"])([e]).features[0])}showOtherLayer(){var t,e;this.drawDistanceLayer.show(),this.centerLayer||this.initCenterLayer(),this.centerLayer.setData([null===(t=this.currentFeature)||void 0===t||null===(e=t.properties)||void 0===e?void 0:e.startPoint]),this.centerLayer.show()}hideOtherLayer(){this.currentFeature&&(this.centerLayer.hide(),this.drawDistanceLayer.hide())}initCenterLayer(){var t=this.getStyle("active").point,e=(new i["PointLayer"]).source([this.startPoint],{parser:{type:"json",x:"lng",y:"lat"}}).shape("circle").color(t.color).size(t.size).style(t.style);this.scene.addLayer(e),this.centerLayer=e}}var Kt=n("nWs5"),Jt=n("EMO4");function Qt(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Object(Jt["a"])(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}var $t=n("rRIJ"),te=n("TFir"),ee=n.n(te),ne=h.defaultRenderer();class re extends v{constructor(t){super(t),this.styleVariant="mid_point",Object(i["bindAll"])(["onMouseEnter","onClick","onMouseOut"],this)}update(t){this.removeLayers();var e=this.calcMidPointData(t),n=this.draw.getStyle(this.styleVariant);this.drawLayers=ne.renderFeature(e,n),this.addLayers(),this.enableEdit()}updateData(t){var e=this.calcMidPointData(t);this.drawLayers.forEach((t=>t.setData(e)))}enableEdit(){var t=this.drawLayers[0];t.on("mouseenter",this.onMouseEnter),t.on("mouseout",this.onMouseOut),t.on("click",this.onClick)}disableEdit(){var t=this.drawLayers[0];t.off("mouseenter",this.onMouseEnter),t.off("mouseout",this.onMouseOut),t.off("click",this.onClick)}onMouseEnter(t){this.draw.setCursor("pointer")}onMouseOut(t){this.draw.resetCursor()}onClick(t){this.draw.getDrawable()&&this.draw.addVertex(t.feature)}calcMidPointData(t){var e=[];return t.features.forEach(((n,r)=>{var i=n;if("line"!==this.draw.type||r!==t.features.length-1){var o=r!==t.features.length-1?t.features[r+1]:t.features[0],a=St(i,o);a.properties.id=r,e.push(a)}})),Object(o["c"])(e)}}class ie extends Zt{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.startPoint=void 0,this.endPoint=void 0,this.points=[],this.pointFeatures=void 0,this.drawMidVertexLayer=void 0,this.drawRulerLayer=void 0,Object(i["bindAll"])(["onMouseMove","onDblClick","onMeasure"],this),this.type="polygon",this.setDrawMode(V.DRAW_POLYGON),this.drawMidVertexLayer=new re(this),this.on(U.MODE_CHANGE,this.addMidLayerEvent),this.on(U.MODE_CHANGE,this.addDistanceLayerEvent),this.on(U.MODE_CHANGE,this.addAreaLayerEvent),this.drawRulerLayer=new K(this),this.drawDistanceLayer.showLine=!1,this.drawAreaLayer.showArea=!1}onMeasure(t){this.drawRulerLayer.update(Object(o["c"])([t]))}enableMeasure(){this.measureMode.on(U.MEASURE,this.onMeasure)}disableMeasure(){this.measureMode.off(U.MEASURE,this.onMeasure)}addDistanceLayerEvent(t){switch(t){case V.SIMPLE_SELECT:this.drawDistanceLayer.update(this.getDistanceLineString()),this.drawDistanceLayer.show();break;case V.STATIC:this.drawDistanceLayer.hide();break}}getDistanceLineString(){var t=[];if(this.currentFeature&&g(this.currentFeature)){var e=this.currentFeature,n=e.geometry.coordinates[0];t=n.map(((t,e)=>{if(n[e+1])return Object(o["g"])([t,n[e+1]])})).filter(Boolean)}return Object(o["c"])(t)}addAreaLayerEvent(t){switch(t){case V.SIMPLE_SELECT:this.drawAreaLayer.update(this.getAreaPolygon()),this.drawAreaLayer.show();break;case V.STATIC:this.drawAreaLayer.hide();break}}getAreaPolygon(){return this.currentFeature&&g(this.currentFeature)?Object(o["c"])([this.currentFeature]):Object(o["c"])([])}enable(){super.enable(),this.scene.on("mousemove",this.onMouseMove),this.scene.on("dblclick",this.onDblClick)}disable(){super.disable(),this.scene.off("mousemove",this.onMouseMove),this.scene.off("dblclick",this.onDblClick)}drawFinish(t){ot(this.points)||(this.points=this.points.reverse());var e=this.createFeature([...this.points]),n=e.properties;this.drawLayer.update(Object(o["c"])([e])),this.drawVertexLayer.update(Object(o["c"])(n.pointFeatures)),this.emit(U.CREATE,this.currentFeature),this.emit(U.MODE_CHANGE,V.SIMPLE_SELECT),this.points=[],this.disable()}addVertex(t){var e,n,r=t.properties.id,i=null===t||void 0===t||null===(e=t.geometry)||void 0===e?void 0:e.coordinates,a=Object($t["a"])(i,2),s=a[0],u=a[1],c=this.currentFeature,l=null===c||void 0===c||null===(n=c.geometry)||void 0===n?void 0:n.type,f=[];if("Polygon"===l){var p,h=null===c||void 0===c||null===(p=c.geometry)||void 0===p?void 0:p.coordinates;h[0].splice(r+1,0,i);for(var d=0;d<h[0].length-1;d++)f.push({lng:h[0][d][0],lat:h[0][d][1]})}else{var v,m=null===c||void 0===c||null===(v=c.geometry)||void 0===v?void 0:v.coordinates;m.splice(r+1,0,i);var g,y=Qt(m);try{for(y.s();!(g=y.n()).done;){var b=g.value;f.push({lng:b[0],lat:b[1]})}}catch(x){y.e(x)}finally{y.f()}}var _=it(f);this.pointFeatures=_.features,this.drawLayer.updateData(Object(o["c"])([c])),this.drawVertexLayer.updateData(_),this.drawMidVertexLayer.updateData(Object(o["c"])(this.pointFeatures)),c.properties.pointFeatures=_.features,this.setCurrentFeature(c),this.emit(U.ADD_POINT,{lng:s,lat:u},f)}removeLatestVertex(){if(this.points.length<2)this.resetDraw();else{this.points.pop();while(0!==this.points.length&&"custom"===(null===(t=this.points[this.points.length-1])||void 0===t?void 0:t.type)){var t;this.points.pop()}var e=this.createFeature(this.points);this.drawLayer.update(Object(o["c"])([e]));var n=this.points.length?[this.points[0]]:[];this.points.length>1&&n.push(this.points[this.points.length-1]),this.drawVertexLayer.update(Object(o["c"])(it(n).features)),this.onDraw()}}resetDraw(){this.points=[],this.drawLayer.destroy(),this.drawVertexLayer.destroy(),this.drawMidVertexLayer.destroy(),this.normalLayer.destroy(),this.disable(),this.enable(),this.drawStatus="Drawing"}getDefaultOptions(){return Object(r["a"])(Object(r["a"])({},super.getDefaultOptions()),{},{title:"\u7ed8\u5236\u591a\u8fb9\u5f62"})}onDragStart(t){return null}onDragging(t){return null}onDragEnd(){return null}isEqualsPrePoint(t){var e=this.points.length;if(0==e)return!1;var n=this.points[e-1];return n.lat===t.lat&&n.lng===t.lng}onClick(t){var e=this;return Object(Kt["a"])(ee.a.mark((function n(){var i,a,s,u,c,l;return ee.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.getDrawable()){n.next=2;break}return n.abrupt("return");case 2:if("Drawing"!==e.drawStatus&&e.drawLayer.emit("unclick",null),i=t.lngLat||t.lnglat,!e.isEqualsPrePoint(i)){n.next=6;break}return n.abrupt("return");case 6:if(a=e.getOption("customDraw"),e.endPoint=i,!(e.getOption("enableCustomDraw")&&a&&e.points.length>0)){n.next=16;break}return n.next=11,a(e.points[e.points.length-1],e.endPoint);case 11:for(s=n.sent,u=0;u<s.length-1;u++)e.points.push(Object(r["a"])(Object(r["a"])({},s[u]),{},{type:"custom"}));e.points.push(i),n.next=17;break;case 16:e.points.push(i);case 17:c=e.createFeature(e.points),l=it([e.points[0],e.endPoint]),e.drawLayer.update(Object(o["c"])([c])),e.drawVertexLayer.update(Object(o["c"])(l.features)),e.onDraw(),e.emit(U.ADD_POINT,i,e.points);case 23:case"end":return n.stop()}}),n)})))()}onMouseMove(t){var e=t.lngLat||t.lnglat;if(0!==this.points.length){var n=this.points.slice();n.push(e);var r=this.createFeature(n);this.drawLayer.update(Object(o["c"])([r]))}}onDblClick(t){var e=t.lngLat||t.lnglat;this.points.length<2||(this.isEqualsPrePoint(e)||this.points.push(e),this.drawFinish())}moveFeature(t){var e=at([this.currentFeature],t),n=at(this.pointFeatures,t);this.drawLayer.updateData(Object(o["c"])(e)),this.drawDistanceLayer.update(this.getDistanceLineString()),this.drawAreaLayer.update(this.getAreaPolygon()),this.drawVertexLayer.updateData(Object(o["c"])(n)),e[0].properties=Object(r["a"])(Object(r["a"])({},e[0].properties),{},{pointFeatures:n}),this.setCurrentFeature(e[0])}createFeature(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=it(t);this.pointFeatures=r.features;var i=nt(t,{id:e||this.getUniqId(),type:"polygon",active:n,pointFeatures:this.pointFeatures});return this.setCurrentFeature(i),i}editFeature(t){var e=this.currentVertex;if(e){var n,i=1*e.properties.id;e.geometry.coordinates=[t.lng,t.lat],this.pointFeatures[i].geometry.coordinates=[t.lng,t.lat],this.drawVertexLayer.updateData(Object(o["c"])(this.pointFeatures)),this.drawMidVertexLayer.updateData(Object(o["c"])(this.pointFeatures)),this.drawDistanceLayer.update(this.getDistanceLineString()),this.drawAreaLayer.update(this.getAreaPolygon()),this.editPolygonVertex(i,t),this.drawLayer.updateData(Object(o["c"])([this.currentFeature]));var a=this.currentFeature;a.properties=Object(r["a"])(Object(r["a"])({},null===(n=this.currentFeature)||void 0===n?void 0:n.properties),{},{pointFeatures:this.pointFeatures}),this.setCurrentFeature(a)}}onDraw(){this.drawVertexLayer.on("mousemove",(t=>{this.setCursor("pointer")})),this.drawVertexLayer.on("mouseout",(()=>{this.setCursor(this.getOption("cursor"))})),this.drawVertexLayer.on("click",(t=>{this.resetCursor(),this.drawFinish(t)}))}showOtherLayer(){return null}hideOtherLayer(){return null}addMidLayerEvent(t){switch(t){case V.DIRECT_SELECT:this.drawMidVertexLayer.update(Object(o["c"])(this.pointFeatures)),this.drawMidVertexLayer.show();break;case V.STATIC:this.drawMidVertexLayer.hide();break}}initData(){var t=[];return this.source.data.features.forEach((e=>{if("Polygon"===e.geometry.type){var n,r=e.geometry.coordinates[0].map((t=>({lng:t[0],lat:t[1]})));t.push(this.createFeature(r.slice(1),null===e||void 0===e||null===(n=e.properties)||void 0===n?void 0:n.id,!1))}})),this.source.data.features=t,!0}editPolygonVertex(t,e){var n,r=this.currentFeature,i=null===r||void 0===r||null===(n=r.geometry)||void 0===n?void 0:n.type;if("Polygon"===i){var a,s=null===r||void 0===r||null===(a=r.geometry)||void 0===a?void 0:a.coordinates;s[0][t]=[e.lng,e.lat],0===-t&&(s[0][s[0].length-1]=[e.lng,e.lat])}else{var u,c=null===r||void 0===r||null===(u=r.geometry)||void 0===u?void 0:u.coordinates;c[t]=[e.lng,e.lat]}this.setCurrentFeature(r),this.drawLayer.updateData(Object(o["c"])([this.currentFeature]))}}class oe extends ie{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.setDrawMode(V.DRAW_LINE_STRING),this.type="line"}getDefaultOptions(){return Object(r["a"])(Object(r["a"])({},super.getDefaultOptions()),{},{title:"\u7ed8\u5236\u7ebf"})}moveFeature(t){var e=at([this.currentFeature],t),n=at(this.pointFeatures,t);return this.drawLayer.updateData(Object(o["c"])(e)),this.drawVertexLayer.updateData(Object(o["c"])(n)),this.currentFeature=e[0],this.pointFeatures=n,this.currentFeature}createFeature(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=it(t);this.pointFeatures=r.features;var i=rt(t,{id:e||this.getUniqId(),type:"line",active:n,pointFeatures:this.pointFeatures});return this.setCurrentFeature(i),i}initData(){var t=[];return this.source.data.features.forEach((e=>{if(m(e)){var n,r=e.geometry.coordinates.map((t=>({lng:t[0],lat:t[1]})));t.push(this.createFeature(r,null===e||void 0===e||null===(n=e.properties)||void 0===n?void 0:n.id,!1))}})),this.source.data.features=t,!0}}class ae extends Zt{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.pointFeatures=void 0,this.type="point",this.setDrawMode(V.DRAW_POINT)}drawFinish(){this.emit(U.CREATE,this.currentFeature),this.emit(U.MODE_CHANGE,V.SIMPLE_SELECT),this.disable()}removeLatestVertex(){return null}getDefaultOptions(){return Object(r["a"])(Object(r["a"])({},super.getDefaultOptions()),{},{title:"\u7ed8\u5236\u70b9"})}onDragStart(t){return null}onDragging(t){return null}onDragEnd(){return null}onClick(t){if(this.getDrawable()){"Drawing"!==this.drawStatus&&this.drawLayer.emit("unclick",null);var e=t.lngLat||t.lnglat,n=this.createFeature(e);this.drawLayer.update(Object(o["c"])([n])),this.drawVertexLayer.update(Object(o["c"])([n])),this.drawFinish()}}moveFeature(t){var e=at([this.currentFeature],t);return this.drawLayer.updateData(Object(o["c"])(e)),this.drawVertexLayer.updateData(Object(o["c"])(e)),this.currentFeature=e[0],this.pointFeatures=e,this.currentFeature.properties=Object(r["a"])(Object(r["a"])({},this.currentFeature.properties),{},{pointFeatures:e}),this.currentFeature}createFeature(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Object(o["h"])([t.lng,t.lat],{id:e||this.getUniqId(),type:"point",active:n,pointFeatures:[Object(o["h"])([t.lng,t.lat])]});return this.setCurrentFeature(r),r}initData(){var t=[];return this.source.data.features.forEach((e=>{if("Point"===e.geometry.type){var n,r={lng:e.geometry.coordinates[0],lat:e.geometry.coordinates[1]};t.push(this.createFeature(r,null===e||void 0===e||null===(n=e.properties)||void 0===n?void 0:n.id,!1))}})),this.source.data.features=t,!0}editFeature(t){this.createFeature(t)}showOtherLayer(){return null}hideOtherLayer(){return null}}class se extends Yt{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.type="rect",this.setDrawMode(V.DRAW_Rect)}drawFinish(){return null}initData(){var t,e;if("rect"===(null===(t=this.source)||void 0===t||null===(e=t.initData)||void 0===e?void 0:e.type)){var n=this.source.initData.features;return this.startPoint={lng:n[0][0],lat:n[0][1]},this.endPoint={lng:n[1][0],lat:n[1][1]},this.source.data={features:[this.createFeature("0",!1)],type:"FeatureCollection"},!0}return!1}getDefaultOptions(){return Object(r["a"])(Object(r["a"])({},super.getDefaultOptions()),{},{title:"\u7ed8\u5236\u77e9\u5f62"})}createFeature(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0",e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=it([this.startPoint,this.endPoint]),r=et([this.startPoint.lng,this.startPoint.lat],[this.endPoint.lng,this.endPoint.lat],{id:t,active:e,pointFeatures:n.features});return this.setCurrentFeature(r),r}}class ue extends ie{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.infoPopup=void 0,this.isAreaClosed=!1,this.setDrawMode(V.RULER),this.type="line",this.infoPopup=new i["Popup"]({anchor:"left",closeButton:!1,closeOnClick:!1}),this.drawRulerLayer=new K(this),this.scene.addPopup(this.infoPopup),this.drawLayer.styleVariant="ruler",this.drawVertexLayer.styleVariant="ruler",this.drawMidVertexLayer.styleVariant="ruler",this.drawDistanceLayer.styleVariant="ruler",this.enableMeasure()}enable(){this.drawRulerLayer.destroy(),this.drawMidVertexLayer.destroy(),this.drawDistanceLayer.destroy(),this.drawLayer.destroy(),this.drawVertexLayer.destroy(),super.enable()}resetDraw(){super.resetDraw()}getDefaultOptions(){return Object(r["a"])(Object(r["a"])({},super.getDefaultOptions()),{},{editEnable:!1,title:"\u6d4b\u8ddd"})}drawFinish(t){if(t){var e,n,r=(null===(e=t.feature)||void 0===e||null===(n=e.geometry)||void 0===n?void 0:n.coordinates)||[];this.isEqualsFirstPoint({lng:r[0],lat:r[1]})&&(this.isAreaClosed=!0)}var i=this.createFeature([...this.points]),a=i.properties;this.drawLayer.update(Object(o["c"])([i])),this.drawVertexLayer.update(Object(o["c"])(a.pointFeatures)),this.emit(U.CREATE,this.currentFeature),this.emit(U.MODE_CHANGE,V.SIMPLE_SELECT),this.points=[],this.isAreaClosed=!1,this.infoPopup.close(),this.disable()}onMouseMove(t){this.infoPopup.open(),super.onMouseMove(t);var e=t.lngLat||t.lnglat;this.updatePopup(e)}isEqualsFirstPoint(t){var e=this.points.length;if(e<=1)return!1;var n=this.points[0];return n.lat===t.lat&&n.lng===t.lng}updatePopup(t){if(this.infoPopup.setLnglat(t),0===this.points.length)return this.infoPopup.setText("\u8bf7\u70b9\u51fb\u5bf9\u5e94\u4f4d\u7f6e\u589e\u52a0\u8282\u70b9");var e,n=this.points[this.points.length-1],r=H([t.lng,t.lat],[n.lng,n.lat]);e=1===this.points.length?"\u70b9\u51fb\u8fde\u7eed\u6d4b\u8ddd":2===this.points.length?"\u53cc\u51fb\u7ed3\u675f\u7ebf\u6bb5\u7ed8\u5236":"\u6309\u8d77\u59cb\u70b9\u95ed\u5408\u7ebf\u6bb5",this.infoPopup.setText(r+e)}moveFeature(t){return this.currentFeature}createFeature(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.isAreaClosed){var r=it(t);this.pointFeatures=r.features;var i=nt(t,{id:e||this.getUniqId(),type:"polygon",active:n,pointFeatures:this.pointFeatures});return this.setCurrentFeature(i),i}var o=it(t);this.pointFeatures=o.features;var a=rt(t,{id:e||this.getUniqId(),type:"line",active:n,pointFeatures:this.pointFeatures});return this.setCurrentFeature(a),a}}class ce extends Zt{drawFinish(){}moveFeature(t){}editFeature(t){}hideOtherLayer(){}removeLatestVertex(){}showOtherLayer(){}constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.startPoint=void 0,this.endPoint=void 0,this.drawDistanceLayer=new Wt(this),this.drawLayer.styleVariant="boxSelect"}onDragStart(t){"Drawing"!==this.drawStatus&&this.drawLayer.emit("unclick",null),this.startPoint=t.lngLat,this.setCursor("crosshair")}onDragging(t){this.endPoint=t.lngLat;var e=this.createFeature();this.drawLayer.update(Object(o["c"])([e]))}onDragEnd(){this.drawLayer.update(Object(o["c"])([])),this.emit(U.BOX_SELECT,{startPoint:this.startPoint,endPoint:this.endPoint}),this.disable()}createFeature(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0",e=et([this.startPoint.lng,this.startPoint.lat],[this.endPoint.lng,this.endPoint.lat],{id:t,pointFeatures:[]});return e}}n("3CNB");var le={point:ae,line:oe,polygon:ie,circle:Yt,rect:se,ruler:ue,multiSelect:ce,boxSelect:ce};class fe extends i["Control"]{constructor(t,e){super(e),this.draw={},this.currentDraw=void 0,this.scene=void 0,this.onButtonClick=(t,e)=>{for(var n in this.draw)n===t?this.draw[n].enable():this.draw[n].disable()},this.onDeleteMode=(t,e)=>{if(e.stopPropagation(),this.currentDraw)return this.currentDraw.deleteMode.enable(),this.emit("draw.delete"),!1},this.onModeChange=(t,e)=>{e===V.SIMPLE_SELECT&&(this.currentDraw=this.draw[t]),e===V.STATIC&&this.mapsService.setMapStatus({dragEnable:!0})},this.scene=t}getDefault(){return{position:i["PositionType"].TOPLEFT,controls:{point:!0,line:!0,polygon:!0,rect:!0,circle:!0,delete:!0},name:"draw"}}onAdd(){var t=this.controlOption.layout,e="l7-control-draw "+t,n=this.controlOption,r=n.controls,o=i["DOM"].create("div",e);return this.addControls(r,o),this.addControlEvent(),o}onRemove(){for(var t in this.draw)this.draw[t]&&this.draw[t].destroy()}getDraw(t){var e=this.controlOption,n=e.controls;return n[t]?this.draw[t]:null}getAllData(){var t={};for(var e in this.draw)this.draw[e]&&(t[e]=this.draw[e].getData());return t}removeAllData(){for(var t in this.draw)this.draw[t]&&this.draw[t].removeAllData()}addControls(t,e){var n=this.controlOption,r=n.style;for(var i in t)if(le[i]&&!1!==t[i]){var a=Object(o["e"])(t[i])?t[i]:{};r&&(a.style=r);var s=new le[i](this.scene,a);s.on(U.MODE_CHANGE,this.onModeChange.bind(null,i)),this.draw[i]=s,this.createButton(s.title,"draw-"+i,e,"click",this.onButtonClick.bind(null,i))}else if("delete"===i&&!1!==t[i]){var u=new qt(this.scene);u.on(U.MODE_CHANGE,this.onModeChange.bind(null,i)),this.createButton(u.title,"draw-"+i,e,"mousedown",this.onDeleteMode.bind(null,i))}}addControlEvent(){var t=this,e=function(e){t.draw[e]&&[U.CREATE,U.UPDATE,U.DELETE,U.BOX_SELECT,U.MULTI_SELECT].forEach((n=>{t.draw[e].on(n,(r=>{t.emit(n,{drawType:e,feature:r})}))}))};for(var n in this.draw)e(n)}createButton(t,e,n,r,o){var a=i["DOM"].create("button",e,n);return a.title=t,a.addEventListener(r,o,!1),a}}},"/DyB":function(t,e,n){var r=n("dhvM"),i=n("TdPr");function o(t){return r((function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;a=t.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),e=Object(e);while(++r<o){var u=n[r];u&&t(e,u,r,a)}return e}))}t.exports=o},"/Fc6":function(t,e,n){"use strict";var r="function"===typeof Symbol&&Symbol["for"],i=r?Symbol["for"]("react.element"):60103,o=r?Symbol["for"]("react.portal"):60106,a=r?Symbol["for"]("react.fragment"):60107,s=r?Symbol["for"]("react.strict_mode"):60108,u=r?Symbol["for"]("react.profiler"):60114,c=r?Symbol["for"]("react.provider"):60109,l=r?Symbol["for"]("react.context"):60110,f=r?Symbol["for"]("react.async_mode"):60111,p=r?Symbol["for"]("react.concurrent_mode"):60111,h=r?Symbol["for"]("react.forward_ref"):60112,d=r?Symbol["for"]("react.suspense"):60113,v=r?Symbol["for"]("react.suspense_list"):60120,m=r?Symbol["for"]("react.memo"):60115,g=r?Symbol["for"]("react.lazy"):60116,y=r?Symbol["for"]("react.block"):60121,b=r?Symbol["for"]("react.fundamental"):60117,_=r?Symbol["for"]("react.responder"):60118,x=r?Symbol["for"]("react.scope"):60119;function w(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type,t){case f:case p:case a:case u:case s:case d:return t;default:switch(t=t&&t.$$typeof,t){case l:case h:case g:case m:case c:return t;default:return e}}case o:return e}}}function E(t){return w(t)===p}e.AsyncMode=f,e.ConcurrentMode=p,e.ContextConsumer=l,e.ContextProvider=c,e.Element=i,e.ForwardRef=h,e.Fragment=a,e.Lazy=g,e.Memo=m,e.Portal=o,e.Profiler=u,e.StrictMode=s,e.Suspense=d,e.isAsyncMode=function(t){return E(t)||w(t)===f},e.isConcurrentMode=E,e.isContextConsumer=function(t){return w(t)===l},e.isContextProvider=function(t){return w(t)===c},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===i},e.isForwardRef=function(t){return w(t)===h},e.isFragment=function(t){return w(t)===a},e.isLazy=function(t){return w(t)===g},e.isMemo=function(t){return w(t)===m},e.isPortal=function(t){return w(t)===o},e.isProfiler=function(t){return w(t)===u},e.isStrictMode=function(t){return w(t)===s},e.isSuspense=function(t){return w(t)===d},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===a||t===p||t===u||t===s||t===d||t===v||"object"===typeof t&&null!==t&&(t.$$typeof===g||t.$$typeof===m||t.$$typeof===c||t.$$typeof===l||t.$$typeof===h||t.$$typeof===b||t.$$typeof===_||t.$$typeof===x||t.$$typeof===y)},e.typeOf=w},"/Izz":function(t,e){t.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},"/LZe":function(t,e,n){"use strict";n.d(e,"o",(function(){return ea})),n.d(e,"q",(function(){return ra})),n.d(e,"p",(function(){return ia})),n.d(e,"s",(function(){return $o})),n.d(e,"t",(function(){return ta})),n.d(e,"n",(function(){return u})),n.d(e,"u",(function(){return ba})),n.d(e,"b",(function(){return pi})),n.d(e,"c",(function(){return ca})),n.d(e,"k",(function(){return la})),n.d(e,"m",(function(){return fa})),n.d(e,"a",(function(){return pa})),n.d(e,"h",(function(){return xa})),n.d(e,"e",(function(){return Ft})),n.d(e,"f",(function(){return se})),n.d(e,"d",(function(){return wa})),n.d(e,"l",(function(){return Ea})),n.d(e,"j",(function(){return _a})),n.d(e,"g",(function(){return ee})),n.d(e,"i",(function(){return or})),n.d(e,"r",(function(){return de}));n("BLox");var r=n("2pGt"),i=n.n(r),o=n("YcyD"),a=n("UHDP"),s=n.n(a),u={IEventEmitter:Symbol["for"]("IEventEmitter"),ISceneService:Symbol["for"]("ISceneService"),IGlobalConfigService:Symbol["for"]("IGlobalConfigService"),ICameraService:Symbol["for"]("ICameraService"),ICoordinateSystemService:Symbol["for"]("ICoordinateSystemService"),ILayerService:Symbol["for"]("ILayerService"),ILayerMappingService:Symbol["for"]("ILayerMappingService"),ILayerStyleService:Symbol["for"]("ILayerStyleService"),IMapService:Symbol["for"]("IMapService"),IMarkerService:Symbol["for"]("IMarkerService"),IPopupService:Symbol["for"]("PopupService"),IFactoryMapService:Symbol["for"]("Factory<IMapService>"),IRendererService:Symbol["for"]("IRendererService"),IShaderModuleService:Symbol["for"]("IShaderModuleService"),IIconService:Symbol["for"]("IIconService"),IFontService:Symbol["for"]("IFontService"),IInteractionService:Symbol["for"]("IInteractionService"),IPickingService:Symbol["for"]("IPickingService"),IControlService:Symbol["for"]("IControlService"),IStyleAttributeService:Symbol["for"]("IStyleAttributeService"),ILayer:Symbol["for"]("ILayer"),ILayerPlugin:Symbol["for"]("ILayerPlugin"),INormalPass:Symbol["for"]("INormalPass"),IPostProcessor:Symbol["for"]("IPostProcessor"),IPostProcessingPass:Symbol["for"]("IPostProcessingPass"),IFactoryPostProcessingPass:Symbol["for"]("Factory<IPostProcessingPass>"),IFactoryNormalPass:Symbol["for"]("Factory<IFactoryNormalPass>"),IMultiPassRenderer:Symbol["for"]("IMultiPassRenderer"),SceneID:Symbol["for"]("SceneID"),MapConfig:Symbol["for"]("MapConfig")},c=n("txMq"),l=n.n(c),f=n("RgF4"),p=n.n(f),h=n("Xrqc"),d=n.n(h),v=n("IyCX"),m=n("gFQz"),g=n.n(m);function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){d()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=x(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function x(t,e){if(t){if("string"===typeof t)return w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(t,e):void 0}}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var E,S,C=30;function T(t){var e=t.characterSet,n=t.getFontWidth,r=t.fontHeight,i=t.buffer,o=t.maxCanvasWidth,a=t.mapping,s=void 0===a?{}:a,u=t.xOffset,c=void 0===u?0:u,l=t.yOffset,f=void 0===l?0:l,p=0,h=c;Array.from(e).forEach((function(t,e){if(!s[t]){var r=n(t,e);h+C>o&&(h=0,p++),s[t]={x:h,y:f+p*C,width:C,height:C,advance:r},h+=C}}));var d=r+2*i;return{mapping:s,xOffset:h,yOffset:f+p*d,canvasHeight:k(f+(p+1)*d)}}function O(t,e,n){var r,i=0,o=0,a=0,s=[],u={},c=_(t);try{for(c.s();!(r=c.n()).done;){var l=r.value;if(!u[l.id]){var f=l.size;i+f+e>n&&(A(u,s,o),i=0,o=a+o+e,a=0,s=[]),s.push({icon:l,xOffset:i}),i=i+f+e,a=Math.max(a,f)}}}catch(h){c.e(h)}finally{c.f()}s.length>0&&A(u,s,o);var p=k(a+o+e);return{mapping:u,canvasHeight:p}}function A(t,e,n){var r,i=_(e);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.icon,s=o.xOffset;t[a.id]=b(b({},a),{},{x:s,y:n,image:a.image,width:a.width,height:a.height})}}catch(u){i.e(u)}finally{i.f()}}function k(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function M(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=P(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function P(t,e){if(t){if("string"===typeof t)return I(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(t,e):void 0}}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){d()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var D=W(),N="sans-serif",j="normal",F=24,z=3,B=.25,U=8,V=1024,q=1,G=1,H=3;function W(){for(var t=[],e=32;e<128;e++)t.push(String.fromCharCode(e));return t}function X(t,e,n,r){t.font="".concat(r," ").concat(n,"px ").concat(e),t.fillStyle="black",t.textBaseline="middle"}function Z(t,e){for(var n=0;n<t.length;n++)e.data[4*n+3]=t[n]}var Y,K,J=(E=Object(o["injectable"])(),E(S=function(){function t(){l()(this,t),d()(this,"fontAtlas",void 0),d()(this,"iconFontMap",void 0),d()(this,"iconFontGlyphs",{}),d()(this,"fontOptions",void 0),d()(this,"key",void 0),d()(this,"cache",new v["c"](H))}return p()(t,[{key:"scale",get:function(){return G}},{key:"canvas",get:function(){var t=this.cache.get(this.key);return t&&t.data}},{key:"mapping",get:function(){var t=this.cache.get(this.key);return t&&t.mapping}},{key:"init",value:function(){this.cache.clear(),this.fontOptions={fontFamily:N,fontWeight:j,characterSet:D,fontSize:F,buffer:z,sdf:!0,cutoff:B,radius:U,iconfont:!1},this.key="",this.iconFontMap=new Map}},{key:"addIconGlyphs",value:function(t){var e=this;t.forEach((function(t){e.iconFontGlyphs[t.name]=t.unicode}))}},{key:"addIconFont",value:function(t,e){this.iconFontMap.set(t,e)}},{key:"getIconFontKey",value:function(t){return this.iconFontMap.get(t)||t}},{key:"getGlyph",value:function(t){return this.iconFontGlyphs[t]?String.fromCharCode(parseInt(this.iconFontGlyphs[t],16)):""}},{key:"setFontOptions",value:function(t){this.fontOptions=R(R({},this.fontOptions),t),this.key=this.getKey();var e=this.getNewChars(this.key,this.fontOptions.characterSet),n=this.cache.get(this.key);if(!n||0!==e.length){var r=this.generateFontAtlas(this.key,e,n);this.fontAtlas=r,this.cache.set(this.key,r)}}},{key:"destroy",value:function(){this.cache.clear(),this.iconFontMap.clear()}},{key:"generateFontAtlas",value:function(t,e,n){var r=this.fontOptions,i=r.fontFamily,o=r.fontWeight,a=r.fontSize,s=r.buffer,u=r.sdf,c=r.radius,l=r.cutoff,f=r.iconfont,p=n&&n.data;p||(p=document.createElement("canvas"),p.width=V);var h=p.getContext("2d");X(h,i,a,o);var d=T(R({getFontWidth:function(t){return h.measureText(t).width},fontHeight:a*G,buffer:s,characterSet:e,maxCanvasWidth:V},n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset})),v=d.mapping,m=d.canvasHeight,y=d.xOffset,b=d.yOffset,_=h.getImageData(0,0,p.width,p.height);if(p.height=m,h.putImageData(_,0,0),X(h,i,a,o),u){var x,w=new g.a(a,s,c,l,i,o),E=h.getImageData(0,0,w.size,w.size),S=M(e);try{for(S.s();!(x=S.n()).done;){var C=x.value;if(f){var O=String.fromCharCode(parseInt(C.replace("&#x","").replace(";",""),16)),A=w.draw(O);Z(A,E)}else Z(w.draw(C),E);h.putImageData(E,v[C].x,v[C].y)}}catch(L){S.e(L)}finally{S.f()}}else{var k,P=M(e);try{for(P.s();!(k=P.n()).done;){var I=k.value;h.fillText(I,v[I].x,v[I].y+a*q)}}catch(L){P.e(L)}finally{P.f()}}return{xOffset:y,yOffset:b,mapping:v,data:p,width:p.width,height:p.height}}},{key:"getKey",value:function(){return"key"}},{key:"getNewChars",value:function(t,e){var n=this.cache.get(t);if(!n)return e;var r=[],i=n.mapping,o=new Set(Object.keys(i)),a=new Set(e);return a.forEach((function(t){o.has(t)||r.push(t)})),r}}]),t}())||S),Q=n("cZYw"),$=n.n(Q),tt=n("r9+l"),et=n.n(tt),nt=n("hbjN"),rt=n.n(nt),it=n("fI5W"),ot=n.n(it);function at(t){var e=st();return function(){var n,r=ot()(t);if(e){var i=ot()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rt()(this,n)}}function st(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var ut,ct,lt,ft,pt=3,ht=1024,dt=64,vt=(Y=Object(o["injectable"])(),Y(K=function(t){et()(n,t);var e=at(n);function n(){var t;l()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),d()($()(t),"canvasHeight",128),d()($()(t),"texture",void 0),d()($()(t),"canvas",void 0),d()($()(t),"iconData",void 0),d()($()(t),"iconMap",void 0),d()($()(t),"ctx",void 0),d()($()(t),"loadingImageCount",0),t}return p()(n,[{key:"isLoading",value:function(){return 0===this.loadingImageCount}},{key:"init",value:function(){this.iconData=[],this.iconMap={},this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function(t,e){var n=this,r=new Image;if(this.loadingImageCount++,this.hasImage(t))throw new Error("Image Id already exists");this.iconData.push({id:t,size:dt}),this.updateIconMap(),this.loadImage(e).then((function(e){r=e;var i=n.iconData.find((function(e){return e.id===t}));i&&(i.image=r,i.width=r.width,i.height=r.height),n.update()}))}},{key:"getTexture",value:function(){return this.texture}},{key:"getIconMap",value:function(){return this.iconMap}},{key:"getCanvas",value:function(){return this.canvas}},{key:"hasImage",value:function(t){return this.iconMap.hasOwnProperty(t)}},{key:"removeImage",value:function(t){this.hasImage(t)&&(this.iconData=this.iconData.filter((function(e){return e.id!==t})),delete this.iconMap[t],this.update())}},{key:"destroy",value:function(){this.iconData=[],this.iconMap={}}},{key:"update",value:function(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,0===this.loadingImageCount&&this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function(){var t=this;this.canvas.width=ht,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach((function(e){var n=t.iconMap[e],r=n.x,i=n.y,o=n.image,a=n.width,s=void 0===a?64:a,u=n.height,c=void 0===u?64:u,l=Math.max(s,c),f=l/dt,p=c/f,h=s/f;o&&t.ctx.drawImage(o,r+(dt-h)/2,i+(dt-p)/2,h,p)}))}},{key:"updateIconMap",value:function(){var t=O(this.iconData,pt,ht),e=t.mapping,n=t.canvasHeight;this.iconMap=e,this.canvasHeight=n}},{key:"loadImage",value:function(t){return new Promise((function(e,n){if(t instanceof HTMLImageElement)e(t);else{var r=new Image;r.crossOrigin="anonymous",r.onload=function(){e(r)},r.onerror=function(){n(new Error("Could not load image at "+t))},r.src=t instanceof File?URL.createObjectURL(t):t}}))}}]),n}(r["EventEmitter"]))||K),mt=n("m5Te"),gt=n.n(mt),yt=n("99LQ"),bt=(ut=Object(o["injectable"])(),ut(ct=function(){function t(){l()(this,t),d()(this,"viewport",void 0),d()(this,"overridedViewProjectionMatrix",void 0),d()(this,"jitteredViewProjectionMatrix",void 0),d()(this,"jitteredProjectionMatrix",void 0),d()(this,"viewMatrixInverse",void 0),d()(this,"cameraPosition",void 0)}return p()(t,[{key:"init",value:function(){}},{key:"update",value:function(t){this.viewport=t,this.viewMatrixInverse=yt["b"].create(),yt["b"].invert(this.viewMatrixInverse,t.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}},{key:"getProjectionMatrix",value:function(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}},{key:"getViewMatrix",value:function(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.getViewProjectionMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function(){var t=this.viewport.getCenter(),e=gt()(t,2),n=e[0],r=e[1];return[n,r]}},{key:"getFocalDistance",value:function(){return this.viewport.getFocalDistance()}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"projectFlat",value:function(t,e){return this.viewport.projectFlat(t,e)}},{key:"setViewProjectionMatrix",value:function(t){this.overridedViewProjectionMatrix=t}},{key:"jitterProjectionMatrix",value:function(t,e){var n=yt["b"].fromTranslation(yt["b"].create(),[t,e,0]);this.jitteredProjectionMatrix=yt["b"].multiply(yt["b"].create(),n,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=yt["b"].multiply(yt["b"].create(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}]),t}())||ct);function _t(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=xt(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function xt(t,e){if(t){if("string"===typeof t)return wt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wt(t,e):void 0}}function wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Et,St,Ct,Tt,Ot,At,kt=(lt=Object(o["injectable"])(),lt(ft=function(){function t(){l()(this,t),d()(this,"container",void 0),d()(this,"controlCorners",void 0),d()(this,"controlContainer",void 0),d()(this,"scene",void 0),d()(this,"mapsService",void 0),d()(this,"controls",[]),d()(this,"unAddControls",[])}return p()(t,[{key:"init",value:function(t,e){this.container=t.container,this.scene=e,this.mapsService=e.get(u.IMapService),this.initControlPos()}},{key:"addControl",value:function(t,e){var n=e.get(u.IMapService);n.map?(t.addTo(this.scene),this.controls.push(t)):this.unAddControls.push(t)}},{key:"getControlByName",value:function(t){return this.controls.find((function(e){return e.controlOption.name===t}))}},{key:"removeControl",value:function(t){var e=this.controls.indexOf(t);return e>-1&&this.controls.splice(e,1),t.remove(),this}},{key:"addControls",value:function(){var t=this;this.unAddControls.forEach((function(e){e.addTo(t.scene),t.controls.push(e)})),this.unAddControls=[]}},{key:"destroy",value:function(){var t,e=_t(this.controls);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.remove()}}catch(r){e.e(r)}finally{e.f()}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function(){var t=this.controlCorners={},e="l7-",n=this.controlContainer=v["b"].create("div",e+"control-container",this.container);function r(r,i){var o=e+r+" "+e+i;t[r+i]=v["b"].create("div",o,n)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")}},{key:"clearControlPos",value:function(){for(var t in this.controlCorners)this.controlCorners[t]&&v["b"].remove(this.controlCorners[t]);this.controlContainer&&v["b"].remove(this.controlContainer),delete this.controlCorners,delete this.controlContainer}}]),t}())||ft),Mt=(Et=Object(o["injectable"])(),Et(St=function(){function t(){l()(this,t),d()(this,"container",void 0),d()(this,"scene",void 0),d()(this,"mapsService",void 0),d()(this,"markers",[]),d()(this,"markerLayers",[]),d()(this,"unAddMarkers",[]),d()(this,"unAddMarkerLayers",[])}return p()(t,[{key:"addMarkerLayer",value:function(t){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(t),t.addTo(this.scene)):this.unAddMarkerLayers.push(t)}},{key:"removeMarkerLayer",value:function(t){t.destroy(),this.markerLayers.indexOf(t);var e=this.markerLayers.indexOf(t);e>-1&&this.markerLayers.splice(e,1)}},{key:"addMarker",value:function(t){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(t),t.addTo(this.scene)):this.unAddMarkers.push(t)}},{key:"addMarkers",value:function(){var t=this;this.unAddMarkers.forEach((function(e){e.addTo(t.scene),t.markers.push(e)})),this.unAddMarkers=[]}},{key:"addMarkerLayers",value:function(){var t=this;this.unAddMarkerLayers.forEach((function(e){t.markerLayers.push(e),e.addTo(t.scene)})),this.unAddMarkers=[]}},{key:"removeMarker",value:function(t){t.remove(),this.markers.indexOf(t);var e=this.markers.indexOf(t);e>-1&&this.markers.splice(e,1)}},{key:"removeAllMarkers",value:function(){this.destroy()}},{key:"init",value:function(t){this.scene=t,this.mapsService=t.get(u.IMapService)}},{key:"destroy",value:function(){this.markers.forEach((function(t){t.remove()})),this.markers=[],this.markerLayers.forEach((function(t){t.destroy()})),this.markerLayers=[]}},{key:"removeMakerLayerMarker",value:function(t){t.destroy()}}]),t}())||St),Pt=(Ct=Object(o["injectable"])(),Ct(Tt=function(){function t(){l()(this,t),d()(this,"scene",void 0),d()(this,"popup",void 0),d()(this,"mapsService",void 0),d()(this,"unAddPopup",void 0)}return p()(t,[{key:"removePopup",value:function(t){t.remove()}},{key:"destroy",value:function(){this.popup.remove()}},{key:"addPopup",value:function(t){this.popup&&this.popup.remove(),this.mapsService.map&&this.mapsService.getMarkerContainer()?(t.addTo(this.scene),this.popup=t):this.unAddPopup=t}},{key:"initPopup",value:function(){this.unAddPopup&&(this.addPopup(this.unAddPopup),this.unAddPopup=null)}},{key:"init",value:function(t){this.scene=t,this.mapsService=t.get(u.IMapService)}}]),t}())||Tt),It=n("Ixdt"),Lt=n.n(It),Rt={MapToken:"\u60a8\u6b63\u5728\u4f7f\u7528 Demo\u6d4b\u8bd5\u5730\u56fetoken\uff0c\u5982\u679c\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u53bb\u5bf9\u5e94\u5730\u56fe\u8bf7\u6ce8\u518cToken",SDK:"\u8bf7\u786e\u8ba4\u5f15\u5165\u4e86mapbox-gl api\u4e14\u5728L7\u4e4b\u524d\u5f15\u5165"},Dt=Rt;function Nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function jt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Nt(Object(n),!0).forEach((function(e){d()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ft,zt={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},Bt={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",selectColor:"blue",enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0},Ut=(Ot=Object(o["injectable"])(),Ot(At=function(){function t(){l()(this,t),d()(this,"sceneConfigCache",{}),d()(this,"layerConfigCache",{})}return p()(t,[{key:"getSceneConfig",value:function(t){return this.sceneConfigCache[t]}},{key:"getSceneWarninfo",value:function(t){return Dt[t]}},{key:"setSceneConfig",value:function(t,e){this.sceneConfigCache[t]=jt(jt({},zt),e)}},{key:"getLayerConfig",value:function(t){return this.layerConfigCache[t]}},{key:"setLayerConfig",value:function(t,e,n){this.layerConfigCache[e]=jt({},Lt()({},this.sceneConfigCache[t],Bt,n))}},{key:"clean",value:function(){this.sceneConfigCache={},this.layerConfigCache={}}}]),t}())||At),Vt=n("aDRW"),qt=n.n(Vt),Gt=n("+ti2"),Ht=n.n(Gt),Wt=(n("+ynn"),Math.PI/180),Xt=512,Zt=4003e4;function Yt(t){var e=t.latitude,n=void 0===e?0:e,r=t.zoom,i=void 0===r?0:r,o=t.scale,a=t.highPrecision,s=void 0!==a&&a,u=t.flipY,c=void 0!==u&&u;o=void 0!==o?o:Math.pow(2,i);var l={},f=Xt*o,p=Math.cos(n*Wt),h=f/360,d=h/p,v=f/Zt/p;if(l.pixelsPerMeter=[v,-v,v],l.metersPerPixel=[1/v,-1/v,1/v],l.pixelsPerDegree=[h,-d,v],l.degreesPerPixel=[1/h,-1/d,1/v],s){var m=Wt*Math.tan(n*Wt)/p,g=h*m/2,y=f/Zt*m,b=y/d*v;l.pixelsPerDegree2=[0,-g,y],l.pixelsPerMeter2=[b,0,b],c&&(l.pixelsPerDegree2[1]=-l.pixelsPerDegree2[1],l.pixelsPerMeter2[1]=-l.pixelsPerMeter2[1])}return c&&(l.pixelsPerMeter[1]=-l.pixelsPerMeter[1],l.metersPerPixel[1]=-l.metersPerPixel[1],l.pixelsPerDegree[1]=-l.pixelsPerDegree[1],l.degreesPerPixel[1]=-l.degreesPerPixel[1]),l}(function(t){t[t["LNGLAT"]=1]="LNGLAT",t[t["LNGLAT_OFFSET"]=2]="LNGLAT_OFFSET",t[t["VECTOR_TILE"]=3]="VECTOR_TILE",t[t["IDENTITY"]=4]="IDENTITY",t[t["P20"]=5]="P20",t[t["P20_OFFSET"]=6]="P20_OFFSET",t[t["METER_OFFSET"]=7]="METER_OFFSET",t[t["P20_2"]=8]="P20_2"})(Ft||(Ft={}));var Kt,Jt,Qt,$t,te,ee,ne,re,ie,oe,ae,se={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter",Mvp:"u_Mvp"},ue=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],ce=(Kt=Object(o["injectable"])(),Jt=Object(o["inject"])(u.ICameraService),Kt(($t=function(){function t(){l()(this,t),d()(this,"needRefresh",!0),qt()(this,"cameraService",te,this),d()(this,"coordinateSystem",void 0),d()(this,"viewportCenter",void 0),d()(this,"viewportCenterProjection",void 0),d()(this,"pixelsPerDegree",void 0),d()(this,"pixelsPerDegree2",void 0),d()(this,"pixelsPerMeter",void 0)}return p()(t,[{key:"refresh",value:function(){var t=this.cameraService.getZoom(),e=this.cameraService.getZoomScale(),n=this.cameraService.getCenter(),r=Yt({latitude:n[1],zoom:t}),i=r.pixelsPerMeter,o=r.pixelsPerDegree;this.viewportCenter=n,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=i,this.pixelsPerDegree=o,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===Ft.LNGLAT||this.coordinateSystem===Ft.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===Ft.LNGLAT_OFFSET?this.calculateLnglatOffset(n,t):this.coordinateSystem===Ft.P20_OFFSET&&this.calculateLnglatOffset(n,t,e,!0),this.needRefresh=!1}},{key:"getCoordinateSystem",value:function(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function(t){this.coordinateSystem=t}},{key:"getViewportCenter",value:function(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function(t,e,n,r){var i=Yt({latitude:t[1],zoom:e,scale:n,flipY:r,highPrecision:!0}),o=i.pixelsPerMeter,a=i.pixelsPerDegree,s=i.pixelsPerDegree2,u=this.cameraService.getViewMatrix(),c=this.cameraService.getProjectionMatrix(),l=yt["b"].multiply([],c,u),f=this.cameraService.projectFlat([Math.fround(t[0]),Math.fround(t[1])],Math.pow(2,e));this.viewportCenterProjection=yt["e"].transformMat4([],[f[0],f[1],0,1],l),u=this.cameraService.getViewMatrixUncentered()||u,l=yt["b"].multiply([],c,u),l=yt["b"].multiply([],l,ue),this.cameraService.setViewProjectionMatrix(l),this.pixelsPerMeter=o,this.pixelsPerDegree=a,this.pixelsPerDegree2=s}}]),t}(),te=Ht()($t.prototype,"cameraService",[Jt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qt=$t))||Qt),le=n("hTab"),fe=n.n(le);function pe(t){var e=he();return function(){var n,r=ot()(t);if(e){var i=ot()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rt()(this,n)}}function he(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(function(t){t["Hover"]="hover",t["Click"]="click",t["Select"]="select",t["Active"]="active",t["Drag"]="drag"})(ee||(ee={}));var de,ve,me,ge,ye,be,_e,xe,we,Ee,Se,Ce,Te={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"},Oe=(ne=Object(o["injectable"])(),re=Object(o["inject"])(u.IMapService),ne((oe=function(t){et()(n,t);var e=pe(n);function n(){var t;l()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),qt()($()(t),"mapService",ae,$()(t)),d()($()(t),"hammertime",void 0),d()($()(t),"lastClickTime",0),d()($()(t),"lastClickXY",[-1,-1]),d()($()(t),"clickTimer",void 0),d()($()(t),"$containter",void 0),d()($()(t),"onDrag",(function(e){var n=t.interactionEvent(e);n.type=Te[n.type],t.emit(ee.Drag,n)})),d()($()(t),"onHammer",(function(e){e.srcEvent.stopPropagation();var n=t.interactionEvent(e);t.emit(ee.Hover,n)})),d()($()(t),"onTouch",(function(e){var n=e.touches[0];t.onHover({x:n.pageX,y:n.pageY,type:"touch"})})),d()($()(t),"onHover",(function(e){var n=e.clientX,r=e.clientY,i=n,o=r,a=e.type,s=t.mapService.getMapContainer();if(s){var u=s.getBoundingClientRect(),c=u.top,l=u.left;i=i-l-s.clientLeft,o=o-c-s.clientTop}var f=t.mapService.containerToLngLat([i,o]);if("click"!==a)"touch"!==a?"click"!==a&&"dblclick"!==a&&t.emit(ee.Hover,{x:i,y:o,lngLat:f,type:a,target:e}):t.isDoubleTap(i,o,f);else{if("ontouchstart"in document.documentElement===!0)return;t.isDoubleTap(i,o,f)}})),t}return p()(n,[{key:"init",value:function(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}},{key:"destroy",value:function(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(ee.Hover)}},{key:"triggerHover",value:function(t){var e=t.x,n=t.y;this.emit(ee.Hover,{x:e,y:n})}},{key:"triggerSelect",value:function(t){this.emit(ee.Select,{featureId:t})}},{key:"triggerActive",value:function(t){this.emit(ee.Active,{featureId:t})}},{key:"addEventListenerOnMap",value:function(){var t=this.mapService.getMapContainer();if(t){var e=new fe.a.Manager(t);e.add(new fe.a.Tap({event:"dblclick",taps:2})),e.add(new fe.a.Tap({event:"click"})),e.add(new fe.a.Pan({threshold:0,pointers:0})),e.add(new fe.a.Press({})),e.on("dblclick click",this.onHammer),e.on("panstart panmove panend pancancel",this.onDrag),t.addEventListener("mousemove",this.onHover),t.addEventListener("mousedown",this.onHover,!0),t.addEventListener("mouseup",this.onHover),t.addEventListener("contextmenu",this.onHover),this.hammertime=e}}},{key:"removeEventListenerOnMap",value:function(){var t=this.mapService.getMapContainer();t&&(t.removeEventListener("mousemove",this.onHover),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),t.removeEventListener("mousedown",this.onHover),t.removeEventListener("mouseup",this.onHover),t.removeEventListener("contextmenu",this.onHover))}},{key:"interactionEvent",value:function(t){var e,n,r=t.type,i=t.pointerType;"touch"===i?(n=Math.floor(t.pointers[0].clientY),e=Math.floor(t.pointers[0].clientX)):(n=Math.floor(t.srcEvent.y),e=Math.floor(t.srcEvent.x));var o=this.mapService.getMapContainer();if(o){var a=o.getBoundingClientRect(),s=a.top,u=a.left;e-=u,n-=s}var c=this.mapService.containerToLngLat([e,n]);return{x:e,y:n,lngLat:c,type:r,target:t.srcEvent}}},{key:"isDoubleTap",value:function(t,e,n){var r=this,i=(new Date).getTime(),o="click";i-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-t)<10&&Math.abs(this.lastClickXY[1]-e)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),o="dblclick",this.emit(ee.Hover,{x:t,y:e,lngLat:n,type:o})):(this.lastClickTime=i,this.lastClickXY=[t,e],this.clickTimer=setTimeout((function(){o="click",r.emit(ee.Hover,{x:t,y:e,lngLat:n,type:o})}),400))}}]),n}(i.a),ae=Ht()(oe.prototype,"mapService",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=oe))||ie),Ae=n("/2LT"),ke=n.n(Ae),Me=n("TFir"),Pe=n.n(Me);function Ie(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Le(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ie(Object(n),!0).forEach((function(e){d()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}(function(t){t[t["DEPTH_BUFFER_BIT"]=256]="DEPTH_BUFFER_BIT",t[t["STENCIL_BUFFER_BIT"]=1024]="STENCIL_BUFFER_BIT",t[t["COLOR_BUFFER_BIT"]=16384]="COLOR_BUFFER_BIT",t[t["POINTS"]=0]="POINTS",t[t["LINES"]=1]="LINES",t[t["LINE_LOOP"]=2]="LINE_LOOP",t[t["LINE_STRIP"]=3]="LINE_STRIP",t[t["TRIANGLES"]=4]="TRIANGLES",t[t["TRIANGLE_STRIP"]=5]="TRIANGLE_STRIP",t[t["TRIANGLE_FAN"]=6]="TRIANGLE_FAN",t[t["ZERO"]=0]="ZERO",t[t["ONE"]=1]="ONE",t[t["SRC_COLOR"]=768]="SRC_COLOR",t[t["ONE_MINUS_SRC_COLOR"]=769]="ONE_MINUS_SRC_COLOR",t[t["SRC_ALPHA"]=770]="SRC_ALPHA",t[t["ONE_MINUS_SRC_ALPHA"]=771]="ONE_MINUS_SRC_ALPHA",t[t["DST_ALPHA"]=772]="DST_ALPHA",t[t["ONE_MINUS_DST_ALPHA"]=773]="ONE_MINUS_DST_ALPHA",t[t["DST_COLOR"]=774]="DST_COLOR",t[t["ONE_MINUS_DST_COLOR"]=775]="ONE_MINUS_DST_COLOR",t[t["SRC_ALPHA_SATURATE"]=776]="SRC_ALPHA_SATURATE",t[t["FUNC_ADD"]=32774]="FUNC_ADD",t[t["BLEND_EQUATION"]=32777]="BLEND_EQUATION",t[t["BLEND_EQUATION_RGB"]=32777]="BLEND_EQUATION_RGB",t[t["BLEND_EQUATION_ALPHA"]=34877]="BLEND_EQUATION_ALPHA",t[t["FUNC_SUBTRACT"]=32778]="FUNC_SUBTRACT",t[t["FUNC_REVERSE_SUBTRACT"]=32779]="FUNC_REVERSE_SUBTRACT",t[t["MAX_EXT"]=32776]="MAX_EXT",t[t["MIN_EXT"]=32775]="MIN_EXT",t[t["BLEND_DST_RGB"]=32968]="BLEND_DST_RGB",t[t["BLEND_SRC_RGB"]=32969]="BLEND_SRC_RGB",t[t["BLEND_DST_ALPHA"]=32970]="BLEND_DST_ALPHA",t[t["BLEND_SRC_ALPHA"]=32971]="BLEND_SRC_ALPHA",t[t["CONSTANT_COLOR"]=32769]="CONSTANT_COLOR",t[t["ONE_MINUS_CONSTANT_COLOR"]=32770]="ONE_MINUS_CONSTANT_COLOR",t[t["CONSTANT_ALPHA"]=32771]="CONSTANT_ALPHA",t[t["ONE_MINUS_CONSTANT_ALPHA"]=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t["BLEND_COLOR"]=32773]="BLEND_COLOR",t[t["ARRAY_BUFFER"]=34962]="ARRAY_BUFFER",t[t["ELEMENT_ARRAY_BUFFER"]=34963]="ELEMENT_ARRAY_BUFFER",t[t["ARRAY_BUFFER_BINDING"]=34964]="ARRAY_BUFFER_BINDING",t[t["ELEMENT_ARRAY_BUFFER_BINDING"]=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t["STREAM_DRAW"]=35040]="STREAM_DRAW",t[t["STATIC_DRAW"]=35044]="STATIC_DRAW",t[t["DYNAMIC_DRAW"]=35048]="DYNAMIC_DRAW",t[t["BUFFER_SIZE"]=34660]="BUFFER_SIZE",t[t["BUFFER_USAGE"]=34661]="BUFFER_USAGE",t[t["CURRENT_VERTEX_ATTRIB"]=34342]="CURRENT_VERTEX_ATTRIB",t[t["FRONT"]=1028]="FRONT",t[t["BACK"]=1029]="BACK",t[t["FRONT_AND_BACK"]=1032]="FRONT_AND_BACK",t[t["CULL_FACE"]=2884]="CULL_FACE",t[t["BLEND"]=3042]="BLEND",t[t["DITHER"]=3024]="DITHER",t[t["STENCIL_TEST"]=2960]="STENCIL_TEST",t[t["DEPTH_TEST"]=2929]="DEPTH_TEST",t[t["SCISSOR_TEST"]=3089]="SCISSOR_TEST",t[t["POLYGON_OFFSET_FILL"]=32823]="POLYGON_OFFSET_FILL",t[t["SAMPLE_ALPHA_TO_COVERAGE"]=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t["SAMPLE_COVERAGE"]=32928]="SAMPLE_COVERAGE",t[t["NO_ERROR"]=0]="NO_ERROR",t[t["INVALID_ENUM"]=1280]="INVALID_ENUM",t[t["INVALID_VALUE"]=1281]="INVALID_VALUE",t[t["INVALID_OPERATION"]=1282]="INVALID_OPERATION",t[t["OUT_OF_MEMORY"]=1285]="OUT_OF_MEMORY",t[t["CW"]=2304]="CW",t[t["CCW"]=2305]="CCW",t[t["LINE_WIDTH"]=2849]="LINE_WIDTH",t[t["ALIASED_POINT_SIZE_RANGE"]=33901]="ALIASED_POINT_SIZE_RANGE",t[t["ALIASED_LINE_WIDTH_RANGE"]=33902]="ALIASED_LINE_WIDTH_RANGE",t[t["CULL_FACE_MODE"]=2885]="CULL_FACE_MODE",t[t["FRONT_FACE"]=2886]="FRONT_FACE",t[t["DEPTH_RANGE"]=2928]="DEPTH_RANGE",t[t["DEPTH_WRITEMASK"]=2930]="DEPTH_WRITEMASK",t[t["DEPTH_CLEAR_VALUE"]=2931]="DEPTH_CLEAR_VALUE",t[t["DEPTH_FUNC"]=2932]="DEPTH_FUNC",t[t["STENCIL_CLEAR_VALUE"]=2961]="STENCIL_CLEAR_VALUE",t[t["STENCIL_FUNC"]=2962]="STENCIL_FUNC",t[t["STENCIL_FAIL"]=2964]="STENCIL_FAIL",t[t["STENCIL_PASS_DEPTH_FAIL"]=2965]="STENCIL_PASS_DEPTH_FAIL",t[t["STENCIL_PASS_DEPTH_PASS"]=2966]="STENCIL_PASS_DEPTH_PASS",t[t["STENCIL_REF"]=2967]="STENCIL_REF",t[t["STENCIL_VALUE_MASK"]=2963]="STENCIL_VALUE_MASK",t[t["STENCIL_WRITEMASK"]=2968]="STENCIL_WRITEMASK",t[t["STENCIL_BACK_FUNC"]=34816]="STENCIL_BACK_FUNC",t[t["STENCIL_BACK_FAIL"]=34817]="STENCIL_BACK_FAIL",t[t["STENCIL_BACK_PASS_DEPTH_FAIL"]=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t["STENCIL_BACK_PASS_DEPTH_PASS"]=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t["STENCIL_BACK_REF"]=36003]="STENCIL_BACK_REF",t[t["STENCIL_BACK_VALUE_MASK"]=36004]="STENCIL_BACK_VALUE_MASK",t[t["STENCIL_BACK_WRITEMASK"]=36005]="STENCIL_BACK_WRITEMASK",t[t["VIEWPORT"]=2978]="VIEWPORT",t[t["SCISSOR_BOX"]=3088]="SCISSOR_BOX",t[t["COLOR_CLEAR_VALUE"]=3106]="COLOR_CLEAR_VALUE",t[t["COLOR_WRITEMASK"]=3107]="COLOR_WRITEMASK",t[t["UNPACK_ALIGNMENT"]=3317]="UNPACK_ALIGNMENT",t[t["PACK_ALIGNMENT"]=3333]="PACK_ALIGNMENT",t[t["MAX_TEXTURE_SIZE"]=3379]="MAX_TEXTURE_SIZE",t[t["MAX_VIEWPORT_DIMS"]=3386]="MAX_VIEWPORT_DIMS",t[t["SUBPIXEL_BITS"]=3408]="SUBPIXEL_BITS",t[t["RED_BITS"]=3410]="RED_BITS",t[t["GREEN_BITS"]=3411]="GREEN_BITS",t[t["BLUE_BITS"]=3412]="BLUE_BITS",t[t["ALPHA_BITS"]=3413]="ALPHA_BITS",t[t["DEPTH_BITS"]=3414]="DEPTH_BITS",t[t["STENCIL_BITS"]=3415]="STENCIL_BITS",t[t["POLYGON_OFFSET_UNITS"]=10752]="POLYGON_OFFSET_UNITS",t[t["POLYGON_OFFSET_FACTOR"]=32824]="POLYGON_OFFSET_FACTOR",t[t["TEXTURE_BINDING_2D"]=32873]="TEXTURE_BINDING_2D",t[t["SAMPLE_BUFFERS"]=32936]="SAMPLE_BUFFERS",t[t["SAMPLES"]=32937]="SAMPLES",t[t["SAMPLE_COVERAGE_VALUE"]=32938]="SAMPLE_COVERAGE_VALUE",t[t["SAMPLE_COVERAGE_INVERT"]=32939]="SAMPLE_COVERAGE_INVERT",t[t["COMPRESSED_TEXTURE_FORMATS"]=34467]="COMPRESSED_TEXTURE_FORMATS",t[t["DONT_CARE"]=4352]="DONT_CARE",t[t["FASTEST"]=4353]="FASTEST",t[t["NICEST"]=4354]="NICEST",t[t["GENERATE_MIPMAP_HINT"]=33170]="GENERATE_MIPMAP_HINT",t[t["BYTE"]=5120]="BYTE",t[t["UNSIGNED_BYTE"]=5121]="UNSIGNED_BYTE",t[t["SHORT"]=5122]="SHORT",t[t["UNSIGNED_SHORT"]=5123]="UNSIGNED_SHORT",t[t["INT"]=5124]="INT",t[t["UNSIGNED_INT"]=5125]="UNSIGNED_INT",t[t["FLOAT"]=5126]="FLOAT",t[t["DEPTH_COMPONENT"]=6402]="DEPTH_COMPONENT",t[t["ALPHA"]=6406]="ALPHA",t[t["RGB"]=6407]="RGB",t[t["RGBA"]=6408]="RGBA",t[t["LUMINANCE"]=6409]="LUMINANCE",t[t["LUMINANCE_ALPHA"]=6410]="LUMINANCE_ALPHA",t[t["UNSIGNED_SHORT_4_4_4_4"]=32819]="UNSIGNED_SHORT_4_4_4_4",t[t["UNSIGNED_SHORT_5_5_5_1"]=32820]="UNSIGNED_SHORT_5_5_5_1",t[t["UNSIGNED_SHORT_5_6_5"]=33635]="UNSIGNED_SHORT_5_6_5",t[t["FRAGMENT_SHADER"]=35632]="FRAGMENT_SHADER",t[t["VERTEX_SHADER"]=35633]="VERTEX_SHADER",t[t["MAX_VERTEX_ATTRIBS"]=34921]="MAX_VERTEX_ATTRIBS",t[t["MAX_VERTEX_UNIFORM_VECTORS"]=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t["MAX_VARYING_VECTORS"]=36348]="MAX_VARYING_VECTORS",t[t["MAX_COMBINED_TEXTURE_IMAGE_UNITS"]=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t["MAX_VERTEX_TEXTURE_IMAGE_UNITS"]=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t["MAX_TEXTURE_IMAGE_UNITS"]=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t["MAX_FRAGMENT_UNIFORM_VECTORS"]=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t["SHADER_TYPE"]=35663]="SHADER_TYPE",t[t["DELETE_STATUS"]=35712]="DELETE_STATUS",t[t["LINK_STATUS"]=35714]="LINK_STATUS",t[t["VALIDATE_STATUS"]=35715]="VALIDATE_STATUS",t[t["ATTACHED_SHADERS"]=35717]="ATTACHED_SHADERS",t[t["ACTIVE_UNIFORMS"]=35718]="ACTIVE_UNIFORMS",t[t["ACTIVE_ATTRIBUTES"]=35721]="ACTIVE_ATTRIBUTES",t[t["SHADING_LANGUAGE_VERSION"]=35724]="SHADING_LANGUAGE_VERSION",t[t["CURRENT_PROGRAM"]=35725]="CURRENT_PROGRAM",t[t["NEVER"]=512]="NEVER",t[t["LESS"]=513]="LESS",t[t["EQUAL"]=514]="EQUAL",t[t["LEQUAL"]=515]="LEQUAL",t[t["GREATER"]=516]="GREATER",t[t["NOTEQUAL"]=517]="NOTEQUAL",t[t["GEQUAL"]=518]="GEQUAL",t[t["ALWAYS"]=519]="ALWAYS",t[t["KEEP"]=7680]="KEEP",t[t["REPLACE"]=7681]="REPLACE",t[t["INCR"]=7682]="INCR",t[t["DECR"]=7683]="DECR",t[t["INVERT"]=5386]="INVERT",t[t["INCR_WRAP"]=34055]="INCR_WRAP",t[t["DECR_WRAP"]=34056]="DECR_WRAP",t[t["VENDOR"]=7936]="VENDOR",t[t["RENDERER"]=7937]="RENDERER",t[t["VERSION"]=7938]="VERSION",t[t["NEAREST"]=9728]="NEAREST",t[t["LINEAR"]=9729]="LINEAR",t[t["NEAREST_MIPMAP_NEAREST"]=9984]="NEAREST_MIPMAP_NEAREST",t[t["LINEAR_MIPMAP_NEAREST"]=9985]="LINEAR_MIPMAP_NEAREST",t[t["NEAREST_MIPMAP_LINEAR"]=9986]="NEAREST_MIPMAP_LINEAR",t[t["LINEAR_MIPMAP_LINEAR"]=9987]="LINEAR_MIPMAP_LINEAR",t[t["TEXTURE_MAG_FILTER"]=10240]="TEXTURE_MAG_FILTER",t[t["TEXTURE_MIN_FILTER"]=10241]="TEXTURE_MIN_FILTER",t[t["TEXTURE_WRAP_S"]=10242]="TEXTURE_WRAP_S",t[t["TEXTURE_WRAP_T"]=10243]="TEXTURE_WRAP_T",t[t["TEXTURE_2D"]=3553]="TEXTURE_2D",t[t["TEXTURE"]=5890]="TEXTURE",t[t["TEXTURE_CUBE_MAP"]=34067]="TEXTURE_CUBE_MAP",t[t["TEXTURE_BINDING_CUBE_MAP"]=34068]="TEXTURE_BINDING_CUBE_MAP",t[t["TEXTURE_CUBE_MAP_POSITIVE_X"]=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t["TEXTURE_CUBE_MAP_NEGATIVE_X"]=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t["TEXTURE_CUBE_MAP_POSITIVE_Y"]=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t["TEXTURE_CUBE_MAP_NEGATIVE_Y"]=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t["TEXTURE_CUBE_MAP_POSITIVE_Z"]=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t["TEXTURE_CUBE_MAP_NEGATIVE_Z"]=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t["MAX_CUBE_MAP_TEXTURE_SIZE"]=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t["TEXTURE0"]=33984]="TEXTURE0",t[t["TEXTURE1"]=33985]="TEXTURE1",t[t["TEXTURE2"]=33986]="TEXTURE2",t[t["TEXTURE3"]=33987]="TEXTURE3",t[t["TEXTURE4"]=33988]="TEXTURE4",t[t["TEXTURE5"]=33989]="TEXTURE5",t[t["TEXTURE6"]=33990]="TEXTURE6",t[t["TEXTURE7"]=33991]="TEXTURE7",t[t["TEXTURE8"]=33992]="TEXTURE8",t[t["TEXTURE9"]=33993]="TEXTURE9",t[t["TEXTURE10"]=33994]="TEXTURE10",t[t["TEXTURE11"]=33995]="TEXTURE11",t[t["TEXTURE12"]=33996]="TEXTURE12",t[t["TEXTURE13"]=33997]="TEXTURE13",t[t["TEXTURE14"]=33998]="TEXTURE14",t[t["TEXTURE15"]=33999]="TEXTURE15",t[t["TEXTURE16"]=34e3]="TEXTURE16",t[t["TEXTURE17"]=34001]="TEXTURE17",t[t["TEXTURE18"]=34002]="TEXTURE18",t[t["TEXTURE19"]=34003]="TEXTURE19",t[t["TEXTURE20"]=34004]="TEXTURE20",t[t["TEXTURE21"]=34005]="TEXTURE21",t[t["TEXTURE22"]=34006]="TEXTURE22",t[t["TEXTURE23"]=34007]="TEXTURE23",t[t["TEXTURE24"]=34008]="TEXTURE24",t[t["TEXTURE25"]=34009]="TEXTURE25",t[t["TEXTURE26"]=34010]="TEXTURE26",t[t["TEXTURE27"]=34011]="TEXTURE27",t[t["TEXTURE28"]=34012]="TEXTURE28",t[t["TEXTURE29"]=34013]="TEXTURE29",t[t["TEXTURE30"]=34014]="TEXTURE30",t[t["TEXTURE31"]=34015]="TEXTURE31",t[t["ACTIVE_TEXTURE"]=34016]="ACTIVE_TEXTURE",t[t["REPEAT"]=10497]="REPEAT",t[t["CLAMP_TO_EDGE"]=33071]="CLAMP_TO_EDGE",t[t["MIRRORED_REPEAT"]=33648]="MIRRORED_REPEAT",t[t["FLOAT_VEC2"]=35664]="FLOAT_VEC2",t[t["FLOAT_VEC3"]=35665]="FLOAT_VEC3",t[t["FLOAT_VEC4"]=35666]="FLOAT_VEC4",t[t["INT_VEC2"]=35667]="INT_VEC2",t[t["INT_VEC3"]=35668]="INT_VEC3",t[t["INT_VEC4"]=35669]="INT_VEC4",t[t["BOOL"]=35670]="BOOL",t[t["BOOL_VEC2"]=35671]="BOOL_VEC2",t[t["BOOL_VEC3"]=35672]="BOOL_VEC3",t[t["BOOL_VEC4"]=35673]="BOOL_VEC4",t[t["FLOAT_MAT2"]=35674]="FLOAT_MAT2",t[t["FLOAT_MAT3"]=35675]="FLOAT_MAT3",t[t["FLOAT_MAT4"]=35676]="FLOAT_MAT4",t[t["SAMPLER_2D"]=35678]="SAMPLER_2D",t[t["SAMPLER_CUBE"]=35680]="SAMPLER_CUBE",t[t["VERTEX_ATTRIB_ARRAY_ENABLED"]=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t["VERTEX_ATTRIB_ARRAY_SIZE"]=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t["VERTEX_ATTRIB_ARRAY_STRIDE"]=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t["VERTEX_ATTRIB_ARRAY_TYPE"]=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t["VERTEX_ATTRIB_ARRAY_NORMALIZED"]=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t["VERTEX_ATTRIB_ARRAY_POINTER"]=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t["VERTEX_ATTRIB_ARRAY_BUFFER_BINDING"]=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t["COMPILE_STATUS"]=35713]="COMPILE_STATUS",t[t["LOW_FLOAT"]=36336]="LOW_FLOAT",t[t["MEDIUM_FLOAT"]=36337]="MEDIUM_FLOAT",t[t["HIGH_FLOAT"]=36338]="HIGH_FLOAT",t[t["LOW_INT"]=36339]="LOW_INT",t[t["MEDIUM_INT"]=36340]="MEDIUM_INT",t[t["HIGH_INT"]=36341]="HIGH_INT",t[t["FRAMEBUFFER"]=36160]="FRAMEBUFFER",t[t["RENDERBUFFER"]=36161]="RENDERBUFFER",t[t["RGBA4"]=32854]="RGBA4",t[t["RGB5_A1"]=32855]="RGB5_A1",t[t["RGB565"]=36194]="RGB565",t[t["DEPTH_COMPONENT16"]=33189]="DEPTH_COMPONENT16",t[t["STENCIL_INDEX"]=6401]="STENCIL_INDEX",t[t["STENCIL_INDEX8"]=36168]="STENCIL_INDEX8",t[t["DEPTH_STENCIL"]=34041]="DEPTH_STENCIL",t[t["RENDERBUFFER_WIDTH"]=36162]="RENDERBUFFER_WIDTH",t[t["RENDERBUFFER_HEIGHT"]=36163]="RENDERBUFFER_HEIGHT",t[t["RENDERBUFFER_INTERNAL_FORMAT"]=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t["RENDERBUFFER_RED_SIZE"]=36176]="RENDERBUFFER_RED_SIZE",t[t["RENDERBUFFER_GREEN_SIZE"]=36177]="RENDERBUFFER_GREEN_SIZE",t[t["RENDERBUFFER_BLUE_SIZE"]=36178]="RENDERBUFFER_BLUE_SIZE",t[t["RENDERBUFFER_ALPHA_SIZE"]=36179]="RENDERBUFFER_ALPHA_SIZE",t[t["RENDERBUFFER_DEPTH_SIZE"]=36180]="RENDERBUFFER_DEPTH_SIZE",t[t["RENDERBUFFER_STENCIL_SIZE"]=36181]="RENDERBUFFER_STENCIL_SIZE",t[t["FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE"]=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t["FRAMEBUFFER_ATTACHMENT_OBJECT_NAME"]=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t["FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL"]=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t["FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE"]=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t["COLOR_ATTACHMENT0"]=36064]="COLOR_ATTACHMENT0",t[t["DEPTH_ATTACHMENT"]=36096]="DEPTH_ATTACHMENT",t[t["STENCIL_ATTACHMENT"]=36128]="STENCIL_ATTACHMENT",t[t["DEPTH_STENCIL_ATTACHMENT"]=33306]="DEPTH_STENCIL_ATTACHMENT",t[t["NONE"]=0]="NONE",t[t["FRAMEBUFFER_COMPLETE"]=36053]="FRAMEBUFFER_COMPLETE",t[t["FRAMEBUFFER_INCOMPLETE_ATTACHMENT"]=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t["FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT"]=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t["FRAMEBUFFER_INCOMPLETE_DIMENSIONS"]=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t["FRAMEBUFFER_UNSUPPORTED"]=36061]="FRAMEBUFFER_UNSUPPORTED",t[t["FRAMEBUFFER_BINDING"]=36006]="FRAMEBUFFER_BINDING",t[t["RENDERBUFFER_BINDING"]=36007]="RENDERBUFFER_BINDING",t[t["MAX_RENDERBUFFER_SIZE"]=34024]="MAX_RENDERBUFFER_SIZE",t[t["INVALID_FRAMEBUFFER_OPERATION"]=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t["UNPACK_FLIP_Y_WEBGL"]=37440]="UNPACK_FLIP_Y_WEBGL",t[t["UNPACK_PREMULTIPLY_ALPHA_WEBGL"]=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t["CONTEXT_LOST_WEBGL"]=37442]="CONTEXT_LOST_WEBGL",t[t["UNPACK_COLORSPACE_CONVERSION_WEBGL"]=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t["BROWSER_DEFAULT_WEBGL"]=37444]="BROWSER_DEFAULT_WEBGL"})(de||(de={}));var Re,De,Ne,je,Fe,ze,Be,Ue,Ve,qe,Ge,He,We,Xe=(ve=Object(o["injectable"])(),me=Object(o["inject"])(u.IRendererService),ge=Object(o["inject"])(u.IGlobalConfigService),ye=Object(o["inject"])(u.IInteractionService),be=Object(o["inject"])(u.ILayerService),ve((xe=function(){function t(){var e=this;l()(this,t),qt()(this,"rendererService",we,this),qt()(this,"configService",Ee,this),qt()(this,"interactionService",Se,this),qt()(this,"layerService",Ce,this),d()(this,"pickingFBO",void 0),d()(this,"width",0),d()(this,"height",0),d()(this,"alreadyInPicking",!1),d()(this,"pickBufferScale",1),d()(this,"pickFromPickingFBO",(function(t,n){var r,i=n.x,o=n.y,a=n.lngLat,s=n.type,u=n.target,c=!1,l=e.rendererService,f=(l.getViewportSize,l.readPixels),p=l.getContainer,h=p().getBoundingClientRect(),d=h.width,m=h.height;d*=v["b"].DPR,m*=v["b"].DPR;var g,y=t.getLayerConfig(),b=y.enableHighlight,_=y.enableSelect,x=i*v["b"].DPR,w=o*v["b"].DPR;if(x>d-1*v["b"].DPR||x<0||w>m-1*v["b"].DPR||w<0)return!1;if(g=f({x:Math.floor(x/e.pickBufferScale),y:Math.floor((m-(o+1)*v["b"].DPR)/e.pickBufferScale),width:1,height:1,data:new Uint8Array(4),framebuffer:e.pickingFBO}),0!==g[0]||0!==g[1]||0!==g[2]){var E=Object(v["l"])(g),S=t.getSource().getFeatureById(E);E!==t.getCurrentPickId()&&"mousemove"===s&&(s="mouseenter");var C={x:i,y:o,type:s,lngLat:a,featureId:E,feature:S,target:u};S&&(c=!0,t.setCurrentPickId(E),e.triggerHoverOnLayer(t,C))}else{var T={x:i,y:o,lngLat:a,type:null!==t.getCurrentPickId()&&"mousemove"===s?"mouseout":"un"+s,featureId:null,target:u,feature:null};e.triggerHoverOnLayer(t,Le(Le({},T),{},{type:"unpick"})),e.triggerHoverOnLayer(t,T),t.setCurrentPickId(null)}if(b&&e.highlightPickedFeature(t,g),_&&"click"===s&&(null===(r=g)||void 0===r?void 0:r.toString())!==[0,0,0,0].toString()){var O=Object(v["l"])(g);null===t.getCurrentSelectedId()||O!==t.getCurrentSelectedId()?(e.selectFeature(t,g),t.setCurrentSelectedId(O)):(e.selectFeature(t,new Uint8Array([0,0,0,0])),t.setCurrentSelectedId(null))}return c}))}return p()(t,[{key:"init",value:function(t){var e=this.rendererService,n=e.createTexture2D,r=e.createFramebuffer,i=(e.getViewportSize,e.getContainer),o=i().getBoundingClientRect(),a=o.width,s=o.height;a*=v["b"].DPR,s*=v["b"].DPR,this.pickBufferScale=this.configService.getSceneConfig(t).pickBufferScale||1,this.pickingFBO=r({color:n({width:Math.round(a/this.pickBufferScale),height:Math.round(s/this.pickBufferScale),wrapS:de.CLAMP_TO_EDGE,wrapT:de.CLAMP_TO_EDGE})}),this.interactionService.on(ee.Hover,this.pickingAllLayer.bind(this))}},{key:"boxPickLayer",value:function(){var t=ke()(Pe.a.mark((function t(e,n,r){var i,o,a,s=this;return Pe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=this.rendererService,o=i.useFramebuffer,a=i.clear,i.getContainer,this.resizePickingFBO(),o(this.pickingFBO,(function(){a({framebuffer:s.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),e.hooks.beforePickingEncode.call(),e.renderModels(),e.hooks.afterPickingEncode.call();var t=s.pickBox(e,n);r(t)}));case 3:case"end":return t.stop()}}),t,this)})));function e(e,n,r){return t.apply(this,arguments)}return e}()},{key:"pickBox",value:function(t,e){var n,r=this,i=e.map((function(t){var e=t<0?0:t;return Math.floor(e*v["b"].DPR/r.pickBufferScale)})),o=gt()(i,4),a=o[0],s=o[1],u=o[2],c=o[3],l=this.rendererService,f=(l.getViewportSize,l.readPixels),p=l.getContainer,h=p().getBoundingClientRect(),d=h.width,m=h.height;if(d*=v["b"].DPR,m*=v["b"].DPR,a>(d-1)*v["b"].DPR/this.pickBufferScale||u<0||s>(m-1)*v["b"].DPR/this.pickBufferScale||c<0)return[];var g=Math.min(d/this.pickBufferScale,u)-a,y=Math.min(m/this.pickBufferScale,c)-s;n=f({x:a,y:Math.floor(m/this.pickBufferScale-(c+1)),width:g,height:y,data:new Uint8Array(g*y*4),framebuffer:this.pickingFBO});for(var b=[],_={},x=0;x<n.length/4;x+=1){var w=n.slice(4*x,4*x+4),E=Object(v["l"])(w);if(-1!==E&&!_[E]){var S=t.getSource().getFeatureById(E);b.push(S),_[E]=!0}}return b}},{key:"pickingAllLayer",value:function(){var t=ke()(Pe.a.mark((function t(e){return Pe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.alreadyInPicking&&!this.layerService.alreadyInRendering){t.next=2;break}return t.abrupt("return");case 2:return this.alreadyInPicking=!0,t.next=5,this.pickingLayers(e);case 5:this.layerService.renderLayers(),this.alreadyInPicking=!1;case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"resizePickingFBO",value:function(){var t=this.rendererService.getContainer,e=t().getBoundingClientRect(),n=e.width,r=e.height;n*=v["b"].DPR,r*=v["b"].DPR,this.width===n&&this.height===r||(this.pickingFBO.resize({width:Math.round(n/this.pickBufferScale),height:Math.round(r/this.pickBufferScale)}),this.width=n,this.height=r)}},{key:"pickingLayers",value:function(){var t=ke()(Pe.a.mark((function t(e){var n,r,i,o=this;return Pe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=this.rendererService,n.getViewportSize,r=n.useFramebuffer,i=n.clear,n.getContainer,this.resizePickingFBO(),r(this.pickingFBO,(function(){var t=o.layerService.getLayers();t.filter((function(t){return t.needPick(e.type)})).reverse().some((function(t){i({framebuffer:o.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),t.hooks.beforePickingEncode.call(),t.renderModels(),t.hooks.afterPickingEncode.call();var n=o.pickFromPickingFBO(t,e);return n&&!t.getLayerConfig().enablePropagation}))}));case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"triggerHoverOnLayer",value:function(t,e){t.emit(e.type,e)}},{key:"isEventCrash",value:function(t){var e=!0;return t.target.path.map((function(t){t.classList&&t.classList.forEach((function(t){"l7-marker"!==t&&"l7-popup"!==t||(e=!1)}))})),e}},{key:"highlightPickedFeature",value:function(t,e){var n=gt()(e,3),r=n[0],i=n[1],o=n[2];t.hooks.beforeHighlight.call([r,i,o])}},{key:"selectFeature",value:function(t,e){var n=gt()(e,3),r=n[0],i=n[1],o=n[2];t.hooks.beforeSelect.call([r,i,o])}}]),t}(),we=Ht()(xe.prototype,"rendererService",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ee=Ht()(xe.prototype,"configService",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Se=Ht()(xe.prototype,"interactionService",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ce=Ht()(xe.prototype,"layerService",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e=xe))||_e),Ze=function(){function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];l()(this,t),d()(this,"autoStart",void 0),d()(this,"startTime",0),d()(this,"oldTime",0),d()(this,"running",!1),d()(this,"elapsedTime",0),this.autoStart=e}return p()(t,[{key:"start",value:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"===typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}]),t}(),Ye=(Re=Object(o["injectable"])(),De=Object(o["inject"])(u.IRendererService),Ne=Object(o["inject"])(u.IGlobalConfigService),Re((Fe=function(){function t(){l()(this,t),d()(this,"clock",new Ze),d()(this,"alreadyInRendering",!1),d()(this,"layers",[]),d()(this,"layerRenderID",void 0),d()(this,"sceneInited",!1),d()(this,"animateInstanceCount",0),qt()(this,"renderService",ze,this),qt()(this,"configService",Be,this)}return p()(t,[{key:"add",value:function(t){this.sceneInited&&t.init(),this.layers.push(t)}},{key:"initLayers",value:function(){this.sceneInited=!0,this.layers.forEach((function(t){t.inited||t.init()}))}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayer",value:function(t){return this.layers.find((function(e){return e.id===t}))}},{key:"getLayerByName",value:function(t){return this.layers.find((function(e){return e.name===t}))}},{key:"remove",value:function(t){var e=this.layers.indexOf(t);e>-1&&this.layers.splice(e,1),t.emit("remove",null),t.destroy(),this.renderLayers()}},{key:"removeAllLayers",value:function(){this.destroy()}},{key:"renderLayers",value:function(){this.alreadyInRendering||(this.alreadyInRendering=!0,this.clear(),this.updateRenderOrder(),this.layers.filter((function(t){return t.inited})).filter((function(t){return t.isVisible()})).forEach((function(t){t.hooks.beforeRenderData.call(),t.hooks.beforeRender.call(),t.render(),t.hooks.afterRender.call()})),this.alreadyInRendering=!1)}},{key:"updateRenderOrder",value:function(){this.layers.sort((function(t,e){return t.zIndex-e.zIndex}))}},{key:"destroy",value:function(){this.layers.forEach((function(t){return t.destroy()})),this.layers=[],this.renderLayers()}},{key:"startAnimate",value:function(){0===this.animateInstanceCount++&&(this.clock.start(),this.runRender())}},{key:"stopAnimate",value:function(){0===--this.animateInstanceCount&&(this.stopRender(),this.clock.stop())}},{key:"getOESTextureFloat",value:function(){return this.renderService.extensionObject.OES_texture_float}},{key:"clear",value:function(){this.renderService.clear({color:[0,0,0,0],depth:1,stencil:0,framebuffer:null})}},{key:"runRender",value:function(){this.renderLayers(),this.layerRenderID=requestAnimationFrame(this.runRender.bind(this))}},{key:"stopRender",value:function(){cancelAnimationFrame(this.layerRenderID)}}]),t}(),ze=Ht()(Fe.prototype,"renderService",[De],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Be=Ht()(Fe.prototype,"configService",[Ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),je=Fe))||je),Ke=n("jCe1"),Je=n.n(Ke),Qe=n("5EKB"),$e=n.n(Qe),tn=n("B7nT"),en=n.n(tn),nn=function(){function t(e){var n=this;l()(this,t),d()(this,"name",void 0),d()(this,"type",void 0),d()(this,"scale",void 0),d()(this,"descriptor",void 0),d()(this,"featureBufferLayout",[]),d()(this,"needRescale",!1),d()(this,"needRemapping",!1),d()(this,"needRegenerateVertices",!1),d()(this,"featureRange",{startIndex:0,endIndex:1/0}),d()(this,"vertexAttribute",void 0),d()(this,"defaultCallback",(function(t){var e;return 0===t.length?(null===(e=n.scale)||void 0===e?void 0:e.defaultValues)||[]:t.map((function(t,e){var r,i=null===(r=n.scale)||void 0===r?void 0:r.scalers[e].func,o=i(t);return o}))})),this.setProps(e)}return p()(t,[{key:"setProps",value:function(t){Object.assign(this,t)}},{key:"mapping",value:function(t){var e;if(null!==(e=this.scale)&&void 0!==e&&e.callback){var n,r=null===(n=this.scale)||void 0===n?void 0:n.callback.apply(n,$e()(t));if(!en()(r))return[r]}return this.defaultCallback(t)}},{key:"resetDescriptor",value:function(){this.descriptor&&(this.descriptor.buffer.data=[])}}]),t}(),rn=["buffer","update","name"];function on(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function an(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?on(Object(n),!0).forEach((function(e){d()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var sn,un,cn,ln,fn,pn,hn,dn,vn,mn,gn,yn,bn,_n,xn,wn,En,Sn,Cn,Tn,On,An,kn,Mn,Pn,In,Ln,Rn,Dn,Nn,jn,Fn,zn,Bn=(Ue={},d()(Ue,de.FLOAT,4),d()(Ue,de.UNSIGNED_BYTE,1),d()(Ue,de.UNSIGNED_SHORT,2),Ue),Un=(Ve=Object(o["injectable"])(),qe=Object(o["inject"])(u.IRendererService),Ve((He=function(){function t(){l()(this,t),d()(this,"attributesAndIndices",void 0),qt()(this,"rendererService",We,this),d()(this,"attributes",[]),d()(this,"triangulation",void 0),d()(this,"featureLayout",{sizePerElement:0,elements:[]})}return p()(t,[{key:"registerStyleAttribute",value:function(t){var e=this.getLayerStyleAttribute(t.name||"");return e?e.setProps(t):(e=new nn(t),this.attributes.push(e)),e}},{key:"updateStyleAttribute",value:function(t,e,n){var r=this.getLayerStyleAttribute(t);r||(r=this.registerStyleAttribute(an(an({},e),{},{name:t})));var i=e.scale;i&&r&&(r.scale=i,r.needRescale=!0,r.needRemapping=!0,r.needRegenerateVertices=!0,n&&n.featureRange&&(r.featureRange=n.featureRange))}},{key:"getLayerStyleAttributes",value:function(){return this.attributes}},{key:"getLayerStyleAttribute",value:function(t){return this.attributes.find((function(e){return e.name===t}))}},{key:"getLayerAttributeScale",value:function(t){var e,n=this.getLayerStyleAttribute(t),r=null===n||void 0===n||null===(e=n.scale)||void 0===e?void 0:e.scalers;return r&&r[0]?r[0].func:null}},{key:"updateAttributeByFeatureRange",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=this.attributes.find((function(e){return e.name===t}));if(i&&i.descriptor){var o=i.descriptor,a=o.update,s=o.buffer,u=o.size,c=void 0===u?0:u,l=Bn[s.type||de.FLOAT];if(a){var f=this.featureLayout,p=f.elements,h=f.sizePerElement,d=p.slice(n,r);if(!d.length)return;var v=d[0].offset,m=v*c*l,g=d.map((function(t,n){for(var r=t.featureIdx,i=t.vertices,o=t.normals,s=i.length/h,u=[],c=0;c<s;c++){var l=o?o.slice(3*c,3*c+3):[];u.push.apply(u,$e()(a(e[r],r,i.slice(c*h,c*h+h),n,l)))}return u})).reduce((function(t,e){return t.push.apply(t,$e()(e)),t}),[]);i.vertexAttribute.updateBuffer({data:g,offset:m})}}}},{key:"createAttributesAndIndices",value:function(t,e){var n=this;this.featureLayout={sizePerElement:0,elements:[]},e&&(this.triangulation=e);var r=this.attributes.map((function(t){return t.resetDescriptor(),t.descriptor})),i=0,o=[],a=3;t.forEach((function(t,e){var s=n.triangulation(t),u=s.indices,c=s.vertices,l=s.normals,f=s.size;u.forEach((function(t){o.push(t+i)})),a=f;var p=c.length/f;n.featureLayout.sizePerElement=a,n.featureLayout.elements.push({featureIdx:e,vertices:c,normals:l,offset:i}),i+=p;for(var h=function(n){var i=(null===l||void 0===l?void 0:l.slice(3*n,3*n+3))||[],o=c.slice(n*f,n*f+f);r.forEach((function(r,a){var s;r&&r.update&&(s=r.buffer.data).push.apply(s,$e()(r.update(t,e,o,n,i)))}))},d=0;d<p;d++)h(d)}));var s=this.rendererService,u=s.createAttribute,c=s.createBuffer,l=s.createElements,f={};r.forEach((function(t,e){if(t){var r=t.buffer,i=(t.update,t.name,Je()(t,rn)),o=u(an({buffer:c(r)},i));f[t.name||""]=o,n.attributes[e].vertexAttribute=o}}));var p=l({data:o,type:de.UNSIGNED_INT,count:o.length});return this.attributesAndIndices={attributes:f,elements:p},this.attributesAndIndices}},{key:"clearAllAttributes",value:function(){var t;this.attributes.forEach((function(t){t.vertexAttribute&&t.vertexAttribute.destroy()})),null===(t=this.attributesAndIndices)||void 0===t||t.elements.destroy(),this.attributes=[]}}]),t}(),We=Ht()(He.prototype,"rendererService",[qe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ge=He))||Ge),Vn=n("Tj1F"),qn=n("+xk1"),Gn=n.n(qn),Hn=(window.document.documentElement.style,0);function Wn(t){var e=t;if("string"===typeof t&&(e=document.getElementById(t)),e){var n=document.createElement("div");return n.style.cssText+="\n      position: absolute;\n      z-index:2;\n      height: 100%;\n      width: 100%;\n      pointer-events: none;\n    ",n.id="l7-scene-".concat(Hn++),n.classList.add("l7-scene"),e.appendChild(n),n}return null}function Xn(t){var e=Zn();return function(){var n,r=ot()(t);if(e){var i=ot()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rt()(this,n)}}function Zn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Yn=(sn=Object(o["injectable"])(),un=Object(o["inject"])(u.SceneID),cn=Object(o["inject"])(u.IIconService),ln=Object(o["inject"])(u.IFontService),fn=Object(o["inject"])(u.IControlService),pn=Object(o["inject"])(u.IGlobalConfigService),hn=Object(o["inject"])(u.IMapService),dn=Object(o["inject"])(u.ICoordinateSystemService),vn=Object(o["inject"])(u.IRendererService),mn=Object(o["inject"])(u.ILayerService),gn=Object(o["inject"])(u.ICameraService),yn=Object(o["inject"])(u.IInteractionService),bn=Object(o["inject"])(u.IPickingService),_n=Object(o["inject"])(u.IShaderModuleService),xn=Object(o["inject"])(u.IMarkerService),wn=Object(o["inject"])(u.IPopupService),sn((Sn=function(t){et()(n,t);var e=Xn(n);function n(){var t;return l()(this,n),t=e.call(this),d()($()(t),"destroyed",!1),d()($()(t),"loaded",!1),d()($()(t),"loadFont",!1),d()($()(t),"fontFamily",""),qt()($()(t),"id",Cn,$()(t)),qt()($()(t),"iconService",Tn,$()(t)),qt()($()(t),"fontService",On,$()(t)),qt()($()(t),"controlService",An,$()(t)),qt()($()(t),"configService",kn,$()(t)),qt()($()(t),"map",Mn,$()(t)),qt()($()(t),"coordinateSystemService",Pn,$()(t)),qt()($()(t),"rendererService",In,$()(t)),qt()($()(t),"layerService",Ln,$()(t)),qt()($()(t),"cameraService",Rn,$()(t)),qt()($()(t),"interactionService",Dn,$()(t)),qt()($()(t),"pickingService",Nn,$()(t)),qt()($()(t),"shaderModuleService",jn,$()(t)),qt()($()(t),"markerService",Fn,$()(t)),qt()($()(t),"popupService",zn,$()(t)),d()($()(t),"inited",!1),d()($()(t),"initPromise",void 0),d()($()(t),"rendering",!1),d()($()(t),"$container",void 0),d()($()(t),"canvas",void 0),d()($()(t),"markerContainer",void 0),d()($()(t),"hooks",void 0),d()($()(t),"handleWindowResized",(function(){t.emit("resize"),t.$container&&(t.initContainer(),v["b"].triggerResize(),t.coordinateSystemService.needRefresh=!0,t.render())})),d()($()(t),"handleMapCameraChanged",(function(e){t.cameraService.update(e),t.render()})),t.hooks={init:new Vn["a"]},t}return p()(n,[{key:"init",value:function(t){var e=this;this.configService.setSceneConfig(this.id,t),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.fontService.init(),this.hooks.init.tapPromise("initMap",ke()(Pe.a.mark((function t(){return Pe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){e.map.onCameraChanged((function(n){e.cameraService.init(),e.cameraService.update(n),"GAODE2.x"!==e.map.version&&t()})),"GAODE2.x"!==e.map.version?e.map.init():t()}));case 2:if("GAODE2.x"!==e.map.version||!e.map.initViewPort){t.next=6;break}return t.next=5,e.map.init();case 5:e.map.initViewPort();case 6:e.map.onCameraChanged(e.handleMapCameraChanged),e.map.addMarkerContainer(),e.markerService.addMarkers(),e.markerService.addMarkerLayers(),e.popupService.initPopup(),e.interactionService.init(),e.interactionService.on(ee.Drag,e.addSceneEvent.bind(e));case 13:case"end":return t.stop()}}),t)})))),this.hooks.init.tapPromise("initRenderer",ke()(Pe.a.mark((function t(){var n;return Pe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=Wn(e.configService.getSceneConfig(e.id).id||""),e.$container=n,!n){t.next=11;break}return e.canvas=v["b"].create("canvas","",n),e.setCanvas(),t.next=7,e.rendererService.init(e.canvas,e.configService.getSceneConfig(e.id));case 7:Gn()(e.$container,e.handleWindowResized),window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)").addListener(e.handleWindowResized),t.next=12;break;case 11:console.error("\u5bb9\u5668 id \u4e0d\u5b58\u5728");case 12:e.pickingService.init(e.id);case 13:case"end":return t.stop()}}),t)})))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"addLayer",value:function(t){this.layerService.add(t),this.render()}},{key:"render",value:function(){var t=ke()(Pe.a.mark((function t(){return Pe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.rendering&&!this.destroyed){t.next=2;break}return t.abrupt("return");case 2:if(this.rendering=!0,this.inited){t.next=15;break}return t.next=6,this.initPromise;case 6:if(this.destroyed&&this.destroy(),!this.loadFont||!document.fonts){t.next=10;break}return t.next=10,document.fonts.load("24px ".concat(this.fontFamily),"L7text");case 10:this.layerService.initLayers(),this.controlService.addControls(),this.loaded=!0,this.emit("loaded"),this.inited=!0;case 15:this.layerService.renderLayers(),this.rendering=!1;case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"addFontFace",value:function(t,e){this.fontFamily=t;var n=document.createElement("style");n.type="text/css",n.innerText="\n        @font-face{\n            font-family: '".concat(t,"';\n            src: url('").concat(e,"') format('woff2'),\n            url('").concat(e,"') format('woff'),\n            url('").concat(e,"') format('truetype');\n        }"),document.getElementsByTagName("head")[0].appendChild(n),this.loadFont=!0}},{key:"getSceneContainer",value:function(){return this.$container}},{key:"exportPng",value:function(t){var e,n=null===(e=this.$container)||void 0===e?void 0:e.getElementsByTagName("canvas")[0];this.render();var r="jpg"===t?null===n||void 0===n?void 0:n.toDataURL("image/jpeg"):null===n||void 0===n?void 0:n.toDataURL("image/png");return r}},{key:"getSceneConfig",value:function(){return this.configService.getSceneConfig(this.id)}},{key:"addMarkerContainer",value:function(){var t=this.$container.parentElement;null!==t&&(this.markerContainer=v["b"].create("div","l7-marker-container",t))}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"destroy",value:function(){this.inited?(this.emit("destroy"),this.layerService.destroy(),this.rendererService.destroy(),this.map.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.removeAllListeners(),this.inited=!1,Object(qn["unbind"])(this.$container,this.handleWindowResized),window.matchMedia("screen and (min-resolution: 2dppx)").removeListener(this.handleWindowResized)):this.destroyed=!0}},{key:"initContainer",value:function(){var t,e,n=v["b"].DPR,r=(null===(t=this.$container)||void 0===t?void 0:t.clientWidth)||400,i=(null===(e=this.$container)||void 0===e?void 0:e.clientHeight)||300,o=this.canvas;o&&(o.width=r*n,o.height=i*n,o.style.width="".concat(r,"px"),o.style.height="".concat(i,"px")),this.rendererService.viewport({x:0,y:0,width:n*r,height:n*i})}},{key:"setCanvas",value:function(){var t,e,n=v["b"].DPR,r=(null===(t=this.$container)||void 0===t?void 0:t.clientWidth)||400,i=(null===(e=this.$container)||void 0===e?void 0:e.clientHeight)||300,o=this.canvas;o.width=r*n,o.height=i*n,o.style.width="".concat(r,"px"),o.style.height="".concat(i,"px")}},{key:"addSceneEvent",value:function(t){this.emit(t.type,t)}}]),n}(r["EventEmitter"]),Cn=Ht()(Sn.prototype,"id",[un],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tn=Ht()(Sn.prototype,"iconService",[cn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),On=Ht()(Sn.prototype,"fontService",[ln],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),An=Ht()(Sn.prototype,"controlService",[fn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kn=Ht()(Sn.prototype,"configService",[pn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mn=Ht()(Sn.prototype,"map",[hn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pn=Ht()(Sn.prototype,"coordinateSystemService",[dn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),In=Ht()(Sn.prototype,"rendererService",[vn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ln=Ht()(Sn.prototype,"layerService",[mn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rn=Ht()(Sn.prototype,"cameraService",[gn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dn=Ht()(Sn.prototype,"interactionService",[yn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nn=Ht()(Sn.prototype,"pickingService",[bn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jn=Ht()(Sn.prototype,"shaderModuleService",[_n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fn=Ht()(Sn.prototype,"markerService",[xn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zn=Ht()(Sn.prototype,"popupService",[wn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),En=Sn))||En),Kn=n("9Sz/"),Jn=n.n(Kn);function Qn(t){var e=0;switch(t){case"vec2":case"ivec2":e=2;break;case"vec3":case"ivec3":e=3;break;case"vec4":case"ivec4":case"mat2":e=4;break;case"mat3":e=9;break;case"mat4":e=16;break;default:}return e}var $n,tr,er=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function nr(t){var e={};return t=t.replace(er,(function(t,n,r){var i=r.split(":"),o=i[0].trim(),a="";switch(i.length>1&&(a=i[1].trim()),n){case"bool":a="true"===a;break;case"float":case"int":a=Number(a);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":a=a?a.replace("[","").replace("]","").split(",").reduce((function(t,e){return t.push(Number(e.trim())),t}),[]):new Array(Qn(n)).fill(0);break;default:}return e[o]=a,"uniform ".concat(n," ").concat(o,";\n")})),{content:t,uniforms:e}}function rr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ir(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rr(Object(n),!0).forEach((function(e){d()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var or,ar,sr,ur,cr,lr,fr="#define PI 3.14159265359",pr="#define SHIFT_RIGHT17 1.0 / 131072.0\n#define SHIFT_RIGHT18 1.0 / 262144.0\n#define SHIFT_RIGHT19 1.0 / 524288.0\n#define SHIFT_RIGHT20 1.0 / 1048576.0\n#define SHIFT_RIGHT21 1.0 / 2097152.0\n#define SHIFT_RIGHT22 1.0 / 4194304.0\n#define SHIFT_RIGHT23 1.0 / 8388608.0\n#define SHIFT_RIGHT24 1.0 / 16777216.0\n\n#define SHIFT_LEFT17 131072.0\n#define SHIFT_LEFT18 262144.0\n#define SHIFT_LEFT19 524288.0\n#define SHIFT_LEFT20 1048576.0\n#define SHIFT_LEFT21 2097152.0\n#define SHIFT_LEFT22 4194304.0\n#define SHIFT_LEFT23 8388608.0\n#define SHIFT_LEFT24 16777216.0\n\nvec2 unpack_float(float packedValue) {\n  int packedIntValue = int(packedValue);\n  int v0 = packedIntValue / 256;\n  return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec4 decode_color(vec2 encodedColor) {\n  return vec4(\n    unpack_float(encodedColor[0]) / 255.0,\n    unpack_float(encodedColor[1]) / 255.0\n  );\n}\n",hr="#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\n\nfloat calc_lighting(vec4 pos) {\n\n    vec3 worldPos = vec3(pos * u_ModelMatrix);\n\n    vec3 worldNormal = a_Normal;\n      // //cal light weight\n    vec3 viewDir = normalize(u_CameraPosition - worldPos);\n\n    vec3 lightDir = normalize(vec3(1, -10.5, 12));\n\n    vec3 halfDir = normalize(viewDir+lightDir);\n      // //lambert\n    float lambert = dot(worldNormal, lightDir);\n        //specular\n    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);\n        //sum to light weight\n    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;\n\n    return lightWeight;\n}\n",dr="// Blinn-Phong model\n// apply lighting in vertex shader instead of fragment shader\n// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting\nuniform float u_Ambient : 1.0;\nuniform float u_Diffuse : 1.0;\nuniform float u_Specular : 1.0;\nuniform int u_NumOfDirectionalLights : 1;\nuniform int u_NumOfSpotLights : 0;\n\n#define SHININESS 32.0\n#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3\n#define MAX_NUM_OF_SPOT_LIGHTS 3\n\nstruct DirectionalLight {\n  vec3 direction;\n  vec3 ambient;\n  vec3 diffuse;\n  vec3 specular;\n};\n\nstruct SpotLight {\n  vec3 position;\n  vec3 direction;\n  vec3 ambient;\n  vec3 diffuse;\n  vec3 specular;\n  float constant;\n  float linear;\n  float quadratic;\n  float angle;\n  float blur;\n  float exponent;\n};\n\nuniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];\nuniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];\n\nvec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {\n  vec3 lightDir = normalize(light.direction);\n  // diffuse shading\n  float diff = max(dot(normal, lightDir), 0.0);\n  // Blinn-Phong specular shading\n  vec3 halfwayDir = normalize(lightDir + viewDir);\n  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);\n\n  vec3 ambient = light.ambient * u_Ambient;\n  vec3 diffuse = light.diffuse * diff * u_Diffuse;\n  vec3 specular = light.specular * spec * u_Specular;\n\n  return ambient + diffuse + specular;\n}\n\n// vec3 calc_spot_light(SpotLight light, vec3 normal, vec3 fragPos, vec3 viewDir) {\n//   vec3 lightDir = normalize(light.position - fragPos);\n//   // diffuse shading\n//   float diff = max(dot(normal, lightDir), 0.0);\n//   // specular shading\n//   vec3 reflectDir = reflect(-lightDir, normal);\n//   float spec = pow(max(dot(viewDir, reflectDir), 0.0), SHININESS);\n//   // attenuation\n//   float distance = length(light.position - fragPos);\n//   float attenuation = 1.0 / (light.constant + light.linear * distance +\n//           light.quadratic * (distance * distance));\n\n//   vec3 ambient = light.ambient * u_Ambient;\n//   vec3 diffuse = light.diffuse * diff * u_Diffuse;\n//   vec3 specular = light.specular * spec * u_Specular;\n\n//   float spotEffect = dot(normalize(light.direction), -lightDir);\n//   float spotCosCutoff = cos(light.angle / 180.0 * PI);\n//   float spotCosOuterCutoff = cos((light.angle + light.blur) / 180.0 * PI);\n//   float spotCosInnerCutoff = cos((light.angle - light.blur) / 180.0 * PI);\n//   if (spotEffect > spotCosCutoff) {\n//     spotEffect = pow(smoothstep(spotCosOuterCutoff, spotCosInnerCutoff, spotEffect), light.exponent);\n//   } else {\n//     spotEffect = 0.0;\n//   }\n\n//   return ambient + attenuation * (spotEffect * diffuse + specular);\n// }\n\nvec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {\n  vec3 weight = vec3(0.0);\n  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {\n    if (i >= u_NumOfDirectionalLights) {\n      break;\n    }\n    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);\n  }\n  // for (int i = 0; i < MAX_NUM_OF_SPOT_LIGHTS; i++) {\n  //   if (i >= u_NumOfSpotLights) {\n  //     break;\n  //   }\n  //   weight += calc_spot_light(u_SpotLights[i], normal, position, viewDir);\n  // }\n  return weight;\n}\n",vr="varying vec4 v_PickingResult;\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\nuniform float u_PickingStage : 0.0;\n\n#define PICKING_NONE 0.0\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\n/*\n * Returns highlight color if this item is selected.\n */\nvec4 filterHighlightColor(vec4 color) {\n  bool selected = bool(v_PickingResult.a);\n\n  if (selected) {\n    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;\n\n    float highLightAlpha = highLightColor.a;\n    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));\n\n    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\n    return vec4(resultRGB, color.a);\n  } else {\n    return color;\n  }\n}\n\n/*\n * Returns picking color if picking enabled else unmodified argument.\n */\nvec4 filterPickingColor(vec4 color) {\n  vec3 pickingColor = v_PickingResult.rgb;\n  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;\n}\n\n/*\n * Returns picking color if picking is enabled if not\n * highlight color if this item is selected, otherwise unmodified argument.\n */\nvec4 filterColor(vec4 color) {\n  return filterPickingColor(filterHighlightColor(color));\n}\n",mr="attribute vec3 a_PickingColor;\nvarying vec4 v_PickingResult;\n\nuniform vec3 u_PickingColor : [0, 0, 0];\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\nuniform float u_PickingStage : 0.0;\nuniform float u_PickingThreshold : 1.0;\nuniform float u_PickingBuffer: 0.0;\n\n#define PICKING_NONE 0.0\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&\n    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&\n    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;\n}\n\nvoid setPickingColor(vec3 pickingColor) {\n  // compares only in highlight stage\n  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));\n\n  // Stores the picking color so that the fragment shader can render it during picking\n  v_PickingResult.rgb = pickingColor * COLOR_SCALE;\n}\n\nfloat setPickingSize(float x) {\n   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;\n}\n\nfloat setPickingOrder(float z) {\n   bool selected = bool(v_PickingResult.a);\n   return selected ? z + 1. : 0.;\n}\n",gr="\n#define E 2.718281828459045\nvec2 ProjectFlat(vec2 lnglat){\n  float maxs=85.0511287798;\n  float lat=max(min(maxs,lnglat.y),-maxs);\n  float scale= 268435456.;\n  float d=PI/180.;\n  float x=lnglat.x*d;\n  float y=lat*d;\n  y=log(tan((PI/4.)+(y/2.)));\n\n  float a=.5/PI,\n  b=.5,\n  c=-.5/PI;\n  d=.5;\n  x=scale*(a*x+b);\n  y=scale*(c*y+d);\n  return vec2(x,y);\n}\n\nvec2 unProjectFlat(vec2 px){\n  float a=.5/PI;\n  float b=.5;\n  float c=-.5/PI;\n  float d=.5;\n  float scale = 268435456.;\n  float x=(px.x/scale-b)/a;\n  float y=(px.y/scale-d)/c;\n  y=(atan(pow(E,y))-(PI/4.))*2.;\n  d=PI/180.;\n  float lat=y/d;\n  float lng=x/d;\n  return vec2(lng,lat);\n}\n\nfloat pixelDistance(vec2 from, vec2 to) {\n vec2 a1 = ProjectFlat(from);\n vec2 b1 = ProjectFlat(to);\n return distance(a1, b1);\n}\n\n// gaode2.0\nvec2 customProject(vec2 lnglat) { // \u7ecf\u7eac\u5ea6 => \u5e73\u9762\u5750\u6807\n  float t = lnglat.x;\n  float e = lnglat.y;\n  float Sm = 180.0 / PI;\n  float Tm = 6378137.0;\n  float Rm = PI / 180.0;\n  float r = 85.0511287798;\n  e = max(min(r, e), -r);\n  t *= Rm;\n  e *= Rm;\n  e = log(tan(PI / 4.0 + e / 2.0));\n  return vec2(t * Tm, e * Tm);\n}\n\nvec2 unProjCustomCoord(vec2 point) { // \u5e73\u9762\u5750\u6807 => \u7ecf\u7eac\u5ea6\n  float Sm = 57.29577951308232; //180 / Math.PI\n  float Tm = 6378137.0;\n  float t = point.x;\n  float e = point.y;\n  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);\n}\n\n\nfloat customPixelDistance(vec2 from, vec2 to) {\n vec2 a1 = ProjectFlat(from);\n vec2 b1 = ProjectFlat(to);\n return distance(a1, b1);\n}",yr="#define TILE_SIZE 512.0\n#define PI 3.1415926536\n#define WORLD_SCALE TILE_SIZE / (PI * 2.0)\n\n#define COORDINATE_SYSTEM_LNGLAT 1.0\n#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0\n#define COORDINATE_SYSTEM_VECTOR_TILE 3.0\n#define COORDINATE_SYSTEM_IDENTITY 4.0\n#define COORDINATE_SYSTEM_P20 5.0\n#define COORDINATE_SYSTEM_P20_OFFSET 6.0\n#define COORDINATE_SYSTEM_METER_OFFSET 7.0\n\n#define COORDINATE_SYSTEM_P20_2 8.0\n\nuniform mat4 u_ViewMatrix;\nuniform mat4 u_ProjectionMatrix;\nuniform mat4 u_ViewProjectionMatrix;\nuniform float u_Zoom : 1;\nuniform float u_ZoomScale : 1;\n\nuniform float u_CoordinateSystem;\nuniform vec2 u_ViewportCenter;\nuniform vec4 u_ViewportCenterProjection;\nuniform vec3 u_PixelsPerDegree;\nuniform vec3 u_PixelsPerDegree2;\nuniform vec3 u_PixelsPerMeter;\n\nuniform vec2 u_ViewportSize;\nuniform float u_DevicePixelRatio;\nuniform float u_FocalDistance;\nuniform vec3 u_CameraPosition;\n\n// uniform mat4 u_Mvp;\n\n// web mercator coords -> world coords\nvec2 project_mercator(vec2 lnglat) {\n  float x = lnglat.x;\n  return vec2(\n    radians(x) + PI,\n    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))\n  );\n}\n\nfloat project_scale(float meters) {\n  return meters * u_PixelsPerMeter.z;\n}\n\n\n// offset coords -> world coords\nvec4 project_offset(vec4 offset) {\n  float dy = offset.y;\n  dy = clamp(dy, -1., 1.);\n  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;\n  return vec4(offset.xyz * pixels_per_unit, offset.w);\n}\n\nvec3 project_normal(vec3 normal) {\n  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);\n  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);\n}\n\nvec3 project_offset_normal(vec3 vector) {\n  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01\n    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    // normals generated by the polygon tesselator are in lnglat offsets instead of meters\n    return normalize(vector * u_PixelsPerDegree);\n  }\n  return project_normal(vector);\n}\n// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01\n// reverse Y\nvec3 reverse_offset_normal(vec3 vector) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {\n    return vector * vec3(1.0, -1.0, 1.0);\n  }\n\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0\n    return vector;\n  }\n  return vector;\n}\n\nvec4 project_position(vec4 position) {\n  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;\n  float b = COORDINATE_SYSTEM_P20_OFFSET;\n  float c = COORDINATE_SYSTEM_LNGLAT;\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET\n    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    float X = position.x - u_ViewportCenter.x;\n    float Y = position.y - u_ViewportCenter.y;\n    return project_offset(vec4(X, Y, position.z, position.w));\n  }\n  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {\n    return vec4(\n      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,\n      project_scale(position.z),\n      position.w\n    );\n  }\n\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {\n    return vec4(\n      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),\n      project_scale(position.z),\n      position.w\n    );\n  }\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    // return vec4(\n    //   (position.xy * WORLD_SCALE * u_ZoomScale) * vec2(1., -1.), \n    //   project_scale(position.z), \n    //   position.w);\n\n     return vec4(\n      position.xy, \n      project_scale(position.z), \n      position.w);\n  }\n  return position;\n\n  // TODO: \u74e6\u7247\u5750\u6807\u7cfb & \u5e38\u89c4\u4e16\u754c\u5750\u6807\u7cfb\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;\n  return offset * u_FocalDistance;\n}\n\nfloat project_pixel_allmap(float pixel) {\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n    return pixel * pow(2.0, u_Zoom);\n  }\n  return pixel;\n}\n\nfloat project_pixel(float pixel) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    // P20 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf1\n    return pixel * pow(2.0, (19.0 - u_Zoom));\n  }\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    // P20_2 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf3\n    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));\n  }\n  return pixel;\n}\nvec2 project_pixel(vec2 pixel) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    // P20 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf1\n    return pixel * pow(2.0, (19.0 - u_Zoom));\n  }\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    // P20_2 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf3\n    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));\n  }\n  return pixel * -1.;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    // Needs to be divided with project_uCommonUnitsPerMeter\n    position.w *= u_PixelsPerMeter.z;\n  }\n\n  return viewProjectionMatrix * position + center;\n}\n\n// Projects from common space coordinates to clip space\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(\n    position,\n    u_ViewProjectionMatrix,\n    u_ViewportCenterProjection\n  );\n}\n\nvec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {\n  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);\n\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    // Needs to be divided with project_uCommonUnitsPerMeter\n     pos.w = pos.w / u_PixelsPerMeter.z;\n  }\n  return pos;\n}\n\n\nbool isEqual( float a,  float b) {\n    return  a< b + 0.001 && a > b - 0.001;\n}",br="/**\n * 2D signed distance field functions\n * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n */\n\nfloat ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }\n\nfloat sdCircle(vec2 p, float r) {\n  return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(vec2 p) {\n  float k = sqrt(3.0);\n  p.x = abs(p.x) - 1.0;\n  p.y = p.y + 1.0/k;\n  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;\n  p.x -= clamp( p.x, -2.0, 0.0 );\n  return -length(p)*sign(p.y);\n}\n\nfloat sdBox(vec2 p, vec2 b) {\n  vec2 d = abs(p)-b;\n  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);\n}\n\nfloat sdPentagon(vec2 p, float r) {\n  vec3 k = vec3(0.809016994,0.587785252,0.726542528);\n  p.x = abs(p.x);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagon(vec2 p, float r) {\n  vec3 k = vec3(-0.866025404,0.5,0.577350269);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdOctogon(vec2 p, float r) {\n  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );\n  p = abs(p);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagram(vec2 p, float r) {\n  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;\n  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdRhombus(vec2 p, vec2 b) {\n  vec2 q = abs(p);\n  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);\n  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );\n  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );\n}\n\nfloat sdVesica(vec2 p, float r, float d) {\n  p = abs(p);\n  float b = sqrt(r*r-d*d); // can delay this sqrt\n  return ((p.y-b)*d>p.x*b)\n          ? length(p-vec2(0.0,b))\n          : length(p-vec2(-d,0.0))-r;\n}\n",_r="attribute float a_vertexId;\n\nuniform mat4 u_cellTypeLayout;      // \u63cf\u8ff0\u6570\u636e\u7eb9\u7406 cell \u7ed3\u6784\u7684\u77e9\u9635\nuniform sampler2D u_dataTexture;    // \u6570\u636e\u7eb9\u7406\n\nbool hasOpacity() { // \u5224\u65ad cell \u4e2d\u662f\u5426\u5b58\u5728 opacity \u7684\u6570\u636e\n  return u_cellTypeLayout[1][0] > 0.0 && u_cellTypeLayout[3][3] > 0.0;\n}\n\nbool hasStrokeOpacity() { // \u5224\u65ad cell \u4e2d\u662f\u5426\u5b58\u5728 strokeOpacity \u7684\u6570\u636e\n  return u_cellTypeLayout[1][1] > 0.0 && u_cellTypeLayout[3][3] > 0.0;\n}\n\nbool hasStrokeWidth() { // \u5224\u65ad cell \u4e2d\u662f\u5426\u5b58\u5728 strokeWidth \u7684\u6570\u636e\n  return u_cellTypeLayout[1][2] > 0.0 && u_cellTypeLayout[3][3] > 0.0;\n}\n\nbool hasStroke() { // \u5224\u65ad cell \u4e2d\u662f\u5426\u5b58\u5728 stroke \u7684\u6570\u636e\n  return u_cellTypeLayout[1][3] > 0.0 && u_cellTypeLayout[3][3] > 0.0;\n}\n\nbool hasOffsets() { // \u5224\u65ad cell \u4e2d\u662f\u5426\u5b58\u5728 offsets \u7684\u6570\u636e\n  return u_cellTypeLayout[2][0] > 0.0 && u_cellTypeLayout[3][3] > 0.0;\n}\n\n// \u6839\u636e\u5750\u6807\u4f4d\u7f6e\u5148\u662f\u8ba1\u7b97 uv \uff0c\u7136\u540e\u6839\u636e uv \u4ece\u6570\u636e\u7eb9\u7406\u4e2d\u53d6\u503c\nfloat pos2value(vec2 pos, float columnWidth, float rowHeight) {\n  float u = (pos.r - 1.0) * columnWidth + columnWidth/2.0;\n  float v = 1.0 - ((pos.g - 1.0) * rowHeight + rowHeight/2.0);\n  return texture2D(u_dataTexture, vec2(u, v)).r;\n}\n\n/*\n  currentRow \u5f53\u524d\u884c\n  currentColumn \u5f53\u524d\u5217\n  columnCount \u6709\u591a\u5c11\u5217\n  nextStep \u9700\u8981\u8ba1\u7b97\u5f53\u524d cell \u540e\u7684\u7b2c\u51e0\u4e2a cell \uff08\u5f53\u524d cell \u5219 nextStep = 0\uff09\n*/\nvec2 nextPos(float currentRow, float currentColumn, float columnCount, float nextStep) {\n  float nextColumn = currentColumn;\n  float nextRow = currentRow;\n  if(currentColumn + nextStep <= columnCount){\n    nextColumn = currentColumn + nextStep;\n  } else {\n    nextColumn = mod(currentColumn + nextStep, columnCount); // \u4e0d\u4f1a\u51fa\u73b0\u8de8\u4e24\u884c\n    nextRow = currentRow + 1.0;\n  }\n  return vec2(nextColumn, nextRow);\n}\n\n// \u8ba1\u7b97\u5f53\u524d\u5355\u4e2a cell \u7684\u5927\u5c0f\nfloat calCellCount() { \n  //   u_cellTypeLayout\n  //   cal_height, WIDTH, 0.0, 0.0, // rowCount columnCount - \u51e0\u884c\u51e0\u5217\n  //   1.0, 1.0, 1.0, 0.0, // opacity strokeOpacity strokeWidth stroke - 1.0 \u8868\u793a\u6709\u6570\u636e\u6620\u5c04\u30010.0 \u8868\u793a\u6ca1\u6709\n  //   1.0, 0.0, 0.0, 0.0, // offsets\n  //   0.0, 0.0, 0.0, 0.0\n  \n  return  u_cellTypeLayout[1][0] +        // opacity\n          u_cellTypeLayout[1][1] +        // strokeOpacity\n          u_cellTypeLayout[1][2] +        // strokeWidth\n          u_cellTypeLayout[1][3] * 4.0 +  // stroke\n          u_cellTypeLayout[2][0] * 2.0;   // offsets\n}",xr="\n// \u8ba1\u7b97 opacity \u548c\u6807\u793a\u5728 cell \u4e2d\u53d6\u503c\u4f4d\u7f6e\u7684\u504f\u79fb\u91cf textureOffset\nvec2 calOpacityAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {\n  if(!hasOpacity()) { // \u6570\u636e\u7eb9\u7406\u4e2d\u4e0d\u5b58\u5728 opacity \u7684\u65f6\u5019\u53d6\u9ed8\u8ba4\u503c\uff08\u7528\u6237\u5728 style \u4e2d\u4f20\u5165\u7684\u662f\u5e38\u91cf\uff09\n    return vec2(u_opacity, textureOffset);\n  } else {\n    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    float textureOpacity = pos2value(valuePos, columnWidth, rowHeight);\n    return vec2(textureOpacity, textureOffset + 1.0);\n  }\n}\n",wr="\n// \u8ba1\u7b97 strokeOpaicty \u548c\u6807\u793a\u5728 cell \u4e2d\u53d6\u503c\u4f4d\u7f6e\u7684\u504f\u79fb\u91cf textureOffset\nvec2 calStrokeOpacityAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {\n  if(!hasStrokeOpacity()) {\n    return vec2(u_stroke_opacity, textureOffset);\n  } else {\n    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    float textureStrokeOpacity = pos2value(valuePos, columnWidth, rowHeight);\n    return vec2(textureStrokeOpacity, textureOffset + 1.0);\n  }\n}\n",Er="\n// \u8ba1\u7b97 strokeWidth \u548c\u6807\u793a\u5728 cell \u4e2d\u53d6\u503c\u4f4d\u7f6e\u7684\u504f\u79fb\u91cf textureOffset\nvec2 calStrokeWidthAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {\n  if(!hasStrokeWidth()) {\n    return vec2(u_stroke_width, textureOffset);\n  } else {\n    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    float textureStrokeWidth = pos2value(valuePos, columnWidth, rowHeight);\n    return vec2(textureStrokeWidth, textureOffset + 1.0);\n  }\n}\n",Sr=/precision\s+(high|low|medium)p\s+float/,Cr="#ifdef GL_FRAGMENT_PRECISION_HIGH\n precision highp float;\n #else\n precision mediump float;\n#endif\n",Tr=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,Or=($n=Object(o["injectable"])(),$n(tr=function(){function t(){l()(this,t),d()(this,"moduleCache",{}),d()(this,"rawContentCache",{})}return p()(t,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("common",{vs:fr,fs:fr}),this.registerModule("decode",{vs:pr,fs:""}),this.registerModule("projection",{vs:yr,fs:""}),this.registerModule("project",{vs:gr,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:br}),this.registerModule("lighting",{vs:dr,fs:""}),this.registerModule("light",{vs:hr,fs:""}),this.registerModule("picking",{vs:mr,fs:vr}),this.registerModule("styleMapping",{vs:_r,fs:""}),this.registerModule("styleMappingCalOpacity",{vs:xr,fs:""}),this.registerModule("styleMappingCalStrokeOpacity",{vs:wr,fs:""}),this.registerModule("styleMappingCalStrokeWidth",{vs:Er,fs:""})}},{key:"registerModule",value:function(t,e){if(!this.rawContentCache[t]){var n=e.vs,r=e.fs,i=e.uniforms,o=nr(n),a=o.content,s=o.uniforms,u=nr(r),c=u.content,l=u.uniforms;this.rawContentCache[t]={fs:c,uniforms:ir(ir(ir({},s),l),i),vs:a}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(t){var e=this;if(this.moduleCache[t])return this.moduleCache[t];var n=this.rawContentCache[t].vs,r=this.rawContentCache[t].fs,i=this.processModule(n,[],"vs"),o=i.content,a=i.includeList,s=this.processModule(r,[],"fs"),u=s.content,c=s.includeList,l=u,f=Jn()(a.concat(c).concat(t)).reduce((function(t,n){return ir(ir({},t),e.rawContentCache[n].uniforms)}),{});return Sr.test(u)||(l=Cr+u),this.moduleCache[t]={fs:l.trim(),uniforms:f,vs:o.trim()},this.moduleCache[t]}},{key:"processModule",value:function(t,e,n){var r=this,i=t.replace(Tr,(function(t,i){var o=i.split(" "),a=o[0].replace(/"/g,"");if(e.indexOf(a)>-1)return"";var s=r.rawContentCache[a][n];e.push(a);var u=r.processModule(s,e,n),c=u.content;return c}));return{content:i,includeList:e}}}]),t}())||tr),Ar=n("YNYt"),kr=n.n(Ar);(function(t){t["Normal"]="normal",t["PostProcessing"]="post-processing"})(or||(or={}));var Mr,Pr,Ir=(ar=Object(o["injectable"])(),sr=Object(o["inject"])(u.IShaderModuleService),ar((cr=function(){function t(){l()(this,t),qt()(this,"shaderModuleService",lr,this),d()(this,"rendererService",void 0),d()(this,"cameraService",void 0),d()(this,"mapService",void 0),d()(this,"interactionService",void 0),d()(this,"layerService",void 0),d()(this,"config",void 0)}return p()(t,[{key:"getName",value:function(){return""}},{key:"getType",value:function(){return or.Normal}},{key:"init",value:function(t,e){this.config=e,this.rendererService=t.getContainer().get(u.IRendererService),this.cameraService=t.getContainer().get(u.ICameraService),this.mapService=t.getContainer().get(u.IMapService),this.interactionService=t.getContainer().get(u.IInteractionService),this.layerService=t.getContainer().get(u.ILayerService)}},{key:"render",value:function(t){}}]),t}(),lr=Ht()(cr.prototype,"shaderModuleService",[sr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ur=cr))||ur);function Lr(t){var e=Rr();return function(){var n,r=ot()(t);if(e){var i=ot()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rt()(this,n)}}function Rr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Dr,Nr,jr,Fr,zr,Br=(Mr=Object(o["injectable"])(),Mr(Pr=function(t){et()(n,t);var e=Lr(n);function n(){return l()(this,n),e.apply(this,arguments)}return p()(n,[{key:"getName",value:function(){return"clear"}},{key:"init",value:function(t,e){kr()(ot()(n.prototype),"init",this).call(this,t,e)}},{key:"render",value:function(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),n}(Ir))||Pr);function Ur(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Vr(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function Vr(t,e){if(t){if("string"===typeof t)return qr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qr(t,e):void 0}}function qr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Gr,Hr,Wr=(Dr=Object(o["injectable"])(),Nr=Object(o["inject"])(u.IPostProcessor),Dr((Fr=function(){function t(){l()(this,t),d()(this,"passes",[]),qt()(this,"postProcessor",zr,this),d()(this,"layer",void 0),d()(this,"renderFlag",void 0),d()(this,"width",0),d()(this,"height",0)}return p()(t,[{key:"setLayer",value:function(t){this.layer=t}},{key:"setRenderFlag",value:function(t){this.renderFlag=t}},{key:"getRenderFlag",value:function(){return this.renderFlag}},{key:"getPostProcessor",value:function(){return this.postProcessor}},{key:"render",value:function(){var t=ke()(Pe.a.mark((function t(){var e,n,r;return Pe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Ur(this.passes),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return r=n.value,t.next=7,r.render(this.layer);case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:this.layer.renderModels();case 18:case"end":return t.stop()}}),t,this,[[1,11,14,17]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"resize",value:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e)}},{key:"add",value:function(t,e){t.getType()===or.PostProcessing?this.postProcessor.add(t,this.layer,e):(t.init(this.layer,e),this.passes.push(t))}},{key:"insert",value:function(t,e,n){t.init(this.layer,e),this.passes.splice(n,0,t)}},{key:"destroy",value:function(){this.passes.length=0}}]),t}(),zr=Ht()(Fr.prototype,"postProcessor",[Nr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jr=Fr))||jr);function Xr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Zr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xr(Object(n),!0).forEach((function(e){d()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Yr(t){var e=Kr();return function(){var n,r=ot()(t);if(e){var i=ot()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rt()(this,n)}}function Kr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Jr,Qr,$r,ti,ei,ni=(Gr=Object(o["injectable"])(),Gr(Hr=function(t){et()(n,t);var e=Yr(n);function n(){var t;l()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),d()($()(t),"pickingFBO",void 0),d()($()(t),"layer",void 0),d()($()(t),"width",0),d()($()(t),"height",0),d()($()(t),"alreadyInRendering",!1),d()($()(t),"pickFromPickingFBO",(function(e){var n=e.x,r=e.y,i=e.lngLat,o=e.type;if(t.layer.isVisible()&&t.layer.needPick(o)){var a,s=t.rendererService,u=s.getViewportSize,c=s.readPixels,l=s.useFramebuffer,f=u(),p=f.width,h=f.height,d=t.layer.getLayerConfig(),m=d.enableHighlight,g=d.enableSelect,y=n*v["b"].DPR,b=r*v["b"].DPR;if(!(y>p||y<0||b>h||b<0))l(t.pickingFBO,(function(){var e;if(a=c({x:Math.round(y),y:Math.round(h-(r+1)*v["b"].DPR),width:1,height:1,data:new Uint8Array(4),framebuffer:t.pickingFBO}),0!==a[0]||0!==a[1]||0!==a[2]){var s=Object(v["l"])(a),u=t.layer.getSource().getFeatureById(s),l={x:n,y:r,type:o,lngLat:i,featureId:s,feature:u};u&&(t.layer.setCurrentPickId(s),t.triggerHoverOnLayer(l))}else{var f={x:n,y:r,lngLat:i,type:null===t.layer.getCurrentPickId()?"un"+o:"mouseout",featureId:null,feature:null};t.triggerHoverOnLayer(Zr(Zr({},f),{},{type:"unpick"})),t.triggerHoverOnLayer(f),t.layer.setCurrentPickId(null)}m&&t.highlightPickedFeature(a),g&&"click"===o&&(null===(e=a)||void 0===e?void 0:e.toString())!==[0,0,0,0].toString()&&t.selectFeature(a)}))}})),t}return p()(n,[{key:"getType",value:function(){return or.Normal}},{key:"getName",value:function(){return"pixelPicking"}},{key:"init",value:function(t,e){kr()(ot()(n.prototype),"init",this).call(this,t,e),this.layer=t;var r=this.rendererService,i=r.createTexture2D,o=r.createFramebuffer,a=r.getViewportSize,s=a(),u=s.width,c=s.height;this.pickingFBO=o({color:i({width:u,height:c,wrapS:de.CLAMP_TO_EDGE,wrapT:de.CLAMP_TO_EDGE})}),this.interactionService.on(ee.Hover,this.pickFromPickingFBO),this.interactionService.on(ee.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(ee.Active,this.highlightFeatureHandle.bind(this))}},{key:"render",value:function(t){var e=this;if(!this.alreadyInRendering){var n=this.rendererService,r=n.getViewportSize,i=n.useFramebuffer,o=n.clear,a=r(),s=a.width,u=a.height;this.alreadyInRendering=!0,this.width===s&&this.height===u||(this.pickingFBO.resize({width:s,height:u}),this.width=s,this.height=u),i(this.pickingFBO,(function(){o({framebuffer:e.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var n=e.layer.multiPassRenderer.getRenderFlag();e.layer.multiPassRenderer.setRenderFlag(!1),t.hooks.beforePickingEncode.call(),t.render(),t.hooks.afterPickingEncode.call(),e.layer.multiPassRenderer.setRenderFlag(n),e.alreadyInRendering=!1}))}}},{key:"triggerHoverOnLayer",value:function(t){this.layer.emit(t.type,t)}},{key:"highlightPickedFeature",value:function(t){var e=gt()(t,3),n=e[0],r=e[1],i=e[2];this.layer.hooks.beforeHighlight.call([n,r,i]),this.layerService.renderLayers()}},{key:"selectFeature",value:function(t){var e=gt()(t,3),n=e[0],r=e[1],i=e[2];this.layer.hooks.beforeSelect.call([n,r,i]),this.layerService.renderLayers()}},{key:"selectFeatureHandle",value:function(t){var e=t.featureId,n=Object(v["n"])(e);this.selectFeature(new Uint8Array(n))}},{key:"highlightFeatureHandle",value:function(t){var e=t.featureId,n=Object(v["n"])(e);this.highlightPickedFeature(new Uint8Array(n))}}]),n}(Ir))||Hr),ri=n("ETkz"),ii=n.n(ri),oi=n("0e3h"),ai=n.n(oi);function si(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ui(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?si(Object(n),!0).forEach((function(e){d()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):si(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ci,li,fi="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",pi=(Jr=Object(o["injectable"])(),Qr=Object(o["inject"])(u.IShaderModuleService),Jr((ti=function(){function t(){l()(this,t),qt()(this,"shaderModuleService",ei,this),d()(this,"rendererService",void 0),d()(this,"config",void 0),d()(this,"quad",fi),d()(this,"enabled",!0),d()(this,"renderToScreen",!1),d()(this,"model",void 0),d()(this,"name",void 0),d()(this,"optionsToUpdate",{})}return p()(t,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(t){this.name=t}},{key:"getType",value:function(){return or.PostProcessing}},{key:"init",value:function(t,e){this.config=e,this.rendererService=t.getContainer().get(u.IRendererService);var n=this.rendererService,r=n.createAttribute,i=n.createBuffer,o=n.createModel,a=this.setupShaders(),s=a.vs,c=a.fs,l=a.uniforms;this.model=o({vs:s,fs:c,attributes:{a_Position:r({buffer:i({data:[-4,-4,4,-4,0,4],type:de.FLOAT}),size:2})},uniforms:ui(ui({u_Texture:null},l),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:"copy"===this.getName()}})}},{key:"render",value:function(t){var e=this,n=t.multiPassRenderer.getPostProcessor(),r=this.rendererService,i=r.useFramebuffer,o=r.getViewportSize,a=r.clear,s=o(),u=s.width,c=s.height;i(this.renderToScreen?null:n.getWriteFBO(),(function(){a({framebuffer:n.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0}),e.model.draw({uniforms:ui({u_Texture:n.getReadFBO(),u_ViewportSize:[u,c]},e.convertOptionsToUniforms(e.optionsToUpdate))})}))}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(t){this.enabled=t}},{key:"setRenderToScreen",value:function(t){this.renderToScreen=t}},{key:"updateOptions",value:function(t){this.optionsToUpdate=ui(ui({},this.optionsToUpdate),t)}},{key:"setupShaders",value:function(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function(t){var e={};return Object.keys(t).forEach((function(n){en()(t[n])||(e["u_".concat(ii()(ai()(n)))]=t[n])})),e}}]),t}(),ei=Ht()(ti.prototype,"shaderModuleService",[Qr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$r=ti))||$r);function hi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function di(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?hi(Object(n),!0).forEach((function(e){d()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function vi(t){var e=mi();return function(){var n,r=ot()(t);if(e){var i=ot()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rt()(this,n)}}function mi(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var gi,yi,bi="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_BlurDir: [1.0, 0.0];\n\n// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv) * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);\n}",_i="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",xi=(ci=Object(o["injectable"])(),ci(li=function(t){et()(n,t);var e=vi(n);function n(){return l()(this,n),e.apply(this,arguments)}return p()(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:_i,fs:bi});var t=this.shaderModuleService.getModule("blur-pass"),e=t.vs,n=t.fs,r=t.uniforms,i=this.rendererService.getViewportSize(),o=i.width,a=i.height;return{vs:e,fs:n,uniforms:di(di({},r),{},{u_ViewportSize:[o,a]})}}},{key:"convertOptionsToUniforms",value:function(t){var e={};return en()(t.blurRadius)||(e.u_BlurDir=[t.blurRadius,0]),e}}]),n}(pi))||li);function wi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ei(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wi(Object(n),!0).forEach((function(e){d()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Si(t){var e=Ci();return function(){var n,r=ot()(t);if(e){var i=ot()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rt()(this,n)}}function Ci(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Ti,Oi,Ai="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_BlurDir: [1.0, 0.0];\n\n// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv) * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);\n}",ki="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",Mi=(gi=Object(o["injectable"])(),gi(yi=function(t){et()(n,t);var e=Si(n);function n(){return l()(this,n),e.apply(this,arguments)}return p()(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:ki,fs:Ai});var t=this.shaderModuleService.getModule("blur-pass"),e=t.vs,n=t.fs,r=t.uniforms,i=this.rendererService.getViewportSize(),o=i.width,a=i.height;return{vs:e,fs:n,uniforms:Ei(Ei({},r),{},{u_ViewportSize:[o,a]})}}},{key:"convertOptionsToUniforms",value:function(t){var e={};return en()(t.blurRadius)||(e.u_BlurDir=[0,t.blurRadius]),e}}]),n}(pi))||yi);function Pi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ii(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pi(Object(n),!0).forEach((function(e){d()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Li(t){var e=Ri();return function(){var n,r=ot()(t);if(e){var i=ot()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rt()(this,n)}}function Ri(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Di,Ni,ji='varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_Center : [0.5, 0.5];\nuniform float u_Angle : 0;\nuniform float u_Size : 8;\n\n#pragma include "common"\n\nfloat scale = PI / u_Size;\n\nfloat pattern(float u_Angle, vec2 texSize, vec2 texCoord) {\n  float s = sin(u_Angle), c = cos(u_Angle);\n  vec2 tex = texCoord * texSize - u_Center * texSize;\n  vec2 point = vec2(\n    c * tex.x - s * tex.y,\n    s * tex.x + c * tex.y\n  ) * scale;\n  return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js\nvec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  vec3 cmy = 1.0 - color.rgb;\n  float k = min(cmy.x, min(cmy.y, cmy.z));\n  cmy = (cmy - k) / (1.0 - k);\n  cmy = clamp(\n    cmy * 10.0 - 3.0 + vec3(\n      pattern(u_Angle + 0.26179, texSize, texCoord),\n      pattern(u_Angle + 1.30899, texSize, texCoord),\n      pattern(u_Angle, texSize, texCoord)\n    ),\n    0.0,\n    1.0\n  );\n  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);\n  return vec4(1.0 - cmy - k, color.a);\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);\n}',Fi="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",zi=(Ti=Object(o["injectable"])(),Ti(Oi=function(t){et()(n,t);var e=Li(n);function n(){return l()(this,n),e.apply(this,arguments)}return p()(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:Fi,fs:ji});var t=this.shaderModuleService.getModule("colorhalftone-pass"),e=t.vs,n=t.fs,r=t.uniforms,i=this.rendererService.getViewportSize(),o=i.width,a=i.height;return{vs:e,fs:n,uniforms:Ii(Ii({},r),{},{u_ViewportSize:[o,a]})}}}]),n}(pi))||Oi);function Bi(t){var e=Ui();return function(){var n,r=ot()(t);if(e){var i=ot()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rt()(this,n)}}function Ui(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Vi,qi,Gi="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n}",Hi="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",Wi=(Di=Object(o["injectable"])(),Di(Ni=function(t){et()(n,t);var e=Bi(n);function n(){return l()(this,n),e.apply(this,arguments)}return p()(n,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("copy-pass",{vs:Hi,fs:Gi}),this.shaderModuleService.getModule("copy-pass")}}]),n}(pi))||Ni);function Xi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Zi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xi(Object(n),!0).forEach((function(e){d()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Yi(t){var e=Ki();return function(){var n,r=ot()(t);if(e){var i=ot()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rt()(this,n)}}function Ki(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Ji,Qi,$i="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_Center : [0.5, 0.5];\nuniform float u_Scale : 10;\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js\nvec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;\n  tex.y /= 0.866025404;\n  tex.x -= tex.y * 0.5;\n  vec2 a;\n  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {\n    a = vec2(floor(tex.x), floor(tex.y));\n  }\n  else a = vec2(ceil(tex.x), ceil(tex.y));\n  vec2 b = vec2(ceil(tex.x), floor(tex.y));\n  vec2 c = vec2(floor(tex.x), ceil(tex.y));\n  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);\n  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);\n  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);\n  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);\n  float alen = length(TEX - A);\n  float blen = length(TEX - B);\n  float clen = length(TEX - C);\n  vec2 choice;\n  if (alen < blen) {\n    if (alen < clen) choice = a;\n    else choice = c;\n  } else {\n    if (blen < clen) choice = b;\n    else choice = c;\n  }\n  choice.x += choice.y * 0.5;\n  choice.y *= 0.866025404;\n  choice *= u_Scale / texSize;\n  return texture2D(texture, choice + u_Center);\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);\n}",to="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",eo=(Vi=Object(o["injectable"])(),Vi(qi=function(t){et()(n,t);var e=Yi(n);function n(){return l()(this,n),e.apply(this,arguments)}return p()(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:to,fs:$i});var t=this.shaderModuleService.getModule("hexagonalpixelate-pass"),e=t.vs,n=t.fs,r=t.uniforms,i=this.rendererService.getViewportSize(),o=i.width,a=i.height;return{vs:e,fs:n,uniforms:Zi(Zi({},r),{},{u_ViewportSize:[o,a]})}}}]),n}(pi))||qi);function no(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ro(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?no(Object(n),!0).forEach((function(e){d()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):no(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function io(t){var e=oo();return function(){var n,r=ot()(t);if(e){var i=ot()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rt()(this,n)}}function oo(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var ao,so,uo="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform float u_Strength : 0.6;\n\nvec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 dx = vec2(1.0 / texSize.x, 0.0);\n  vec2 dy = vec2(0.0, 1.0 / texSize.y);\n  vec4 color = texture2D(texture, texCoord);\n  float bigTotal = 0.0;\n  float smallTotal = 0.0;\n  vec3 bigAverage = vec3(0.0);\n  vec3 smallAverage = vec3(0.0);\n  for (float x = -2.0; x <= 2.0; x += 1.0) {\n    for (float y = -2.0; y <= 2.0; y += 1.0) {\n      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;\n      bigAverage += sample;\n      bigTotal += 1.0;\n      if (abs(x) + abs(y) < 2.0) {\n        smallAverage += sample;\n        smallTotal += 1.0;\n      }\n    }\n  }\n  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);\n  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;\n  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);\n}",co="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",lo=(Ji=Object(o["injectable"])(),Ji(Qi=function(t){et()(n,t);var e=io(n);function n(){return l()(this,n),e.apply(this,arguments)}return p()(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("ink-pass",{vs:co,fs:uo});var t=this.shaderModuleService.getModule("ink-pass"),e=t.vs,n=t.fs,r=t.uniforms,i=this.rendererService.getViewportSize(),o=i.width,a=i.height;return{vs:e,fs:n,uniforms:ro(ro({},r),{},{u_ViewportSize:[o,a]})}}}]),n}(pi))||Qi);function fo(t){var e=po();return function(){var n,r=ot()(t);if(e){var i=ot()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rt()(this,n)}}function po(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var ho,vo,mo="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform float u_Amount : 0.5;\n\nfloat rand(vec2 co) {\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js\nvec4 noise_filterColor(vec4 color, vec2 texCoord) {\n  float diff = (rand(texCoord) - 0.5) * u_Amount;\n  color.r += diff;\n  color.g += diff;\n  color.b += diff;\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);\n}",go="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",yo=(ao=Object(o["injectable"])(),ao(so=function(t){et()(n,t);var e=fo(n);function n(){return l()(this,n),e.apply(this,arguments)}return p()(n,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("noise-pass",{vs:go,fs:mo}),this.shaderModuleService.getModule("noise-pass")}}]),n}(pi))||so);function bo(t){var e=_o();return function(){var n,r=ot()(t);if(e){var i=ot()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rt()(this,n)}}function _o(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var xo,wo,Eo,So,Co,To,Oo,Ao,ko="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",Mo="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nuniform float u_Amount : 0.5;\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js\nvec4 sepia_filterColor(vec4 color) {\n  float r = color.r;\n  float g = color.g;\n  float b = color.b;\n  color.r =\n    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));\n  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));\n  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = sepia_filterColor(gl_FragColor);\n}",Po=(ho=Object(o["injectable"])(),ho(vo=function(t){et()(n,t);var e=bo(n);function n(){return l()(this,n),e.apply(this,arguments)}return p()(n,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("sepia-pass",{vs:ko,fs:Mo}),this.shaderModuleService.getModule("sepia-pass")}}]),n}(pi))||vo),Io=(xo=Object(o["injectable"])(),wo=Object(o["inject"])(u.IRendererService),Eo=Object(o["postConstruct"])(),xo((Co=function(){function t(){l()(this,t),qt()(this,"rendererService",To,this),d()(this,"passes",[]),d()(this,"readFBO",void 0),d()(this,"writeFBO",void 0)}return p()(t,[{key:"getReadFBO",value:function(){return this.readFBO}},{key:"getWriteFBO",value:function(){return this.writeFBO}},{key:"render",value:function(){var t=ke()(Pe.a.mark((function t(e){var n,r;return Pe.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=0;case 1:if(!(n<this.passes.length)){t.next=10;break}return r=this.passes[n],r.setRenderToScreen(this.isLastEnabledPass(n)),t.next=6,r.render(e);case 6:n!==this.passes.length-1&&this.swap();case 7:n++,t.next=1;break;case 10:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"resize",value:function(t,e){this.readFBO.resize({width:t,height:e}),this.writeFBO.resize({width:t,height:e})}},{key:"add",value:function(t,e,n){t.init(e,n),this.passes.push(t)}},{key:"insert",value:function(t,e,n,r){t.init(n,r),this.passes.splice(e,0,t)}},{key:"getPostProcessingPassByName",value:function(t){return this.passes.find((function(e){return e.getName()===t}))}},{key:"init",value:function(){}},{key:"isLastEnabledPass",value:function(t){for(var e=t+1;e<this.passes.length;e++)if(this.passes[e].isEnabled())return!1;return!0}},{key:"swap",value:function(){var t=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=t}}]),t}(),To=Ht()(Co.prototype,"rendererService",[wo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ht()(Co.prototype,"init",[Eo],Object.getOwnPropertyDescriptor(Co.prototype,"init"),Co.prototype),So=Co))||So);function Lo(t){var e=Ro();return function(){var n,r=ot()(t);if(e){var i=ot()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rt()(this,n)}}function Ro(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Do,No,jo,Fo,zo,Bo=(Oo=Object(o["injectable"])(),Oo(Ao=function(t){et()(n,t);var e=Lo(n);function n(){return l()(this,n),e.apply(this,arguments)}return p()(n,[{key:"getType",value:function(){return or.Normal}},{key:"getName",value:function(){return"render"}},{key:"init",value:function(t,e){kr()(ot()(n.prototype),"init",this).call(this,t,e)}},{key:"render",value:function(t){var e=this.rendererService,n=e.useFramebuffer,r=e.clear;n(null,(function(){r({color:[0,0,0,0],depth:1,stencil:0}),t.multiPassRenderer.setRenderFlag(!1),t.render(),t.multiPassRenderer.setRenderFlag(!0)}))}}]),n}(Ir))||Ao);function Uo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Vo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Uo(Object(n),!0).forEach((function(e){d()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function qo(t){var e=Go();return function(){var n,r=ot()(t);if(e){var i=ot()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rt()(this,n)}}function Go(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Ho="uniform float u_opacity : 1.0;\nuniform float u_MixRatio : 0.5;\n\nuniform sampler2D u_Diffuse1;\nuniform sampler2D u_Diffuse2;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  vec4 texel1 = texture2D(u_Diffuse1, v_UV);\n  vec4 texel2 = texture2D(u_Diffuse2, v_UV);\n  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);\n}\n",Wo="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n}",Xo="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}";function Zo(t,e){var n=0,r=1/e,i=t;while(i>0)n+=r*(i%e),i=Math.floor(i/e),r/=e;return n}var Yo=1,Ko=(Do=Object(o["injectable"])(),No=Object(o["inject"])(u.IShaderModuleService),Do((Fo=function(t){et()(n,t);var e=qo(n);function n(){var t;l()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),qt()($()(t),"shaderModuleService",zo,$()(t)),d()($()(t),"haltonSequence",[]),d()($()(t),"accumulatingId",0),d()($()(t),"frame",0),d()($()(t),"timer",void 0),d()($()(t),"sampleRenderTarget",void 0),d()($()(t),"prevRenderTarget",void 0),d()($()(t),"outputRenderTarget",void 0),d()($()(t),"copyRenderTarget",void 0),d()($()(t),"blendModel",void 0),d()($()(t),"outputModel",void 0),d()($()(t),"copyModel",void 0),t}return p()(n,[{key:"getType",value:function(){return or.Normal}},{key:"getName",value:function(){return"taa"}},{key:"init",value:function(t,e){kr()(ot()(n.prototype),"init",this).call(this,t,e);var r=this.rendererService,i=r.createFramebuffer,o=r.createTexture2D;this.sampleRenderTarget=i({color:o({width:1,height:1,wrapS:de.CLAMP_TO_EDGE,wrapT:de.CLAMP_TO_EDGE})}),this.prevRenderTarget=i({color:o({width:1,height:1,wrapS:de.CLAMP_TO_EDGE,wrapT:de.CLAMP_TO_EDGE})}),this.outputRenderTarget=i({color:o({width:1,height:1,wrapS:de.CLAMP_TO_EDGE,wrapT:de.CLAMP_TO_EDGE})}),this.copyRenderTarget=i({color:o({width:1,height:1,wrapS:de.CLAMP_TO_EDGE,wrapT:de.CLAMP_TO_EDGE})});for(var a=0;a<30;a++)this.haltonSequence.push([Zo(a,2),Zo(a,3)]);this.blendModel=this.createTriangleModel("blend-pass",Ho),this.outputModel=this.createTriangleModel("copy-pass",Wo,{blend:{enable:!0,func:{srcRGB:de.ONE,dstRGB:de.ONE_MINUS_SRC_ALPHA,srcAlpha:de.ONE,dstAlpha:de.ONE_MINUS_SRC_ALPHA},equation:{rgb:de.FUNC_ADD,alpha:de.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",Wo)}},{key:"render",value:function(t){var e=this,n=this.rendererService,r=n.clear,i=n.getViewportSize,o=n.useFramebuffer,a=i(),s=a.width,u=a.height;this.sampleRenderTarget.resize({width:s,height:u}),this.prevRenderTarget.resize({width:s,height:u}),this.outputRenderTarget.resize({width:s,height:u}),this.copyRenderTarget.resize({width:s,height:u}),this.resetFrame(),this.stopAccumulating();var c=t.multiPassRenderer.getPostProcessor().getReadFBO();o(c,(function(){r({color:[0,0,0,0],depth:1,stencil:0,framebuffer:c}),t.multiPassRenderer.setRenderFlag(!1),t.render(),t.multiPassRenderer.setRenderFlag(!0)}));var l=function n(r){e.accumulatingId&&r===e.accumulatingId&&(e.isFinished()||(e.doRender(t),requestAnimationFrame((function(){n(r)}))))};this.accumulatingId=Yo++,this.timer=window.setTimeout((function(){l(e.accumulatingId)}),50)}},{key:"doRender",value:function(t){var e=this,n=this.rendererService,r=n.clear,i=n.getViewportSize,o=n.useFramebuffer,a=i(),s=a.width,u=a.height,c=t.getLayerConfig(),l=c.jitterScale,f=void 0===l?1:l,p=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((2*p[0]-1)/s*f,(2*p[1]-1)/u*f),t.multiPassRenderer.setRenderFlag(!1),t.hooks.beforeRender.call(),o(this.sampleRenderTarget,(function(){r({color:[0,0,0,0],depth:1,stencil:0,framebuffer:e.sampleRenderTarget}),t.render()})),t.hooks.afterRender.call(),t.multiPassRenderer.setRenderFlag(!0);var h=t.getLayerConfig();o(this.outputRenderTarget,(function(){e.blendModel.draw({uniforms:{u_opacity:h.opacity||1,u_MixRatio:0===e.frame?1:.9,u_Diffuse1:e.sampleRenderTarget,u_Diffuse2:0===e.frame?t.multiPassRenderer.getPostProcessor().getReadFBO():e.prevRenderTarget}})})),0===this.frame&&r({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(o(this.copyRenderTarget,(function(){e.outputModel.draw({uniforms:{u_Texture:e.outputRenderTarget}})})),o(t.multiPassRenderer.getPostProcessor().getReadFBO(),(function(){e.copyModel.draw({uniforms:{u_Texture:e.copyRenderTarget}})})),t.multiPassRenderer.getPostProcessor().render(t));var d=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=d,this.frame++,this.cameraService.clearJitterProjectionMatrix()}},{key:"isFinished",value:function(){return this.frame>=this.haltonSequence.length}},{key:"resetFrame",value:function(){this.frame=0}},{key:"stopAccumulating",value:function(){this.accumulatingId=0,window.clearTimeout(this.timer)}},{key:"createTriangleModel",value:function(t,e,n){this.shaderModuleService.registerModule(t,{vs:Xo,fs:e});var r=this.shaderModuleService.getModule(t),i=r.vs,o=r.fs,a=r.uniforms,s=this.rendererService,u=s.createAttribute,c=s.createBuffer,l=s.createModel;return l(Vo({vs:i,fs:o,attributes:{a_Position:u({buffer:c({data:[-4,-4,4,-4,0,4],type:de.FLOAT}),size:2})},uniforms:Vo({},a),depth:{enable:!1},count:3},n))}}]),n}(Ir),zo=Ht()(Fo.prototype,"shaderModuleService",[No],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jo=Fo))||jo),Jo=new o["Container"];Jo.bind(u.IGlobalConfigService).to(Ut).inSingletonScope(),Jo.bind(u.IShaderModuleService).to(Or).inSingletonScope(),Object(o["decorate"])(Object(o["injectable"])(),r["EventEmitter"]),Jo.bind(u.IEventEmitter).to(r["EventEmitter"]);var Qo=s()(Jo,!1),$o=function(t){var e=Qo.lazyInject(t);return function(t,n,r){e.call(this,t,n),r&&(r.initializer=function(){return t[n]})}},ta=function(t){var e=Qo.lazyMultiInject(t);return function(t,n,r){e.call(this,t,n),r&&(r.initializer=function(){return t[n]})}},ea=Jo,na=0;function ra(){var t=new o["Container"];return t.parent=Jo,t.bind(u.SceneID).toConstantValue("".concat(na++)),t.bind(u.ILayerService).to(Ye).inSingletonScope(),t.bind(u.ISceneService).to(Yn).inSingletonScope(),t.bind(u.ICameraService).to(bt).inSingletonScope(),t.bind(u.ICoordinateSystemService).to(ce).inSingletonScope(),t.bind(u.IInteractionService).to(Oe).inSingletonScope(),t.bind(u.IPickingService).to(Xe).inSingletonScope(),t.bind(u.IControlService).to(kt).inSingletonScope(),t.bind(u.IMarkerService).to(Mt).inSingletonScope(),t.bind(u.IIconService).to(vt).inSingletonScope(),t.bind(u.IFontService).to(J).inSingletonScope(),t.bind(u.IPopupService).to(Pt).inSingletonScope(),t.bind(u.INormalPass).to(Br).whenTargetNamed("clear"),t.bind(u.INormalPass).to(ni).whenTargetNamed("pixelPicking"),t.bind(u.INormalPass).to(Bo).whenTargetNamed("render"),t.bind(u.INormalPass).to(Ko).whenTargetNamed("taa"),t.bind(u.IFactoryNormalPass).toFactory((function(t){return function(e){return t.container.getNamed(u.INormalPass,e)}})),t.bind(u.IPostProcessingPass).to(Wi).whenTargetNamed("copy"),t.bind(u.IPostProcessingPass).to(xi).whenTargetNamed("blurH"),t.bind(u.IPostProcessingPass).to(Mi).whenTargetNamed("blurV"),t.bind(u.IPostProcessingPass).to(yo).whenTargetNamed("noise"),t.bind(u.IPostProcessingPass).to(Po).whenTargetNamed("sepia"),t.bind(u.IPostProcessingPass).to(zi).whenTargetNamed("colorHalftone"),t.bind(u.IPostProcessingPass).to(eo).whenTargetNamed("hexagonalPixelate"),t.bind(u.IPostProcessingPass).to(lo).whenTargetNamed("ink"),t.bind(u.IFactoryPostProcessingPass).toFactory((function(t){return function(e){var n=t.container.getNamed(u.IPostProcessingPass,e);return n.setName(e),n}})),t}function ia(t){var e=new o["Container"];return e.parent=t,e.bind(u.IStyleAttributeService).to(Un).inSingletonScope(),e.bind(u.IMultiPassRenderer).to(Wr).inSingletonScope(),e.bind(u.IPostProcessor).to(Io).inSingletonScope(),e}var oa=n("JofH"),aa=n.n(oa),sa=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"];function ua(t){return sa.indexOf(t)}var ca,la,fa,pa,ha=64,da=131072,va=524288,ma=2097152,ga=8388608;function ya(t,e){return t=aa()(Math.floor(t),0,255),e=aa()(Math.floor(e),0,255),256*t+e}function ba(t){var e=t.color,n=t.radius,r=t.tileX,i=t.tileY,o=t.shape,a=t.opacity,s=t.stroke,u=t.strokeWidth,c=t.strokeOpacity,l=[],f=[],p=[],h=[ya(e[0],e[1]),ya(e[2],e[3])],d=[ya(s[0],s[1]),ya(s[2],s[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach((function(t){var e=gt()(t,2),s=e[0],v=e[1];l.push([].concat(h,[(s+1)*ga+(v+1)*ma+ua(o)*da+n,(r+512)*va+(i+512)*ha])),f.push([].concat(d,[u,c])),p.push([a,0,0,0])})),{packedBuffer:l,packedBuffer2:f,packedBuffer3:p}}(function(t){t["normal"]="normal",t["additive"]="additive",t["subtractive"]="subtractive",t["min"]="min",t["max"]="max",t["none"]="none"})(ca||(ca={})),function(t){t["LINEAR"]="linear",t["POWER"]="power",t["LOG"]="log",t["IDENTITY"]="identity",t["TIME"]="time",t["QUANTILE"]="quantile",t["QUANTIZE"]="quantize",t["THRESHOLD"]="threshold",t["CAT"]="cat"}(la||(la={})),function(t){t["CONSTANT"]="constant",t["VARIABLE"]="variable"}(fa||(fa={})),function(t){t[t["Attribute"]=0]="Attribute",t[t["InstancedAttribute"]=1]="InstancedAttribute",t[t["Uniform"]=2]="Uniform"}(pa||(pa={}));var _a,xa=["mapload"],wa={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"},Ea=["loaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"];(function(t){t["TOPRIGHT"]="topright",t["TOPLEFT"]="topleft",t["BOTTOMRIGHT"]="bottomright",t["BOTTOMLEFT"]="bottomleft"})(_a||(_a={}))},"/P+o":function(t,e,n){"use strict";var r=n("HIsA"),i=n("Hiyu"),o=n("12fA"),a=n("NVMI"),s=n("DDwO"),u=n("2RC6");i&&r({target:"Object",proto:!0,forced:o},{__defineGetter__:function(t,e){u.f(a(this),t,{get:s(e),enumerable:!0,configurable:!0})}})},"/dUy":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MetadataReader=void 0;var r=n("9L8m"),i=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){var e=Reflect.getMetadata(r.PARAM_TYPES,t),n=Reflect.getMetadata(r.TAGGED,t);return{compilerGeneratedMetadata:e,userGeneratedMetadata:n||{}}},t.prototype.getPropertiesMetadata=function(t){var e=Reflect.getMetadata(r.TAGGED_PROP,t)||[];return e},t}();e.MetadataReader=i},"/g2i":function(t,e){var n=Object.prototype;function r(t){var e=t&&t.constructor,r="function"==typeof e&&e.prototype||n;return t===r}t.exports=r},"/p+0":function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("hXyk"),a=n("DDwO");r({target:"Map",proto:!0,real:!0,forced:i},{update:function(t,e){var n=o(this),r=arguments.length;a(e);var i=n.has(t);if(!i&&r<3)throw TypeError("Updating absent value");var s=i?n.get(t):a(r>2?arguments[2]:void 0)(t,n);return n.set(t,e(s,t,n)),n}})},"/sZi":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("TWOK");function i(t,e){var n=Object(r["a"])({},t);return Array.isArray(e)&&e.forEach((function(t){delete n[t]})),n}},0:function(t,e,n){t.exports=n("tB8F")},"00jJ":function(t,e,n){n("e/ze"),t.exports=self.fetch.bind(self)},"03A1":function(t,e,n){var r=n("3Jv6"),i=n("2Swa"),o="[object Number]";function a(t){return"number"==typeof t||i(t)&&r(t)==o}t.exports=a},"09fY":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.typeConstraint=e.namedConstraint=e.taggedConstraint=e.traverseAncerstors=void 0;var r=n("9L8m"),i=n("rMkn"),o=function t(e,n){var r=e.parentRequest;return null!==r&&(!!n(r)||t(r,n))};e.traverseAncerstors=o;var a=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new i.Metadata(t,e),n}};e.taggedConstraint=a;var s=a(r.NAMED_TAG);e.namedConstraint=s;var u=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"===typeof t){var r=n.serviceIdentifier;return r===t}var i=e.bindings[0].implementationType;return t===i}return!1}};e.typeConstraint=u},"0Brq":function(t,e,n){var r=n("JqKL");r("Int16",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},"0Ccx":function(t,e,n){var r=n("hXyk"),i=n("tg/3");t.exports=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return r(e.call(t))}},"0JYp":function(t,e,n){var r=n("ebXT"),i=n("2Swa");function o(t,e,n,a,s){return t===e||(null==t||null==e||!i(t)&&!i(e)?t!==t&&e!==e:r(t,e,n,a,o,s))}t.exports=o},"0MLT":function(t,e,n){"use strict";var r=n("DDwO"),i=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},"0Uim":function(t,e,n){var r=n("HIsA"),i=n("Rkte");r({target:"Math",stat:!0},{scale:i})},"0Zv/":function(t,e,n){var r=n("3Jv6"),i=n("2Swa"),o="[object Symbol]";function a(t){return"symbol"==typeof t||i(t)&&r(t)==o}t.exports=a},"0aPf":function(t,e,n){"use strict";function r(t){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},r(t)}n.d(e,"a",(function(){return r}))},"0b1I":function(t,e,n){var r=n("zOkb"),i="__lodash_hash_undefined__";function o(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?i:e,this}t.exports=o},"0e3h":function(t,e,n){var r=n("plIA"),i=n("zgkv"),o=i((function(t,e,n){return e=e.toLowerCase(),t+(n?r(e):e)}));t.exports=o},"0f0C":function(t,e,n){var r=n("pxmn");t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},"0k/8":function(t,e,n){},"0l+J":function(t,e,n){var r=n("m9sd"),i=n("Q47P");function o(t,e){return r(t,i(t),e)}t.exports=o},"0v9S":function(t,e,n){var r=n("QgGs"),i=n("hQlM"),o=n("Lsfr"),a=o&&o.isSet,s=a?i(a):r;t.exports=s},1:function(t,e){},"1+Eb":function(t,e,n){"use strict";var r=n("7+LC");t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},"12fA":function(t,e,n){"use strict";var r=n("m52V"),i=n("2JD6"),o=n("7+LC");t.exports=r||!o((function(){var t=Math.random();__defineSetter__.call(null,t,(function(){})),delete i[t]}))},"13/t":function(t,e){t.exports="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView},"13cj":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContainerSnapshot=void 0;var r=function(){function t(){}return t.of=function(e,n){var r=new t;return r.bindings=e,r.middleware=n,r},t}();e.ContainerSnapshot=r},"196R":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STACK_OVERFLOW=e.CIRCULAR_DEPENDENCY_IN_FACTORY=e.POST_CONSTRUCT_ERROR=e.MULTIPLE_POST_CONSTRUCT_METHODS=e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=e.ARGUMENTS_LENGTH_MISMATCH=e.INVALID_DECORATOR_OPERATION=e.INVALID_TO_SELF_VALUE=e.INVALID_FUNCTION_BINDING=e.INVALID_MIDDLEWARE_RETURN=e.NO_MORE_SNAPSHOTS_AVAILABLE=e.INVALID_BINDING_TYPE=e.NOT_IMPLEMENTED=e.CIRCULAR_DEPENDENCY=e.UNDEFINED_INJECT_ANNOTATION=e.MISSING_INJECT_ANNOTATION=e.MISSING_INJECTABLE_ANNOTATION=e.NOT_REGISTERED=e.CANNOT_UNBIND=e.AMBIGUOUS_MATCH=e.KEY_NOT_FOUND=e.NULL_ARGUMENT=e.DUPLICATED_METADATA=e.DUPLICATED_INJECTABLE_DECORATOR=void 0,e.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",e.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",e.NULL_ARGUMENT="NULL argument",e.KEY_NOT_FOUND="Key Not Found",e.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",e.CANNOT_UNBIND="Could not unbind serviceIdentifier:",e.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",e.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",e.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var r=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};e.UNDEFINED_INJECT_ANNOTATION=r,e.CIRCULAR_DEPENDENCY="Circular dependency found:",e.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",e.INVALID_BINDING_TYPE="Invalid binding type:",e.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",e.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",e.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",e.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",e.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."};e.ARGUMENTS_LENGTH_MISMATCH=i,e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",e.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]};e.POST_CONSTRUCT_ERROR=o;var a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."};e.CIRCULAR_DEPENDENCY_IN_FACTORY=a,e.STACK_OVERFLOW="Maximum call stack size exceeded"},"1EVt":function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports["default"]=t.exports,t.exports.__esModule=!0,n(e,r)}t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},"1PaV":function(t,e,n){var r=n("2JD6"),i=r.isFinite;t.exports=Number.isFinite||function(t){return"number"==typeof t&&i(t)}},"1XUj":function(t,e,n){var r=n("HIsA"),i=n("RUgK").values;r({target:"Object",stat:!0},{values:function(t){return i(t)}})},"1Xnk":function(t,e,n){var r=n("HIsA"),i=n("2JD6");r({global:!0},{globalThis:i})},"1agv":function(t,e){t.exports={}},"1sE6":function(t,e,n){"use strict";(function(t){var e=n("EH+i"),r=n.n(e),i=n("UaKd"),o=n.n(i),a=n("6Jqo"),s=n.n(a),u=n("xwgP"),c=n.n(u),l=n("dZOt"),f=n.n(l),p={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},h={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"},d=(Object.keys(h).map((function(t){return h[t]})),{CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"}),v={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},m={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},g=Object.keys(v).reduce((function(t,e){return t[v[e]]=e,t}),{}),y=[h.NOSCRIPT,h.SCRIPT,h.STYLE],b="data-react-helmet",_="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},w=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),E=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},S=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},C=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},T=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e},O=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!1===e?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},A=function(t){var e=L(t,h.TITLE),n=L(t,m.TITLE_TEMPLATE);if(n&&e)return n.replace(/%s/g,(function(){return Array.isArray(e)?e.join(""):e}));var r=L(t,m.DEFAULT_TITLE);return e||r||void 0},k=function(t){return L(t,m.ON_CHANGE_CLIENT_STATE)||function(){}},M=function(t,e){return e.filter((function(e){return"undefined"!==typeof e[t]})).map((function(e){return e[t]})).reduce((function(t,e){return E({},t,e)}),{})},P=function(t,e){return e.filter((function(t){return"undefined"!==typeof t[h.BASE]})).map((function(t){return t[h.BASE]})).reverse().reduce((function(e,n){if(!e.length)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=r[i],a=o.toLowerCase();if(-1!==t.indexOf(a)&&n[a])return e.concat(n)}return e}),[])},I=function(t,e,n){var r={};return n.filter((function(e){return!!Array.isArray(e[t])||("undefined"!==typeof e[t]&&z("Helmet: "+t+' should be of type "Array". Instead found type "'+_(e[t])+'"'),!1)})).map((function(e){return e[t]})).reverse().reduce((function(t,n){var i={};n.filter((function(t){for(var n=void 0,o=Object.keys(t),a=0;a<o.length;a++){var s=o[a],u=s.toLowerCase();-1===e.indexOf(u)||n===d.REL&&"canonical"===t[n].toLowerCase()||u===d.REL&&"stylesheet"===t[u].toLowerCase()||(n=u),-1===e.indexOf(s)||s!==d.INNER_HTML&&s!==d.CSS_TEXT&&s!==d.ITEM_PROP||(n=s)}if(!n||!t[n])return!1;var c=t[n].toLowerCase();return r[n]||(r[n]={}),i[n]||(i[n]={}),!r[n][c]&&(i[n][c]=!0,!0)})).reverse().forEach((function(e){return t.push(e)}));for(var o=Object.keys(i),a=0;a<o.length;a++){var s=o[a],u=f()({},r[s],i[s]);r[s]=u}return t}),[]).reverse()},L=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.hasOwnProperty(e))return r[e]}return null},R=function(t){return{baseTag:P([d.HREF,d.TARGET],t),bodyAttributes:M(p.BODY,t),defer:L(t,m.DEFER),encode:L(t,m.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:M(p.HTML,t),linkTags:I(h.LINK,[d.REL,d.HREF],t),metaTags:I(h.META,[d.NAME,d.CHARSET,d.HTTPEQUIV,d.PROPERTY,d.ITEM_PROP],t),noscriptTags:I(h.NOSCRIPT,[d.INNER_HTML],t),onChangeClientState:k(t),scriptTags:I(h.SCRIPT,[d.SRC,d.INNER_HTML],t),styleTags:I(h.STYLE,[d.CSS_TEXT],t),title:A(t),titleAttributes:M(p.TITLE,t)}},D=function(){var t=Date.now();return function(e){var n=Date.now();n-t>16?(t=n,e(n)):setTimeout((function(){D(e)}),0)}}(),N=function(t){return clearTimeout(t)},j="undefined"!==typeof window?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||D:t.requestAnimationFrame||D,F="undefined"!==typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||N:t.cancelAnimationFrame||N,z=function(t){return console&&"function"===typeof console.warn&&console.warn(t)},B=null,U=function(t){B&&F(B),t.defer?B=j((function(){V(t,(function(){B=null}))})):(V(t),B=null)},V=function(t,e){var n=t.baseTag,r=t.bodyAttributes,i=t.htmlAttributes,o=t.linkTags,a=t.metaTags,s=t.noscriptTags,u=t.onChangeClientState,c=t.scriptTags,l=t.styleTags,f=t.title,p=t.titleAttributes;H(h.BODY,r),H(h.HTML,i),G(f,p);var d={baseTag:W(h.BASE,n),linkTags:W(h.LINK,o),metaTags:W(h.META,a),noscriptTags:W(h.NOSCRIPT,s),scriptTags:W(h.SCRIPT,c),styleTags:W(h.STYLE,l)},v={},m={};Object.keys(d).forEach((function(t){var e=d[t],n=e.newTags,r=e.oldTags;n.length&&(v[t]=n),r.length&&(m[t]=d[t].oldTags)})),e&&e(),u(t,v,m)},q=function(t){return Array.isArray(t)?t.join(""):t},G=function(t,e){"undefined"!==typeof t&&document.title!==t&&(document.title=q(t)),H(h.TITLE,e)},H=function(t,e){var n=document.getElementsByTagName(t)[0];if(n){for(var r=n.getAttribute(b),i=r?r.split(","):[],o=[].concat(i),a=Object.keys(e),s=0;s<a.length;s++){var u=a[s],c=e[u]||"";n.getAttribute(u)!==c&&n.setAttribute(u,c),-1===i.indexOf(u)&&i.push(u);var l=o.indexOf(u);-1!==l&&o.splice(l,1)}for(var f=o.length-1;f>=0;f--)n.removeAttribute(o[f]);i.length===o.length?n.removeAttribute(b):n.getAttribute(b)!==a.join(",")&&n.setAttribute(b,a.join(","))}},W=function(t,e){var n=document.head||document.querySelector(h.HEAD),r=n.querySelectorAll(t+"["+b+"]"),i=Array.prototype.slice.call(r),o=[],a=void 0;return e&&e.length&&e.forEach((function(e){var n=document.createElement(t);for(var r in e)if(e.hasOwnProperty(r))if(r===d.INNER_HTML)n.innerHTML=e.innerHTML;else if(r===d.CSS_TEXT)n.styleSheet?n.styleSheet.cssText=e.cssText:n.appendChild(document.createTextNode(e.cssText));else{var s="undefined"===typeof e[r]?"":e[r];n.setAttribute(r,s)}n.setAttribute(b,"true"),i.some((function(t,e){return a=e,n.isEqualNode(t)}))?i.splice(a,1):o.push(n)})),i.forEach((function(t){return t.parentNode.removeChild(t)})),o.forEach((function(t){return n.appendChild(t)})),{oldTags:i,newTags:o}},X=function(t){return Object.keys(t).reduce((function(e,n){var r="undefined"!==typeof t[n]?n+'="'+t[n]+'"':""+n;return e?e+" "+r:r}),"")},Z=function(t,e,n,r){var i=X(n),o=q(e);return i?"<"+t+" "+b+'="true" '+i+">"+O(o,r)+"</"+t+">":"<"+t+" "+b+'="true">'+O(o,r)+"</"+t+">"},Y=function(t,e,n){return e.reduce((function(e,r){var i=Object.keys(r).filter((function(t){return!(t===d.INNER_HTML||t===d.CSS_TEXT)})).reduce((function(t,e){var i="undefined"===typeof r[e]?e:e+'="'+O(r[e],n)+'"';return t?t+" "+i:i}),""),o=r.innerHTML||r.cssText||"",a=-1===y.indexOf(t);return e+"<"+t+" "+b+'="true" '+i+(a?"/>":">"+o+"</"+t+">")}),"")},K=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).reduce((function(e,n){return e[v[n]||n]=t[n],e}),e)},J=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).reduce((function(e,n){return e[g[n]||n]=t[n],e}),e)},Q=function(t,e,n){var r,i=(r={key:e},r[b]=!0,r),o=K(n,i);return[c.a.createElement(h.TITLE,o,e)]},$=function(t,e){return e.map((function(e,n){var r,i=(r={key:n},r[b]=!0,r);return Object.keys(e).forEach((function(t){var n=v[t]||t;if(n===d.INNER_HTML||n===d.CSS_TEXT){var r=e.innerHTML||e.cssText;i.dangerouslySetInnerHTML={__html:r}}else i[n]=e[t]})),c.a.createElement(t,i)}))},tt=function(t,e,n){switch(t){case h.TITLE:return{toComponent:function(){return Q(t,e.title,e.titleAttributes,n)},toString:function(){return Z(t,e.title,e.titleAttributes,n)}};case p.BODY:case p.HTML:return{toComponent:function(){return K(e)},toString:function(){return X(e)}};default:return{toComponent:function(){return $(t,e)},toString:function(){return Y(t,e,n)}}}},et=function(t){var e=t.baseTag,n=t.bodyAttributes,r=t.encode,i=t.htmlAttributes,o=t.linkTags,a=t.metaTags,s=t.noscriptTags,u=t.scriptTags,c=t.styleTags,l=t.title,f=void 0===l?"":l,d=t.titleAttributes;return{base:tt(h.BASE,e,r),bodyAttributes:tt(p.BODY,n,r),htmlAttributes:tt(p.HTML,i,r),link:tt(h.LINK,o,r),meta:tt(h.META,a,r),noscript:tt(h.NOSCRIPT,s,r),script:tt(h.SCRIPT,u,r),style:tt(h.STYLE,c,r),title:tt(h.TITLE,{title:f,titleAttributes:d},r)}},nt=function(t){var e,n;return n=e=function(e){function n(){return x(this,n),T(this,e.apply(this,arguments))}return S(n,e),n.prototype.shouldComponentUpdate=function(t){return!s()(this.props,t)},n.prototype.mapNestedChildrenToProps=function(t,e){if(!e)return null;switch(t.type){case h.SCRIPT:case h.NOSCRIPT:return{innerHTML:e};case h.STYLE:return{cssText:e}}throw new Error("<"+t.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},n.prototype.flattenArrayTypeChildren=function(t){var e,n=t.child,r=t.arrayTypeChildren,i=t.newChildProps,o=t.nestedChildren;return E({},r,(e={},e[n.type]=[].concat(r[n.type]||[],[E({},i,this.mapNestedChildrenToProps(n,o))]),e))},n.prototype.mapObjectTypeChildren=function(t){var e,n,r=t.child,i=t.newProps,o=t.newChildProps,a=t.nestedChildren;switch(r.type){case h.TITLE:return E({},i,(e={},e[r.type]=a,e.titleAttributes=E({},o),e));case h.BODY:return E({},i,{bodyAttributes:E({},o)});case h.HTML:return E({},i,{htmlAttributes:E({},o)})}return E({},i,(n={},n[r.type]=E({},o),n))},n.prototype.mapArrayTypeChildrenToProps=function(t,e){var n=E({},e);return Object.keys(t).forEach((function(e){var r;n=E({},n,(r={},r[e]=t[e],r))})),n},n.prototype.warnOnInvalidChildren=function(t,e){return!0},n.prototype.mapChildrenToProps=function(t,e){var n=this,r={};return c.a.Children.forEach(t,(function(t){if(t&&t.props){var i=t.props,o=i.children,a=C(i,["children"]),s=J(a);switch(n.warnOnInvalidChildren(t,o),t.type){case h.LINK:case h.META:case h.NOSCRIPT:case h.SCRIPT:case h.STYLE:r=n.flattenArrayTypeChildren({child:t,arrayTypeChildren:r,newChildProps:s,nestedChildren:o});break;default:e=n.mapObjectTypeChildren({child:t,newProps:e,newChildProps:s,nestedChildren:o});break}}})),e=this.mapArrayTypeChildrenToProps(r,e),e},n.prototype.render=function(){var e=this.props,n=e.children,r=C(e,["children"]),i=E({},r);return n&&(i=this.mapChildrenToProps(n,i)),c.a.createElement(t,i)},w(n,null,[{key:"canUseDOM",set:function(e){t.canUseDOM=e}}]),n}(c.a.Component),e.propTypes={base:r.a.object,bodyAttributes:r.a.object,children:r.a.oneOfType([r.a.arrayOf(r.a.node),r.a.node]),defaultTitle:r.a.string,defer:r.a.bool,encodeSpecialCharacters:r.a.bool,htmlAttributes:r.a.object,link:r.a.arrayOf(r.a.object),meta:r.a.arrayOf(r.a.object),noscript:r.a.arrayOf(r.a.object),onChangeClientState:r.a.func,script:r.a.arrayOf(r.a.object),style:r.a.arrayOf(r.a.object),title:r.a.string,titleAttributes:r.a.object,titleTemplate:r.a.string},e.defaultProps={defer:!0,encodeSpecialCharacters:!0},e.peek=t.peek,e.rewind=function(){var e=t.rewind();return e||(e=et({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),e},n},rt=function(){return null},it=o()(R,U,et)(rt),ot=nt(it);ot.renderStatic=ot.rewind}).call(this,n("oN6F"))},"2+60":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TargetTypeEnum=e.BindingTypeEnum=e.BindingScopeEnum=void 0;var r={Request:"Request",Singleton:"Singleton",Transient:"Transient"};e.BindingScopeEnum=r;var i={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};e.BindingTypeEnum=i;var o={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};e.TargetTypeEnum=o},"2+gS":function(t,e,n){var r=n("Hiyu"),i=n("2RC6"),o=n("hXyk"),a=n("y6vz");t.exports=r?Object.defineProperties:function(t,e){o(t);var n,r=a(e),s=r.length,u=0;while(s>u)i.f(t,n=r[u++],e[n]);return t}},"27OL":function(t,e,n){"use strict";var r=n("HIsA"),i=n("Xf1w").filter,o=n("HqdE"),a=n("/5yA"),s=o("filter"),u=a("filter");r({target:"Array",proto:!0,forced:!s||!u},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"2BKa":function(t,e,n){"use strict";var r=2147483647,i=36,o=1,a=26,s=38,u=700,c=72,l=128,f="-",p=/[^\0-\u007E]/,h=/[.\u3002\uFF0E\uFF61]/g,d="Overflow: input needs wider integers to process",v=i-o,m=Math.floor,g=String.fromCharCode,y=function(t){var e=[],n=0,r=t.length;while(n<r){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),n--)}else e.push(i)}return e},b=function(t){return t+22+75*(t<26)},_=function(t,e,n){var r=0;for(t=n?m(t/u):t>>1,t+=m(t/e);t>v*a>>1;r+=i)t=m(t/v);return m(r+(v+1)*t/(t+s))},x=function(t){var e=[];t=y(t);var n,s,u=t.length,p=l,h=0,v=c;for(n=0;n<t.length;n++)s=t[n],s<128&&e.push(g(s));var x=e.length,w=x;x&&e.push(f);while(w<u){var E=r;for(n=0;n<t.length;n++)s=t[n],s>=p&&s<E&&(E=s);var S=w+1;if(E-p>m((r-h)/S))throw RangeError(d);for(h+=(E-p)*S,p=E,n=0;n<t.length;n++){if(s=t[n],s<p&&++h>r)throw RangeError(d);if(s==p){for(var C=h,T=i;;T+=i){var O=T<=v?o:T>=v+a?a:T-v;if(C<O)break;var A=C-O,k=i-O;e.push(g(b(O+A%k))),C=m(A/k)}e.push(g(b(C))),v=_(h,S,w==x),h=0,++w}}++h,++p}return e.join("")};t.exports=function(t){var e,n,r=[],i=t.toLowerCase().replace(h,".").split(".");for(e=0;e<i.length;e++)n=i[e],r.push(p.test(n)?"xn--"+x(n):n);return r.join(".")}},"2DUl":function(t,e,n){var r=n("MLhk"),i=n("QSfS"),o=n("dhT6");function a(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}t.exports=a},"2Dhz":function(t,e,n){var r=n("JqKL");r("Uint32",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},"2I03":function(t,e,n){var r=n("PaPB"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},"2JD6":function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")()}).call(this,n("oN6F"))},"2PUN":function(t,e,n){var r=n("qgzk"),i=n("swOU");function o(t,e,n,a,s){var u=-1,c=t.length;n||(n=i),s||(s=[]);while(++u<c){var l=t[u];e>0&&n(l)?e>1?o(l,e-1,n,a,s):r(s,l):a||(s[s.length]=l)}return s}t.exports=o},"2Pxf":function(t,e,n){"use strict";var r=n("Hiyu"),i=n("7+LC"),o=n("y6vz"),a=n("CmBG"),s=n("73Ew"),u=n("NVMI"),c=n("aS93"),l=Object.assign,f=Object.defineProperty;t.exports=!l||i((function(){if(r&&1!==l({b:1},l(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!=l({},t)[n]||o(l({},e)).join("")!=i}))?function(t,e){var n=u(t),i=arguments.length,l=1,f=a.f,p=s.f;while(i>l){var h,d=c(arguments[l++]),v=f?o(d).concat(f(d)):o(d),m=v.length,g=0;while(m>g)h=v[g++],r&&!p.call(d,h)||(n[h]=d[h])}return n}:l},"2RC6":function(t,e,n){var r=n("Hiyu"),i=n("IDl8"),o=n("hXyk"),a=n("n2ef"),s=Object.defineProperty;e.f=r?s:function(t,e,n){if(o(t),e=a(e,!0),o(n),i)try{return s(t,e,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},"2Swa":function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n},"2gAT":function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("M2Sr"),i=n("FpZt"),o=n("kUw8"),a=n("nKrB"),s=n("XF5O"),u=n("tST3"),c=n("xwgP"),l=n("fK+4"),f=n.n(l),p=n("jK+o"),h=n.n(p),d=function(t){Object(s["a"])(n,t);var e=Object(u["a"])(n);function n(){var t;Object(o["a"])(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i)),t.closeTimer=null,t.close=function(e){e&&e.stopPropagation(),t.clearCloseTimer();var n=t.props,r=n.onClose,i=n.noticeKey;r&&r(i)},t.startCloseTimer=function(){t.props.duration&&(t.closeTimer=window.setTimeout((function(){t.close()}),1e3*t.props.duration))},t.clearCloseTimer=function(){t.closeTimer&&(clearTimeout(t.closeTimer),t.closeTimer=null)},t}return Object(a["a"])(n,[{key:"componentDidMount",value:function(){this.startCloseTimer()}},{key:"componentDidUpdate",value:function(t){(this.props.duration!==t.duration||this.props.updateMark!==t.updateMark||this.props.visible!==t.visible&&this.props.visible)&&this.restartCloseTimer()}},{key:"componentWillUnmount",value:function(){this.clearCloseTimer()}},{key:"restartCloseTimer",value:function(){this.clearCloseTimer(),this.startCloseTimer()}},{key:"render",value:function(){var t=this,e=this.props,n=e.prefixCls,o=e.className,a=e.closable,s=e.closeIcon,u=e.style,l=e.onClick,p=e.children,d=e.holder,v="".concat(n,"-notice"),m=Object.keys(this.props).reduce((function(e,n){return"data-"!==n.substr(0,5)&&"aria-"!==n.substr(0,5)&&"role"!==n||(e[n]=t.props[n]),e}),{}),g=c["createElement"]("div",Object(r["a"])({className:h()(v,o,Object(i["a"])({},"".concat(v,"-closable"),a)),style:u,onMouseEnter:this.clearCloseTimer,onMouseLeave:this.startCloseTimer,onClick:l},m),c["createElement"]("div",{className:"".concat(v,"-content")},p),a?c["createElement"]("a",{tabIndex:0,onClick:this.close,className:"".concat(v,"-close")},s||c["createElement"]("span",{className:"".concat(v,"-close-x")})):null);return d?f.a.createPortal(g,d):g}}]),n}(c["Component"]);d.defaultProps={onClose:function(){},duration:1.5}},"2hCa":function(t,e,n){var r=n("aS93"),i=n("JzK+");t.exports=function(t){return r(i(t))}},"2kiq":function(t,e,n){"use strict";t.exports=n("/Fc6")},"2pGt":function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function a(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,n,r,o){if("function"!==typeof n)throw new TypeError("The listener must be a function");var s=new a(n,r||t,o),u=i?i+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function u(t,e){0===--t._eventsCount?t._events=new o:delete t._events[e]}function c(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),c.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},c.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,a=new Array(o);r<o;r++)a[r]=n[r].fn;return a},c.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},c.prototype.emit=function(t,e,n,r,o,a){var s=i?i+t:t;if(!this._events[s])return!1;var u,c,l=this._events[s],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,r),!0;case 5:return l.fn.call(l.context,e,n,r,o),!0;case 6:return l.fn.call(l.context,e,n,r,o,a),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var p,h=l.length;for(c=0;c<h;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,n);break;case 4:l[c].fn.call(l[c].context,e,n,r);break;default:if(!u)for(p=1,u=new Array(f-1);p<f;p++)u[p-1]=arguments[p];l[c].fn.apply(l[c].context,u)}}return!0},c.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},c.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},c.prototype.removeListener=function(t,e,n,r){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return u(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||r&&!a.once||n&&a.context!==n||u(this,o);else{for(var s=0,c=[],l=a.length;s<l;s++)(a[s].fn!==e||r&&!a[s].once||n&&a[s].context!==n)&&c.push(a[s]);c.length?this._events[o]=1===c.length?c[0]:c:u(this,o)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&u(this,e)):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,t.exports=c},"2vMh":function(t,e,n){var r=n("S8CN"),i=n("+D6J"),o=n("tqoU");function a(t,e,n){return e===e?o(t,e,n):r(t,i,n)}t.exports=a},"2x2d":function(t,e,n){var r=n("HIsA"),i=n("icJ8"),o=n("hXyk"),a=n("kI7s"),s=i.has,u=i.get,c=i.toKey,l=function(t,e,n){var r=s(t,e,n);if(r)return u(t,e,n);var i=a(e);return null!==i?l(t,i,n):void 0};r({target:"Reflect",stat:!0},{getMetadata:function(t,e){var n=arguments.length<3?void 0:c(arguments[2]);return l(t,o(e),n)}})},"30a0":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("fK+4"),i=n.n(r);function o(t){return t instanceof HTMLElement?t:i.a.findDOMNode(t)}},"32kc":function(t,e,n){},"3CNB":function(t,e,n){},"3FqU":function(t,e,n){var r=n("TJOf"),i=n("TpDJ");function o(t,e,n){(void 0!==n&&!i(t[e],n)||void 0===n&&!(e in t))&&r(t,e,n)}t.exports=o},"3Jv6":function(t,e,n){var r=n("sVUS"),i=n("wBVS"),o=n("t/TA"),a="[object Null]",s="[object Undefined]",u=r?r.toStringTag:void 0;function c(t){return null==t?void 0===t?s:a:u&&u in Object(t)?i(t):o(t)}t.exports=c},"3RHZ":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryableString=void 0;var r=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e="",n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}();e.QueryableString=r},"3fYz":function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("LTDN");r({target:"WeakSet",proto:!0,real:!0,forced:i},{deleteAll:function(){return o.apply(this,arguments)}})},"3fyM":function(t,e,n){},"3i2j":function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("bXon"),a=n("hXyk"),s=n("DDwO"),u=n("0Ccx"),c=n("Ji6T");r({target:"Set",proto:!0,real:!0,forced:i},{isSubsetOf:function(t){var e=u(this),n=a(t),r=n.has;return"function"!=typeof r&&(n=new(o("Set"))(t),r=s(n.has)),!c(e,(function(t){if(!1===r.call(n,t))return c.stop()}),void 0,!1,!0).stopped}})},"3sCP":function(t,e,n){var r=n("/g2i"),i=n("HdUy"),o=Object.prototype,a=o.hasOwnProperty;function s(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))a.call(t,n)&&"constructor"!=n&&e.push(n);return e}t.exports=s},"40mc":function(t,e,n){var r=n("DDwO");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},"41ra":function(t,e,n){"use strict";var r=n("HIsA"),i=n("UTnC");r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},"4A8a":function(t,e,n){var r=n("sVUS"),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;function a(t){return o?Object(o.call(t)):{}}t.exports=a},"4CZv":function(t,e){var n=1/0,r=Math.abs,i=Math.pow,o=Math.floor,a=Math.log,s=Math.LN2,u=function(t,e,u){var c,l,f,p=new Array(u),h=8*u-e-1,d=(1<<h)-1,v=d>>1,m=23===e?i(2,-24)-i(2,-77):0,g=t<0||0===t&&1/t<0?1:0,y=0;for(t=r(t),t!=t||t===n?(l=t!=t?1:0,c=d):(c=o(a(t)/s),t*(f=i(2,-c))<1&&(c--,f*=2),t+=c+v>=1?m/f:m*i(2,1-v),t*f>=2&&(c++,f/=2),c+v>=d?(l=0,c=d):c+v>=1?(l=(t*f-1)*i(2,e),c+=v):(l=t*i(2,v-1)*i(2,e),c=0));e>=8;p[y++]=255&l,l/=256,e-=8);for(c=c<<e|l,h+=e;h>0;p[y++]=255&c,c/=256,h-=8);return p[--y]|=128*g,p},c=function(t,e){var r,o=t.length,a=8*o-e-1,s=(1<<a)-1,u=s>>1,c=a-7,l=o-1,f=t[l--],p=127&f;for(f>>=7;c>0;p=256*p+t[l],l--,c-=8);for(r=p&(1<<-c)-1,p>>=-c,c+=e;c>0;r=256*r+t[l],l--,c-=8);if(0===p)p=1-u;else{if(p===s)return r?NaN:f?-n:n;r+=i(2,e),p-=u}return(f?-1:1)*r*i(2,p-e)};t.exports={pack:u,unpack:c}},"4OQw":function(t,e,n){"use strict";n.r(e);var r=n("xwgP"),i=n.n(r),o=n("OS9G"),a=n("oSqR"),s=n("Rsk4"),u=i.a.memo(s["default"]["docs-draw"].component);e["default"]=t=>(i.a.useEffect((()=>{var e;null!==t&&void 0!==t&&null!==(e=t.location)&&void 0!==e&&e.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(t.location.hash.slice(1)))}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"markdown"}),i.a.createElement(a["default"],s["default"]["docs-draw"].previewerProps,i.a.createElement(u,null)))))},"4Rd9":function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("keKz"),a=n("7+LC"),s=n("bXon"),u=n("70zE"),c=n("n+WB"),l=n("GUTS"),f=!!o&&a((function(){o.prototype["finally"].call({then:function(){}},(function(){}))}));r({target:"Promise",proto:!0,real:!0,forced:f},{finally:function(t){var e=u(this,s("Promise")),n="function"==typeof t;return this.then(n?function(n){return c(e,t()).then((function(){return n}))}:t,n?function(n){return c(e,t()).then((function(){throw n}))}:t)}}),i||"function"!=typeof o||o.prototype["finally"]||l(o.prototype,"finally",s("Promise").prototype["finally"])},"4X1q":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Lookup=void 0;var r=n("196R"),i=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null===t||void 0===t)throw new Error(r.NULL_ARGUMENT);if(null===e||void 0===e)throw new Error(r.NULL_ARGUMENT);var n=this._map.get(t);void 0!==n?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},t.prototype.get=function(t){if(null===t||void 0===t)throw new Error(r.NULL_ARGUMENT);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(r.KEY_NOT_FOUND)},t.prototype.remove=function(t){if(null===t||void 0===t)throw new Error(r.NULL_ARGUMENT);if(!this._map["delete"](t))throw new Error(r.KEY_NOT_FOUND)},t.prototype.removeByCondition=function(t){var e=this;this._map.forEach((function(n,r){var i=n.filter((function(e){return!t(e)}));i.length>0?e._map.set(r,i):e._map["delete"](r)}))},t.prototype.hasKey=function(t){if(null===t||void 0===t)throw new Error(r.NULL_ARGUMENT);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,n){t.forEach((function(t){return e.add(n,t.clone())}))})),e},t.prototype.traverse=function(t){this._map.forEach((function(e,n){t(n,e)}))},t}();e.Lookup=i},"4YzK":function(t,e,n){var r=n("R64i"),i=n("GUTS"),o=n("Uvls");r||i(Object.prototype,"toString",o,{unsafe:!0})},"4dbd":function(t,e,n){var r=n("PaPB"),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},"4dmQ":function(t,e,n){var r=n("IRht");t.exports=function(t){if("number"!=typeof t&&"Number"!=r(t))throw TypeError("Incorrect invocation");return+t}},"4e8G":function(t,e,n){n("Nau9")},"4jjE":function(t,e,n){var r=n("l6nO");function i(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}t.exports=i},"51N6":function(t,e,n){"use strict";n.r(e);var r=n("xwgP"),i=n.n(r),o=n("+RP0"),a=n("/7QA"),s=n("Ct92");e["default"]=()=>(i.a.useEffect((()=>{var t=new o["Scene"]({id:"map",map:new s["a"]({pitch:0,style:"light",center:[116.30470275878906,39.88352811449648],zoom:12})});t.on("loaded",(()=>{var e=new a["DrawControl"](t,{position:"topright",layout:"horizontal",controls:{point:{selectEnable:!1,showFeature:!1},line:{selectEnable:!1,showFeature:!1},polygon:{selectEnable:!0,showFeature:!0},circle:{selectEnable:!0,showFeature:!0,showDistance:!0,showArea:!0},rect:!1,delete:!1}});t.on("click",(()=>{})),e.on("draw.create",(t=>{console.log("create",t)})),e.on("draw.delete",(t=>{console.log("delete",t)})),t.addControl(e)}))}),[]),i.a.createElement("div",{style:{height:"800px",position:"relative"},id:"map"}))},"5AZ8":function(t,e,n){"use strict";var r=n("DDwO"),i=n("40mc"),o=n("Ji6T");t.exports=function(t){var e,n,a,s,u=arguments.length,c=u>1?arguments[1]:void 0;return r(this),e=void 0!==c,e&&r(c),void 0==t?new this:(n=[],e?(a=0,s=i(c,u>2?arguments[2]:void 0,2),o(t,(function(t){n.push(s(t,a++))}))):o(t,n.push,n),new this(n))}},"5Au7":function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("hXyk"),a=n("40mc"),s=n("YjHi"),u=n("Ji6T");r({target:"Map",proto:!0,real:!0,forced:i},{find:function(t){var e=o(this),n=s(e),r=a(t,arguments.length>1?arguments[1]:void 0,3);return u(n,(function(t,n){if(r(n,t,e))return u.stop(n)}),void 0,!0,!0).result}})},"5EKB":function(t,e,n){var r=n("Krt8"),i=n("Mq00"),o=n("cKxZ"),a=n("CKQD");function s(t){return r(t)||i(t)||o(t)||a()}t.exports=s,t.exports["default"]=t.exports,t.exports.__esModule=!0},"5MHJ":function(t,e,n){var r=n("y0nk"),i=n("dhT6"),o=n("80Az"),a=n("BXhE"),s=n("HLuf"),u=n("3Jv6"),c=n("Bx3/"),l="[object Map]",f="[object Object]",p="[object Promise]",h="[object Set]",d="[object WeakMap]",v="[object DataView]",m=c(r),g=c(i),y=c(o),b=c(a),_=c(s),x=u;(r&&x(new r(new ArrayBuffer(1)))!=v||i&&x(new i)!=l||o&&x(o.resolve())!=p||a&&x(new a)!=h||s&&x(new s)!=d)&&(x=function(t){var e=u(t),n=e==f?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case m:return v;case g:return l;case y:return p;case b:return h;case _:return d}return e}),t.exports=x},"5Nth":function(t,e,n){var r=n("2JD6"),i=n("D8FR");t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},"5Nvg":function(t,e){function n(){}t.exports=n},"5SLN":function(t,e,n){"use strict";var r,i=SyntaxError,o=Function,a=TypeError,s=function(t){try{return o('"use strict"; return ('+t+").constructor;")()}catch(e){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(A){u=null}var c=function(){throw new a},l=u?function(){try{return c}catch(t){try{return u(arguments,"callee").get}catch(e){return c}}}():c,f=n("hVxs")(),p=Object.getPrototypeOf||function(t){return t.__proto__},h={},d="undefined"===typeof Uint8Array?r:p(Uint8Array),v={"%AggregateError%":"undefined"===typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":f?p([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":h,"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":h,"%AsyncIteratorPrototype%":h,"%Atomics%":"undefined"===typeof Atomics?r:Atomics,"%BigInt%":"undefined"===typeof BigInt?r:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":h,"%Int8Array%":"undefined"===typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":f?p(p([][Symbol.iterator]())):r,"%JSON%":"object"===typeof JSON?JSON:r,"%Map%":"undefined"===typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&f?p((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?r:Promise,"%Proxy%":"undefined"===typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&f?p((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":f?p(""[Symbol.iterator]()):r,"%Symbol%":f?Symbol:r,"%SyntaxError%":i,"%ThrowTypeError%":l,"%TypedArray%":d,"%TypeError%":a,"%Uint8Array%":"undefined"===typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?r:WeakSet},m=function t(e){var n;if("%AsyncFunction%"===e)n=s("async function () {}");else if("%GeneratorFunction%"===e)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===e)n=s("async function* () {}");else if("%AsyncGenerator%"===e){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===e){var i=t("%AsyncGenerator%");i&&(n=p(i.prototype))}return v[e]=n,n},g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},y=n("POrF"),b=n("+4Fn"),_=y.call(Function.call,Array.prototype.concat),x=y.call(Function.apply,Array.prototype.splice),w=y.call(Function.call,String.prototype.replace),E=y.call(Function.call,String.prototype.slice),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,C=/\\(\\)?/g,T=function(t){var e=E(t,0,1),n=E(t,-1);if("%"===e&&"%"!==n)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==e)throw new i("invalid intrinsic syntax, expected opening `%`");var r=[];return w(t,S,(function(t,e,n,i){r[r.length]=n?w(i,C,"$1"):e||t})),r},O=function(t,e){var n,r=t;if(b(g,r)&&(n=g[r],r="%"+n[0]+"%"),b(v,r)){var o=v[r];if(o===h&&(o=m(r)),"undefined"===typeof o&&!e)throw new a("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new i("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!==typeof t||0===t.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof e)throw new a('"allowMissing" argument must be a boolean');var n=T(t),r=n.length>0?n[0]:"",o=O("%"+r+"%",e),s=o.name,c=o.value,l=!1,f=o.alias;f&&(r=f[0],x(n,_([0,1],f)));for(var p=1,h=!0;p<n.length;p+=1){var d=n[p],m=E(d,0,1),g=E(d,-1);if(('"'===m||"'"===m||"`"===m||'"'===g||"'"===g||"`"===g)&&m!==g)throw new i("property names with quotes must have matching quotes");if("constructor"!==d&&h||(l=!0),r+="."+d,s="%"+r+"%",b(v,s))c=v[s];else if(null!=c){if(!(d in c)){if(!e)throw new a("base intrinsic for "+t+" exists, but the property is not available.");return}if(u&&p+1>=n.length){var y=u(c,d);h=!!y,c=h&&"get"in y&&!("originalValue"in y.get)?y.get:c[d]}else h=b(c,d),c=c[d];h&&!l&&(v[s]=c)}}return c}},"5i8x":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Context=void 0;var r=n("qSJf"),i=function(){function t(t){this.id=r.id(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}();e.Context=i},"5isN":function(t,e,n){"use strict";var r=n("40mc"),i=n("NVMI"),o=n("acWz"),a=n("mKn/"),s=n("2I03"),u=n("G70G"),c=n("tg/3");t.exports=function(t){var e,n,l,f,p,h,d=i(t),v="function"==typeof this?this:Array,m=arguments.length,g=m>1?arguments[1]:void 0,y=void 0!==g,b=c(d),_=0;if(y&&(g=r(g,m>2?arguments[2]:void 0,2)),void 0==b||v==Array&&a(b))for(e=s(d.length),n=new v(e);e>_;_++)h=y?g(d[_],_):d[_],u(n,_,h);else for(f=b.call(d),p=f.next,n=new v;!(l=p.call(f)).done;_++)h=y?o(f,g,[l.value,_],!0):l.value,u(n,_,h);return n.length=_,n}},"5xYg":function(t,e){function n(t,e){var i,o=t&&t.type;if("FeatureCollection"===o)for(i=0;i<t.features.length;i++)n(t.features[i],e);else if("GeometryCollection"===o)for(i=0;i<t.geometries.length;i++)n(t.geometries[i],e);else if("Feature"===o)n(t.geometry,e);else if("Polygon"===o)r(t.coordinates,e);else if("MultiPolygon"===o)for(i=0;i<t.coordinates.length;i++)r(t.coordinates[i],e);return t}function r(t,e){if(0!==t.length){i(t[0],e);for(var n=1;n<t.length;n++)i(t[n],!e)}}function i(t,e){for(var n=0,r=0,i=0,o=t.length,a=o-1;i<o;a=i++){var s=(t[i][0]-t[a][0])*(t[a][1]+t[i][1]),u=n+s;r+=Math.abs(n)>=Math.abs(s)?n-u+s:s-u+n,n=u}n+r>=0!==!!e&&t.reverse()}t.exports=n},"61WO":function(t,e,n){"use strict";n.r(e);var r=n("xwgP"),i=n.n(r),o=n("+RP0"),a=n("/7QA"),s=n("Ct92"),u={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[116.30470275878906,39.88352811449648],[116.32083892822264,39.89380183825623],[116.31637573242188,39.89617247892832],[116.30556106567381,39.89577737784395],[116.30281448364258,39.89709437260048],[116.28822326660156,39.90657598772839],[116.27809524536131,39.901571965464],[116.27843856811523,39.880103197763546],[116.28822326660156,39.87457027859936],[116.29131317138673,39.85928656392012],[116.29371643066405,39.852302354195864],[116.3129425048828,39.853620184014325],[116.3393783569336,39.85414730885731],[116.3448715209961,39.85796884289976],[116.3448715209961,39.87233063679467],[116.3422966003418,39.885240508711654],[116.32564544677734,39.889060310919994],[116.31465911865234,39.88813830918363],[116.30470275878906,39.88352811449648]]]}}]};e["default"]=()=>(i.a.useEffect((()=>{var t=new o["Scene"]({id:"map",map:new s["a"]({pitch:0,style:"light",center:[116.30470275878906,39.88352811449648],zoom:10})});t.on("loaded",(()=>{var e=new a["DrawPolygon"](t,{data:u});e.on("draw.create",(t=>{console.log(t)}))}))}),[]),i.a.createElement("div",{style:{height:"400px",position:"relative"},id:"map"}))},"67H3":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return s}));var r=n("uMeh"),i=n("2kiq");function o(t,e){"function"===typeof t?t(e):"object"===Object(r["a"])(t)&&t&&"current"in t&&(t.current=e)}function a(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){e.forEach((function(e){o(e,t)}))}}function s(t){var e,n,r=Object(i["isMemo"])(t)?t.type.type:t.type;return!("function"===typeof r&&!(null===(e=r.prototype)||void 0===e?void 0:e.render))&&!("function"===typeof t&&!(null===(n=t.prototype)||void 0===n?void 0:n.render))}},"6Jqo":function(t,e){var n="undefined"!==typeof Element,r="function"===typeof Map,i="function"===typeof Set,o="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function a(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){if(t.constructor!==e.constructor)return!1;var s,u,c,l;if(Array.isArray(t)){if(s=t.length,s!=e.length)return!1;for(u=s;0!==u--;)if(!a(t[u],e[u]))return!1;return!0}if(r&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;l=t.entries();while(!(u=l.next()).done)if(!e.has(u.value[0]))return!1;l=t.entries();while(!(u=l.next()).done)if(!a(u.value[1],e.get(u.value[0])))return!1;return!0}if(i&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;l=t.entries();while(!(u=l.next()).done)if(!e.has(u.value[0]))return!1;return!0}if(o&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(s=t.length,s!=e.length)return!1;for(u=s;0!==u--;)if(t[u]!==e[u])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(c=Object.keys(t),s=c.length,s!==Object.keys(e).length)return!1;for(u=s;0!==u--;)if(!Object.prototype.hasOwnProperty.call(e,c[u]))return!1;if(n&&t instanceof Element)return!1;for(u=s;0!==u--;)if(("_owner"!==c[u]&&"__v"!==c[u]&&"__o"!==c[u]||!t.$$typeof)&&!a(t[c[u]],e[c[u]]))return!1;return!0}return t!==t&&e!==e}t.exports=function(t,e){try{return a(t,e)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},"6Nbm":function(t,e,n){var r=n("7+LC"),i=/#|\.prototype\./,o=function(t,e){var n=s[a(t)];return n==c||n!=u&&("function"==typeof e?r(e):!!e)},a=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},s=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},"6aLv":function(t,e){function n(e){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?(t.exports=n=function(t){return typeof t},t.exports["default"]=t.exports,t.exports.__esModule=!0):(t.exports=n=function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports["default"]=t.exports,t.exports.__esModule=!0),n(e)}t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},"6mmk":function(t,e,n){"use strict";var r=n("HIsA"),i=n("4dbd"),o=n("PaPB"),a=n("2I03"),s=n("NVMI"),u=n("HKEF"),c=n("G70G"),l=n("HqdE"),f=n("/5yA"),p=l("splice"),h=f("splice",{ACCESSORS:!0,0:0,1:2}),d=Math.max,v=Math.min,m=9007199254740991,g="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!p||!h},{splice:function(t,e){var n,r,l,f,p,h,y=s(this),b=a(y.length),_=i(t,b),x=arguments.length;if(0===x?n=r=0:1===x?(n=0,r=b-_):(n=x-2,r=v(d(o(e),0),b-_)),b+n-r>m)throw TypeError(g);for(l=u(y,r),f=0;f<r;f++)p=_+f,p in y&&c(l,f,y[p]);if(l.length=r,n<r){for(f=_;f<b-r;f++)p=f+r,h=f+n,p in y?y[h]=y[p]:delete y[h];for(f=b;f>b-r+n;f--)delete y[f-1]}else if(n>r)for(f=b-r;f>_;f--)p=f+r-1,h=f+n-1,p in y?y[h]=y[p]:delete y[h];for(f=0;f<n;f++)y[f+_]=arguments[f+2];return y.length=b-r+n,l}})},"6tTE":function(t,e,n){var r=n("+qhb"),i=n("2hCa"),o=n("Ra/9").indexOf,a=n("1agv");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)!r(a,n)&&r(s,n)&&c.push(n);while(e.length>u)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},"7+LC":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"70zE":function(t,e,n){var r=n("hXyk"),i=n("DDwO"),o=n("kPvK"),a=o("species");t.exports=function(t,e){var n,o=r(t).constructor;return void 0===o||void 0==(n=r(o)[a])?e:i(n)}},"72Hr":function(t,e,n){"use strict";var r=n("qesp");function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},"73Ew":function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},"76Vx":function(t,e,n){var r=n("fI5W");function i(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=r(t),null===t)break;return t}t.exports=i,t.exports["default"]=t.exports,t.exports.__esModule=!0},"7Kf9":function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("hXyk"),a=n("DDwO"),s=n("Ji6T");r({target:"Set",proto:!0,real:!0,forced:i},{isSupersetOf:function(t){var e=o(this),n=a(e.has);return!s(t,(function(t){if(!1===n.call(e,t))return s.stop()})).stopped}})},"7LRl":function(t,e,n){"use strict";var r=n("HIsA"),i=n("Ra/9").indexOf,o=n("1+Eb"),a=n("/5yA"),s=[].indexOf,u=!!s&&1/[1].indexOf(1,-0)<0,c=o("indexOf"),l=a("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:u||!c||!l},{indexOf:function(t){return u?s.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})},"7Mx0":function(t,e){function n(t,e,n){return t===t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}t.exports=n},"7Q2v":function(t,e,n){"use strict";var r,i,o,a,s=n("HIsA"),u=n("m52V"),c=n("2JD6"),l=n("bXon"),f=n("keKz"),p=n("GUTS"),h=n("masK"),d=n("J7X1"),v=n("QD/U"),m=n("pxmn"),g=n("DDwO"),y=n("xOST"),b=n("IRht"),_=n("ECWN"),x=n("Ji6T"),w=n("9HG5"),E=n("70zE"),S=n("vYQ8").set,C=n("I67C"),T=n("n+WB"),O=n("liI8"),A=n("0MLT"),k=n("uCRN"),M=n("twJ5"),P=n("6Nbm"),I=n("kPvK"),L=n("9ZTU"),R=I("species"),D="Promise",N=M.get,j=M.set,F=M.getterFor(D),z=f,B=c.TypeError,U=c.document,V=c.process,q=l("fetch"),G=A.f,H=G,W="process"==b(V),X=!!(U&&U.createEvent&&c.dispatchEvent),Z="unhandledrejection",Y="rejectionhandled",K=0,J=1,Q=2,$=1,tt=2,et=P(D,(function(){var t=_(z)!==String(z);if(!t){if(66===L)return!0;if(!W&&"function"!=typeof PromiseRejectionEvent)return!0}if(u&&!z.prototype["finally"])return!0;if(L>=51&&/native code/.test(z))return!1;var e=z.resolve(1),n=function(t){t((function(){}),(function(){}))},r=e.constructor={};return r[R]=n,!(e.then((function(){}))instanceof n)})),nt=et||!w((function(t){z.all(t)["catch"]((function(){}))})),rt=function(t){var e;return!(!m(t)||"function"!=typeof(e=t.then))&&e},it=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;C((function(){var i=e.value,o=e.state==J,a=0;while(r.length>a){var s,u,c,l=r[a++],f=o?l.ok:l.fail,p=l.resolve,h=l.reject,d=l.domain;try{f?(o||(e.rejection===tt&&ut(t,e),e.rejection=$),!0===f?s=i:(d&&d.enter(),s=f(i),d&&(d.exit(),c=!0)),s===l.promise?h(B("Promise-chain cycle")):(u=rt(s))?u.call(s,p,h):p(s)):h(i)}catch(v){d&&!c&&d.exit(),h(v)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&at(t,e)}))}},ot=function(t,e,n){var r,i;X?(r=U.createEvent("Event"),r.promise=e,r.reason=n,r.initEvent(t,!1,!0),c.dispatchEvent(r)):r={promise:e,reason:n},(i=c["on"+t])?i(r):t===Z&&O("Unhandled promise rejection",n)},at=function(t,e){S.call(c,(function(){var n,r=e.value,i=st(e);if(i&&(n=k((function(){W?V.emit("unhandledRejection",r,t):ot(Z,t,r)})),e.rejection=W||st(e)?tt:$,n.error))throw n.value}))},st=function(t){return t.rejection!==$&&!t.parent},ut=function(t,e){S.call(c,(function(){W?V.emit("rejectionHandled",t):ot(Y,t,e.value)}))},ct=function(t,e,n,r){return function(i){t(e,n,i,r)}},lt=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=Q,it(t,e,!0))},ft=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw B("Promise can't be resolved itself");var i=rt(n);i?C((function(){var r={done:!1};try{i.call(n,ct(ft,t,r,e),ct(lt,t,r,e))}catch(o){lt(t,r,o,e)}})):(e.value=n,e.state=J,it(t,e,!1))}catch(o){lt(t,{done:!1},o,e)}}};et&&(z=function(t){y(this,z,D),g(t),r.call(this);var e=N(this);try{t(ct(ft,this,e),ct(lt,this,e))}catch(n){lt(this,e,n)}},r=function(t){j(this,{type:D,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:K,value:void 0})},r.prototype=h(z.prototype,{then:function(t,e){var n=F(this),r=G(E(this,z));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=W?V.domain:void 0,n.parent=!0,n.reactions.push(r),n.state!=K&&it(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r,e=N(t);this.promise=t,this.resolve=ct(ft,t,e),this.reject=ct(lt,t,e)},A.f=G=function(t){return t===z||t===o?new i(t):H(t)},u||"function"!=typeof f||(a=f.prototype.then,p(f.prototype,"then",(function(t,e){var n=this;return new z((function(t,e){a.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof q&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return T(z,q.apply(c,arguments))}}))),s({global:!0,wrap:!0,forced:et},{Promise:z}),d(z,D,!1,!0),v(D),o=l(D),s({target:D,stat:!0,forced:et},{reject:function(t){var e=G(this);return e.reject.call(void 0,t),e.promise}}),s({target:D,stat:!0,forced:u||et},{resolve:function(t){return T(u&&this===o?z:this,t)}}),s({target:D,stat:!0,forced:nt},{all:function(t){var e=this,n=G(e),r=n.resolve,i=n.reject,o=k((function(){var n=g(e.resolve),o=[],a=0,s=1;x(t,(function(t){var u=a++,c=!1;o.push(void 0),s++,n.call(e,t).then((function(t){c||(c=!0,o[u]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=G(e),r=n.reject,i=k((function(){var i=g(e.resolve);x(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},"7QR1":function(t,e,n){var r,i=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function i(t,e){if(!r[t]){r[t]={};for(var n=0;n<t.length;n++)r[t][t.charAt(n)]=n}return r[t][e]}var o={compressToBase64:function(t){if(null==t)return"";var n=o._compress(t,6,(function(t){return e.charAt(t)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:o._decompress(t.length,32,(function(n){return i(e,t.charAt(n))}))},compressToUTF16:function(e){return null==e?"":o._compress(e,15,(function(e){return t(e+32)}))+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:o._decompress(t.length,16384,(function(e){return t.charCodeAt(e)-32}))},compressToUint8Array:function(t){for(var e=o.compress(t),n=new Uint8Array(2*e.length),r=0,i=e.length;r<i;r++){var a=e.charCodeAt(r);n[2*r]=a>>>8,n[2*r+1]=a%256}return n},decompressFromUint8Array:function(e){if(null===e||void 0===e)return o.decompress(e);for(var n=new Array(e.length/2),r=0,i=n.length;r<i;r++)n[r]=256*e[2*r]+e[2*r+1];var a=[];return n.forEach((function(e){a.push(t(e))})),o.decompress(a.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":o._compress(t,6,(function(t){return n.charAt(t)}))},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),o._decompress(t.length,32,(function(e){return i(n,t.charAt(e))})))},compress:function(e){return o._compress(e,16,(function(e){return t(e)}))},_compress:function(t,e,n){if(null==t)return"";var r,i,o,a={},s={},u="",c="",l="",f=2,p=3,h=2,d=[],v=0,m=0;for(o=0;o<t.length;o+=1)if(u=t.charAt(o),Object.prototype.hasOwnProperty.call(a,u)||(a[u]=p++,s[u]=!0),c=l+u,Object.prototype.hasOwnProperty.call(a,c))l=c;else{if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(r=0;r<h;r++)v<<=1,m==e-1?(m=0,d.push(n(v)),v=0):m++;for(i=l.charCodeAt(0),r=0;r<8;r++)v=v<<1|1&i,m==e-1?(m=0,d.push(n(v)),v=0):m++,i>>=1}else{for(i=1,r=0;r<h;r++)v=v<<1|i,m==e-1?(m=0,d.push(n(v)),v=0):m++,i=0;for(i=l.charCodeAt(0),r=0;r<16;r++)v=v<<1|1&i,m==e-1?(m=0,d.push(n(v)),v=0):m++,i>>=1}f--,0==f&&(f=Math.pow(2,h),h++),delete s[l]}else for(i=a[l],r=0;r<h;r++)v=v<<1|1&i,m==e-1?(m=0,d.push(n(v)),v=0):m++,i>>=1;f--,0==f&&(f=Math.pow(2,h),h++),a[c]=p++,l=String(u)}if(""!==l){if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(r=0;r<h;r++)v<<=1,m==e-1?(m=0,d.push(n(v)),v=0):m++;for(i=l.charCodeAt(0),r=0;r<8;r++)v=v<<1|1&i,m==e-1?(m=0,d.push(n(v)),v=0):m++,i>>=1}else{for(i=1,r=0;r<h;r++)v=v<<1|i,m==e-1?(m=0,d.push(n(v)),v=0):m++,i=0;for(i=l.charCodeAt(0),r=0;r<16;r++)v=v<<1|1&i,m==e-1?(m=0,d.push(n(v)),v=0):m++,i>>=1}f--,0==f&&(f=Math.pow(2,h),h++),delete s[l]}else for(i=a[l],r=0;r<h;r++)v=v<<1|1&i,m==e-1?(m=0,d.push(n(v)),v=0):m++,i>>=1;f--,0==f&&(f=Math.pow(2,h),h++)}for(i=2,r=0;r<h;r++)v=v<<1|1&i,m==e-1?(m=0,d.push(n(v)),v=0):m++,i>>=1;while(1){if(v<<=1,m==e-1){d.push(n(v));break}m++}return d.join("")},decompress:function(t){return null==t?"":""==t?null:o._decompress(t.length,32768,(function(e){return t.charCodeAt(e)}))},_decompress:function(e,n,r){var i,o,a,s,u,c,l,f=[],p=4,h=4,d=3,v="",m=[],g={val:r(0),position:n,index:1};for(i=0;i<3;i+=1)f[i]=i;a=0,u=Math.pow(2,2),c=1;while(c!=u)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),a|=(s>0?1:0)*c,c<<=1;switch(a){case 0:a=0,u=Math.pow(2,8),c=1;while(c!=u)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),a|=(s>0?1:0)*c,c<<=1;l=t(a);break;case 1:a=0,u=Math.pow(2,16),c=1;while(c!=u)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),a|=(s>0?1:0)*c,c<<=1;l=t(a);break;case 2:return""}f[3]=l,o=l,m.push(l);while(1){if(g.index>e)return"";a=0,u=Math.pow(2,d),c=1;while(c!=u)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),a|=(s>0?1:0)*c,c<<=1;switch(l=a){case 0:a=0,u=Math.pow(2,8),c=1;while(c!=u)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),a|=(s>0?1:0)*c,c<<=1;f[h++]=t(a),l=h-1,p--;break;case 1:a=0,u=Math.pow(2,16),c=1;while(c!=u)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),a|=(s>0?1:0)*c,c<<=1;f[h++]=t(a),l=h-1,p--;break;case 2:return m.join("")}if(0==p&&(p=Math.pow(2,d),d++),f[l])v=f[l];else{if(l!==h)return null;v=o+o.charAt(0)}m.push(v),f[h++]=o+v.charAt(0),p--,o=v,0==p&&(p=Math.pow(2,d),d++)}}};return o}();r=function(){return i}.call(e,n,e,t),void 0===r||(t.exports=r)},"7SXh":function(t,e,n){"use strict";var r=n("hXyk"),i=n("DDwO");t.exports=function(){for(var t=r(this),e=i(t.add),n=0,o=arguments.length;n<o;n++)e.call(t,arguments[n]);return t}},"7n4P":function(t,e,n){var r=n("abI8"),i=1,o=Object.prototype,a=o.hasOwnProperty;function s(t,e,n,o,s,u){var c=n&i,l=r(t),f=l.length,p=r(e),h=p.length;if(f!=h&&!c)return!1;var d=f;while(d--){var v=l[d];if(!(c?v in e:a.call(e,v)))return!1}var m=u.get(t),g=u.get(e);if(m&&g)return m==e&&g==t;var y=!0;u.set(t,e),u.set(e,t);var b=c;while(++d<f){v=l[d];var _=t[v],x=e[v];if(o)var w=c?o(x,_,v,e,t,u):o(_,x,v,t,e,u);if(!(void 0===w?_===x||s(_,x,n,o,u):w)){y=!1;break}b||(b="constructor"==v)}if(y&&!b){var E=t.constructor,S=e.constructor;E==S||!("constructor"in t)||!("constructor"in e)||"function"==typeof E&&E instanceof E&&"function"==typeof S&&S instanceof S||(y=!1)}return u["delete"](t),u["delete"](e),y}t.exports=s},"7saB":function(t,e,n){var r=n("7+LC");t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},"7vUd":function(t,e){function n(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},"7vYp":function(t,e,n){e.nextTick=function(t){var e=Array.prototype.slice.call(arguments);e.shift(),setTimeout((function(){t.apply(null,e)}),0)},e.platform=e.arch=e.execPath=e.title="browser",e.pid=1,e.browser=!0,e.env={},e.argv=[],e.binding=function(t){throw new Error("No such module. (Possibly not yet loaded)")},function(){var t,r="/";e.cwd=function(){return r},e.chdir=function(e){t||(t=n("YmYf")),r=t.resolve(e,r)}}(),e.exit=e.kill=e.umask=e.dlopen=e.uptime=e.memoryUsage=e.uvCounters=function(){},e.features={}},"7y0d":function(t,e){(function(e){t.exports=function(){var t={311:function(t){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}}},n={};function r(e){if(n[e])return n[e].exports;var i=n[e]={exports:{}},o=!0;try{t[e](i,i.exports,r),o=!1}finally{o&&delete n[e]}return i.exports}return r.ab=e+"/",r(311)}()}).call(this,"/")},"80Az":function(t,e,n){var r=n("ADQb"),i=n("gsbv"),o=r(i,"Promise");t.exports=o},"892e":function(t,e,n){"use strict";var r=n("HIsA"),i=n("2JD6"),o=n("bXon"),a=n("m52V"),s=n("Hiyu"),u=n("xUti"),c=n("dMsU"),l=n("7+LC"),f=n("+qhb"),p=n("dOdC"),h=n("pxmn"),d=n("hXyk"),v=n("NVMI"),m=n("2hCa"),g=n("n2ef"),y=n("OLna"),b=n("bWCM"),_=n("y6vz"),x=n("szjD"),w=n("wFHg"),E=n("CmBG"),S=n("qmtO"),C=n("2RC6"),T=n("73Ew"),O=n("D8FR"),A=n("GUTS"),k=n("bShA"),M=n("fbKl"),P=n("1agv"),I=n("fotI"),L=n("kPvK"),R=n("Q1Da"),D=n("bVFb"),N=n("J7X1"),j=n("twJ5"),F=n("Xf1w").forEach,z=M("hidden"),B="Symbol",U="prototype",V=L("toPrimitive"),q=j.set,G=j.getterFor(B),H=Object[U],W=i.Symbol,X=o("JSON","stringify"),Z=S.f,Y=C.f,K=w.f,J=T.f,Q=k("symbols"),$=k("op-symbols"),tt=k("string-to-symbol-registry"),et=k("symbol-to-string-registry"),nt=k("wks"),rt=i.QObject,it=!rt||!rt[U]||!rt[U].findChild,ot=s&&l((function(){return 7!=b(Y({},"a",{get:function(){return Y(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=Z(H,e);r&&delete H[e],Y(t,e,n),r&&t!==H&&Y(H,e,r)}:Y,at=function(t,e){var n=Q[t]=b(W[U]);return q(n,{type:B,tag:t,description:e}),s||(n.description=e),n},st=c?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof W},ut=function(t,e,n){t===H&&ut($,e,n),d(t);var r=g(e,!0);return d(n),f(Q,r)?(n.enumerable?(f(t,z)&&t[z][r]&&(t[z][r]=!1),n=b(n,{enumerable:y(0,!1)})):(f(t,z)||Y(t,z,y(1,{})),t[z][r]=!0),ot(t,r,n)):Y(t,r,n)},ct=function(t,e){d(t);var n=m(e),r=_(n).concat(dt(n));return F(r,(function(e){s&&!ft.call(n,e)||ut(t,e,n[e])})),t},lt=function(t,e){return void 0===e?b(t):ct(b(t),e)},ft=function(t){var e=g(t,!0),n=J.call(this,e);return!(this===H&&f(Q,e)&&!f($,e))&&(!(n||!f(this,e)||!f(Q,e)||f(this,z)&&this[z][e])||n)},pt=function(t,e){var n=m(t),r=g(e,!0);if(n!==H||!f(Q,r)||f($,r)){var i=Z(n,r);return!i||!f(Q,r)||f(n,z)&&n[z][r]||(i.enumerable=!0),i}},ht=function(t){var e=K(m(t)),n=[];return F(e,(function(t){f(Q,t)||f(P,t)||n.push(t)})),n},dt=function(t){var e=t===H,n=K(e?$:m(t)),r=[];return F(n,(function(t){!f(Q,t)||e&&!f(H,t)||r.push(Q[t])})),r};if(u||(W=function(){if(this instanceof W)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=I(t),n=function(t){this===H&&n.call($,t),f(this,z)&&f(this[z],e)&&(this[z][e]=!1),ot(this,e,y(1,t))};return s&&it&&ot(H,e,{configurable:!0,set:n}),at(e,t)},A(W[U],"toString",(function(){return G(this).tag})),A(W,"withoutSetter",(function(t){return at(I(t),t)})),T.f=ft,C.f=ut,S.f=pt,x.f=w.f=ht,E.f=dt,R.f=function(t){return at(L(t),t)},s&&(Y(W[U],"description",{configurable:!0,get:function(){return G(this).description}}),a||A(H,"propertyIsEnumerable",ft,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:W}),F(_(nt),(function(t){D(t)})),r({target:B,stat:!0,forced:!u},{for:function(t){var e=String(t);if(f(tt,e))return tt[e];var n=W(e);return tt[e]=n,et[n]=e,n},keyFor:function(t){if(!st(t))throw TypeError(t+" is not a symbol");if(f(et,t))return et[t]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!s},{create:lt,defineProperty:ut,defineProperties:ct,getOwnPropertyDescriptor:pt}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:ht,getOwnPropertySymbols:dt}),r({target:"Object",stat:!0,forced:l((function(){E.f(1)}))},{getOwnPropertySymbols:function(t){return E.f(v(t))}}),X){var vt=!u||l((function(){var t=W();return"[null]"!=X([t])||"{}"!=X({a:t})||"{}"!=X(Object(t))}));r({target:"JSON",stat:!0,forced:vt},{stringify:function(t,e,n){var r,i=[t],o=1;while(arguments.length>o)i.push(arguments[o++]);if(r=e,(h(e)||void 0!==t)&&!st(t))return p(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!st(e))return e}),i[1]=e,X.apply(null,i)}})}W[U][V]||O(W[U],V,W[U].valueOf),N(W,B),P[z]=!0},"8CG2":function(t,e){t.exports=function(t,e,n,r){var i=n?n.call(r,t,e):void 0;if(void 0!==i)return!!i;if(t===e)return!0;if("object"!==typeof t||!t||"object"!==typeof e||!e)return!1;var o=Object.keys(t),a=Object.keys(e);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(e),u=0;u<o.length;u++){var c=o[u];if(!s(c))return!1;var l=t[c],f=e[c];if(i=n?n.call(r,l,f,c):void 0,!1===i||void 0===i&&l!==f)return!1}return!0}},"8Jzd":function(t,e,n){var r=n("HIsA"),i=n("2Pxf");r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},"8al2":function(t,e,n){"use strict";n("lttk");var r,i=n("HIsA"),o=n("Hiyu"),a=n("nXFK"),s=n("2JD6"),u=n("2+gS"),c=n("GUTS"),l=n("xOST"),f=n("+qhb"),p=n("2Pxf"),h=n("5isN"),d=n("9izy").codeAt,v=n("2BKa"),m=n("J7X1"),g=n("w3Dd"),y=n("twJ5"),b=s.URL,_=g.URLSearchParams,x=g.getState,w=y.set,E=y.getterFor("URL"),S=Math.floor,C=Math.pow,T="Invalid authority",O="Invalid scheme",A="Invalid host",k="Invalid port",M=/[A-Za-z]/,P=/[\d+-.A-Za-z]/,I=/\d/,L=/^(0x|0X)/,R=/^[0-7]+$/,D=/^\d+$/,N=/^[\dA-Fa-f]+$/,j=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,F=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,z=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,B=/[\u0009\u000A\u000D]/g,U=function(t,e){var n,r,i;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return A;if(n=q(e.slice(1,-1)),!n)return A;t.host=n}else if(Q(t)){if(e=v(e),j.test(e))return A;if(n=V(e),null===n)return A;t.host=n}else{if(F.test(e))return A;for(n="",r=h(e),i=0;i<r.length;i++)n+=K(r[i],W);t.host=n}},V=function(t){var e,n,r,i,o,a,s,u=t.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),e=u.length,e>4)return t;for(n=[],r=0;r<e;r++){if(i=u[r],""==i)return t;if(o=10,i.length>1&&"0"==i.charAt(0)&&(o=L.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)a=0;else{if(!(10==o?D:8==o?R:N).test(i))return t;a=parseInt(i,o)}n.push(a)}for(r=0;r<e;r++)if(a=n[r],r==e-1){if(a>=C(256,5-e))return null}else if(a>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*C(256,3-r);return s},q=function(t){var e,n,r,i,o,a,s,u=[0,0,0,0,0,0,0,0],c=0,l=null,f=0,p=function(){return t.charAt(f)};if(":"==p()){if(":"!=t.charAt(1))return;f+=2,c++,l=c}while(p()){if(8==c)return;if(":"!=p()){e=n=0;while(n<4&&N.test(p()))e=16*e+parseInt(p(),16),f++,n++;if("."==p()){if(0==n)return;if(f-=n,c>6)return;r=0;while(p()){if(i=null,r>0){if(!("."==p()&&r<4))return;f++}if(!I.test(p()))return;while(I.test(p())){if(o=parseInt(p(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;f++}u[c]=256*u[c]+i,r++,2!=r&&4!=r||c++}if(4!=r)return;break}if(":"==p()){if(f++,!p())return}else if(p())return;u[c++]=e}else{if(null!==l)return;f++,c++,l=c}}if(null!==l){a=c-l,c=7;while(0!=c&&a>0)s=u[c],u[c--]=u[l+a-1],u[l+--a]=s}else if(8!=c)return;return u},G=function(t){for(var e=null,n=1,r=null,i=0,o=0;o<8;o++)0!==t[o]?(i>n&&(e=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(e=r,n=i),e},H=function(t){var e,n,r,i;if("number"==typeof t){for(e=[],n=0;n<4;n++)e.unshift(t%256),t=S(t/256);return e.join(".")}if("object"==typeof t){for(e="",r=G(t),n=0;n<8;n++)i&&0===t[n]||(i&&(i=!1),r===n?(e+=n?":":"::",i=!0):(e+=t[n].toString(16),n<7&&(e+=":")));return"["+e+"]"}return t},W={},X=p({},W,{" ":1,'"':1,"<":1,">":1,"`":1}),Z=p({},X,{"#":1,"?":1,"{":1,"}":1}),Y=p({},Z,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),K=function(t,e){var n=d(t,0);return n>32&&n<127&&!f(e,t)?t:encodeURIComponent(t)},J={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Q=function(t){return f(J,t.scheme)},$=function(t){return""!=t.username||""!=t.password},tt=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},et=function(t,e){var n;return 2==t.length&&M.test(t.charAt(0))&&(":"==(n=t.charAt(1))||!e&&"|"==n)},nt=function(t){var e;return t.length>1&&et(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},rt=function(t){var e=t.path,n=e.length;!n||"file"==t.scheme&&1==n&&et(e[0],!0)||e.pop()},it=function(t){return"."===t||"%2e"===t.toLowerCase()},ot=function(t){return t=t.toLowerCase(),".."===t||"%2e."===t||".%2e"===t||"%2e%2e"===t},at={},st={},ut={},ct={},lt={},ft={},pt={},ht={},dt={},vt={},mt={},gt={},yt={},bt={},_t={},xt={},wt={},Et={},St={},Ct={},Tt={},Ot=function(t,e,n,i){var o,a,s,u,c=n||at,l=0,p="",d=!1,v=!1,m=!1;n||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(z,"")),e=e.replace(B,""),o=h(e);while(l<=o.length){switch(a=o[l],c){case at:if(!a||!M.test(a)){if(n)return O;c=ut;continue}p+=a.toLowerCase(),c=st;break;case st:if(a&&(P.test(a)||"+"==a||"-"==a||"."==a))p+=a.toLowerCase();else{if(":"!=a){if(n)return O;p="",c=ut,l=0;continue}if(n&&(Q(t)!=f(J,p)||"file"==p&&($(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=p,n)return void(Q(t)&&J[t.scheme]==t.port&&(t.port=null));p="","file"==t.scheme?c=bt:Q(t)&&i&&i.scheme==t.scheme?c=ct:Q(t)?c=ht:"/"==o[l+1]?(c=lt,l++):(t.cannotBeABaseURL=!0,t.path.push(""),c=St)}break;case ut:if(!i||i.cannotBeABaseURL&&"#"!=a)return O;if(i.cannotBeABaseURL&&"#"==a){t.scheme=i.scheme,t.path=i.path.slice(),t.query=i.query,t.fragment="",t.cannotBeABaseURL=!0,c=Tt;break}c="file"==i.scheme?bt:ft;continue;case ct:if("/"!=a||"/"!=o[l+1]){c=ft;continue}c=dt,l++;break;case lt:if("/"==a){c=vt;break}c=Et;continue;case ft:if(t.scheme=i.scheme,a==r)t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query=i.query;else if("/"==a||"\\"==a&&Q(t))c=pt;else if("?"==a)t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query="",c=Ct;else{if("#"!=a){t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.path.pop(),c=Et;continue}t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query=i.query,t.fragment="",c=Tt}break;case pt:if(!Q(t)||"/"!=a&&"\\"!=a){if("/"!=a){t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,c=Et;continue}c=vt}else c=dt;break;case ht:if(c=dt,"/"!=a||"/"!=p.charAt(l+1))continue;l++;break;case dt:if("/"!=a&&"\\"!=a){c=vt;continue}break;case vt:if("@"==a){d&&(p="%40"+p),d=!0,s=h(p);for(var g=0;g<s.length;g++){var y=s[g];if(":"!=y||m){var b=K(y,Y);m?t.password+=b:t.username+=b}else m=!0}p=""}else if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&Q(t)){if(d&&""==p)return T;l-=h(p).length+1,p="",c=mt}else p+=a;break;case mt:case gt:if(n&&"file"==t.scheme){c=xt;continue}if(":"!=a||v){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&Q(t)){if(Q(t)&&""==p)return A;if(n&&""==p&&($(t)||null!==t.port))return;if(u=U(t,p),u)return u;if(p="",c=wt,n)return;continue}"["==a?v=!0:"]"==a&&(v=!1),p+=a}else{if(""==p)return A;if(u=U(t,p),u)return u;if(p="",c=yt,n==gt)return}break;case yt:if(!I.test(a)){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&Q(t)||n){if(""!=p){var _=parseInt(p,10);if(_>65535)return k;t.port=Q(t)&&_===J[t.scheme]?null:_,p=""}if(n)return;c=wt;continue}return k}p+=a;break;case bt:if(t.scheme="file","/"==a||"\\"==a)c=_t;else{if(!i||"file"!=i.scheme){c=Et;continue}if(a==r)t.host=i.host,t.path=i.path.slice(),t.query=i.query;else if("?"==a)t.host=i.host,t.path=i.path.slice(),t.query="",c=Ct;else{if("#"!=a){nt(o.slice(l).join(""))||(t.host=i.host,t.path=i.path.slice(),rt(t)),c=Et;continue}t.host=i.host,t.path=i.path.slice(),t.query=i.query,t.fragment="",c=Tt}}break;case _t:if("/"==a||"\\"==a){c=xt;break}i&&"file"==i.scheme&&!nt(o.slice(l).join(""))&&(et(i.path[0],!0)?t.path.push(i.path[0]):t.host=i.host),c=Et;continue;case xt:if(a==r||"/"==a||"\\"==a||"?"==a||"#"==a){if(!n&&et(p))c=Et;else if(""==p){if(t.host="",n)return;c=wt}else{if(u=U(t,p),u)return u;if("localhost"==t.host&&(t.host=""),n)return;p="",c=wt}continue}p+=a;break;case wt:if(Q(t)){if(c=Et,"/"!=a&&"\\"!=a)continue}else if(n||"?"!=a)if(n||"#"!=a){if(a!=r&&(c=Et,"/"!=a))continue}else t.fragment="",c=Tt;else t.query="",c=Ct;break;case Et:if(a==r||"/"==a||"\\"==a&&Q(t)||!n&&("?"==a||"#"==a)){if(ot(p)?(rt(t),"/"==a||"\\"==a&&Q(t)||t.path.push("")):it(p)?"/"==a||"\\"==a&&Q(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&et(p)&&(t.host&&(t.host=""),p=p.charAt(0)+":"),t.path.push(p)),p="","file"==t.scheme&&(a==r||"?"==a||"#"==a))while(t.path.length>1&&""===t.path[0])t.path.shift();"?"==a?(t.query="",c=Ct):"#"==a&&(t.fragment="",c=Tt)}else p+=K(a,Z);break;case St:"?"==a?(t.query="",c=Ct):"#"==a?(t.fragment="",c=Tt):a!=r&&(t.path[0]+=K(a,W));break;case Ct:n||"#"!=a?a!=r&&("'"==a&&Q(t)?t.query+="%27":t.query+="#"==a?"%23":K(a,W)):(t.fragment="",c=Tt);break;case Tt:a!=r&&(t.fragment+=K(a,X));break}l++}},At=function(t){var e,n,r=l(this,At,"URL"),i=arguments.length>1?arguments[1]:void 0,a=String(t),s=w(r,{type:"URL"});if(void 0!==i)if(i instanceof At)e=E(i);else if(n=Ot(e={},String(i)),n)throw TypeError(n);if(n=Ot(s,a,null,e),n)throw TypeError(n);var u=s.searchParams=new _,c=x(u);c.updateSearchParams(s.query),c.updateURL=function(){s.query=String(u)||null},o||(r.href=Mt.call(r),r.origin=Pt.call(r),r.protocol=It.call(r),r.username=Lt.call(r),r.password=Rt.call(r),r.host=Dt.call(r),r.hostname=Nt.call(r),r.port=jt.call(r),r.pathname=Ft.call(r),r.search=zt.call(r),r.searchParams=Bt.call(r),r.hash=Ut.call(r))},kt=At.prototype,Mt=function(){var t=E(this),e=t.scheme,n=t.username,r=t.password,i=t.host,o=t.port,a=t.path,s=t.query,u=t.fragment,c=e+":";return null!==i?(c+="//",$(t)&&(c+=n+(r?":"+r:"")+"@"),c+=H(i),null!==o&&(c+=":"+o)):"file"==e&&(c+="//"),c+=t.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},Pt=function(){var t=E(this),e=t.scheme,n=t.port;if("blob"==e)try{return new URL(e.path[0]).origin}catch(r){return"null"}return"file"!=e&&Q(t)?e+"://"+H(t.host)+(null!==n?":"+n:""):"null"},It=function(){return E(this).scheme+":"},Lt=function(){return E(this).username},Rt=function(){return E(this).password},Dt=function(){var t=E(this),e=t.host,n=t.port;return null===e?"":null===n?H(e):H(e)+":"+n},Nt=function(){var t=E(this).host;return null===t?"":H(t)},jt=function(){var t=E(this).port;return null===t?"":String(t)},Ft=function(){var t=E(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},zt=function(){var t=E(this).query;return t?"?"+t:""},Bt=function(){return E(this).searchParams},Ut=function(){var t=E(this).fragment;return t?"#"+t:""},Vt=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(o&&u(kt,{href:Vt(Mt,(function(t){var e=E(this),n=String(t),r=Ot(e,n);if(r)throw TypeError(r);x(e.searchParams).updateSearchParams(e.query)})),origin:Vt(Pt),protocol:Vt(It,(function(t){var e=E(this);Ot(e,String(t)+":",at)})),username:Vt(Lt,(function(t){var e=E(this),n=h(String(t));if(!tt(e)){e.username="";for(var r=0;r<n.length;r++)e.username+=K(n[r],Y)}})),password:Vt(Rt,(function(t){var e=E(this),n=h(String(t));if(!tt(e)){e.password="";for(var r=0;r<n.length;r++)e.password+=K(n[r],Y)}})),host:Vt(Dt,(function(t){var e=E(this);e.cannotBeABaseURL||Ot(e,String(t),mt)})),hostname:Vt(Nt,(function(t){var e=E(this);e.cannotBeABaseURL||Ot(e,String(t),gt)})),port:Vt(jt,(function(t){var e=E(this);tt(e)||(t=String(t),""==t?e.port=null:Ot(e,t,yt))})),pathname:Vt(Ft,(function(t){var e=E(this);e.cannotBeABaseURL||(e.path=[],Ot(e,t+"",wt))})),search:Vt(zt,(function(t){var e=E(this);t=String(t),""==t?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",Ot(e,t,Ct)),x(e.searchParams).updateSearchParams(e.query)})),searchParams:Vt(Bt),hash:Vt(Ut,(function(t){var e=E(this);t=String(t),""!=t?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",Ot(e,t,Tt)):e.fragment=null}))}),c(kt,"toJSON",(function(){return Mt.call(this)}),{enumerable:!0}),c(kt,"toString",(function(){return Mt.call(this)}),{enumerable:!0}),b){var qt=b.createObjectURL,Gt=b.revokeObjectURL;qt&&c(At,"createObjectURL",(function(t){return qt.apply(b,arguments)})),Gt&&c(At,"revokeObjectURL",(function(t){return Gt.apply(b,arguments)}))}m(At,"URL"),i({global:!0,forced:!a,sham:!o},{URL:At})},"8g5g":function(t,e,n){"use strict";var r=n("HIsA"),i=n("WNir").right,o=n("1+Eb"),a=n("/5yA"),s=o("reduceRight"),u=a("reduce",{1:0});r({target:"Array",proto:!0,forced:!s||!u},{reduceRight:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"8iHL":function(t,e,n){var r=n("7+LC"),i=n("/Izz"),o="\u200b\x85\u180e";t.exports=function(t){return r((function(){return!!i[t]()||o[t]()!=o||i[t].name!==t}))}},"8idk":function(t,e,n){var r=n("tGsd");t.exports=y,t.exports.parse=o,t.exports.compile=a,t.exports.tokensToFunction=c,t.exports.tokensToRegExp=g;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(t,e){var n,r=[],o=0,a=0,s="",u=e&&e.delimiter||"/";while(null!=(n=i.exec(t))){var c=n[0],p=n[1],h=n.index;if(s+=t.slice(a,h),a=h+c.length,p)s+=p[1];else{var d=t[a],v=n[2],m=n[3],g=n[4],y=n[5],b=n[6],_=n[7];s&&(r.push(s),s="");var x=null!=v&&null!=d&&d!==v,w="+"===b||"*"===b,E="?"===b||"*"===b,S=n[2]||u,C=g||y;r.push({name:m||o++,prefix:v||"",delimiter:S,optional:E,repeat:w,partial:x,asterisk:!!_,pattern:C?f(C):_?".*":"[^"+l(S)+"]+?"})}}return a<t.length&&(s+=t.substr(a)),s&&r.push(s),r}function a(t,e){return c(o(t,e),e)}function s(t){return encodeURI(t).replace(/[\/?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function u(t){return encodeURI(t).replace(/[?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function c(t,e){for(var n=new Array(t.length),i=0;i<t.length;i++)"object"===typeof t[i]&&(n[i]=new RegExp("^(?:"+t[i].pattern+")$",h(e)));return function(e,i){for(var o="",a=e||{},c=i||{},l=c.pretty?s:encodeURIComponent,f=0;f<t.length;f++){var p=t[f];if("string"!==typeof p){var h,d=a[p.name];if(null==d){if(p.optional){p.partial&&(o+=p.prefix);continue}throw new TypeError('Expected "'+p.name+'" to be defined')}if(r(d)){if(!p.repeat)throw new TypeError('Expected "'+p.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(p.optional)continue;throw new TypeError('Expected "'+p.name+'" to not be empty')}for(var v=0;v<d.length;v++){if(h=l(d[v]),!n[f].test(h))throw new TypeError('Expected all "'+p.name+'" to match "'+p.pattern+'", but received `'+JSON.stringify(h)+"`");o+=(0===v?p.prefix:p.delimiter)+h}}else{if(h=p.asterisk?u(d):l(d),!n[f].test(h))throw new TypeError('Expected "'+p.name+'" to match "'+p.pattern+'", but received "'+h+'"');o+=p.prefix+h}}else o+=p}return o}}function l(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function f(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function p(t,e){return t.keys=e,t}function h(t){return t&&t.sensitive?"":"i"}function d(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return p(t,e)}function v(t,e,n){for(var r=[],i=0;i<t.length;i++)r.push(y(t[i],e,n).source);var o=new RegExp("(?:"+r.join("|")+")",h(n));return p(o,e)}function m(t,e,n){return g(o(t,n),e,n)}function g(t,e,n){r(e)||(n=e||n,e=[]),n=n||{};for(var i=n.strict,o=!1!==n.end,a="",s=0;s<t.length;s++){var u=t[s];if("string"===typeof u)a+=l(u);else{var c=l(u.prefix),f="(?:"+u.pattern+")";e.push(u),u.repeat&&(f+="(?:"+c+f+")*"),f=u.optional?u.partial?c+"("+f+")?":"(?:"+c+"("+f+"))?":c+"("+f+")",a+=f}}var d=l(n.delimiter||"/"),v=a.slice(-d.length)===d;return i||(a=(v?a.slice(0,-d.length):a)+"(?:"+d+"(?=$))?"),a+=o?"$":i&&v?"":"(?="+d+"|$)",p(new RegExp("^"+a,h(n)),e)}function y(t,e,n){return r(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?d(t,e):r(t)?v(t,e,n):m(t,e,n)}},"8ifL":function(t,e,n){var r=n("JyHP"),i=r(Object.getPrototypeOf,Object);t.exports=i},"8rYJ":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("bZ26");function i(t){if(Array.isArray(t))return Object(r["a"])(t)}var o=n("HrP/"),a=n("EMO4");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t){return i(t)||Object(o["a"])(t)||Object(a["a"])(t)||s()}},"8rjF":function(t,e,n){var r=n("bVFb");r("hasInstance")},"8tFq":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("lkpF");function i(t,e){if(null==t)return{};var n,i,o=Object(r["a"])(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}},"8wsV":function(t,e,n){"use strict";var r=n("Wp5u"),i=n("Ra/9").includes,o=r.aTypedArray,a=r.exportTypedArrayMethod;a("includes",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},"99LQ":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return P})),n.d(e,"c",(function(){return I})),n.d(e,"d",(function(){return L})),n.d(e,"e",(function(){return R}));var r={};n.r(r),n.d(r,"create",(function(){return o})),n.d(r,"clone",(function(){return a})),n.d(r,"copy",(function(){return s})),n.d(r,"identity",(function(){return u})),n.d(r,"fromValues",(function(){return c})),n.d(r,"set",(function(){return l})),n.d(r,"transpose",(function(){return f})),n.d(r,"invert",(function(){return p})),n.d(r,"adjoint",(function(){return h})),n.d(r,"determinant",(function(){return d})),n.d(r,"multiply",(function(){return v})),n.d(r,"rotate",(function(){return m})),n.d(r,"scale",(function(){return g})),n.d(r,"fromRotation",(function(){return y})),n.d(r,"fromScaling",(function(){return b})),n.d(r,"str",(function(){return _})),n.d(r,"frob",(function(){return x})),n.d(r,"LDU",(function(){return w})),n.d(r,"add",(function(){return E})),n.d(r,"subtract",(function(){return S})),n.d(r,"exactEquals",(function(){return C})),n.d(r,"equals",(function(){return T})),n.d(r,"multiplyScalar",(function(){return O})),n.d(r,"multiplyScalarAndAdd",(function(){return A})),n.d(r,"mul",(function(){return k})),n.d(r,"sub",(function(){return M}));var i=n("TaHB");function o(){var t=new i["a"](4);return i["a"]!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function a(t){var e=new i["a"](4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function c(t,e,n,r){var o=new i["a"](4);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o}function l(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function f(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function p(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*o-i*r;return a?(a=1/a,t[0]=o*a,t[1]=-r*a,t[2]=-i*a,t[3]=n*a,t):null}function h(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function d(t){return t[0]*t[3]-t[2]*t[1]}function v(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*s+o*u,t[1]=i*s+a*u,t[2]=r*c+o*l,t[3]=i*c+a*l,t}function m(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t}function g(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=i*s,t[2]=o*u,t[3]=a*u,t}function y(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function b(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function _(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function x(t){return Math.hypot(t[0],t[1],t[2],t[3])}function w(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function E(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function S(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function C(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function T(t,e){var n=t[0],r=t[1],o=t[2],a=t[3],s=e[0],u=e[1],c=e[2],l=e[3];return Math.abs(n-s)<=i["b"]*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-u)<=i["b"]*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-c)<=i["b"]*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(a-l)<=i["b"]*Math.max(1,Math.abs(a),Math.abs(l))}function O(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function A(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}var k=v,M=S,P=n("jJQI"),I=n("d/dq"),L=n("gCNn"),R=n("yktm")},"99MV":function(t,e,n){"use strict";n.r(e);var r=n("xwgP"),i=n.n(r),o=n("+RP0"),a=n("/7QA"),s=n("Ct92");e["default"]=()=>(i.a.useEffect((()=>{var t=new o["Scene"]({id:"map",map:new s["a"]({pitch:0,style:"light",center:[116.30470275878906,39.88352811449648],zoom:10})});t.on("loaded",(()=>{var e=new a["DrawPolygon"](t,{showDistance:!0,showArea:!0});e.enable(),e.on("draw.create",(t=>{console.log(t)})),e.on("draw.update",(t=>{console.log("update",t)}))}))}),[]),i.a.createElement("div",{style:{height:"400px",position:"relative"},id:"map"}))},"9A8K":function(t,e,n){"use strict";(function(t){var r=n("xwgP"),i=n.n(r),o=n("zUoc"),a=n("EH+i"),s=n.n(a),u=1073741823,c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:{};function l(){var t="__global_unique_id__";return c[t]=(c[t]||0)+1}function f(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}function p(t){var e=[];return{on:function(t){e.push(t)},off:function(t){e=e.filter((function(e){return e!==t}))},get:function(){return t},set:function(n,r){t=n,e.forEach((function(e){return e(t,r)}))}}}function h(t){return Array.isArray(t)?t[0]:t}function d(t,e){var n,i,a="__create-react-context-"+l()+"__",c=function(t){function n(){var e;return e=t.apply(this,arguments)||this,e.emitter=p(e.props.value),e}Object(o["a"])(n,t);var r=n.prototype;return r.getChildContext=function(){var t;return t={},t[a]=this.emitter,t},r.componentWillReceiveProps=function(t){if(this.props.value!==t.value){var n,r=this.props.value,i=t.value;f(r,i)?n=0:(n="function"===typeof e?e(r,i):u,n|=0,0!==n&&this.emitter.set(t.value,n))}},r.render=function(){return this.props.children},n}(r["Component"]);c.childContextTypes=(n={},n[a]=s.a.object.isRequired,n);var d=function(e){function n(){var t;return t=e.apply(this,arguments)||this,t.state={value:t.getValue()},t.onUpdate=function(e,n){var r=0|t.observedBits;0!==(r&n)&&t.setState({value:t.getValue()})},t}Object(o["a"])(n,e);var r=n.prototype;return r.componentWillReceiveProps=function(t){var e=t.observedBits;this.observedBits=void 0===e||null===e?u:e},r.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var t=this.props.observedBits;this.observedBits=void 0===t||null===t?u:t},r.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},r.getValue=function(){return this.context[a]?this.context[a].get():t},r.render=function(){return h(this.props.children)(this.state.value)},n}(r["Component"]);return d.contextTypes=(i={},i[a]=s.a.object,i),{Provider:c,Consumer:d}}var v=i.a.createContext||d;e["a"]=v}).call(this,n("oN6F"))},"9GRW":function(t,e,n){"use strict";(function(e,n){t.exports=n()})(0,(function(){function t(t){var r=[];return t.AMapUI&&r.push(e(t.AMapUI)),t.Loca&&r.push(n(t.Loca)),Promise.all(r)}function e(t){return new Promise((function(e,n){var s=[];if(t.plugins)for(var u=0;u<t.plugins.length;u+=1)-1==i.AMapUI.plugins.indexOf(t.plugins[u])&&s.push(t.plugins[u]);if(o.AMapUI===r.failed)n("\u524d\u6b21\u8bf7\u6c42 AMapUI \u5931\u8d25");else if(o.AMapUI===r.notload){o.AMapUI=r.loading,i.AMapUI.version=t.version||i.AMapUI.version,u=i.AMapUI.version;var c=document.body||document.head,l=document.createElement("script");l.type="text/javascript",l.src="https://webapi.amap.com/ui/"+u+"/main.js",l.onerror=function(t){o.AMapUI=r.failed,n("\u8bf7\u6c42 AMapUI \u5931\u8d25")},l.onload=function(){if(o.AMapUI=r.loaded,s.length)window.AMapUI.loadUI(s,(function(){for(var t=0,n=s.length;t<n;t++){var r=s[t].split("/").slice(-1)[0];window.AMapUI[r]=arguments[t]}for(e();a.AMapUI.length;)a.AMapUI.splice(0,1)[0]()}));else for(e();a.AMapUI.length;)a.AMapUI.splice(0,1)[0]()},c.appendChild(l)}else o.AMapUI===r.loaded?t.version&&t.version!==i.AMapUI.version?n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c AMapUI \u6df7\u7528"):s.length?window.AMapUI.loadUI(s,(function(){for(var t=0,n=s.length;t<n;t++){var r=s[t].split("/").slice(-1)[0];window.AMapUI[r]=arguments[t]}e()})):e():t.version&&t.version!==i.AMapUI.version?n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c AMapUI \u6df7\u7528"):a.AMapUI.push((function(t){t?n(t):s.length?window.AMapUI.loadUI(s,(function(){for(var t=0,n=s.length;t<n;t++){var r=s[t].split("/").slice(-1)[0];window.AMapUI[r]=arguments[t]}e()})):e()}))}))}function n(t){return new Promise((function(e,n){if(i.AMap.version.startsWith("2.0"))n("Loca \u6682\u4e0d\u9002\u914d JSAPI 2.0,\u8bf7\u4f7f\u7528 1.4.15");else if(o.Loca===r.failed)n("\u524d\u6b21\u8bf7\u6c42 Loca \u5931\u8d25");else if(o.Loca===r.notload){o.Loca=r.loading,i.Loca.version=t.version||i.Loca.version;var s=i.Loca.version,u=i.key,c=document.body||document.head,l=document.createElement("script");l.type="text/javascript",l.src="https://webapi.amap.com/loca?v="+s+"&key="+u,l.onerror=function(t){o.Loca=r.failed,n("\u8bf7\u6c42 AMapUI \u5931\u8d25")},l.onload=function(){for(o.Loca=r.loaded,e();a.Loca.length;)a.Loca.splice(0,1)[0]()},c.appendChild(l)}else o.Loca===r.loaded?t.version&&t.version!==i.Loca.version?n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c Loca \u6df7\u7528"):e():t.version&&t.version!==i.Loca.version?n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c Loca \u6df7\u7528"):a.Loca.push((function(t){t?n(t):n()}))}))}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var r;(function(t){t.notload="notload",t.loading="loading",t.loaded="loaded",t.failed="failed"})(r||(r={}));var i={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},o={AMap:r.notload,AMapUI:r.notload,Loca:r.notload},a={AMap:[],AMapUI:[],Loca:[]},s=[],u=function(t){"function"==typeof t&&(o.AMap===r.loaded?t(window.AMap):s.push(t))};return{load:function(e){return new Promise((function(n,a){if(o.AMap==r.failed)a("");else if(o.AMap==r.notload){var c=e.key,l=e.version,f=e.plugins;c?(window.AMap&&"lbs.amap.com"!==location.host&&a("\u7981\u6b62\u591a\u79cdAPI\u52a0\u8f7d\u65b9\u5f0f\u6df7\u7528"),i.key=c,i.AMap.version=l||i.AMap.version,i.AMap.plugins=f||i.AMap.plugins,o.AMap=r.loading,l=document.body||document.head,window.___onAPILoaded=function(i){if(delete window.___onAPILoaded,i)o.AMap=r.failed,a(i);else for(o.AMap=r.loaded,t(e).then((function(){n(window.AMap)}))["catch"](a);s.length;)s.splice(0,1)[0]()},f=document.createElement("script"),f.type="text/javascript",f.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+i.AMap.version+"&key="+c+"&plugin="+i.AMap.plugins.join(","),f.onerror=function(t){o.AMap=r.failed,a(t)},l.appendChild(f)):a("\u8bf7\u586b\u5199key")}else if(o.AMap==r.loaded)if(e.key&&e.key!==i.key)a("\u591a\u4e2a\u4e0d\u4e00\u81f4\u7684 key");else if(e.version&&e.version!==i.AMap.version)a("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c JSAPI \u6df7\u7528");else{if(c=[],e.plugins)for(l=0;l<e.plugins.length;l+=1)-1==i.AMap.plugins.indexOf(e.plugins[l])&&c.push(e.plugins[l]);c.length?window.AMap.plugin(c,(function(){t(e).then((function(){n(window.AMap)}))["catch"](a)})):t(e).then((function(){n(window.AMap)}))["catch"](a)}else if(e.key&&e.key!==i.key)a("\u591a\u4e2a\u4e0d\u4e00\u81f4\u7684 key");else if(e.version&&e.version!==i.AMap.version)a("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c JSAPI \u6df7\u7528");else{var p=[];if(e.plugins)for(l=0;l<e.plugins.length;l+=1)-1==i.AMap.plugins.indexOf(e.plugins[l])&&p.push(e.plugins[l]);u((function(){p.length?window.AMap.plugin(p,(function(){t(e).then((function(){n(window.AMap)}))["catch"](a)})):t(e).then((function(){n(window.AMap)}))["catch"](a)}))}}))},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,i={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},o={AMap:r.notload,AMapUI:r.notload,Loca:r.notload},a={AMap:[],AMapUI:[],Loca:[]}}}}))},"9HG5":function(t,e,n){var r=n("kPvK"),i=r("iterator"),o=!1;try{var a=0,s={next:function(){return{done:!!a++}},return:function(){o=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(u){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var r={};r[i]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(u){}return n}},"9L8m":function(t,e,n){"use strict";function r(){return[e.INJECT_TAG,e.MULTI_INJECT_TAG,e.NAME_TAG,e.UNMANAGED_TAG,e.NAMED_TAG,e.OPTIONAL_TAG]}Object.defineProperty(e,"__esModule",{value:!0}),e.NON_CUSTOM_TAG_KEYS=e.POST_CONSTRUCT=e.DESIGN_PARAM_TYPES=e.PARAM_TYPES=e.TAGGED_PROP=e.TAGGED=e.MULTI_INJECT_TAG=e.INJECT_TAG=e.OPTIONAL_TAG=e.UNMANAGED_TAG=e.NAME_TAG=e.NAMED_TAG=void 0,e.NAMED_TAG="named",e.NAME_TAG="name",e.UNMANAGED_TAG="unmanaged",e.OPTIONAL_TAG="optional",e.INJECT_TAG="inject",e.MULTI_INJECT_TAG="multi_inject",e.TAGGED="inversify:tagged",e.TAGGED_PROP="inversify:tagged_props",e.PARAM_TYPES="inversify:paramtypes",e.DESIGN_PARAM_TYPES="design:paramtypes",e.POST_CONSTRUCT="post_construct",e.NON_CUSTOM_TAG_KEYS=r()},"9OO5":function(t,e,n){"use strict";var r=n("sqIH"),i=n("hXyk"),o=n("2I03"),a=n("JzK+"),s=n("OOuR"),u=n("WdrS");r("match",1,(function(t,e,n){return[function(e){var n=a(this),r=void 0==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var a=i(t),c=String(this);if(!a.global)return u(a,c);var l=a.unicode;a.lastIndex=0;var f,p=[],h=0;while(null!==(f=u(a,c))){var d=String(f[0]);p[h]=d,""===d&&(a.lastIndex=s(c,o(a.lastIndex),l)),h++}return 0===h?null:p}]}))},"9Sz/":function(t,e,n){var r=n("fUu9");function i(t){return t&&t.length?r(t):[]}t.exports=i},"9VYP":function(t,e,n){"use strict";var r=n("dZOt"),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,p=i?Symbol.for("react.forward_ref"):60112,h=i?Symbol.for("react.suspense"):60113,d=i?Symbol.for("react.memo"):60115,v=i?Symbol.for("react.lazy"):60116,m="function"===typeof Symbol&&Symbol.iterator;function g(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function _(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||y}function x(){}function w(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||y}_.prototype.isReactComponent={},_.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(g(85));this.updater.enqueueSetState(this,t,e,"setState")},_.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},x.prototype=_.prototype;var E=w.prototype=new x;E.constructor=w,r(E,_.prototype),E.isPureReactComponent=!0;var S={current:null},C=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function O(t,e,n){var r,i={},a=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)C.call(e,r)&&!T.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:t,key:a,ref:s,props:i,_owner:S.current}}function A(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function k(t){return"object"===typeof t&&null!==t&&t.$$typeof===o}function M(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}var P=/\/+/g,I=[];function L(t,e,n,r){if(I.length){var i=I.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function R(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>I.length&&I.push(t)}function D(t,e,n,r){var i=typeof t;"undefined"!==i&&"boolean"!==i||(t=null);var s=!1;if(null===t)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case o:case a:s=!0}}if(s)return n(r,t,""===e?"."+j(t,0):e),1;if(s=0,e=""===e?".":e+":",Array.isArray(t))for(var u=0;u<t.length;u++){i=t[u];var c=e+j(i,u);s+=D(i,c,n,r)}else if(null===t||"object"!==typeof t?c=null:(c=m&&t[m]||t["@@iterator"],c="function"===typeof c?c:null),"function"===typeof c)for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=e+j(i,u++),s+=D(i,c,n,r);else if("object"===i)throw n=""+t,Error(g(31,"[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return s}function N(t,e,n){return null==t?0:D(t,"",e,n)}function j(t,e){return"object"===typeof t&&null!==t&&null!=t.key?M(t.key):e.toString(36)}function F(t,e){t.func.call(t.context,e,t.count++)}function z(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?B(t,r,n,(function(t){return t})):null!=t&&(k(t)&&(t=A(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(P,"$&/")+"/")+n)),r.push(t))}function B(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(P,"$&/")+"/"),e=L(e,o,r,i),N(t,z,e),R(e)}var U={current:null};function V(){var t=U.current;if(null===t)throw Error(g(321));return t}var q={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:S,IsSomeRendererActing:{current:!1},assign:r};e.Children={map:function(t,e,n){if(null==t)return t;var r=[];return B(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;e=L(null,null,e,n),N(t,F,e),R(e)},count:function(t){return N(t,(function(){return null}),null)},toArray:function(t){var e=[];return B(t,e,null,(function(t){return t})),e},only:function(t){if(!k(t))throw Error(g(143));return t}},e.Component=_,e.Fragment=s,e.Profiler=c,e.PureComponent=w,e.StrictMode=u,e.Suspense=h,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error(g(267,t));var i=r({},t.props),a=t.key,s=t.ref,u=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,u=S.current),void 0!==e.key&&(a=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(l in e)C.call(e,l)&&!T.hasOwnProperty(l)&&(i[l]=void 0===e[l]&&void 0!==c?c[l]:e[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:o,type:t.type,key:a,ref:s,props:i,_owner:u}},e.createContext=function(t,e){return void 0===e&&(e=null),t={$$typeof:f,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:l,_context:t},t.Consumer=t},e.createElement=O,e.createFactory=function(t){var e=O.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:p,render:t}},e.isValidElement=k,e.lazy=function(t){return{$$typeof:v,_ctor:t,_status:-1,_result:null}},e.memo=function(t,e){return{$$typeof:d,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return V().useCallback(t,e)},e.useContext=function(t,e){return V().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return V().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return V().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return V().useLayoutEffect(t,e)},e.useMemo=function(t,e){return V().useMemo(t,e)},e.useReducer=function(t,e,n){return V().useReducer(t,e,n)},e.useRef=function(t){return V().useRef(t)},e.useState=function(t){return V().useState(t)},e.version="16.14.0"},"9Vf9":function(t,e,n){var r=n("HIsA"),i=Math.hypot,o=Math.abs,a=Math.sqrt,s=!!i&&i(1/0,NaN)!==1/0;r({target:"Math",stat:!0,forced:s},{hypot:function(t,e){var n,r,i=0,s=0,u=arguments.length,c=0;while(s<u)n=o(arguments[s++]),c<n?(r=c/n,i=i*r*r+1,c=n):n>0?(r=n/c,i+=r*r):i+=n;return c===1/0?1/0:c*a(i)}})},"9Ywa":function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("LTDN");r({target:"Set",proto:!0,real:!0,forced:i},{deleteAll:function(){return o.apply(this,arguments)}})},"9ZTU":function(t,e,n){var r,i,o=n("2JD6"),a=n("T9r4"),s=o.process,u=s&&s.versions,c=u&&u.v8;c?(r=c.split("."),i=r[0]+r[1]):a&&(r=a.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/),r&&(i=r[1]))),t.exports=i&&+i},"9izy":function(t,e,n){var r=n("PaPB"),i=n("JzK+"),o=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}};t.exports={codeAt:o(!1),charAt:o(!0)}},"9kvl":function(t,e,n){"use strict";n.d(e,"a",(function(){return r["b"]})),n.d(e,"b",(function(){return i["a"]}));var r=n("FfOG"),i=n("bCY9"),o=(n("I5X1"),n("nWs5"),n("8tFq"),n("TWOK"),n("TFir"),n("eAvs"),n("OFkz"),n("Iph1"),n("xwgP")),a=n.n(o),s=n("TX3P"),u=n.n(s),c=n("q3Yw"),l=n.n(c);function f(){return"undefined"===typeof document||"undefined"===typeof document.visibilityState||"hidden"!==document.visibilityState}function p(){return"undefined"===typeof navigator.onLine||navigator.onLine}new Map;var h=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a},d=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(h(arguments[e]));return t};function v(t,e){var n=!1;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];n||(n=!0,t.apply(void 0,d(r)),setTimeout((function(){n=!1}),e))}}var m=[];function g(t){return m.push(t),function(){var e=m.indexOf(t);m.splice(e,1)}}var y=!1;if("undefined"!==typeof window&&window.addEventListener&&!y){var b=function(){if(f()&&p())for(var t=0;t<m.length;t++){var e=m[t];e()}};window.addEventListener("visibilitychange",b,!1),window.addEventListener("focus",b,!1),y=!0}var _=g,x=[];function w(t){return x.push(t),function(){var e=x.indexOf(t);x.splice(e,1)}}var E=!1;if("undefined"!==typeof window&&window.addEventListener&&!E){var S=function(){if(f())for(var t=0;t<x.length;t++){var e=x[t];e()}};window.addEventListener("visibilitychange",S,!1),E=!0}var C=w,T=function(){return T=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},T.apply(this,arguments)},O=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a},A=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(O(arguments[e]));return t};(function(){function t(t,e,n,r){this.count=0,this.pollingWhenVisibleFlag=!1,this.pollingTimer=void 0,this.loadingDelayTimer=void 0,this.unsubscribe=[],this.that=this,this.state={loading:!1,params:[],data:void 0,error:void 0,run:this.run.bind(this.that),mutate:this.mutate.bind(this.that),refresh:this.refresh.bind(this.that),cancel:this.cancel.bind(this.that),unmount:this.unmount.bind(this.that)},this.service=t,this.config=e,this.subscribe=n,r&&(this.state=T(T({},this.state),r)),this.debounceRun=this.config.debounceInterval?u()(this._run,this.config.debounceInterval):void 0,this.throttleRun=this.config.throttleInterval?l()(this._run,this.config.throttleInterval):void 0,this.limitRefresh=v(this.refresh.bind(this),this.config.focusTimespan),this.config.pollingInterval&&this.unsubscribe.push(C(this.rePolling.bind(this))),this.config.refreshOnWindowFocus&&this.unsubscribe.push(_(this.limitRefresh.bind(this)))}t.prototype.setState=function(t){void 0===t&&(t={}),this.state=T(T({},this.state),t),this.subscribe(this.state)},t.prototype._run=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.pollingTimer&&clearTimeout(this.pollingTimer),this.loadingDelayTimer&&clearTimeout(this.loadingDelayTimer),this.count+=1;var r=this.count;return this.setState({loading:!this.config.loadingDelay,params:e}),this.config.loadingDelay&&(this.loadingDelayTimer=setTimeout((function(){t.setState({loading:!0})}),this.config.loadingDelay)),this.service.apply(this,A(e)).then((function(n){if(r!==t.count)return new Promise((function(){}));t.loadingDelayTimer&&clearTimeout(t.loadingDelayTimer);var i=t.config.formatResult?t.config.formatResult(n):n;return t.setState({data:i,error:void 0,loading:!1}),t.config.onSuccess&&t.config.onSuccess(i,e),i}))["catch"]((function(n){if(r!==t.count)return new Promise((function(){}));if(t.loadingDelayTimer&&clearTimeout(t.loadingDelayTimer),t.setState({data:void 0,error:n,loading:!1}),t.config.onError&&t.config.onError(n,e),t.config.throwOnError)throw n;return console.error(n),Promise.reject("useRequest has caught the exception, if you need to handle the exception yourself, you can set options.throwOnError to true.")}))["finally"]((function(){if(r===t.count&&t.config.pollingInterval){if(!f()&&!t.config.pollingWhenHidden)return void(t.pollingWhenVisibleFlag=!0);t.pollingTimer=setTimeout((function(){t._run.apply(t,A(e))}),t.config.pollingInterval)}}))},t.prototype.run=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.debounceRun?(this.debounceRun.apply(this,A(t)),Promise.resolve(null)):this.throttleRun?(this.throttleRun.apply(this,A(t)),Promise.resolve(null)):this._run.apply(this,A(t))},t.prototype.cancel=function(){this.debounceRun&&this.debounceRun.cancel(),this.throttleRun&&this.throttleRun.cancel(),this.loadingDelayTimer&&clearTimeout(this.loadingDelayTimer),this.pollingTimer&&clearTimeout(this.pollingTimer),this.pollingWhenVisibleFlag=!1,this.count+=1,this.setState({loading:!1})},t.prototype.refresh=function(){return this.run.apply(this,A(this.state.params))},t.prototype.rePolling=function(){this.pollingWhenVisibleFlag&&(this.pollingWhenVisibleFlag=!1,this.refresh())},t.prototype.mutate=function(t){"function"===typeof t?this.setState({data:t(this.state.data)||{}}):this.setState({data:t})},t.prototype.unmount=function(){this.cancel(),this.unsubscribe.forEach((function(t){t()}))}})();var k=a.a.createContext({});k.displayName="UseRequestConfigContext";var M=k;var P;M.Provider;(function(t){t[t["SILENT"]=0]="SILENT",t[t["WARN_MESSAGE"]=1]="WARN_MESSAGE",t[t["ERROR_MESSAGE"]=2]="ERROR_MESSAGE",t[t["NOTIFICATION"]=4]="NOTIFICATION",t[t["REDIRECT"]=9]="REDIRECT"})(P||(P={}));n("1sE6")},"9sv9":function(t,e,n){var r=n("2DUl"),i=n("tWq2"),o=n("M/IS"),a=n("k5S6"),s=n("FmSd");function u(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype["delete"]=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},"9u1Y":function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},o=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var a=n("DpFF"),s=n("196R"),u=n("2+60"),c=n("9L8m"),l=n("/dUy"),f=n("O7jt"),p=n("g5+9"),h=n("szLl"),d=n("qSJf"),v=n("Rph/"),m=n("13cj"),g=n("4X1q"),y=function(){function t(t){this._appliedMiddleware=[];var e=t||{};if("object"!==typeof e)throw new Error(""+s.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===e.defaultScope)e.defaultScope=u.BindingScopeEnum.Transient;else if(e.defaultScope!==u.BindingScopeEnum.Singleton&&e.defaultScope!==u.BindingScopeEnum.Transient&&e.defaultScope!==u.BindingScopeEnum.Request)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!==typeof e.autoBindInjectable)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!==typeof e.skipBaseClassChecks)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=d.id(),this._bindingDictionary=new g.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new l.MetadataReader}return t.merge=function(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var a=new t,s=o([e,n],r).map((function(t){return f.getBindingDictionary(t)})),u=f.getBindingDictionary(a);function c(t,e){t.traverse((function(t,n){n.forEach((function(t){e.add(t.serviceIdentifier,t.clone())}))}))}return s.forEach((function(t){c(t,u)})),a},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=t;r<i.length;r++){var o=i[r],a=n(o.id);o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(this,void 0,void 0,(function(){var e,n,r,o,a;return i(this,(function(i){switch(i.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,r=t,i.label=1;case 1:return n<r.length?(o=r[n],a=e(o.id),[4,o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(t){return function(e){return e.moduleId===t}};e.forEach((function(e){var n=r(e.id);t._bindingDictionary.removeByCondition(n)}))},t.prototype.bind=function(t){var e=this.options.defaultScope||u.BindingScopeEnum.Transient,n=new a.Binding(t,e);return this._bindingDictionary.add(t,n),new h.BindingToSyntax(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error(s.CANNOT_UNBIND+" "+v.getServiceIdentifierAsString(t))}},t.prototype.unbindAll=function(){this._bindingDictionary=new g.Lookup},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,c.NAMED_TAG,e)},t.prototype.isBoundTagged=function(t,e,n){var r=!1;if(this._bindingDictionary.hasKey(t)){var i=this._bindingDictionary.get(t),o=f.createMockRequest(this,t,e,n);r=i.some((function(t){return t.constraint(o)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(t,e,n)),r},t.prototype.snapshot=function(){this._snapshots.push(m.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(s.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._appliedMiddleware=this._appliedMiddleware.concat(t);var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce((function(t,e){return e(t)}),n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){return this._get(!1,!1,u.TargetTypeEnum.Variable,t)},t.prototype.getTagged=function(t,e,n){return this._get(!1,!1,u.TargetTypeEnum.Variable,t,e,n)},t.prototype.getNamed=function(t,e){return this.getTagged(t,c.NAMED_TAG,e)},t.prototype.getAll=function(t){return this._get(!0,!0,u.TargetTypeEnum.Variable,t)},t.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,u.TargetTypeEnum.Variable,t,e,n)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,c.NAMED_TAG,e)},t.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),this._appliedMiddleware.forEach((function(t){e.applyMiddleware(t)})),e.get(t)},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},n=function(n){return function(r){var i=t.bind.bind(t),o=i(r);return e(o,n),o}},r=function(e){return function(e){var n=t.unbind.bind(t);n(e)}},i=function(e){return function(e){var n=t.isBound.bind(t);return n(e)}},o=function(n){return function(r){var i=t.rebind.bind(t),o=i(r);return e(o,n),o}};return function(t){return{bindFunction:n(t),isboundFunction:i(t),rebindFunction:o(t),unbindFunction:r(t)}}},t.prototype._get=function(t,e,n,r,i,o){var a=null,u={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:i,serviceIdentifier:r,targetType:n,value:o};if(this._middleware){if(a=this._middleware(u),void 0===a||null===a)throw new Error(s.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(u);return a},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=f.plan(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);n=e.contextInterceptor(n);var r=p.resolve(n);return r}},t}();e.Container=y},ADQb:function(t,e,n){var r=n("YTZi"),i=n("AQKv");function o(t,e){var n=i(t,e);return r(n)?n:void 0}t.exports=o},AKk7:function(t,e,n){"use strict";var r=!0,i="Invariant failed";function o(t,e){if(!t){if(r)throw new Error(i);throw new Error(i+": "+(e||""))}}e["a"]=o},"ANK/":function(t,e){function n(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}t.exports=n},AQKv:function(t,e){function n(t,e){return null==t?void 0:t[e]}t.exports=n},AUMs:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isStackOverflowExeption=void 0;var r=n("196R");function i(t){return t instanceof RangeError||t.message===r.STACK_OVERFLOW}e.isStackOverflowExeption=i},AZAf:function(t,e,n){var r=n("CpaZ"),i=n("VL8K"),o=n("+Gi7"),a=n("lDzS"),s=n("TeP8"),u=n("lOrw"),c=Object.prototype,l=c.hasOwnProperty;function f(t,e){var n=o(t),c=!n&&i(t),f=!n&&!c&&a(t),p=!n&&!c&&!f&&u(t),h=n||c||f||p,d=h?r(t.length,String):[],v=d.length;for(var m in t)!e&&!l.call(t,m)||h&&("length"==m||f&&("offset"==m||"parent"==m)||p&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,v))||d.push(m);return d}t.exports=f},Aj84:function(t,e,n){"use strict";n.r(e);var r=n("xwgP"),i=n.n(r),o=n("+RP0"),a=n("/7QA"),s=n("Ct92");e["default"]=()=>(i.a.useEffect((()=>{var t={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[116.30470275878906,39.88352811449648],[116.32083892822264,39.89380183825623],[116.31637573242188,39.89617247892832],[116.30556106567381,39.89577737784395],[116.30281448364258,39.89709437260048],[116.28822326660156,39.90657598772839],[116.27809524536131,39.901571965464],[116.27843856811523,39.880103197763546],[116.28822326660156,39.87457027859936],[116.29131317138673,39.85928656392012],[116.29371643066405,39.852302354195864],[116.3129425048828,39.853620184014325],[116.3393783569336,39.85414730885731],[116.3448715209961,39.85796884289976],[116.3448715209961,39.87233063679467],[116.3422966003418,39.885240508711654],[116.32564544677734,39.889060310919994],[116.31465911865234,39.88813830918363],[116.30470275878906,39.88352811449648]]]}}]},e=new o["Scene"]({id:"map",map:new s["a"]({pitch:0,style:"light",center:[116.30470275878906,39.88352811449648],zoom:12})});e.on("loaded",(()=>{new a["DrawPolygon"](e,{data:t,showDistance:!0,showArea:!0})}))}),[]),i.a.createElement("div",{style:{height:"400px",position:"relative"},id:"map"}))},AmsH:function(t,e){var n="\\ud800-\\udfff",r="\\u0300-\\u036f",i="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",a=r+i+o,s="\\ufe0e\\ufe0f",u="\\u200d",c=RegExp("["+u+n+a+s+"]");function l(t){return c.test(t)}t.exports=l},B0cc:function(t,e){function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},B6LR:function(t,e,n){var r=n("ihzt");t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},B7jn:function(t,e,n){var r=n("bVFb");r("species")},B7nT:function(t,e){function n(t){return null==t}t.exports=n},BLox:function(t,e,n){(function(t,e){var n;(function(n){(function(t){var r="object"===typeof e?e:"object"===typeof self?self:"object"===typeof this?this:Function("return this;")(),i=o(n);function o(t,e){return function(n,r){"function"!==typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:r}),e&&e(n,r)}}"undefined"===typeof r.Reflect?r.Reflect=n:i=o(r.Reflect,i),t(i)})((function(e){var n=Object.prototype.hasOwnProperty,r="function"===typeof Symbol,i=r&&"undefined"!==typeof Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=r&&"undefined"!==typeof Symbol.iterator?Symbol.iterator:"@@iterator",a="function"===typeof Object.create,s={__proto__:[]}instanceof Array,u=!a&&!s,c={create:a?function(){return ot(Object.create(null))}:s?function(){return ot({__proto__:null})}:function(){return ot({})},has:u?function(t,e){return n.call(t,e)}:function(t,e){return e in t},get:u?function(t,e){return n.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}},l=Object.getPrototypeOf(Function),f="object"===typeof t&&Object({NODE_ENV:"production"})&&"true"===Object({NODE_ENV:"production"})["REFLECT_METADATA_USE_MAP_POLYFILL"],p=f||"function"!==typeof Map||"function"!==typeof Map.prototype.entries?nt():Map,h=f||"function"!==typeof Set||"function"!==typeof Set.prototype.entries?rt():Set,d=f||"function"!==typeof WeakMap?it():WeakMap,v=new d;function m(t,e,n,r){if(j(n)){if(!W(t))throw new TypeError;if(!Z(e))throw new TypeError;return T(t,e)}if(!W(t))throw new TypeError;if(!B(e))throw new TypeError;if(!B(r)&&!j(r)&&!F(r))throw new TypeError;return F(r)&&(r=void 0),n=H(n),O(t,e,n,r)}function g(t,e){function n(n,r){if(!B(n))throw new TypeError;if(!j(r)&&!Y(r))throw new TypeError;L(t,e,n,r)}return n}function y(t,e,n,r){if(!B(n))throw new TypeError;return j(r)||(r=H(r)),L(t,e,n,r)}function b(t,e,n){if(!B(e))throw new TypeError;return j(n)||(n=H(n)),k(t,e,n)}function _(t,e,n){if(!B(e))throw new TypeError;return j(n)||(n=H(n)),M(t,e,n)}function x(t,e,n){if(!B(e))throw new TypeError;return j(n)||(n=H(n)),P(t,e,n)}function w(t,e,n){if(!B(e))throw new TypeError;return j(n)||(n=H(n)),I(t,e,n)}function E(t,e){if(!B(t))throw new TypeError;return j(e)||(e=H(e)),R(t,e)}function S(t,e){if(!B(t))throw new TypeError;return j(e)||(e=H(e)),D(t,e)}function C(t,e,n){if(!B(e))throw new TypeError;j(n)||(n=H(n));var r=A(e,n,!1);if(j(r))return!1;if(!r["delete"](t))return!1;if(r.size>0)return!0;var i=v.get(e);return i["delete"](n),i.size>0||v["delete"](e),!0}function T(t,e){for(var n=t.length-1;n>=0;--n){var r=t[n],i=r(e);if(!j(i)&&!F(i)){if(!Z(i))throw new TypeError;e=i}}return e}function O(t,e,n,r){for(var i=t.length-1;i>=0;--i){var o=t[i],a=o(e,n,r);if(!j(a)&&!F(a)){if(!B(a))throw new TypeError;r=a}}return r}function A(t,e,n){var r=v.get(t);if(j(r)){if(!n)return;r=new p,v.set(t,r)}var i=r.get(e);if(j(i)){if(!n)return;i=new p,r.set(e,i)}return i}function k(t,e,n){var r=M(t,e,n);if(r)return!0;var i=et(e);return!F(i)&&k(t,i,n)}function M(t,e,n){var r=A(e,n,!1);return!j(r)&&q(r.has(t))}function P(t,e,n){var r=M(t,e,n);if(r)return I(t,e,n);var i=et(e);return F(i)?void 0:P(t,i,n)}function I(t,e,n){var r=A(e,n,!1);if(!j(r))return r.get(t)}function L(t,e,n,r){var i=A(n,r,!0);i.set(t,e)}function R(t,e){var n=D(t,e),r=et(t);if(null===r)return n;var i=R(r,e);if(i.length<=0)return n;if(n.length<=0)return i;for(var o=new h,a=[],s=0,u=n;s<u.length;s++){var c=u[s],l=o.has(c);l||(o.add(c),a.push(c))}for(var f=0,p=i;f<p.length;f++){c=p[f],l=o.has(c);l||(o.add(c),a.push(c))}return a}function D(t,e){var n=[],r=A(t,e,!1);if(j(r))return n;var i=r.keys(),o=J(i),a=0;while(1){var s=$(o);if(!s)return n.length=a,n;var u=Q(s);try{n[a]=u}catch(c){try{tt(o)}finally{throw c}}a++}}function N(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function j(t){return void 0===t}function F(t){return null===t}function z(t){return"symbol"===typeof t}function B(t){return"object"===typeof t?null!==t:"function"===typeof t}function U(t,e){switch(N(t)){case 0:return t;case 1:return t;case 2:return t;case 3:return t;case 4:return t;case 5:return t}var n=3===e?"string":5===e?"number":"default",r=K(t,i);if(void 0!==r){var o=r.call(t,n);if(B(o))throw new TypeError;return o}return V(t,"default"===n?"number":n)}function V(t,e){if("string"===e){var n=t.toString;if(X(n)){var r=n.call(t);if(!B(r))return r}var i=t.valueOf;if(X(i)){r=i.call(t);if(!B(r))return r}}else{i=t.valueOf;if(X(i)){r=i.call(t);if(!B(r))return r}var o=t.toString;if(X(o)){r=o.call(t);if(!B(r))return r}}throw new TypeError}function q(t){return!!t}function G(t){return""+t}function H(t){var e=U(t,3);return z(e)?e:G(e)}function W(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function X(t){return"function"===typeof t}function Z(t){return"function"===typeof t}function Y(t){switch(N(t)){case 3:return!0;case 4:return!0;default:return!1}}function K(t,e){var n=t[e];if(void 0!==n&&null!==n){if(!X(n))throw new TypeError;return n}}function J(t){var e=K(t,o);if(!X(e))throw new TypeError;var n=e.call(t);if(!B(n))throw new TypeError;return n}function Q(t){return t.value}function $(t){var e=t.next();return!e.done&&e}function tt(t){var e=t["return"];e&&e.call(t)}function et(t){var e=Object.getPrototypeOf(t);if("function"!==typeof t||t===l)return e;if(e!==l)return e;var n=t.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return e;var i=r.constructor;return"function"!==typeof i||i===t?e:i}function nt(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[o]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype["throw"]=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype["return"]=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype["delete"]=function(e){var n=this._find(e,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,r)},e.prototype.values=function(){return new n(this._keys,this._values,i)},e.prototype.entries=function(){return new n(this._keys,this._values,a)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[o]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function r(t,e){return t}function i(t,e){return e}function a(t,e){return[t,e]}}function rt(){return function(){function t(){this._map=new p}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype["delete"]=function(t){return this._map["delete"](t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[o]=function(){return this.keys()},t}()}function it(){var t=16,e=c.create(),r=i();return function(){function t(){this._key=i()}return t.prototype.has=function(t){var e=o(t,!1);return void 0!==e&&c.has(e,this._key)},t.prototype.get=function(t){var e=o(t,!1);return void 0!==e?c.get(e,this._key):void 0},t.prototype.set=function(t,e){var n=o(t,!0);return n[this._key]=e,this},t.prototype["delete"]=function(t){var e=o(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=i()},t}();function i(){var t;do{t="@@WeakMap@@"+u()}while(c.has(e,t));return e[t]=!0,t}function o(t,e){if(!n.call(t,r)){if(!e)return;Object.defineProperty(t,r,{value:c.create()})}return t[r]}function a(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function s(t){return"function"===typeof Uint8Array?"undefined"!==typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!==typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):a(new Uint8Array(t),t):a(new Array(t),t)}function u(){var e=s(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",r=0;r<t;++r){var i=e[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}function ot(t){return t.__=void 0,delete t.__,t}e("decorate",m),e("metadata",g),e("defineMetadata",y),e("hasMetadata",b),e("hasOwnMetadata",_),e("getMetadata",x),e("getOwnMetadata",w),e("getMetadataKeys",E),e("getOwnMetadataKeys",S),e("deleteMetadata",C)}))})(n||(n={}))}).call(this,n("7vYp"),n("oN6F"))},BRXA:function(t,e,n){var r=n("Go1P");function i(t){return r(this.__data__,t)>-1}t.exports=i},BXhE:function(t,e,n){var r=n("ADQb"),i=n("gsbv"),o=r(i,"Set");t.exports=o},BaLd:function(t,e,n){var r=n("3Jv6"),i=n("+Gi7"),o=n("2Swa"),a="[object String]";function s(t){return"string"==typeof t||!i(t)&&o(t)&&r(t)==a}t.exports=s},BbNA:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Symbol["for"]("INJECTION");function i(t,e,n,i){function o(){return i&&!Reflect.hasMetadata(r,this,e)&&Reflect.defineMetadata(r,n(),this,e),Reflect.hasMetadata(r,this,e)?Reflect.getMetadata(r,this,e):n()}function a(t){Reflect.defineMetadata(r,t,this,e)}Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:o,set:a})}function o(t,e){return function(n){return function(r,o){var a=function(){return t.get(n)};i(r,o,a,e)}}}function a(t,e){return function(n,r){return function(o,a){var s=function(){return t.getNamed(n,r)};i(o,a,s,e)}}}function s(t,e){return function(n,r,o){return function(a,s){var u=function(){return t.getTagged(n,r,o)};i(a,s,u,e)}}}function u(t,e){return function(n){return function(r,o){var a=function(){return t.getAll(n)};i(r,o,a,e)}}}e.makePropertyInjectDecorator=o,e.makePropertyInjectNamedDecorator=a,e.makePropertyInjectTaggedDecorator=s,e.makePropertyMultiInjectDecorator=u},Biry:function(t,e,n){"use strict";n.r(e);var r=n("xwgP"),i=n.n(r),o=n("OS9G"),a=n("W+6v");n("Rsk4");e["default"]=t=>(i.a.useEffect((()=>{var e;null!==t&&void 0!==t&&null!==(e=t.location)&&void 0!==e&&e.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(t.location.hash.slice(1)))}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"markdown"},i.a.createElement("p",null,"\u4f7f\u7528\u4e2d\u4e0d\u9700\u8981 UI \u7ec4\u4ef6\uff0c\u6216\u8005\u9700\u8981\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u53ef\u4ee5\u5355\u72ec\u8c03\u7528\u7ed8\u5236\u5de5\u5177\u8fdb\u884c\u5b9e\u4f8b\u5316"),i.a.createElement("h3",{id:"draw-type"},i.a.createElement(o["AnchorLink"],{to:"#draw-type","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"Draw Type"),i.a.createElement("p",null,"\u53ef\u4ee5\u4e0d\u4f9d\u8d56 Draw UI \u7ec4\u4ef6\uff0c\u72ec\u7acb\u7684\u4f7f\u7528\u6bcf\u4e00\u4e2a Draw"),i.a.createElement("h4",{id:"drawcircle"},i.a.createElement(o["AnchorLink"],{to:"#drawcircle","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"DrawCircle"),i.a.createElement("p",null,"\u7ed8\u5236\u5706\u5f62"),i.a.createElement(a["a"],{code:"import { DrawCircle } from '@antv/l7-draw';\nconst drawCircle = new DrawCircle(scene);\ndrawCircle.enable();",lang:"javascript"}),i.a.createElement("h4",{id:"drawrect"},i.a.createElement(o["AnchorLink"],{to:"#drawrect","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"DrawRect"),i.a.createElement("p",null,"\u7ed8\u5236\u56db\u8fb9\u5f62"),i.a.createElement(a["a"],{code:"import { DrawRect } from '@antv/l7-draw';\nconst drawRect = new DrawRect(scene);\ndrawRect.enable();",lang:"javascript"}),i.a.createElement("h4",{id:"drawline"},i.a.createElement(o["AnchorLink"],{to:"#drawline","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"DrawLine"),i.a.createElement("p",null,"\u7ed8\u5236\u8def\u5f84"),i.a.createElement(a["a"],{code:"import { DrawLine } from '@antv/l7-draw';\nconst drawLine = new DrawLine(scene);\ndrawLine.enable();",lang:"javascript"}),i.a.createElement("h4",{id:"drawpoint"},i.a.createElement(o["AnchorLink"],{to:"#drawpoint","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"DrawPoint"),i.a.createElement("p",null,"\u7ed8\u5236\u70b9"),i.a.createElement(a["a"],{code:"import { DrawPoint } from '@antv/l7-draw';\nconst drawPoint = new DrawPoint(scene);\ndrawPoint.enable();",lang:"javascript"}),i.a.createElement("h4",{id:"drawpolygon"},i.a.createElement(o["AnchorLink"],{to:"#drawpolygon","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"DrawPolygon"),i.a.createElement("p",null,"\u7ed8\u5236\u591a\u8fb9\u5f62"),i.a.createElement(a["a"],{code:"import { DrawPolygon } from '@antv/l7-draw';\nconst drawPoint = new DrawPolygon(scene);\ndrawPoint.enable();",lang:"javascript"}),i.a.createElement("h4",{id:"drawruler"},i.a.createElement(o["AnchorLink"],{to:"#drawruler","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"DrawRuler"),i.a.createElement("p",null,"\u6d4b\u8ddd\u5de5\u5177"),i.a.createElement(a["a"],{code:"import { DrawRuler } from '@antv/l7-draw';\nconst drawPoint = new DrawPolygon(scene);\ndrawPoint.enable();",lang:"javascript"}),i.a.createElement("h3",{id:"drawboxselect-\u6846\u9009\u5de5\u5177"},i.a.createElement(o["AnchorLink"],{to:"#drawboxselect-\u6846\u9009\u5de5\u5177","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"DrawBoxSelect \u6846\u9009\u5de5\u5177"),i.a.createElement(a["a"],{code:"const drawbox = new DrawBoxSelect(scene);\ndrawbox.enable();\ndrawbox.on('draw.boxselect', e => {\n  console.log('select', e);\n});",lang:"js"}),i.a.createElement("h3",{id:"\u914d\u7f6e\u9879-drawoption"},i.a.createElement(o["AnchorLink"],{to:"#\u914d\u7f6e\u9879-drawoption","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u914d\u7f6e\u9879 DrawOption"),i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("p",null,"editEnable ",i.a.createElement("code",null,"boolean")," \u662f\u5426\u5141\u8bb8\u7f16\u8f91")),i.a.createElement("li",null,i.a.createElement("p",null,"selectEnable ",i.a.createElement("code",null,"boolean")," \u662f\u5426\u5141\u8bb8\u9009\u4e2d")),i.a.createElement("li",null,i.a.createElement("p",null,"data ",i.a.createElement("code",null,"geojson")," \u4f20\u5165\u6570\u636e\uff0c\u5bf9\u5df2\u6709\u6570\u636e\u8fdb\u884c\u7f16\u8f91"),i.a.createElement("ul",null,i.a.createElement("li",null,"\u7ed8\u5236 polygon \u548c line \u652f\u6301\u6570\u636e\u4e3a geojon \u4f20\u5165"),i.a.createElement("li",null,"\u7ed8\u5236\u77e9\u5f62\u652f\u6301\u4f20\u5165 \u6700\u5927\u6700\u5c0f\u7684\u4e24\u4e2a\u5750\u6807")),i.a.createElement(a["a"],{code:"data = {\n  type: 'rect',\n  features: [\n    [127.61718749999999, 54.97761367069628],\n    [117.42187500000001, 23.241346102386135],\n  ],\n};",lang:"ts"})),i.a.createElement("li",null,i.a.createElement("p",null,"showFeature ",i.a.createElement("code",null,"boolean")," \u7ed8\u5236\u5b8c\u6210\u662f\u5426\u663e\u7ed8\u5236\u7ed3\u679c")),i.a.createElement("li",null,i.a.createElement("p",null,"showDistance ",i.a.createElement("code",null,"boolean")," \u662f\u5426\u663e\u793a\u7ed8\u5236\u8ddd\u79bb \u9ed8\u8ba4\u5173\u95ed")),i.a.createElement("li",null,i.a.createElement("p",null,"showArea ",i.a.createElement("code",null,"boolean")," \u662f\u5426\u663e\u793a\u7ed8\u5236\u9762\u79ef \u9ed8\u8ba4\u5173\u95ed"))),i.a.createElement("h3",{id:"\u5c5e\u6027"},i.a.createElement(o["AnchorLink"],{to:"#\u5c5e\u6027","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u5c5e\u6027"),i.a.createElement("h4",{id:"drawstatus"},i.a.createElement(o["AnchorLink"],{to:"#drawstatus","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"drawStatus"),i.a.createElement("p",null,"\u7ed8\u5236\u72b6\u6001\u7684\u72b6\u6001"),i.a.createElement("h3",{id:"\u65b9\u6cd5"},i.a.createElement(o["AnchorLink"],{to:"#\u65b9\u6cd5","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u65b9\u6cd5"),i.a.createElement("h4",{id:"enable"},i.a.createElement(o["AnchorLink"],{to:"#enable","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"enable"),i.a.createElement("p",null,"\u5f00\u59cb\u7f16\u8f91\uff0c\u7ed8\u5236\u5b8c\u6210\u4e4b\u540e\u4f1a\u81ea\u52a8\u7ed3\u675f\u3002"),i.a.createElement("h4",{id:"disable"},i.a.createElement(o["AnchorLink"],{to:"#disable","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"disable"),i.a.createElement("p",null,"\u7ed3\u675f\u7f16\u8f91"),i.a.createElement("h4",{id:"removelatestvertex"},i.a.createElement(o["AnchorLink"],{to:"#removelatestvertex","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"removeLatestVertex"),i.a.createElement("p",null,"\u79fb\u9664\u6700\u65b0\u7ed8\u5236\u7684\u70b9 \u76ee\u524d\u7ed8\u5236\u7ebf\u548c\u9762\u652f\u6301"),i.a.createElement("h3",{id:"restdata"},i.a.createElement(o["AnchorLink"],{to:"#restdata","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"restData"),i.a.createElement("ul",null,i.a.createElement("li",null,"data \u91cd\u7f6e\u6570\u636e \u53ef\u4ee5\u4f20\u5165\u65b0\u7684\u6570\u636e")),i.a.createElement(a["a"],{code:"draw.resetData({\n  type: 'rect',\n  features: [\n    [127.61718749999999, 54.97761367069628],\n    [117.42187500000001, 23.241346102386135],\n  ],\n});",lang:"ts"}),i.a.createElement("h4",{id:"resetdraw"},i.a.createElement(o["AnchorLink"],{to:"#resetdraw","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"resetDraw"),i.a.createElement("p",null,"\u91cd\u7f6e\u7ed8\u5236 Draw,\u6e05\u9664\u5df2\u6709\u7ed8\u5236\uff0c\u5e76\u91cd\u65b0\u7ed8\u5236"),i.a.createElement("h3",{id:"\u4e8b\u4ef6"},i.a.createElement(o["AnchorLink"],{to:"#\u4e8b\u4ef6","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u4e8b\u4ef6"),i.a.createElement("h3",{id:"drawmodechange"},i.a.createElement(o["AnchorLink"],{to:"#drawmodechange","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"draw.modechange"),i.a.createElement("p",null,"\u7ed8\u5236\u72b6\u6001\u53d8\u5316\u4e8b\u4ef6"),i.a.createElement("ul",null,i.a.createElement("li",null,"static \u663e\u793a\u592a"),i.a.createElement("li",null,"simple_select \u9009\u4e2d\u592a"),i.a.createElement("li",null,"direct_select \u7f16\u8f91\u6001")),i.a.createElement("h4",{id:"drawcreate"},i.a.createElement(o["AnchorLink"],{to:"#drawcreate","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"draw.create"),i.a.createElement("p",null,"\u7ed8\u5236\u5b8c\u6210\u65f6\u89e6\u53d1\u8be5\u4e8b\u4ef6"),i.a.createElement("h4",{id:"drawdelete"},i.a.createElement(o["AnchorLink"],{to:"#drawdelete","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"draw.delete"),i.a.createElement("p",null,"\u56fe\u5f62\u5220\u9664\u65f6\u89e6\u53d1\u8be5\u4e8b\u4ef6"),i.a.createElement("h4",{id:"drawupdate"},i.a.createElement(o["AnchorLink"],{to:"#drawupdate","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"draw.update"),i.a.createElement("p",null,"\u56fe\u5f62\u66f4\u65b0\u65f6\u89e6\u53d1\u8be5\u4e8b\u4ef6\uff0c\u56fe\u5f62\u7684\u5e73\u79fb\uff0c\u9876\u70b9\u7684\u7f16\u8f91"),i.a.createElement("h4",{id:"drawboxselect"},i.a.createElement(o["AnchorLink"],{to:"#drawboxselect","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"draw.boxselect"),i.a.createElement("p",null,"\u6846\u9009\u7ed3\u675f\u65f6\u89e6\u53d1\uff0c\u8fd4\u56de\u5f00\u59cb\u548c\u7ed3\u675f\u7684\u9876\u70b9\u4fe1\u606f"),i.a.createElement(a["a"],{code:"drawControl.on('draw.boxselect', e => {});",lang:"javascript"}))))},Bktt:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},BlUI:function(t,e,n){"use strict";(function(t){var n=function(){if("undefined"!==typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,r){return t[0]===e&&(n=r,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype["delete"]=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];t.call(e,i[1],i[0])}},e}()}(),r="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,i=function(){return"undefined"!==typeof t&&t.Math===Math?t:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")()}(),o=function(){return"function"===typeof requestAnimationFrame?requestAnimationFrame.bind(i):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)}}(),a=2;function s(t,e){var n=!1,r=!1,i=0;function s(){n&&(n=!1,t()),r&&c()}function u(){o(s)}function c(){var t=Date.now();if(n){if(t-i<a)return;r=!0}else n=!0,r=!1,setTimeout(u,e);i=t}return c}var u=20,c=["top","right","bottom","left","width","height","size","weight"],l="undefined"!==typeof MutationObserver,f=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=s(this.refresh.bind(this),u)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),l?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e,r=c.some((function(t){return!!~n.indexOf(t)}));r&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),p=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},h=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||i},d=S(0,0,0,0);function v(t){return parseFloat(t)||0}function m(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){var r=t["border-"+n+"-width"];return e+v(r)}),0)}function g(t){for(var e=["top","right","bottom","left"],n={},r=0,i=e;r<i.length;r++){var o=i[r],a=t["padding-"+o];n[o]=v(a)}return n}function y(t){var e=t.getBBox();return S(0,0,e.width,e.height)}function b(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return d;var r=h(t).getComputedStyle(t),i=g(r),o=i.left+i.right,a=i.top+i.bottom,s=v(r.width),u=v(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==e&&(s-=m(r,"left","right")+o),Math.round(u+a)!==n&&(u-=m(r,"top","bottom")+a)),!x(t)){var c=Math.round(s+o)-e,l=Math.round(u+a)-n;1!==Math.abs(c)&&(s-=c),1!==Math.abs(l)&&(u-=l)}return S(i.left,i.top,s,u)}var _=function(){return"undefined"!==typeof SVGGraphicsElement?function(t){return t instanceof h(t).SVGGraphicsElement}:function(t){return t instanceof h(t).SVGElement&&"function"===typeof t.getBBox}}();function x(t){return t===h(t).document.documentElement}function w(t){return r?_(t)?y(t):b(t):d}function E(t){var e=t.x,n=t.y,r=t.width,i=t.height,o="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(o.prototype);return p(a,{x:e,y:n,width:r,height:i,top:n,right:e+r,bottom:i+n,left:e}),a}function S(t,e,n,r){return{x:t,y:e,width:n,height:r}}var C=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=S(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=w(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),T=function(){function t(t,e){var n=E(e);p(this,{target:t,contentRect:n})}return t}(),O=function(){function t(t,e,r){if(this.activeObservations_=[],this.observations_=new n,"function"!==typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=r}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof h(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new C(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof h(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e["delete"](t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new T(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),A="undefined"!==typeof WeakMap?new WeakMap:new n,k=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=f.getInstance(),r=new O(e,n,this);A.set(this,r)}return t}();["observe","unobserve","disconnect"].forEach((function(t){k.prototype[t]=function(){var e;return(e=A.get(this))[t].apply(e,arguments)}}));var M=function(){return"undefined"!==typeof i.ResizeObserver?i.ResizeObserver:k}();e["a"]=M}).call(this,n("oN6F"))},"Bx3/":function(t,e){var n=Function.prototype,r=n.toString;function i(t){if(null!=t){try{return r.call(t)}catch(e){}try{return t+""}catch(e){}}return""}t.exports=i},C6a0:function(t,e,n){"use strict";n.r(e);var r=n("xwgP"),i=n.n(r),o=n("+RP0"),a=n("/7QA"),s=n("Ct92");e["default"]=()=>(i.a.useEffect((()=>{var t=new o["Scene"]({id:"map",map:new s["a"]({pitch:0,style:"light",center:[116.30470275878906,39.88352811449648],zoom:10})});t.on("loaded",(()=>{var e=new a["DrawControl"](t,{position:"topright",layout:"horizontal",controls:{ruler:!0}});t.addControl(e)}))}),[]),i.a.createElement("div",{style:{height:"400px",position:"relative"},id:"map"}))},CG2G:function(t,e,n){"use strict";var r=n("HIsA"),i=n("dOdC"),o=[].reverse,a=[1,2];r({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),o.call(this)}})},CKQD:function(t,e){function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},CLo7:function(t,e,n){var r=n("2JD6"),i=n("Bktt"),o=n("PBBb"),a=n("D8FR");for(var s in i){var u=r[s],c=u&&u.prototype;if(c&&c.forEach!==o)try{a(c,"forEach",o)}catch(l){c.forEach=o}}},CNWJ:function(t,e,n){"use strict";var r=n("HIsA"),i=n("DDwO"),o=n("NVMI"),a=n("7+LC"),s=n("1+Eb"),u=[],c=u.sort,l=a((function(){u.sort(void 0)})),f=a((function(){u.sort(null)})),p=s("sort"),h=l||!f||!p;r({target:"Array",proto:!0,forced:h},{sort:function(t){return void 0===t?c.call(o(this)):c.call(o(this),i(t))}})},CWx7:function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("hXyk"),a=n("YjHi"),s=n("jd72"),u=n("Ji6T");r({target:"Map",proto:!0,real:!0,forced:i},{includes:function(t){return u(a(o(this)),(function(e,n){if(s(n,t))return u.stop()}),void 0,!0,!0).stopped}})},Ca6f:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.targetName=void 0;var r=n("9L8m"),i=n("rMkn"),o=n("ZLnY");function a(t){return function(e,n,a){var s=new i.Metadata(r.NAME_TAG,t);o.tagParameter(e,n,a,s)}}e.targetName=a},CdXo:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.postConstruct=void 0;var r=n("196R"),i=n("9L8m"),o=n("rMkn");function a(){return function(t,e,n){var a=new o.Metadata(i.POST_CONSTRUCT,e);if(Reflect.hasOwnMetadata(i.POST_CONSTRUCT,t.constructor))throw new Error(r.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(i.POST_CONSTRUCT,a,t.constructor)}}e.postConstruct=a},ClHO:function(t,e,n){"use strict";var r=n("HIsA"),i=n("Hiyu"),o=n("2JD6"),a=n("+qhb"),s=n("pxmn"),u=n("2RC6").f,c=n("xp0c"),l=o.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var f={},p=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof p?new l(t):void 0===t?l():l(t);return""===t&&(f[e]=!0),e};c(p,l);var h=p.prototype=l.prototype;h.constructor=p;var d=h.toString,v="Symbol(test)"==String(l("test")),m=/^Symbol\((.*)\)[^)]+$/;u(h,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=d.call(t);if(a(f,t))return"";var n=v?e.slice(7,-1):e.replace(m,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:p})}},CmBG:function(t,e){e.f=Object.getOwnPropertySymbols},CpaZ:function(t,e){function n(t,e){var n=-1,r=Array(t);while(++n<t)r[n]=e(n);return r}t.exports=n},Ct92:function(t,e,n){"use strict";n.d(e,"a",(function(){return lt}));var r,i,o,a,s,u,c,l,f,p,h,d=n("txMq"),v=n.n(d),m=n("RgF4"),g=n.n(m),y=n("r9+l"),b=n.n(y),_=n("hbjN"),x=n.n(_),w=n("fI5W"),E=n.n(w),S=n("dF3I"),C=n("jCe1"),T=n.n(C),O=n("/2LT"),A=n.n(O),k=n("m5Te"),M=n.n(k),P=n("aDRW"),I=n.n(P),L=n("Xrqc"),R=n.n(L),D=n("+ti2"),N=n.n(D),j=(n("+ynn"),n("TFir")),F=n.n(j),z=n("9GRW"),B=n.n(z),U=n("/LZe"),V=n("IyCX"),q=n("99LQ"),G=n("YcyD"),H=(n("BLox"),n("tijT")),W=n("RH+t"),X={dark:"amap://styles/2a09079c3daac9420ee53b67307a8006?isPublic=true",light:"amap://styles/1fd9f8ef9751298f11f5c56968312c70?isPublic=true",normal:"amap://styles/normal",blank:"amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true"},Z=Math.PI/180,Y=function(){function t(){v()(this,t),R()(this,"projectionMatrix",q["b"].create()),R()(this,"viewMatrix",q["b"].create()),R()(this,"viewProjectionMatrix",q["b"].create()),R()(this,"ViewProjectionMatrixUncentered",q["b"].create()),R()(this,"viewUncenteredMatrix",q["b"].create()),R()(this,"zoom",void 0),R()(this,"center",void 0)}return g()(t,[{key:"syncWithMapCamera",value:function(t){var e=t.zoom,n=void 0===e?1:e,r=t.pitch,i=void 0===r?0:r,o=t.bearing,a=void 0===o?0:o,s=t.center,u=void 0===s?[0,0]:s,c=t.offsetOrigin,l=void 0===c?[0,0]:c,f=t.cameraHeight,p=void 0===f?1:f,h=t.aspect,d=void 0===h?1:h,v=t.near,m=void 0===v?.1:v,g=t.far,y=void 0===g?1e3:g,b=t.fov,_=void 0===b?0:b;this.zoom=n,this.center=u;var x=i*Z,w=(360-a)*Z;q["b"].perspective(this.projectionMatrix,_,d,m,y);var E=q["d"].fromValues(p*Math.sin(x)*Math.sin(w),-p*Math.sin(x)*Math.cos(w),p*Math.cos(x)),S=q["d"].fromValues(-Math.cos(x)*Math.sin(w),Math.cos(x)*Math.cos(w),Math.sin(x));q["b"].lookAt(this.viewMatrix,E,q["d"].fromValues(0,0,0),S),this.viewUncenteredMatrix=q["b"].clone(this.viewMatrix),q["b"].translate(this.viewMatrix,this.viewMatrix,q["d"].fromValues(-l[0],l[1],0)),q["b"].multiply(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),q["b"].multiply(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 524288}},{key:"getCenter",value:function(){var t=M()(this.center,2),e=t[0],n=t[1];return[e,n]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(t,e){var n=85.0511287798,r=Math.max(Math.min(n,t[1]),-n),i=256<<20,o=Math.PI/180,a=t[0]*o,s=r*o;s=Math.log(Math.tan(Math.PI/4+s/2));var u=.5/Math.PI,c=.5,l=-.5/Math.PI;return o=.5,a=i*(u*a+c)-215440491,s=-(i*(l*s+o)-106744817),[a,s]}}]),t}(),K=["id","style","minZoom","maxZoom","token","mapInstance","plugin"];function J(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?J(Object(n),!0).forEach((function(e){R()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $(t,e){if(e||(e=document),e){var n=e.head||e.getElementsByTagName("head")[0];if(!n){n=e.createElement("head");var r=e.body||e.getElementsByTagName("body")[0];r?r.parentNode.insertBefore(n,r):e.documentElement.appendChild(n)}var i=e.createElement("style");return i.type="text/css",i.styleSheet?i.styleSheet.cssText=t:i.appendChild(e.createTextNode(t)),n.appendChild(i),i}}$(".amap-logo{\n display: none !important;\n}\n");var tt=0;window.forceWebGL=!0;var et="15cd8a57710d40c9b7c0e3cc120f1200",nt="1.4.15",rt="amap-script",it=!1,ot=[],at=12,st=(r=Object(G["injectable"])(),i=Object(G["inject"])(U["n"].IGlobalConfigService),o=Object(G["inject"])(U["n"].MapConfig),a=Object(G["inject"])(U["n"].ICoordinateSystemService),s=Object(G["inject"])(U["n"].IEventEmitter),r((c=function(){function t(){var e=this;v()(this,t),R()(this,"version",W["a"]["GAODE1.x"]),R()(this,"map",void 0),I()(this,"configService",l,this),I()(this,"config",f,this),I()(this,"coordinateSystemService",p,this),I()(this,"eventEmitter",h,this),R()(this,"markerContainer",void 0),R()(this,"$mapContainer",void 0),R()(this,"viewport",void 0),R()(this,"cameraChangedCallback",void 0),R()(this,"handleCameraChanged",(function(t){var n=t.camera,r=n.fov,i=n.near,o=n.far,a=n.height,s=n.pitch,u=n.rotation,c=n.aspect,l=n.position,f=e.getCenter(),p=f.lng,h=f.lat;if(e.cameraChangedCallback){e.viewport.syncWithMapCamera({aspect:c,bearing:360-u,far:o,fov:r,cameraHeight:a,near:i,pitch:s,zoom:e.map.getZoom()-1,center:[p,h],offsetOrigin:[l.x,l.y]});var d=e.config.offsetZoom,v=void 0===d?at:d;e.viewport.getZoom()>v?e.coordinateSystemService.setCoordinateSystem(U["e"].P20_OFFSET):e.coordinateSystemService.setCoordinateSystem(U["e"].P20),e.cameraChangedCallback(e.viewport)}}))}return g()(t,[{key:"addMarkerContainer",value:function(){var t=this.map.getContainer();if(null!==t){var e=t.getElementsByClassName("amap-maps")[0];this.markerContainer=V["b"].create("div","l7-marker-container",e)}}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(t,e){-1!==U["h"].indexOf(t)?this.eventEmitter.on(t,e):this.map.on(t,e)}},{key:"off",value:function(t,e){-1!==U["h"].indexOf(t)?this.eventEmitter.off(t,e):this.map.off(t,e)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){var t;return null===(t=this.map.getContainer())||void 0===t?void 0:t.getElementsByClassName("amap-maps")[0]}},{key:"getSize",value:function(){var t=this.map.getSize();return[t.getWidth(),t.getHeight()]}},{key:"getType",value:function(){return"amap"}},{key:"getZoom",value:function(){return this.map.getZoom()-1}},{key:"setZoom",value:function(t){return this.map.setZoom(t)}},{key:"getCenter",value:function(t){if(null!==t&&void 0!==t&&t.padding){var e=this.getCenter(),n=this.getSize(),r=M()(n,2),i=(r[0],r[1],Object(H["a"])(t.padding)),o=this.lngLatToPixel([e.lng,e.lat]),a=[(i.right-i.left)/2,(i.bottom-i.top)/2],s=this.pixelToLngLat([o.x-a[0],o.y-a[1]]);return s}var u=this.map.getCenter();return{lng:u.getLng(),lat:u.getLat()}}},{key:"setCenter",value:function(t,e){if(null!==e&&void 0!==e&&e.padding){var n=Object(H["a"])(e.padding),r=this.lngLatToPixel(t),i=[(n.right-n.left)/2,(n.bottom-n.top)/2],o=this.pixelToLngLat([r.x+i[0],r.y+i[1]]);this.map.setCenter([o.lng,o.lat])}else this.map.setCenter(t)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return 360-this.map.getRotation()}},{key:"getBounds",value:function(){var t=this.map.getBounds().toBounds(),e=t.getNorthEast(),n=t.getSouthWest(),r=this.getCenter(),i=r.lng>e.getLng()||r.lng<n.getLng()?180-e.getLng():e.getLng(),o=r.lng<n.getLng()?n.getLng()-180:n.getLng();return[[o,n.getLat()],[i,e.getLat()]]}},{key:"getMinZoom",value:function(){var t=this.map.get("zooms");return t[0]-1}},{key:"getMaxZoom",value:function(){var t=this.map.get("zooms");return t[1]-1}},{key:"setRotation",value:function(t){return this.map.setRotation(t)}},{key:"setPitch",value:function(t){return this.map.setPitch(t)}},{key:"zoomIn",value:function(){this.map.zoomIn()}},{key:"zoomOut",value:function(){this.map.zoomOut()}},{key:"panTo",value:function(t){this.map.panTo(t)}},{key:"panBy",value:function(t){this.map.panTo(t)}},{key:"fitBounds",value:function(t){this.map.setBounds(new AMap.Bounds([t[0][0],t[0][1],t[1][0],t[1][1]]))}},{key:"setZoomAndCenter",value:function(t,e){this.map.setZoomAndCenter(t,e)}},{key:"setMapStyle",value:function(t){this.map.setMapStyle(this.getMapStyle(t))}},{key:"setMapStatus",value:function(t){this.map.setStatus(t)}},{key:"pixelToLngLat",value:function(t){var e=this.map.pixelToLngLat(new AMap.Pixel(t[0],t[1]));return{lng:e.getLng(),lat:e.getLat()}}},{key:"lngLatToPixel",value:function(t){var e=this.map.lnglatToPixel(new AMap.LngLat(t[0],t[1]));return{x:e.getX(),y:e.getY()}}},{key:"containerToLngLat",value:function(t){var e=new AMap.Pixel(t[0],t[1]),n=this.map.containerToLngLat(e);return{lng:null===n||void 0===n?void 0:n.getLng(),lat:null===n||void 0===n?void 0:n.getLat()}}},{key:"lngLatToContainer",value:function(t){var e=new AMap.LngLat(t[0],t[1]),n=this.map.lngLatToContainer(e);return{x:n.getX(),y:n.getY()}}},{key:"lngLatToMercator",value:function(t,e){return{x:0,y:0,z:0}}},{key:"getModelMatrix",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],i=this.viewport.projectFlat(t),o=q["b"].create();return q["b"].translate(o,o,q["d"].fromValues(i[0],i[1],e)),q["b"].scale(o,o,q["d"].fromValues(r[0],r[1],r[2])),q["b"].rotateX(o,o,n[0]),q["b"].rotateY(o,o,n[1]),q["b"].rotateZ(o,o,n[2]),o}},{key:"init",value:function(){var t=A()(F.a.mark((function t(){var e,n,r,i,o,a,s,u,c,l,f,p,h,d,v=this;return F.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.config,n=e.id,r=e.style,i=void 0===r?"light":r,o=e.minZoom,a=void 0===o?0:o,s=e.maxZoom,u=void 0===s?18:s,c=e.token,l=void 0===c?et:c,f=e.mapInstance,p=e.plugin,h=void 0===p?[]:p,d=T()(e,K),t.next=3,new Promise((function(t){var e=function(){if(f)v.map=f,v.$mapContainer=v.map.getContainer(),setTimeout((function(){v.map.on("camerachange",v.handleCameraChanged),t()}),30);else{v.$mapContainer=v.creatAmapContainer(n);var e=new AMap.Map(v.$mapContainer,Q({mapStyle:v.getMapStyle(i),zooms:[a,u],viewMode:"3D"},d));e.on("camerachange",v.handleCameraChanged),v.map=e,setTimeout((function(){t()}),10)}};it||f?it&&window.AMap||f?e():ot.push(e):(l===et&&console.warn(v.configService.getSceneWarninfo("MapToken")),it=!0,h.push("Map3D"),B.a.load({key:l,version:nt,plugins:h}).then((function(t){e(),ot.length&&(ot.forEach((function(t){return t()})),ot=[])}))["catch"]((function(t){throw new Error(t)})))}));case 3:this.viewport=new Y;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"exportMap",value:function(t){var e,n=null===(e=this.getContainer())||void 0===e?void 0:e.getElementsByClassName("amap-layer")[0],r="jpg"===t?null===n||void 0===n?void 0:n.toDataURL("image/jpeg"):null===n||void 0===n?void 0:n.toDataURL("image/png");return r}},{key:"emit",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=this.eventEmitter).emit.apply(e,[t].concat(r))}},{key:"once",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=this.eventEmitter).once.apply(e,[t].concat(r))}},{key:"destroy",value:function(){this.map.destroy(),delete window.initAMap;var t=document.getElementById(rt);t&&document.head.removeChild(t)}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(t){this.cameraChangedCallback=t}},{key:"getMapStyle",value:function(t){return X[t]?X[t]:t}},{key:"creatAmapContainer",value:function(t){var e=t;"string"===typeof t&&(e=document.getElementById(t));var n=document.createElement("div");return n.style.cssText+="\n      position: absolute;\n      top: 0;\n      height: 100%;\n      width: 100%;\n    ",n.id="l7_amap_div"+tt++,e.appendChild(n),n}}]),t}(),l=N()(c.prototype,"configService",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=N()(c.prototype,"config",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=N()(c.prototype,"coordinateSystemService",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=N()(c.prototype,"eventEmitter",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=c))||u);function ut(t){var e=ct();return function(){var n,r=E()(t);if(e){var i=E()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x()(this,n)}}function ct(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var lt=function(t){b()(n,t);var e=ut(n);function n(){return v()(this,n),e.apply(this,arguments)}return g()(n,[{key:"getServiceConstructor",value:function(){return st}}]),n}(S["a"])},CvKH:function(t,e,n){var r=n("Evga"),i=1,o=4;function a(t){return r(t,i|o)}t.exports=a},D2hf:function(t,e,n){var r=n("HIsA");r({target:"Math",stat:!0},{iaddh:function(t,e,n,r){var i=t>>>0,o=e>>>0,a=n>>>0;return o+(r>>>0)+((i&a|(i|a)&~(i+a>>>0))>>>31)|0}})},D5lA:function(t,e,n){"use strict";var r=n("m5Te");function i(){var t=n("xwgP");return i=function(){return t},t}function o(){var t=a(n("7QR1"));return o=function(){return t},t}function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){return p(t)||f(t,e)||c(t,e)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){if(t){if("string"===typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function p(t){if(Array.isArray(t))return t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var h="https://codesandbox.io/api/v1/sandboxes/define";function d(t){return o()["default"].compressToBase64(JSON.stringify(t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function v(t){var e=document.createElement("span");e.innerHTML=t;var n=e.textContent;return e.remove(),n}function m(t){var e=Boolean(t.sources._.tsx),n=e?".tsx":".jsx",i={},o={},a=Object.values(t.dependencies).filter((function(t){return t.css})),s="App".concat(n),u="index".concat(n);return Object.entries(t.dependencies).forEach((function(t){var e=r(t,2),n=e[0],i=e[1].version;o[n]=i})),o["react-dom"]||(o["react-dom"]=o.react||"latest"),i["sandbox.config.json"]={content:JSON.stringify({template:e?"create-react-app-typescript":"create-react-app"},null,2)},i["package.json"]={content:JSON.stringify({name:t.title,description:v(t.description)||"An auto-generated demo by dumi",main:u,dependencies:o,devDependencies:e?{typescript:"^3"}:{}},null,2)},i["index.html"]={content:'<div style="margin: 16px;" id="root"></div>'},i[u]={content:"/**\n* This is an auto-generated demo by dumi\n* if you think it is not working as expected,\n* please report the issue at\n* https://github.com/umijs/dumi/issues\n**/\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n".concat(a.map((function(t){var e=t.css;return"import '".concat(e,"';")})).join("\n"),"\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);")},Object.entries(t.sources).forEach((function(t){var e=r(t,2),n=e[0],o=e[1],a=o.tsx,u=o.jsx,c=o.content;i["_"===n?s:n]={content:a||u||c}})),d({files:i})}var g=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,n=(0,i().useState)(),r=s(n,2),o=r[0],a=r[1];return(0,i().useEffect)((function(){if(t){var n=document.createElement("form"),r=document.createElement("input"),i=m(t);return n.method="POST",n.target="_blank",n.style.display="none",n.action=e,n.appendChild(r),n.setAttribute("data-demo",t.title||""),r.name="parameters",r.value=i,document.body.appendChild(n),a((function(){return function(){return n.submit()}})),function(){return n.remove()}}}),[t]),o};e["default"]=g},D8FR:function(t,e,n){var r=n("Hiyu"),i=n("2RC6"),o=n("OLna");t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},DDwO:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},DFgS:function(t,e,n){var r=n("NG5O"),i=/^\s+/;function o(t){return t?t.slice(0,r(t)+1).replace(i,""):t}t.exports=o},DFjx:function(t,e,n){var r=n("QSfS"),i=n("dhT6"),o=n("9sv9"),a=200;function s(t,e){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<a-1)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(t,e),this.size=n.size,this}t.exports=s},DXpG:function(t,e,n){"use strict";var r=n("sqIH"),i=n("ihzt"),o=n("hXyk"),a=n("JzK+"),s=n("70zE"),u=n("OOuR"),c=n("2I03"),l=n("WdrS"),f=n("UTnC"),p=n("7+LC"),h=[].push,d=Math.min,v=4294967295,m=!p((function(){return!RegExp(v,"y")}));r("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(a(this)),o=void 0===n?v:n>>>0;if(0===o)return[];if(void 0===t)return[r];if(!i(t))return e.call(r,t,o);var s,u,c,l=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,m=new RegExp(t.source,p+"g");while(s=f.call(m,r)){if(u=m.lastIndex,u>d&&(l.push(r.slice(d,s.index)),s.length>1&&s.index<r.length&&h.apply(l,s.slice(1)),c=s[0].length,d=u,l.length>=o))break;m.lastIndex===s.index&&m.lastIndex++}return d===r.length?!c&&m.test("")||l.push(""):l.push(r.slice(d)),l.length>o?l.slice(0,o):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=a(this),o=void 0==e?void 0:e[t];return void 0!==o?o.call(e,i,n):r.call(String(i),e,n)},function(t,i){var a=n(r,t,this,i,r!==e);if(a.done)return a.value;var f=o(t),p=String(this),h=s(f,RegExp),g=f.unicode,y=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(m?"y":"g"),b=new h(m?f:"^(?:"+f.source+")",y),_=void 0===i?v:i>>>0;if(0===_)return[];if(0===p.length)return null===l(b,p)?[p]:[];var x=0,w=0,E=[];while(w<p.length){b.lastIndex=m?w:0;var S,C=l(b,m?p:p.slice(w));if(null===C||(S=d(c(b.lastIndex+(m?0:w)),p.length))===x)w=u(p,w,g);else{if(E.push(p.slice(x,w)),E.length===_)return E;for(var T=1;T<=C.length-1;T++)if(E.push(C[T]),E.length===_)return E;w=x=S}}return E.push(p.slice(x)),E}]}),!m)},DeDD:function(t,e,n){var r=n("HIsA"),i=n("icJ8"),o=n("hXyk"),a=i.has,s=i.toKey;r({target:"Reflect",stat:!0},{hasOwnMetadata:function(t,e){var n=arguments.length<3?void 0:s(arguments[2]);return a(t,o(e),n)}})},DnHg:function(t,e,n){var r=n("JY8B");r("flat")},DpFF:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Binding=void 0;var r=n("2+60"),i=n("qSJf"),o=function(){function t(t,e){this.id=i.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=r.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=e.scope===r.BindingScopeEnum.Singleton&&this.activated,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.cache=this.cache,e},t}();e.Binding=o},E06e:function(t,e){var n=Math.log;t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:n(1+t)}},E5vS:function(t,e){function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=n},"E7L/":function(t,e,n){var r=n("fQKG"),i=n("/DyB"),o=i((function(t,e,n,i){r(t,e,n,i)}));t.exports=o},E7r7:function(t,e,n){},"EC/F":function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("bXon"),a=n("hXyk"),s=n("DDwO"),u=n("40mc"),c=n("70zE"),l=n("YjHi"),f=n("Ji6T");r({target:"Map",proto:!0,real:!0,forced:i},{mapValues:function(t){var e=a(this),n=l(e),r=u(t,arguments.length>1?arguments[1]:void 0,3),i=new(c(e,o("Map"))),p=s(i.set);return f(n,(function(t,n){p.call(i,t,r(n,t,e))}),void 0,!0,!0),i}})},ECWN:function(t,e,n){var r=n("Ogjs"),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return i.call(t)}),t.exports=r.inspectSource},"EH+i":function(t,e,n){t.exports=n("72Hr")()},EMO4:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("bZ26");function i(t,e){if(t){if("string"===typeof t)return Object(r["a"])(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r["a"])(t,e):void 0}}},EMzR:function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("7SXh");r({target:"WeakSet",proto:!0,real:!0,forced:i},{addAll:function(){return o.apply(this,arguments)}})},ETkz:function(t,e,n){var r=n("xTzN"),i=r("toUpperCase");t.exports=i},Evga:function(t,e,n){var r=n("qFee"),i=n("spfM"),o=n("cEHS"),a=n("SHxf"),s=n("YtKl"),u=n("ZU2r"),c=n("qXph"),l=n("0l+J"),f=n("NDin"),p=n("abI8"),h=n("prX3"),d=n("5MHJ"),v=n("TD2g"),m=n("hToq"),g=n("zftb"),y=n("+Gi7"),b=n("lDzS"),_=n("QlC0"),x=n("E5vS"),w=n("0v9S"),E=n("KmIr"),S=n("rGlR"),C=1,T=2,O=4,A="[object Arguments]",k="[object Array]",M="[object Boolean]",P="[object Date]",I="[object Error]",L="[object Function]",R="[object GeneratorFunction]",D="[object Map]",N="[object Number]",j="[object Object]",F="[object RegExp]",z="[object Set]",B="[object String]",U="[object Symbol]",V="[object WeakMap]",q="[object ArrayBuffer]",G="[object DataView]",H="[object Float32Array]",W="[object Float64Array]",X="[object Int8Array]",Z="[object Int16Array]",Y="[object Int32Array]",K="[object Uint8Array]",J="[object Uint8ClampedArray]",Q="[object Uint16Array]",$="[object Uint32Array]",tt={};function et(t,e,n,k,M,P){var I,D=e&C,N=e&T,F=e&O;if(n&&(I=M?n(t,k,M,P):n(t)),void 0!==I)return I;if(!x(t))return t;var z=y(t);if(z){if(I=v(t),!D)return c(t,I)}else{var B=d(t),U=B==L||B==R;if(b(t))return u(t,D);if(B==j||B==A||U&&!M){if(I=N||U?{}:g(t),!D)return N?f(t,s(I,t)):l(t,a(I,t))}else{if(!tt[B])return M?t:{};I=m(t,B,D)}}P||(P=new r);var V=P.get(t);if(V)return V;P.set(t,I),w(t)?t.forEach((function(r){I.add(et(r,e,n,r,t,P))})):_(t)&&t.forEach((function(r,i){I.set(i,et(r,e,n,i,t,P))}));var q=F?N?h:p:N?S:E,G=z?void 0:q(t);return i(G||t,(function(r,i){G&&(i=r,r=t[i]),o(I,i,et(r,e,n,i,t,P))})),I}tt[A]=tt[k]=tt[q]=tt[G]=tt[M]=tt[P]=tt[H]=tt[W]=tt[X]=tt[Z]=tt[Y]=tt[D]=tt[N]=tt[j]=tt[F]=tt[z]=tt[B]=tt[U]=tt[K]=tt[J]=tt[Q]=tt[$]=!0,tt[I]=tt[L]=tt[V]=!1,t.exports=et},F4Qn:function(t,e,n){"use strict";var r=n("HIsA"),i=n("WNir").left,o=n("1+Eb"),a=n("/5yA"),s=o("reduce"),u=a("reduce",{1:0});r({target:"Array",proto:!0,forced:!s||!u},{reduce:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},F73V:function(t,e,n){"use strict";n.r(e);var r=n("xwgP"),i=n.n(r),o=n("OS9G"),a=n("oSqR"),s=n("W+6v"),u=n("Rsk4"),c=i.a.memo(u["default"]["docs-draw_control"].component);e["default"]=t=>(i.a.useEffect((()=>{var e;null!==t&&void 0!==t&&null!==(e=t.location)&&void 0!==e&&e.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(t.location.hash.slice(1)))}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"markdown"},i.a.createElement("h3",{id:"\u53c2\u6570"},i.a.createElement(o["AnchorLink"],{to:"#\u53c2\u6570","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u53c2\u6570"),i.a.createElement(s["a"],{code:"const control = new DrawControl(scene, option);",lang:"javascript"}),i.a.createElement(s["a"],{code:"// CDN \u5f15\u7528\nconst control = new L7.Draw.DrawControl(scene, option);",lang:"javascript"}),i.a.createElement("h4",{id:"scene"},i.a.createElement(o["AnchorLink"],{to:"#scene","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"scene"),i.a.createElement("p",null,"scene \u5bf9\u8c61"),i.a.createElement("h4",{id:"options"},i.a.createElement(o["AnchorLink"],{to:"#options","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"options"),i.a.createElement("p",null,"control \u914d\u7f6e\u9879"),i.a.createElement("table",null,i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"name"),i.a.createElement("th",null,"Type"),i.a.createElement("th",null,"Default"),i.a.createElement("th",null,"Description"))),i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,"position"),i.a.createElement("td",null,i.a.createElement("code",null,"bottomright\u3001topright\u3001 bottomleft\u2019 topleft")),i.a.createElement("td",null,i.a.createElement("code",null,"topright")),i.a.createElement("td",null,"\u7ec4\u4ef6\u4f4d\u7f6e")),i.a.createElement("tr",null,i.a.createElement("td",null,"layout"),i.a.createElement("td",null,i.a.createElement("code",null,"horizontal\u3001 vertical")),i.a.createElement("td",null,i.a.createElement("code",null,"vertical")),i.a.createElement("td",null,"\u7ec4\u4ef6\u5e03\u5c40 \u652f\u6301\u6c34\u5e73\u548c\u5782\u76f4\u4e24\u79cd\u5e03\u5c40")),i.a.createElement("tr",null,i.a.createElement("td",null,"controls"),i.a.createElement("td",null,i.a.createElement("code",null,"controlOptions")),i.a.createElement("td",null),i.a.createElement("td",null,"\u8bbe\u7f6e UI \u7ec4\u4ef6\u6dfb\u52a0\u54ea\u4e9b\u7ed8\u5236\u5de5\u5177")),i.a.createElement("tr",null,i.a.createElement("td",null,"style"),i.a.createElement("td",null),i.a.createElement("td",null),i.a.createElement("td",null,"\u5730\u56fe\u7ed8\u5236\u6837\u5f0f")))),i.a.createElement("p",null,i.a.createElement("strong",null,"controlOptions"),"UI \u7ec4\u4ef6\u914d\u7f6e\u9879"),i.a.createElement("ul",null,i.a.createElement("li",null,"point ",i.a.createElement("code",null,"boolean | drawOption")," \u7ed8\u5236\u70b9\u5de5\u5177\u914d\u7f6e"),i.a.createElement("li",null,"line ",i.a.createElement("code",null,"boolean | drawOption")," \u7ed8\u5236\u7ebf\u5de5\u5177\u914d\u7f6e"),i.a.createElement("li",null,"polygon ",i.a.createElement("code",null,"boolean | drawOption")," \u7ed8\u5236\u9762\u5de5\u5177\u914d\u7f6e"),i.a.createElement("li",null,"circle ",i.a.createElement("code",null,"boolean | drawOption")," \u7ed8\u5236\u5706\u5de5\u5177\u914d\u7f6e"),i.a.createElement("li",null,"rect ",i.a.createElement("code",null,"boolean | drawOption")," \u7ed8\u5236\u77e9\u5f62\u5de5\u5177\u914d\u7f6e"),i.a.createElement("li",null,"delete ",i.a.createElement("code",null,"boolean | drawOption")," \u6dfb\u52a0\u5220\u9664\u5de5\u5177")),i.a.createElement("p",null,"\u9ed8\u8ba4\u914d\u7f6e"),i.a.createElement(s["a"],{code:"{\n    point: true,\n    line: true,\n    polygon: true,\n    rect: true,\n    circle: true,\n    delete: true\n  }",lang:"unknown"}),i.a.createElement("p",null,"\u793a\u4f8b"),i.a.createElement(s["a"],{code:"{\n    point: false,\n    line: {\n      editEnable: false,\n    },\n    polygon: true,\n    rect: true,\n    circle: {\n      showDistance: true,\n      showArea: true\n    },\n    delete: false",lang:"unknown"}),i.a.createElement("h3",{id:"\u6dfb\u52a0\u5230\u5730\u56fe"},i.a.createElement(o["AnchorLink"],{to:"#\u6dfb\u52a0\u5230\u5730\u56fe","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u6dfb\u52a0\u5230\u5730\u56fe"),i.a.createElement(s["a"],{code:"scene.addControl(control);",lang:"javascript"}),i.a.createElement("h3",{id:"\u4ece\u5730\u56fe\u4e2d\u79fb\u9664"},i.a.createElement(o["AnchorLink"],{to:"#\u4ece\u5730\u56fe\u4e2d\u79fb\u9664","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u4ece\u5730\u56fe\u4e2d\u79fb\u9664"),i.a.createElement(s["a"],{code:"scene.removeControl(control);",lang:"javascript"}),i.a.createElement("h2",{id:"\u65b9\u6cd5"},i.a.createElement(o["AnchorLink"],{to:"#\u65b9\u6cd5","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u65b9\u6cd5"),i.a.createElement("h3",{id:"getdrawtype"},i.a.createElement(o["AnchorLink"],{to:"#getdrawtype","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"getDraw(type)"),i.a.createElement("p",null,"\u83b7\u53d6 draw \u5b9e\u4f8b"),i.a.createElement("p",null,"\u53c2\u6570\uff1a type \u7ed8\u5236\u5b9e\u4f8b ",i.a.createElement("code",null,"point|line|polygon|rect| circle")),i.a.createElement(s["a"],{code:"const pointDraw = drawcontrol.get('point');",lang:"javascript"}),i.a.createElement("h3",{id:"getalldata"},i.a.createElement(o["AnchorLink"],{to:"#getalldata","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"getAllData()"),i.a.createElement("p",null,"\u83b7\u53d6\u6bcf\u4e2a Draw \u5b9e\u4f8b\u7ed8\u5236\u7684\u7ed3\u679c\u6570\u636e"),i.a.createElement("p",null,"\u8fd4\u56de\u6570\u636e\u683c\u5f0f\u5982\u4e0b"),i.a.createElement(s["a"],{code:"{\n  point: []; // geojson\u6570\u636e\u683c\u5f0f\n  line: [];\n}",lang:"javascript"}),i.a.createElement("h3",{id:"removealldata"},i.a.createElement(o["AnchorLink"],{to:"#removealldata","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"removeAllData()"),i.a.createElement("p",null,"\u79fb\u9664\u7ed8\u5236\u7684\u7684\u6240\u6709\u6570\u636e"),i.a.createElement(s["a"],{code:"drawcontrol.removeAllData();",lang:"javascript"}),i.a.createElement("h3",{id:"\u4e8b\u4ef6"},i.a.createElement(o["AnchorLink"],{to:"#\u4e8b\u4ef6","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u4e8b\u4ef6"),i.a.createElement("p",null,"drawControl \u7684\u4e8b\u4ef6\u7c7b\u578b\u548c\u6bcf\u4e2a Draw \u7684\u4e8b\u4ef6\u4e00\u81f4\uff0c\u5982\u679c\u5728 drawControl \u76d1\u542c\u4e8b\u4ef6\u4f1a\u4e3a\u6bcf\u4e2a draw \u589e\u52a0\u4e8b\u4ef6\u76d1\u542c\u3002"),i.a.createElement("ul",null,i.a.createElement("li",null,"drawType: Draw \u7c7b\u578b"),i.a.createElement("li",null,"feature: \u5bf9\u5e94\u7684\u6570\u636e")),i.a.createElement("h4",{id:"drawcreate"},i.a.createElement(o["AnchorLink"],{to:"#drawcreate","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"draw.create"),i.a.createElement("p",null,"\u7ed8\u5236\u5b8c\u6210\u65f6\u89e6\u53d1\u8be5\u4e8b\u4ef6"),i.a.createElement("h4",{id:"drawdelete"},i.a.createElement(o["AnchorLink"],{to:"#drawdelete","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"draw.delete"),i.a.createElement("p",null,"\u56fe\u5f62\u5220\u9664\u65f6\u89e6\u53d1\u8be5\u4e8b\u4ef6"),i.a.createElement("h4",{id:"drawupdate"},i.a.createElement(o["AnchorLink"],{to:"#drawupdate","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"draw.update"),i.a.createElement("p",null,"\u56fe\u5f62\u66f4\u65b0\u65f6\u89e6\u53d1\u8be5\u4e8b\u4ef6\uff0c\u56fe\u5f62\u7684\u5e73\u79fb\uff0c\u9876\u70b9\u7684\u7f16\u8f91"),i.a.createElement(s["a"],{code:"drawControl.on('draw.update', e => {});",lang:"javascript"}),i.a.createElement("h4",{id:"drawboxselect"},i.a.createElement(o["AnchorLink"],{to:"#drawboxselect","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"draw.boxselect"),i.a.createElement("p",null,"\u6846\u9009\u4ecb\u7ecd\u65f6\u89e6\u53d1\uff0c\u8fd4\u56de\u5f00\u59cb\u548c\u7ed3\u675f\u7684\u9876\u70b9\u4fe1\u606f"),i.a.createElement(s["a"],{code:"drawControl.on('draw.boxselct', e => {});",lang:"javascript"}),i.a.createElement("h3",{id:"style"},i.a.createElement(o["AnchorLink"],{to:"#style","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"style"),i.a.createElement("p",null,"style \u914d\u7f6e\u9879\u53ef\u4ee5\u6309\u9700\u914d\u7f6e\uff0c\u5185\u90e8\u4f1a\u548c\u9ed8\u8ba4\u503c\u8fdb\u884c merge"),i.a.createElement("ul",null,i.a.createElement("li",null,"active \u7ed8\u5236\u8fc7\u7a0b\u4e2d\u9ad8\u4eae\u989c\u8272"),i.a.createElement("li",null,"normal \u6b63\u5e38\u663e\u793a\u72b6\u6001")),i.a.createElement(s["a"],{code:"// \u9ed8\u8ba4\u914d\u7f6e\u53c2\u6570\nconst style = {\n  active: {\n    point: {\n      type: 'PointLayer',\n      shape: 'circle',\n      color: '#fbb03b',\n      size: 5,\n      style: {\n        stroke: '#fff',\n        strokeWidth: 2,\n      },\n    },\n    line: {\n      type: 'LineLayer',\n      shape: 'line',\n      color: '#fbb03b',\n      size: 1,\n      style: {\n        opacity: 1,\n        lineType: 'dash',\n        dashArray: [2, 2],\n      },\n    },\n    polygon: {\n      shape: 'fill',\n      color: '#fbb03b',\n      style: {\n        opacity: 0.1,\n        stroke: '#fbb03b',\n        strokeWidth: 1,\n        strokeOpacity: 1,\n        lineType: 'dash',\n        dashArray: [2, 2],\n      },\n    },\n  },\n  normal: {\n    polygon: {\n      type: 'PolygonLayer',\n      shape: 'fill',\n      color: '#3bb2d0',\n      style: {\n        opacity: 0.1,\n        stroke: '#3bb2d0',\n        strokeWidth: 1,\n        strokeOpacity: 1,\n        lineType: 'solid',\n        dashArray: [2, 2],\n      },\n    },\n    line: {\n      type: 'LineLayer',\n      shape: 'line',\n      size: 1,\n      color: '#3bb2d0',\n      style: {\n        opacity: 1,\n      },\n    },\n    point: {\n      type: 'PointLayer',\n      shape: 'circle',\n      color: '#3bb2d0',\n      size: 3,\n      style: {\n        stroke: '#fff',\n        strokeWidth: 2,\n      },\n    },\n  },\n  normal_point: {\n    type: 'PointLayer',\n    shape: 'circle',\n    color: '#3bb2d0',\n    size: 3,\n    style: {\n      stroke: '#fff',\n      strokeWidth: 2,\n    },\n  },\n  mid_point: {\n    point: {\n      type: 'PointLayer',\n      shape: 'circle',\n      color: '#fbb03b',\n      size: 3,\n      style: {},\n    },\n  },\n};",lang:"javascript"}),i.a.createElement("h2",{id:"demo"},i.a.createElement(o["AnchorLink"],{to:"#demo","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"demo")),i.a.createElement(a["default"],u["default"]["docs-draw_control"].previewerProps,i.a.createElement(c,null)))))},FFjv:function(t,e,n){"use strict";var r=n("HIsA"),i=n("qmtO").f,o=n("2I03"),a=n("B6LR"),s=n("JzK+"),u=n("eD14"),c=n("m52V"),l="".endsWith,f=Math.min,p=u("endsWith"),h=!c&&!p&&!!function(){var t=i(String.prototype,"endsWith");return t&&!t.writable}();r({target:"String",proto:!0,forced:!h&&!p},{endsWith:function(t){var e=String(s(this));a(t);var n=arguments.length>1?arguments[1]:void 0,r=o(e.length),i=void 0===n?r:f(o(n),r),u=String(t);return l?l.call(e,u,i):e.slice(i-u.length,i)===u}})},FHK7:function(t,e,n){"use strict";n.r(e);var r=n("xwgP"),i=n.n(r),o=n("OS9G"),a=n("oSqR"),s=n("Rsk4"),u=i.a.memo(s["default"]["\u77e9\u5f62\u5de5\u5177-demo"].component),c=i.a.memo(s["default"]["\u77e9\u5f62\u5de5\u5177-demo-1"].component);e["default"]=t=>(i.a.useEffect((()=>{var e;null!==t&&void 0!==t&&null!==(e=t.location)&&void 0!==e&&e.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(t.location.hash.slice(1)))}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"markdown"},i.a.createElement("h3",{id:"\u77e9\u5f62\u5de5\u5177"},i.a.createElement(o["AnchorLink"],{to:"#\u77e9\u5f62\u5de5\u5177","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u77e9\u5f62\u5de5\u5177"),i.a.createElement("h3",{id:"\u901a\u8fc7-ui-\u7ec4\u4ef6\u521d\u59cb\u5316"},i.a.createElement(o["AnchorLink"],{to:"#\u901a\u8fc7-ui-\u7ec4\u4ef6\u521d\u59cb\u5316","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u901a\u8fc7 UI \u7ec4\u4ef6\u521d\u59cb\u5316")),i.a.createElement(a["default"],s["default"]["\u77e9\u5f62\u5de5\u5177-demo"].previewerProps,i.a.createElement(u,null)),i.a.createElement("div",{className:"markdown"},i.a.createElement("h3",{id:"\u7ed8\u5236\u7ec4\u4ef6\u521d\u59cb\u5316"},i.a.createElement(o["AnchorLink"],{to:"#\u7ed8\u5236\u7ec4\u4ef6\u521d\u59cb\u5316","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u7ed8\u5236\u7ec4\u4ef6\u521d\u59cb\u5316")),i.a.createElement(a["default"],s["default"]["\u77e9\u5f62\u5de5\u5177-demo-1"].previewerProps,i.a.createElement(c,null)))))},FLIr:function(t,e,n){var r=n("bVFb");r("match")},"FT/y":function(t,e,n){var r=n("J7X1");r(Math,"Math",!0)},FfOG:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return o}));var r=n("HFu6"),i={basename:"/L7-draw/"};window.routerBase&&(i.basename=window.routerBase);var o=Object({NODE_ENV:"production"}).__IS_SERVER?null:Object(r["a"])(i),a=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t||(o=Object(r["a"])(i)),o}},Ffxn:function(t,e,n){var r=n("X+MP"),i={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"},o=r(i);t.exports=o},FmLo:function(t,e,n){"use strict";var r=n("HIsA"),i=n("9izy").charAt;r({target:"String",proto:!0},{at:function(t){return i(this,t)}})},FmSd:function(t,e,n){var r=n("eoOI");function i(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}t.exports=i},FpZt:function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}))},G4R5:function(t,e,n){"use strict";var r=n("ghbW"),i=n("vldi");t.exports=r("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},G5kI:function(t,e,n){var r=n("2JD6");t.exports=r},G70G:function(t,e,n){"use strict";var r=n("n2ef"),i=n("2RC6"),o=n("OLna");t.exports=function(t,e,n){var a=r(e);a in t?i.f(t,a,o(0,n)):t[a]=n}},G7GF:function(t,e,n){"use strict";var r=n("2JD6"),i=n("Wp5u"),o=n("7+LC"),a=r.Int8Array,s=i.aTypedArray,u=i.exportTypedArrayMethod,c=[].toLocaleString,l=[].slice,f=!!a&&o((function(){c.call(new a(1))})),p=o((function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()}))||!o((function(){a.prototype.toLocaleString.call([1,2])}));u("toLocaleString",(function(){return c.apply(f?l.call(s(this)):s(this),arguments)}),p)},GFj5:function(t,e,n){var r=n("1EVt"),i=n("YQ/P");function o(e,n,a){return i()?(t.exports=o=Reflect.construct,t.exports["default"]=t.exports,t.exports.__esModule=!0):(t.exports=o=function(t,e,n){var i=[null];i.push.apply(i,e);var o=Function.bind.apply(t,i),a=new o;return n&&r(a,n.prototype),a},t.exports["default"]=t.exports,t.exports.__esModule=!0),o.apply(null,arguments)}t.exports=o,t.exports["default"]=t.exports,t.exports.__esModule=!0},GP7J:function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("hXyk"),a=n("YjHi"),s=n("Ji6T");r({target:"Map",proto:!0,real:!0,forced:i},{keyOf:function(t){return s(a(o(this)),(function(e,n){if(n===t)return s.stop(e)}),void 0,!0,!0).result}})},GPbW:function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},GUTS:function(t,e,n){var r=n("2JD6"),i=n("D8FR"),o=n("+qhb"),a=n("5Nth"),s=n("ECWN"),u=n("twJ5"),c=u.get,l=u.enforce,f=String(String).split("String");(t.exports=function(t,e,n,s){var u=!!s&&!!s.unsafe,c=!!s&&!!s.enumerable,p=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||i(n,"name",e),l(n).source=f.join("string"==typeof e?e:"")),t!==r?(u?!p&&t[e]&&(c=!0):delete t[e],c?t[e]=n:i(t,e,n)):c?t[e]=n:a(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},GboX:function(t,e,n){"use strict";var r=n("Wp5u"),i=n("pMf/"),o=r.aTypedArrayConstructor,a=r.exportTypedArrayStaticMethod;a("of",(function(){var t=0,e=arguments.length,n=new(o(this))(e);while(e>t)n[t]=arguments[t++];return n}),i)},Gcgh:function(t,e,n){"use strict";var r=n("ghbW"),i=n("r73t");r("WeakSet",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},GfBb:function(t,e,n){"use strict";n.d(e,"a",(function(){return w})),n.d(e,"b",(function(){return T}));var r=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function i(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function o(){}var a=.7,s=1/a,u="\\s*([+-]?\\d+)\\s*",c="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",l="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",f=/^#([0-9a-f]{3,8})$/,p=new RegExp("^rgb\\("+[u,u,u]+"\\)$"),h=new RegExp("^rgb\\("+[l,l,l]+"\\)$"),d=new RegExp("^rgba\\("+[u,u,u,c]+"\\)$"),v=new RegExp("^rgba\\("+[l,l,l,c]+"\\)$"),m=new RegExp("^hsl\\("+[c,l,l]+"\\)$"),g=new RegExp("^hsla\\("+[c,l,l,c]+"\\)$"),y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function b(){return this.rgb().formatHex()}function _(){return I(this).formatHsl()}function x(){return this.rgb().formatRgb()}function w(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=f.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?E(e):3===n?new O(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?S(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?S(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=p.exec(t))?new O(e[1],e[2],e[3],1):(e=h.exec(t))?new O(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=d.exec(t))?S(e[1],e[2],e[3],e[4]):(e=v.exec(t))?S(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=m.exec(t))?P(e[1],e[2]/100,e[3]/100,1):(e=g.exec(t))?P(e[1],e[2]/100,e[3]/100,e[4]):y.hasOwnProperty(t)?E(y[t]):"transparent"===t?new O(NaN,NaN,NaN,0):null}function E(t){return new O(t>>16&255,t>>8&255,255&t,1)}function S(t,e,n,r){return r<=0&&(t=e=n=NaN),new O(t,e,n,r)}function C(t){return t instanceof o||(t=w(t)),t?(t=t.rgb(),new O(t.r,t.g,t.b,t.opacity)):new O}function T(t,e,n,r){return 1===arguments.length?C(t):new O(t,e,n,null==r?1:r)}function O(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function A(){return"#"+M(this.r)+M(this.g)+M(this.b)}function k(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function M(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function P(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new R(t,e,n,r)}function I(t){if(t instanceof R)return new R(t.h,t.s,t.l,t.opacity);if(t instanceof o||(t=w(t)),!t)return new R;if(t instanceof R)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,u=a-i,c=(a+i)/2;return u?(s=e===a?(n-r)/u+6*(n<r):n===a?(r-e)/u+2:(e-n)/u+4,u/=c<.5?a+i:2-a-i,s*=60):u=c>0&&c<1?0:s,new R(s,u,c,t.opacity)}function L(t,e,n,r){return 1===arguments.length?I(t):new R(t,e,n,null==r?1:r)}function R(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function D(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}r(o,w,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:b,formatHex:b,formatHsl:_,formatRgb:x,toString:x}),r(O,T,i(o,{brighter:function(t){return t=null==t?s:Math.pow(s,t),new O(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?a:Math.pow(a,t),new O(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:A,formatHex:A,formatRgb:k,toString:k})),r(R,L,i(o,{brighter:function(t){return t=null==t?s:Math.pow(s,t),new R(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?a:Math.pow(a,t),new R(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new O(D(t>=240?t-240:t+120,i,r),D(t,i,r),D(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}))},Go1P:function(t,e,n){var r=n("TpDJ");function i(t,e){var n=t.length;while(n--)if(r(t[n][0],e))return n;return-1}t.exports=i},"H++4":function(t,e,n){var r=n("JqKL");r("Int8",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},H4kY:function(t,e,n){var r=n("gsbv"),i=function(){return r.Date.now()};t.exports=i},H7G2:function(t,e,n){var r=n("HIsA"),i=n("icJ8"),o=n("hXyk"),a=n("kI7s"),s=i.has,u=i.toKey,c=function(t,e,n){var r=s(t,e,n);if(r)return!0;var i=a(e);return null!==i&&c(t,i,n)};r({target:"Reflect",stat:!0},{hasMetadata:function(t,e){var n=arguments.length<3?void 0:u(arguments[2]);return c(t,o(e),n)}})},HC6C:function(t,e,n){"use strict";var r=n("GUTS"),i=n("hXyk"),o=n("7+LC"),a=n("ma2j"),s="toString",u=RegExp.prototype,c=u[s],l=o((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),f=c.name!=s;(l||f)&&r(RegExp.prototype,s,(function(){var t=i(this),e=String(t.source),n=t.flags,r=String(void 0===n&&t instanceof RegExp&&!("flags"in u)?a.call(t):n);return"/"+e+"/"+r}),{unsafe:!0})},HC6f:function(t,e,n){"use strict";var r=n("2JD6"),i=n("Hiyu"),o=n("13/t"),a=n("D8FR"),s=n("masK"),u=n("7+LC"),c=n("xOST"),l=n("PaPB"),f=n("2I03"),p=n("PM2V"),h=n("4CZv"),d=n("kI7s"),v=n("UPu9"),m=n("szjD").f,g=n("2RC6").f,y=n("+kF3"),b=n("J7X1"),_=n("twJ5"),x=_.get,w=_.set,E="ArrayBuffer",S="DataView",C="prototype",T="Wrong length",O="Wrong index",A=r[E],k=A,M=r[S],P=M&&M[C],I=Object.prototype,L=r.RangeError,R=h.pack,D=h.unpack,N=function(t){return[255&t]},j=function(t){return[255&t,t>>8&255]},F=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},z=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},B=function(t){return R(t,23,4)},U=function(t){return R(t,52,8)},V=function(t,e){g(t[C],e,{get:function(){return x(this)[e]}})},q=function(t,e,n,r){var i=p(n),o=x(t);if(i+e>o.byteLength)throw L(O);var a=x(o.buffer).bytes,s=i+o.byteOffset,u=a.slice(s,s+e);return r?u:u.reverse()},G=function(t,e,n,r,i,o){var a=p(n),s=x(t);if(a+e>s.byteLength)throw L(O);for(var u=x(s.buffer).bytes,c=a+s.byteOffset,l=r(+i),f=0;f<e;f++)u[c+f]=l[o?f:e-f-1]};if(o){if(!u((function(){A(1)}))||!u((function(){new A(-1)}))||u((function(){return new A,new A(1.5),new A(NaN),A.name!=E}))){k=function(t){return c(this,k),new A(p(t))};for(var H,W=k[C]=A[C],X=m(A),Z=0;X.length>Z;)(H=X[Z++])in k||a(k,H,A[H]);W.constructor=k}v&&d(P)!==I&&v(P,I);var Y=new M(new k(2)),K=P.setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||s(P,{setInt8:function(t,e){K.call(this,t,e<<24>>24)},setUint8:function(t,e){K.call(this,t,e<<24>>24)}},{unsafe:!0})}else k=function(t){c(this,k,E);var e=p(t);w(this,{bytes:y.call(new Array(e),0),byteLength:e}),i||(this.byteLength=e)},M=function(t,e,n){c(this,M,S),c(t,k,S);var r=x(t).byteLength,o=l(e);if(o<0||o>r)throw L("Wrong offset");if(n=void 0===n?r-o:f(n),o+n>r)throw L(T);w(this,{buffer:t,byteLength:n,byteOffset:o}),i||(this.buffer=t,this.byteLength=n,this.byteOffset=o)},i&&(V(k,"byteLength"),V(M,"buffer"),V(M,"byteLength"),V(M,"byteOffset")),s(M[C],{getInt8:function(t){return q(this,1,t)[0]<<24>>24},getUint8:function(t){return q(this,1,t)[0]},getInt16:function(t){var e=q(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=q(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return z(q(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return z(q(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return D(q(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return D(q(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){G(this,1,t,N,e)},setUint8:function(t,e){G(this,1,t,N,e)},setInt16:function(t,e){G(this,2,t,j,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){G(this,2,t,j,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){G(this,4,t,F,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){G(this,4,t,F,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){G(this,4,t,B,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){G(this,8,t,U,e,arguments.length>2?arguments[2]:void 0)}});b(k,E),b(M,S),t.exports={ArrayBuffer:k,DataView:M}},HFu6:function(t,e,n){"use strict";n.d(e,"a",(function(){return L})),n.d(e,"b",(function(){return B})),n.d(e,"d",(function(){return V})),n.d(e,"c",(function(){return x})),n.d(e,"f",(function(){return w})),n.d(e,"e",(function(){return _}));var r=n("M2Sr");function i(t){return"/"===t.charAt(0)}function o(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}function a(t,e){void 0===e&&(e="");var n,r=t&&t.split("/")||[],a=e&&e.split("/")||[],s=t&&i(t),u=e&&i(e),c=s||u;if(t&&i(t)?a=r:r.length&&(a.pop(),a=a.concat(r)),!a.length)return"/";if(a.length){var l=a[a.length-1];n="."===l||".."===l||""===l}else n=!1;for(var f=0,p=a.length;p>=0;p--){var h=a[p];"."===h?o(a,p):".."===h?(o(a,p),f++):f&&(o(a,p),f--)}if(!c)for(;f--;f)a.unshift("..");!c||""===a[0]||a[0]&&i(a[0])||a.unshift("");var d=a.join("/");return n&&"/"!==d.substr(-1)&&(d+="/"),d}var s=a;function u(t){return t.valueOf?t.valueOf():Object.prototype.valueOf.call(t)}function c(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(Array.isArray(t))return Array.isArray(e)&&t.length===e.length&&t.every((function(t,n){return c(t,e[n])}));if("object"===typeof t||"object"===typeof e){var n=u(t),r=u(e);return n!==t||r!==e?c(n,r):Object.keys(Object.assign({},t,e)).every((function(n){return c(t[n],e[n])}))}return!1}var l=c,f=n("gd5S"),p=n.n(f),h=n("AKk7");function d(t){return"/"===t.charAt(0)?t:"/"+t}function v(t){return"/"===t.charAt(0)?t.substr(1):t}function m(t,e){return 0===t.toLowerCase().indexOf(e.toLowerCase())&&-1!=="/?#".indexOf(t.charAt(e.length))}function g(t,e){return m(t,e)?t.substr(e.length):t}function y(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t}function b(t){var e=t||"/",n="",r="",i=e.indexOf("#");-1!==i&&(r=e.substr(i),e=e.substr(0,i));var o=e.indexOf("?");return-1!==o&&(n=e.substr(o),e=e.substr(0,o)),{pathname:e,search:"?"===n?"":n,hash:"#"===r?"":r}}function _(t){var e=t.pathname,n=t.search,r=t.hash,i=e||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function x(t,e,n,i){var o;"string"===typeof t?(o=b(t),o.query=o.search?p.a.parse(o.search):{},o.state=e):(o=Object(r["a"])({},t),void 0===o.pathname&&(o.pathname=""),o.search?("?"!==o.search.charAt(0)&&(o.search="?"+o.search),o.query=p.a.parse(o.search)):(o.search=o.query?p.a.stringify(o.query):"",o.query=o.query||{}),o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==e&&void 0===o.state&&(o.state=e));try{o.pathname=decodeURI(o.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return n&&(o.key=n),i?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=s(o.pathname,i.pathname)):o.pathname=i.pathname:o.pathname||(o.pathname="/"),o}function w(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&l(t.state,e.state)}function E(){var t=null;function e(e){return t=e,function(){t===e&&(t=null)}}function n(e,n,r,i){if(null!=t){var o="function"===typeof t?t(e,n):t;"string"===typeof o?"function"===typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)}var r=[];function i(t){var e=!0;function n(){e&&t.apply(void 0,arguments)}return r.push(n),function(){e=!1,r=r.filter((function(t){return t!==n}))}}function o(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];r.forEach((function(t){return t.apply(void 0,e)}))}return{setPrompt:e,confirmTransitionTo:n,appendListener:i,notifyListeners:o}}var S=!("undefined"===typeof window||!window.document||!window.document.createElement);function C(t,e){e(window.confirm(t))}function T(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}function O(){return-1===window.navigator.userAgent.indexOf("Trident")}function A(){return-1===window.navigator.userAgent.indexOf("Firefox")}function k(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")}var M="popstate",P="hashchange";function I(){try{return window.history.state||{}}catch(t){return{}}}function L(t){void 0===t&&(t={}),S||Object(h["a"])(!1);var e=window.history,n=T(),i=!O(),o=t,a=o.forceRefresh,s=void 0!==a&&a,u=o.getUserConfirmation,c=void 0===u?C:u,l=o.keyLength,f=void 0===l?6:l,p=t.basename?y(d(t.basename)):"";function v(t){var e=t||{},n=e.key,r=e.state,i=window.location,o=i.pathname,a=i.search,s=i.hash,u=o+a+s;return p&&(u=g(u,p)),x(u,r,n)}function m(){return Math.random().toString(36).substr(2,f)}var b=E();function w(t){Object(r["a"])(K,t),K.length=e.length,b.notifyListeners(K.location,K.action)}function A(t){k(t)||D(v(t.state))}function L(){D(v(I()))}var R=!1;function D(t){if(R)R=!1,w();else{var e="POP";b.confirmTransitionTo(t,e,c,(function(n){n?w({action:e,location:t}):N(t)}))}}function N(t){var e=K.location,n=F.indexOf(e.key);-1===n&&(n=0);var r=F.indexOf(t.key);-1===r&&(r=0);var i=n-r;i&&(R=!0,V(i))}var j=v(I()),F=[j.key];function z(t){return p+_(t)}function B(t,r){var i="PUSH",o=x(t,r,m(),K.location);b.confirmTransitionTo(o,i,c,(function(t){if(t){var r=z(o),a=o.key,u=o.state;if(n)if(e.pushState({key:a,state:u},null,r),s)window.location.href=r;else{var c=F.indexOf(K.location.key),l=F.slice(0,c+1);l.push(o.key),F=l,w({action:i,location:o})}else window.location.href=r}}))}function U(t,r){var i="REPLACE",o=x(t,r,m(),K.location);b.confirmTransitionTo(o,i,c,(function(t){if(t){var r=z(o),a=o.key,u=o.state;if(n)if(e.replaceState({key:a,state:u},null,r),s)window.location.replace(r);else{var c=F.indexOf(K.location.key);-1!==c&&(F[c]=o.key),w({action:i,location:o})}else window.location.replace(r)}}))}function V(t){e.go(t)}function q(){V(-1)}function G(){V(1)}var H=0;function W(t){H+=t,1===H&&1===t?(window.addEventListener(M,A),i&&window.addEventListener(P,L)):0===H&&(window.removeEventListener(M,A),i&&window.removeEventListener(P,L))}var X=!1;function Z(t){void 0===t&&(t=!1);var e=b.setPrompt(t);return X||(W(1),X=!0),function(){return X&&(X=!1,W(-1)),e()}}function Y(t){var e=b.appendListener(t);return W(1),function(){W(-1),e()}}var K={length:e.length,action:"POP",location:j,createHref:z,push:B,replace:U,go:V,goBack:q,goForward:G,block:Z,listen:Y};return K}var R="hashchange",D={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+v(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:v,decodePath:d},slash:{encodePath:d,decodePath:d}};function N(t){var e=t.indexOf("#");return-1===e?t:t.slice(0,e)}function j(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)}function F(t){window.location.hash=t}function z(t){window.location.replace(N(window.location.href)+"#"+t)}function B(t){void 0===t&&(t={}),S||Object(h["a"])(!1);var e=window.history,n=(A(),t),i=n.getUserConfirmation,o=void 0===i?C:i,a=n.hashType,s=void 0===a?"slash":a,u=t.basename?y(d(t.basename)):"",c=D[s],l=c.encodePath,f=c.decodePath;function p(){var t=f(j());return u&&(t=g(t,u)),x(t)}var v=E();function m(t){Object(r["a"])(Q,t),Q.length=e.length,v.notifyListeners(Q.location,Q.action)}var b=!1,w=null;function T(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash}function O(){var t=j(),e=l(t);if(t!==e)z(e);else{var n=p(),r=Q.location;if(!b&&T(r,n))return;if(w===_(n))return;w=null,k(n)}}function k(t){if(b)b=!1,m();else{var e="POP";v.confirmTransitionTo(t,e,o,(function(n){n?m({action:e,location:t}):M(t)}))}}function M(t){var e=Q.location,n=B.lastIndexOf(_(e));-1===n&&(n=0);var r=B.lastIndexOf(_(t));-1===r&&(r=0);var i=n-r;i&&(b=!0,G(i))}var P=j(),I=l(P);P!==I&&z(I);var L=p(),B=[_(L)];function U(t){var e=document.querySelector("base"),n="";return e&&e.getAttribute("href")&&(n=N(window.location.href)),n+"#"+l(u+_(t))}function V(t,e){var n="PUSH",r=x(t,void 0,void 0,Q.location);v.confirmTransitionTo(r,n,o,(function(t){if(t){var e=_(r),i=l(u+e),o=j()!==i;if(o){w=e,F(i);var a=B.lastIndexOf(_(Q.location)),s=B.slice(0,a+1);s.push(e),B=s,m({action:n,location:r})}else m()}}))}function q(t,e){var n="REPLACE",r=x(t,void 0,void 0,Q.location);v.confirmTransitionTo(r,n,o,(function(t){if(t){var e=_(r),i=l(u+e),o=j()!==i;o&&(w=e,z(i));var a=B.indexOf(_(Q.location));-1!==a&&(B[a]=e),m({action:n,location:r})}}))}function G(t){e.go(t)}function H(){G(-1)}function W(){G(1)}var X=0;function Z(t){X+=t,1===X&&1===t?window.addEventListener(R,O):0===X&&window.removeEventListener(R,O)}var Y=!1;function K(t){void 0===t&&(t=!1);var e=v.setPrompt(t);return Y||(Z(1),Y=!0),function(){return Y&&(Y=!1,Z(-1)),e()}}function J(t){var e=v.appendListener(t);return Z(1),function(){Z(-1),e()}}var Q={length:e.length,action:"POP",location:L,createHref:U,push:V,replace:q,go:G,goBack:H,goForward:W,block:K,listen:J};return Q}function U(t,e,n){return Math.min(Math.max(t,e),n)}function V(t){void 0===t&&(t={});var e=t,n=e.getUserConfirmation,i=e.initialEntries,o=void 0===i?["/"]:i,a=e.initialIndex,s=void 0===a?0:a,u=e.keyLength,c=void 0===u?6:u,l=E();function f(t){Object(r["a"])(O,t),O.length=O.entries.length,l.notifyListeners(O.location,O.action)}function p(){return Math.random().toString(36).substr(2,c)}var h=U(s,0,o.length-1),d=o.map((function(t){return x(t,void 0,"string"===typeof t?p():t.key||p())})),v=_;function m(t,e){var r="PUSH",i=x(t,e,p(),O.location);l.confirmTransitionTo(i,r,n,(function(t){if(t){var e=O.index,n=e+1,o=O.entries.slice(0);o.length>n?o.splice(n,o.length-n,i):o.push(i),f({action:r,location:i,index:n,entries:o})}}))}function g(t,e){var r="REPLACE",i=x(t,e,p(),O.location);l.confirmTransitionTo(i,r,n,(function(t){t&&(O.entries[O.index]=i,f({action:r,location:i}))}))}function y(t){var e=U(O.index+t,0,O.entries.length-1),r="POP",i=O.entries[e];l.confirmTransitionTo(i,r,n,(function(t){t?f({action:r,location:i,index:e}):f()}))}function b(){y(-1)}function w(){y(1)}function S(t){var e=O.index+t;return e>=0&&e<O.entries.length}function C(t){return void 0===t&&(t=!1),l.setPrompt(t)}function T(t){return l.appendListener(t)}var O={length:d.length,action:"POP",location:d[h],index:h,entries:d,createHref:v,push:m,replace:g,go:y,goBack:b,goForward:w,canGo:S,block:C,listen:T};return O}},HIsA:function(t,e,n){var r=n("2JD6"),i=n("qmtO").f,o=n("D8FR"),a=n("GUTS"),s=n("5Nth"),u=n("xp0c"),c=n("6Nbm");t.exports=function(t,e){var n,l,f,p,h,d,v=t.target,m=t.global,g=t.stat;if(l=m?r:g?r[v]||s(v,{}):(r[v]||{}).prototype,l)for(f in e){if(h=e[f],t.noTargetGet?(d=i(l,f),p=d&&d.value):p=l[f],n=c(m?f:v+(g?".":"#")+f,t.forced),!n&&void 0!==p){if(typeof h===typeof p)continue;u(h,p)}(t.sham||p&&p.sham)&&o(h,"sham",!0),a(l,f,h,t)}}},HKEF:function(t,e,n){var r=n("pxmn"),i=n("dOdC"),o=n("kPvK"),a=o("species");t.exports=function(t,e){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?r(n)&&(n=n[a],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},HLqh:function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n("oN6F"))},HLuf:function(t,e,n){var r=n("ADQb"),i=n("gsbv"),o=r(i,"WeakMap");t.exports=o},HQcF:function(t,e,n){"use strict";var r=n("HIsA"),i=n("JzK+"),o=n("ihzt"),a=n("ma2j"),s=n("kPvK"),u=n("m52V"),c=s("replace"),l=RegExp.prototype;r({target:"String",proto:!0},{replaceAll:function t(e,n){var r,s,f,p,h,d,v,m,g,y=i(this);if(null!=e){if(r=o(e),r&&(s=String(i("flags"in l?e.flags:a.call(e))),!~s.indexOf("g")))throw TypeError("`.replaceAll` does not allow non-global regexes");if(f=e[c],void 0!==f)return f.call(e,y,n);if(u&&r)return String(y).replace(e,n)}if(p=String(y),h=String(e),""===h)return t.call(p,/(?:)/g,n);if(d=p.split(h),"function"!==typeof n)return d.join(String(n));for(v=d[0],m=v.length,g=1;g<d.length;g++)v+=String(n(h,m,p)),m+=h.length+d[g].length,v+=d[g];return v}})},HR5z:function(t,e,n){var r=n("BXhE"),i=n("5Nvg"),o=n("br1w"),a=1/0,s=r&&1/o(new r([,-0]))[1]==a?function(t){return new r(t)}:i;t.exports=s},HWpy:function(t,e,n){"use strict";var r={};function i(t,e){0}function o(t,e,n){e||r[n]||(t(!1,n),r[n]=!0)}function a(t,e){o(i,t,e)}e["a"]=a},HWsn:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiInject=void 0;var r=n("9L8m"),i=n("rMkn"),o=n("ZLnY");function a(t){return function(e,n,a){var s=new i.Metadata(r.MULTI_INJECT_TAG,t);"number"===typeof a?o.tagParameter(e,n,a,s):o.tagProperty(e,n,s)}}e.multiInject=a},HZYV:function(t,e,n){"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var i=c(n("xwgP")),o=s(n("q3YX")),a=s(n("+pX7"));function s(t){return t&&t.__esModule?t:{default:t}}function u(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(u=function(t){return t?n:e})(t)}function c(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var n=u(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=t[a]}return i["default"]=t,n&&n.set(t,i),i}function l(t,e){return v(t)||d(t,e)||p(t,e)||f()}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(t,e){if(t){if("string"===typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function v(t){if(Array.isArray(t))return t}function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=function(t,e){var n=function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=r[1].replace(/([^^])\/$/,"$1");return g(g({},(null===(t=r[0].find((function(t){var e=t.path;return e===o})))||void 0===t?void 0:t.meta)||{}),{},{__pathname:e})},r=(0,i.useState)(n(t,e)),o=l(r,2),a=o[0],s=o[1];return(0,i.useLayoutEffect)((function(){s(n(t,e))}),[e]),a},_=function(t,e){var n=function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(null===(e=r[0].find((function(t){return r[1].startsWith("/".concat(t.name))})))||void 0===e?void 0:e.name)||t[0].name},r=(0,i.useState)(n(t,e)),o=l(r,2),a=o[0],s=o[1];return(0,i.useLayoutEffect)((function(){s(n(t,e))}),[e]),a},x=function(t,e,n){var r=function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=n[0].navs[n[1]]||[],o="*",a=i.length-1;a>=0;a-=1){var s=i[a],u=[s].concat(s.children).filter(Boolean),c=u.find((function(t){return t.path&&new RegExp("^".concat(t.path.replace(/\.html$/,""),"(/|.|$)")).test(n[2])}));if(c){o=c.path;break}}return(null===(t=n[0].menus[n[1]])||void 0===t?void 0:t[o])||[]},o=(0,i.useState)(r(t,e,n)),a=l(o,2),s=a[0],u=a[1];return(0,i.useLayoutEffect)((function(){u(r(t,e,n))}),[t.navs,t.menus,e,n]),s},w=function(t,e,n){var r=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return r[0]===r[1][0].name?r[2].path:"".concat(n.path,"/").concat(t).replace(/\/\//,"/")},o=(0,i.useState)(r(t,e,n)),a=l(o,2),s=a[0],u=a[1];return(0,i.useLayoutEffect)((function(){u(r(t,e,n))}),[t]),s},E=function t(e){var n;return null===(n=e.find((function(e){return!!e.__dumiRoot||!!e.routes&&t(e.routes)})))||void 0===n?void 0:n.routes},S=function(t){var e=t.location,n=t.route,r=t.children,s=e.pathname.replace(n.path.replace(/^\/$/,"//"),""),u=E(t.routes)||[],c=b(u,e.pathname),l=_(o["default"].locales,s),f=x(o["default"],l,e.pathname),p=w(l,o["default"].locales,n);return i["default"].createElement(a["default"].Provider,{value:{config:o["default"],meta:c.__pathname===e.pathname?c:{},locale:l,nav:o["default"].navs[l]||[],menu:f,base:p,routes:u}},r)},C=S;e["default"]=C},HdUy:function(t,e,n){var r=n("JyHP"),i=r(Object.keys,Object);t.exports=i},He07:function(t,e,n){var r=n("D8FR"),i=n("Tk1U"),o=n("kPvK"),a=o("toPrimitive"),s=Date.prototype;a in s||r(s,a,i)},Hf9d:function(t,e){function n(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},HgUS:function(t,e,n){var r=n("zOkb"),i=Object.prototype,o=i.hasOwnProperty;function a(t){var e=this.__data__;return r?void 0!==e[t]:o.call(e,t)}t.exports=a},Hiyu:function(t,e,n){var r=n("7+LC");t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},HqdE:function(t,e,n){var r=n("7+LC"),i=n("kPvK"),o=n("9ZTU"),a=i("species");t.exports=function(t){return o>=51||!r((function(){var e=[],n=e.constructor={};return n[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},Hr9Q:function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("hXyk"),a=n("DDwO"),s=n("Ji6T");r({target:"Map",proto:!0,real:!0,forced:i},{merge:function(t){var e=o(this),n=a(e.set),r=0;while(r<arguments.length)s(arguments[r++],n,e,!0);return e}})},"HrP/":function(t,e,n){"use strict";function r(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}n.d(e,"a",(function(){return r}))},HwB0:function(t,e){var n="\\ud800-\\udfff",r="\\u0300-\\u036f",i="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",a=r+i+o,s="\\u2700-\\u27bf",u="a-z\\xdf-\\xf6\\xf8-\\xff",c="\\xac\\xb1\\xd7\\xf7",l="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",f="\\u2000-\\u206f",p=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",h="A-Z\\xc0-\\xd6\\xd8-\\xde",d="\\ufe0e\\ufe0f",v=c+l+f+p,m="['\u2019]",g="["+v+"]",y="["+a+"]",b="\\d+",_="["+s+"]",x="["+u+"]",w="[^"+n+v+b+s+u+h+"]",E="\\ud83c[\\udffb-\\udfff]",S="(?:"+y+"|"+E+")",C="[^"+n+"]",T="(?:\\ud83c[\\udde6-\\uddff]){2}",O="[\\ud800-\\udbff][\\udc00-\\udfff]",A="["+h+"]",k="\\u200d",M="(?:"+x+"|"+w+")",P="(?:"+A+"|"+w+")",I="(?:"+m+"(?:d|ll|m|re|s|t|ve))?",L="(?:"+m+"(?:D|LL|M|RE|S|T|VE))?",R=S+"?",D="["+d+"]?",N="(?:"+k+"(?:"+[C,T,O].join("|")+")"+D+R+")*",j="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",F="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",z=D+R+N,B="(?:"+[_,T,O].join("|")+")"+z,U=RegExp([A+"?"+x+"+"+I+"(?="+[g,A,"$"].join("|")+")",P+"+"+L+"(?="+[g,A+M,"$"].join("|")+")",A+"?"+M+"+"+I,A+"+"+L,F,j,b,B].join("|"),"g");function V(t){return t.match(U)||[]}t.exports=V},Hx2v:function(t,e,n){"use strict";var r=n("HIsA"),i=n("Ji6T"),o=n("DDwO");r({target:"Map",stat:!0},{groupBy:function(t,e){var n=new this;o(e);var r=o(n.has),a=o(n.get),s=o(n.set);return i(t,(function(t){var i=e(t);r.call(n,i)?a.call(n,i).push(t):s.call(n,i,[t])})),n}})},"I/SS":function(t,e,n){(function(e,n){t.exports=n()})(0,(function(){"use strict";var t,e,n;function r(r,i){if(t)if(e){var o="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",a={};t(a),n=i(a),"undefined"!==typeof window&&(n.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else e=i;else t=i}return r(["exports"],(function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}var n=r;function r(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}r.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},r.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},r.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},r.prototype.solveCurveX=function(t,e){var n,r,i,o,a;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=t)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},r.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var i=o;function o(t,e){this.x=t,this.y=e}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-r*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(t){return t instanceof o?t:Array.isArray(t)?new o(t[0],t[1]):t};var a="undefined"!=typeof self?self:{},s=Math.pow(2,53)-1;function u(t,e,r,i){var o=new n(t,e,r,i);return function(t){return o.solve(t)}}var c=u(.25,.1,.25,1);function l(t,e,n){return Math.min(n,Math.max(e,t))}function f(t,e,n){var r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i}function p(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t}var h=1;function d(){return h++}function v(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function m(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function g(t,e){t.forEach((function(t){e[t]&&(e[t]=e[t].bind(e))}))}function y(t,e){return-1!==t.indexOf(e,t.length-e.length)}function b(t,e,n){var r={};for(var i in t)r[i]=e.call(n||this,t[i],i,t);return r}function _(t,e,n){var r={};for(var i in t)e.call(n||this,t[i],i,t)&&(r[i]=t[i]);return r}function x(t){return Array.isArray(t)?t.map(x):"object"==typeof t&&t?b(t,x):t}var w={};function E(t){w[t]||("undefined"!=typeof console&&console.warn(t),w[t]=!0)}function S(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function C(t){for(var e=0,n=0,r=t.length,i=r-1,o=void 0,a=void 0;n<r;i=n++)e+=((a=t[i]).x-(o=t[n]).x)*(o.y+a.y);return e}function T(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function O(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(t,n,r,i){var o=r||i;return e[n]=!o||o.toLowerCase(),""})),e["max-age"]){var n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}var A=null;function k(t){if(null==A){var e=t.navigator?t.navigator.userAgent:null;A=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return A}function M(t){try{var e=a[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var P,I,L,R,D=a.performance&&a.performance.now?a.performance.now.bind(a.performance):Date.now.bind(Date),N=a.requestAnimationFrame||a.mozRequestAnimationFrame||a.webkitRequestAnimationFrame||a.msRequestAnimationFrame,j=a.cancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelAnimationFrame||a.msCancelAnimationFrame,F={now:D,frame:function(t){var e=N(t);return{cancel:function(){return j(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var n=a.document.createElement("canvas"),r=n.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return n.width=t.width,n.height=t.height,r.drawImage(t,0,0,t.width,t.height),r.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return P||(P=a.document.createElement("a")),P.href=t,P.href},hardwareConcurrency:a.navigator&&a.navigator.hardwareConcurrency||4,get devicePixelRatio(){return a.devicePixelRatio},get prefersReducedMotion(){return!!a.matchMedia&&(null==I&&(I=a.matchMedia("(prefers-reduced-motion: reduce)")),I.matches)}},z={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},B={supported:!1,testSupport:function(t){!U&&R&&(V?q(t):L=t)}},U=!1,V=!1;function q(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,R),t.isContextLost())return;B.supported=!0}catch(t){}t.deleteTexture(e),U=!0}a.document&&((R=a.document.createElement("img")).onload=function(){L&&q(L),L=null,V=!0},R.onerror=function(){U=!0,L=null},R.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var G="01",H=function(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()};function W(t){return 0===t.indexOf("mapbox:")}H.prototype._createSkuToken=function(){var t=function(){for(var t="",e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",G,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},H.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},H.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},H.prototype.normalizeStyleURL=function(t,e){if(!W(t))return t;var n=K(t);return n.path="/styles/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||e)},H.prototype.normalizeGlyphsURL=function(t,e){if(!W(t))return t;var n=K(t);return n.path="/fonts/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||e)},H.prototype.normalizeSourceURL=function(t,e){if(!W(t))return t;var n=K(t);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||e)},H.prototype.normalizeSpriteURL=function(t,e,n,r){var i=K(t);return W(t)?(i.path="/styles/v1"+i.path+"/sprite"+e+n,this._makeAPIURL(i,this._customAccessToken||r)):(i.path+=""+e+n,J(i))},H.prototype.normalizeTileURL=function(t,e){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!W(t))return t;var n=K(t);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,(F.devicePixelRatio>=2||512===e?"@2x":"")+(B.supported?".webp":"$1")),n.path=n.path.replace(/^.+\/v4\//,"/"),n.path="/v4"+n.path;var r=this._customAccessToken||function(t){for(var e=0,n=t;e<n.length;e+=1){var r=n[e].match(/^access_token=(.*)$/);if(r)return r[1]}return null}(n.params)||z.ACCESS_TOKEN;return z.REQUIRE_ACCESS_TOKEN&&r&&this._skuToken&&n.params.push("sku="+this._skuToken),this._makeAPIURL(n,r)},H.prototype.canonicalizeTileURL=function(t,e){var n=K(t);if(!n.path.match(/(^\/v4\/)/)||!n.path.match(/\.[\w]+$/))return t;var r="mapbox://tiles/";r+=n.path.replace("/v4/","");var i=n.params;return e&&(i=i.filter((function(t){return!t.match(/^access_token=/)}))),i.length&&(r+="?"+i.join("&")),r},H.prototype.canonicalizeTileset=function(t,e){for(var n=!!e&&W(e),r=[],i=0,o=t.tiles||[];i<o.length;i+=1){var a=o[i];Z(a)?r.push(this.canonicalizeTileURL(a,n)):r.push(a)}return r},H.prototype._makeAPIURL=function(t,e){var n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",r=K(z.API_URL);if(t.protocol=r.protocol,t.authority=r.authority,"http"===t.protocol){var i=t.params.indexOf("secure");i>=0&&t.params.splice(i,1)}if("/"!==r.path&&(t.path=""+r.path+t.path),!z.REQUIRE_ACCESS_TOKEN)return J(t);if(!(e=e||z.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+n);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+n);return t.params=t.params.filter((function(t){return-1===t.indexOf("access_token")})),t.params.push("access_token="+e),J(t)};var X=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Z(t){return X.test(t)}var Y=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function K(t){var e=t.match(Y);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function J(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function Q(t){if(!t)return null;var e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(a.atob(e[1]).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(t){return null}}var $=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};$.prototype.getStorageKey=function(t){var e,n=Q(z.ACCESS_TOKEN);return e=n&&n.u?a.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))}))):z.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+e:"mapbox.eventData:"+e},$.prototype.fetchEventData=function(){var t=M("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{var r=a.localStorage.getItem(e);r&&(this.eventData=JSON.parse(r));var i=a.localStorage.getItem(n);i&&(this.anonId=i)}catch(t){E("Unable to read from LocalStorage")}},$.prototype.saveEventData=function(){var t=M("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{a.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&a.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){E("Unable to write to LocalStorage")}},$.prototype.processRequests=function(t){},$.prototype.postEvent=function(t,e,n,r){var i=this;if(z.EVENTS_URL){var o=K(z.EVENTS_URL);o.params.push("access_token="+(r||z.ACCESS_TOKEN||""));var a={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.1",skuId:G,userId:this.anonId},s=e?p(a,e):a,u={url:J(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=xt(u,(function(t){i.pendingRequest=null,n(t),i.saveEventData(),i.processRequests(r)}))}},$.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var tt,et,nt=function(t){function e(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postMapLoadEvent=function(t,e,n,r){this.skuToken=n,(z.EVENTS_URL&&r||z.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return W(t)||Z(t)})))&&this.queueRequest({id:e,timestamp:Date.now()},r)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),r=n.id,i=n.timestamp;r&&this.success[r]||(this.anonId||this.fetchEventData(),m(this.anonId)||(this.anonId=v()),this.postEvent(i,{skuToken:this.skuToken},(function(t){t||r&&(e.success[r]=!0)}),t))}},e}($),rt=new(function(t){function e(e){t.call(this,"appUserTurnstile"),this._customAccessToken=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postTurnstileEvent=function(t,e){z.EVENTS_URL&&z.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return W(t)||Z(t)}))&&this.queueRequest(Date.now(),e)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var n=Q(z.ACCESS_TOKEN),r=n?n.u:z.ACCESS_TOKEN,i=r!==this.eventData.tokenU;m(this.anonId)||(this.anonId=v(),i=!0);var o=this.queue.shift();if(this.eventData.lastSuccess){var a=new Date(this.eventData.lastSuccess),s=new Date(o),u=(o-this.eventData.lastSuccess)/864e5;i=i||u>=1||u<-1||a.getDate()!==s.getDate()}else i=!0;if(!i)return this.processRequests();this.postEvent(o,{"enabled.telemetry":!1},(function(t){t||(e.eventData.lastSuccess=o,e.eventData.tokenU=r)}),t)}},e}($)),it=rt.postTurnstileEvent.bind(rt),ot=new nt,at=ot.postMapLoadEvent.bind(ot),st=500,ut=50;function ct(){a.caches&&!tt&&(tt=a.caches.open("mapbox-tiles"))}function lt(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}var ft,pt=1/0;function ht(){return null==ft&&(ft=a.OffscreenCanvas&&new a.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof a.createImageBitmap),ft}var dt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(dt);var vt,mt,gt=function(t){function e(e,n,r){401===n&&Z(r)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=n,this.url=r,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),yt=T()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===a.location.protocol?a.parent:a).location.href},bt=function(t,e){if(!(/^file:/.test(n=t.url)||/^file:/.test(yt())&&!/^\w+:/.test(n))){if(a.fetch&&a.Request&&a.AbortController&&a.Request.prototype.hasOwnProperty("signal"))return function(t,e){var n,r=new a.AbortController,i=new a.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:yt(),signal:r.signal}),o=!1,s=!1,u=(n=i.url).indexOf("sku=")>0&&Z(n);"json"===t.type&&i.headers.set("Accept","application/json");var c=function(n,r,o){if(!s){if(n&&"SecurityError"!==n.message&&E(n),r&&o)return l(r);var c=Date.now();a.fetch(i).then((function(n){if(n.ok){var r=u?n.clone():null;return l(n,r,c)}return e(new gt(n.statusText,n.status,t.url))}))["catch"]((function(t){20!==t.code&&e(new Error(t.message))}))}},l=function(n,r,u){("arrayBuffer"===t.type?n.arrayBuffer():"json"===t.type?n.json():n.text()).then((function(t){s||(r&&u&&function(t,e,n){if(ct(),tt){var r={status:e.status,statusText:e.statusText,headers:new a.Headers};e.headers.forEach((function(t,e){return r.headers.set(e,t)}));var i=O(e.headers.get("Cache-Control")||"");i["no-store"]||(i["max-age"]&&r.headers.set("Expires",new Date(n+1e3*i["max-age"]).toUTCString()),new Date(r.headers.get("Expires")).getTime()-n<42e4||function(t,e){if(void 0===et)try{new Response(new ReadableStream),et=!0}catch(t){et=!1}et?e(t.body):t.blob().then(e)}(e,(function(e){var n=new a.Response(e,r);ct(),tt&&tt.then((function(e){return e.put(lt(t.url),n)}))["catch"]((function(t){return E(t.message)}))})))}}(i,r,u),o=!0,e(null,t,n.headers.get("Cache-Control"),n.headers.get("Expires")))}))["catch"]((function(t){s||e(new Error(t.message))}))};return u?function(t,e){if(ct(),!tt)return e(null);var n=lt(t.url);tt.then((function(t){t.match(n).then((function(r){var i=function(t){if(!t)return!1;var e=new Date(t.headers.get("Expires")||0),n=O(t.headers.get("Cache-Control")||"");return e>Date.now()&&!n["no-cache"]}(r);t["delete"](n),i&&t.put(n,r.clone()),e(null,r,i)}))["catch"](e)}))["catch"](e)}(i,c):c(null,null),{cancel:function(){s=!0,o||r.abort()}}}(t,e);if(T()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var n;return function(t,e){var n=new a.XMLHttpRequest;for(var r in n.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(n.responseType="arraybuffer"),t.headers)n.setRequestHeader(r,t.headers[r]);return"json"===t.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===t.credentials,n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var r=n.response;if("json"===t.type)try{r=JSON.parse(n.response)}catch(t){return e(t)}e(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else e(new gt(n.statusText,n.status,t.url))},n.send(t.body),{cancel:function(){return n.abort()}}}(t,e)},_t=function(t,e){return bt(p(t,{type:"arrayBuffer"}),e)},xt=function(t,e){return bt(p(t,{method:"POST"}),e)},wt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";vt=[],mt=0;var Et=function t(e,n){if(B.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),mt>=z.MAX_PARALLEL_IMAGE_REQUESTS){var r={requestParameters:e,callback:n,cancelled:!1,cancel:function(){this.cancelled=!0}};return vt.push(r),r}mt++;var i=!1,o=function(){if(!i)for(i=!0,mt--;vt.length&&mt<z.MAX_PARALLEL_IMAGE_REQUESTS;){var e=vt.shift();e.cancelled||(e.cancel=t(e.requestParameters,e.callback).cancel)}},s=_t(e,(function(t,e,r,i){o(),t?n(t):e&&(ht()?function(t,e){var n=new a.Blob([new Uint8Array(t)],{type:"image/png"});a.createImageBitmap(n).then((function(t){e(null,t)}))["catch"]((function(t){e(new Error("Could not load image because of "+t.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}))}(e,n):function(t,e,n,r){var i=new a.Image,o=a.URL;i.onload=function(){e(null,i),o.revokeObjectURL(i.src),i.onload=null,a.requestAnimationFrame((function(){i.src=wt}))},i.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var s=new a.Blob([new Uint8Array(t)],{type:"image/png"});i.cacheControl=n,i.expires=r,i.src=t.byteLength?o.createObjectURL(s):wt}(e,n,r,i))}));return{cancel:function(){s.cancel(),o()}}};function St(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function Ct(t,e,n){if(n&&n[t]){var r=n[t].indexOf(e);-1!==r&&n[t].splice(r,1)}}var Tt=function(t,e){void 0===e&&(e={}),p(this,e),this.type=t},Ot=function(t){function e(e,n){void 0===n&&(n={}),t.call(this,"error",p({error:e},n))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Tt),At=function(){};At.prototype.on=function(t,e){return this._listeners=this._listeners||{},St(t,e,this._listeners),this},At.prototype.off=function(t,e){return Ct(t,e,this._listeners),Ct(t,e,this._oneTimeListeners),this},At.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},St(t,e,this._oneTimeListeners),this},At.prototype.fire=function(t,e){"string"==typeof t&&(t=new Tt(t,e||{}));var n=t.type;if(this.listens(n)){t.target=this;for(var r=0,i=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];r<i.length;r+=1)i[r].call(this,t);for(var o=0,a=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];o<a.length;o+=1){var s=a[o];Ct(n,s,this._oneTimeListeners),s.call(this,t)}var u=this._eventedParent;u&&(p(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),u.fire(t))}else t instanceof Ot&&console.error(t.error);return this},At.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},At.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var kt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Mt=function(t,e,n,r){this.message=(t?t+": ":"")+n,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)};function Pt(t){var e=t.value;return e?[new Mt(t.key,e,"constants have been deprecated as of v8")]:[]}function It(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t}function Lt(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Rt(t){if(Array.isArray(t))return t.map(Rt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var n in t)e[n]=Rt(t[n]);return e}return Lt(t)}var Dt=function(t){function e(e,n){t.call(this,n),this.message=n,this.key=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),Nt=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var n=0,r=e;n<r.length;n+=1){var i=r[n];this.bindings[i[0]]=i[1]}};Nt.prototype.concat=function(t){return new Nt(this,t)},Nt.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},Nt.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var jt={kind:"null"},Ft={kind:"number"},zt={kind:"string"},Bt={kind:"boolean"},Ut={kind:"color"},Vt={kind:"object"},qt={kind:"value"},Gt={kind:"collator"},Ht={kind:"formatted"},Wt={kind:"resolvedImage"};function Xt(t,e){return{kind:"array",itemType:t,N:e}}function Zt(t){if("array"===t.kind){var e=Zt(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var Yt=[jt,Ft,zt,Bt,Ut,Ht,Vt,Xt(qt),Wt];function Kt(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Kt(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var n=0,r=Yt;n<r.length;n+=1)if(!Kt(r[n],e))return null}return"Expected "+Zt(t)+" but found "+Zt(e)+" instead."}function Jt(t,e){return e.some((function(e){return e.kind===t.kind}))}function Qt(t,e){return e.some((function(e){return"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t}))}var $t=e((function(t,e){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(t){return(t=Math.round(t))<0?0:t>255?255:t}function i(t){return r("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function o(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function a(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{e.parseCSSColor=function(t){var e,s=t.replace(/ /g,"").toLowerCase();if(s in n)return n[s].slice();if("#"===s[0])return 4===s.length?(e=parseInt(s.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===s.length&&(e=parseInt(s.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=s.indexOf("("),c=s.indexOf(")");if(-1!==u&&c+1===s.length){var l=s.substr(0,u),f=s.substr(u+1,c-(u+1)).split(","),p=1;switch(l){case"rgba":if(4!==f.length)return null;p=o(f.pop());case"rgb":return 3!==f.length?null:[i(f[0]),i(f[1]),i(f[2]),p];case"hsla":if(4!==f.length)return null;p=o(f.pop());case"hsl":if(3!==f.length)return null;var h=(parseFloat(f[0])%360+360)%360/360,d=o(f[1]),v=o(f[2]),m=v<=.5?v*(d+1):v+d-v*d,g=2*v-m;return[r(255*a(g,m,h+1/3)),r(255*a(g,m,h)),r(255*a(g,m,h-1/3)),p];default:return null}}return null}}catch(t){}})).parseCSSColor,te=function(t,e,n,r){void 0===r&&(r=1),this.r=t,this.g=e,this.b=n,this.a=r};te.parse=function(t){if(t){if(t instanceof te)return t;if("string"==typeof t){var e=$t(t);if(e)return new te(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},te.prototype.toString=function(){var t=this.toArray(),e=t[1],n=t[2],r=t[3];return"rgba("+Math.round(t[0])+","+Math.round(e)+","+Math.round(n)+","+r+")"},te.prototype.toArray=function(){var t=this.a;return 0===t?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]},te.black=new te(0,0,0,1),te.white=new te(1,1,1,1),te.transparent=new te(0,0,0,0),te.red=new te(1,0,0,1);var ee=function(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};ee.prototype.compare=function(t,e){return this.collator.compare(t,e)},ee.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var ne=function(t,e,n,r,i){this.text=t,this.image=e,this.scale=n,this.fontStack=r,this.textColor=i},re=function(t){this.sections=t};re.fromString=function(t){return new re([new ne(t,null,null,null,null)])},re.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some((function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length}))},re.factory=function(t){return t instanceof re?t:re.fromString(t)},re.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map((function(t){return t.text})).join("")},re.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var r=n[e];if(r.image)t.push(["image",r.image.name]);else{t.push(r.text);var i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),r.textColor&&(i["text-color"]=["rgba"].concat(r.textColor.toArray())),t.push(i)}}return t};var ie=function(t){this.name=t.name,this.available=t.available};function oe(t,e,n,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[t,e,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ae(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof te)return!0;if(t instanceof ee)return!0;if(t instanceof re)return!0;if(t instanceof ie)return!0;if(Array.isArray(t)){for(var e=0,n=t;e<n.length;e+=1)if(!ae(n[e]))return!1;return!0}if("object"==typeof t){for(var r in t)if(!ae(t[r]))return!1;return!0}return!1}function se(t){if(null===t)return jt;if("string"==typeof t)return zt;if("boolean"==typeof t)return Bt;if("number"==typeof t)return Ft;if(t instanceof te)return Ut;if(t instanceof ee)return Gt;if(t instanceof re)return Ht;if(t instanceof ie)return Wt;if(Array.isArray(t)){for(var e,n=t.length,r=0,i=t;r<i.length;r+=1){var o=se(i[r]);if(e){if(e===o)continue;e=qt;break}e=o}return Xt(e||qt,n)}return Vt}function ue(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof te||t instanceof re||t instanceof ie?t.toString():JSON.stringify(t)}ie.prototype.toString=function(){return this.name},ie.fromString=function(t){return t?new ie({name:t,available:!1}):null},ie.prototype.serialize=function(){return["image",this.name]};var ce=function(t,e){this.type=t,this.value=e};ce.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!ae(t[1]))return e.error("invalid value");var n=t[1],r=se(n),i=e.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new ce(r,n)},ce.prototype.evaluate=function(){return this.value},ce.prototype.eachChild=function(){},ce.prototype.outputDefined=function(){return!0},ce.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof te?["rgba"].concat(this.value.toArray()):this.value instanceof re?this.value.serialize():this.value};var le=function(t){this.name="ExpressionEvaluationError",this.message=t};le.prototype.toJSON=function(){return this.message};var fe={string:zt,number:Ft,boolean:Bt,object:Vt},pe=function(t,e){this.type=t,this.args=e};pe.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n,r=1,i=t[0];if("array"===i){var o,a;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in fe)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);o=fe[s],r++}else o=qt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],r++}n=Xt(o,a)}else n=fe[i];for(var u=[];r<t.length;r++){var c=e.parse(t[r],r,qt);if(!c)return null;u.push(c)}return new pe(n,u)},pe.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var n=this.args[e].evaluate(t);if(!Kt(this.type,se(n)))return n;if(e===this.args.length-1)throw new le("Expected value to be of type "+Zt(this.type)+", but found "+Zt(se(n))+" instead.")}return null},pe.prototype.eachChild=function(t){this.args.forEach(t)},pe.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},pe.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);var r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map((function(t){return t.serialize()})))};var he=function(t){this.type=Ht,this.sections=t};he.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return e.error("First argument must be an image or text section.");for(var r=[],i=!1,o=1;o<=t.length-1;++o){var a=t[o];if(i&&"object"==typeof a&&!Array.isArray(a)){i=!1;var s=null;if(a["font-scale"]&&!(s=e.parse(a["font-scale"],1,Ft)))return null;var u=null;if(a["text-font"]&&!(u=e.parse(a["text-font"],1,Xt(zt))))return null;var c=null;if(a["text-color"]&&!(c=e.parse(a["text-color"],1,Ut)))return null;var l=r[r.length-1];l.scale=s,l.font=u,l.textColor=c}else{var f=e.parse(t[o],1,qt);if(!f)return null;var p=f.type.kind;if("string"!==p&&"value"!==p&&"null"!==p&&"resolvedImage"!==p)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:f,scale:null,font:null,textColor:null})}}return new he(r)},he.prototype.evaluate=function(t){return new re(this.sections.map((function(e){var n=e.content.evaluate(t);return se(n)===Wt?new ne("",n,null,null,null):new ne(ue(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))},he.prototype.eachChild=function(t){for(var e=0,n=this.sections;e<n.length;e+=1){var r=n[e];t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}},he.prototype.outputDefined=function(){return!1},he.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var r=n[e];t.push(r.content.serialize());var i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),r.textColor&&(i["text-color"]=r.textColor.serialize()),t.push(i)}return t};var de=function(t){this.type=Wt,this.input=t};de.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var n=e.parse(t[1],1,zt);return n?new de(n):e.error("No image name provided.")},de.prototype.evaluate=function(t){var e=this.input.evaluate(t),n=ie.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n},de.prototype.eachChild=function(t){t(this.input)},de.prototype.outputDefined=function(){return!1},de.prototype.serialize=function(){return["image",this.input.serialize()]};var ve={"to-boolean":Bt,"to-color":Ut,"to-number":Ft,"to-string":zt},me=function(t,e){this.type=t,this.args=e};me.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");for(var r=ve[n],i=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,qt);if(!a)return null;i.push(a)}return new me(r,i)},me.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,n,r=0,i=this.args;r<i.length;r+=1){if(n=null,(e=i[r].evaluate(t))instanceof te)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(n=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":oe(e[0],e[1],e[2],e[3])))return new te(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new le(n||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var a=null,s=0,u=this.args;s<u.length;s+=1){if(null===(a=u[s].evaluate(t)))return 0;var c=Number(a);if(!isNaN(c))return c}throw new le("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?re.fromString(ue(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?ie.fromString(ue(this.args[0].evaluate(t))):ue(this.args[0].evaluate(t))},me.prototype.eachChild=function(t){this.args.forEach(t)},me.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},me.prototype.serialize=function(){if("formatted"===this.type.kind)return new he([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new de(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild((function(e){t.push(e.serialize())})),t};var ge=["Unknown","Point","LineString","Polygon"],ye=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ye.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ye.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?ge[this.feature.type]:this.feature.type:null},ye.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ye.prototype.canonicalID=function(){return this.canonical},ye.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ye.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=te.parse(t)),e};var be=function(t,e,n,r){this.name=t,this.type=e,this._evaluate=n,this.args=r};be.prototype.evaluate=function(t){return this._evaluate(t,this.args)},be.prototype.eachChild=function(t){this.args.forEach(t)},be.prototype.outputDefined=function(){return!1},be.prototype.serialize=function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))},be.parse=function(t,e){var n,r=t[0],i=be.definitions[r];if(!i)return e.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=a.filter((function(e){var n=e[0];return!Array.isArray(n)||n.length===t.length-1})),u=null,c=0,l=s;c<l.length;c+=1){var f=l[c],p=f[0],h=f[1];u=new Ue(e.registry,e.path,null,e.scope);for(var d=[],v=!1,m=1;m<t.length;m++){var g=t[m],y=Array.isArray(p)?p[m-1]:p.type,b=u.parse(g,1+d.length,y);if(!b){v=!0;break}d.push(b)}if(!v)if(Array.isArray(p)&&p.length!==d.length)u.error("Expected "+p.length+" arguments, but found "+d.length+" instead.");else{for(var _=0;_<d.length;_++){var x=Array.isArray(p)?p[_]:p.type,w=d[_];u.concat(_+1).checkSubtype(x,w.type)}if(0===u.errors.length)return new be(r,o,h,d)}}if(1===s.length)(n=e.errors).push.apply(n,u.errors);else{for(var E=(s.length?s:a).map((function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(Zt).join(", ")+")":"("+Zt(e.type)+"...)"})).join(" | "),S=[],C=1;C<t.length;C++){var T=e.parse(t[C],1+S.length);if(!T)return null;S.push(Zt(T.type))}e.error("Expected arguments of type "+E+", but found ("+S.join(", ")+") instead.")}return null},be.register=function(t,e){for(var n in be.definitions=e,e)t[n]=be};var _e=function(t,e,n){this.type=Gt,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e};function xe(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function we(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Ee(t,e){var n=(180+t[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,i=Math.pow(2,e.z);return[Math.round(n*i*8192),Math.round(r*i*8192)]}function Se(t,e,n){return e[1]>t[1]!=n[1]>t[1]&&t[0]<(n[0]-e[0])*(t[1]-e[1])/(n[1]-e[1])+e[0]}function Ce(t,e){for(var n,r,i,o,a,s,u,c=!1,l=0,f=e.length;l<f;l++)for(var p=e[l],h=0,d=p.length;h<d-1;h++){if((o=(n=t)[0]-(r=p[h])[0])*(u=n[1]-(i=p[h+1])[1])-(s=n[0]-i[0])*(a=n[1]-r[1])==0&&o*s<=0&&a*u<=0)return!1;Se(t,p[h],p[h+1])&&(c=!c)}return c}function Te(t,e){for(var n=0;n<e.length;n++)if(Ce(t,e[n]))return!0;return!1}function Oe(t,e,n,r){var i=r[0]-n[0],o=r[1]-n[1],a=(t[0]-n[0])*o-i*(t[1]-n[1]),s=(e[0]-n[0])*o-i*(e[1]-n[1]);return a>0&&s<0||a<0&&s>0}function Ae(t,e,n){for(var r=0,i=n;r<i.length;r+=1)for(var o=i[r],a=0;a<o.length-1;++a)if(0!=(f=[(l=o[a+1])[0]-(c=o[a])[0],l[1]-c[1]])[0]*(p=[(u=e)[0]-(s=t)[0],u[1]-s[1]])[1]-f[1]*p[0]&&Oe(s,u,c,l)&&Oe(c,l,s,u))return!0;var s,u,c,l,f,p;return!1}function ke(t,e){for(var n=0;n<t.length;++n)if(!Ce(t[n],e))return!1;for(var r=0;r<t.length-1;++r)if(Ae(t[r],t[r+1],e))return!1;return!0}function Me(t,e){for(var n=0;n<e.length;n++)if(ke(t,e[n]))return!0;return!1}function Pe(t,e,n){for(var r=[],i=0;i<t.length;i++){for(var o=[],a=0;a<t[i].length;a++){var s=Ee(t[i][a],n);xe(e,s),o.push(s)}r.push(o)}return r}function Ie(t,e,n){for(var r=[],i=0;i<t.length;i++){var o=Pe(t[i],e,n);r.push(o)}return r}function Le(t,e,n,r){if(t[0]<n[0]||t[0]>n[2]){var i=.5*r,o=t[0]-n[0]>i?-r:n[0]-t[0]>i?r:0;0===o&&(o=t[0]-n[2]>i?-r:n[2]-t[0]>i?r:0),t[0]+=o}xe(e,t)}function Re(t,e,n,r){for(var i=8192*Math.pow(2,r.z),o=[8192*r.x,8192*r.y],a=[],s=0,u=t;s<u.length;s+=1)for(var c=0,l=u[s];c<l.length;c+=1){var f=l[c],p=[f.x+o[0],f.y+o[1]];Le(p,e,n,i),a.push(p)}return a}function De(t,e,n,r){for(var i,o=8192*Math.pow(2,r.z),a=[8192*r.x,8192*r.y],s=[],u=0,c=t;u<c.length;u+=1){for(var l=[],f=0,p=c[u];f<p.length;f+=1){var h=p[f],d=[h.x+a[0],h.y+a[1]];xe(e,d),l.push(d)}s.push(l)}if(e[2]-e[0]<=o/2){(i=e)[0]=i[1]=1/0,i[2]=i[3]=-1/0;for(var v=0,m=s;v<m.length;v+=1)for(var g=0,y=m[v];g<y.length;g+=1)Le(y[g],e,n,o)}return s}_e.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");var r=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,Bt);if(!r)return null;var i=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,Bt);if(!i)return null;var o=null;return n.locale&&!(o=e.parse(n.locale,1,zt))?null:new _e(r,i,o)},_e.prototype.evaluate=function(t){return new ee(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},_e.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},_e.prototype.outputDefined=function(){return!1},_e.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Ne=function(t,e){this.type=Bt,this.geojson=t,this.geometries=e};function je(t){if(t instanceof be){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Ne)return!1;var e=!0;return t.eachChild((function(t){e&&!je(t)&&(e=!1)})),e}function Fe(t){if(t instanceof be&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild((function(t){e&&!Fe(t)&&(e=!1)})),e}function ze(t,e){if(t instanceof be&&e.indexOf(t.name)>=0)return!1;var n=!0;return t.eachChild((function(t){n&&!ze(t,e)&&(n=!1)})),n}Ne.parse=function(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(ae(t[1])){var n=t[1];if("FeatureCollection"===n.type)for(var r=0;r<n.features.length;++r){var i=n.features[r].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new Ne(n,n.features[r].geometry)}else if("Feature"===n.type){var o=n.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new Ne(n,n.geometry)}else if("Polygon"===n.type||"MultiPolygon"===n.type)return new Ne(n,n)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Ne.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){var o=Pe(e.coordinates,r,i),a=Re(t.geometry(),n,r,i);if(!we(n,r))return!1;for(var s=0,u=a;s<u.length;s+=1)if(!Ce(u[s],o))return!1}if("MultiPolygon"===e.type){var c=Ie(e.coordinates,r,i),l=Re(t.geometry(),n,r,i);if(!we(n,r))return!1;for(var f=0,p=l;f<p.length;f+=1)if(!Te(p[f],c))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){var o=Pe(e.coordinates,r,i),a=De(t.geometry(),n,r,i);if(!we(n,r))return!1;for(var s=0,u=a;s<u.length;s+=1)if(!ke(u[s],o))return!1}if("MultiPolygon"===e.type){var c=Ie(e.coordinates,r,i),l=De(t.geometry(),n,r,i);if(!we(n,r))return!1;for(var f=0,p=l;f<p.length;f+=1)if(!Me(p[f],c))return!1}return!0}(t,this.geometries)}return!1},Ne.prototype.eachChild=function(){},Ne.prototype.outputDefined=function(){return!0},Ne.prototype.serialize=function(){return["within",this.geojson]};var Be=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};Be.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var n=t[1];return e.scope.has(n)?new Be(n,e.scope.get(n)):e.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},Be.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},Be.prototype.eachChild=function(){},Be.prototype.outputDefined=function(){return!1},Be.prototype.serialize=function(){return["var",this.name]};var Ue=function(t,e,n,r,i){void 0===e&&(e=[]),void 0===r&&(r=new Nt),void 0===i&&(i=[]),this.registry=t,this.path=e,this.key=e.map((function(t){return"["+t+"]"})).join(""),this.scope=r,this.errors=i,this.expectedType=n};function Ve(t,e){for(var n,r=t.length-1,i=0,o=r,a=0;i<=o;)if((n=t[a=Math.floor((i+o)/2)])<=e){if(a===r||e<t[a+1])return a;i=a+1}else{if(!(n>e))throw new le("Input is not a number.");o=a-1}return 0}Ue.prototype.parse=function(t,e,n,r,i){return void 0===i&&(i={}),e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)},Ue.prototype._parse=function(t,e){function n(t,e,n){return"assert"===n?new pe(e,[t]):"coerce"===n?new me(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+typeof r+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[r];if(i){var o=i.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=n(o,a,e.typeAnnotation||"coerce");else o=n(o,a,e.typeAnnotation||"assert")}if(!(o instanceof ce)&&"resolvedImage"!==o.type.kind&&function t(e){if(e instanceof Be)return t(e.boundExpression);if(e instanceof be&&"error"===e.name)return!1;if(e instanceof _e)return!1;if(e instanceof Ne)return!1;var n=e instanceof me||e instanceof pe,r=!0;return e.eachChild((function(e){r=n?r&&t(e):r&&e instanceof ce})),!!r&&je(e)&&ze(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(o)){var u=new ye;try{o=new ce(o.type,o.evaluate(u))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},Ue.prototype.concat=function(t,e,n){var r="number"==typeof t?this.path.concat(t):this.path,i=n?this.scope.concat(n):this.scope;return new Ue(this.registry,r,e||null,i,this.errors)},Ue.prototype.error=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var r=""+this.key+e.map((function(t){return"["+t+"]"})).join("");this.errors.push(new Dt(r,t))},Ue.prototype.checkSubtype=function(t,e){var n=Kt(t,e);return n&&this.error(n),n};var qe=function(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var r=0,i=n;r<i.length;r+=1){var o=i[r],a=o[1];this.labels.push(o[0]),this.outputs.push(a)}};function Ge(t,e,n){return t*(1-n)+e*n}qe.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var n=e.parse(t[1],1,Ft);if(!n)return null;var r=[],i=null;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var o=1;o<t.length;o+=2){var a=1===o?-1/0:t[o],s=t[o+1],u=o,c=o+1;if("number"!=typeof a)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(r.length&&r[r.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var l=e.parse(s,c,i);if(!l)return null;i=i||l.type,r.push([a,l])}return new qe(i,n,r)},qe.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[Ve(e,r)].evaluate(t)},qe.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},qe.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},qe.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var He=Object.freeze({__proto__:null,number:Ge,color:function(t,e,n){return new te(Ge(t.r,e.r,n),Ge(t.g,e.g,n),Ge(t.b,e.b,n),Ge(t.a,e.a,n))},array:function(t,e,n){return t.map((function(t,r){return Ge(t,e[r],n)}))}}),We=6/29*3*(6/29),Xe=Math.PI/180,Ze=180/Math.PI;function Ye(t){return t>.008856451679035631?Math.pow(t,1/3):t/We+4/29}function Ke(t){return t>6/29?t*t*t:We*(t-4/29)}function Je(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Qe(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function $e(t){var e=Qe(t.r),n=Qe(t.g),r=Qe(t.b),i=Ye((.4124564*e+.3575761*n+.1804375*r)/.95047),o=Ye((.2126729*e+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-Ye((.0193339*e+.119192*n+.9503041*r)/1.08883)),alpha:t.a}}function tn(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=1*Ke(e),n=.95047*Ke(n),r=1.08883*Ke(r),new te(Je(3.2404542*n-1.5371385*e-.4985314*r),Je(-.969266*n+1.8760108*e+.041556*r),Je(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}function en(t,e,n){var r=e-t;return t+n*(r>180||r<-180?r-360*Math.round(r/360):r)}var nn={forward:$e,reverse:tn,interpolate:function(t,e,n){return{l:Ge(t.l,e.l,n),a:Ge(t.a,e.a,n),b:Ge(t.b,e.b,n),alpha:Ge(t.alpha,e.alpha,n)}}},rn={forward:function(t){var e=$e(t),n=e.l,r=e.a,i=e.b,o=Math.atan2(i,r)*Ze;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:n,alpha:t.a}},reverse:function(t){var e=t.h*Xe,n=t.c;return tn({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:en(t.h,e.h,n),c:Ge(t.c,e.c,n),l:Ge(t.l,e.l,n),alpha:Ge(t.alpha,e.alpha,n)}}},on=Object.freeze({__proto__:null,lab:nn,hcl:rn}),an=function(t,e,n,r,i){this.type=t,this.operator=e,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(var o=0,a=i;o<a.length;o+=1){var s=a[o],u=s[1];this.labels.push(s[0]),this.outputs.push(u)}};function sn(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}an.interpolationFactor=function(t,e,r,i){var o=0;if("exponential"===t.name)o=sn(e,t.base,r,i);else if("linear"===t.name)o=sn(e,1,r,i);else if("cubic-bezier"===t.name){var a=t.controlPoints;o=new n(a[0],a[1],a[2],a[3]).solve(sn(e,1,r,i))}return o},an.parse=function(t,e){var n=t[0],r=t[1],i=t[2],o=t.slice(3);if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var a=r[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:a}}else{if("cubic-bezier"!==r[0])return e.error("Unknown interpolation type "+String(r[0]),1,0);var s=r.slice(1);if(4!==s.length||s.some((function(t){return"number"!=typeof t||t<0||t>1})))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(i=e.parse(i,2,Ft)))return null;var u=[],c=null;"interpolate-hcl"===n||"interpolate-lab"===n?c=Ut:e.expectedType&&"value"!==e.expectedType.kind&&(c=e.expectedType);for(var l=0;l<o.length;l+=2){var f=o[l],p=o[l+1],h=l+3,d=l+4;if("number"!=typeof f)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(u.length&&u[u.length-1][0]>=f)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',h);var v=e.parse(p,d,c);if(!v)return null;c=c||v.type,u.push([f,v])}return"number"===c.kind||"color"===c.kind||"array"===c.kind&&"number"===c.itemType.kind&&"number"==typeof c.N?new an(c,n,r,i,u):e.error("Type "+Zt(c)+" is not interpolatable.")},an.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;if(r>=e[i-1])return n[i-1].evaluate(t);var o=Ve(e,r),a=an.interpolationFactor(this.interpolation,r,e[o],e[o+1]),s=n[o].evaluate(t),u=n[o+1].evaluate(t);return"interpolate"===this.operator?He[this.type.kind.toLowerCase()](s,u,a):"interpolate-hcl"===this.operator?rn.reverse(rn.interpolate(rn.forward(s),rn.forward(u),a)):nn.reverse(nn.interpolate(nn.forward(s),nn.forward(u),a))},an.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},an.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},an.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e};var un=function(t,e){this.type=t,this.args=e};un.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var n=null,r=e.expectedType;r&&"value"!==r.kind&&(n=r);for(var i=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=e.parse(a[o],1+i.length,n,void 0,{typeAnnotation:"omit"});if(!s)return null;n=n||s.type,i.push(s)}var u=r&&i.some((function(t){return Kt(r,t.type)}));return new un(u?qt:n,i)},un.prototype.evaluate=function(t){for(var e,n=null,r=0,i=0,o=this.args;i<o.length&&(r++,(n=o[i].evaluate(t))&&n instanceof ie&&!n.available&&(e||(e=n.name),n=null,r===this.args.length&&(n=e)),null===n);i+=1);return n},un.prototype.eachChild=function(t){this.args.forEach(t)},un.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},un.prototype.serialize=function(){var t=["coalesce"];return this.eachChild((function(e){t.push(e.serialize())})),t};var cn=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};cn.prototype.evaluate=function(t){return this.result.evaluate(t)},cn.prototype.eachChild=function(t){for(var e=0,n=this.bindings;e<n.length;e+=1)t(n[e][1]);t(this.result)},cn.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var n=[],r=1;r<t.length-1;r+=2){var i=t[r];if("string"!=typeof i)return e.error("Expected string, but found "+typeof i+" instead.",r);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=e.parse(t[r+1],r+1);if(!o)return null;n.push([i,o])}var a=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return a?new cn(n,a):null},cn.prototype.outputDefined=function(){return this.result.outputDefined()},cn.prototype.serialize=function(){for(var t=["let"],e=0,n=this.bindings;e<n.length;e+=1){var r=n[e];t.push(r[0],r[1].serialize())}return t.push(this.result.serialize()),t};var ln=function(t,e,n){this.type=t,this.index=e,this.input=n};ln.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,Ft),r=e.parse(t[2],2,Xt(e.expectedType||qt));return n&&r?new ln(r.type.itemType,n,r):null},ln.prototype.evaluate=function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new le("Array index out of bounds: "+e+" < 0.");if(e>=n.length)throw new le("Array index out of bounds: "+e+" > "+(n.length-1)+".");if(e!==Math.floor(e))throw new le("Array index must be an integer, but found "+e+" instead.");return n[e]},ln.prototype.eachChild=function(t){t(this.index),t(this.input)},ln.prototype.outputDefined=function(){return!1},ln.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var fn=function(t,e){this.type=Bt,this.needle=t,this.haystack=e};fn.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,qt),r=e.parse(t[2],2,qt);return n&&r?Jt(n.type,[Bt,zt,Ft,jt,qt])?new fn(n,r):e.error("Expected first argument to be of type boolean, string, number or null, but found "+Zt(n.type)+" instead"):null},fn.prototype.evaluate=function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!n)return!1;if(!Qt(e,["boolean","string","number","null"]))throw new le("Expected first argument to be of type boolean, string, number or null, but found "+Zt(se(e))+" instead.");if(!Qt(n,["string","array"]))throw new le("Expected second argument to be of type array or string, but found "+Zt(se(n))+" instead.");return n.indexOf(e)>=0},fn.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},fn.prototype.outputDefined=function(){return!0},fn.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var pn=function(t,e,n){this.type=Ft,this.needle=t,this.haystack=e,this.fromIndex=n};pn.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,qt),r=e.parse(t[2],2,qt);if(!n||!r)return null;if(!Jt(n.type,[Bt,zt,Ft,jt,qt]))return e.error("Expected first argument to be of type boolean, string, number or null, but found "+Zt(n.type)+" instead");if(4===t.length){var i=e.parse(t[3],3,Ft);return i?new pn(n,r,i):null}return new pn(n,r)},pn.prototype.evaluate=function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!Qt(e,["boolean","string","number","null"]))throw new le("Expected first argument to be of type boolean, string, number or null, but found "+Zt(se(e))+" instead.");if(!Qt(n,["string","array"]))throw new le("Expected second argument to be of type array or string, but found "+Zt(se(n))+" instead.");if(this.fromIndex){var r=this.fromIndex.evaluate(t);return n.indexOf(e,r)}return n.indexOf(e)},pn.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)},pn.prototype.outputDefined=function(){return!1},pn.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var hn=function(t,e,n,r,i,o){this.inputType=t,this.type=e,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o};hn.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var n,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var i={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],u=t[a+1];Array.isArray(s)||(s=[s]);var c=e.concat(a);if(0===s.length)return c.error("Expected at least one branch label.");for(var l=0,f=s;l<f.length;l+=1){var p=f[l];if("number"!=typeof p&&"string"!=typeof p)return c.error("Branch labels must be numbers or strings.");if("number"==typeof p&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof p&&Math.floor(p)!==p)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,se(p)))return null}else n=se(p);if(void 0!==i[String(p)])return c.error("Branch labels must be unique.");i[String(p)]=o.length}var h=e.parse(u,a,r);if(!h)return null;r=r||h.type,o.push(h)}var d=e.parse(t[1],1,qt);if(!d)return null;var v=e.parse(t[t.length-1],t.length-1,r);return v?"value"!==d.type.kind&&e.concat(1).checkSubtype(n,d.type)?null:new hn(n,r,d,i,o,v):null},hn.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(se(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},hn.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},hn.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))&&this.otherwise.outputDefined()},hn.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],n=[],r={},i=0,o=Object.keys(this.cases).sort();i<o.length;i+=1){var a=o[i];void 0===(f=r[this.cases[a]])?(r[this.cases[a]]=n.length,n.push([this.cases[a],[a]])):n[f][1].push(a)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},u=0,c=n;u<c.length;u+=1){var l=c[u],f=l[0],p=l[1];e.push(1===p.length?s(p[0]):p.map(s)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var dn=function(t,e,n){this.type=t,this.branches=e,this.otherwise=n};dn.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var r=[],i=1;i<t.length-1;i+=2){var o=e.parse(t[i],i,Bt);if(!o)return null;var a=e.parse(t[i+1],i+1,n);if(!a)return null;r.push([o,a]),n=n||a.type}var s=e.parse(t[t.length-1],t.length-1,n);return s?new dn(n,r,s):null},dn.prototype.evaluate=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[1];if(r[0].evaluate(t))return i.evaluate(t)}return this.otherwise.evaluate(t)},dn.prototype.eachChild=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[1];t(r[0]),t(i)}t(this.otherwise)},dn.prototype.outputDefined=function(){return this.branches.every((function(t){return t[1].outputDefined()}))&&this.otherwise.outputDefined()},dn.prototype.serialize=function(){var t=["case"];return this.eachChild((function(e){t.push(e.serialize())})),t};var vn=function(t,e,n,r){this.type=t,this.input=e,this.beginIndex=n,this.endIndex=r};function mn(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function gn(t,e,n,r){return 0===r.compare(e,n)}function yn(t,e,n){var r="=="!==t&&"!="!==t;return function(){function i(t,e,n){this.type=Bt,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return i.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var n=t[0],o=e.parse(t[1],1,qt);if(!o)return null;if(!mn(n,o.type))return e.concat(1).error('"'+n+"\" comparisons are not supported for type '"+Zt(o.type)+"'.");var a=e.parse(t[2],2,qt);if(!a)return null;if(!mn(n,a.type))return e.concat(2).error('"'+n+"\" comparisons are not supported for type '"+Zt(a.type)+"'.");if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '"+Zt(o.type)+"' and '"+Zt(a.type)+"'.");r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new pe(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new pe(o.type,[a])));var s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,Gt)))return null}return new i(o,a,s)},i.prototype.evaluate=function(i){var o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){var s=se(o),u=se(a);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new le('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+u.kind+") instead.")}if(this.collator&&!r&&this.hasUntypedArgument){var c=se(o),l=se(a);if("string"!==c.kind||"string"!==l.kind)return e(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):e(i,o,a)},i.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},i.prototype.outputDefined=function(){return!0},i.prototype.serialize=function(){var e=[t];return this.eachChild((function(t){e.push(t.serialize())})),e},i}()}vn.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,qt),r=e.parse(t[2],2,Ft);if(!n||!r)return null;if(!Jt(n.type,[Xt(qt),zt,qt]))return e.error("Expected first argument to be of type array or string, but found "+Zt(n.type)+" instead");if(4===t.length){var i=e.parse(t[3],3,Ft);return i?new vn(n.type,n,r,i):null}return new vn(n.type,n,r)},vn.prototype.evaluate=function(t){var e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!Qt(e,["string","array"]))throw new le("Expected first argument to be of type array or string, but found "+Zt(se(e))+" instead.");if(this.endIndex){var r=this.endIndex.evaluate(t);return e.slice(n,r)}return e.slice(n)},vn.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)},vn.prototype.outputDefined=function(){return!1},vn.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var bn=yn("==",(function(t,e,n){return e===n}),gn),_n=yn("!=",(function(t,e,n){return e!==n}),(function(t,e,n,r){return!gn(0,e,n,r)})),xn=yn("<",(function(t,e,n){return e<n}),(function(t,e,n,r){return r.compare(e,n)<0})),wn=yn(">",(function(t,e,n){return e>n}),(function(t,e,n,r){return r.compare(e,n)>0})),En=yn("<=",(function(t,e,n){return e<=n}),(function(t,e,n,r){return r.compare(e,n)<=0})),Sn=yn(">=",(function(t,e,n){return e>=n}),(function(t,e,n,r){return r.compare(e,n)>=0})),Cn=function(t,e,n,r,i){this.type=zt,this.number=t,this.locale=e,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=i};Cn.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var n=e.parse(t[1],1,Ft);if(!n)return null;var r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");var i=null;if(r.locale&&!(i=e.parse(r.locale,1,zt)))return null;var o=null;if(r.currency&&!(o=e.parse(r.currency,1,zt)))return null;var a=null;if(r["min-fraction-digits"]&&!(a=e.parse(r["min-fraction-digits"],1,Ft)))return null;var s=null;return r["max-fraction-digits"]&&!(s=e.parse(r["max-fraction-digits"],1,Ft))?null:new Cn(n,i,o,a,s)},Cn.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},Cn.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},Cn.prototype.outputDefined=function(){return!1},Cn.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var Tn=function(t){this.type=Ft,this.input=t};Tn.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error("Expected argument of type string or array, but found "+Zt(n.type)+" instead."):new Tn(n):null},Tn.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new le("Expected value to be of type string or array, but found "+Zt(se(e))+" instead.")},Tn.prototype.eachChild=function(t){t(this.input)},Tn.prototype.outputDefined=function(){return!1},Tn.prototype.serialize=function(){var t=["length"];return this.eachChild((function(e){t.push(e.serialize())})),t};var On={"==":bn,"!=":_n,">":wn,"<":xn,">=":Sn,"<=":En,array:pe,at:ln,boolean:pe,case:dn,coalesce:un,collator:_e,format:he,image:de,in:fn,"index-of":pn,interpolate:an,"interpolate-hcl":an,"interpolate-lab":an,length:Tn,let:cn,literal:ce,match:hn,number:pe,"number-format":Cn,object:pe,slice:vn,step:qe,string:pe,"to-boolean":me,"to-color":me,"to-number":me,"to-string":me,var:Be,within:Ne};function An(t,e){var n=e[0],r=e[1],i=e[2],o=e[3];n=n.evaluate(t),r=r.evaluate(t),i=i.evaluate(t);var a=o?o.evaluate(t):1,s=oe(n,r,i,a);if(s)throw new le(s);return new te(n/255*a,r/255*a,i/255*a,a)}function kn(t,e){return t in e}function Mn(t,e){var n=e[t];return void 0===n?null:n}function Pn(t){return{type:t}}function In(t){return{result:"success",value:t}}function Ln(t){return{result:"error",value:t}}function Rn(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Dn(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Nn(t){return!!t.expression&&t.expression.interpolated}function jn(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Fn(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function zn(t){return t}function Bn(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function Un(t,e,n,r,i){return Bn(typeof n===i?r[n]:void 0,t["default"],e["default"])}function Vn(t,e,n){if("number"!==jn(n))return Bn(t["default"],e["default"]);var r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];var i=Ve(t.stops.map((function(t){return t[0]})),n);return t.stops[i][1]}function qn(t,e,n){var r=void 0!==t.base?t.base:1;if("number"!==jn(n))return Bn(t["default"],e["default"]);var i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];var o=Ve(t.stops.map((function(t){return t[0]})),n),a=function(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(n,r,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],u=t.stops[o+1][1],c=He[e.type]||zn;if(t.colorSpace&&"rgb"!==t.colorSpace){var l=on[t.colorSpace];c=function(t,e){return l.reverse(l.interpolate(l.forward(t),l.forward(e),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=s.evaluate.apply(void 0,t),r=u.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==r)return c(n,r,a)}}:c(s,u,a)}function Gn(t,e,n){return"color"===e.type?n=te.parse(n):"formatted"===e.type?n=re.fromString(n.toString()):"resolvedImage"===e.type?n=ie.fromString(n.toString()):jn(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),Bn(n,t["default"],e["default"])}be.register(On,{error:[{kind:"error"},[zt],function(t,e){throw new le(e[0].evaluate(t))}],typeof:[zt,[qt],function(t,e){return Zt(se(e[0].evaluate(t)))}],"to-rgba":[Xt(Ft,4),[Ut],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[Ut,[Ft,Ft,Ft],An],rgba:[Ut,[Ft,Ft,Ft,Ft],An],has:{type:Bt,overloads:[[[zt],function(t,e){return kn(e[0].evaluate(t),t.properties())}],[[zt,Vt],function(t,e){var n=e[1];return kn(e[0].evaluate(t),n.evaluate(t))}]]},get:{type:qt,overloads:[[[zt],function(t,e){return Mn(e[0].evaluate(t),t.properties())}],[[zt,Vt],function(t,e){var n=e[1];return Mn(e[0].evaluate(t),n.evaluate(t))}]]},"feature-state":[qt,[zt],function(t,e){return Mn(e[0].evaluate(t),t.featureState||{})}],properties:[Vt,[],function(t){return t.properties()}],"geometry-type":[zt,[],function(t){return t.geometryType()}],id:[qt,[],function(t){return t.id()}],zoom:[Ft,[],function(t){return t.globals.zoom}],"heatmap-density":[Ft,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[Ft,[],function(t){return t.globals.lineProgress||0}],accumulated:[qt,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[Ft,Pn(Ft),function(t,e){for(var n=0,r=0,i=e;r<i.length;r+=1)n+=i[r].evaluate(t);return n}],"*":[Ft,Pn(Ft),function(t,e){for(var n=1,r=0,i=e;r<i.length;r+=1)n*=i[r].evaluate(t);return n}],"-":{type:Ft,overloads:[[[Ft,Ft],function(t,e){var n=e[1];return e[0].evaluate(t)-n.evaluate(t)}],[[Ft],function(t,e){return-e[0].evaluate(t)}]]},"/":[Ft,[Ft,Ft],function(t,e){var n=e[1];return e[0].evaluate(t)/n.evaluate(t)}],"%":[Ft,[Ft,Ft],function(t,e){var n=e[1];return e[0].evaluate(t)%n.evaluate(t)}],ln2:[Ft,[],function(){return Math.LN2}],pi:[Ft,[],function(){return Math.PI}],e:[Ft,[],function(){return Math.E}],"^":[Ft,[Ft,Ft],function(t,e){var n=e[1];return Math.pow(e[0].evaluate(t),n.evaluate(t))}],sqrt:[Ft,[Ft],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[Ft,[Ft],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[Ft,[Ft],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[Ft,[Ft],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[Ft,[Ft],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[Ft,[Ft],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[Ft,[Ft],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[Ft,[Ft],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[Ft,[Ft],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[Ft,[Ft],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[Ft,Pn(Ft),function(t,e){return Math.min.apply(Math,e.map((function(e){return e.evaluate(t)})))}],max:[Ft,Pn(Ft),function(t,e){return Math.max.apply(Math,e.map((function(e){return e.evaluate(t)})))}],abs:[Ft,[Ft],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[Ft,[Ft],function(t,e){var n=e[0].evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[Ft,[Ft],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[Ft,[Ft],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-==":[Bt,[zt,qt],function(t,e){var n=e[0],r=e[1];return t.properties()[n.value]===r.value}],"filter-id-==":[Bt,[qt],function(t,e){var n=e[0];return t.id()===n.value}],"filter-type-==":[Bt,[zt],function(t,e){var n=e[0];return t.geometryType()===n.value}],"filter-<":[Bt,[zt,qt],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<o}],"filter-id-<":[Bt,[qt],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[Bt,[zt,qt],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>o}],"filter-id->":[Bt,[qt],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[Bt,[zt,qt],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[Bt,[qt],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[Bt,[zt,qt],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>=o}],"filter-id->=":[Bt,[qt],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[Bt,[qt],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[Bt,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[Bt,[Xt(zt)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[Bt,[Xt(qt)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[Bt,[zt,Xt(qt)],function(t,e){var n=e[0];return e[1].value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[Bt,[zt,Xt(qt)],function(t,e){var n=e[0],r=e[1];return function(t,e,n,r){for(;n<=r;){var i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[n.value],r.value,0,r.value.length-1)}],all:{type:Bt,overloads:[[[Bt,Bt],function(t,e){var n=e[1];return e[0].evaluate(t)&&n.evaluate(t)}],[Pn(Bt),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(!r[n].evaluate(t))return!1;return!0}]]},any:{type:Bt,overloads:[[[Bt,Bt],function(t,e){var n=e[1];return e[0].evaluate(t)||n.evaluate(t)}],[Pn(Bt),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(r[n].evaluate(t))return!0;return!1}]]},"!":[Bt,[Bt],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[Bt,[zt],function(t,e){var n=t.globals&&t.globals.isSupportedScript;return!n||n(e[0].evaluate(t))}],upcase:[zt,[zt],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[zt,[zt],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[zt,Pn(qt),function(t,e){return e.map((function(e){return ue(e.evaluate(t))})).join("")}],"resolved-locale":[zt,[Gt],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var Hn=function(t,e){this.expression=t,this._warningHistory={},this._evaluator=new ye,this._defaultValue=e?function(t){return"color"===t.type&&Fn(t["default"])?new te(0,0,0,0):"color"===t.type?te.parse(t["default"])||null:void 0===t["default"]?null:t["default"]}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null};function Wn(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in On}function Xn(t,e){var n=new Ue(On,[],e?function(t){var e={color:Ut,string:zt,number:Ft,enum:zt,boolean:Bt,formatted:Ht,resolvedImage:Wt};return"array"===t.type?Xt(e[t.value]||qt,t.length):e[t.type]}(e):void 0),r=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?In(new Hn(r,e)):Ln(n.errors)}Hn.prototype.evaluateWithoutErrorHandling=function(t,e,n,r,i,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)},Hn.prototype.evaluate=function(t,e,n,r,i,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new le("Expected value to be one of "+Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var Zn=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!Fe(e.expression)};Zn.prototype.evaluateWithoutErrorHandling=function(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)},Zn.prototype.evaluate=function(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)};var Yn=function(t,e,n,r){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!Fe(e.expression),this.interpolationType=r};function Kn(t,e){if("error"===(t=Xn(t,e)).result)return t;var n=t.value.expression,r=je(n);if(!r&&!Rn(e))return Ln([new Dt("","data expressions not supported")]);var i=ze(n,["zoom"]);if(!i&&!Dn(e))return Ln([new Dt("","zoom expressions not supported")]);var o=function t(e){var n=null;if(e instanceof cn)n=t(e.result);else if(e instanceof un)for(var r=0,i=e.args;r<i.length&&!(n=t(i[r]));r+=1);else(e instanceof qe||e instanceof an)&&e.input instanceof be&&"zoom"===e.input.name&&(n=e);return n instanceof Dt||e.eachChild((function(e){var r=t(e);r instanceof Dt?n=r:!n&&r?n=new Dt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&r&&n!==r&&(n=new Dt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),n}(n);return o||i?o instanceof Dt?Ln([o]):o instanceof an&&!Nn(e)?Ln([new Dt("",'"interpolate" expressions cannot be used with this property')]):In(o?new Yn(r?"camera":"composite",t.value,o.labels,o instanceof an?o.interpolation:void 0):new Zn(r?"constant":"source",t.value)):Ln([new Dt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Yn.prototype.evaluateWithoutErrorHandling=function(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)},Yn.prototype.evaluate=function(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)},Yn.prototype.interpolationFactor=function(t,e,n){return this.interpolationType?an.interpolationFactor(this.interpolationType,t,e,n):0};var Jn=function(t,e){this._parameters=t,this._specification=e,It(this,function t(e,n){var r,i,o,a="color"===n.type,s=e.stops&&"object"==typeof e.stops[0][0],u=s||!(s||void 0!==e.property),c=e.type||(Nn(n)?"exponential":"interval");if(a&&((e=It({},e)).stops&&(e.stops=e.stops.map((function(t){return[t[0],te.parse(t[1])]}))),e["default"]=te.parse(e["default"]?e["default"]:n["default"])),e.colorSpace&&"rgb"!==e.colorSpace&&!on[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===c)r=qn;else if("interval"===c)r=Vn;else if("categorical"===c){r=Un,i=Object.create(null);for(var l=0,f=e.stops;l<f.length;l+=1){var p=f[l];i[p[0]]=p[1]}o=typeof e.stops[0][0]}else{if("identity"!==c)throw new Error('Unknown function type "'+c+'"');r=Gn}if(s){for(var h={},d=[],v=0;v<e.stops.length;v++){var m=e.stops[v],g=m[0].zoom;void 0===h[g]&&(h[g]={zoom:g,type:e.type,property:e.property,default:e["default"],stops:[]},d.push(g)),h[g].stops.push([m[0].value,m[1]])}for(var y=[],b=0,_=d;b<_.length;b+=1){var x=_[b];y.push([h[x].zoom,t(h[x],n)])}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:an.interpolationFactor.bind(void 0,w),zoomStops:y.map((function(t){return t[0]})),evaluate:function(t,r){var i=t.zoom;return qn({stops:y,base:e.base},n,i).evaluate(i,r)}}}if(u){var E="exponential"===c?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:E,interpolationFactor:an.interpolationFactor.bind(void 0,E),zoomStops:e.stops.map((function(t){return t[0]})),evaluate:function(t){return r(e,n,t.zoom,i,o)}}}return{kind:"source",evaluate:function(t,a){var s=a&&a.properties?a.properties[e.property]:void 0;return void 0===s?Bn(e["default"],n["default"]):r(e,n,s,i,o)}}}(this._parameters,this._specification))};function Qn(t){var e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],u=jn(n);if("object"!==u)return[new Mt(e,n,"object expected, "+u+" found")];for(var c in n){var l=c.split(".")[0],f=r[l]||r["*"],p=void 0;if(i[l])p=i[l];else if(r[l])p=Er;else if(i["*"])p=i["*"];else{if(!r["*"]){s.push(new Mt(e,n[c],'unknown property "'+c+'"'));continue}p=Er}s=s.concat(p({key:(e?e+".":e)+c,value:n[c],valueSpec:f,style:o,styleSpec:a,object:n,objectKey:c},n))}for(var h in r)i[h]||r[h].required&&void 0===r[h]["default"]&&void 0===n[h]&&s.push(new Mt(e,n,'missing required property "'+h+'"'));return s}function $n(t){var e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,o=t.key,a=t.arrayElementValidator||Er;if("array"!==jn(e))return[new Mt(o,e,"array expected, "+jn(e)+" found")];if(n.length&&e.length!==n.length)return[new Mt(o,e,"array length "+n.length+" expected, length "+e.length+" found")];if(n["min-length"]&&e.length<n["min-length"])return[new Mt(o,e,"array length at least "+n["min-length"]+" expected, length "+e.length+" found")];var s={type:n.value,values:n.values};i.$version<7&&(s["function"]=n["function"]),"object"===jn(n.value)&&(s=n.value);for(var u=[],c=0;c<e.length;c++)u=u.concat(a({array:e,arrayIndex:c,value:e[c],valueSpec:s,style:r,styleSpec:i,key:o+"["+c+"]"}));return u}function tr(t){var e=t.key,n=t.value,r=t.valueSpec,i=jn(n);return"number"===i&&n!=n&&(i="NaN"),"number"!==i?[new Mt(e,n,"number expected, "+i+" found")]:"minimum"in r&&n<r.minimum?[new Mt(e,n,n+" is less than the minimum value "+r.minimum)]:"maximum"in r&&n>r.maximum?[new Mt(e,n,n+" is greater than the maximum value "+r.maximum)]:[]}function er(t){var e,n,r,i=t.valueSpec,o=Lt(t.value.type),a={},s="categorical"!==o&&void 0===t.value.property,u=!s,c="array"===jn(t.value.stops)&&"array"===jn(t.value.stops[0])&&"object"===jn(t.value.stops[0][0]),l=Qn({key:t.key,value:t.value,valueSpec:t.styleSpec["function"],style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===o)return[new Mt(t.key,t.value,'identity function may not have a "stops" property')];var e=[],n=t.value;return e=e.concat($n({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:f})),"array"===jn(n)&&0===n.length&&e.push(new Mt(t.key,n,"array must have at least one stop")),e},default:function(t){return Er({key:t.key,value:t.value,valueSpec:i,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===o&&s&&l.push(new Mt(t.key,t.value,'missing required property "property"')),"identity"===o||t.value.stops||l.push(new Mt(t.key,t.value,'missing required property "stops"')),"exponential"===o&&t.valueSpec.expression&&!Nn(t.valueSpec)&&l.push(new Mt(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(u&&!Rn(t.valueSpec)?l.push(new Mt(t.key,t.value,"property functions not supported")):s&&!Dn(t.valueSpec)&&l.push(new Mt(t.key,t.value,"zoom functions not supported"))),"categorical"!==o&&!c||void 0!==t.value.property||l.push(new Mt(t.key,t.value,'"property" property is required')),l;function f(t){var e=[],o=t.value,s=t.key;if("array"!==jn(o))return[new Mt(s,o,"array expected, "+jn(o)+" found")];if(2!==o.length)return[new Mt(s,o,"array length 2 expected, length "+o.length+" found")];if(c){if("object"!==jn(o[0]))return[new Mt(s,o,"object expected, "+jn(o[0])+" found")];if(void 0===o[0].zoom)return[new Mt(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new Mt(s,o,"object stop key must have value")];if(r&&r>Lt(o[0].zoom))return[new Mt(s,o[0].zoom,"stop zoom values must appear in ascending order")];Lt(o[0].zoom)!==r&&(r=Lt(o[0].zoom),n=void 0,a={}),e=e.concat(Qn({key:s+"[0]",value:o[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:tr,value:p}}))}else e=e.concat(p({key:s+"[0]",value:o[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},o));return Wn(Rt(o[1]))?e.concat([new Mt(s+"[1]",o[1],"expressions are not allowed in function stops.")]):e.concat(Er({key:s+"[1]",value:o[1],valueSpec:i,style:t.style,styleSpec:t.styleSpec}))}function p(t,r){var s=jn(t.value),u=Lt(t.value),c=null!==t.value?t.value:r;if(e){if(s!==e)return[new Mt(t.key,c,s+" stop domain type must match previous stop domain type "+e)]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new Mt(t.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){var l="number expected, "+s+" found";return Rn(i)&&void 0===o&&(l+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Mt(t.key,c,l)]}return"categorical"!==o||"number"!==s||isFinite(u)&&Math.floor(u)===u?"categorical"!==o&&"number"===s&&void 0!==n&&u<n?[new Mt(t.key,c,"stop domain values must appear in ascending order")]:(n=u,"categorical"===o&&u in a?[new Mt(t.key,c,"stop domain values must be unique")]:(a[u]=!0,[])):[new Mt(t.key,c,"integer expected, found "+u)]}}function nr(t){var e=("property"===t.expressionContext?Kn:Xn)(Rt(t.value),t.valueSpec);if("error"===e.result)return e.value.map((function(e){return new Mt(""+t.key+e.key,t.value,e.message)}));var n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new Mt(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!Fe(n))return[new Mt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!Fe(n))return[new Mt(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!ze(n,["zoom","feature-state"]))return[new Mt(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!je(n))return[new Mt(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function rr(t){var e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(Lt(n))&&i.push(new Mt(e,n,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(r.values).indexOf(Lt(n))&&i.push(new Mt(e,n,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(n)+" found")),i}function ir(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,n=t.slice(1);e<n.length;e+=1){var r=n[e];if(!ir(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}Jn.deserialize=function(t){return new Jn(t._parameters,t._specification)},Jn.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var or={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ar(t){if(null==t)return{filter:function(){return!0},needGeometry:!1};ir(t)||(t=ur(t));var e=Xn(t,or);if("error"===e.result)throw new Error(e.value.map((function(t){return t.key+": "+t.message})).join(", "));return{filter:function(t,n,r){return e.value.evaluate(t,n,{},r)},needGeometry:function t(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var n=1;n<e.length;n++)if(t(e[n]))return!0;return!1}(t)}}function sr(t,e){return t<e?-1:t>e?1:0}function ur(t){if(!t)return!0;var e,n=t[0];return t.length<=1?"any"!==n:"=="===n?cr(t[1],t[2],"=="):"!="===n?pr(cr(t[1],t[2],"==")):"<"===n||">"===n||"<="===n||">="===n?cr(t[1],t[2],n):"any"===n?(e=t.slice(1),["any"].concat(e.map(ur))):"all"===n?["all"].concat(t.slice(1).map(ur)):"none"===n?["all"].concat(t.slice(1).map(ur).map(pr)):"in"===n?lr(t[1],t.slice(2)):"!in"===n?pr(lr(t[1],t.slice(2))):"has"===n?fr(t[1]):"!has"===n?pr(fr(t[1])):"within"!==n||t}function cr(t,e,n){switch(t){case"$type":return["filter-type-"+n,e];case"$id":return["filter-id-"+n,e];default:return["filter-"+n,t,e]}}function lr(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((function(t){return typeof t!=typeof e[0]}))?["filter-in-large",t,["literal",e.sort(sr)]]:["filter-in-small",t,["literal",e]]}}function fr(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function pr(t){return["!",t]}function hr(t){return ir(Rt(t.value))?nr(It({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var n=e.value,r=e.key;if("array"!==jn(n))return[new Mt(r,n,"array expected, "+jn(n)+" found")];var i,o=e.styleSpec,a=[];if(n.length<1)return[new Mt(r,n,"filter array must have at least 1 element")];switch(a=a.concat(rr({key:r+"[0]",value:n[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),Lt(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===Lt(n[1])&&a.push(new Mt(r,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&a.push(new Mt(r,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":n.length>=2&&"string"!==(i=jn(n[1]))&&a.push(new Mt(r+"[1]",n[1],"string expected, "+i+" found"));for(var s=2;s<n.length;s++)i=jn(n[s]),"$type"===Lt(n[1])?a=a.concat(rr({key:r+"["+s+"]",value:n[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&a.push(new Mt(r+"["+s+"]",n[s],"string, number, or boolean expected, "+i+" found"));break;case"any":case"all":case"none":for(var u=1;u<n.length;u++)a=a.concat(t({key:r+"["+u+"]",value:n[u],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=jn(n[1]),2!==n.length?a.push(new Mt(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==i&&a.push(new Mt(r+"[1]",n[1],"string expected, "+i+" found"));break;case"within":i=jn(n[1]),2!==n.length?a.push(new Mt(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"object"!==i&&a.push(new Mt(r+"[1]",n[1],"object expected, "+i+" found"))}return a}(t)}function dr(t,e){var n=t.key,r=t.style,i=t.styleSpec,o=t.value,a=t.objectKey,s=i[e+"_"+t.layerType];if(!s)return[];var u=a.match(/^(.*)-transition$/);if("paint"===e&&u&&s[u[1]]&&s[u[1]].transition)return Er({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});var c,l=t.valueSpec||s[a];if(!l)return[new Mt(n,o,'unknown property "'+a+'"')];if("string"===jn(o)&&Rn(l)&&!l.tokens&&(c=/^{([^}]+)}$/.exec(o)))return[new Mt(n,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(c[1])+" }`.")];var f=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&f.push(new Mt(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Fn(Rt(o))&&"identity"===Lt(o.type)&&f.push(new Mt(n,o,'"text-font" does not support identity functions'))),f.concat(Er({key:t.key,value:o,valueSpec:l,style:r,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:a}))}function vr(t){return dr(t,"paint")}function mr(t){return dr(t,"layout")}function gr(t){var e=[],n=t.value,r=t.key,i=t.style,o=t.styleSpec;n.type||n.ref||e.push(new Mt(r,n,'either "type" or "ref" is required'));var a,s=Lt(n.type),u=Lt(n.ref);if(n.id)for(var c=Lt(n.id),l=0;l<t.arrayIndex;l++){var f=i.layers[l];Lt(f.id)===c&&e.push(new Mt(r,n.id,'duplicate layer id "'+n.id+'", previously used at line '+f.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach((function(t){t in n&&e.push(new Mt(r,n[t],'"'+t+'" is prohibited for ref layers'))})),i.layers.forEach((function(t){Lt(t.id)===u&&(a=t)})),a?a.ref?e.push(new Mt(r,n.ref,"ref cannot reference another ref layer")):s=Lt(a.type):e.push(new Mt(r,n.ref,'ref layer "'+u+'" not found'));else if("background"!==s)if(n.source){var p=i.sources&&i.sources[n.source],h=p&&Lt(p.type);p?"vector"===h&&"raster"===s?e.push(new Mt(r,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===h&&"raster"!==s?e.push(new Mt(r,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==h||n["source-layer"]?"raster-dem"===h&&"hillshade"!==s?e.push(new Mt(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===h&&p.lineMetrics||e.push(new Mt(r,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new Mt(r,n,'layer "'+n.id+'" must specify a "source-layer"')):e.push(new Mt(r,n.source,'source "'+n.source+'" not found'))}else e.push(new Mt(r,n,'missing required property "source"'));return e=e.concat(Qn({key:r,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Er({key:r+".type",value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:hr,layout:function(t){return Qn({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return mr(It({layerType:s},t))}}})},paint:function(t){return Qn({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return vr(It({layerType:s},t))}}})}}}))}function yr(t){var e=t.value,n=t.key,r=jn(e);return"string"!==r?[new Mt(n,e,"string expected, "+r+" found")]:[]}var br={promoteId:function(t){var e=t.key,n=t.value;if("string"===jn(n))return yr({key:e,value:n});var r=[];for(var i in n)r.push.apply(r,yr({key:e+"."+i,value:n[i]}));return r}};function _r(t){var e=t.value,n=t.key,r=t.styleSpec,i=t.style;if(!e.type)return[new Mt(n,e,'"type" is required')];var o,a=Lt(e.type);switch(a){case"vector":case"raster":case"raster-dem":return Qn({key:n,value:e,valueSpec:r["source_"+a.replace("-","_")],style:t.style,styleSpec:r,objectElementValidators:br});case"geojson":if(o=Qn({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:br}),e.cluster)for(var s in e.clusterProperties){var u=e.clusterProperties[s],c=u[0],l="string"==typeof c?[c,["accumulated"],["get",s]]:c;o.push.apply(o,nr({key:n+"."+s+".map",value:u[1],expressionContext:"cluster-map"})),o.push.apply(o,nr({key:n+"."+s+".reduce",value:l,expressionContext:"cluster-reduce"}))}return o;case"video":return Qn({key:n,value:e,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return Qn({key:n,value:e,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new Mt(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return rr({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function xr(t){var e=t.value,n=t.styleSpec,r=n.light,i=t.style,o=[],a=jn(e);if(void 0===e)return o;if("object"!==a)return o.concat([new Mt("light",e,"object expected, "+a+" found")]);for(var s in e){var u=s.match(/^(.*)-transition$/);o=o.concat(u&&r[u[1]]&&r[u[1]].transition?Er({key:s,value:e[s],valueSpec:n.transition,style:i,styleSpec:n}):r[s]?Er({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n}):[new Mt(s,e[s],'unknown property "'+s+'"')])}return o}var wr={"*":function(){return[]},array:$n,boolean:function(t){var e=t.value,n=t.key,r=jn(e);return"boolean"!==r?[new Mt(n,e,"boolean expected, "+r+" found")]:[]},number:tr,color:function(t){var e=t.key,n=t.value,r=jn(n);return"string"!==r?[new Mt(e,n,"color expected, "+r+" found")]:null===$t(n)?[new Mt(e,n,'color expected, "'+n+'" found')]:[]},constants:Pt,enum:rr,filter:hr,function:er,layer:gr,object:Qn,source:_r,light:xr,string:yr,formatted:function(t){return 0===yr(t).length?[]:nr(t)},resolvedImage:function(t){return 0===yr(t).length?[]:nr(t)}};function Er(t){var e=t.value,n=t.valueSpec,r=t.styleSpec;return n.expression&&Fn(Lt(e))?er(t):n.expression&&Wn(Rt(e))?nr(t):n.type&&wr[n.type]?wr[n.type](t):Qn(It({},t,{valueSpec:n.type?r[n.type]:n}))}function Sr(t){var e=t.value,n=t.key,r=yr(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new Mt(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new Mt(n,e,'"glyphs" url must include a "{range}" token'))),r}function Cr(t,e){void 0===e&&(e=kt);var n=[];return n=n.concat(Er({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Sr,"*":function(){return[]}}})),t.constants&&(n=n.concat(Pt({key:"constants",value:t.constants,style:t,styleSpec:e}))),Tr(n)}function Tr(t){return[].concat(t).sort((function(t,e){return t.line-e.line}))}function Or(t){return function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return Tr(t.apply(this,e))}}Cr.source=Or(_r),Cr.light=Or(xr),Cr.layer=Or(gr),Cr.filter=Or(hr),Cr.paintProperty=Or(vr),Cr.layoutProperty=Or(mr);var Ar=Cr,kr=Ar.light,Mr=Ar.paintProperty,Pr=Ar.layoutProperty;function Ir(t,e){var n=!1;if(e&&e.length)for(var r=0,i=e;r<i.length;r+=1)t.fire(new Ot(new Error(i[r].message))),n=!0;return n}var Lr=Rr;function Rr(t,e,n){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],this.d=(e=i[1])+2*(n=i[2]);for(var o=0;o<this.d*this.d;o++){var a=i[3+o],s=i[3+o+1];r.push(a===s?null:i.subarray(a,s))}var u=i[3+r.length+1];this.keys=i.subarray(i[3+r.length],u),this.bboxes=i.subarray(u),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var l=n/e*t;this.min=-l,this.max=t+l}Rr.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Rr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Rr.prototype._insertCell=function(t,e,n,r,i,o){this.cells[i].push(o)},Rr.prototype.query=function(t,e,n,r,i){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=n&&a<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,n,r,this._queryCell,s,{},i),s},Rr.prototype._queryCell=function(t,e,n,r,i,o,a,s){var u=this.cells[i];if(null!==u)for(var c=this.keys,l=this.bboxes,f=0;f<u.length;f++){var p=u[f];if(void 0===a[p]){var h=4*p;(s?s(l[h+0],l[h+1],l[h+2],l[h+3]):t<=l[h+2]&&e<=l[h+3]&&n>=l[h+0]&&r>=l[h+1])?(a[p]=!0,o.push(c[p])):a[p]=!1}}},Rr.prototype._forEachCell=function(t,e,n,r,i,o,a,s){for(var u=this._convertToCellCoord(t),c=this._convertToCellCoord(e),l=this._convertToCellCoord(n),f=this._convertToCellCoord(r),p=u;p<=l;p++)for(var h=c;h<=f;h++){var d=this.d*h+p;if((!s||s(this._convertFromCellCoord(p),this._convertFromCellCoord(h),this._convertFromCellCoord(p+1),this._convertFromCellCoord(h+1)))&&i.call(this,t,e,n,r,d,o,a,s))return}},Rr.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Rr.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Rr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(e+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];i[3+a]=o,i.set(s,o),o+=s.length}return i[3+t.length]=o,i.set(this.keys,o),i[3+t.length+1]=o+=this.keys.length,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var Dr=a.ImageData,Nr=a.ImageBitmap,jr={};function Fr(t,e,n){void 0===n&&(n={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),jr[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}for(var zr in Fr("Object",Object),Lr.serialize=function(t,e){var n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},Lr.deserialize=function(t){return new Lr(t.buffer)},Fr("Grid",Lr),Fr("Color",te),Fr("Error",Error),Fr("ResolvedImage",ie),Fr("StylePropertyFunction",Jn),Fr("StyleExpression",Hn,{omit:["_evaluator"]}),Fr("ZoomDependentExpression",Yn),Fr("ZoomConstantExpression",Zn),Fr("CompoundExpression",be,{omit:["_evaluate"]}),On)On[zr]._classRegistryKey||Fr("Expression_"+zr,On[zr]);function Br(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Ur(t){return Nr&&t instanceof Nr}function Vr(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(Br(t)||Ur(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var n=t;return e&&e.push(n.buffer),n}if(t instanceof Dr)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var r=[],i=0,o=t;i<o.length;i+=1)r.push(Vr(o[i],e));return r}if("object"==typeof t){var a=t.constructor,s=a._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var u=a.serialize?a.serialize(t,e):{};if(!a.serialize){for(var c in t)if(t.hasOwnProperty(c)&&!(jr[s].omit.indexOf(c)>=0)){var l=t[c];u[c]=jr[s].shallow.indexOf(c)>=0?l:Vr(l,e)}t instanceof Error&&(u.message=t.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(u.$name=s),u}throw new Error("can't serialize object of type "+typeof t)}function qr(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||Br(t)||Ur(t)||ArrayBuffer.isView(t)||t instanceof Dr)return t;if(Array.isArray(t))return t.map(qr);if("object"==typeof t){var e=t.$name||"Object",n=jr[e].klass;if(!n)throw new Error("can't deserialize unregistered class "+e);if(n.deserialize)return n.deserialize(t);for(var r=Object.create(n.prototype),i=0,o=Object.keys(t);i<o.length;i+=1){var a=o[i];if("$name"!==a){var s=t[a];r[a]=jr[e].shallow.indexOf(a)>=0?s:qr(s)}}return r}throw new Error("can't deserialize object of type "+typeof t)}var Gr=function(){this.first=!0};Gr.prototype.update=function(t,e){var n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))};var Hr={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function Wr(t){for(var e=0,n=t;e<n.length;e+=1)if(Xr(n[e].charCodeAt(0)))return!0;return!1}function Xr(t){return!(746!==t&&747!==t&&(t<4352||!(Hr["Bopomofo Extended"](t)||Hr.Bopomofo(t)||Hr["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||Hr["CJK Compatibility Ideographs"](t)||Hr["CJK Compatibility"](t)||Hr["CJK Radicals Supplement"](t)||Hr["CJK Strokes"](t)||!(!Hr["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||Hr["CJK Unified Ideographs Extension A"](t)||Hr["CJK Unified Ideographs"](t)||Hr["Enclosed CJK Letters and Months"](t)||Hr["Hangul Compatibility Jamo"](t)||Hr["Hangul Jamo Extended-A"](t)||Hr["Hangul Jamo Extended-B"](t)||Hr["Hangul Jamo"](t)||Hr["Hangul Syllables"](t)||Hr.Hiragana(t)||Hr["Ideographic Description Characters"](t)||Hr.Kanbun(t)||Hr["Kangxi Radicals"](t)||Hr["Katakana Phonetic Extensions"](t)||Hr.Katakana(t)&&12540!==t||!(!Hr["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Hr["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||Hr["Unified Canadian Aboriginal Syllabics"](t)||Hr["Unified Canadian Aboriginal Syllabics Extended"](t)||Hr["Vertical Forms"](t)||Hr["Yijing Hexagram Symbols"](t)||Hr["Yi Syllables"](t)||Hr["Yi Radicals"](t))))}function Zr(t){return!(Xr(t)||function(t){return!!(Hr["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Hr["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Hr["Letterlike Symbols"](t)||Hr["Number Forms"](t)||Hr["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Hr["Control Pictures"](t)&&9251!==t||Hr["Optical Character Recognition"](t)||Hr["Enclosed Alphanumerics"](t)||Hr["Geometric Shapes"](t)||Hr["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Hr["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Hr["CJK Symbols and Punctuation"](t)||Hr.Katakana(t)||Hr["Private Use Area"](t)||Hr["CJK Compatibility Forms"](t)||Hr["Small Form Variants"](t)||Hr["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Yr(t){return t>=1424&&t<=2303||Hr["Arabic Presentation Forms-A"](t)||Hr["Arabic Presentation Forms-B"](t)}function Kr(t,e){return!(!e&&Yr(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||Hr.Khmer(t))}function Jr(t){for(var e=0,n=t;e<n.length;e+=1)if(Yr(n[e].charCodeAt(0)))return!0;return!1}var Qr=null,$r="unavailable",ti=null,ei=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&($r="error"),Qr&&Qr(t)};function ni(){ri.fire(new Tt("pluginStateChange",{pluginStatus:$r,pluginURL:ti}))}var ri=new At,ii=function(){return $r},oi=function(){if("deferred"!==$r||!ti)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");$r="loading",ni(),ti&&_t({url:ti},(function(t){t?ei(t):($r="loaded",ni())}))},ai={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===$r||null!=ai.applyArabicShaping},isLoading:function(){return"loading"===$r},setState:function(t){$r=t.pluginStatus,ti=t.pluginURL},isParsed:function(){return null!=ai.applyArabicShaping&&null!=ai.processBidirectionalText&&null!=ai.processStyledBidirectionalText},getPluginURL:function(){return ti}},si=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Gr,this.transition={})};si.prototype.isSupportedScript=function(t){return function(t,e){for(var n=0,r=t;n<r.length;n+=1)if(!Kr(r[n].charCodeAt(0),e))return!1;return!0}(t,ai.isLoaded())},si.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},si.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*e}};var ui=function(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Fn(t))return new Jn(t,e);if(Wn(t)){var n=Kn(t,e);if("error"===n.result)throw new Error(n.value.map((function(t){return t.key+": "+t.message})).join(", "));return n.value}var r=t;return"string"==typeof t&&"color"===e.type&&(r=te.parse(t)),{kind:"constant",evaluate:function(){return r}}}(void 0===e?t.specification["default"]:e,t.specification)};ui.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},ui.prototype.possiblyEvaluate=function(t,e,n){return this.property.possiblyEvaluate(this,t,e,n)};var ci=function(t){this.property=t,this.value=new ui(t,void 0)};ci.prototype.transitioned=function(t,e){return new fi(this.property,this.value,e,p({},t.transition,this.transition),t.now)},ci.prototype.untransitioned=function(){return new fi(this.property,this.value,null,{},0)};var li=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};li.prototype.getValue=function(t){return x(this._values[t].value.value)},li.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new ci(this._values[t].property)),this._values[t].value=new ui(this._values[t].property,null===e?void 0:x(e))},li.prototype.getTransition=function(t){return x(this._values[t].transition)},li.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new ci(this._values[t].property)),this._values[t].transition=x(e)||void 0},li.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i);var o=this.getTransition(r);void 0!==o&&(t[r+"-transition"]=o)}return t},li.prototype.transitioned=function(t,e){for(var n=new pi(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var o=i[r];n._values[o]=this._values[o].transitioned(t,e._values[o])}return n},li.prototype.untransitioned=function(){for(var t=new pi(this._properties),e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e];t._values[r]=this._values[r].untransitioned()}return t};var fi=function(t,e,n,r,i){this.property=t,this.value=e,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=n)};fi.prototype.possiblyEvaluate=function(t,e,n){var r=t.now||0,i=this.value.possiblyEvaluate(t,e,n),o=this.prior;if(o){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return o.possiblyEvaluate(t,e,n);var a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,n),i,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}(a))}return i};var pi=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};pi.prototype.possiblyEvaluate=function(t,e,n){for(var r=new vi(this._properties),i=0,o=Object.keys(this._values);i<o.length;i+=1){var a=o[i];r._values[a]=this._values[a].possiblyEvaluate(t,e,n)}return r},pi.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var hi=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};hi.prototype.getValue=function(t){return x(this._values[t].value)},hi.prototype.setValue=function(t,e){this._values[t]=new ui(this._values[t].property,null===e?void 0:x(e))},hi.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i)}return t},hi.prototype.possiblyEvaluate=function(t,e,n){for(var r=new vi(this._properties),i=0,o=Object.keys(this._values);i<o.length;i+=1){var a=o[i];r._values[a]=this._values[a].possiblyEvaluate(t,e,n)}return r};var di=function(t,e,n){this.property=t,this.value=e,this.parameters=n};di.prototype.isConstant=function(){return"constant"===this.value.kind},di.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},di.prototype.evaluate=function(t,e,n,r){return this.property.evaluate(this.value,this.parameters,t,e,n,r)};var vi=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};vi.prototype.get=function(t){return this._values[t]};var mi=function(t){this.specification=t};mi.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},mi.prototype.interpolate=function(t,e,n){var r=He[this.specification.type];return r?r(t,e,n):t};var gi=function(t,e){this.specification=t,this.overrides=e};gi.prototype.possiblyEvaluate=function(t,e,n,r){return new di(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},n,r)}:t.expression,e)},gi.prototype.interpolate=function(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new di(this,{kind:"constant",value:void 0},t.parameters);var r=He[this.specification.type];return r?new di(this,{kind:"constant",value:r(t.value.value,e.value.value,n)},t.parameters):t},gi.prototype.evaluate=function(t,e,n,r,i,o){return"constant"===t.kind?t.value:t.evaluate(e,n,r,i,o)};var yi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(t,e,n,r){if(void 0===t.value)return new di(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var i=t.expression.evaluate(e,null,{},n,r),o="resolvedImage"===t.property.specification.type&&"string"!=typeof i?i.name:i,a=this._calculate(o,o,o,e);return new di(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){var s=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new di(this,{kind:"constant",value:s},e)}return new di(this,t.expression,e)},e.prototype.evaluate=function(t,e,n,r,i,o){if("source"===t.kind){var a=t.evaluate(e,n,r,i,o);return this._calculate(a,a,a,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},n,r),t.evaluate({zoom:Math.floor(e.zoom)},n,r),t.evaluate({zoom:Math.floor(e.zoom)+1},n,r),e):t.value},e.prototype._calculate=function(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},e.prototype.interpolate=function(t){return t},e}(gi),bi=function(t){this.specification=t};bi.prototype.possiblyEvaluate=function(t,e,n,r){if(void 0!==t.value){if("constant"===t.expression.kind){var i=t.expression.evaluate(e,null,{},n,r);return this._calculate(i,i,i,e)}return this._calculate(t.expression.evaluate(new si(Math.floor(e.zoom-1),e)),t.expression.evaluate(new si(Math.floor(e.zoom),e)),t.expression.evaluate(new si(Math.floor(e.zoom+1),e)),e)}},bi.prototype._calculate=function(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},bi.prototype.interpolate=function(t){return t};var _i=function(t){this.specification=t};_i.prototype.possiblyEvaluate=function(t,e,n,r){return!!t.expression.evaluate(e,null,{},n,r)},_i.prototype.interpolate=function(){return!1};var xi=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var n=t[e];n.specification.overridable&&this.overridableProperties.push(e);var r=this.defaultPropertyValues[e]=new ui(n,void 0),i=this.defaultTransitionablePropertyValues[e]=new ci(n);this.defaultTransitioningPropertyValues[e]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=r.possiblyEvaluate({})}};Fr("DataDrivenProperty",gi),Fr("DataConstantProperty",mi),Fr("CrossFadedDataDrivenProperty",yi),Fr("CrossFadedProperty",bi),Fr("ColorRampProperty",_i);var wi=function(t){function e(e,n){if(t.call(this),this.id=e.id,this.type=e.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),n.layout&&(this._unevaluatedLayout=new hi(n.layout)),n.paint)){for(var r in this._transitionablePaint=new li(n.paint),e.paint)this.setPaintProperty(r,e.paint[r],{validate:!1});for(var i in e.layout)this.setLayoutProperty(i,e.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new vi(n.paint)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,n){void 0===n&&(n={}),null!=e&&this._validate(Pr,"layers."+this.id+".layout."+t,t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)},e.prototype.getPaintProperty=function(t){return y(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,n){if(void 0===n&&(n={}),null!=e&&this._validate(Mr,"layers."+this.id+".paint."+t,t,e,n))return!1;if(y(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var r=this._transitionablePaint._values[t],i="cross-faded-data-driven"===r.property.specification["property-type"],o=r.value.isDataDriven(),a=r.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var s=this._transitionablePaint._values[t].value;return s.isDataDriven()||o||i||this._handleOverridablePaintPropertyUpdate(t,a,s)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype._handleOverridablePaintPropertyUpdate=function(t,e,n){return!1},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),_(t,(function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)}))},e.prototype._validate=function(t,e,n,r,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&Ir(this,t.call(Ar,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:kt,style:{glyphs:!0,sprite:!0}}))},e.prototype.is3D=function(){return!1},e.prototype.isTileClipped=function(){return!1},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof di&&Rn(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(At),Ei={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Si=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ci=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Ti(t,e){void 0===e&&(e=1);var n=0,r=0;return{members:t.map((function(t){var i=Ei[t.type].BYTES_PER_ELEMENT,o=n=Oi(n,Math.max(e,i)),a=t.components||1;return r=Math.max(r,i),n+=i*a,{name:t.name,type:t.type,components:a,offset:o}})),size:Oi(n,Math.max(r,e)),alignment:e}}function Oi(t,e){return Math.ceil(t/e)*e}Ci.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},Ci.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},Ci.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ci.prototype.clear=function(){this.length=0},Ci.prototype.resize=function(t){this.reserve(t),this.length=t},Ci.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},Ci.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Ai=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=2*t;return this.int16[r+0]=e,this.int16[r+1]=n,t},e}(Ci);Ai.prototype.bytesPerElement=4,Fr("StructArrayLayout2i4",Ai);var ki=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)},e.prototype.emplace=function(t,e,n,r,i){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,t},e}(Ci);ki.prototype.bytesPerElement=8,Fr("StructArrayLayout4i8",ki);var Mi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)},e.prototype.emplace=function(t,e,n,r,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(Ci);Mi.prototype.bytesPerElement=12,Fr("StructArrayLayout2i4i12",Mi);var Pi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)},e.prototype.emplace=function(t,e,n,r,i,o,a){var s=4*t,u=8*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.uint8[u+4]=r,this.uint8[u+5]=i,this.uint8[u+6]=o,this.uint8[u+7]=a,t},e}(Ci);Pi.prototype.bytesPerElement=8,Fr("StructArrayLayout2i4ub8",Pi);var Ii=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=2*t;return this.float32[r+0]=e,this.float32[r+1]=n,t},e}(Ci);Ii.prototype.bytesPerElement=8,Fr("StructArrayLayout2f8",Ii);var Li=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,c){var l=this.length;return this.resize(l+1),this.emplace(l,t,e,n,r,i,o,a,s,u,c)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,c,l){var f=10*t;return this.uint16[f+0]=e,this.uint16[f+1]=n,this.uint16[f+2]=r,this.uint16[f+3]=i,this.uint16[f+4]=o,this.uint16[f+5]=a,this.uint16[f+6]=s,this.uint16[f+7]=u,this.uint16[f+8]=c,this.uint16[f+9]=l,t},e}(Ci);Li.prototype.bytesPerElement=20,Fr("StructArrayLayout10ui20",Li);var Ri=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,c,l,f){var p=this.length;return this.resize(p+1),this.emplace(p,t,e,n,r,i,o,a,s,u,c,l,f)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,c,l,f,p){var h=12*t;return this.int16[h+0]=e,this.int16[h+1]=n,this.int16[h+2]=r,this.int16[h+3]=i,this.uint16[h+4]=o,this.uint16[h+5]=a,this.uint16[h+6]=s,this.uint16[h+7]=u,this.int16[h+8]=c,this.int16[h+9]=l,this.int16[h+10]=f,this.int16[h+11]=p,t},e}(Ci);Ri.prototype.bytesPerElement=24,Fr("StructArrayLayout4i4ui4i24",Ri);var Di=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.float32[i+0]=e,this.float32[i+1]=n,this.float32[i+2]=r,t},e}(Ci);Di.prototype.bytesPerElement=12,Fr("StructArrayLayout3f12",Di);var Ni=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint32[1*t+0]=e,t},e}(Ci);Ni.prototype.bytesPerElement=4,Fr("StructArrayLayout1ul4",Ni);var ji=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u){var c=this.length;return this.resize(c+1),this.emplace(c,t,e,n,r,i,o,a,s,u)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,c){var l=10*t,f=5*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+3]=i,this.int16[l+4]=o,this.int16[l+5]=a,this.uint32[f+3]=s,this.uint16[l+8]=u,this.uint16[l+9]=c,t},e}(Ci);ji.prototype.bytesPerElement=20,Fr("StructArrayLayout6i1ul2ui20",ji);var Fi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)},e.prototype.emplace=function(t,e,n,r,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(Ci);Fi.prototype.bytesPerElement=12,Fr("StructArrayLayout2i2i2i12",Fi);var zi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i)},e.prototype.emplace=function(t,e,n,r,i,o){var a=4*t,s=8*t;return this.float32[a+0]=e,this.float32[a+1]=n,this.float32[a+2]=r,this.int16[s+6]=i,this.int16[s+7]=o,t},e}(Ci);zi.prototype.bytesPerElement=16,Fr("StructArrayLayout2f1f2i16",zi);var Bi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)},e.prototype.emplace=function(t,e,n,r,i){var o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=n,this.float32[a+1]=r,this.float32[a+2]=i,t},e}(Ci);Bi.prototype.bytesPerElement=12,Fr("StructArrayLayout2ub2f12",Bi);var Ui=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,this.uint16[i+2]=r,t},e}(Ci);Ui.prototype.bytesPerElement=6,Fr("StructArrayLayout3ui6",Ui);var Vi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,c,l,f,p,h,d,v,m){var g=this.length;return this.resize(g+1),this.emplace(g,t,e,n,r,i,o,a,s,u,c,l,f,p,h,d,v,m)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,c,l,f,p,h,d,v,m,g){var y=24*t,b=12*t,_=48*t;return this.int16[y+0]=e,this.int16[y+1]=n,this.uint16[y+2]=r,this.uint16[y+3]=i,this.uint32[b+2]=o,this.uint32[b+3]=a,this.uint32[b+4]=s,this.uint16[y+10]=u,this.uint16[y+11]=c,this.uint16[y+12]=l,this.float32[b+7]=f,this.float32[b+8]=p,this.uint8[_+36]=h,this.uint8[_+37]=d,this.uint8[_+38]=v,this.uint32[b+10]=m,this.int16[y+22]=g,t},e}(Ci);Vi.prototype.bytesPerElement=48,Fr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Vi);var qi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,c,l,f,p,h,d,v,m,g,y,b,_,x,w,E,S,C,T,O){var A=this.length;return this.resize(A+1),this.emplace(A,t,e,n,r,i,o,a,s,u,c,l,f,p,h,d,v,m,g,y,b,_,x,w,E,S,C,T,O)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,c,l,f,p,h,d,v,m,g,y,b,_,x,w,E,S,C,T,O,A){var k=34*t,M=17*t;return this.int16[k+0]=e,this.int16[k+1]=n,this.int16[k+2]=r,this.int16[k+3]=i,this.int16[k+4]=o,this.int16[k+5]=a,this.int16[k+6]=s,this.int16[k+7]=u,this.uint16[k+8]=c,this.uint16[k+9]=l,this.uint16[k+10]=f,this.uint16[k+11]=p,this.uint16[k+12]=h,this.uint16[k+13]=d,this.uint16[k+14]=v,this.uint16[k+15]=m,this.uint16[k+16]=g,this.uint16[k+17]=y,this.uint16[k+18]=b,this.uint16[k+19]=_,this.uint16[k+20]=x,this.uint16[k+21]=w,this.uint16[k+22]=E,this.uint32[M+12]=S,this.float32[M+13]=C,this.float32[M+14]=T,this.float32[M+15]=O,this.float32[M+16]=A,t},e}(Ci);qi.prototype.bytesPerElement=68,Fr("StructArrayLayout8i15ui1ul4f68",qi);var Gi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.float32[1*t+0]=e,t},e}(Ci);Gi.prototype.bytesPerElement=4,Fr("StructArrayLayout1f4",Gi);var Hi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.int16[i+0]=e,this.int16[i+1]=n,this.int16[i+2]=r,t},e}(Ci);Hi.prototype.bytesPerElement=6,Fr("StructArrayLayout3i6",Hi);var Wi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=4*t;return this.uint32[2*t+0]=e,this.uint16[i+2]=n,this.uint16[i+3]=r,t},e}(Ci);Wi.prototype.bytesPerElement=8,Fr("StructArrayLayout1ul2ui8",Wi);var Xi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,t},e}(Ci);Xi.prototype.bytesPerElement=4,Fr("StructArrayLayout2ui4",Xi);var Zi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint16[1*t+0]=e,t},e}(Ci);Zi.prototype.bytesPerElement=2,Fr("StructArrayLayout1ui2",Zi);var Yi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)},e.prototype.emplace=function(t,e,n,r,i){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,t},e}(Ci);Yi.prototype.bytesPerElement=16,Fr("StructArrayLayout4f16",Yi);var Ki=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.anchorPoint.get=function(){return new i(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,n),e}(Si);Ki.prototype.size=20;var Ji=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Ki(this,t)},e}(ji);Fr("CollisionBoxArray",Ji);var Qi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},n.placedOrientation.set=function(t){this._structArray.uint8[this._pos1+37]=t},n.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},n.hidden.set=function(t){this._structArray.uint8[this._pos1+38]=t},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},n.crossTileID.set=function(t){this._structArray.uint32[this._pos4+10]=t},n.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(e.prototype,n),e}(Si);Qi.prototype.size=48;var $i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Qi(this,t)},e}(Vi);Fr("PlacedSymbolArray",$i);var to=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},n.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},n.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},n.key.get=function(){return this._structArray.uint16[this._pos2+8]},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},n.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},n.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},n.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},n.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},n.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},n.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},n.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},n.crossTileID.set=function(t){this._structArray.uint32[this._pos4+12]=t},n.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},n.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},n.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},n.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(e.prototype,n),e}(Si);to.prototype.size=68;var eo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new to(this,t)},e}(qi);Fr("SymbolInstanceArray",eo);var no=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e}(Gi);Fr("GlyphOffsetArray",no);var ro=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e}(Hi);Fr("SymbolLineVertexArray",ro);var io=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(e.prototype,n),e}(Si);io.prototype.size=8;var oo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new io(this,t)},e}(Wi);Fr("FeatureIndexArray",oo);var ao=Ti([{name:"a_pos",components:2,type:"Int16"}],4).members,so=function(t){void 0===t&&(t=[]),this.segments=t};function uo(t,e){return 256*(t=l(Math.floor(t),0,255))+l(Math.floor(e),0,255)}so.prototype.prepareSegment=function(t,e,n,r){var i=this.segments[this.segments.length-1];return t>so.MAX_VERTEX_ARRAY_LENGTH&&E("Max vertices per segment is "+so.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!i||i.vertexLength+t>so.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i},so.prototype.get=function(){return this.segments},so.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var n=e[t];for(var r in n.vaos)n.vaos[r].destroy()}},so.simpleSegment=function(t,e,n,r){return new so([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])},so.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Fr("SegmentVector",so);var co=Ti([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),lo=e((function(t){t.exports=function(t,e){var n,r,i,o,a,s,u,c;for(r=t.length-(n=3&t.length),i=e,a=3432918353,s=461845907,c=0;c<r;)u=255&t.charCodeAt(c)|(255&t.charCodeAt(++c))<<8|(255&t.charCodeAt(++c))<<16|(255&t.charCodeAt(++c))<<24,++c,i=27492+(65535&(o=5*(65535&(i=(i^=u=(65535&(u=(u=(65535&u)*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(u=0,n){case 3:u^=(255&t.charCodeAt(c+2))<<16;case 2:u^=(255&t.charCodeAt(c+1))<<8;case 1:i^=u=(65535&(u=(u=(65535&(u^=255&t.charCodeAt(c)))*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}})),fo=e((function(t){t.exports=function(t,e){for(var n,r=t.length,i=e^r,o=0;r>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&t.charCodeAt(o+2))<<16;case 2:i^=(255&t.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}})),po=lo,ho=fo;po.murmur3=lo,po.murmur2=ho;var vo=function(){this.ids=[],this.positions=[],this.indexed=!1};vo.prototype.add=function(t,e,n,r){this.ids.push(go(t)),this.positions.push(e,n,r)},vo.prototype.getPositions=function(t){for(var e=go(t),n=0,r=this.ids.length-1;n<r;){var i=n+r>>1;this.ids[i]>=e?r=i:n=i+1}for(var o=[];this.ids[n]===e;)o.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return o},vo.serialize=function(t,e){var n=new Float64Array(t.ids),r=new Uint32Array(t.positions);return function t(e,n,r,i){for(;r<i;){for(var o=e[r+i>>1],a=r-1,s=i+1;;){do{a++}while(e[a]<o);do{s--}while(e[s]>o);if(a>=s)break;yo(e,a,s),yo(n,3*a,3*s),yo(n,3*a+1,3*s+1),yo(n,3*a+2,3*s+2)}s-r<i-s?(t(e,n,r,s),r=s+1):(t(e,n,s+1,i),i=s)}}(n,r,0,n.length-1),e&&e.push(n.buffer,r.buffer),{ids:n,positions:r}},vo.deserialize=function(t){var e=new vo;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e};var mo=Math.pow(2,53)-1;function go(t){var e=+t;return!isNaN(e)&&e<=mo?e:po(String(t))}function yo(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}Fr("FeaturePositionMap",vo);var bo=function(t,e){this.gl=t.gl,this.location=e},_o=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(bo),xo=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(bo),wo=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(bo),Eo=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(bo),So=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(bo),Co=function(t){function e(e,n){t.call(this,e,n),this.current=te.transparent}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(bo),To=new Float32Array(16),Oo=function(t){function e(e,n){t.call(this,e,n),this.current=To}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(bo);function Ao(t){return[uo(255*t.r,255*t.g),uo(255*t.b,255*t.a)]}var ko=function(t,e,n){this.value=t,this.uniformNames=e.map((function(t){return"u_"+t})),this.type=n};ko.prototype.setUniform=function(t,e,n){t.set(n.constantOr(this.value))},ko.prototype.getBinding=function(t,e,n){return"color"===this.type?new Co(t,e):new xo(t,e)};var Mo=function(t,e){this.uniformNames=e.map((function(t){return"u_"+t})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Mo.prototype.setConstantPatternPositions=function(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr},Mo.prototype.setUniform=function(t,e,n,r){var i="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;i&&t.set(i)},Mo.prototype.getBinding=function(t,e,n){return"u_pattern"===n.substr(0,9)?new So(t,e):new xo(t,e)};var Po=function(t,e,n,r){this.expression=t,this.type=n,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?2:1,offset:0}})),this.paintVertexArray=new r};Po.prototype.populatePaintArray=function(t,e,n,r,i){var o=this.paintVertexArray.length,a=this.expression.evaluate(new si(0),e,{},r,[],i);this.paintVertexArray.resize(t),this._setPaintValue(o,t,a)},Po.prototype.updatePaintArray=function(t,e,n,r){var i=this.expression.evaluate({zoom:0},n,r);this._setPaintValue(t,e,i)},Po.prototype._setPaintValue=function(t,e,n){if("color"===this.type)for(var r=Ao(n),i=t;i<e;i++)this.paintVertexArray.emplace(i,r[0],r[1]);else{for(var o=t;o<e;o++)this.paintVertexArray.emplace(o,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}},Po.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Po.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Io=function(t,e,n,r,i,o){this.expression=t,this.uniformNames=e.map((function(t){return"u_"+t+"_t"})),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?4:2,offset:0}})),this.paintVertexArray=new o};Io.prototype.populatePaintArray=function(t,e,n,r,i){var o=this.expression.evaluate(new si(this.zoom),e,{},r,[],i),a=this.expression.evaluate(new si(this.zoom+1),e,{},r,[],i),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,o,a)},Io.prototype.updatePaintArray=function(t,e,n,r){var i=this.expression.evaluate({zoom:this.zoom},n,r),o=this.expression.evaluate({zoom:this.zoom+1},n,r);this._setPaintValue(t,e,i,o)},Io.prototype._setPaintValue=function(t,e,n,r){if("color"===this.type)for(var i=Ao(n),o=Ao(r),a=t;a<e;a++)this.paintVertexArray.emplace(a,i[0],i[1],o[0],o[1]);else{for(var s=t;s<e;s++)this.paintVertexArray.emplace(s,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}},Io.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Io.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Io.prototype.setUniform=function(t,e){var n=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,r=l(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);t.set(r)},Io.prototype.getBinding=function(t,e,n){return new xo(t,e)};var Lo=function(t,e,n,r,i,o){this.expression=t,this.type=e,this.useIntegerZoom=n,this.zoom=r,this.layerId=o,this.zoomInPaintVertexArray=new i,this.zoomOutPaintVertexArray=new i};Lo.prototype.populatePaintArray=function(t,e,n){var r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(r,t,e.patterns&&e.patterns[this.layerId],n)},Lo.prototype.updatePaintArray=function(t,e,n,r,i){this._setPaintValues(t,e,n.patterns&&n.patterns[this.layerId],i)},Lo.prototype._setPaintValues=function(t,e,n,r){if(r&&n){var i=r[n.min],o=r[n.mid],a=r[n.max];if(i&&o&&a)for(var s=t;s<e;s++)this.zoomInPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],i.tl[0],i.tl[1],i.br[0],i.br[1],o.pixelRatio,i.pixelRatio),this.zoomOutPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],o.pixelRatio,a.pixelRatio)}},Lo.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,co.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,co.members,this.expression.isStateDependent))},Lo.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ro=function(t,e,n){this.binders={},this._buffers=[];var r=[];for(var i in t.paint._values)if(n(i)){var o=t.paint.get(i);if(o instanceof di&&Rn(o.property.specification)){var a=No(i,t.type),s=o.value,u=o.property.specification.type,c=o.property.useIntegerZoom,l=o.property.specification["property-type"],f="cross-faded"===l||"cross-faded-data-driven"===l;if("constant"===s.kind)this.binders[i]=f?new Mo(s.value,a):new ko(s.value,a,u),r.push("/u_"+i);else if("source"===s.kind||f){var p=jo(i,u,"source");this.binders[i]=f?new Lo(s,u,c,e,p,t.id):new Po(s,a,u,p),r.push("/a_"+i)}else{var h=jo(i,u,"composite");this.binders[i]=new Io(s,a,u,c,e,h),r.push("/z_"+i)}}}this.cacheKey=r.sort().join("")};Ro.prototype.getMaxValue=function(t){var e=this.binders[t];return e instanceof Po||e instanceof Io?e.maxValue:0},Ro.prototype.populatePaintArrays=function(t,e,n,r,i){for(var o in this.binders){var a=this.binders[o];(a instanceof Po||a instanceof Io||a instanceof Lo)&&a.populatePaintArray(t,e,n,r,i)}},Ro.prototype.setConstantPatternPositions=function(t,e){for(var n in this.binders){var r=this.binders[n];r instanceof Mo&&r.setConstantPatternPositions(t,e)}},Ro.prototype.updatePaintArrays=function(t,e,n,r,i){var o=!1;for(var a in t)for(var s=0,u=e.getPositions(a);s<u.length;s+=1){var c=u[s],l=n.feature(c.index);for(var f in this.binders){var p=this.binders[f];if((p instanceof Po||p instanceof Io||p instanceof Lo)&&!0===p.expression.isStateDependent){var h=r.paint.get(f);p.expression=h.value,p.updatePaintArray(c.start,c.end,l,t[a],i),o=!0}}}return o},Ro.prototype.defines=function(){var t=[];for(var e in this.binders){var n=this.binders[e];(n instanceof ko||n instanceof Mo)&&t.push.apply(t,n.uniformNames.map((function(t){return"#define HAS_UNIFORM_"+t})))}return t},Ro.prototype.getBinderAttributes=function(){var t=[];for(var e in this.binders){var n=this.binders[e];if(n instanceof Po||n instanceof Io)for(var r=0;r<n.paintVertexAttributes.length;r++)t.push(n.paintVertexAttributes[r].name);else if(n instanceof Lo)for(var i=0;i<co.members.length;i++)t.push(co.members[i].name)}return t},Ro.prototype.getBinderUniforms=function(){var t=[];for(var e in this.binders){var n=this.binders[e];if(n instanceof ko||n instanceof Mo||n instanceof Io)for(var r=0,i=n.uniformNames;r<i.length;r+=1)t.push(i[r])}return t},Ro.prototype.getPaintVertexBuffers=function(){return this._buffers},Ro.prototype.getUniforms=function(t,e){var n=[];for(var r in this.binders){var i=this.binders[r];if(i instanceof ko||i instanceof Mo||i instanceof Io)for(var o=0,a=i.uniformNames;o<a.length;o+=1){var s=a[o];if(e[s]){var u=i.getBinding(t,e[s],s);n.push({name:s,property:r,binding:u})}}}return n},Ro.prototype.setUniforms=function(t,e,n,r){for(var i=0,o=e;i<o.length;i+=1){var a=o[i],s=a.name,u=a.property;this.binders[u].setUniform(a.binding,r,n.get(u),s)}},Ro.prototype.updatePaintBuffers=function(t){for(var e in this._buffers=[],this.binders){var n=this.binders[e];if(t&&n instanceof Lo){var r=2===t.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;r&&this._buffers.push(r)}else(n instanceof Po||n instanceof Io)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}},Ro.prototype.upload=function(t){for(var e in this.binders){var n=this.binders[e];(n instanceof Po||n instanceof Io||n instanceof Lo)&&n.upload(t)}this.updatePaintBuffers()},Ro.prototype.destroy=function(){for(var t in this.binders){var e=this.binders[t];(e instanceof Po||e instanceof Io||e instanceof Lo)&&e.destroy()}};var Do=function(t,e,n){void 0===n&&(n=function(){return!0}),this.programConfigurations={};for(var r=0,i=t;r<i.length;r+=1){var o=i[r];this.programConfigurations[o.id]=new Ro(o,e,n)}this.needsUpload=!1,this._featureMap=new vo,this._bufferOffset=0};function No(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function jo(t,e,n){var r={color:{source:Ii,composite:Yi},number:{source:Gi,composite:Ii}},i=function(t){return{"line-pattern":{source:Li,composite:Li},"fill-pattern":{source:Li,composite:Li},"fill-extrusion-pattern":{source:Li,composite:Li}}[t]}(t);return i&&i[n]||r[e][n]}Do.prototype.populatePaintArrays=function(t,e,n,r,i,o){for(var a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(t,e,r,i,o);void 0!==e.id&&this._featureMap.add(e.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},Do.prototype.updatePaintArrays=function(t,e,n,r){for(var i=0,o=n;i<o.length;i+=1){var a=o[i];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,this._featureMap,e,a,r)||this.needsUpload}},Do.prototype.get=function(t){return this.programConfigurations[t]},Do.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},Do.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},Fr("ConstantBinder",ko),Fr("CrossFadedConstantBinder",Mo),Fr("SourceExpressionBinder",Po),Fr("CrossFadedCompositeBinder",Lo),Fr("CompositeExpressionBinder",Io),Fr("ProgramConfiguration",Ro,{omit:["_buffers"]}),Fr("ProgramConfigurationSet",Do);var Fo=Math.pow(2,14)-1,zo=-Fo-1;function Bo(t){for(var e=8192/t.extent,n=t.loadGeometry(),r=0;r<n.length;r++)for(var i=n[r],o=0;o<i.length;o++){var a=i[o],s=Math.round(a.x*e),u=Math.round(a.y*e);a.x=l(s,zo,Fo),a.y=l(u,zo,Fo),(s<a.x||s>a.x+1||u<a.y||u>a.y+1)&&E("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function Uo(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?Bo(t):[]}}function Vo(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)}var qo=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Ai,this.indexArray=new Ui,this.segments=new so,this.programConfigurations=new Do(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function Go(t,e){for(var n=0;n<t.length;n++)if($o(e,t[n]))return!0;for(var r=0;r<e.length;r++)if($o(t,e[r]))return!0;return!!Zo(t,e)}function Ho(t,e,n){return!!$o(t,e)||!!Ko(e,t,n)}function Wo(t,e){if(1===t.length)return Qo(e,t[0]);for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;i++)if($o(t,r[i]))return!0;for(var o=0;o<t.length;o++)if(Qo(e,t[o]))return!0;for(var a=0;a<e.length;a++)if(Zo(t,e[a]))return!0;return!1}function Xo(t,e,n){if(t.length>1){if(Zo(t,e))return!0;for(var r=0;r<e.length;r++)if(Ko(e[r],t,n))return!0}for(var i=0;i<t.length;i++)if(Ko(t[i],e,n))return!0;return!1}function Zo(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var r=t[n],i=t[n+1],o=0;o<e.length-1;o++)if(Yo(r,i,e[o],e[o+1]))return!0;return!1}function Yo(t,e,n,r){return S(t,n,r)!==S(e,n,r)&&S(t,e,n)!==S(t,e,r)}function Ko(t,e,n){var r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(var i=1;i<e.length;i++)if(Jo(t,e[i-1],e[i])<r)return!0;return!1}function Jo(t,e,n){var r=e.distSqr(n);if(0===r)return t.distSqr(e);var i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return t.distSqr(i<0?e:i>1?n:n.sub(e)._mult(i)._add(e))}function Qo(t,e){for(var n,r,i,o=!1,a=0;a<t.length;a++)for(var s=0,u=(n=t[a]).length-1;s<n.length;u=s++)(r=n[s]).y>e.y!=(i=n[u]).y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(o=!o);return o}function $o(t,e){for(var n=!1,r=0,i=t.length-1;r<t.length;i=r++){var o=t[r],a=t[i];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function ta(t,e,n){var r=n[0],i=n[2];if(t.x<r.x&&e.x<r.x||t.x>i.x&&e.x>i.x||t.y<r.y&&e.y<r.y||t.y>i.y&&e.y>i.y)return!1;var o=S(t,e,n[0]);return o!==S(t,e,n[1])||o!==S(t,e,n[2])||o!==S(t,e,n[3])}function ea(t,e,n){var r=e.paint.get(t).value;return"constant"===r.kind?r.value:n.programConfigurations.get(e.id).getMaxValue(t)}function na(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function ra(t,e,n,r,o){if(!e[0]&&!e[1])return t;var a=i.convert(e)._mult(o);"viewport"===n&&a._rotate(-r);for(var s=[],u=0;u<t.length;u++)s.push(t[u].sub(a));return s}qo.prototype.populate=function(t,e,n){var r=this.layers[0],i=[],o=null;"circle"===r.type&&(o=r.layout.get("circle-sort-key"));for(var a=0,s=t;a<s.length;a+=1){var u=s[a],c=u.feature,l=u.id,f=u.index,p=u.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,d=Uo(c,h);if(this.layers[0]._featureFilter.filter(new si(this.zoom),d,n)){var v=o?o.evaluate(d,{},n):void 0,m={id:l,properties:c.properties,type:c.type,sourceLayerIndex:p,index:f,geometry:h?d.geometry:Bo(c),patterns:{},sortKey:v};i.push(m)}}o&&i.sort((function(t,e){return t.sortKey-e.sortKey}));for(var g=0,y=i;g<y.length;g+=1){var b=y[g],_=b.geometry,x=b.index,w=b.sourceLayerIndex,E=t[x].feature;this.addFeature(b,_,x,n),e.featureIndex.insert(E,_,x,w,this.index)}},qo.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},qo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},qo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},qo.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ao),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},qo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},qo.prototype.addFeature=function(t,e,n,r){for(var i=0,o=e;i<o.length;i+=1)for(var a=0,s=o[i];a<s.length;a+=1){var u=s[a],c=u.x,l=u.y;if(!(c<0||c>=8192||l<0||l>=8192)){var f=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),p=f.vertexLength;Vo(this.layoutVertexArray,c,l,-1,-1),Vo(this.layoutVertexArray,c,l,1,-1),Vo(this.layoutVertexArray,c,l,1,1),Vo(this.layoutVertexArray,c,l,-1,1),this.indexArray.emplaceBack(p,p+1,p+2),this.indexArray.emplaceBack(p,p+3,p+2),f.vertexLength+=4,f.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},r)},Fr("CircleBucket",qo,{omit:["layers"]});var ia=new xi({"circle-sort-key":new gi(kt.layout_circle["circle-sort-key"])}),oa={paint:new xi({"circle-radius":new gi(kt.paint_circle["circle-radius"]),"circle-color":new gi(kt.paint_circle["circle-color"]),"circle-blur":new gi(kt.paint_circle["circle-blur"]),"circle-opacity":new gi(kt.paint_circle["circle-opacity"]),"circle-translate":new mi(kt.paint_circle["circle-translate"]),"circle-translate-anchor":new mi(kt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new mi(kt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new mi(kt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new gi(kt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new gi(kt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new gi(kt.paint_circle["circle-stroke-opacity"])}),layout:ia},aa="undefined"!=typeof Float32Array?Float32Array:Array;function sa(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ua(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],p=e[9],h=e[10],d=e[11],v=e[12],m=e[13],g=e[14],y=e[15],b=n[0],_=n[1],x=n[2],w=n[3];return t[0]=b*r+_*s+x*f+w*v,t[1]=b*i+_*u+x*p+w*m,t[2]=b*o+_*c+x*h+w*g,t[3]=b*a+_*l+x*d+w*y,t[4]=(b=n[4])*r+(_=n[5])*s+(x=n[6])*f+(w=n[7])*v,t[5]=b*i+_*u+x*p+w*m,t[6]=b*o+_*c+x*h+w*g,t[7]=b*a+_*l+x*d+w*y,t[8]=(b=n[8])*r+(_=n[9])*s+(x=n[10])*f+(w=n[11])*v,t[9]=b*i+_*u+x*p+w*m,t[10]=b*o+_*c+x*h+w*g,t[11]=b*a+_*l+x*d+w*y,t[12]=(b=n[12])*r+(_=n[13])*s+(x=n[14])*f+(w=n[15])*v,t[13]=b*i+_*u+x*p+w*m,t[14]=b*o+_*c+x*h+w*g,t[15]=b*a+_*l+x*d+w*y,t}Math.hypot||(Math.hypot=function(){for(var t=arguments,e=0,n=arguments.length;n--;)e+=t[n]*t[n];return Math.sqrt(e)});var ca,la=ua;function fa(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}ca=new aa(3),aa!=Float32Array&&(ca[0]=0,ca[1]=0,ca[2]=0),function(){var t=new aa(4);aa!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var pa=(function(){var t=new aa(2);aa!=Float32Array&&(t[0]=0,t[1]=0)}(),function(t){function e(e){t.call(this,e,oa)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new qo(t)},e.prototype.queryRadius=function(t){var e=t;return ea("circle-radius",this,e)+ea("circle-stroke-width",this,e)+na(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a,s){for(var u=ra(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),c=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),l="map"===this.paint.get("circle-pitch-alignment"),f=l?u:function(t,e){return t.map((function(t){return ha(t,e)}))}(u,s),p=l?c*a:c,h=0,d=r;h<d.length;h+=1)for(var v=0,m=d[h];v<m.length;v+=1){var g=m[v],y=l?g:ha(g,s),b=p,_=fa([],[g.x,g.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?b*=_[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(b*=o.cameraToCenterDistance/_[3]),Ho(f,y,b))return!0}return!1},e}(wi));function ha(t,e){var n=fa([],[t.x,t.y,0,1],e);return new i(n[0]/n[3],n[1]/n[3])}var da=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(qo);function va(t,e,n,r){var i=e.width,o=e.height;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==i*o*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*o*n);return t.width=i,t.height=o,t.data=r,t}function ma(t,e,n){var r=e.width,i=e.height;if(r!==t.width||i!==t.height){var o=va({},{width:r,height:i},n);ga(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,i)},n),t.width=r,t.height=i,t.data=o.data}}function ga(t,e,n,r,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,u=0;u<i.height;u++)for(var c=((n.y+u)*t.width+n.x)*o,l=((r.y+u)*e.width+r.x)*o,f=0;f<i.width*o;f++)s[l+f]=a[c+f];return e}Fr("HeatmapBucket",da,{omit:["layers"]});var ya=function(t,e){va(this,t,1,e)};ya.prototype.resize=function(t){ma(this,t,1)},ya.prototype.clone=function(){return new ya({width:this.width,height:this.height},new Uint8Array(this.data))},ya.copy=function(t,e,n,r,i){ga(t,e,n,r,i,1)};var ba=function(t,e){va(this,t,4,e)};ba.prototype.resize=function(t){ma(this,t,4)},ba.prototype.replace=function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t},ba.prototype.clone=function(){return new ba({width:this.width,height:this.height},new Uint8Array(this.data))},ba.copy=function(t,e,n,r,i){ga(t,e,n,r,i,4)},Fr("AlphaImage",ya),Fr("RGBAImage",ba);var _a={paint:new xi({"heatmap-radius":new gi(kt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new gi(kt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new mi(kt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new _i(kt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new mi(kt.paint_heatmap["heatmap-opacity"])})};function xa(t){var e={},n=t.resolution||256,r=t.clips?t.clips.length:1,i=t.image||new ba({width:n,height:r}),o=function(n,r,o){e[t.evaluationKey]=o;var a=t.expression.evaluate(e);i.data[n+r+0]=Math.floor(255*a.r/a.a),i.data[n+r+1]=Math.floor(255*a.g/a.a),i.data[n+r+2]=Math.floor(255*a.b/a.a),i.data[n+r+3]=Math.floor(255*a.a)};if(t.clips)for(var a=0,s=0;a<r;++a,s+=4*n)for(var u=0,c=0;u<n;u++,c+=4){var l=u/(n-1),f=t.clips[a];o(s,c,f.start*(1-l)+f.end*l)}else for(var p=0,h=0;p<n;p++,h+=4)o(0,h,p/(n-1));return i}var wa=function(t){function e(e){t.call(this,e,_a),this._updateColorRamp()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new da(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){this.colorRamp=xa({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(wi),Ea={paint:new xi({"hillshade-illumination-direction":new mi(kt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new mi(kt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new mi(kt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new mi(kt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new mi(kt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new mi(kt.paint_hillshade["hillshade-accent-color"])})},Sa=function(t){function e(e){t.call(this,e,Ea)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(wi),Ca=Ti([{name:"a_pos",components:2,type:"Int16"}],4).members,Ta=Aa,Oa=Aa;function Aa(t,e,n){n=n||2;var r,i,o,a,s,u,c,l=e&&e.length,f=l?e[0]*n:t.length,p=ka(t,0,f,n,!0),h=[];if(!p||p.next===p.prev)return h;if(l&&(p=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=ka(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(Ba(a));for(s.sort(Na),i=0;i<s.length;i++)ja(s[i],n),n=Ma(n,n.next);return n}(t,e,p,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<f;d+=n)(s=t[d])<r&&(r=s),(u=t[d+1])<i&&(i=u),s>o&&(o=s),u>a&&(a=u);c=0!==(c=Math.max(o-r,a-i))?1/c:0}return Pa(p,h,n,r,i,c),h}function ka(t,e,n,r,i){var o,a;if(i===$a(t,e,n,r)>0)for(o=e;o<n;o+=r)a=Ka(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=Ka(o,t[o],t[o+1],a);return a&&Ga(a,a.next)&&(Ja(a),a=a.next),a}function Ma(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Ga(r,r.next)&&0!==qa(r.prev,r,r.next))r=r.next;else{if(Ja(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function Pa(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=za(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<c&&(s++,r=r.nextZ);e++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(t,r,i,o);for(var s,u,c=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?La(t,r,i,o):Ia(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),Ja(t),t=u.next,c=u.next;else if((t=u)===c){a?1===a?Pa(t=Ra(Ma(t),e,n),e,n,r,i,o,2):2===a&&Da(t,e,n,r,i,o):Pa(Ma(t),e,n,r,i,o,1);break}}}function Ia(t){var e=t.prev,n=t,r=t.next;if(qa(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Ua(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&qa(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function La(t,e,n,r){var i=t.prev,o=t,a=t.next;if(qa(i,o,a)>=0)return!1;for(var s=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,u=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,c=za(i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,e,n,r),l=za(s,u,e,n,r),f=t.prevZ,p=t.nextZ;f&&f.z>=c&&p&&p.z<=l;){if(f!==t.prev&&f!==t.next&&Ua(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&qa(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&Ua(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&qa(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&Ua(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&qa(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=l;){if(p!==t.prev&&p!==t.next&&Ua(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&qa(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Ra(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Ga(i,o)&&Ha(i,r,r.next,o)&&Za(i,o)&&Za(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Ja(r),Ja(r.next),r=t=o),r=r.next}while(r!==t);return Ma(r)}function Da(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Va(a,s)){var u=Ya(a,s);return a=Ma(a,a.next),u=Ma(u,u.next),Pa(a,e,n,r,i,o),void Pa(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function Na(t,e){return t.x-e.x}function ja(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n;var u,c=n,l=n.x,f=n.y,p=1/0;r=n;do{i>=r.x&&r.x>=l&&i!==r.x&&Ua(o<f?i:a,o,l,f,o<f?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),Za(r,t)&&(u<p||u===p&&(r.x>n.x||r.x===n.x&&Fa(n,r)))&&(n=r,p=u)),r=r.next}while(r!==c);return n}(t,e)){var n=Ya(e,t);Ma(e,e.next),Ma(n,n.next)}}function Fa(t,e){return qa(t.prev,t,e.prev)<0&&qa(e.next,t,t.next)<0}function za(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ba(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Ua(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Va(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Ha(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(Za(t,e)&&Za(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(qa(t.prev,t,e.prev)||qa(t,e.prev,e))||Ga(t,e)&&qa(t.prev,t,t.next)>0&&qa(e.prev,e,e.next)>0)}function qa(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Ga(t,e){return t.x===e.x&&t.y===e.y}function Ha(t,e,n,r){var i=Xa(qa(t,e,n)),o=Xa(qa(t,e,r)),a=Xa(qa(n,r,t)),s=Xa(qa(n,r,e));return i!==o&&a!==s||!(0!==i||!Wa(t,n,e))||!(0!==o||!Wa(t,r,e))||!(0!==a||!Wa(n,t,r))||!(0!==s||!Wa(n,e,r))}function Wa(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Xa(t){return t>0?1:t<0?-1:0}function Za(t,e){return qa(t.prev,t,t.next)<0?qa(t,e,t.next)>=0&&qa(t,t.prev,e)>=0:qa(t,e,t.prev)<0||qa(t,t.next,e)<0}function Ya(t,e){var n=new Qa(t.i,t.x,t.y),r=new Qa(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Ka(t,e,n,r){var i=new Qa(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Ja(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Qa(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function $a(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function ts(t,e,n,r,i){!function t(e,n,r,i,o){for(;i>r;){if(i-r>600){var a=i-r+1,s=n-r+1,u=Math.log(a),c=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*c*(a-c)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-s*c/a+l)),Math.min(i,Math.floor(n+(a-s)*c/a+l)),o)}var f=e[n],p=r,h=i;for(es(e,r,n),o(e[i],f)>0&&es(e,r,i);p<h;){for(es(e,p,h),p++,h--;o(e[p],f)<0;)p++;for(;o(e[h],f)>0;)h--}0===o(e[r],f)?es(e,r,h):es(e,++h,i),h<=n&&(r=h+1),n<=h&&(i=h-1)}}(t,e,n||0,r||t.length-1,i||ns)}function es(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function ns(t,e){return t<e?-1:t>e?1:0}function rs(t,e){var n=t.length;if(n<=1)return[t];for(var r,i,o=[],a=0;a<n;a++){var s=C(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(r&&o.push(r),r=[t[a]]):r.push(t[a]))}if(r&&o.push(r),e>1)for(var u=0;u<o.length;u++)o[u].length<=e||(ts(o[u],e,1,o[u].length-1,is),o[u]=o[u].slice(0,e));return o}function is(t,e){return e.area-t.area}function os(t,e,n){for(var r=n.patternDependencies,i=!1,o=0,a=e;o<a.length;o+=1){var s=a[o].paint.get(t+"-pattern");s.isConstant()||(i=!0);var u=s.constantOr(null);u&&(i=!0,r[u.to]=!0,r[u.from]=!0)}return i}function as(t,e,n,r,i){for(var o=i.patternDependencies,a=0,s=e;a<s.length;a+=1){var u=s[a],c=u.paint.get(t+"-pattern").value;if("constant"!==c.kind){var l=c.evaluate({zoom:r-1},n,{},i.availableImages),f=c.evaluate({zoom:r},n,{},i.availableImages),p=c.evaluate({zoom:r+1},n,{},i.availableImages);f=f&&f.name?f.name:f,p=p&&p.name?p.name:p,o[l=l&&l.name?l.name:l]=!0,o[f]=!0,o[p]=!0,n.patterns[u.id]={min:l,mid:f,max:p}}}return n}Aa.deviation=function(t,e,n,r){var i=e&&e.length,o=Math.abs($a(t,0,i?e[0]*n:t.length,n));if(i)for(var a=0,s=e.length;a<s;a++)o-=Math.abs($a(t,e[a]*n,a<s-1?e[a+1]*n:t.length,n));var u=0;for(a=0;a<r.length;a+=3){var c=r[a]*n,l=r[a+1]*n,f=r[a+2]*n;u+=Math.abs((t[c]-t[f])*(t[l+1]-t[c+1])-(t[c]-t[l])*(t[f+1]-t[c+1]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},Aa.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&n.holes.push(r+=t[i-1].length)}return n},Ta["default"]=Oa;var ss=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ai,this.indexArray=new Ui,this.indexArray2=new Xi,this.programConfigurations=new Do(t.layers,t.zoom),this.segments=new so,this.segments2=new so,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};ss.prototype.populate=function(t,e,n){this.hasPattern=os("fill",this.layers,e);for(var r=this.layers[0].layout.get("fill-sort-key"),i=[],o=0,a=t;o<a.length;o+=1){var s=a[o],u=s.feature,c=s.id,l=s.index,f=s.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,h=Uo(u,p);if(this.layers[0]._featureFilter.filter(new si(this.zoom),h,n)){var d=r?r.evaluate(h,{},n,e.availableImages):void 0,v={id:c,properties:u.properties,type:u.type,sourceLayerIndex:f,index:l,geometry:p?h.geometry:Bo(u),patterns:{},sortKey:d};i.push(v)}}r&&i.sort((function(t,e){return t.sortKey-e.sortKey}));for(var m=0,g=i;m<g.length;m+=1){var y=g[m],b=y.geometry,_=y.index,x=y.sourceLayerIndex;if(this.hasPattern){var w=as("fill",this.layers,y,this.zoom,e);this.patternFeatures.push(w)}else this.addFeature(y,b,_,n,{});e.featureIndex.insert(t[_].feature,b,_,x,this.index)}},ss.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},ss.prototype.addFeatures=function(t,e,n){for(var r=0,i=this.patternFeatures;r<i.length;r+=1){var o=i[r];this.addFeature(o,o.geometry,o.index,e,n)}},ss.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ss.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ss.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ca),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},ss.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ss.prototype.addFeature=function(t,e,n,r,i){for(var o=0,a=rs(e,500);o<a.length;o+=1){for(var s=a[o],u=0,c=0,l=s;c<l.length;c+=1)u+=l[c].length;for(var f=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray),p=f.vertexLength,h=[],d=[],v=0,m=s;v<m.length;v+=1){var g=m[v];if(0!==g.length){g!==s[0]&&d.push(h.length/2);var y=this.segments2.prepareSegment(g.length,this.layoutVertexArray,this.indexArray2),b=y.vertexLength;this.layoutVertexArray.emplaceBack(g[0].x,g[0].y),this.indexArray2.emplaceBack(b+g.length-1,b),h.push(g[0].x),h.push(g[0].y);for(var _=1;_<g.length;_++)this.layoutVertexArray.emplaceBack(g[_].x,g[_].y),this.indexArray2.emplaceBack(b+_-1,b+_),h.push(g[_].x),h.push(g[_].y);y.vertexLength+=g.length,y.primitiveLength+=g.length}}for(var x=Ta(h,d),w=0;w<x.length;w+=3)this.indexArray.emplaceBack(p+x[w],p+x[w+1],p+x[w+2]);f.vertexLength+=u,f.primitiveLength+=x.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)},Fr("FillBucket",ss,{omit:["layers","patternFeatures"]});var us=new xi({"fill-sort-key":new gi(kt.layout_fill["fill-sort-key"])}),cs={paint:new xi({"fill-antialias":new mi(kt.paint_fill["fill-antialias"]),"fill-opacity":new gi(kt.paint_fill["fill-opacity"]),"fill-color":new gi(kt.paint_fill["fill-color"]),"fill-outline-color":new gi(kt.paint_fill["fill-outline-color"]),"fill-translate":new mi(kt.paint_fill["fill-translate"]),"fill-translate-anchor":new mi(kt.paint_fill["fill-translate-anchor"]),"fill-pattern":new yi(kt.paint_fill["fill-pattern"])}),layout:us},ls=function(t){function e(e){t.call(this,e,cs)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,n){t.prototype.recalculate.call(this,e,n);var r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new ss(t)},e.prototype.queryRadius=function(){return na(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a){return Wo(ra(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)},e.prototype.isTileClipped=function(){return!0},e}(wi),fs=Ti([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,ps=hs;function hs(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(ds,this,e)}function ds(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function vs(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)r+=((n=t[a]).x-(e=t[i]).x)*(e.y+n.y);return r}hs.types=["Unknown","Point","LineString","Polygon"],hs.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,o=0,a=0,s=0,u=[];t.pos<n;){if(o<=0){var c=t.readVarint();r=7&c,o=c>>3}if(o--,1===r||2===r)a+=t.readSVarint(),s+=t.readSVarint(),1===r&&(e&&u.push(e),e=[]),e.push(new i(a,s));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&u.push(e),u},hs.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,c=-1/0;t.pos<e;){if(r<=0){var l=t.readVarint();n=7&l,r=l>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=t.readSVarint())<u&&(u=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,c]},hs.prototype.toGeoJSON=function(t,e,n){var r,i,o=this.extent*Math.pow(2,n),a=this.extent*t,s=this.extent*e,u=this.loadGeometry(),c=hs.types[this.type];function l(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var f=[];for(r=0;r<u.length;r++)f[r]=u[r][0];l(u=f);break;case 2:for(r=0;r<u.length;r++)l(u[r]);break;case 3:for(u=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=vs(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}(u),r=0;r<u.length;r++)for(i=0;i<u[r].length;i++)l(u[r][i])}1===u.length?u=u[0]:c="Multi"+c;var p={type:"Feature",geometry:{type:c,coordinates:u},properties:this.properties};return"id"in this&&(p.id=this.id),p};var ms=gs;function gs(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(ys,this,e),this.length=this._features.length}function ys(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))}function bs(t,e,n){if(3===t){var r=new ms(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}gs.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new ps(this._pbf,e,this.extent,this._keys,this._values)};var _s={VectorTile:function(t,e){this.layers=t.readFields(bs,{},e)},VectorTileFeature:ps,VectorTileLayer:ms},xs=_s.VectorTileFeature.types,ws=Math.pow(2,13);function Es(t,e,n,r,i,o,a,s){t.emplaceBack(e,n,2*Math.floor(r*ws)+a,i*ws*2,o*ws*2,Math.round(s))}var Ss=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Mi,this.indexArray=new Ui,this.programConfigurations=new Do(t.layers,t.zoom),this.segments=new so,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function Cs(t,e){return t.x===e.x&&(t.x<0||t.x>8192)||t.y===e.y&&(t.y<0||t.y>8192)}Ss.prototype.populate=function(t,e,n){this.features=[],this.hasPattern=os("fill-extrusion",this.layers,e);for(var r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.feature,s=o.id,u=o.index,c=o.sourceLayerIndex,l=this.layers[0]._featureFilter.needGeometry,f=Uo(a,l);if(this.layers[0]._featureFilter.filter(new si(this.zoom),f,n)){var p={id:s,sourceLayerIndex:c,index:u,geometry:l?f.geometry:Bo(a),properties:a.properties,type:a.type,patterns:{}};this.hasPattern?this.features.push(as("fill-extrusion",this.layers,p,this.zoom,e)):this.addFeature(p,p.geometry,u,n,{}),e.featureIndex.insert(a,p.geometry,u,c,this.index,!0)}}},Ss.prototype.addFeatures=function(t,e,n){for(var r=0,i=this.features;r<i.length;r+=1){var o=i[r];this.addFeature(o,o.geometry,o.index,e,n)}},Ss.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},Ss.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ss.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ss.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,fs),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Ss.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ss.prototype.addFeature=function(t,e,n,r,i){for(var o=0,a=rs(e,500);o<a.length;o+=1){for(var s=a[o],u=0,c=0,l=s;c<l.length;c+=1)u+=l[c].length;for(var f=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=0,h=s;p<h.length;p+=1){var d=h[p];if(0!==d.length&&!((I=d).every((function(t){return t.x<0}))||I.every((function(t){return t.x>8192}))||I.every((function(t){return t.y<0}))||I.every((function(t){return t.y>8192}))))for(var v=0,m=0;m<d.length;m++){var g=d[m];if(m>=1){var y=d[m-1];if(!Cs(g,y)){f.vertexLength+4>so.MAX_VERTEX_ARRAY_LENGTH&&(f=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var b=g.sub(y)._perp()._unit(),_=y.dist(g);v+_>32768&&(v=0),Es(this.layoutVertexArray,g.x,g.y,b.x,b.y,0,0,v),Es(this.layoutVertexArray,g.x,g.y,b.x,b.y,0,1,v),Es(this.layoutVertexArray,y.x,y.y,b.x,b.y,0,0,v+=_),Es(this.layoutVertexArray,y.x,y.y,b.x,b.y,0,1,v);var x=f.vertexLength;this.indexArray.emplaceBack(x,x+2,x+1),this.indexArray.emplaceBack(x+1,x+2,x+3),f.vertexLength+=4,f.primitiveLength+=2}}}}if(f.vertexLength+u>so.MAX_VERTEX_ARRAY_LENGTH&&(f=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray)),"Polygon"===xs[t.type]){for(var w=[],E=[],S=f.vertexLength,C=0,T=s;C<T.length;C+=1){var O=T[C];if(0!==O.length){O!==s[0]&&E.push(w.length/2);for(var A=0;A<O.length;A++){var k=O[A];Es(this.layoutVertexArray,k.x,k.y,0,0,1,1,0),w.push(k.x),w.push(k.y)}}}for(var M=Ta(w,E),P=0;P<M.length;P+=3)this.indexArray.emplaceBack(S+M[P],S+M[P+2],S+M[P+1]);f.primitiveLength+=M.length/3,f.vertexLength+=u}}var I;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)},Fr("FillExtrusionBucket",Ss,{omit:["layers","features"]});var Ts={paint:new xi({"fill-extrusion-opacity":new mi(kt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new gi(kt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new mi(kt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new mi(kt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new yi(kt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new gi(kt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new gi(kt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new mi(kt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Os=function(t){function e(e){t.call(this,e,Ts)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new Ss(t)},e.prototype.queryRadius=function(){return na(this.paint.get("fill-extrusion-translate"))},e.prototype.is3D=function(){return!0},e.prototype.queryIntersectsFeature=function(t,e,n,r,o,a,s,u){var c=ra(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,s),l=this.paint.get("fill-extrusion-height").evaluate(e,n),f=this.paint.get("fill-extrusion-base").evaluate(e,n),p=function(t,e,n,r){for(var o=[],a=0,s=t;a<s.length;a+=1){var u=s[a],c=[u.x,u.y,0,1];fa(c,c,e),o.push(new i(c[0]/c[3],c[1]/c[3]))}return o}(c,u),h=function(t,e,n,r){for(var o=[],a=[],s=r[8]*e,u=r[9]*e,c=r[10]*e,l=r[11]*e,f=r[8]*n,p=r[9]*n,h=r[10]*n,d=r[11]*n,v=0,m=t;v<m.length;v+=1){for(var g=[],y=[],b=0,_=m[v];b<_.length;b+=1){var x=_[b],w=x.x,E=x.y,S=r[0]*w+r[4]*E+r[12],C=r[1]*w+r[5]*E+r[13],T=r[2]*w+r[6]*E+r[14],O=r[3]*w+r[7]*E+r[15],A=T+c,k=O+l,M=S+f,P=C+p,I=T+h,L=O+d,R=new i((S+s)/k,(C+u)/k);R.z=A/k,g.push(R);var D=new i(M/L,P/L);D.z=I/L,y.push(D)}o.push(g),a.push(y)}return[o,a]}(r,f,l,u);return function(t,e,n){var r=1/0;Wo(n,e)&&(r=ks(n,e[0]));for(var i=0;i<e.length;i++)for(var o=e[i],a=t[i],s=0;s<o.length-1;s++){var u=o[s],c=[u,o[s+1],a[s+1],a[s],u];Go(n,c)&&(r=Math.min(r,ks(n,c)))}return r!==1/0&&r}(h[0],h[1],p)},e}(wi);function As(t,e){return t.x*e.x+t.y*e.y}function ks(t,e){if(1===t.length){for(var n,r=0,i=e[r++];!n||i.equals(n);)if(!(n=e[r++]))return 1/0;for(;r<e.length;r++){var o=e[r],a=t[0],s=n.sub(i),u=o.sub(i),c=a.sub(i),l=As(s,s),f=As(s,u),p=As(u,u),h=As(c,s),d=As(c,u),v=l*p-f*f,m=(p*h-f*d)/v,g=(l*d-f*h)/v,y=i.z*(1-m-g)+n.z*m+o.z*g;if(isFinite(y))return y}return 1/0}for(var b=1/0,_=0,x=e;_<x.length;_+=1)b=Math.min(b,x[_].z);return b}var Ms=Ti([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Ps=Ti([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Is=_s.VectorTileFeature.types,Ls=Math.cos(Math.PI/180*37.5),Rs=Math.pow(2,14)/.5,Ds=function(t){var e=this;this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(t){e.gradients[t.id]={}})),this.layoutVertexArray=new Pi,this.layoutVertexArray2=new Ii,this.indexArray=new Ui,this.programConfigurations=new Do(t.layers,t.zoom),this.segments=new so,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};Ds.prototype.populate=function(t,e,n){this.hasPattern=os("line",this.layers,e);for(var r=this.layers[0].layout.get("line-sort-key"),i=[],o=0,a=t;o<a.length;o+=1){var s=a[o],u=s.feature,c=s.id,l=s.index,f=s.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,h=Uo(u,p);if(this.layers[0]._featureFilter.filter(new si(this.zoom),h,n)){var d=r?r.evaluate(h,{},n):void 0,v={id:c,properties:u.properties,type:u.type,sourceLayerIndex:f,index:l,geometry:p?h.geometry:Bo(u),patterns:{},sortKey:d};i.push(v)}}r&&i.sort((function(t,e){return t.sortKey-e.sortKey}));for(var m=0,g=i;m<g.length;m+=1){var y=g[m],b=y.geometry,_=y.index,x=y.sourceLayerIndex;if(this.hasPattern){var w=as("line",this.layers,y,this.zoom,e);this.patternFeatures.push(w)}else this.addFeature(y,b,_,n,{});e.featureIndex.insert(t[_].feature,b,_,x,this.index)}},Ds.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},Ds.prototype.addFeatures=function(t,e,n){for(var r=0,i=this.patternFeatures;r<i.length;r+=1){var o=i[r];this.addFeature(o,o.geometry,o.index,e,n)}},Ds.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ds.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ds.prototype.upload=function(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Ps)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ms),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Ds.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ds.prototype.lineFeatureClips=function(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}},Ds.prototype.addFeature=function(t,e,n,r,i){var o=this.layers[0].layout,a=o.get("line-join").evaluate(t,{}),s=o.get("line-cap"),u=o.get("line-miter-limit"),c=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(var l=0,f=e;l<f.length;l+=1)this.addLine(f[l],t,a,s,u,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)},Ds.prototype.addLine=function(t,e,n,r,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var a=0;a<t.length-1;a++)this.totalDistance+=t[a].dist(t[a+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===Is[e.type],u=t.length;u>=2&&t[u-1].equals(t[u-2]);)u--;for(var c=0;c<u-1&&t[c].equals(t[c+1]);)c++;if(!(u<(s?3:2))){"bevel"===n&&(i=1.05);var l,f=this.overscaling<=16?122880/(512*this.overscaling):0,p=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray),h=void 0,d=void 0,v=void 0,m=void 0;this.e1=this.e2=-1,s&&(m=t[c].sub(l=t[u-2])._unit()._perp());for(var g=c;g<u;g++)if(!(d=g===u-1?s?t[c+1]:void 0:t[g+1])||!t[g].equals(d)){m&&(v=m),l&&(h=l),l=t[g],m=d?d.sub(l)._unit()._perp():v;var y=(v=v||m).add(m);0===y.x&&0===y.y||y._unit();var b=v.x*m.x+v.y*m.y,_=y.x*m.x+y.y*m.y,x=0!==_?1/_:1/0,w=2*Math.sqrt(2-2*_),E=_<Ls&&h&&d,S=v.x*m.y-v.y*m.x>0;if(E&&g>c){var C=l.dist(h);if(C>2*f){var T=l.sub(l.sub(h)._mult(f/C)._round());this.updateDistance(h,T),this.addCurrentVertex(T,v,0,0,p),h=T}}var O=h&&d,A=O?n:s?"butt":r;if(O&&"round"===A&&(x<o?A="miter":x<=2&&(A="fakeround")),"miter"===A&&x>i&&(A="bevel"),"bevel"===A&&(x>2&&(A="flipbevel"),x<i&&(A="miter")),h&&this.updateDistance(h,l),"miter"===A)y._mult(x),this.addCurrentVertex(l,y,0,0,p);else if("flipbevel"===A){if(x>100)y=m.mult(-1);else{var k=x*v.add(m).mag()/v.sub(m).mag();y._perp()._mult(k*(S?-1:1))}this.addCurrentVertex(l,y,0,0,p),this.addCurrentVertex(l,y.mult(-1),0,0,p)}else if("bevel"===A||"fakeround"===A){var M=-Math.sqrt(x*x-1),P=S?M:0,I=S?0:M;if(h&&this.addCurrentVertex(l,v,P,I,p),"fakeround"===A)for(var L=Math.round(180*w/Math.PI/20),R=1;R<L;R++){var D=R/L;if(.5!==D){var N=D-.5;D+=D*N*(D-1)*((1.0904+b*(b*(3.55645-1.43519*b)-3.2452))*N*N+(.848013+b*(.215638*b-1.06021)))}var j=m.sub(v)._mult(D)._add(v)._unit()._mult(S?-1:1);this.addHalfVertex(l,j.x,j.y,!1,S,0,p)}d&&this.addCurrentVertex(l,m,-P,-I,p)}else if("butt"===A)this.addCurrentVertex(l,y,0,0,p);else if("square"===A){var F=h?1:-1;this.addCurrentVertex(l,y,F,F,p)}else"round"===A&&(h&&(this.addCurrentVertex(l,v,0,0,p),this.addCurrentVertex(l,v,1,1,p,!0)),d&&(this.addCurrentVertex(l,m,-1,-1,p,!0),this.addCurrentVertex(l,m,0,0,p)));if(E&&g<u-1){var z=l.dist(d);if(z>2*f){var B=l.add(d.sub(l)._mult(f/z)._round());this.updateDistance(l,B),this.addCurrentVertex(B,m,0,0,p),l=B}}}}},Ds.prototype.addCurrentVertex=function(t,e,n,r,i,o){void 0===o&&(o=!1);var a=e.y*r-e.x,s=-e.y-e.x*r;this.addHalfVertex(t,e.x+e.y*n,e.y-e.x*n,o,!1,n,i),this.addHalfVertex(t,a,s,o,!0,-r,i),this.distance>Rs/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,n,r,i,o))},Ds.prototype.addHalfVertex=function(t,e,n,r,i,o,a){var s=.5*(this.lineClips?this.scaledDistance*(Rs-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t.x<<1)+(r?1:0),(t.y<<1)+(i?1:0),Math.round(63*e)+128,Math.round(63*n)+128,1+(0===o?0:o<0?-1:1)|(63&s)<<2,s>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var u=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),a.primitiveLength++),i?this.e2=u:this.e1=u},Ds.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ds.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.updateScaledDistance()},Fr("LineBucket",Ds,{omit:["layers","patternFeatures"]});var Ns=new xi({"line-cap":new mi(kt.layout_line["line-cap"]),"line-join":new gi(kt.layout_line["line-join"]),"line-miter-limit":new mi(kt.layout_line["line-miter-limit"]),"line-round-limit":new mi(kt.layout_line["line-round-limit"]),"line-sort-key":new gi(kt.layout_line["line-sort-key"])}),js={paint:new xi({"line-opacity":new gi(kt.paint_line["line-opacity"]),"line-color":new gi(kt.paint_line["line-color"]),"line-translate":new mi(kt.paint_line["line-translate"]),"line-translate-anchor":new mi(kt.paint_line["line-translate-anchor"]),"line-width":new gi(kt.paint_line["line-width"]),"line-gap-width":new gi(kt.paint_line["line-gap-width"]),"line-offset":new gi(kt.paint_line["line-offset"]),"line-blur":new gi(kt.paint_line["line-blur"]),"line-dasharray":new bi(kt.paint_line["line-dasharray"]),"line-pattern":new yi(kt.paint_line["line-pattern"]),"line-gradient":new _i(kt.paint_line["line-gradient"])}),layout:Ns},Fs=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(e,n){return n=new si(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),t.prototype.possiblyEvaluate.call(this,e,n)},e.prototype.evaluate=function(e,n,r,i){return n=p({},n,{zoom:Math.floor(n.zoom)}),t.prototype.evaluate.call(this,e,n,r,i)},e}(gi))(js.paint.properties["line-width"].specification);Fs.useIntegerZoom=!0;var zs=function(t){function e(e){t.call(this,e,js),this.gradientVersion=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof qe,this.gradientVersion=(this.gradientVersion+1)%s)},e.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},e.prototype.recalculate=function(e,n){t.prototype.recalculate.call(this,e,n),this.paint._values["line-floorwidth"]=Fs.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new Ds(t)},e.prototype.queryRadius=function(t){var e=t,n=Bs(ea("line-width",this,e),ea("line-gap-width",this,e)),r=ea("line-offset",this,e);return n/2+Math.abs(r)+na(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,o,a,s){var u=ra(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,s),c=s/2*Bs(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),l=this.paint.get("line-offset").evaluate(e,n);return l&&(r=function(t,e){for(var n=[],r=new i(0,0),o=0;o<t.length;o++){for(var a=t[o],s=[],u=0;u<a.length;u++){var c=a[u],l=a[u+1],f=0===u?r:c.sub(a[u-1])._unit()._perp(),p=u===a.length-1?r:l.sub(c)._unit()._perp(),h=f._add(p)._unit();h._mult(1/(h.x*p.x+h.y*p.y)),s.push(h._mult(e)._add(c))}n.push(s)}return n}(r,l*s)),function(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];if(t.length>=3)for(var o=0;o<i.length;o++)if($o(t,i[o]))return!0;if(Xo(t,i,n))return!0}return!1}(u,r,c)},e.prototype.isTileClipped=function(){return!0},e}(wi);function Bs(t,e){return e>0?e+2*t:t}var Us=Ti([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Vs=Ti([{name:"a_projected_pos",components:3,type:"Float32"}],4),qs=(Ti([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Ti([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Gs=(Ti([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Ti([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Hs=Ti([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Ws(t,e,n){return t.sections.forEach((function(t){t.text=function(t,e,n){var r=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),ai.applyArabicShaping&&(t=ai.applyArabicShaping(t)),t}(t.text,e,n)})),t}Ti([{name:"triangle",components:3,type:"Uint16"}]),Ti([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ti([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ti([{type:"Float32",name:"offsetX"}]),Ti([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Xs={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Zs=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,p=n?-1:1,h=t[e+f];for(f+=p,o=h&(1<<-l)-1,h>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=p,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=p,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=c}return(h?-1:1)*a*Math.pow(2,o-r)},Ys=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,d=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?p/u:p*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+h]=255&s,h+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+h]=255&a,h+=d,a/=256,c-=8);t[n+h-d]|=128*v},Ks=Js;function Js(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Js.Varint=0,Js.Fixed64=1,Js.Bytes=2,Js.Fixed32=5;var Qs="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function $s(t){return t.type===Js.Bytes?t.readVarint()+t.pos:t.pos+1}function tu(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function eu(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function nu(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function ru(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function iu(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function ou(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function au(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function su(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function uu(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function cu(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function lu(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function fu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function pu(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function hu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function du(t,e,n){1===t&&n.readMessage(vu,e)}function vu(t,e,n){if(3===t){var r=n.readMessage(mu,{}),i=r.width,o=r.height,a=r.left,s=r.top,u=r.advance;e.push({id:r.id,bitmap:new ya({width:i+6,height:o+6},r.bitmap),metrics:{width:i,height:o,left:a,top:s,advance:u}})}}function mu(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}function gu(t){for(var e=0,n=0,r=0,i=t;r<i.length;r+=1){var o=i[r];e+=o.w*o.h,n=Math.max(n,o.w)}t.sort((function(t,e){return e.h-t.h}));for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}],s=0,u=0,c=0,l=t;c<l.length;c+=1)for(var f=l[c],p=a.length-1;p>=0;p--){var h=a[p];if(!(f.w>h.w||f.h>h.h)){if(f.x=h.x,f.y=h.y,u=Math.max(u,f.y+f.h),s=Math.max(s,f.x+f.w),f.w===h.w&&f.h===h.h){var d=a.pop();p<a.length&&(a[p]=d)}else f.h===h.h?(h.x+=f.w,h.w-=f.w):f.w===h.w?(h.y+=f.h,h.h-=f.h):(a.push({x:h.x+f.w,y:h.y,w:h.w-f.w,h:f.h}),h.y+=f.h,h.h-=f.h);break}}return{w:s,h:u,fill:e/(s*u)||0}}Js.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=fu(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=hu(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=fu(this.buf,this.pos)+4294967296*fu(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=fu(this.buf,this.pos)+4294967296*hu(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Zs(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Zs(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return tu(t,r,e);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return tu(t,r,e);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return tu(t,r,e);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return tu(t,r,e);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return tu(t,r,e);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return tu(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&Qs?function(t,e,n){return Qs.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var r="",i=e;i<n;){var o,a,s,u=t[i],c=null,l=u>239?4:u>223?3:u>191?2:1;if(i+l>n)break;1===l?u<128&&(c=u):2===l?128==(192&(o=t[i+1]))&&(c=(31&u)<<6|63&o)<=127&&(c=null):3===l?(a=t[i+2],128==(192&(o=t[i+1]))&&128==(192&a)&&((c=(15&u)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===l&&(a=t[i+2],s=t[i+3],128==(192&(o=t[i+1]))&&128==(192&a)&&128==(192&s)&&((c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,l=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),i+=l}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Js.Bytes)return t.push(this.readVarint(e));var n=$s(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Js.Bytes)return t.push(this.readSVarint());var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Js.Bytes)return t.push(this.readBoolean());var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Js.Bytes)return t.push(this.readFloat());var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Js.Bytes)return t.push(this.readDouble());var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Js.Bytes)return t.push(this.readFixed32());var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Js.Bytes)return t.push(this.readSFixed32());var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Js.Bytes)return t.push(this.readFixed64());var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Js.Bytes)return t.push(this.readSFixed64());var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Js.Varint)for(;this.buf[this.pos++]>127;);else if(e===Js.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Js.Fixed32)this.pos+=4;else{if(e!==Js.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),pu(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),pu(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),pu(this.buf,-1&t,this.pos),pu(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),pu(this.buf,-1&t,this.pos),pu(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&eu(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Ys(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Ys(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&eu(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,Js.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,nu,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,ru,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,au,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,iu,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,ou,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,su,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,uu,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,cu,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,lu,e)},writeBytesField:function(t,e){this.writeTag(t,Js.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Js.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Js.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Js.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Js.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Js.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Js.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Js.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Js.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Js.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var yu=function(t,e){var n=e.pixelRatio,r=e.version,i=e.stretchX,o=e.stretchY,a=e.content;this.paddedRect=t,this.pixelRatio=n,this.stretchX=i,this.stretchY=o,this.content=a,this.version=r},bu={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};bu.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},bu.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},bu.tlbr.get=function(){return this.tl.concat(this.br)},bu.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(yu.prototype,bu);var _u=function(t,e){var n={},r={};this.haveRenderCallbacks=[];var i=[];this.addImages(t,n,i),this.addImages(e,r,i);var o=gu(i),a=new ba({width:o.w||1,height:o.h||1});for(var s in t){var u=t[s],c=n[s].paddedRect;ba.copy(u.data,a,{x:0,y:0},{x:c.x+1,y:c.y+1},u.data)}for(var l in e){var f=e[l],p=r[l].paddedRect,h=p.x+1,d=p.y+1,v=f.data.width,m=f.data.height;ba.copy(f.data,a,{x:0,y:0},{x:h,y:d},f.data),ba.copy(f.data,a,{x:0,y:m-1},{x:h,y:d-1},{width:v,height:1}),ba.copy(f.data,a,{x:0,y:0},{x:h,y:d+m},{width:v,height:1}),ba.copy(f.data,a,{x:v-1,y:0},{x:h-1,y:d},{width:1,height:m}),ba.copy(f.data,a,{x:0,y:0},{x:h+v,y:d},{width:1,height:m})}this.image=a,this.iconPositions=n,this.patternPositions=r};_u.prototype.addImages=function(t,e,n){for(var r in t){var i=t[r],o={x:0,y:0,w:i.data.width+2,h:i.data.height+2};n.push(o),e[r]=new yu(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}},_u.prototype.patchUpdatedImages=function(t,e){for(var n in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),e),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),e)},_u.prototype.patchUpdatedImage=function(t,e,n){if(t&&e&&t.version!==e.version){t.version=e.version;var r=t.tl;n.update(e.data,void 0,{x:r[0],y:r[1]})}},Fr("ImagePosition",yu),Fr("ImageAtlas",_u);var xu={horizontal:1,vertical:2,horizontalOnly:3},wu=function(){this.scale=1,this.fontStack="",this.imageName=null};wu.forText=function(t,e){var n=new wu;return n.scale=t||1,n.fontStack=e,n},wu.forImage=function(t){var e=new wu;return e.imageName=t,e};var Eu=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Su(t,e,n,r,i,o,a,s,u,c,l,f,p,h,d,v){var m,g=Eu.fromFeature(t,i);f===xu.vertical&&g.verticalizePunctuation();var y=ai.processBidirectionalText,b=ai.processStyledBidirectionalText;if(y&&1===g.sections.length){m=[];for(var _=0,x=y(g.toString(),Pu(g,c,o,e,r,h,d));_<x.length;_+=1){var w=x[_],E=new Eu;E.text=w,E.sections=g.sections;for(var S=0;S<w.length;S++)E.sectionIndex.push(0);m.push(E)}}else if(b){m=[];for(var C=0,T=b(g.text,g.sectionIndex,Pu(g,c,o,e,r,h,d));C<T.length;C+=1){var O=T[C],A=new Eu;A.text=O[0],A.sectionIndex=O[1],A.sections=g.sections,m.push(A)}}else m=function(t,e){for(var n=[],r=t.text,i=0,o=0,a=e;o<a.length;o+=1){var s=a[o];n.push(t.substring(i,s)),i=s}return i<r.length&&n.push(t.substring(i,r.length)),n}(g,Pu(g,c,o,e,r,h,d));var k=[],M={positionedLines:k,text:g.toString(),top:l[1],bottom:l[1],left:l[0],right:l[0],writingMode:f,iconsInText:!1,verticalizable:!1};return function(t,e,n,r,i,o,a,s,u,c,l,f){for(var p=0,h=-17,d=0,v=0,m="right"===s?1:"left"===s?0:.5,g=0,y=0,b=i;y<b.length;y+=1){var _=b[y];_.trim();var x=_.getMaxScale(),w=24*(x-1),E={positionedGlyphs:[],lineOffset:0};t.positionedLines[g]=E;var S=E.positionedGlyphs,C=0;if(_.length()){for(var T=0;T<_.length();T++){var O=_.getSection(T),A=_.getSectionIndex(T),k=_.getCharCode(T),M=0,P=null,I=null,L=null,R=24,D=!(u===xu.horizontal||!l&&!Xr(k)||l&&(Cu[k]||(G=k,Hr.Arabic(G)||Hr["Arabic Supplement"](G)||Hr["Arabic Extended-A"](G)||Hr["Arabic Presentation Forms-A"](G)||Hr["Arabic Presentation Forms-B"](G))));if(O.imageName){var N=r[O.imageName];if(!N)continue;L=O.imageName,t.iconsInText=t.iconsInText||!0,I=N.paddedRect;var j=N.displaySize;O.scale=24*O.scale/f,M=w+(24-j[1]*O.scale),R=(P={width:j[0],height:j[1],left:1,top:-3,advance:D?j[1]:j[0]}).advance;var F=D?j[0]*O.scale-24*x:j[1]*O.scale-24*x;F>0&&F>C&&(C=F)}else{var z=n[O.fontStack],B=z&&z[k];if(B&&B.rect)I=B.rect,P=B.metrics;else{var U=e[O.fontStack],V=U&&U[k];if(!V)continue;P=V.metrics}M=24*(x-O.scale)}D?(t.verticalizable=!0,S.push({glyph:k,imageName:L,x:p,y:h+M,vertical:D,scale:O.scale,fontStack:O.fontStack,sectionIndex:A,metrics:P,rect:I}),p+=R*O.scale+c):(S.push({glyph:k,imageName:L,x:p,y:h+M,vertical:D,scale:O.scale,fontStack:O.fontStack,sectionIndex:A,metrics:P,rect:I}),p+=P.advance*O.scale+c)}0!==S.length&&(d=Math.max(p-c,d),Lu(S,0,S.length-1,m,C)),p=0;var q=o*x+C;E.lineOffset=Math.max(C,w),h+=q,v=Math.max(q,v),++g}else h+=o,++g}var G,H=h- -17,W=Iu(a),X=W.horizontalAlign,Z=W.verticalAlign;(function(t,e,n,r,i,o,a,s,u){var c,l=(e-n)*i;c=o!==a?-s*r- -17:(-r*u+.5)*a;for(var f=0,p=t;f<p.length;f+=1)for(var h=0,d=p[f].positionedGlyphs;h<d.length;h+=1){var v=d[h];v.x+=l,v.y+=c}})(t.positionedLines,m,X,Z,d,v,o,H,i.length),t.top+=-Z*H,t.bottom=t.top+H,t.left+=-X*d,t.right=t.left+d}(M,e,n,r,m,a,s,u,f,c,p,v),!function(t){for(var e=0,n=t;e<n.length;e+=1)if(0!==n[e].positionedGlyphs.length)return!1;return!0}(k)&&M}Eu.fromFeature=function(t,e){for(var n=new Eu,r=0;r<t.sections.length;r++){var i=t.sections[r];i.image?n.addImageSection(i):n.addTextSection(i,e)}return n},Eu.prototype.length=function(){return this.text.length},Eu.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},Eu.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},Eu.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},Eu.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n+1)||null,i=t.charCodeAt(n-1)||null;e+=r&&Zr(r)&&!Xs[t[n+1]]||i&&Zr(i)&&!Xs[t[n-1]]||!Xs[t[n]]?t[n]:Xs[t[n]]}return e}(this.text)},Eu.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&Cu[this.text.charCodeAt(e)];e++)t++;for(var n=this.text.length,r=this.text.length-1;r>=0&&r>=t&&Cu[this.text.charCodeAt(r)];r--)n--;this.text=this.text.substring(t,n),this.sectionIndex=this.sectionIndex.slice(t,n)},Eu.prototype.substring=function(t,e){var n=new Eu;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n},Eu.prototype.toString=function(){return this.text},Eu.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce((function(e,n){return Math.max(e,t.sections[n].scale)}),0)},Eu.prototype.addTextSection=function(t,e){this.text+=t.text,this.sections.push(wu.forText(t.scale,t.fontStack||e));for(var n=this.sections.length-1,r=0;r<t.text.length;++r)this.sectionIndex.push(n)},Eu.prototype.addImageSection=function(t){var e=t.image?t.image.name:"";if(0!==e.length){var n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(wu.forImage(e)),this.sectionIndex.push(this.sections.length-1)):E("Reached maximum number of images 6401")}else E("Can't add FormattedSection with an empty image.")},Eu.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Cu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Tu={};function Ou(t,e,n,r,i,o){if(e.imageName){var a=r[e.imageName];return a?a.displaySize[0]*e.scale*24/o+i:0}var s=n[e.fontStack],u=s&&s[t];return u?u.metrics.advance*e.scale+i:0}function Au(t,e,n,r){var i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function ku(t,e,n){var r=0;return 10===t&&(r-=1e4),n&&(r+=150),40!==t&&65288!==t||(r+=50),41!==e&&65289!==e||(r+=50),r}function Mu(t,e,n,r,i,o){for(var a=null,s=Au(e,n,i,o),u=0,c=r;u<c.length;u+=1){var l=c[u],f=Au(e-l.x,n,i,o)+l.badness;f<=s&&(a=l,s=f)}return{index:t,x:e,priorBreak:a,badness:s}}function Pu(t,e,n,r,i,o,a){if("point"!==o)return[];if(!t)return[];for(var s,u=[],c=function(t,e,n,r,i,o){for(var a=0,s=0;s<t.length();s++){var u=t.getSection(s);a+=Ou(t.getCharCode(s),u,r,i,e,o)}return a/Math.max(1,Math.ceil(a/n))}(t,e,n,r,i,a),l=t.text.indexOf("\u200b")>=0,f=0,p=0;p<t.length();p++){var h=t.getSection(p),d=t.getCharCode(p);if(Cu[d]||(f+=Ou(d,h,r,i,e,a)),p<t.length()-1){var v=!((s=d)<11904||!(Hr["Bopomofo Extended"](s)||Hr.Bopomofo(s)||Hr["CJK Compatibility Forms"](s)||Hr["CJK Compatibility Ideographs"](s)||Hr["CJK Compatibility"](s)||Hr["CJK Radicals Supplement"](s)||Hr["CJK Strokes"](s)||Hr["CJK Symbols and Punctuation"](s)||Hr["CJK Unified Ideographs Extension A"](s)||Hr["CJK Unified Ideographs"](s)||Hr["Enclosed CJK Letters and Months"](s)||Hr["Halfwidth and Fullwidth Forms"](s)||Hr.Hiragana(s)||Hr["Ideographic Description Characters"](s)||Hr["Kangxi Radicals"](s)||Hr["Katakana Phonetic Extensions"](s)||Hr.Katakana(s)||Hr["Vertical Forms"](s)||Hr["Yi Radicals"](s)||Hr["Yi Syllables"](s)));(Tu[d]||v||h.imageName)&&u.push(Mu(p+1,f,c,u,ku(d,t.getCharCode(p+1),v&&l),!1))}}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Mu(t.length(),f,c,u,0,!0))}function Iu(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Lu(t,e,n,r,i){if(r||i)for(var o=t[n],a=(t[n].x+o.metrics.advance*o.scale)*r,s=e;s<=n;s++)t[s].x-=a,t[s].y+=i}function Ru(t,e,n,r,i,o){var a,s=t.image;if(s.content){var u=s.content,c=s.pixelRatio||1;a=[u[0]/c,u[1]/c,s.displaySize[0]-u[2]/c,s.displaySize[1]-u[3]/c]}var l,f,p,h,d=e.left*o,v=e.right*o;"width"===n||"both"===n?(h=i[0]+d-r[3],f=i[0]+v+r[1]):f=(h=i[0]+(d+v-s.displaySize[0])/2)+s.displaySize[0];var m=e.top*o,g=e.bottom*o;return"height"===n||"both"===n?(l=i[1]+m-r[0],p=i[1]+g+r[2]):p=(l=i[1]+(m+g-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:l,right:f,bottom:p,left:h,collisionPadding:a}}Tu[10]=!0,Tu[32]=!0,Tu[38]=!0,Tu[40]=!0,Tu[41]=!0,Tu[43]=!0,Tu[45]=!0,Tu[47]=!0,Tu[173]=!0,Tu[183]=!0,Tu[8203]=!0,Tu[8208]=!0,Tu[8211]=!0,Tu[8231]=!0;var Du=function(t){function e(e,n,r,i){t.call(this,e,n),this.angle=r,void 0!==i&&(this.segment=i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(i);function Nu(t,e){var n=e.expression;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new si(t+1))};if("source"===n.kind)return{kind:"source"};for(var r=n.zoomStops,i=n.interpolationType,o=0;o<r.length&&r[o]<=t;)o++;for(var a=o=Math.max(0,o-1);a<r.length&&r[a]<t+1;)a++;a=Math.min(r.length-1,a);var s=r[o],u=r[a];return"composite"===n.kind?{kind:"composite",minZoom:s,maxZoom:u,interpolationType:i}:{kind:"camera",minZoom:s,maxZoom:u,minSize:n.evaluate(new si(s)),maxSize:n.evaluate(new si(u)),interpolationType:i}}function ju(t,e,n){var r=e.uSize,i=n.lowerSize;return"source"===t.kind?i/128:"composite"===t.kind?Ge(i/128,n.upperSize/128,e.uSizeT):r}function Fu(t,e){var n=0,r=0;if("constant"===t.kind)r=t.layoutSize;else if("source"!==t.kind){var i=t.interpolationType,o=i?l(an.interpolationFactor(i,e,t.minZoom,t.maxZoom),0,1):0;"camera"===t.kind?r=Ge(t.minSize,t.maxSize,o):n=o}return{uSizeT:n,uSize:r}}Fr("Anchor",Du);var zu=Object.freeze({__proto__:null,getSizeData:Nu,evaluateSizeForFeature:ju,evaluateSizeForZoom:Fu,SIZE_PACK_FACTOR:128});function Bu(t,e,n,r,i){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-n/2;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var u=[],c=0;s<n/2;){var l=t[a],f=t[a+1];if(!f)return!1;var p=t[a-1].angleTo(l)-l.angleTo(f);for(p=Math.abs((p+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:p}),c+=p;s-u[0].distance>r;)c-=u.shift().angleDelta;if(c>i)return!1;a++,s+=l.dist(f)}return!0}function Uu(t){for(var e=0,n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function Vu(t,e,n){return t?.6*e*n:0}function qu(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Gu(t,e,n,r,i,o){for(var a=Vu(n,i,o),s=qu(n,r)*o,u=0,c=Uu(t)/2,l=0;l<t.length-1;l++){var f=t[l],p=t[l+1],h=f.dist(p);if(u+h>c){var d=(c-u)/h,v=Ge(f.x,p.x,d),m=Ge(f.y,p.y,d),g=new Du(v,m,p.angleTo(f),l);return g._round(),!a||Bu(t,g,s,a,e)?g:void 0}u+=h}}function Hu(t,e,n,r,i,o,a,s,u){var c=Vu(r,o,a),l=qu(r,i),f=l*a,p=0===t[0].x||t[0].x===u||0===t[0].y||t[0].y===u;return e-f<e/4&&(e=f+e/4),function t(e,n,r,i,o,a,s,u,c){for(var l=a/2,f=Uu(e),p=0,h=n-r,d=[],v=0;v<e.length-1;v++){for(var m=e[v],g=e[v+1],y=m.dist(g),b=g.angleTo(m);h+r<p+y;){var _=((h+=r)-p)/y,x=Ge(m.x,g.x,_),w=Ge(m.y,g.y,_);if(x>=0&&x<c&&w>=0&&w<c&&h-l>=0&&h+l<=f){var E=new Du(x,w,b,v);E._round(),i&&!Bu(e,E,a,i,o)||d.push(E)}}p+=y}return u||d.length||s||(d=t(e,p/2,r,i,o,a,s,!0,c)),d}(t,p?e/2*s%e:(l/2+2*o)*a*s%e,e,c,n,f,p,!1,u)}function Wu(t,e,n,r,o){for(var a=[],s=0;s<t.length;s++)for(var u=t[s],c=void 0,l=0;l<u.length-1;l++){var f=u[l],p=u[l+1];f.x<e&&p.x<e||(f.x<e?f=new i(e,f.y+(e-f.x)/(p.x-f.x)*(p.y-f.y))._round():p.x<e&&(p=new i(e,f.y+(e-f.x)/(p.x-f.x)*(p.y-f.y))._round()),f.y<n&&p.y<n||(f.y<n?f=new i(f.x+(n-f.y)/(p.y-f.y)*(p.x-f.x),n)._round():p.y<n&&(p=new i(f.x+(n-f.y)/(p.y-f.y)*(p.x-f.x),n)._round()),f.x>=r&&p.x>=r||(f.x>=r?f=new i(r,f.y+(r-f.x)/(p.x-f.x)*(p.y-f.y))._round():p.x>=r&&(p=new i(r,f.y+(r-f.x)/(p.x-f.x)*(p.y-f.y))._round()),f.y>=o&&p.y>=o||(f.y>=o?f=new i(f.x+(o-f.y)/(p.y-f.y)*(p.x-f.x),o)._round():p.y>=o&&(p=new i(f.x+(o-f.y)/(p.y-f.y)*(p.x-f.x),o)._round()),c&&f.equals(c[c.length-1])||a.push(c=[f]),c.push(p)))))}return a}function Xu(t,e,n,r){var o=[],a=t.image,s=a.pixelRatio,u=a.paddedRect.w-2,c=a.paddedRect.h-2,l=t.right-t.left,f=t.bottom-t.top,p=a.stretchX||[[0,u]],h=a.stretchY||[[0,c]],d=function(t,e){return t+e[1]-e[0]},v=p.reduce(d,0),m=h.reduce(d,0),g=u-v,y=c-m,b=0,_=v,x=0,w=m,E=0,S=g,C=0,T=y;if(a.content&&r){var O=a.content;b=Zu(p,0,O[0]),x=Zu(h,0,O[1]),_=Zu(p,O[0],O[2]),w=Zu(h,O[1],O[3]),E=O[0]-b,C=O[1]-x,S=O[2]-O[0]-_,T=O[3]-O[1]-w}var A=function(r,o,u,c){var p=Ku(r.stretch-b,_,l,t.left),h=Ju(r.fixed-E,S,r.stretch,v),d=Ku(o.stretch-x,w,f,t.top),g=Ju(o.fixed-C,T,o.stretch,m),y=Ku(u.stretch-b,_,l,t.left),O=Ju(u.fixed-E,S,u.stretch,v),A=Ku(c.stretch-x,w,f,t.top),k=Ju(c.fixed-C,T,c.stretch,m),M=new i(p,d),P=new i(y,d),I=new i(y,A),L=new i(p,A),R=new i(h/s,g/s),D=new i(O/s,k/s),N=e*Math.PI/180;if(N){var j=Math.sin(N),F=Math.cos(N),z=[F,-j,j,F];M._matMult(z),P._matMult(z),L._matMult(z),I._matMult(z)}var B=r.stretch+r.fixed,U=o.stretch+o.fixed;return{tl:M,tr:P,bl:L,br:I,tex:{x:a.paddedRect.x+1+B,y:a.paddedRect.y+1+U,w:u.stretch+u.fixed-B,h:c.stretch+c.fixed-U},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:R,pixelOffsetBR:D,minFontScaleX:S/s/l,minFontScaleY:T/s/f,isSDF:n}};if(r&&(a.stretchX||a.stretchY))for(var k=Yu(p,g,v),M=Yu(h,y,m),P=0;P<k.length-1;P++)for(var I=k[P],L=k[P+1],R=0;R<M.length-1;R++)o.push(A(I,M[R],L,M[R+1]));else o.push(A({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:u+1},{fixed:0,stretch:c+1}));return o}function Zu(t,e,n){for(var r=0,i=0,o=t;i<o.length;i+=1){var a=o[i];r+=Math.max(e,Math.min(n,a[1]))-Math.max(e,Math.min(n,a[0]))}return r}function Yu(t,e,n){for(var r=[{fixed:-1,stretch:0}],i=0,o=t;i<o.length;i+=1){var a=o[i],s=a[0],u=a[1],c=r[r.length-1];r.push({fixed:s-c.stretch,stretch:c.stretch}),r.push({fixed:s-c.stretch,stretch:c.stretch+(u-s)})}return r.push({fixed:e+1,stretch:n}),r}function Ku(t,e,n,r){return t/e*n+r}function Ju(t,e,n,r){return t-e*n/r}var Qu=function(t,e,n,r,o,a,s,u,c,l){if(this.boxStartIndex=t.length,c){var f=a.top,p=a.bottom,h=a.collisionPadding;h&&(f-=h[1],p+=h[3]);var d=p-f;d>0&&(d=Math.max(10,d),this.circleDiameter=d)}else{var v=a.top*s-u,m=a.bottom*s+u,g=a.left*s-u,y=a.right*s+u,b=a.collisionPadding;if(b&&(g-=b[0]*s,v-=b[1]*s,y+=b[2]*s,m+=b[3]*s),l){var _=new i(g,v),x=new i(y,v),w=new i(g,m),E=new i(y,m),S=l*Math.PI/180;_._rotate(S),x._rotate(S),w._rotate(S),E._rotate(S),g=Math.min(_.x,x.x,w.x,E.x),y=Math.max(_.x,x.x,w.x,E.x),v=Math.min(_.y,x.y,w.y,E.y),m=Math.max(_.y,x.y,w.y,E.y)}t.emplaceBack(e.x,e.y,g,v,y,m,n,r,o)}this.boxEndIndex=t.length},$u=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=tc),this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)};function tc(t,e){return t<e?-1:t>e?1:0}function ec(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!1);for(var r=1/0,o=1/0,a=-1/0,s=-1/0,u=t[0],c=0;c<u.length;c++){var l=u[c];(!c||l.x<r)&&(r=l.x),(!c||l.y<o)&&(o=l.y),(!c||l.x>a)&&(a=l.x),(!c||l.y>s)&&(s=l.y)}var f=Math.min(a-r,s-o),p=f/2,h=new $u([],nc);if(0===f)return new i(r,o);for(var d=r;d<a;d+=f)for(var v=o;v<s;v+=f)h.push(new rc(d+p,v+p,p,t));for(var m=function(t){for(var e=0,n=0,r=0,i=t[0],o=0,a=i.length,s=a-1;o<a;s=o++){var u=i[o],c=i[s],l=u.x*c.y-c.x*u.y;n+=(u.x+c.x)*l,r+=(u.y+c.y)*l,e+=3*l}return new rc(n/e,r/e,0,t)}(t),g=h.length;h.length;){var y=h.pop();(y.d>m.d||!m.d)&&(m=y,n&&console.log("found best %d after %d probes",Math.round(1e4*y.d)/1e4,g)),y.max-m.d<=e||(h.push(new rc(y.p.x-(p=y.h/2),y.p.y-p,p,t)),h.push(new rc(y.p.x+p,y.p.y-p,p,t)),h.push(new rc(y.p.x-p,y.p.y+p,p,t)),h.push(new rc(y.p.x+p,y.p.y+p,p,t)),g+=4)}return n&&(console.log("num probes: "+g),console.log("best distance: "+m.d)),m.p}function nc(t,e){return e.max-t.max}function rc(t,e,n,r){this.p=new i(t,e),this.h=n,this.d=function(t,e){for(var n=!1,r=1/0,i=0;i<e.length;i++)for(var o=e[i],a=0,s=o.length,u=s-1;a<s;u=a++){var c=o[a],l=o[u];c.y>t.y!=l.y>t.y&&t.x<(l.x-c.x)*(t.y-c.y)/(l.y-c.y)+c.x&&(n=!n),r=Math.min(r,Jo(t,c,l))}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}$u.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},$u.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}},$u.prototype.peek=function(){return this.data[0]},$u.prototype._up=function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},$u.prototype._down=function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=e[o],s=o+1;if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,i)>=0)break;e[t]=a,t=o}e[t]=i};var ic=Number.POSITIVE_INFINITY;function oc(t,e){return e[1]!==ic?function(t,e,n){var r=0,i=0;switch(e=Math.abs(e),n=Math.abs(n),t){case"top-right":case"top-left":case"top":i=n-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-n}switch(t){case"top-right":case"bottom-right":case"right":r=-e;break;case"top-left":case"bottom-left":case"left":r=e}return[r,i]}(t,e[0],e[1]):function(t,e){var n=0,r=0;e<0&&(e=0);var i=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":r=i-7;break;case"bottom-right":case"bottom-left":r=7-i;break;case"bottom":r=7-e;break;case"top":r=e-7}switch(t){case"top-right":case"bottom-right":n=-i;break;case"top-left":case"bottom-left":n=i;break;case"left":n=e;break;case"right":n=-e}return[n,r]}(t,e[0])}function ac(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function sc(t,e,n,r,o,a,s,u,c,l,f,p,h,d,v){var m=function(t,e,n,r,o,a,s,u){for(var c=r.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,l=[],f=0,p=e.positionedLines;f<p.length;f+=1)for(var h=p[f],d=0,v=h.positionedGlyphs;d<v.length;d+=1){var m=v[d];if(m.rect){var g=m.rect||{},y=4,b=!0,_=1,x=0,w=(o||u)&&m.vertical,E=m.metrics.advance*m.scale/2;if(u&&e.verticalizable&&(x=h.lineOffset/2-(m.imageName?-(24-m.metrics.width*m.scale)/2:24*(m.scale-1))),m.imageName){var S=s[m.imageName];b=S.sdf,y=1/(_=S.pixelRatio)}var C=o?[m.x+E,m.y]:[0,0],T=o?[0,0]:[m.x+E+n[0],m.y+n[1]-x],O=[0,0];w&&(O=T,T=[0,0]);var A=(m.metrics.left-y)*m.scale-E+T[0],k=(-m.metrics.top-y)*m.scale+T[1],M=A+g.w*m.scale/_,P=k+g.h*m.scale/_,I=new i(A,k),L=new i(M,k),R=new i(A,P),D=new i(M,P);if(w){var N=new i(-E,E- -17),j=-Math.PI/2,F=12-E,z=new i(22-F,-(m.imageName?F:0)),B=new(Function.prototype.bind.apply(i,[null].concat(O)));I._rotateAround(j,N)._add(z)._add(B),L._rotateAround(j,N)._add(z)._add(B),R._rotateAround(j,N)._add(z)._add(B),D._rotateAround(j,N)._add(z)._add(B)}if(c){var U=Math.sin(c),V=Math.cos(c),q=[V,-U,U,V];I._matMult(q),L._matMult(q),R._matMult(q),D._matMult(q)}var G=new i(0,0),H=new i(0,0);l.push({tl:I,tr:L,bl:R,br:D,tex:g,writingMode:e.writingMode,glyphOffset:C,sectionIndex:m.sectionIndex,isSDF:b,pixelOffsetTL:G,pixelOffsetBR:H,minFontScaleX:0,minFontScaleY:0})}}return l}(0,n,u,o,a,s,r,t.allowVerticalPlacement),g=t.textSizeData,y=null;"source"===g.kind?(y=[128*o.layout.get("text-size").evaluate(s,{})])[0]>32640&&E(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===g.kind&&((y=[128*d.compositeTextSizes[0].evaluate(s,{},v),128*d.compositeTextSizes[1].evaluate(s,{},v)])[0]>32640||y[1]>32640)&&E(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),t.addSymbols(t.text,m,y,u,a,s,l,e,c.lineStartIndex,c.lineLength,h,v);for(var b=0,_=f;b<_.length;b+=1)p[_[b]]=t.text.placedSymbolArray.length-1;return 4*m.length}function uc(t){for(var e in t)return t[e];return null}function cc(t,e,n,r){var i=t.compareText;if(e in i){for(var o=i[e],a=o.length-1;a>=0;a--)if(r.dist(o[a])<n)return!0}else i[e]=[];return i[e].push(r),!1}var lc=_s.VectorTileFeature.types,fc=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function pc(t,e,n,r,i,o,a,s,u,c,l,f,p){var h=s?Math.min(32640,Math.round(s[0])):0,d=s?Math.min(32640,Math.round(s[1])):0;t.emplaceBack(e,n,Math.round(32*r),Math.round(32*i),o,a,(h<<1)+(u?1:0),d,16*c,16*l,256*f,256*p)}function hc(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}function dc(t){for(var e=0,n=t.sections;e<n.length;e+=1)if(Jr(n[e].text))return!0;return!1}var vc=function(t){this.layoutVertexArray=new Ri,this.indexArray=new Ui,this.programConfigurations=t,this.segments=new so,this.dynamicLayoutVertexArray=new Di,this.opacityVertexArray=new Ni,this.placedSymbolArray=new $i};vc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},vc.prototype.upload=function(t,e,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Us.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Vs.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,fc,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(t))},vc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Fr("SymbolBuffers",vc);var mc=function(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new so,this.collisionVertexArray=new Bi};mc.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,qs.members,!0)},mc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Fr("CollisionBuffers",mc);var gc=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=sa([]),this.placementViewportMatrix=sa([]);var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Nu(this.zoom,e["text-size"]),this.iconSizeData=Nu(this.zoom,e["icon-size"]);var n=this.layers[0].layout,r=n.get("symbol-sort-key"),i=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==i&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===n.get("symbol-placement")&&(this.writingModes=n.get("text-writing-mode").map((function(t){return xu[t]}))),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id})),this.sourceID=t.sourceID};gc.prototype.createArrays=function(){this.text=new vc(new Do(this.layers,this.zoom,(function(t){return/^text/.test(t)}))),this.icon=new vc(new Do(this.layers,this.zoom,(function(t){return/^icon/.test(t)}))),this.glyphOffsetArray=new no,this.lineVertexArray=new ro,this.symbolInstances=new eo},gc.prototype.calculateGlyphDependencies=function(t,e,n,r,i){for(var o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(n||r)&&i){var a=Xs[t.charAt(o)];a&&(e[a.charCodeAt(0)]=!0)}},gc.prototype.populate=function(t,e,n){var r=this.layers[0],i=r.layout,o=i.get("text-font"),a=i.get("text-field"),s=i.get("icon-image"),u=("constant"!==a.value.kind||a.value.value instanceof re&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),c="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,l=i.get("symbol-sort-key");if(this.features=[],u||c){for(var f=e.iconDependencies,p=e.glyphDependencies,h=e.availableImages,d=new si(this.zoom),v=0,m=t;v<m.length;v+=1){var g=m[v],y=g.feature,b=g.id,_=g.index,x=g.sourceLayerIndex,w=r._featureFilter.needGeometry,E=Uo(y,w);if(r._featureFilter.filter(d,E,n)){w||(E.geometry=Bo(y));var S=void 0;if(u){var C=r.getValueAndResolveTokens("text-field",E,n,h),T=re.factory(C);dc(T)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===ii()||this.hasRTLText&&ai.isParsed())&&(S=Ws(T,r,E))}var O=void 0;if(c){var A=r.getValueAndResolveTokens("icon-image",E,n,h);O=A instanceof ie?A:ie.fromString(A)}if(S||O){var k=this.sortFeaturesByKey?l.evaluate(E,{},n):void 0;if(this.features.push({id:b,text:S,icon:O,index:_,sourceLayerIndex:x,geometry:E.geometry,properties:y.properties,type:lc[y.type],sortKey:k}),O&&(f[O.name]=!0),S){var M=o.evaluate(E,{},n).join(","),P="map"===i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(xu.vertical)>=0;for(var I=0,L=S.sections;I<L.length;I+=1){var R=L[I];if(R.image)f[R.image.name]=!0;else{var D=Wr(S.toString()),N=R.fontStack||M,j=p[N]=p[N]||{};this.calculateGlyphDependencies(R.text,j,P,this.allowVerticalPlacement,D)}}}}}}"line"===i.get("symbol-placement")&&(this.features=function(t){var e={},n={},r=[],i=0;function o(e){r.push(t[e]),i++}function a(t,e,i){var o=n[t];return delete n[t],n[e]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function s(t,n,i){var o=e[n];return delete e[n],e[t]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function u(t,e,n){var r=n?e[0][e[0].length-1]:e[0][0];return t+":"+r.x+":"+r.y}for(var c=0;c<t.length;c++){var l=t[c],f=l.geometry,p=l.text?l.text.toString():null;if(p){var h=u(p,f),d=u(p,f,!0);if(h in n&&d in e&&n[h]!==e[d]){var v=s(h,d,f),m=a(h,d,r[v].geometry);delete e[h],delete n[d],n[u(p,r[m].geometry,!0)]=m,r[v].geometry=null}else h in n?a(h,d,f):d in e?s(h,d,f):(o(c),e[h]=i-1,n[d]=i-1)}else o(c)}return r.filter((function(t){return t.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(t,e){return t.sortKey-e.sortKey}))}},gc.prototype.update=function(t,e,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n))},gc.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},gc.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},gc.prototype.upload=function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},gc.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},gc.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},gc.prototype.addToLineVertexArray=function(t,e){var n=this.lineVertexArray.length;if(void 0!==t.segment){for(var r=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:r},a<e.length-1&&(r+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=e[s-1].dist(e[s]));for(var u=0;u<e.length;u++){var c=o[u];this.lineVertexArray.emplaceBack(c.x,c.y,c.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},gc.prototype.addSymbols=function(t,e,n,r,i,o,a,s,u,c,l,f){for(var p=t.indexArray,h=t.layoutVertexArray,d=t.segments.prepareSegment(4*e.length,h,p,this.canOverlap?o.sortKey:void 0),v=this.glyphOffsetArray.length,m=d.vertexLength,g=this.allowVerticalPlacement&&a===xu.vertical?Math.PI/2:0,y=o.text&&o.text.sections,b=0;b<e.length;b++){var _=e[b],x=_.tl,w=_.tr,E=_.bl,S=_.br,C=_.tex,T=_.pixelOffsetTL,O=_.pixelOffsetBR,A=_.minFontScaleX,k=_.minFontScaleY,M=_.glyphOffset,P=_.isSDF,I=_.sectionIndex,L=d.vertexLength,R=M[1];pc(h,s.x,s.y,x.x,R+x.y,C.x,C.y,n,P,T.x,T.y,A,k),pc(h,s.x,s.y,w.x,R+w.y,C.x+C.w,C.y,n,P,O.x,T.y,A,k),pc(h,s.x,s.y,E.x,R+E.y,C.x,C.y+C.h,n,P,T.x,O.y,A,k),pc(h,s.x,s.y,S.x,R+S.y,C.x+C.w,C.y+C.h,n,P,O.x,O.y,A,k),hc(t.dynamicLayoutVertexArray,s,g),p.emplaceBack(L,L+1,L+2),p.emplaceBack(L+1,L+2,L+3),d.vertexLength+=4,d.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(M[0]),b!==e.length-1&&I===e[b+1].sectionIndex||t.programConfigurations.populatePaintArrays(h.length,o,o.index,{},f,y&&y[I])}t.placedSymbolArray.emplaceBack(s.x,s.y,v,this.glyphOffsetArray.length-v,m,u,c,s.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,0,!1,0,l)},gc.prototype._addCollisionDebugVertex=function(t,e,n,r,i,o){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,r,i,Math.round(o.x),Math.round(o.y))},gc.prototype.addCollisionDebugVertices=function(t,e,n,r,o,a,s){var u=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),c=u.vertexLength,l=o.layoutVertexArray,f=o.collisionVertexArray,p=s.anchorX,h=s.anchorY;this._addCollisionDebugVertex(l,f,a,p,h,new i(t,e)),this._addCollisionDebugVertex(l,f,a,p,h,new i(n,e)),this._addCollisionDebugVertex(l,f,a,p,h,new i(n,r)),this._addCollisionDebugVertex(l,f,a,p,h,new i(t,r)),u.vertexLength+=4;var d=o.indexArray;d.emplaceBack(c,c+1),d.emplaceBack(c+1,c+2),d.emplaceBack(c+2,c+3),d.emplaceBack(c+3,c),u.primitiveLength+=4},gc.prototype.addDebugCollisionBoxes=function(t,e,n,r){for(var i=t;i<e;i++){var o=this.collisionBoxArray.get(i);this.addCollisionDebugVertices(o.x1,o.y1,o.x2,o.y2,r?this.textCollisionBox:this.iconCollisionBox,o.anchorPoint,n)}},gc.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new mc(Fi,Gs.members,Xi),this.iconCollisionBox=new mc(Fi,Gs.members,Xi);for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},gc.prototype._deserializeCollisionBoxesForSymbol=function(t,e,n,r,i,o,a,s,u){for(var c={},l=e;l<n;l++){var f=t.get(l);c.textBox={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2,anchorPointX:f.anchorPointX,anchorPointY:f.anchorPointY},c.textFeatureIndex=f.featureIndex;break}for(var p=r;p<i;p++){var h=t.get(p);c.verticalTextBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2,anchorPointX:h.anchorPointX,anchorPointY:h.anchorPointY},c.verticalTextFeatureIndex=h.featureIndex;break}for(var d=o;d<a;d++){var v=t.get(d);c.iconBox={x1:v.x1,y1:v.y1,x2:v.x2,y2:v.y2,anchorPointX:v.anchorPointX,anchorPointY:v.anchorPointY},c.iconFeatureIndex=v.featureIndex;break}for(var m=s;m<u;m++){var g=t.get(m);c.verticalIconBox={x1:g.x1,y1:g.y1,x2:g.x2,y2:g.y2,anchorPointX:g.anchorPointX,anchorPointY:g.anchorPointY},c.verticalIconFeatureIndex=g.featureIndex;break}return c},gc.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}},gc.prototype.hasTextData=function(){return this.text.segments.get().length>0},gc.prototype.hasIconData=function(){return this.icon.segments.get().length>0},gc.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},gc.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},gc.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},gc.prototype.addIndicesForPlacedSymbol=function(t,e){for(var n=t.placedSymbolArray.get(e),r=n.vertexStartIndex+4*n.numGlyphs,i=n.vertexStartIndex;i<r;i+=4)t.indexArray.emplaceBack(i,i+1,i+2),t.indexArray.emplaceBack(i+1,i+2,i+3)},gc.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),n=Math.cos(t),r=[],i=[],o=[],a=0;a<this.symbolInstances.length;++a){o.push(a);var s=this.symbolInstances.get(a);r.push(0|Math.round(e*s.anchorX+n*s.anchorY)),i.push(s.featureIndex)}return o.sort((function(t,e){return r[t]-r[e]||i[e]-i[t]})),o},gc.prototype.addToSortKeyRanges=function(t,e){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===e?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})},gc.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var n=0,r=this.symbolInstanceIndexes;n<r.length;n+=1){var i=this.symbolInstances.get(r[n]);this.featureSortOrder.push(i.featureIndex),[i.rightJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.leftJustifiedTextSymbolIndex].forEach((function(t,n,r){t>=0&&r.indexOf(t)===n&&e.addIndicesForPlacedSymbol(e.text,t)})),i.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,i.verticalPlacedTextSymbolIndex),i.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,i.placedIconSymbolIndex),i.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,i.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Fr("SymbolBucket",gc,{omit:["layers","collisionBoxArray","features","compareText"]}),gc.MAX_GLYPHS=65535,gc.addDynamicAttributes=hc;var yc=new xi({"symbol-placement":new mi(kt.layout_symbol["symbol-placement"]),"symbol-spacing":new mi(kt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new mi(kt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new gi(kt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new mi(kt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new mi(kt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new mi(kt.layout_symbol["icon-ignore-placement"]),"icon-optional":new mi(kt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new mi(kt.layout_symbol["icon-rotation-alignment"]),"icon-size":new gi(kt.layout_symbol["icon-size"]),"icon-text-fit":new mi(kt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new mi(kt.layout_symbol["icon-text-fit-padding"]),"icon-image":new gi(kt.layout_symbol["icon-image"]),"icon-rotate":new gi(kt.layout_symbol["icon-rotate"]),"icon-padding":new mi(kt.layout_symbol["icon-padding"]),"icon-keep-upright":new mi(kt.layout_symbol["icon-keep-upright"]),"icon-offset":new gi(kt.layout_symbol["icon-offset"]),"icon-anchor":new gi(kt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new mi(kt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new mi(kt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new mi(kt.layout_symbol["text-rotation-alignment"]),"text-field":new gi(kt.layout_symbol["text-field"]),"text-font":new gi(kt.layout_symbol["text-font"]),"text-size":new gi(kt.layout_symbol["text-size"]),"text-max-width":new gi(kt.layout_symbol["text-max-width"]),"text-line-height":new mi(kt.layout_symbol["text-line-height"]),"text-letter-spacing":new gi(kt.layout_symbol["text-letter-spacing"]),"text-justify":new gi(kt.layout_symbol["text-justify"]),"text-radial-offset":new gi(kt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new mi(kt.layout_symbol["text-variable-anchor"]),"text-anchor":new gi(kt.layout_symbol["text-anchor"]),"text-max-angle":new mi(kt.layout_symbol["text-max-angle"]),"text-writing-mode":new mi(kt.layout_symbol["text-writing-mode"]),"text-rotate":new gi(kt.layout_symbol["text-rotate"]),"text-padding":new mi(kt.layout_symbol["text-padding"]),"text-keep-upright":new mi(kt.layout_symbol["text-keep-upright"]),"text-transform":new gi(kt.layout_symbol["text-transform"]),"text-offset":new gi(kt.layout_symbol["text-offset"]),"text-allow-overlap":new mi(kt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new mi(kt.layout_symbol["text-ignore-placement"]),"text-optional":new mi(kt.layout_symbol["text-optional"])}),bc={paint:new xi({"icon-opacity":new gi(kt.paint_symbol["icon-opacity"]),"icon-color":new gi(kt.paint_symbol["icon-color"]),"icon-halo-color":new gi(kt.paint_symbol["icon-halo-color"]),"icon-halo-width":new gi(kt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new gi(kt.paint_symbol["icon-halo-blur"]),"icon-translate":new mi(kt.paint_symbol["icon-translate"]),"icon-translate-anchor":new mi(kt.paint_symbol["icon-translate-anchor"]),"text-opacity":new gi(kt.paint_symbol["text-opacity"]),"text-color":new gi(kt.paint_symbol["text-color"],{runtimeType:Ut,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new gi(kt.paint_symbol["text-halo-color"]),"text-halo-width":new gi(kt.paint_symbol["text-halo-width"]),"text-halo-blur":new gi(kt.paint_symbol["text-halo-blur"]),"text-translate":new mi(kt.paint_symbol["text-translate"]),"text-translate-anchor":new mi(kt.paint_symbol["text-translate-anchor"])}),layout:yc},_c=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:jt,this.defaultValue=t};_c.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification["default"]},_c.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},_c.prototype.outputDefined=function(){return!1},_c.prototype.serialize=function(){return null},Fr("FormatSectionOverride",_c,{omit:["defaultValue"]});var xc=function(t){function e(e){t.call(this,e,bc)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,n){if(t.prototype.recalculate.call(this,e,n),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var r=this.layout.get("text-writing-mode");if(r){for(var i=[],o=0,a=r;o<a.length;o+=1){var s=a[o];i.indexOf(s)<0&&i.push(s)}this.layout._values["text-writing-mode"]=i}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},e.prototype.getValueAndResolveTokens=function(t,e,n,r){var i=this.layout.get(t).evaluate(e,{},n,r),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||Wn(o.value)||!i?i:function(t,e){return e.replace(/{([^{}]+)}/g,(function(e,n){return n in t?String(t[n]):""}))}(e.properties,i)},e.prototype.createBucket=function(t){return new gc(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype._setPaintOverrides=function(){for(var t=0,n=bc.paint.overridableProperties;t<n.length;t+=1){var r=n[t];if(e.hasPaintOverride(this.layout,r)){var i,o=this.paint.get(r),a=new _c(o),s=new Hn(a,o.property.specification);i="constant"===o.value.kind||"source"===o.value.kind?new Zn("source",s):new Yn("composite",s,o.value.zoomStops,o.value._interpolationType),this.paint._values[r]=new di(o.property,i,o.parameters)}}},e.prototype._handleOverridablePaintPropertyUpdate=function(t,n,r){return!(!this.layout||n.isDataDriven()||r.isDataDriven())&&e.hasPaintOverride(this.layout,t)},e.hasPaintOverride=function(t,e){var n=t.get("text-field"),r=bc.paint.properties[e],i=!1,o=function(t){for(var e=0,n=t;e<n.length;e+=1)if(r.overrides&&r.overrides.hasOverride(n[e]))return void(i=!0)};if("constant"===n.value.kind&&n.value.value instanceof re)o(n.value.value.sections);else if("source"===n.value.kind){var a=function t(e){i||(e instanceof ce&&se(e.value)===Ht?o(e.value.sections):e instanceof he?o(e.sections):e.eachChild(t))},s=n.value;s._styleExpression&&a(s._styleExpression.expression)}return i},e}(wi),wc={paint:new xi({"background-color":new mi(kt.paint_background["background-color"]),"background-pattern":new bi(kt.paint_background["background-pattern"]),"background-opacity":new mi(kt.paint_background["background-opacity"])})},Ec=function(t){function e(e){t.call(this,e,wc)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(wi),Sc={paint:new xi({"raster-opacity":new mi(kt.paint_raster["raster-opacity"]),"raster-hue-rotate":new mi(kt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new mi(kt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new mi(kt.paint_raster["raster-brightness-max"]),"raster-saturation":new mi(kt.paint_raster["raster-saturation"]),"raster-contrast":new mi(kt.paint_raster["raster-contrast"]),"raster-resampling":new mi(kt.paint_raster["raster-resampling"]),"raster-fade-duration":new mi(kt.paint_raster["raster-fade-duration"])})},Cc=function(t){function e(e){t.call(this,e,Sc)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(wi),Tc=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},e}(wi),Oc={circle:pa,heatmap:wa,hillshade:Sa,fill:ls,"fill-extrusion":Os,line:zs,symbol:xc,background:Ec,raster:Cc},Ac=a.HTMLImageElement,kc=a.HTMLCanvasElement,Mc=a.HTMLVideoElement,Pc=a.ImageData,Ic=a.ImageBitmap,Lc=function(t,e,n,r){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,r)};Lc.prototype.update=function(t,e,n){var r=t.width,i=t.height,o=!(this.size&&this.size[0]===r&&this.size[1]===i||n),a=this.context,s=a.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),o)this.size=[r,i],t instanceof Ac||t instanceof kc||t instanceof Mc||t instanceof Pc||Ic&&t instanceof Ic?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,r,i,0,this.format,s.UNSIGNED_BYTE,t.data);else{var u=n||{x:0,y:0},c=u.x,l=u.y;t instanceof Ac||t instanceof kc||t instanceof Mc||t instanceof Pc||Ic&&t instanceof Ic?s.texSubImage2D(s.TEXTURE_2D,0,c,l,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,c,l,r,i,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},Lc.prototype.bind=function(t,e,n){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)},Lc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Lc.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Rc=function(t){var e=this;this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})};Rc.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){t._triggered=!1,t._callback()}),0))},Rc.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Dc=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},g(["receive","process"],this),this.invoker=new Rc(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=T()?t:a};function Nc(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}Dc.prototype.send=function(t,e,n,r,i){var o=this;void 0===i&&(i=!1);var a=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(this.callbacks[a]=n);var s=k(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!n,targetMapId:r,mustQueue:i,sourceMapId:this.mapId,data:Vr(e,s)},s),{cancel:function(){n&&delete o.callbacks[a],o.target.postMessage({id:a,type:"<cancel>",targetMapId:r,sourceMapId:o.mapId})}}},Dc.prototype.receive=function(t){var e=t.data,n=e.id;if(n&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[n];var r=this.cancelCallbacks[n];delete this.cancelCallbacks[n],r&&r()}else T()||e.mustQueue?(this.tasks[n]=e,this.taskQueue.push(n),this.invoker.trigger()):this.processTask(n,e)},Dc.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}},Dc.prototype.processTask=function(t,e){var n=this;if("<response>"===e.type){var r=this.callbacks[t];delete this.callbacks[t],r&&(e.error?r(qr(e.error)):r(null,qr(e.data)))}else{var i=!1,o=k(this.globalScope)?void 0:[],a=e.hasCallback?function(e,r){i=!0,delete n.cancelCallbacks[t],n.target.postMessage({id:t,type:"<response>",sourceMapId:n.mapId,error:e?Vr(e):null,data:Vr(r,o)},o)}:function(t){i=!0},s=null,u=qr(e.data);if(this.parent[e.type])s=this.parent[e.type](e.sourceMapId,u,a);else if(this.parent.getWorkerSource){var c=e.type.split(".");s=this.parent.getWorkerSource(e.sourceMapId,c[0],u.source)[c[1]](u,a)}else a(new Error("Could not find function "+e.type));!i&&s&&s.cancel&&(this.cancelCallbacks[t]=s.cancel)}},Dc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var jc=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};jc.prototype.setNorthEast=function(t){return this._ne=t instanceof Fc?new Fc(t.lng,t.lat):Fc.convert(t),this},jc.prototype.setSouthWest=function(t){return this._sw=t instanceof Fc?new Fc(t.lng,t.lat):Fc.convert(t),this},jc.prototype.extend=function(t){var e,n,r=this._sw,i=this._ne;if(t instanceof Fc)e=t,n=t;else{if(!(t instanceof jc))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(jc.convert(t)):this.extend(Fc.convert(t)):this;if(n=t._ne,!(e=t._sw)||!n)return this}return r||i?(r.lng=Math.min(e.lng,r.lng),r.lat=Math.min(e.lat,r.lat),i.lng=Math.max(n.lng,i.lng),i.lat=Math.max(n.lat,i.lat)):(this._sw=new Fc(e.lng,e.lat),this._ne=new Fc(n.lng,n.lat)),this},jc.prototype.getCenter=function(){return new Fc((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},jc.prototype.getSouthWest=function(){return this._sw},jc.prototype.getNorthEast=function(){return this._ne},jc.prototype.getNorthWest=function(){return new Fc(this.getWest(),this.getNorth())},jc.prototype.getSouthEast=function(){return new Fc(this.getEast(),this.getSouth())},jc.prototype.getWest=function(){return this._sw.lng},jc.prototype.getSouth=function(){return this._sw.lat},jc.prototype.getEast=function(){return this._ne.lng},jc.prototype.getNorth=function(){return this._ne.lat},jc.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},jc.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},jc.prototype.isEmpty=function(){return!(this._sw&&this._ne)},jc.prototype.contains=function(t){var e=Fc.convert(t),n=e.lng,r=e.lat,i=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&i},jc.convert=function(t){return!t||t instanceof jc?t:new jc(t)};var Fc=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Fc.prototype.wrap=function(){return new Fc(f(this.lng,-180,180),this.lat)},Fc.prototype.toArray=function(){return[this.lng,this.lat]},Fc.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Fc.prototype.distanceTo=function(t){var e=Math.PI/180,n=this.lat*e,r=t.lat*e,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((t.lng-this.lng)*e);return 6371008.8*Math.acos(Math.min(i,1))},Fc.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new jc(new Fc(this.lng-n,this.lat-e),new Fc(this.lng+n,this.lat+e))},Fc.convert=function(t){if(t instanceof Fc)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Fc(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Fc(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var zc=2*Math.PI*6371008.8;function Bc(t){return zc*Math.cos(t*Math.PI/180)}function Uc(t){return(180+t)/360}function Vc(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function qc(t,e){return t/Bc(e)}function Gc(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}var Hc=function(t,e,n){void 0===n&&(n=0),this.x=+t,this.y=+e,this.z=+n};Hc.fromLngLat=function(t,e){void 0===e&&(e=0);var n=Fc.convert(t);return new Hc(Uc(n.lng),Vc(n.lat),qc(e,n.lat))},Hc.prototype.toLngLat=function(){return new Fc(360*this.x-180,Gc(this.y))},Hc.prototype.toAltitude=function(){return this.z*Bc(Gc(this.y))},Hc.prototype.meterInMercatorCoordinateUnits=function(){return 1/zc*(t=Gc(this.y),1/Math.cos(t*Math.PI/180));var t};var Wc=function(t,e,n){this.z=t,this.x=e,this.y=n,this.key=Yc(0,t,t,e,n)};Wc.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},Wc.prototype.url=function(t,e){var n,r,i,o,a,s=(r=this.y,i=this.z,o=Nc(256*(n=this.x),256*(r=Math.pow(2,i)-r-1),i),a=Nc(256*(n+1),256*(r+1),i),o[0]+","+o[1]+","+a[0]+","+a[1]),u=function(t,e,n){for(var r,i="",o=t;o>0;o--)i+=(e&(r=1<<o-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)},Wc.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new i(8192*(t.x*e-this.x),8192*(t.y*e-this.y))},Wc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Xc=function(t,e){this.wrap=t,this.canonical=e,this.key=Yc(t,e.z,e.z,e.x,e.y)},Zc=function(t,e,n,r,i){this.overscaledZ=t,this.wrap=e,this.canonical=new Wc(n,+r,+i),this.key=Yc(e,t,n,r,i)};function Yc(t,e,n,r,i){(t*=2)<0&&(t=-1*t-1);var o=1<<n;return(o*o*t+o*i+r).toString(36)+n.toString(36)+e.toString(36)}Zc.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},Zc.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new Zc(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Zc(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},Zc.prototype.calculateScaledKey=function(t,e){var n=this.canonical.z-t;return t>this.canonical.z?Yc(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):Yc(this.wrap*+e,t,t,this.canonical.x>>n,this.canonical.y>>n)},Zc.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},Zc.prototype.children=function(t){if(this.overscaledZ>=t)return[new Zc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new Zc(e,this.wrap,e,n,r),new Zc(e,this.wrap,e,n+1,r),new Zc(e,this.wrap,e,n,r+1),new Zc(e,this.wrap,e,n+1,r+1)]},Zc.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},Zc.prototype.wrapped=function(){return new Zc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Zc.prototype.unwrapTo=function(t){return new Zc(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},Zc.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Zc.prototype.toUnwrapped=function(){return new Xc(this.wrap,this.canonical)},Zc.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Zc.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new Hc(t.x-this.wrap,t.y))},Fr("CanonicalTileID",Wc),Fr("OverscaledTileID",Zc,{omit:["posMatrix"]});var Kc=function(t,e,n){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return E('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var r=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=n||"mapbox";for(var i=0;i<r;i++)this.data[this._idx(-1,i)]=this.data[this._idx(0,i)],this.data[this._idx(r,i)]=this.data[this._idx(r-1,i)],this.data[this._idx(i,-1)]=this.data[this._idx(i,0)],this.data[this._idx(i,r)]=this.data[this._idx(i,r-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(r,-1)]=this.data[this._idx(r-1,0)],this.data[this._idx(-1,r)]=this.data[this._idx(0,r-1)],this.data[this._idx(r,r)]=this.data[this._idx(r-1,r-1)]};Kc.prototype.get=function(t,e){var n=new Uint8Array(this.data.buffer),r=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(n[r],n[r+1],n[r+2])},Kc.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Kc.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},Kc.prototype._unpackMapbox=function(t,e,n){return(256*t*256+256*e+n)/10-1e4},Kc.prototype._unpackTerrarium=function(t,e,n){return 256*t+e+n/256-32768},Kc.prototype.getPixels=function(){return new ba({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Kc.prototype.backfillBorder=function(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var r=e*this.dim,i=e*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(e){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}for(var s=-e*this.dim,u=-n*this.dim,c=o;c<a;c++)for(var l=r;l<i;l++)this.data[this._idx(l,c)]=t.data[this._idx(l+s,c+u)]},Fr("DEMData",Kc);var Jc=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}};Jc.prototype.encode=function(t){return this._stringToNumber[t]},Jc.prototype.decode=function(t){return this._numberToString[t]};var Qc=function(t,e,n,r,i){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=r,this.properties=t.properties,this.id=i},$c={geometry:{configurable:!0}};$c.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},$c.geometry.set=function(t){this._geometry=t},Qc.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(Qc.prototype,$c);var tl=function(){this.state={},this.stateChanges={},this.deletedStates={}};tl.prototype.updateState=function(t,e,n){var r=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][r]=this.stateChanges[t][r]||{},p(this.stateChanges[t][r],n),null===this.deletedStates[t])for(var i in this.deletedStates[t]={},this.state[t])i!==r&&(this.deletedStates[t][i]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][r])for(var o in this.deletedStates[t][r]={},this.state[t][r])n[o]||(this.deletedStates[t][r][o]=null);else for(var a in n)this.deletedStates[t]&&this.deletedStates[t][r]&&null===this.deletedStates[t][r][a]&&delete this.deletedStates[t][r][a]},tl.prototype.removeFeatureState=function(t,e,n){if(null!==this.deletedStates[t]){var r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&void 0!==e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][n]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][r])for(n in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][n]=null;else this.deletedStates[t][r]=null;else this.deletedStates[t]=null}},tl.prototype.getState=function(t,e){var n=String(e),r=p({},(this.state[t]||{})[n],(this.stateChanges[t]||{})[n]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var i=this.deletedStates[t][e];if(null===i)return{};for(var o in i)delete r[o]}return r},tl.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},tl.prototype.coalesceChanges=function(t,e){var n={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var i={};for(var o in this.stateChanges[r])this.state[r][o]||(this.state[r][o]={}),p(this.state[r][o],this.stateChanges[r][o]),i[o]=this.state[r][o];n[r]=i}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var s={};if(null===this.deletedStates[a])for(var u in this.state[a])s[u]={},this.state[a][u]={};else for(var c in this.deletedStates[a]){if(null===this.deletedStates[a][c])this.state[a][c]={};else for(var l=0,f=Object.keys(this.deletedStates[a][c]);l<f.length;l+=1)delete this.state[a][c][f[l]];s[c]=this.state[a][c]}n[a]=n[a]||{},p(n[a],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var h in t)t[h].setFeatureState(n,e)};var el=function(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Lr(8192,16,0),this.grid3D=new Lr(8192,16,0),this.featureIndexArray=new oo,this.promoteId=e};function nl(t,e,n,r,i){return b(t,(function(t,o){var a=e instanceof vi?e.get(o):null;return a&&a.evaluate?a.evaluate(n,r,i):a}))}function rl(t){for(var e=1/0,n=1/0,r=-1/0,i=-1/0,o=0,a=t;o<a.length;o+=1){var s=a[o];e=Math.min(e,s.x),n=Math.min(n,s.y),r=Math.max(r,s.x),i=Math.max(i,s.y)}return{minX:e,minY:n,maxX:r,maxY:i}}function il(t,e){return e-t}el.prototype.insert=function(t,e,n,r,i,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var s=o?this.grid3D:this.grid,u=0;u<e.length;u++){for(var c=e[u],l=[1/0,1/0,-1/0,-1/0],f=0;f<c.length;f++){var p=c[f];l[0]=Math.min(l[0],p.x),l[1]=Math.min(l[1],p.y),l[2]=Math.max(l[2],p.x),l[3]=Math.max(l[3],p.y)}l[0]<8192&&l[1]<8192&&l[2]>=0&&l[3]>=0&&s.insert(a,l[0],l[1],l[2],l[3])}},el.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new _s.VectorTile(new Ks(this.rawTileData)).layers,this.sourceLayerCoder=new Jc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},el.prototype.query=function(t,e,n,r){var o=this;this.loadVTLayers();for(var a=t.params||{},s=8192/t.tileSize/t.scale,u=ar(a.filter),c=t.queryGeometry,l=t.queryPadding*s,f=rl(c),p=this.grid.query(f.minX-l,f.minY-l,f.maxX+l,f.maxY+l),h=rl(t.cameraQueryGeometry),d=this.grid3D.query(h.minX-l,h.minY-l,h.maxX+l,h.maxY+l,(function(e,n,r,o){return function(t,e,n,r,o){for(var a=0,s=t;a<s.length;a+=1){var u=s[a];if(e<=u.x&&n<=u.y&&r>=u.x&&o>=u.y)return!0}var c=[new i(e,n),new i(e,o),new i(r,o),new i(r,n)];if(t.length>2)for(var l=0,f=c;l<f.length;l+=1)if($o(t,f[l]))return!0;for(var p=0;p<t.length-1;p++)if(ta(t[p],t[p+1],c))return!0;return!1}(t.cameraQueryGeometry,e-l,n-l,r+l,o+l)})),v=0,m=d;v<m.length;v+=1)p.push(m[v]);p.sort(il);for(var g,y={},b=function(i){var l=p[i];if(l!==g){g=l;var f=o.featureIndexArray.get(l),h=null;o.loadMatchingFeature(y,f.bucketIndex,f.sourceLayerIndex,f.featureIndex,u,a.layers,a.availableImages,e,n,r,(function(e,n,r){return h||(h=Bo(e)),n.queryIntersectsFeature(c,e,r,h,o.z,t.transform,s,t.pixelPosMatrix)}))}},_=0;_<p.length;_++)b(_);return y},el.prototype.loadMatchingFeature=function(t,e,n,r,i,o,a,s,u,c,l){var f=this.bucketLayerIDs[e];if(!o||function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(o,f)){var h=this.sourceLayerCoder.decode(n),d=this.vtLayers[h].feature(r);if(i.needGeometry){var v=Uo(d,!0);if(!i.filter(new si(this.tileID.overscaledZ),v,this.tileID.canonical))return}else if(!i.filter(new si(this.tileID.overscaledZ),d))return;for(var m=this.getId(d,h),g=0;g<f.length;g++){var y=f[g];if(!(o&&o.indexOf(y)<0)){var b=s[y];if(b){var _={};void 0!==m&&c&&(_=c.getState(b.sourceLayer||"_geojsonTileLayer",m));var x=p({},u[y]);x.paint=nl(x.paint,b.paint,d,_,a),x.layout=nl(x.layout,b.layout,d,_,a);var w=!l||l(d,b,_);if(w){var E=new Qc(d,this.z,this.x,this.y,m);E.layer=x;var S=t[y];void 0===S&&(S=t[y]=[]),S.push({featureIndex:r,feature:E,intersectionZ:w})}}}}}},el.prototype.lookupSymbolFeatures=function(t,e,n,r,i,o,a,s){var u={};this.loadVTLayers();for(var c=ar(i),l=0,f=t;l<f.length;l+=1)this.loadMatchingFeature(u,n,r,f[l],c,o,a,s,e);return u},el.prototype.hasLayer=function(t){for(var e=0,n=this.bucketLayerIDs;e<n.length;e+=1)for(var r=0,i=n[e];r<i.length;r+=1)if(t===i[r])return!0;return!1},el.prototype.getId=function(t,e){var n=t.id;return this.promoteId&&"boolean"==typeof(n=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(n=Number(n)),n},Fr("FeatureIndex",el,{omit:["rawTileData","sourceLayerCoder"]});var ol=function(t,e){this.tileID=t,this.uid=d(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ol.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<F.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},ol.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},ol.prototype.loadVectorData=function(t,e,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var r in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var n={};if(!e)return n;for(var r=function(){var t=o[i],r=t.layerIds.map((function(t){return e.getLayer(t)})).filter(Boolean);if(0!==r.length){t.layers=r,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map((function(t){return r.filter((function(e){return e.id===t}))[0]})));for(var a=0,s=r;a<s.length;a+=1)n[s[a].id]=t}},i=0,o=t;i<o.length;i+=1)r();return n}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[r];if(i instanceof gc){if(this.hasSymbolBuckets=!0,!n)break;i.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var o in this.buckets){var a=this.buckets[o];if(a instanceof gc&&a.hasRTLText){this.hasRTLText=!0,ai.isLoading()||ai.isLoaded()||"deferred"!==ii()||oi();break}}for(var s in this.queryPadding=0,this.buckets){var u=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(s).queryRadius(u))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new Ji},ol.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ol.prototype.getBucket=function(t){return this.buckets[t.id]},ol.prototype.upload=function(t){for(var e in this.buckets){var n=this.buckets[e];n.uploadPending()&&n.upload(t)}var r=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Lc(t,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Lc(t,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},ol.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},ol.prototype.queryRenderedFeatures=function(t,e,n,r,i,o,a,s,u,c){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:i,scale:o,tileSize:this.tileSize,pixelPosMatrix:c,transform:s,params:a,queryPadding:this.queryPadding*u},t,e,n):{}},ol.prototype.querySourceFeatures=function(t,e){var n=this.latestFeatureIndex;if(n&&n.rawTileData){var r=n.loadVTLayers(),i=e?e.sourceLayer:"",o=r._geojsonTileLayer||r[i];if(o)for(var a=ar(e&&e.filter),s=this.tileID.canonical,u=s.z,c=s.x,l=s.y,f={z:u,x:c,y:l},p=0;p<o.length;p++){var h=o.feature(p);if(a.needGeometry){var d=Uo(h,!0);if(!a.filter(new si(this.tileID.overscaledZ),d,this.tileID.canonical))continue}else if(!a.filter(new si(this.tileID.overscaledZ),h))continue;var v=n.getId(h,i),m=new Qc(h,u,c,l,v);m.tile=f,t.push(m)}}},ol.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},ol.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ol.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var n=O(t.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var r=Date.now(),i=!1;if(this.expirationTime>r)i=!1;else if(e)if(this.expirationTime<e)i=!0;else{var o=this.expirationTime-e;o?this.expirationTime=r+Math.max(o,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ol.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},ol.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var n=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets)if(e.style.hasLayer(r)){var i=this.buckets[r],o=i.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],s=t[o];if(a&&s&&0!==Object.keys(s).length){i.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});var u=e&&e.style&&e.style.getLayer(r);u&&(this.queryPadding=Math.max(this.queryPadding,u.queryRadius(i)))}}}},ol.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},ol.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<F.now()},ol.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ol.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=F.now()+t},ol.prototype.setDependencies=function(t,e){for(var n={},r=0,i=e;r<i.length;r+=1)n[i[r]]=!0;this.dependencies[t]=n},ol.prototype.hasDependency=function(t,e){for(var n=0,r=t;n<r.length;n+=1){var i=this.dependencies[r[n]];if(i)for(var o=0,a=e;o<a.length;o+=1)if(i[a[o]])return!0}return!1};var al=a.performance,sl=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},al.mark(this._marks.start)};sl.prototype.finish=function(){al.mark(this._marks.end);var t=al.getEntriesByName(this._marks.measure);return 0===t.length&&(al.measure(this._marks.measure,this._marks.start,this._marks.end),t=al.getEntriesByName(this._marks.measure),al.clearMarks(this._marks.start),al.clearMarks(this._marks.end),al.clearMeasures(this._marks.measure)),t},t.Actor=Dc,t.AlphaImage=ya,t.CanonicalTileID=Wc,t.CollisionBoxArray=Ji,t.Color=te,t.DEMData=Kc,t.DataConstantProperty=mi,t.DictionaryCoder=Jc,t.EXTENT=8192,t.ErrorEvent=Ot,t.EvaluationParameters=si,t.Event=Tt,t.Evented=At,t.FeatureIndex=el,t.FillBucket=ss,t.FillExtrusionBucket=Ss,t.ImageAtlas=_u,t.ImagePosition=yu,t.LineBucket=Ds,t.LngLat=Fc,t.LngLatBounds=jc,t.MercatorCoordinate=Hc,t.ONE_EM=24,t.OverscaledTileID=Zc,t.Point=i,t.Point$1=i,t.Properties=xi,t.Protobuf=Ks,t.RGBAImage=ba,t.RequestManager=H,t.RequestPerformance=sl,t.ResourceType=dt,t.SegmentVector=so,t.SourceFeatureState=tl,t.StructArrayLayout1ui2=Zi,t.StructArrayLayout2f1f2i16=zi,t.StructArrayLayout2i4=Ai,t.StructArrayLayout3ui6=Ui,t.StructArrayLayout4i8=ki,t.SymbolBucket=gc,t.Texture=Lc,t.Tile=ol,t.Transitionable=li,t.Uniform1f=xo,t.Uniform1i=_o,t.Uniform2f=wo,t.Uniform3f=Eo,t.Uniform4f=So,t.UniformColor=Co,t.UniformMatrix4f=Oo,t.UnwrappedTileID=Xc,t.ValidationError=Mt,t.WritingMode=xu,t.ZoomHistory=Gr,t.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},t.addDynamicAttributes=hc,t.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var r=t.length,i=new Array(t.length),o=null;t.forEach((function(t,a){e(t,(function(t,e){t&&(o=t),i[a]=e,0==--r&&n(o,i)}))}))},t.bezier=u,t.bindAll=g,t.browser=F,t.cacheEntryPossiblyAdded=function(t){++pt>ut&&(t.getActor().send("enforceCacheSizeLimit",st),pt=0)},t.clamp=l,t.clearTileCache=function(t){var e=a.caches["delete"]("mapbox-tiles");t&&e["catch"](t).then((function(){return t()}))},t.clipLine=Wu,t.clone=function(t){var e=new aa(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=x,t.clone$2=function(t){var e=new aa(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.collisionCircleLayout=Hs,t.config=z,t.create=function(){var t=new aa(16);return aa!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=function(){var t=new aa(9);return aa!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},t.create$2=function(){var t=new aa(4);return aa!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.createCommonjsModule=e,t.createExpression=Xn,t.createLayout=Ti,t.createStyleLayer=function(t){return"custom"===t.type?new Tc(t):new Oc[t.type](t)},t.cross=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t},t.deepEqual=function t(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var i in e)if(!t(e[i],n[i]))return!1;return!0}return e===n},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.dot$1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=c,t.emitValidationErrors=Ir,t.endsWith=y,t.enforceCacheSizeLimit=function(t){ct(),tt&&tt.then((function(e){e.keys().then((function(n){for(var r=0;r<n.length-t;r++)e["delete"](n[r])}))}))},t.evaluateSizeForFeature=ju,t.evaluateSizeForZoom=Fu,t.evaluateVariableOffset=oc,t.evented=ri,t.extend=p,t.featureFilter=ar,t.filterObject=_,t.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.getAnchorAlignment=Iu,t.getAnchorJustification=ac,t.getArrayBuffer=_t,t.getImage=Et,t.getJSON=function(t,e){return bt(p(t,{type:"json"}),e)},t.getRTLTextPluginStatus=ii,t.getReferrer=yt,t.getVideo=function(t,e){var n,r,i=a.document.createElement("video");i.muted=!0,i.onloadstart=function(){e(null,i)};for(var o=0;o<t.length;o++){var s=a.document.createElement("source");n=t[o],r=void 0,(r=a.document.createElement("a")).href=n,(r.protocol!==a.document.location.protocol||r.host!==a.document.location.host)&&(i.crossOrigin="Anonymous"),s.src=t[o],i.appendChild(s)}return{cancel:function(){}}},t.identity=sa,t.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],p=e[10],h=e[11],d=e[12],v=e[13],m=e[14],g=e[15],y=n*s-r*a,b=n*u-i*a,_=n*c-o*a,x=r*u-i*s,w=r*c-o*s,E=i*c-o*u,S=l*v-f*d,C=l*m-p*d,T=l*g-h*d,O=f*m-p*v,A=f*g-h*v,k=p*g-h*m,M=y*k-b*A+_*O+x*T-w*C+E*S;return M?(t[0]=(s*k-u*A+c*O)*(M=1/M),t[1]=(i*A-r*k-o*O)*M,t[2]=(v*E-m*w+g*x)*M,t[3]=(p*w-f*E-h*x)*M,t[4]=(u*T-a*k-c*C)*M,t[5]=(n*k-i*T+o*C)*M,t[6]=(m*_-d*E-g*b)*M,t[7]=(l*E-p*_+h*b)*M,t[8]=(a*A-s*T+c*S)*M,t[9]=(r*T-n*A-o*S)*M,t[10]=(d*w-v*_+g*y)*M,t[11]=(f*_-l*w-h*y)*M,t[12]=(s*C-a*O-u*S)*M,t[13]=(n*O-r*C+i*S)*M,t[14]=(v*b-d*x-m*y)*M,t[15]=(l*x-f*b+p*y)*M,t):null},t.isChar=Hr,t.isMapboxURL=W,t.keysDifference=function(t,e){var n=[];for(var r in t)r in e||n.push(r);return n},t.makeRequest=bt,t.mapObject=b,t.mercatorXfromLng=Uc,t.mercatorYfromLat=Vc,t.mercatorZfromAltitude=qc,t.mul=la,t.multiply=ua,t.mvt=_s,t.nextPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},t.normalize=function(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t},t.number=Ge,t.offscreenCanvasSupported=ht,t.ortho=function(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t},t.parseGlyphPBF=function(t){return new Ks(t).readFields(du,[])},t.pbf=Ks,t.performSymbolLayout=function(t,e,n,r,i,o,a){t.createArrays(),t.tilePixelRatio=8192/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;var s=t.layers[0].layout,u=t.layers[0]._unevaluatedLayout._values,c={};if("composite"===t.textSizeData.kind){var l=t.textSizeData,f=l.maxZoom;c.compositeTextSizes=[u["text-size"].possiblyEvaluate(new si(l.minZoom),a),u["text-size"].possiblyEvaluate(new si(f),a)]}if("composite"===t.iconSizeData.kind){var p=t.iconSizeData,h=p.maxZoom;c.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new si(p.minZoom),a),u["icon-size"].possiblyEvaluate(new si(h),a)]}c.layoutTextSize=u["text-size"].possiblyEvaluate(new si(t.zoom+1),a),c.layoutIconSize=u["icon-size"].possiblyEvaluate(new si(t.zoom+1),a),c.textMaxSize=u["text-size"].possiblyEvaluate(new si(18));for(var d=24*s.get("text-line-height"),v="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement"),m=s.get("text-keep-upright"),g=s.get("text-size"),y=function(){var o=_[b],u=s.get("text-font").evaluate(o,{},a).join(","),l=g.evaluate(o,{},a),f=c.layoutTextSize.evaluate(o,{},a),p=c.layoutIconSize.evaluate(o,{},a),h={horizontal:{},vertical:void 0},y=o.text,x=[0,0];if(y){var w=y.toString(),S=24*s.get("text-letter-spacing").evaluate(o,{},a),C=function(t){for(var e=0,n=t;e<n.length;e+=1)if(r=n[e].charCodeAt(0),Hr.Arabic(r)||Hr["Arabic Supplement"](r)||Hr["Arabic Extended-A"](r)||Hr["Arabic Presentation Forms-A"](r)||Hr["Arabic Presentation Forms-B"](r))return!1;var r;return!0}(w)?S:0,T=s.get("text-anchor").evaluate(o,{},a),O=s.get("text-variable-anchor");if(!O){var A=s.get("text-radial-offset").evaluate(o,{},a);x=A?oc(T,[24*A,ic]):s.get("text-offset").evaluate(o,{},a).map((function(t){return 24*t}))}var k=v?"center":s.get("text-justify").evaluate(o,{},a),M=s.get("symbol-placement"),P="point"===M?24*s.get("text-max-width").evaluate(o,{},a):0,I=function(){t.allowVerticalPlacement&&Wr(w)&&(h.vertical=Su(y,e,n,i,u,P,d,T,"left",C,x,xu.vertical,!0,M,f,l))};if(!v&&O){for(var L="auto"===k?O.map((function(t){return ac(t)})):[k],R=!1,D=0;D<L.length;D++){var N=L[D];if(!h.horizontal[N])if(R)h.horizontal[N]=h.horizontal[0];else{var j=Su(y,e,n,i,u,P,d,"center",N,C,x,xu.horizontal,!1,M,f,l);j&&(h.horizontal[N]=j,R=1===j.positionedLines.length)}}I()}else{"auto"===k&&(k=ac(T));var F=Su(y,e,n,i,u,P,d,T,k,C,x,xu.horizontal,!1,M,f,l);F&&(h.horizontal[k]=F),I(),Wr(w)&&v&&m&&(h.vertical=Su(y,e,n,i,u,P,d,T,k,C,x,xu.vertical,!1,M,f,l))}}var z=void 0,B=!1;if(o.icon&&o.icon.name){var U=r[o.icon.name];U&&(z=function(t,e,n){var r=Iu(n),i=e[0]-t.displaySize[0]*r.horizontalAlign,o=e[1]-t.displaySize[1]*r.verticalAlign;return{image:t,top:o,bottom:o+t.displaySize[1],left:i,right:i+t.displaySize[0]}}(i[o.icon.name],s.get("icon-offset").evaluate(o,{},a),s.get("icon-anchor").evaluate(o,{},a)),B=U.sdf,void 0===t.sdfIcons?t.sdfIcons=U.sdf:t.sdfIcons!==U.sdf&&E("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(U.pixelRatio!==t.pixelRatio||0!==s.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}var V=uc(h.horizontal)||h.vertical;t.iconsInText=!!V&&V.iconsInText,(V||z)&&function(t,e,n,r,i,o,a,s,u,c,l){var f=o.textMaxSize.evaluate(e,{});void 0===f&&(f=a);var p,h=t.layers[0].layout,d=h.get("icon-offset").evaluate(e,{},l),v=uc(n.horizontal),m=a/24,g=t.tilePixelRatio*m,y=t.tilePixelRatio*f/24,b=t.tilePixelRatio*s,_=t.tilePixelRatio*h.get("symbol-spacing"),x=h.get("text-padding")*t.tilePixelRatio,w=h.get("icon-padding")*t.tilePixelRatio,S=h.get("text-max-angle")/180*Math.PI,C="map"===h.get("text-rotation-alignment")&&"point"!==h.get("symbol-placement"),T="map"===h.get("icon-rotation-alignment")&&"point"!==h.get("symbol-placement"),O=h.get("symbol-placement"),A=_/2,k=h.get("icon-text-fit");r&&"none"!==k&&(t.allowVerticalPlacement&&n.vertical&&(p=Ru(r,n.vertical,k,h.get("icon-text-fit-padding"),d,m)),v&&(r=Ru(r,v,k,h.get("icon-text-fit-padding"),d,m)));var M=function(s,f){f.x<0||f.x>=8192||f.y<0||f.y>=8192||function(t,e,n,r,i,o,a,s,u,c,l,f,p,h,d,v,m,g,y,b,_,x,w,S,C){var T,O,A,k,M,P=t.addToLineVertexArray(e,n),I=0,L=0,R=0,D=0,N=-1,j=-1,F={},z=po(""),B=0,U=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?(B=(T=s.layout.get("text-offset").evaluate(_,{},S).map((function(t){return 24*t})))[0],U=T[1]):(B=24*s.layout.get("text-radial-offset").evaluate(_,{},S),U=ic),t.allowVerticalPlacement&&r.vertical){var V=s.layout.get("text-rotate").evaluate(_,{},S)+90;k=new Qu(u,e,c,l,f,r.vertical,p,h,d,V),a&&(M=new Qu(u,e,c,l,f,a,m,g,d,V))}if(i){var q=s.layout.get("icon-rotate").evaluate(_,{}),G="none"!==s.layout.get("icon-text-fit"),H=Xu(i,q,w,G),W=a?Xu(a,q,w,G):void 0;A=new Qu(u,e,c,l,f,i,m,g,!1,q),I=4*H.length;var X=t.iconSizeData,Z=null;"source"===X.kind?(Z=[128*s.layout.get("icon-size").evaluate(_,{})])[0]>32640&&E(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===X.kind&&((Z=[128*x.compositeIconSizes[0].evaluate(_,{},S),128*x.compositeIconSizes[1].evaluate(_,{},S)])[0]>32640||Z[1]>32640)&&E(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),t.addSymbols(t.icon,H,Z,b,y,_,!1,e,P.lineStartIndex,P.lineLength,-1,S),N=t.icon.placedSymbolArray.length-1,W&&(L=4*W.length,t.addSymbols(t.icon,W,Z,b,y,_,xu.vertical,e,P.lineStartIndex,P.lineLength,-1,S),j=t.icon.placedSymbolArray.length-1)}for(var Y in r.horizontal){var K=r.horizontal[Y];if(!O){z=po(K.text);var J=s.layout.get("text-rotate").evaluate(_,{},S);O=new Qu(u,e,c,l,f,K,p,h,d,J)}var Q=1===K.positionedLines.length;if(R+=sc(t,e,K,o,s,d,_,v,P,r.vertical?xu.horizontal:xu.horizontalOnly,Q?Object.keys(r.horizontal):[Y],F,N,x,S),Q)break}r.vertical&&(D+=sc(t,e,r.vertical,o,s,d,_,v,P,xu.vertical,["vertical"],F,j,x,S));var $=O?O.boxStartIndex:t.collisionBoxArray.length,tt=O?O.boxEndIndex:t.collisionBoxArray.length,et=k?k.boxStartIndex:t.collisionBoxArray.length,nt=k?k.boxEndIndex:t.collisionBoxArray.length,rt=A?A.boxStartIndex:t.collisionBoxArray.length,it=A?A.boxEndIndex:t.collisionBoxArray.length,ot=M?M.boxStartIndex:t.collisionBoxArray.length,at=M?M.boxEndIndex:t.collisionBoxArray.length,st=-1,ut=function(t,e){return t&&t.circleDiameter?Math.max(t.circleDiameter,e):e};st=ut(O,st),st=ut(k,st),st=ut(A,st);var ct=(st=ut(M,st))>-1?1:0;ct&&(st*=C/24),t.glyphOffsetArray.length>=gc.MAX_GLYPHS&&E("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==_.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,_.sortKey),t.symbolInstances.emplaceBack(e.x,e.y,F.right>=0?F.right:-1,F.center>=0?F.center:-1,F.left>=0?F.left:-1,F.vertical||-1,N,j,z,$,tt,et,nt,rt,it,ot,at,c,R,D,I,L,ct,0,p,B,U,st)}(t,f,s,n,r,i,p,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,g,x,C,u,b,w,T,d,e,o,c,l,a)};if("line"===O)for(var P=0,I=Wu(e.geometry,0,0,8192,8192);P<I.length;P+=1)for(var L=I[P],R=0,D=Hu(L,_,S,n.vertical||v,r,24,y,t.overscaling,8192);R<D.length;R+=1){var N=D[R];v&&cc(t,v.text,A,N)||M(L,N)}else if("line-center"===O)for(var j=0,F=e.geometry;j<F.length;j+=1){var z=F[j];if(z.length>1){var B=Gu(z,S,n.vertical||v,r,24,y);B&&M(z,B)}}else if("Polygon"===e.type)for(var U=0,V=rs(e.geometry,0);U<V.length;U+=1){var q=V[U],G=ec(q,16);M(q[0],new Du(G.x,G.y,0))}else if("LineString"===e.type)for(var H=0,W=e.geometry;H<W.length;H+=1){var X=W[H];M(X,new Du(X[0].x,X[0].y,0))}else if("Point"===e.type)for(var Z=0,Y=e.geometry;Z<Y.length;Z+=1)for(var K=0,J=Y[Z];K<J.length;K+=1){var Q=J[K];M([Q],new Du(Q.x,Q.y,0))}}(t,o,h,z,r,c,f,p,x,B,a)},b=0,_=t.features;b<_.length;b+=1)y();o&&t.generateCollisionDebugBuffers()},t.perspective=function(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+r)*(o=1/(r-i)),t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t},t.pick=function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r];i in t&&(n[i]=t[i])}return n},t.plugin=ai,t.polygonIntersectsPolygon=Go,t.postMapLoadEvent=at,t.postTurnstileEvent=it,t.potpack=gu,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=Fr,t.registerForPluginStateChange=function(t){return t({pluginStatus:$r,pluginURL:ti}),ri.on("pluginStateChange",t),t},t.renderColorRamp=xa,t.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t},t.rotateX=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+l*r,t[6]=s*i+f*r,t[7]=u*i+p*r,t[8]=c*i-o*r,t[9]=l*i-a*r,t[10]=f*i-s*r,t[11]=p*i-u*r,t},t.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],l=e[5],f=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+l*r,t[2]=s*i+f*r,t[3]=u*i+p*r,t[4]=c*i-o*r,t[5]=l*i-a*r,t[6]=f*i-s*r,t[7]=p*i-u*r,t},t.scale=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},t.scale$2=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},t.setCacheLimits=function(t,e){st=t,ut=e},t.setRTLTextPlugin=function(t,e,n){if(void 0===n&&(n=!1),"deferred"===$r||"loading"===$r||"loaded"===$r)throw new Error("setRTLTextPlugin cannot be called multiple times.");ti=F.resolveURL(t),$r="deferred",Qr=e,ni(),n||oi()},t.sphericalToCartesian=function(t){var e=t[0],n=t[1],r=t[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:e*Math.cos(n)*Math.sin(r),y:e*Math.sin(n)*Math.sin(r),z:e*Math.cos(r)}},t.sqrLen=function(t){var e=t[0],n=t[1];return e*e+n*n},t.styleSpec=kt,t.sub=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},t.symbolSize=zu,t.transformMat3=function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t},t.transformMat4=fa,t.translate=function(t,e,n){var r,i,o,a,s,u,c,l,f,p,h,d,v=n[0],m=n[1],g=n[2];return e===t?(t[12]=e[0]*v+e[4]*m+e[8]*g+e[12],t[13]=e[1]*v+e[5]*m+e[9]*g+e[13],t[14]=e[2]*v+e[6]*m+e[10]*g+e[14],t[15]=e[3]*v+e[7]*m+e[11]*g+e[15]):(i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],p=e[9],h=e[10],d=e[11],t[0]=r=e[0],t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t[9]=p,t[10]=h,t[11]=d,t[12]=r*v+s*m+f*g+e[12],t[13]=i*v+u*m+p*g+e[13],t[14]=o*v+c*m+h*g+e[14],t[15]=a*v+l*m+d*g+e[15]),t},t.triggerPluginCompletionEvent=ei,t.uniqueId=d,t.validateCustomStyleLayer=function(t){var e=[],n=t.id;return void 0===n&&e.push({message:"layers."+n+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+n+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+n+': property "renderingMode" must be either "2d" or "3d"'}),e},t.validateLight=kr,t.validateStyle=Ar,t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.vectorTile=_s,t.version="1.13.1",t.warnOnce=E,t.webpSupported=B,t.window=a,t.wrap=f})),r(["./shared"],(function(t){function e(t){var n=typeof t;if("number"===n||"boolean"===n||"string"===n||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var r="[",i=0,o=t;i<o.length;i+=1)r+=e(o[i])+",";return r+"]"}for(var a=Object.keys(t).sort(),s="{",u=0;u<a.length;u++)s+=JSON.stringify(a[u])+":"+e(t[a[u]])+",";return s+"}"}function n(n){for(var r="",i=0,o=t.refProperties;i<o.length;i+=1)r+="/"+e(n[o[i]]);return r}var r=function(t){this.keyCache={},t&&this.replace(t)};r.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},r.prototype.update=function(e,r){for(var i=this,o=0,a=e;o<a.length;o+=1){var s=a[o];this._layerConfigs[s.id]=s;var u=this._layers[s.id]=t.createStyleLayer(s);u._featureFilter=t.featureFilter(u.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}for(var c=0,l=r;c<l.length;c+=1){var f=l[c];delete this.keyCache[f],delete this._layerConfigs[f],delete this._layers[f]}this.familiesBySource={};for(var p=0,h=function(t,e){for(var r={},i=0;i<t.length;i++){var o=e&&e[t[i].id]||n(t[i]);e&&(e[t[i].id]=o);var a=r[o];a||(a=r[o]=[]),a.push(t[i])}var s=[];for(var u in r)s.push(r[u]);return s}(t.values(this._layerConfigs),this.keyCache);p<h.length;p+=1){var d=h[p].map((function(t){return i._layers[t.id]})),v=d[0];if("none"!==v.visibility){var m=v.source||"",g=this.familiesBySource[m];g||(g=this.familiesBySource[m]={});var y=v.sourceLayer||"_geojsonTileLayer",b=g[y];b||(b=g[y]=[]),b.push(d)}}};var i=function(e){var n={},r=[];for(var i in e){var o=e[i],a=n[i]={};for(var s in o){var u=o[+s];if(u&&0!==u.bitmap.width&&0!==u.bitmap.height){var c={x:0,y:0,w:u.bitmap.width+2,h:u.bitmap.height+2};r.push(c),a[s]={rect:c,metrics:u.metrics}}}}var l=t.potpack(r),f=new t.AlphaImage({width:l.w||1,height:l.h||1});for(var p in e){var h=e[p];for(var d in h){var v=h[+d];if(v&&0!==v.bitmap.width&&0!==v.bitmap.height){var m=n[p][d].rect;t.AlphaImage.copy(v.bitmap,f,{x:0,y:0},{x:m.x+1,y:m.y+1},v.bitmap)}}}this.image=f,this.positions=n};t.register("GlyphAtlas",i);var o=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId};function a(e,n,r){for(var i=new t.EvaluationParameters(n),o=0,a=e;o<a.length;o+=1)a[o].recalculate(i,r)}function s(e,n){var r=t.getArrayBuffer(e.request,(function(e,r,i,o){e?n(e):r&&n(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(r)),rawData:r,cacheControl:i,expires:o})}));return function(){r.cancel(),n()}}o.prototype.parse=function(e,n,r,o,s){var u=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var c=new t.DictionaryCoder(Object.keys(e.layers).sort()),l=new t.FeatureIndex(this.tileID,this.promoteId);l.bucketLayerIDs=[];var f,p,h,d,v={},m={featureIndex:l,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:r},g=n.familiesBySource[this.source];for(var y in g){var b=e.layers[y];if(b){1===b.version&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+y+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var _=c.encode(y),x=[],w=0;w<b.length;w++){var E=b.feature(w),S=l.getId(E,y);x.push({feature:E,id:S,index:w,sourceLayerIndex:_})}for(var C=0,T=g[y];C<T.length;C+=1){var O=T[C],A=O[0];A.minzoom&&this.zoom<Math.floor(A.minzoom)||A.maxzoom&&this.zoom>=A.maxzoom||"none"!==A.visibility&&(a(O,this.zoom,r),(v[A.id]=A.createBucket({index:l.bucketLayerIDs.length,layers:O,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:_,sourceID:this.source})).populate(x,m,this.tileID.canonical),l.bucketLayerIDs.push(O.map((function(t){return t.id}))))}}}var k=t.mapObject(m.glyphDependencies,(function(t){return Object.keys(t).map(Number)}));Object.keys(k).length?o.send("getGlyphs",{uid:this.uid,stacks:k},(function(t,e){f||(f=t,p=e,I.call(u))})):p={};var M=Object.keys(m.iconDependencies);M.length?o.send("getImages",{icons:M,source:this.source,tileID:this.tileID,type:"icons"},(function(t,e){f||(f=t,h=e,I.call(u))})):h={};var P=Object.keys(m.patternDependencies);function I(){if(f)return s(f);if(p&&h&&d){var e=new i(p),n=new t.ImageAtlas(h,d);for(var o in v){var u=v[o];u instanceof t.SymbolBucket?(a(u.layers,this.zoom,r),t.performSymbolLayout(u,p,e.positions,h,n.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):u.hasPattern&&(u instanceof t.LineBucket||u instanceof t.FillBucket||u instanceof t.FillExtrusionBucket)&&(a(u.layers,this.zoom,r),u.addFeatures(m,this.tileID.canonical,n.patternPositions))}this.status="done",s(null,{buckets:t.values(v).filter((function(t){return!t.isEmpty()})),featureIndex:l,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:n,glyphMap:this.returnDependencies?p:null,iconMap:this.returnDependencies?h:null,glyphPositions:this.returnDependencies?e.positions:null})}}P.length?o.send("getImages",{icons:P,source:this.source,tileID:this.tileID,type:"patterns"},(function(t,e){f||(f=t,d=e,I.call(u))})):d={},I.call(this)};var u=function(t,e,n,r){this.actor=t,this.layerIndex=e,this.availableImages=n,this.loadVectorData=r||s,this.loading={},this.loaded={}};u.prototype.loadTile=function(e,n){var r=this,i=e.uid;this.loading||(this.loading={});var a=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.RequestPerformance(e.request),s=this.loading[i]=new o(e);s.abort=this.loadVectorData(e,(function(e,o){if(delete r.loading[i],e||!o)return s.status="done",r.loaded[i]=s,n(e);var u=o.rawData,c={};o.expires&&(c.expires=o.expires),o.cacheControl&&(c.cacheControl=o.cacheControl);var l={};if(a){var f=a.finish();f&&(l.resourceTiming=JSON.parse(JSON.stringify(f)))}s.vectorTile=o.vectorTile,s.parse(o.vectorTile,r.layerIndex,r.availableImages,r.actor,(function(e,r){if(e||!r)return n(e);n(null,t.extend({rawTileData:u.slice(0)},r,c,l))})),r.loaded=r.loaded||{},r.loaded[i]=s}))},u.prototype.reloadTile=function(t,e){var n=this,r=this.loaded,i=t.uid,o=this;if(r&&r[i]){var a=r[i];a.showCollisionBoxes=t.showCollisionBoxes;var s=function(t,r){var i=a.reloadCallback;i&&(delete a.reloadCallback,a.parse(a.vectorTile,o.layerIndex,n.availableImages,o.actor,i)),e(t,r)};"parsing"===a.status?a.reloadCallback=s:"done"===a.status&&(a.vectorTile?a.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}},u.prototype.abortTile=function(t,e){var n=this.loading,r=t.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),e()},u.prototype.removeTile=function(t,e){var n=this.loaded,r=t.uid;n&&n[r]&&delete n[r],e()};var c=t.window.ImageBitmap,l=function(){this.loaded={}};function f(t,e){if(0!==t.length){p(t[0],e);for(var n=1;n<t.length;n++)p(t[n],!e)}}function p(t,e){for(var n=0,r=0,i=t.length,o=i-1;r<i;o=r++)n+=(t[r][0]-t[o][0])*(t[o][1]+t[r][1]);n>=0!=!!e&&t.reverse()}l.prototype.loadTile=function(e,n){var r=e.uid,i=e.encoding,o=e.rawImageData,a=c&&o instanceof c?this.getImageData(o):o,s=new t.DEMData(r,a,i);this.loaded=this.loaded||{},this.loaded[r]=s,n(null,s)},l.prototype.getImageData=function(e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);var n=this.offscreenCanvasContext.getImageData(-1,-1,e.width+2,e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:n.width,height:n.height},n.data)},l.prototype.removeTile=function(t){var e=this.loaded,n=t.uid;e&&e[n]&&delete e[n]};var h=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,d=function(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};d.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],n=0,r=this._feature.geometry;n<r.length;n+=1){var i=r[n];e.push([new t.Point$1(i[0],i[1])])}return e}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var u=[],c=0,l=s[a];c<l.length;c+=1){var f=l[c];u.push(new t.Point$1(f[0],f[1]))}o.push(u)}return o},d.prototype.toGeoJSON=function(t,e,n){return h.call(this,t,e,n)};var v=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e};v.prototype.feature=function(t){return new d(this._features[t])};var m=t.vectorTile.VectorTileFeature,g=y;function y(t,e){this.options=e||{},this.features=t,this.length=t.length}function b(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}y.prototype.feature=function(t){return new b(this.features[t],this.options.extent)},b.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var r=e[n],i=[],o=0;o<r.length;o++)i.push(new t.Point$1(r[o][0],r[o][1]));this.geometry.push(i)}return this.geometry},b.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var u=a[s];e=Math.min(e,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[e,r,n,i]},b.prototype.toGeoJSON=m.prototype.toGeoJSON;var _=w,x=g;function w(e){var n=new t.pbf;return function(t,e){for(var n in t.layers)e.writeMessage(3,E,t.layers[n])}(e,n),n.finish()}function E(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,S,r);var i=r.keys;for(n=0;n<i.length;n++)e.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)e.writeMessage(4,k,o[n])}function S(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,C,t),e.writeVarintField(3,n.type),e.writeMessage(4,A,n)}function C(t,e){var n=t.feature,r=t.keys,i=t.values,o=t.keycache,a=t.valuecache;for(var s in n.properties){var u=o[s];void 0===u&&(r.push(s),o[s]=u=r.length-1),e.writeVarint(u);var c=n.properties[s],l=typeof c;"string"!==l&&"boolean"!==l&&"number"!==l&&(c=JSON.stringify(c));var f=l+":"+c,p=a[f];void 0===p&&(i.push(c),a[f]=p=i.length-1),e.writeVarint(p)}}function T(t,e){return(e<<3)+(7&t)}function O(t){return t<<1^t>>31}function A(t,e){for(var n=t.loadGeometry(),r=t.type,i=0,o=0,a=n.length,s=0;s<a;s++){var u=n[s],c=1;1===r&&(c=u.length),e.writeVarint(T(1,c));for(var l=3===r?u.length-1:u.length,f=0;f<l;f++){1===f&&1!==r&&e.writeVarint(T(2,l-1));var p=u[f].x-i,h=u[f].y-o;e.writeVarint(O(p)),e.writeVarint(O(h)),i+=p,o+=h}3===r&&e.writeVarint(T(7,1))}}function k(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function M(t,e,n,r){P(t,n,r),P(e,2*n,2*r),P(e,2*n+1,2*r+1)}function P(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function I(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}_.fromVectorTileJs=w,_.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var r in t)n[r]=new g(t[r].features,e),n[r].name=r,n[r].version=e.version,n[r].extent=e.extent;return w({layers:n})},_.GeoJSONWrapper=x;var L=function(t){return t[0]},R=function(t){return t[1]},D=function(t,e,n,r,i){void 0===e&&(e=L),void 0===n&&(n=R),void 0===r&&(r=64),void 0===i&&(i=Float64Array),this.nodeSize=r,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new i(2*t.length),u=0;u<t.length;u++)a[u]=u,s[2*u]=e(t[u]),s[2*u+1]=n(t[u]);!function t(e,n,r,i,o,a){if(!(o-i<=r)){var s=i+o>>1;!function t(e,n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=r-i+1,c=Math.log(s),l=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*l*(s-l)/s)*(u-s/2<0?-1:1);t(e,n,r,Math.max(i,Math.floor(r-u*l/s+f)),Math.min(o,Math.floor(r+(s-u)*l/s+f)),a)}var p=n[2*r+a],h=i,d=o;for(M(e,n,i,r),n[2*o+a]>p&&M(e,n,i,o);h<d;){for(M(e,n,h,d),h++,d--;n[2*h+a]<p;)h++;for(;n[2*d+a]>p;)d--}n[2*i+a]===p?M(e,n,i,d):M(e,n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(e,n,s,i,o,a%2),t(e,n,r,i,s-1,a+1),t(e,n,r,s+1,o,a+1)}}(a,s,r,0,a.length-1,0)};D.prototype.range=function(t,e,n,r){return function(t,e,n,r,i,o,a){for(var s,u,c=[0,t.length-1,0],l=[];c.length;){var f=c.pop(),p=c.pop(),h=c.pop();if(p-h<=a)for(var d=h;d<=p;d++)u=e[2*d+1],(s=e[2*d])>=n&&s<=i&&u>=r&&u<=o&&l.push(t[d]);else{var v=Math.floor((h+p)/2);u=e[2*v+1],(s=e[2*v])>=n&&s<=i&&u>=r&&u<=o&&l.push(t[v]);var m=(f+1)%2;(0===f?n<=s:r<=u)&&(c.push(h),c.push(v-1),c.push(m)),(0===f?i>=s:o>=u)&&(c.push(v+1),c.push(p),c.push(m))}}return l}(this.ids,this.coords,t,e,n,r,this.nodeSize)},D.prototype.within=function(t,e,n){return function(t,e,n,r,i,o){for(var a=[0,t.length-1,0],s=[],u=i*i;a.length;){var c=a.pop(),l=a.pop(),f=a.pop();if(l-f<=o)for(var p=f;p<=l;p++)I(e[2*p],e[2*p+1],n,r)<=u&&s.push(t[p]);else{var h=Math.floor((f+l)/2),d=e[2*h],v=e[2*h+1];I(d,v,n,r)<=u&&s.push(t[h]);var m=(c+1)%2;(0===c?n-i<=d:r-i<=v)&&(a.push(f),a.push(h-1),a.push(m)),(0===c?n+i>=d:r+i>=v)&&(a.push(h+1),a.push(l),a.push(m))}}return s}(this.ids,this.coords,t,e,n,this.nodeSize)};var N={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},j=function(t){this.options=G(Object.create(N),t),this.trees=new Array(this.options.maxZoom+1)};function F(t,e,n,r,i){return{x:t,y:e,zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function z(t,e){var n=t.geometry.coordinates,r=n[1];return{x:V(n[0]),y:q(r),zoom:1/0,index:e,parentId:-1}}function B(t){return{type:"Feature",id:t.id,properties:U(t),geometry:{type:"Point",coordinates:[(r=t.x,360*(r-.5)),(e=t.y,n=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var e,n,r}function U(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return G(G({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function V(t){return t/360+.5}function q(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function G(t,e){for(var n in e)t[n]=e[n];return t}function H(t){return t.x}function W(t){return t.y}function X(t,e,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var u=((t-n)*a+(e-r)*s)/(a*a+s*s);u>1?(n=i,r=o):u>0&&(n+=a*u,r+=s*u)}return(a=t-n)*a+(s=e-r)*s}function Z(t,e,n,r){var i={id:void 0===t?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)Y(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)Y(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)Y(t,e[r][i])}(i),i}function Y(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function K(t,e,n,r){if(e.geometry){var i=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],u=e.id;if(n.promoteId?u=e.properties[n.promoteId]:n.generateId&&(u=r||0),"Point"===o)J(i,s);else if("MultiPoint"===o)for(var c=0;c<i.length;c++)J(i[c],s);else if("LineString"===o)Q(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(c=0;c<i.length;c++)Q(i[c],s=[],a,!1),t.push(Z(u,"LineString",s,e.properties));return}$(i,s,a,!1)}else if("Polygon"===o)$(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(c=0;c<e.geometry.geometries.length;c++)K(t,{id:u,geometry:e.geometry.geometries[c],properties:e.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<i.length;c++){var l=[];$(i[c],l,a,!0),s.push(l)}}t.push(Z(u,o,s,e.properties))}}function J(t,e){e.push(tt(t[0])),e.push(et(t[1])),e.push(0)}function Q(t,e,n,r){for(var i,o,a=0,s=0;s<t.length;s++){var u=tt(t[s][0]),c=et(t[s][1]);e.push(u),e.push(c),e.push(0),s>0&&(a+=r?(i*c-u*o)/2:Math.sqrt(Math.pow(u-i,2)+Math.pow(c-o,2))),i=u,o=c}var l=e.length-3;e[2]=1,function t(e,n,r,i){for(var o,a=i,s=r-n>>1,u=r-n,c=e[n],l=e[n+1],f=e[r],p=e[r+1],h=n+3;h<r;h+=3){var d=X(e[h],e[h+1],c,l,f,p);if(d>a)o=h,a=d;else if(d===a){var v=Math.abs(h-s);v<u&&(o=h,u=v)}}a>i&&(o-n>3&&t(e,n,o,i),e[o+2]=a,r-o>3&&t(e,o,r,i))}(e,0,l,n),e[l+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function $(t,e,n,r){for(var i=0;i<t.length;i++){var o=[];Q(t[i],o,n,r),e.push(o)}}function tt(t){return t/360+.5}function et(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function nt(t,e,n,r,i,o,a,s){if(r/=e,o>=(n/=e)&&a<r)return t;if(a<n||o>=r)return null;for(var u=[],c=0;c<t.length;c++){var l=t[c],f=l.geometry,p=l.type,h=0===i?l.minX:l.minY,d=0===i?l.maxX:l.maxY;if(h>=n&&d<r)u.push(l);else if(!(d<n||h>=r)){var v=[];if("Point"===p||"MultiPoint"===p)rt(f,v,n,r,i);else if("LineString"===p)it(f,v,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===p)at(f,v,n,r,i,!1);else if("Polygon"===p)at(f,v,n,r,i,!0);else if("MultiPolygon"===p)for(var m=0;m<f.length;m++){var g=[];at(f[m],g,n,r,i,!0),g.length&&v.push(g)}if(v.length){if(s.lineMetrics&&"LineString"===p){for(m=0;m<v.length;m++)u.push(Z(l.id,p,v[m],l.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===v.length?(p="LineString",v=v[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===v.length?"Point":"MultiPoint"),u.push(Z(l.id,p,v,l.tags))}}}return u.length?u:null}function rt(t,e,n,r,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];a>=n&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function it(t,e,n,r,i,o,a){for(var s,u,c=ot(t),l=0===i?ut:ct,f=t.start,p=0;p<t.length-3;p+=3){var h=t[p],d=t[p+1],v=t[p+2],m=t[p+3],g=t[p+4],y=0===i?h:d,b=0===i?m:g,_=!1;a&&(s=Math.sqrt(Math.pow(h-m,2)+Math.pow(d-g,2))),y<n?b>n&&(u=l(c,h,d,m,g,n),a&&(c.start=f+s*u)):y>r?b<r&&(u=l(c,h,d,m,g,r),a&&(c.start=f+s*u)):st(c,h,d,v),b<n&&y>=n&&(u=l(c,h,d,m,g,n),_=!0),b>r&&y<=r&&(u=l(c,h,d,m,g,r),_=!0),!o&&_&&(a&&(c.end=f+s*u),e.push(c),c=ot(t)),a&&(f+=s)}var x=t.length-3;h=t[x],d=t[x+1],v=t[x+2],(y=0===i?h:d)>=n&&y<=r&&st(c,h,d,v),x=c.length-3,o&&x>=3&&(c[x]!==c[0]||c[x+1]!==c[1])&&st(c,c[0],c[1],c[2]),c.length&&e.push(c)}function ot(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function at(t,e,n,r,i,o){for(var a=0;a<t.length;a++)it(t[a],e,n,r,i,o,!1)}function st(t,e,n,r){t.push(e),t.push(n),t.push(r)}function ut(t,e,n,r,i,o){var a=(o-e)/(r-e);return t.push(o),t.push(n+(i-n)*a),t.push(1),a}function ct(t,e,n,r,i,o){var a=(o-n)/(i-n);return t.push(e+(r-e)*a),t.push(o),t.push(1),a}function lt(t,e){for(var n=[],r=0;r<t.length;r++){var i,o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=ft(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(ft(o.geometry[s],e))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var u=[],c=0;c<o.geometry[s].length;c++)u.push(ft(o.geometry[s][c],e));i.push(u)}n.push(Z(o.id,a,i,o.tags))}return n}function ft(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}function pt(t,e){if(t.transformed)return t;var n,r,i,o=1<<t.z,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var u=t.features[n],c=u.geometry,l=u.type;if(u.geometry=[],1===l)for(r=0;r<c.length;r+=2)u.geometry.push(ht(c[r],c[r+1],e,o,a,s));else for(r=0;r<c.length;r++){var f=[];for(i=0;i<c[r].length;i+=2)f.push(ht(c[r][i],c[r][i+1],e,o,a,s));u.geometry.push(f)}}return t.transformed=!0,t}function ht(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]}function dt(t,e,n,r,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,vt(a,t[s],o,i);var u=t[s].minX,c=t[s].minY,l=t[s].maxX,f=t[s].maxY;u<a.minX&&(a.minX=u),c<a.minY&&(a.minY=c),l>a.maxX&&(a.maxX=l),f>a.maxY&&(a.maxY=f)}return a}function vt(t,e,n,r){var i=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)mt(a,i,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)mt(a,i[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var u=0;u<i.length;u++){var c=i[u];for(s=0;s<c.length;s++)mt(a,c[s],t,n,!0,0===s)}if(a.length){var l=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var f in l={},e.tags)l[f]=e.tags[f];l.mapbox_clip_start=i.start/i.size,l.mapbox_clip_end=i.end/i.size}var p={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:l};null!==e.id&&(p.id=e.id),t.features.push(p)}}function mt(t,e,n,r,i,o){var a=r*r;if(r>0&&e.size<(i?a:r))n.numPoints+=e.length/3;else{for(var s=[],u=0;u<e.length;u+=3)(0===r||e[u+2]>a)&&(n.numSimplified++,s.push(e[u]),s.push(e[u+1])),n.numPoints++;i&&function(t,e){for(var n=0,r=0,i=t.length,o=i-2;r<i;o=r,r+=2)n+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=a,t[i-1-r]=s}}(s,o),t.push(s)}}function gt(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)K(n,t.features[r],e,r);else K(n,"Feature"===t.type?t:{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(t,e){var n=e.buffer/e.extent,r=t,i=nt(t,1,-1-n,n,0,-1,2,e),o=nt(t,1,1-n,2+n,0,-1,2,e);return(i||o)&&(r=nt(t,1,-n,1+n,0,-1,2,e)||[],i&&(r=lt(i,1).concat(r)),o&&(r=r.concat(lt(o,-1)))),r}(r,e)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function yt(t,e,n){return 32*((1<<t)*n+e)+t}function bt(t,e){var n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return e(null,null);var i=new v(r.features),o=_(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:i,rawData:o.buffer})}j.prototype.load=function(t){var e=this.options,n=e.log,r=e.minZoom,i=e.maxZoom,o=e.nodeSize;n&&console.time("total time");var a="prepare "+t.length+" points";n&&console.time(a),this.points=t;for(var s=[],u=0;u<t.length;u++)t[u].geometry&&s.push(z(t[u],u));this.trees[i+1]=new D(s,H,W,o,Float32Array),n&&console.timeEnd(a);for(var c=i;c>=r;c--){var l=+Date.now();s=this._cluster(s,c),this.trees[c]=new D(s,H,W,o,Float32Array),n&&console.log("z%d: %d clusters in %dms",c,s.length,+Date.now()-l)}return n&&console.timeEnd("total time"),this},j.prototype.getClusters=function(t,e){var n=((t[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[1])),i=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){var a=this.getClusters([n,r,180,o],e),s=this.getClusters([-180,r,i,o],e);return a.concat(s)}for(var u=this.trees[this._limitZoom(e)],c=[],l=0,f=u.range(V(n),q(o),V(i),q(r));l<f.length;l+=1){var p=u.points[f[l]];c.push(p.numPoints?B(p):this.points[p.index])}return c},j.prototype.getChildren=function(t){var e=this._getOriginId(t),n=this._getOriginZoom(t),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.points[e];if(!o)throw new Error(r);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=[],u=0,c=i.within(o.x,o.y,a);u<c.length;u+=1){var l=i.points[c[u]];l.parentId===t&&s.push(l.numPoints?B(l):this.points[l.index])}if(0===s.length)throw new Error(r);return s},j.prototype.getLeaves=function(t,e,n){var r=[];return this._appendLeaves(r,t,e=e||10,n=n||0,0),r},j.prototype.getTile=function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options,a=o.radius/o.extent,s=(n-a)/i,u=(n+1+a)/i,c={features:[]};return this._addTileFeatures(r.range((e-a)/i,s,(e+1+a)/i,u),r.points,e,n,i,c),0===e&&this._addTileFeatures(r.range(1-a/i,s,1,u),r.points,i,n,i,c),e===i-1&&this._addTileFeatures(r.range(0,s,a/i,u),r.points,-1,n,i,c),c.features.length?c:null},j.prototype.getClusterExpansionZoom=function(t){for(var e=this._getOriginZoom(t)-1;e<=this.options.maxZoom;){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},j.prototype._appendLeaves=function(t,e,n,r,i){for(var o=0,a=this.getChildren(e);o<a.length;o+=1){var s=a[o],u=s.properties;if(u&&u.cluster?i+u.point_count<=r?i+=u.point_count:i=this._appendLeaves(t,u.cluster_id,n,r,i):i<r?i++:t.push(s),t.length===n)break}return i},j.prototype._addTileFeatures=function(t,e,n,r,i,o){for(var a=0,s=t;a<s.length;a+=1){var u=e[s[a]],c=u.numPoints,l={type:1,geometry:[[Math.round(this.options.extent*(u.x*i-n)),Math.round(this.options.extent*(u.y*i-r))]],tags:c?U(u):this.points[u.index].properties},f=void 0;c?f=u.id:this.options.generateId?f=u.index:this.points[u.index].id&&(f=this.points[u.index].id),void 0!==f&&(l.id=f),o.features.push(l)}},j.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))},j.prototype._cluster=function(t,e){for(var n=[],r=this.options,i=r.reduce,o=r.minPoints,a=r.radius/(r.extent*Math.pow(2,e)),s=0;s<t.length;s++){var u=t[s];if(!(u.zoom<=e)){u.zoom=e;for(var c=this.trees[e+1],l=c.within(u.x,u.y,a),f=u.numPoints||1,p=f,h=0,d=l;h<d.length;h+=1){var v=c.points[d[h]];v.zoom>e&&(p+=v.numPoints||1)}if(p>=o){for(var m=u.x*f,g=u.y*f,y=i&&f>1?this._map(u,!0):null,b=(s<<5)+(e+1)+this.points.length,_=0,x=l;_<x.length;_+=1){var w=c.points[x[_]];if(!(w.zoom<=e)){w.zoom=e;var E=w.numPoints||1;m+=w.x*E,g+=w.y*E,w.parentId=b,i&&(y||(y=this._map(u,!0)),i(y,this._map(w)))}}u.parentId=b,n.push(F(m/p,g/p,b,p,y))}else if(n.push(u),p>1)for(var S=0,C=l;S<C.length;S+=1){var T=c.points[C[S]];T.zoom<=e||(T.zoom=e,n.push(T))}}}return n},j.prototype._getOriginId=function(t){return t-this.points.length>>5},j.prototype._getOriginZoom=function(t){return(t-this.points.length)%32},j.prototype._map=function(t,e){if(t.numPoints)return e?G({},t.properties):t.properties;var n=this.points[t.index].properties,r=this.options.map(n);return e&&r===n?G({},r):r},gt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},gt.prototype.splitTile=function(t,e,n,r,i,o,a){for(var s=[t,e,n,r],u=this.options,c=u.debug;s.length;){r=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var l=1<<e,f=yt(e,n,r),p=this.tiles[f];if(!p&&(c>1&&console.time("creation"),p=this.tiles[f]=dt(t,e,n,r,u),this.tileCoords.push({z:e,x:n,y:r}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var h="z"+e;this.stats[h]=(this.stats[h]||0)+1,this.total++}if(p.source=t,i){if(e===u.maxZoom||e===i)continue;var d=1<<i-e;if(n!==Math.floor(o/d)||r!==Math.floor(a/d))continue}else if(e===u.indexMaxZoom||p.numPoints<=u.indexMaxPoints)continue;if(p.source=null,0!==t.length){c>1&&console.time("clipping");var v,m,g,y,b,_,x=.5*u.buffer/u.extent,w=.5-x,E=.5+x,S=1+x;v=m=g=y=null,b=nt(t,l,n-x,n+E,0,p.minX,p.maxX,u),_=nt(t,l,n+w,n+S,0,p.minX,p.maxX,u),t=null,b&&(v=nt(b,l,r-x,r+E,1,p.minY,p.maxY,u),m=nt(b,l,r+w,r+S,1,p.minY,p.maxY,u),b=null),_&&(g=nt(_,l,r-x,r+E,1,p.minY,p.maxY,u),y=nt(_,l,r+w,r+S,1,p.minY,p.maxY,u),_=null),c>1&&console.timeEnd("clipping"),s.push(v||[],e+1,2*n,2*r),s.push(m||[],e+1,2*n,2*r+1),s.push(g||[],e+1,2*n+1,2*r),s.push(y||[],e+1,2*n+1,2*r+1)}}},gt.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,o=r.debug;if(t<0||t>24)return null;var a=1<<t,s=yt(t,e=(e%a+a)%a,n);if(this.tiles[s])return pt(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var u,c=t,l=e,f=n;!u&&c>0;)c--,l=Math.floor(l/2),f=Math.floor(f/2),u=this.tiles[yt(c,l,f)];return u&&u.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,l,f),o>1&&console.time("drilling down"),this.splitTile(u.source,c,l,f,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?pt(this.tiles[s],i):null):null};var _t=function(e){function n(t,n,r,i){e.call(this,t,n,r,bt),i&&(this.loadGeoJSON=i)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},n.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var n=this._pendingCallback,r=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var i=!!(r&&r.request&&r.request.collectResourceTiming)&&new t.RequestPerformance(r.request);this.loadGeoJSON(r,(function(o,a){if(o||!a)return n(o);if("object"!=typeof a)return n(new Error("Input data given to '"+r.source+"' is not a valid GeoJSON object."));!function t(e,n){var r,i=e&&e.type;if("FeatureCollection"===i)for(r=0;r<e.features.length;r++)t(e.features[r],n);else if("GeometryCollection"===i)for(r=0;r<e.geometries.length;r++)t(e.geometries[r],n);else if("Feature"===i)t(e.geometry,n);else if("Polygon"===i)f(e.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<e.coordinates.length;r++)f(e.coordinates[r],n);return e}(a,!0);try{if(r.filter){var s=t.createExpression(r.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===s.result)throw new Error(s.value.map((function(t){return t.key+": "+t.message})).join(", "));var u=a.features.filter((function(t){return s.value.evaluate({zoom:0},t)}));a={type:"FeatureCollection",features:u}}e._geoJSONIndex=r.cluster?new j(function(e){var n=e.superclusterOptions,r=e.clusterProperties;if(!r||!n)return n;for(var i={},o={},a={accumulated:null,zoom:0},s={properties:null},u=Object.keys(r),c=0,l=u;c<l.length;c+=1){var f=l[c],p=r[f],h=p[0],d=t.createExpression(p[1]),v=t.createExpression("string"==typeof h?[h,["accumulated"],["get",f]]:h);i[f]=d.value,o[f]=v.value}return n.map=function(t){s.properties=t;for(var e={},n=0,r=u;n<r.length;n+=1){var o=r[n];e[o]=i[o].evaluate(a,s)}return e},n.reduce=function(t,e){s.properties=e;for(var n=0,r=u;n<r.length;n+=1){var i=r[n];a.accumulated=t[i],t[i]=o[i].evaluate(a,s)}},n}(r)).load(a.features):function(t,e){return new gt(t,e)}(a,r.geojsonVtOptions)}catch(o){return n(o)}e.loaded={};var c={};if(i){var l=i.finish();l&&(c.resourceTiming={},c.resourceTiming[r.source]=JSON.parse(JSON.stringify(l)))}n(null,c)}))}},n.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},n.prototype.reloadTile=function(t,n){var r=this.loaded;return r&&r[t.uid]?e.prototype.reloadTile.call(this,t,n):this.loadTile(t,n)},n.prototype.loadGeoJSON=function(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."))}}},n.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},n.prototype.getClusterExpansionZoom=function(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}},n.prototype.getClusterChildren=function(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}},n.prototype.getClusterLeaves=function(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}},n}(u),xt=function(e){var n=this;this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:u,geojson:_t},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(n.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');n.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return xt.prototype.setReferrer=function(t,e){this.referrer=e},xt.prototype.setImages=function(t,e,n){for(var r in this.availableImages[t]=e,this.workerSources[t]){var i=this.workerSources[t][r];for(var o in i)i[o].availableImages=e}n()},xt.prototype.setLayers=function(t,e,n){this.getLayerIndex(t).replace(e),n()},xt.prototype.updateLayers=function(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()},xt.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).loadTile(e,n)},xt.prototype.loadDEMTile=function(t,e,n){this.getDEMWorkerSource(t,e.source).loadTile(e,n)},xt.prototype.reloadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).reloadTile(e,n)},xt.prototype.abortTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)},xt.prototype.removeTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)},xt.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},xt.prototype.removeSource=function(t,e,n){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,n):n()}},xt.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}},xt.prototype.syncRTLPluginState=function(e,n,r){try{t.plugin.setState(n);var i=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=i){this.self.importScripts(i);var o=t.plugin.isParsed();r(o?void 0:new Error("RTL Text Plugin failed to import scripts from "+i),o)}}catch(t){r(t.toString())}},xt.prototype.getAvailableImages=function(t){var e=this.availableImages[t];return e||(e=[]),e},xt.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new r),e},xt.prototype.getWorkerSource=function(t,e,n){var r=this;return this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),this.workerSources[t][e][n]||(this.workerSources[t][e][n]=new this.workerSourceTypes[e]({send:function(e,n,i){r.actor.send(e,n,i,t)}},this.getLayerIndex(t),this.getAvailableImages(t))),this.workerSources[t][e][n]},xt.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new l),this.demWorkerSources[t][e]},xt.prototype.enforceCacheSizeLimit=function(e,n){t.enforceCacheSizeLimit(n)},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new xt(self)),xt})),r(["./shared"],(function(t){var e=t.createCommonjsModule((function(t){function e(t){return!n(t)}function n(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var n=e.getImageData(0,0,1,1);return n&&n.width===t.width}()?(void 0===r[n=t&&t.failIfMajorPerformanceCaveat]&&(r[n]=function(t){var n=function(t){var n=document.createElement("canvas"),r=Object.create(e.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=t,n.probablySupportsContext?n.probablySupportsContext("webgl",r)||n.probablySupportsContext("experimental-webgl",r):n.supportsContext?n.supportsContext("webgl",r)||n.supportsContext("experimental-webgl",r):n.getContext("webgl",r)||n.getContext("experimental-webgl",r)}(t);if(!n)return!1;var r=n.createShader(n.VERTEX_SHADER);return!(!r||n.isContextLost())&&(n.shaderSource(r,"void main() {}"),n.compileShader(r),!0===n.getShaderParameter(r,n.COMPILE_STATUS))}(n)),r[n]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var n}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e,window.mapboxgl.notSupportedReason=n);var r={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),n={create:function(e,n,r){var i=t.window.document.createElement(e);return void 0!==n&&(i.className=n),r&&r.appendChild(i),i},createNS:function(e,n){return t.window.document.createElementNS(e,n)}},r=t.window.document&&t.window.document.documentElement.style;function i(t){if(!r)return t[0];for(var e=0;e<t.length;e++)if(t[e]in r)return t[e];return t[0]}var o,a=i(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){r&&a&&(o=r[a],r[a]="none")},n.enableDrag=function(){r&&a&&(r[a]=o)};var s=i(["transform","WebkitTransform"]);n.setTransform=function(t,e){t.style[s]=e};var u=!1;try{var c=Object.defineProperty({},"passive",{get:function(){u=!0}});t.window.addEventListener("test",c,c),t.window.removeEventListener("test",c,c)}catch(t){u=!1}n.addEventListener=function(t,e,n,r){void 0===r&&(r={}),t.addEventListener(e,n,"passive"in r&&u?r:r.capture)},n.removeEventListener=function(t,e,n,r){void 0===r&&(r={}),t.removeEventListener(e,n,"passive"in r&&u?r:r.capture)};var l=function e(n){n.preventDefault(),n.stopPropagation(),t.window.removeEventListener("click",e,!0)};function f(t){var e=t.userImage;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}n.suppressClick=function(){t.window.addEventListener("click",l,!0),t.window.setTimeout((function(){t.window.removeEventListener("click",l,!0)}),0)},n.mousePos=function(e,n){var r=e.getBoundingClientRect();return new t.Point(n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop)},n.touchPos=function(e,n){for(var r=e.getBoundingClientRect(),i=[],o=0;o<n.length;o++)i.push(new t.Point(n[o].clientX-r.left-e.clientLeft,n[o].clientY-r.top-e.clientTop));return i},n.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},n.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var p=function(e){function n(){e.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.isLoaded=function(){return this.loaded},n.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,n=this.requestors;e<n.length;e+=1){var r=n[e];this._notify(r.ids,r.callback)}this.requestors=[]}},n.prototype.getImage=function(t){return this.images[t]},n.prototype.addImage=function(t,e){this._validate(t,e)&&(this.images[t]=e)},n.prototype._validate=function(e,n){var r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchX" value'))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchY" value'))),r=!1),this._validateContent(n.content,n)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "content" value'))),r=!1),r},n.prototype._validateStretch=function(t,e){if(!t)return!0;for(var n=0,r=0,i=t;r<i.length;r+=1){var o=i[r];if(o[0]<n||o[1]<o[0]||e<o[1])return!1;n=o[1]}return!0},n.prototype._validateContent=function(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))},n.prototype.updateImage=function(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0},n.prototype.removeImage=function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()},n.prototype.listImages=function(){return Object.keys(this.images)},n.prototype.getImages=function(t,e){var n=!0;if(!this.isLoaded())for(var r=0,i=t;r<i.length;r+=1)this.images[i[r]]||(n=!1);this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})},n.prototype._notify=function(e,n){for(var r={},i=0,o=e;i<o.length;i+=1){var a=o[i];this.images[a]||this.fire(new t.Event("styleimagemissing",{id:a}));var s=this.images[a];s?r[a]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:t.warnOnce('Image "'+a+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}n(null,r)},n.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},n.prototype.getPattern=function(e){var n=this.patterns[e],r=this.getImage(e);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{var i={w:r.data.width+2,h:r.data.height+2,x:0,y:0},o=new t.ImagePosition(i,r);this.patterns[e]={bin:i,position:o}}return this._updatePatternAtlas(),this.patterns[e].position},n.prototype.bind=function(e){var n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)},n.prototype._updatePatternAtlas=function(){var e=[];for(var n in this.patterns)e.push(this.patterns[n].bin);var r=t.potpack(e),i=r.w,o=r.h,a=this.atlasImage;for(var s in a.resize({width:i||1,height:o||1}),this.patterns){var u=this.patterns[s].bin,c=u.x+1,l=u.y+1,f=this.images[s].data,p=f.width,h=f.height;t.RGBAImage.copy(f,a,{x:0,y:0},{x:c,y:l},{width:p,height:h}),t.RGBAImage.copy(f,a,{x:0,y:h-1},{x:c,y:l-1},{width:p,height:1}),t.RGBAImage.copy(f,a,{x:0,y:0},{x:c,y:l+h},{width:p,height:1}),t.RGBAImage.copy(f,a,{x:p-1,y:0},{x:c-1,y:l},{width:1,height:h}),t.RGBAImage.copy(f,a,{x:0,y:0},{x:c+p,y:l},{width:1,height:h})}this.dirty=!0},n.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},n.prototype.dispatchRenderCallbacks=function(t){for(var e=0,n=t;e<n.length;e+=1){var r=n[e];if(!this.callbackDispatchedThisFrame[r]){this.callbackDispatchedThisFrame[r]=!0;var i=this.images[r];f(i)&&this.updateImage(r,i)}}},n}(t.Evented),h=m,d=m,v=1e20;function m(t,e,n,r,i,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function g(t,e,n,r,i,o,a){for(var s=0;s<e;s++){for(var u=0;u<n;u++)r[u]=t[u*e+s];for(y(r,i,o,a,n),u=0;u<n;u++)t[u*e+s]=i[u]}for(u=0;u<n;u++){for(s=0;s<e;s++)r[s]=t[u*e+s];for(y(r,i,o,a,e),s=0;s<e;s++)t[u*e+s]=Math.sqrt(i[s])}}function y(t,e,n,r,i){n[0]=0,r[0]=-v,r[1]=+v;for(var o=1,a=0;o<i;o++){for(var s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);s<=r[a];)a--,s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);n[++a]=o,r[a]=s,r[a+1]=+v}for(o=0,a=0;o<i;o++){for(;r[a+1]<o;)a++;e[o]=(o-n[a])*(o-n[a])+t[n[a]]}}m.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var i=e.data[4*r+3]/255;this.gridOuter[r]=1===i?0:0===i?v:Math.pow(Math.max(0,.5-i),2),this.gridInner[r]=1===i?v:0===i?0:Math.pow(Math.max(0,i-.5),2)}for(g(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),g(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++)n[r]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[r]-this.gridInner[r])/this.radius+this.cutoff))));return n},h["default"]=d;var b=function(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}};b.prototype.setURL=function(t){this.url=t},b.prototype.getGlyphs=function(e,n){var r=this,i=[];for(var o in e)for(var a=0,s=e[o];a<s.length;a+=1)i.push({stack:o,id:s[a]});t.asyncAll(i,(function(t,e){var n=t.stack,i=t.id,o=r.entries[n];o||(o=r.entries[n]={glyphs:{},requests:{},ranges:{}});var a=o.glyphs[i];if(void 0===a){if(a=r._tinySDF(o,n,i))return o.glyphs[i]=a,void e(null,{stack:n,id:i,glyph:a});var s=Math.floor(i/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else if(o.ranges[s])e(null,{stack:n,id:i,glyph:a});else{var u=o.requests[s];u||(u=o.requests[s]=[],b.loadGlyphRange(n,s,r.url,r.requestManager,(function(t,e){if(e){for(var n in e)r._doesCharSupportLocalGlyph(+n)||(o.glyphs[+n]=e[+n]);o.ranges[s]=!0}for(var i=0,a=u;i<a.length;i+=1)(0,a[i])(t,e);delete o.requests[s]}))),u.push((function(t,r){t?e(t):r&&e(null,{stack:n,id:i,glyph:r[i]||null})}))}}else e(null,{stack:n,id:i,glyph:a})}),(function(t,e){if(t)n(t);else if(e){for(var r={},i=0,o=e;i<o.length;i+=1){var a=o[i],s=a.stack,u=a.id,c=a.glyph;(r[s]||(r[s]={}))[u]=c&&{id:c.id,bitmap:c.bitmap.clone(),metrics:c.metrics}}n(null,r)}}))},b.prototype._doesCharSupportLocalGlyph=function(e){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](e)||t.isChar["Hangul Syllables"](e)||t.isChar.Hiragana(e)||t.isChar.Katakana(e))},b.prototype._tinySDF=function(e,n,r){var i=this.localIdeographFontFamily;if(i&&this._doesCharSupportLocalGlyph(r)){var o=e.tinySDF;if(!o){var a="400";/bold/i.test(n)?a="900":/medium/i.test(n)?a="500":/light/i.test(n)&&(a="200"),o=e.tinySDF=new b.TinySDF(24,3,8,.25,i,a)}return{id:r,bitmap:new t.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},b.loadGlyphRange=function(e,n,r,i,o){var a=256*n,s=a+255,u=i.transformRequest(i.normalizeGlyphsURL(r).replace("{fontstack}",e).replace("{range}",a+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(u,(function(e,n){if(e)o(e);else if(n){for(var r={},i=0,a=t.parseGlyphPBF(n);i<a.length;i+=1){var s=a[i];r[s.id]=s}o(null,r)}}))},b.TinySDF=h;var _=function(){this.specification=t.styleSpec.light.position};_.prototype.possiblyEvaluate=function(e,n){return t.sphericalToCartesian(e.expression.evaluate(n))},_.prototype.interpolate=function(e,n,r){return{x:t.number(e.x,n.x,r),y:t.number(e.y,n.y,r),z:t.number(e.z,n.z,r)}};var x=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new _,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),w=function(e){function n(n){e.call(this),this._transitionable=new t.Transitionable(x),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getLight=function(){return this._transitionable.serialize()},n.prototype.setLight=function(e,n){if(void 0===n&&(n={}),!this._validate(t.validateLight,e,n))for(var r in e){var i=e[r];t.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-"-transition".length),i):this._transitionable.setValue(r,i)}},n.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},n.prototype.hasTransition=function(){return this._transitioning.hasTransition()},n.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},n.prototype._validate=function(e,n,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},n}(t.Evented),E=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};E.prototype.getDash=function(t,e){var n=t.join(",")+String(e);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(t,e)),this.dashEntry[n]},E.prototype.getDashRanges=function(t,e,n){var r=[],i=t.length%2==1?-t[t.length-1]*n:0,o=t[0]*n,a=!0;r.push({left:i,right:o,isDash:a,zeroLength:0===t[0]});for(var s=t[0],u=1;u<t.length;u++){var c=t[u];r.push({left:i=s*n,right:o=(s+=c)*n,isDash:a=!a,zeroLength:0===c})}return r},E.prototype.addRoundDash=function(t,e,n){for(var r=e/2,i=-n;i<=n;i++)for(var o=this.width*(this.nextRow+n+i),a=0,s=t[a],u=0;u<this.width;u++){u/s.right>1&&(s=t[++a]);var c=Math.abs(u-s.left),l=Math.abs(u-s.right),f=Math.min(c,l),p=void 0,h=i/n*(r+1);if(s.isDash){var d=r-Math.abs(h);p=Math.sqrt(f*f+d*d)}else p=r-Math.sqrt(f*f+h*h);this.data[o+u]=Math.max(0,Math.min(255,p+128))}},E.prototype.addRegularDash=function(t){for(var e=t.length-1;e>=0;--e){var n=t[e],r=t[e+1];n.zeroLength?t.splice(e,1):r&&r.isDash===n.isDash&&(r.left=n.left,t.splice(e,1))}var i=t[0],o=t[t.length-1];i.isDash===o.isDash&&(i.left=o.left-this.width,o.right=i.right+this.width);for(var a=this.width*this.nextRow,s=0,u=t[s],c=0;c<this.width;c++){c/u.right>1&&(u=t[++s]);var l=Math.abs(c-u.left),f=Math.abs(c-u.right),p=Math.min(l,f);this.data[a+c]=Math.max(0,Math.min(255,(u.isDash?p:-p)+128))}},E.prototype.addDash=function(e,n){var r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var o=0,a=0;a<e.length;a++)o+=e[a];if(0!==o){var s=this.width/o,u=this.getDashRanges(e,this.width,s);n?this.addRoundDash(u,s,r):this.addRegularDash(u)}var c={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=i,this.dirty=!0,c},E.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))};var S=function e(n,r){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var i=this.workerPool.acquire(this.id),o=0;o<i.length;o++){var a=new e.Actor(i[o],r,this.id);a.name="Worker "+o,this.actors.push(a)}};function C(e,n,r){var i=function(i,o){if(i)return r(i);if(o){var a=t.pick(t.extend(o,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);o.vector_layers&&(a.vectorLayers=o.vector_layers,a.vectorLayerIds=a.vectorLayers.map((function(t){return t.id}))),a.tiles=n.canonicalizeTileset(a,e.url),r(null,a)}};return e.url?t.getJSON(n.transformRequest(n.normalizeSourceURL(e.url),t.ResourceType.Source),i):t.browser.frame((function(){return i(null,e)}))}S.prototype.broadcast=function(e,n,r){t.asyncAll(this.actors,(function(t,r){t.send(e,n,r)}),r=r||function(){})},S.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},S.prototype.remove=function(){this.actors.forEach((function(t){t.remove()})),this.actors=[],this.workerPool.release(this.id)},S.Actor=t.Actor;var T=function(e,n,r){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=r||24};T.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},T.prototype.contains=function(e){var n=Math.pow(2,e.z),r=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=r&&e.x<o&&e.y>=i&&e.y<a};var O=function(e){function n(n,r,i,o){if(e.call(this),this.id=n,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(r,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,(function(n,r){e._tileJSONRequest=null,e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new T(r.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(r.tiles,e.map._requestManager._customAccessToken),t.postMapLoadEvent(r.tiles,e.map._getMapId(),e.map._requestManager._skuToken,e.map._requestManager._customAccessToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},n.prototype.loaded=function(){return this._loaded},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setSourceProperty=function(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},n.prototype.setTiles=function(t){var e=this;return this.setSourceProperty((function(){e._options.tiles=t})),this},n.prototype.setUrl=function(t){var e=this;return this.setSourceProperty((function(){e.url=t,e._options.url=t})),this},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.loadTile=function(e,n){var r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),i={request:this.map._requestManager.transformRequest(r,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function o(r,i){return delete e.request,e.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(e.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&e.setExpiryData(i),e.loadVectorData(i,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}i.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=n:e.request=e.actor.send("reloadTile",i,o.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",i,o.bind(this)))},n.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)},n.prototype.unloadTile=function(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)},n.prototype.hasTransition=function(){return!1},n}(t.Evented),A=function(e){function n(n,r,i,o){e.call(this),this.id=n,this.dispatcher=i,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},r),t.extend(this,t.pick(r,["url","scheme","tileSize"]))}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,(function(n,r){e._tileJSONRequest=null,e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new T(r.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(r.tiles),t.postMapLoadEvent(r.tiles,e.map._getMapId(),e.map._requestManager._skuToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},n.prototype.loaded=function(){return this._loaded},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.loadTile=function(e,n){var r=this,i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),(function(i,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(o){r.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=r.map.painter.context,s=a.gl;e.texture=r.map.painter.getTileTexture(o.width),e.texture?e.texture.update(o,{useMipmap:!0}):(e.texture=new t.Texture(a,o,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(r.dispatcher),n(null)}}))},n.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},n.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},n.prototype.hasTransition=function(){return!1},n}(t.Evented),k=function(e){function n(n,r,i,o){e.call(this,n,r,i,o),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox"}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},n.prototype.loadTile=function(e,n){var r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function i(t,r){t&&(e.state="errored",n(t)),r&&(e.dem=r,e.needsHillshadePrepare=!0,e.state="loaded",n(null))}e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),function(r,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(r)e.state="errored",n(r);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported()?o:t.browser.getImageData(o,1),s={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:a,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",s,i.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},n.prototype._getNeighboringTiles=function(e){var n=e.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+r)%r,s=n.x+1===r?e.wrap+1:e.wrap,u={};return u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),u},n.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})},n}(A),M=function(e){function n(n,r,i,o){e.call(this),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=i.getActor(),this.setEventedParent(o),this._data=r.data,this._options=t.extend({},r),this._collectResourceTiming=r.collectResourceTiming,this._resourceTiming=[],void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId;var a=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*a,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*a,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?Math.min(r.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,r.clusterMinPoints||2),extent:t.EXTENT,radius:(r.clusterRadius||50)*a,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter},r.workerOptions)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(n){if(n)e.fire(new t.ErrorEvent(n));else{var r={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(r.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",r))}}))},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setData=function(e){var n=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(e){if(e)n.fire(new t.ErrorEvent(e));else{var r={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(r.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new t.Event("data",r))}})),this},n.prototype.getClusterExpansionZoom=function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this},n.prototype.getClusterChildren=function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this},n.prototype.getClusterLeaves=function(t,e,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},r),this},n.prototype._updateWorkerData=function(e){var n=this;this._loaded=!1;var r=t.extend({},this.workerOptions),i=this._data;"string"==typeof i?(r.request=this.map._requestManager.transformRequest(t.browser.resolveURL(i),t.ResourceType.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(i),this.actor.send(this.type+".loadData",r,(function(t,i){n._removed||i&&i.abandoned||(n._loaded=!0,i&&i.resourceTiming&&i.resourceTiming[n.id]&&(n._resourceTiming=i.resourceTiming[n.id].slice(0)),n.actor.send(n.type+".coalesce",{source:r.source},null),e(t))}))},n.prototype.loaded=function(){return this._loaded},n.prototype.loadTile=function(e,n){var r=this,i=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(i,{type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(t,o){return delete e.request,e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(o,r.map.painter,"reloadTile"===i),n(null))}))},n.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0},n.prototype.unloadTile=function(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})},n.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},n.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},n.prototype.hasTransition=function(){return!1},n}(t.Evented),P=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),I=function(e){function n(t,n,r,i){e.call(this),this.id=t,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(i),this.options=n}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(e,n){var r=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),(function(i,o){r._loaded=!0,i?r.fire(new t.ErrorEvent(i)):o&&(r.image=o,e&&(r.coordinates=e),n&&n(),r._finishLoading())}))},n.prototype.loaded=function(){return this._loaded},n.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(function(){e.texture=null})),this):this},n.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setCoordinates=function(e){var n=this;this.coordinates=e;var r=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var n=1/0,r=1/0,i=-1/0,o=-1/0,a=0,s=e;a<s.length;a+=1){var u=s[a];n=Math.min(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.x),o=Math.max(o,u.y)}var c=Math.max(i-n,o-r),l=Math.max(0,Math.floor(-Math.log(c)/Math.LN2)),f=Math.pow(2,l);return new t.CanonicalTileID(l,Math.floor((n+i)/2*f),Math.floor((r+o)/2*f))}(r),this.minzoom=this.maxzoom=this.tileID.z;var i=r.map((function(t){return n.tileID.getTilePoint(t)._round()}));return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(i[2].x,i[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},n.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,P.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},n.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return!1},n}(t.Evented),L=function(e){function n(t,n,r,i){e.call(this,t,n,r,i),this.roundZoom=!0,this.type="video",this.options=n}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this._loaded=!1;var n=this.options;this.urls=[];for(var r=0,i=n.urls;r<i.length;r+=1)this.urls.push(this.map._requestManager.transformRequest(i[r],t.ResourceType.Source).url);t.getVideo(this.urls,(function(n,r){e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):r&&(e.video=r,e.video.loop=!0,e.video.addEventListener("playing",(function(){e.map.triggerRepaint()})),e.map&&e.video.play(),e._finishLoading())}))},n.prototype.pause=function(){this.video&&this.video.pause()},n.prototype.play=function(){this.video&&this.video.play()},n.prototype.seek=function(e){if(this.video){var n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+n.start(0)+" and "+n.end(0)+"-second mark."))):this.video.currentTime=e}},n.prototype.getVideo=function(){return this.video},n.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},n.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,P.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this.video&&!this.video.paused},n}(I),R=function(e){function n(n,r,i,o){e.call(this,n,r,i,o),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some((function(t){return!Array.isArray(t)||2!==t.length||t.some((function(t){return"number"!=typeof t}))}))||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},n.prototype.getCanvas=function(){return this.canvas},n.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},n.prototype.onRemove=function(){this.pause()},n.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,r=n.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,P.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(n,this.canvas,r.RGBA,{premultiply:!0}),this.tiles){var o=this.tiles[i];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this._playing},n.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1},n}(I),D={vector:O,raster:A,"raster-dem":k,geojson:M,video:L,image:I,canvas:R};function N(e,n){var r=t.identity([]);return t.translate(r,r,[1,1,0]),t.scale(r,r,[.5*e.width,.5*e.height,1]),t.multiply(r,r,e.calculatePosMatrix(n.toUnwrapped()))}function j(t,e,n,r,i,o){var a=function(t,e,n){if(t)for(var r=0,i=t;r<i.length;r+=1){var o=e[i[r]];if(o&&o.source===n&&"fill-extrusion"===o.type)return!0}else for(var a in e){var s=e[a];if(s.source===n&&"fill-extrusion"===s.type)return!0}return!1}(i&&i.layers,e,t.id),s=o.maxPitchScaleFactor(),u=t.tilesIn(r,s,a);u.sort(F);for(var c=[],l=0,f=u;l<f.length;l+=1){var p=f[l];c.push({wrappedTileID:p.tileID.wrapped().key,queryResults:p.tile.queryRenderedFeatures(e,n,t._state,p.queryGeometry,p.cameraQueryGeometry,p.scale,i,o,s,N(t.transform,p.tileID))})}var h=function(t){for(var e={},n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.queryResults,s=o.wrappedTileID,u=n[s]=n[s]||{};for(var c in a)for(var l=a[c],f=u[c]=u[c]||{},p=e[c]=e[c]||[],h=0,d=l;h<d.length;h+=1){var v=d[h];f[v.featureIndex]||(f[v.featureIndex]=!0,p.push(v))}}return e}(c);for(var d in h)h[d].forEach((function(e){var n=e.feature,r=t.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r}));return h}function F(t,e){var n=t.tileID,r=e.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}var z=function(t,e){this.max=t,this.onRemove=e,this.reset()};z.prototype.reset=function(){for(var t in this.data)for(var e=0,n=this.data[t];e<n.length;e+=1){var r=n[e];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},z.prototype.add=function(t,e,n){var r=this,i=t.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var o={value:e,timeout:void 0};if(void 0!==n&&(o.timeout=setTimeout((function(){r.remove(t,o)}),n)),this.data[i].push(o),this.order.push(i),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},z.prototype.has=function(t){return t.wrapped().key in this.data},z.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},z.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},z.prototype.getByKey=function(t){var e=this.data[t];return e?e[0].value:null},z.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},z.prototype.remove=function(t,e){if(!this.has(t))return this;var n=t.wrapped().key,r=void 0===e?0:this.data[n].indexOf(e),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this},z.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this},z.prototype.filter=function(t){var e=[];for(var n in this.data)for(var r=0,i=this.data[n];r<i.length;r+=1){var o=i[r];t(o.value)||e.push(o)}for(var a=0,s=e;a<s.length;a+=1){var u=s[a];this.remove(u.value.tileID,u)}};var B=function(t,e,n){this.context=t;var r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};B.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},B.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},B.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var U={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},V=function(t,e,n,r){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;var i=t.gl;this.buffer=i.createBuffer(),t.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};V.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},V.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},V.prototype.enableAttributes=function(t,e){for(var n=0;n<this.attributes.length;n++){var r=e.attributes[this.attributes[n].name];void 0!==r&&t.enableVertexAttribArray(r)}},V.prototype.setVertexAttribPointers=function(t,e,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],o=e.attributes[i.name];void 0!==o&&t.vertexAttribPointer(o,i.components,t[U[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}},V.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var q=function(t){this.gl=t.gl,this["default"]=this.getDefault(),this.current=this["default"],this.dirty=!1};q.prototype.get=function(){return this.current},q.prototype.set=function(t){},q.prototype.getDefault=function(){return this["default"]},q.prototype.setDefault=function(){this.set(this["default"])};var G=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getDefault=function(){return t.Color.transparent},n.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},n}(q),H=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(q),W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(q),X=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(q),Z=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(q),Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(q),K=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(q),J=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(q),Q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(q),$=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(q),tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(q),et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(q),nt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(q),rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(q),it=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getDefault=function(){return t.Color.transparent},n.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},n}(q),ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(q),at=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(q),st=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(q),ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(q),ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(q),lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(q),ft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(q),pt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(q),ht=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(q),dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(q),vt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(q),mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(q),gt=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(q),yt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(q),bt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(q),_t=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(q),xt=function(t){function e(e,n){t.call(this,e),this.context=e,this.parent=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e}(q),wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(xt),Et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(xt),St=function(t,e,n,r){this.context=t,this.width=e,this.height=n;var i=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new wt(t,i),r&&(this.depthAttachment=new Et(t,i))};St.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){var n=this.depthAttachment.get();n&&t.deleteRenderbuffer(n)}t.deleteFramebuffer(this.framebuffer)};var Ct=function(t,e,n){this.func=t,this.mask=e,this.range=n};Ct.ReadOnly=!1,Ct.ReadWrite=!0,Ct.disabled=new Ct(519,Ct.ReadOnly,[0,1]);var Tt=function(t,e,n,r,i,o){this.test=t,this.ref=e,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o};Tt.disabled=new Tt({func:519,mask:0},0,0,7680,7680,7680);var Ot=function(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n};Ot.disabled=new Ot(Ot.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),Ot.unblended=new Ot(Ot.Replace,t.Color.transparent,[!0,!0,!0,!0]),Ot.alphaBlended=new Ot([1,771],t.Color.transparent,[!0,!0,!0,!0]);var At=function(t,e,n){this.enable=t,this.mode=e,this.frontFace=n};At.disabled=new At(!1,1029,2305),At.backCCW=new At(!0,1029,2305);var kt=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new G(this),this.clearDepth=new H(this),this.clearStencil=new W(this),this.colorMask=new X(this),this.depthMask=new Z(this),this.stencilMask=new Y(this),this.stencilFunc=new K(this),this.stencilOp=new J(this),this.stencilTest=new Q(this),this.depthRange=new $(this),this.depthTest=new tt(this),this.depthFunc=new et(this),this.blend=new nt(this),this.blendFunc=new rt(this),this.blendColor=new it(this),this.blendEquation=new ot(this),this.cullFace=new at(this),this.cullFaceSide=new st(this),this.frontFace=new ut(this),this.program=new ct(this),this.activeTexture=new lt(this),this.viewport=new ft(this),this.bindFramebuffer=new pt(this),this.bindRenderbuffer=new ht(this),this.bindTexture=new dt(this),this.bindVertexBuffer=new vt(this),this.bindElementBuffer=new mt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new gt(this),this.pixelStoreUnpack=new yt(this),this.pixelStoreUnpackPremultiplyAlpha=new bt(this),this.pixelStoreUnpackFlipY=new _t(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)};kt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},kt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},kt.prototype.createIndexBuffer=function(t,e){return new B(this,t,e)},kt.prototype.createVertexBuffer=function(t,e,n){return new V(this,t,e,n)},kt.prototype.createRenderbuffer=function(t,e,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),i},kt.prototype.createFramebuffer=function(t,e,n){return new St(this,t,e,n)},kt.prototype.clear=function(t){var e=t.color,n=t.depth,r=this.gl,i=0;e&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(i|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(i)},kt.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},kt.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},kt.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},kt.prototype.setColorMode=function(e){t.deepEqual(e.blendFunction,Ot.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},kt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Mt=function(e){function n(n,r,i){var o=this;e.call(this),this.id=n,this.dispatcher=i,this.on("data",(function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))})),this.on("error",(function(){o._sourceErrored=!0})),this._source=function(e,n,r,i){var o=new D[n.type](e,n,r,i);if(o.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+o.id);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o}(n,r,i,this),this._tiles={},this._cache=new z(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},n.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},n.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},n.prototype.getSource=function(){return this._source},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},n.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},n.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,(function(){}))},n.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,(function(){}))},n.prototype.serialize=function(){return this._source.serialize()},n.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var n=this._tiles[e];n.upload(t),n.prepare(this.map.style.imageManager)}},n.prototype.getIds=function(){return t.values(this._tiles).map((function(t){return t.tileID})).sort(Pt).map((function(t){return t.key}))},n.prototype.getRenderableIds=function(e){var n=this,r=[];for(var i in this._tiles)this._isIdRenderable(i,e)&&r.push(this._tiles[i]);return e?r.sort((function(e,r){var i=e.tileID,o=r.tileID,a=new t.Point(i.canonical.x,i.canonical.y)._rotate(n.transform.angle),s=new t.Point(o.canonical.x,o.canonical.y)._rotate(n.transform.angle);return i.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x})).map((function(t){return t.tileID.key})):r.map((function(t){return t.tileID})).sort(Pt).map((function(t){return t.key}))},n.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},n.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},n.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},n.prototype._reloadTile=function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))},n.prototype._tileLoaded=function(e,n,r,i){if(i)return e.state="errored",void(404!==i.status?this._source.fire(new t.ErrorEvent(i,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},n.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),n=0;n<e.length;n++){var r=e[n];if(t.neighboringTiles&&t.neighboringTiles[r]){var i=this.getTileByID(r);o(t,i),o(i,t)}}function o(t,e){t.needsHillshadePrepare=!0;var n=e.tileID.canonical.x-t.tileID.canonical.x,r=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}},n.prototype.getTile=function(t){return this.getTileByID(t.key)},n.prototype.getTileByID=function(t){return this._tiles[t]},n.prototype._retainLoadedChildren=function(t,e,n,r){for(var i in this._tiles){var o=this._tiles[i];if(!(r[i]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>n)){for(var a=o.tileID;o&&o.tileID.overscaledZ>e+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var u=a;u.overscaledZ>e;)if(t[(u=u.scaledTo(u.overscaledZ-1)).key]){r[a.key]=a;break}}}},n.prototype.findLoadedParent=function(t,e){if(t.key in this._loadedParentTiles){var n=this._loadedParentTiles[t.key];return n&&n.tileID.overscaledZ>=e?n:null}for(var r=t.overscaledZ-1;r>=e;r--){var i=t.scaledTo(r),o=this._getLoadedTile(i);if(o)return o}},n.prototype._getLoadedTile=function(t){var e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)},n.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/this._source.tileSize)+1,n=Math.ceil(t.height/this._source.tileSize)+1,r=Math.floor(e*n*5),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(i)},n.prototype.handleWrapJump=function(t){var e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){var n={};for(var r in this._tiles){var i=this._tiles[r];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+e),n[i.tileID.key]=i}for(var o in this._tiles=n,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var a in this._tiles)this._setTileReloadTimer(a,this._tiles[a])}},n.prototype.update=function(e){var r=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var i;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?i=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(i=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(i=i.filter((function(t){return r._source.hasTile(t)})))):i=[];var o=e.coveringZoomLevel(this._source),a=Math.max(o-n.maxOverzooming,this._source.minzoom),s=Math.max(o+n.maxUnderzooming,this._source.minzoom),u=this._updateRetainedTiles(i,o);if(It(this._source.type)){for(var c={},l={},f=0,p=Object.keys(u);f<p.length;f+=1){var h=p[f],d=u[h],v=this._tiles[h];if(v&&!(v.fadeEndTime&&v.fadeEndTime<=t.browser.now())){var m=this.findLoadedParent(d,a);m&&(this._addTile(m.tileID),c[m.tileID.key]=m.tileID),l[h]=d}}for(var g in this._retainLoadedChildren(l,o,s,u),c)u[g]||(this._coveredTiles[g]=!0,u[g]=c[g])}for(var y in u)this._tiles[y].clearFadeHold();for(var b=0,_=t.keysDifference(this._tiles,u);b<_.length;b+=1){var x=_[b],w=this._tiles[x];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(this.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||this._removeTile(x)}this._updateLoadedParentTileCache()}},n.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},n.prototype._updateRetainedTiles=function(t,e){for(var r={},i={},o=Math.max(e-n.maxOverzooming,this._source.minzoom),a=Math.max(e+n.maxUnderzooming,this._source.minzoom),s={},u=0,c=t;u<c.length;u+=1){var l=c[u],f=this._addTile(l);r[l.key]=l,f.hasData()||e<this._source.maxzoom&&(s[l.key]=l)}this._retainLoadedChildren(s,e,a,r);for(var p=0,h=t;p<h.length;p+=1){var d=h[p],v=this._tiles[d.key];if(!v.hasData()){if(e+1>this._source.maxzoom){var m=d.children(this._source.maxzoom)[0],g=this.getTile(m);if(g&&g.hasData()){r[m.key]=m;continue}}else{var y=d.children(this._source.maxzoom);if(r[y[0].key]&&r[y[1].key]&&r[y[2].key]&&r[y[3].key])continue}for(var b=v.wasRequested(),_=d.overscaledZ-1;_>=o;--_){var x=d.scaledTo(_);if(i[x.key])break;if(i[x.key]=!0,!(v=this.getTile(x))&&b&&(v=this._addTile(x)),v&&(r[x.key]=x,b=v.wasRequested(),v.hasData()))break}}}return r},n.prototype._updateLoadedParentTileCache=function(){for(var t in this._loadedParentTiles={},this._tiles){for(var e=[],n=void 0,r=this._tiles[t].tileID;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}e.push(r.key);var i=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(i))break;r=i}for(var o=0,a=e;o<a.length;o+=1)this._loadedParentTiles[a[o]]=n}},n.prototype._addTile=function(e){var n=this._tiles[e.key];if(n)return n;(n=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));var r=Boolean(n);return r||(n=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))),n?(n.uses++,this._tiles[e.key]=n,r||this._source.fire(new t.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null},n.prototype._setTileReloadTimer=function(t,e){var n=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout((function(){n._reloadTile(t,"expired"),delete n._timers[t]}),r))},n.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},n.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},n.prototype.tilesIn=function(e,n,r){var i=this,o=[],a=this.transform;if(!a)return o;for(var s=r?a.getCameraQueryGeometry(e):e,u=e.map((function(t){return a.pointCoordinate(t)})),c=s.map((function(t){return a.pointCoordinate(t)})),l=this.getIds(),f=1/0,p=1/0,h=-1/0,d=-1/0,v=0,m=c;v<m.length;v+=1){var g=m[v];f=Math.min(f,g.x),p=Math.min(p,g.y),h=Math.max(h,g.x),d=Math.max(d,g.y)}for(var y=function(e){var r=i._tiles[l[e]];if(!r.holdingForFade()){var s=r.tileID,v=Math.pow(2,a.zoom-r.tileID.overscaledZ),m=n*r.queryPadding*t.EXTENT/r.tileSize/v,g=[s.getTilePoint(new t.MercatorCoordinate(f,p)),s.getTilePoint(new t.MercatorCoordinate(h,d))];if(g[0].x-m<t.EXTENT&&g[0].y-m<t.EXTENT&&g[1].x+m>=0&&g[1].y+m>=0){var y=u.map((function(t){return s.getTilePoint(t)})),b=c.map((function(t){return s.getTilePoint(t)}));o.push({tile:r,tileID:s,queryGeometry:y,cameraQueryGeometry:b,scale:v})}}},b=0;b<l.length;b++)y(b);return o},n.prototype.getVisibleCoordinates=function(t){for(var e=this,n=this.getRenderableIds(t).map((function(t){return e._tiles[t].tileID})),r=0,i=n;r<i.length;r+=1){var o=i[r];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return n},n.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(It(this._source.type))for(var e in this._tiles){var n=this._tiles[e];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=t.browser.now())return!0}return!1},n.prototype.setFeatureState=function(t,e,n){this._state.updateState(t=t||"_geojsonTileLayer",e,n)},n.prototype.removeFeatureState=function(t,e,n){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,n)},n.prototype.getFeatureState=function(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)},n.prototype.setDependencies=function(t,e,n){var r=this._tiles[t];r&&r.setDependencies(e,n)},n.prototype.reloadTilesForDependencies=function(t,e){for(var n in this._tiles)this._tiles[n].hasDependency(t,e)&&this._reloadTile(n,"reloading");this._cache.filter((function(n){return!n.hasDependency(t,e)}))},n}(t.Evented);function Pt(t,e){var n=Math.abs(2*t.wrap)-+(t.wrap<0),r=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||r-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function It(t){return"raster"===t||"image"===t||"video"===t}function Lt(){return new t.window.Worker(Yi.workerUrl)}Mt.maxOverzooming=10,Mt.maxUnderzooming=3;var Rt="mapboxgl_preloaded_worker_pool",Dt=function(){this.active={}};Dt.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<Dt.workerCount;)this.workers.push(new Lt);return this.active[t]=!0,this.workers.slice()},Dt.prototype.release=function(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((function(t){t.terminate()})),this.workers=null)},Dt.prototype.isPreloaded=function(){return!!this.active[Rt]},Dt.prototype.numActive=function(){return Object.keys(this.active).length};var Nt,jt=Math.floor(t.browser.hardwareConcurrency/2);function Ft(){return Nt||(Nt=new Dt),Nt}function zt(e,n){var r={};for(var i in e)"ref"!==i&&(r[i]=e[i]);return t.refProperties.forEach((function(t){t in n&&(r[t]=n[t])})),r}function Bt(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=zt(t[r],e[t[r].ref]));return t}Dt.workerCount=Math.max(Math.min(jt,6),1);var Ut={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Vt(t,e,n){n.push({command:Ut.addSource,args:[t,e[t]]})}function qt(t,e,n){e.push({command:Ut.removeSource,args:[t]}),n[t]=!0}function Gt(t,e,n,r){qt(t,n,r),Vt(t,e,n)}function Ht(e,n,r){var i;for(i in e[r])if(e[r].hasOwnProperty(i)&&"data"!==i&&!t.deepEqual(e[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!t.deepEqual(e[r][i],n[r][i]))return!1;return!0}function Wt(e,n,r,i,o,a){var s;for(s in n=n||{},e=e||{})e.hasOwnProperty(s)&&(t.deepEqual(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.deepEqual(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}))}function Xt(t){return t.id}function Zt(t,e){return t[e.id]=e,t}var Yt=function(t,e){this.reset(t,e)};Yt.prototype.reset=function(t,e){this.points=t||[],this._distances=[0];for(var n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Yt.prototype.lerp=function(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);for(var n=1,r=this._distances[n],i=e*this.paddedLength+this.padding;r<i&&n<this._distances.length;)r=this._distances[++n];var o=n-1,a=this._distances[o],s=r-a,u=s>0?(i-a)/s:0;return this.points[o].mult(1-u).add(this.points[n].mult(u))};var Kt=function(t,e,n){var r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};function Jt(e,n,r,i,o){var a=t.create();return n?(t.scale(a,a,[1/o,1/o,1]),r||t.rotateZ(a,a,i.angle)):t.multiply(a,i.labelPlaneMatrix,e),a}function Qt(e,n,r,i,o){if(n){var a=t.clone(e);return t.scale(a,a,[o,o,1]),r||t.rotateZ(a,a,-i.angle),a}return i.glCoordMatrix}function $t(e,n){var r=[e.x,e.y,0,1];le(r,r,n);var i=r[3];return{point:new t.Point(r[0]/i,r[1]/i),signedDistanceFromCamera:i}}function te(t,e){return.5+t/e*.5}function ee(t,e){var n=t[0]/t[3],r=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&r>=-e[1]&&r<=e[1]}function ne(e,n,r,i,o,a,s,u){var c=i?e.textSizeData:e.iconSizeData,l=t.evaluateSizeForZoom(c,r.transform.zoom),f=[256/r.width*2+1,256/r.height*2+1],p=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;p.clear();for(var h=e.lineVertexArray,d=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,v=r.transform.width/r.transform.height,m=!1,g=0;g<d.length;g++){var y=d.get(g);if(y.hidden||y.writingMode===t.WritingMode.vertical&&!m)ce(y.numGlyphs,p);else{m=!1;var b=[y.anchorX,y.anchorY,0,1];if(t.transformMat4(b,b,n),ee(b,f)){var _=te(r.transform.cameraToCenterDistance,b[3]),x=t.evaluateSizeForFeature(c,l,y),w=s?x/_:x*_,E=new t.Point(y.anchorX,y.anchorY),S=$t(E,o).point,C={},T=oe(y,w,!1,u,n,o,a,e.glyphOffsetArray,h,p,S,E,C,v);m=T.useVertical,(T.notEnoughRoom||m||T.needsFlipping&&oe(y,w,!0,u,n,o,a,e.glyphOffsetArray,h,p,S,E,C,v).notEnoughRoom)&&ce(y.numGlyphs,p)}else ce(y.numGlyphs,p)}}i?e.text.dynamicLayoutVertexBuffer.updateData(p):e.icon.dynamicLayoutVertexBuffer.updateData(p)}function re(t,e,n,r,i,o,a,s,u,c,l){var f=s.glyphStartIndex+s.numGlyphs,p=s.lineStartIndex,h=s.lineStartIndex+s.lineLength,d=e.getoffsetX(s.glyphStartIndex),v=e.getoffsetX(f-1),m=se(t*d,n,r,i,o,a,s.segment,p,h,u,c,l);if(!m)return null;var g=se(t*v,n,r,i,o,a,s.segment,p,h,u,c,l);return g?{first:m,last:g}:null}function ie(e,n,r,i){return e===t.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:(e===t.WritingMode.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function oe(e,n,r,i,o,a,s,u,c,l,f,p,h,d){var v,m=n/24,g=e.lineOffsetX*m,y=e.lineOffsetY*m;if(e.numGlyphs>1){var b=e.glyphStartIndex+e.numGlyphs,_=e.lineStartIndex,x=e.lineStartIndex+e.lineLength,w=re(m,u,g,y,r,f,p,e,c,a,h);if(!w)return{notEnoughRoom:!0};var E=$t(w.first.point,s).point,S=$t(w.last.point,s).point;if(i&&!r){var C=ie(e.writingMode,E,S,d);if(C)return C}v=[w.first];for(var T=e.glyphStartIndex+1;T<b-1;T++)v.push(se(m*u.getoffsetX(T),g,y,r,f,p,e.segment,_,x,c,a,h));v.push(w.last)}else{if(i&&!r){var O=$t(p,o).point,A=e.lineStartIndex+e.segment+1,k=new t.Point(c.getx(A),c.gety(A)),M=$t(k,o),P=M.signedDistanceFromCamera>0?M.point:ae(p,k,O,1,o),I=ie(e.writingMode,O,P,d);if(I)return I}var L=se(m*u.getoffsetX(e.glyphStartIndex),g,y,r,f,p,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,c,a,h);if(!L)return{notEnoughRoom:!0};v=[L]}for(var R=0,D=v;R<D.length;R+=1){var N=D[R];t.addDynamicAttributes(l,N.point,N.angle)}return{}}function ae(t,e,n,r,i){var o=$t(t.add(t.sub(e)._unit()),i).point,a=n.sub(o);return n.add(a._mult(r/a.mag()))}function se(e,n,r,i,o,a,s,u,c,l,f,p){var h=i?e-n:e+n,d=h>0?1:-1,v=0;i&&(d*=-1,v=Math.PI),d<0&&(v+=Math.PI);for(var m=d>0?u+s:u+s+1,g=o,y=o,b=0,_=0,x=Math.abs(h),w=[];b+_<=x;){if((m+=d)<u||m>=c)return null;if(y=g,w.push(g),void 0===(g=p[m])){var E=new t.Point(l.getx(m),l.gety(m)),S=$t(E,f);if(S.signedDistanceFromCamera>0)g=p[m]=S.point;else{var C=m-d;g=ae(0===b?a:new t.Point(l.getx(C),l.gety(C)),E,y,x-b+1,f)}}b+=_,_=y.dist(g)}var T=(x-b)/_,O=g.sub(y),A=O.mult(T)._add(y);A._add(O._unit()._perp()._mult(r*d));var k=v+Math.atan2(g.y-y.y,g.x-y.x);return w.push(A),{point:A,angle:k,path:w}}Kt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Kt.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Kt.prototype.insertCircle=function(t,e,n,r){this._forEachCell(e-r,n-r,e+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(r)},Kt.prototype._insertBoxCell=function(t,e,n,r,i,o){this.boxCells[i].push(o)},Kt.prototype._insertCircleCell=function(t,e,n,r,i,o){this.circleCells[i].push(o)},Kt.prototype._query=function(t,e,n,r,i,o){if(n<0||t>this.width||r<0||e>this.height)return!i&&[];var a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var u=0;u<this.circleKeys.length;u++){var c=this.circles[3*u],l=this.circles[3*u+1],f=this.circles[3*u+2];a.push({key:this.circleKeys[u],x1:c-f,y1:l-f,x2:c+f,y2:l+f})}return o?a.filter(o):a}return this._forEachCell(t,e,n,r,this._queryCell,a,{hitTest:i,seenUids:{box:{},circle:{}}},o),i?a.length>0:a},Kt.prototype._queryCircle=function(t,e,n,r,i){var o=t-n,a=t+n,s=e-n,u=e+n;if(a<0||o>this.width||u<0||s>this.height)return!r&&[];var c=[];return this._forEachCell(o,s,a,u,this._queryCellCircle,c,{hitTest:r,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}},i),r?c.length>0:c},Kt.prototype.query=function(t,e,n,r,i){return this._query(t,e,n,r,!1,i)},Kt.prototype.hitTest=function(t,e,n,r,i){return this._query(t,e,n,r,!0,i)},Kt.prototype.hitTestCircle=function(t,e,n,r){return this._queryCircle(t,e,n,!0,r)},Kt.prototype._queryCell=function(t,e,n,r,i,o,a,s){var u=a.seenUids,c=this.boxCells[i];if(null!==c)for(var l=this.bboxes,f=0,p=c;f<p.length;f+=1){var h=p[f];if(!u.box[h]){u.box[h]=!0;var d=4*h;if(t<=l[d+2]&&e<=l[d+3]&&n>=l[d+0]&&r>=l[d+1]&&(!s||s(this.boxKeys[h]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[h],x1:l[d],y1:l[d+1],x2:l[d+2],y2:l[d+3]})}}}var v=this.circleCells[i];if(null!==v)for(var m=this.circles,g=0,y=v;g<y.length;g+=1){var b=y[g];if(!u.circle[b]){u.circle[b]=!0;var _=3*b;if(this._circleAndRectCollide(m[_],m[_+1],m[_+2],t,e,n,r)&&(!s||s(this.circleKeys[b]))){if(a.hitTest)return o.push(!0),!0;var x=m[_],w=m[_+1],E=m[_+2];o.push({key:this.circleKeys[b],x1:x-E,y1:w-E,x2:x+E,y2:w+E})}}}},Kt.prototype._queryCellCircle=function(t,e,n,r,i,o,a,s){var u=a.circle,c=a.seenUids,l=this.boxCells[i];if(null!==l)for(var f=this.bboxes,p=0,h=l;p<h.length;p+=1){var d=h[p];if(!c.box[d]){c.box[d]=!0;var v=4*d;if(this._circleAndRectCollide(u.x,u.y,u.radius,f[v+0],f[v+1],f[v+2],f[v+3])&&(!s||s(this.boxKeys[d])))return o.push(!0),!0}}var m=this.circleCells[i];if(null!==m)for(var g=this.circles,y=0,b=m;y<b.length;y+=1){var _=b[y];if(!c.circle[_]){c.circle[_]=!0;var x=3*_;if(this._circlesCollide(g[x],g[x+1],g[x+2],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[_])))return o.push(!0),!0}}},Kt.prototype._forEachCell=function(t,e,n,r,i,o,a,s){for(var u=this._convertToXCellCoord(t),c=this._convertToYCellCoord(e),l=this._convertToXCellCoord(n),f=this._convertToYCellCoord(r),p=u;p<=l;p++)for(var h=c;h<=f;h++)if(i.call(this,t,e,n,r,this.xCellCount*h+p,o,a,s))return},Kt.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Kt.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Kt.prototype._circlesCollide=function(t,e,n,r,i,o){var a=r-t,s=i-e,u=n+o;return u*u>a*a+s*s},Kt.prototype._circleAndRectCollide=function(t,e,n,r,i,o,a){var s=(o-r)/2,u=Math.abs(t-(r+s));if(u>s+n)return!1;var c=(a-i)/2,l=Math.abs(e-(i+c));if(l>c+n)return!1;if(u<=s||l<=c)return!0;var f=u-s,p=l-c;return f*f+p*p<=n*n};var ue=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ce(t,e){for(var n=0;n<t;n++){var r=e.length;e.resize(r+4),e.float32.set(ue,3*r)}}function le(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t[3]=n[3]*r+n[7]*i+n[15],t}var fe=function(t,e,n){void 0===e&&(e=new Kt(t.width+200,t.height+200,25)),void 0===n&&(n=new Kt(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};function pe(e,n,r){return n*(t.EXTENT/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}fe.prototype.placeCollisionBox=function(t,e,n,r,i){var o=this.projectAndGetPerspectiveRatio(r,t.anchorPointX,t.anchorPointY),a=n*o.perspectiveRatio,s=t.x1*a+o.point.x,u=t.y1*a+o.point.y,c=t.x2*a+o.point.x,l=t.y2*a+o.point.y;return!this.isInsideGrid(s,u,c,l)||!e&&this.grid.hitTest(s,u,c,l,i)?{box:[],offscreen:!1}:{box:[s,u,c,l],offscreen:this.isOffscreen(s,u,c,l)}},fe.prototype.placeCollisionCircles=function(e,n,r,i,o,a,s,u,c,l,f,p,h){var d=[],v=new t.Point(n.anchorX,n.anchorY),m=$t(v,a),g=te(this.transform.cameraToCenterDistance,m.signedDistanceFromCamera),y=(l?o/g:o*g)/t.ONE_EM,b=$t(v,s).point,_=re(y,i,n.lineOffsetX*y,n.lineOffsetY*y,!1,b,v,n,r,s,{}),x=!1,w=!1,E=!0;if(_){for(var S=.5*p*g+h,C=new t.Point(-100,-100),T=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),O=new Yt,A=_.first,k=_.last,M=[],P=A.path.length-1;P>=1;P--)M.push(A.path[P]);for(var I=1;I<k.path.length;I++)M.push(k.path[I]);var L=2.5*S;if(u){var R=M.map((function(t){return $t(t,u)}));M=R.some((function(t){return t.signedDistanceFromCamera<=0}))?[]:R.map((function(t){return t.point}))}var D=[];if(M.length>0){for(var N=M[0].clone(),j=M[0].clone(),F=1;F<M.length;F++)N.x=Math.min(N.x,M[F].x),N.y=Math.min(N.y,M[F].y),j.x=Math.max(j.x,M[F].x),j.y=Math.max(j.y,M[F].y);D=N.x>=C.x&&j.x<=T.x&&N.y>=C.y&&j.y<=T.y?[M]:j.x<C.x||N.x>T.x||j.y<C.y||N.y>T.y?[]:t.clipLine([M],C.x,C.y,T.x,T.y)}for(var z=0,B=D;z<B.length;z+=1){var U;O.reset(B[z],.25*S),U=O.length<=.5*S?1:Math.ceil(O.paddedLength/L)+1;for(var V=0;V<U;V++){var q=V/Math.max(U-1,1),G=O.lerp(q),H=G.x+100,W=G.y+100;d.push(H,W,S,0);var X=H-S,Z=W-S,Y=H+S,K=W+S;if(E=E&&this.isOffscreen(X,Z,Y,K),w=w||this.isInsideGrid(X,Z,Y,K),!e&&this.grid.hitTestCircle(H,W,S,f)&&(x=!0,!c))return{circles:[],offscreen:!1,collisionDetected:x}}}}return{circles:!c&&x||!w?[]:d,offscreen:E,collisionDetected:x}},fe.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var n=[],r=1/0,i=1/0,o=-1/0,a=-1/0,s=0,u=e;s<u.length;s+=1){var c=u[s],l=new t.Point(c.x+100,c.y+100);r=Math.min(r,l.x),i=Math.min(i,l.y),o=Math.max(o,l.x),a=Math.max(a,l.y),n.push(l)}for(var f={},p={},h=0,d=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a));h<d.length;h+=1){var v=d[h],m=v.key;if(void 0===f[m.bucketInstanceId]&&(f[m.bucketInstanceId]={}),!f[m.bucketInstanceId][m.featureIndex]){var g=[new t.Point(v.x1,v.y1),new t.Point(v.x2,v.y1),new t.Point(v.x2,v.y2),new t.Point(v.x1,v.y2)];t.polygonIntersectsPolygon(n,g)&&(f[m.bucketInstanceId][m.featureIndex]=!0,void 0===p[m.bucketInstanceId]&&(p[m.bucketInstanceId]=[]),p[m.bucketInstanceId].push(m.featureIndex))}}return p},fe.prototype.insertCollisionBox=function(t,e,n,r,i){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},t[0],t[1],t[2],t[3])},fe.prototype.insertCollisionCircles=function(t,e,n,r,i){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i},s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])},fe.prototype.projectAndGetPerspectiveRatio=function(e,n,r){var i=[n,r,0,1];return le(i,i,e),{point:new t.Point((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5}},fe.prototype.isOffscreen=function(t,e,n,r){return n<100||t>=this.screenRightBoundary||r<100||e>this.screenBottomBoundary},fe.prototype.isInsideGrid=function(t,e,n,r){return n>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary},fe.prototype.getViewportMatrix=function(){var e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e};var he=function(t,e,n,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&n?1:0,this.placed=n};he.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var de=function(t,e,n,r,i){this.text=new he(t?t.text:null,e,n,i),this.icon=new he(t?t.icon:null,e,r,i)};de.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var ve=function(t,e,n){this.text=t,this.icon=e,this.skipFade=n},me=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},ge=function(t,e,n,r,i){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i},ye=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};function be(e,n,r,i,o){var a=t.getAnchorAlignment(e),s=-(a.horizontalAlign-.5)*n,u=-(a.verticalAlign-.5)*r,c=t.evaluateVariableOffset(e,i);return new t.Point(s+c[0]*o,u+c[1]*o)}function _e(e,n,r,i,o,a){var s=e.x1,u=e.x2,c=e.y1,l=e.y2,f=e.anchorPointX,p=e.anchorPointY,h=new t.Point(n,r);return i&&h._rotate(o?a:-a),{x1:s+h.x,y1:c+h.y,x2:u+h.x,y2:l+h.y,anchorPointX:f,anchorPointY:p}}ye.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var xe=function(t,e,n,r){this.transform=t.clone(),this.collisionIndex=new fe(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new ye(n),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}};function we(t,e,n,r,i){t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0)}xe.prototype.getBucketParts=function(e,n,r,i){var o=r.getBucket(n),a=r.latestFeatureIndex;if(o&&a&&n.id===o.layerIds[0]){var s=r.collisionBoxArray,u=o.layers[0].layout,c=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),l=r.tileSize/t.EXTENT,f=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),p="map"===u.get("text-pitch-alignment"),h="map"===u.get("text-rotation-alignment"),d=pe(r,1,this.transform.zoom),v=Jt(f,p,h,this.transform,d),m=null;if(p){var g=Qt(f,p,h,this.transform,d);m=t.multiply([],this.transform.labelPlaneMatrix,g)}this.retainedQueryData[o.bucketInstanceId]=new ge(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID);var y={bucket:o,layout:u,posMatrix:f,textLabelPlaneMatrix:v,labelToScreenMatrix:m,scale:c,textPixelRatio:l,holdingForFade:r.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i)for(var b=0,_=o.sortKeyRanges;b<_.length;b+=1){var x=_[b];e.push({sortKey:x.sortKey,symbolInstanceStart:x.symbolInstanceStart,symbolInstanceEnd:x.symbolInstanceEnd,parameters:y})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:y})}},xe.prototype.attemptAnchorPlacement=function(t,e,n,r,i,o,a,s,u,c,l,f,p,h,d){var v,m=[f.textOffset0,f.textOffset1],g=be(t,n,r,m,i),y=this.collisionIndex.placeCollisionBox(_e(e,g.x,g.y,o,a,this.transform.angle),l,s,u,c.predicate);if(!d||0!==this.collisionIndex.placeCollisionBox(_e(d,g.x,g.y,o,a,this.transform.angle),l,s,u,c.predicate).box.length)return y.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[f.crossTileID]&&this.prevPlacement.placements[f.crossTileID]&&this.prevPlacement.placements[f.crossTileID].text&&(v=this.prevPlacement.variableOffsets[f.crossTileID].anchor),this.variableOffsets[f.crossTileID]={textOffset:m,width:n,height:r,anchor:t,textBoxScale:i,prevAnchor:v},this.markUsedJustification(p,t,f,h),p.allowVerticalPlacement&&(this.markUsedOrientation(p,h,f),this.placedOrientations[f.crossTileID]=h),{shift:g,placedGlyphBoxes:y}):void 0},xe.prototype.placeLayerBucketPart=function(e,n,r){var i=this,o=e.parameters,a=o.bucket,s=o.layout,u=o.posMatrix,c=o.textLabelPlaneMatrix,l=o.labelToScreenMatrix,f=o.textPixelRatio,p=o.holdingForFade,h=o.collisionBoxArray,d=o.partiallyEvaluatedTextSize,v=o.collisionGroup,m=s.get("text-optional"),g=s.get("icon-optional"),y=s.get("text-allow-overlap"),b=s.get("icon-allow-overlap"),_="map"===s.get("text-rotation-alignment"),x="map"===s.get("text-pitch-alignment"),w="none"!==s.get("icon-text-fit"),E="viewport-y"===s.get("symbol-z-order"),S=y&&(b||!a.hasIconData()||g),C=b&&(y||!a.hasTextData()||m);!a.collisionArrays&&h&&a.deserializeCollisionBoxes(h);var T=function(e,o){if(!n[e.crossTileID])if(p)i.placements[e.crossTileID]=new ve(!1,!1,!1);else{var h,E=!1,T=!1,O=!0,A=null,k={box:null,offscreen:null},M={box:null,offscreen:null},P=null,I=null,L=0,R=0,D=0;o.textFeatureIndex?L=o.textFeatureIndex:e.useRuntimeCollisionCircles&&(L=e.featureIndex),o.verticalTextFeatureIndex&&(R=o.verticalTextFeatureIndex);var N=o.textBox;if(N){var j=function(n){var r=t.WritingMode.horizontal;if(a.allowVerticalPlacement&&!n&&i.prevPlacement){var o=i.prevPlacement.placedOrientations[e.crossTileID];o&&(i.placedOrientations[e.crossTileID]=o,i.markUsedOrientation(a,r=o,e))}return r},F=function(n,r){if(a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&o.verticalTextBox)for(var i=0,s=a.writingModes;i<s.length&&(s[i]===t.WritingMode.vertical?(k=r(),M=k):k=n(),!(k&&k.box&&k.box.length));i+=1);else k=n()};if(s.get("text-variable-anchor")){var z=s.get("text-variable-anchor");if(i.prevPlacement&&i.prevPlacement.variableOffsets[e.crossTileID]){var B=i.prevPlacement.variableOffsets[e.crossTileID];z.indexOf(B.anchor)>0&&(z=z.filter((function(t){return t!==B.anchor}))).unshift(B.anchor)}var U=function(t,n,r){for(var o=t.x2-t.x1,s=t.y2-t.y1,c=e.textBoxScale,l=w&&!b?n:null,p={box:[],offscreen:!1},h=y?2*z.length:z.length,d=0;d<h;++d){var m=i.attemptAnchorPlacement(z[d%z.length],t,o,s,c,_,x,f,u,v,d>=z.length,e,a,r,l);if(m&&(p=m.placedGlyphBoxes)&&p.box&&p.box.length){E=!0,A=m.shift;break}}return p};F((function(){return U(N,o.iconBox,t.WritingMode.horizontal)}),(function(){var n=o.verticalTextBox;return a.allowVerticalPlacement&&!(k&&k.box&&k.box.length)&&e.numVerticalGlyphVertices>0&&n?U(n,o.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}})),k&&(E=k.box,O=k.offscreen);var V=j(k&&k.box);if(!E&&i.prevPlacement){var q=i.prevPlacement.variableOffsets[e.crossTileID];q&&(i.variableOffsets[e.crossTileID]=q,i.markUsedJustification(a,q.anchor,e,V))}}else{var G=function(t,n){var r=i.collisionIndex.placeCollisionBox(t,y,f,u,v.predicate);return r&&r.box&&r.box.length&&(i.markUsedOrientation(a,n,e),i.placedOrientations[e.crossTileID]=n),r};F((function(){return G(N,t.WritingMode.horizontal)}),(function(){var n=o.verticalTextBox;return a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&n?G(n,t.WritingMode.vertical):{box:null,offscreen:null}})),j(k&&k.box&&k.box.length)}}if(E=(h=k)&&h.box&&h.box.length>0,O=h&&h.offscreen,e.useRuntimeCollisionCircles){var H=a.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),W=t.evaluateSizeForFeature(a.textSizeData,d,H),X=s.get("text-padding");P=i.collisionIndex.placeCollisionCircles(y,H,a.lineVertexArray,a.glyphOffsetArray,W,u,c,l,r,x,v.predicate,e.collisionCircleDiameter,X),E=y||P.circles.length>0&&!P.collisionDetected,O=O&&P.offscreen}if(o.iconFeatureIndex&&(D=o.iconFeatureIndex),o.iconBox){var Z=function(t){var e=w&&A?_e(t,A.x,A.y,_,x,i.transform.angle):t;return i.collisionIndex.placeCollisionBox(e,b,f,u,v.predicate)};T=M&&M.box&&M.box.length&&o.verticalIconBox?(I=Z(o.verticalIconBox)).box.length>0:(I=Z(o.iconBox)).box.length>0,O=O&&I.offscreen}var Y=m||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,K=g||0===e.numIconVertices;if(Y||K?K?Y||(T=T&&E):E=T&&E:T=E=T&&E,E&&h&&h.box&&i.collisionIndex.insertCollisionBox(h.box,s.get("text-ignore-placement"),a.bucketInstanceId,M&&M.box&&R?R:L,v.ID),T&&I&&i.collisionIndex.insertCollisionBox(I.box,s.get("icon-ignore-placement"),a.bucketInstanceId,D,v.ID),P&&(E&&i.collisionIndex.insertCollisionCircles(P.circles,s.get("text-ignore-placement"),a.bucketInstanceId,L,v.ID),r)){var J=a.bucketInstanceId,Q=i.collisionCircleArrays[J];void 0===Q&&(Q=i.collisionCircleArrays[J]=new me);for(var $=0;$<P.circles.length;$+=4)Q.circles.push(P.circles[$+0]),Q.circles.push(P.circles[$+1]),Q.circles.push(P.circles[$+2]),Q.circles.push(P.collisionDetected?1:0)}i.placements[e.crossTileID]=new ve(E||S,T||C,O||a.justReloaded),n[e.crossTileID]=!0}};if(E)for(var O=a.getSortedSymbolIndexes(this.transform.angle),A=O.length-1;A>=0;--A){var k=O[A];T(a.symbolInstances.get(k),a.collisionArrays[k])}else for(var M=e.symbolInstanceStart;M<e.symbolInstanceEnd;M++)T(a.symbolInstances.get(M),a.collisionArrays[M]);if(r&&a.bucketInstanceId in this.collisionCircleArrays){var P=this.collisionCircleArrays[a.bucketInstanceId];t.invert(P.invProjMatrix,u),P.viewportMatrix=this.collisionIndex.getViewportMatrix()}a.justReloaded=!1},xe.prototype.markUsedJustification=function(e,n,r,i){var o;o=i===t.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(n)];for(var a=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];a<s.length;a+=1){var u=s[a];u>=0&&(e.text.placedSymbolArray.get(u).crossTileID=o>=0&&u!==o?0:r.crossTileID)}},xe.prototype.markUsedOrientation=function(e,n,r){for(var i=n===t.WritingMode.horizontal||n===t.WritingMode.horizontalOnly?n:0,o=n===t.WritingMode.vertical?n:0,a=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];a<s.length;a+=1)e.text.placedSymbolArray.get(s[a]).placedOrientation=i;r.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=o)},xe.prototype.commit=function(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,n=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var r=e?e.symbolFadeChange(t):1,i=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(var s in this.placements){var u=this.placements[s],c=i[s];c?(this.opacities[s]=new de(c,r,u.text,u.icon),n=n||u.text!==c.text.placed||u.icon!==c.icon.placed):(this.opacities[s]=new de(null,r,u.text,u.icon,u.skipFade),n=n||u.text||u.icon)}for(var l in i){var f=i[l];if(!this.opacities[l]){var p=new de(f,r,!1,!1);p.isHidden()||(this.opacities[l]=p,n=n||f.text.placed||f.icon.placed)}}for(var h in o)this.variableOffsets[h]||!this.opacities[h]||this.opacities[h].isHidden()||(this.variableOffsets[h]=o[h]);for(var d in a)this.placedOrientations[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.placedOrientations[d]=a[d]);n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},xe.prototype.updateLayerOpacities=function(t,e){for(var n={},r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,n,o.collisionBoxArray)}},xe.prototype.updateBucketOpacities=function(e,n,r){var i=this;e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();var o=e.layers[0].layout,a=new de(null,0,!1,!1,!0),s=o.get("text-allow-overlap"),u=o.get("icon-allow-overlap"),c=o.get("text-variable-anchor"),l="map"===o.get("text-rotation-alignment"),f="map"===o.get("text-pitch-alignment"),p="none"!==o.get("icon-text-fit"),h=new de(null,0,s&&(u||!e.hasIconData()||o.get("icon-optional")),u&&(s||!e.hasTextData()||o.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(r);for(var d=function(t,e,n){for(var r=0;r<e/4;r++)t.opacityVertexArray.emplaceBack(n)},v=function(r){var o=e.symbolInstances.get(r),s=o.numHorizontalGlyphVertices,u=o.numVerticalGlyphVertices,v=o.crossTileID,m=i.opacities[v];n[v]?m=a:m||(i.opacities[v]=m=h),n[v]=!0;var g=o.numIconVertices>0,y=i.placedOrientations[o.crossTileID],b=y===t.WritingMode.vertical,_=y===t.WritingMode.horizontal||y===t.WritingMode.horizontalOnly;if(s>0||u>0){var x=Me(m.text);d(e.text,s,b?Pe:x),d(e.text,u,_?Pe:x);var w=m.text.isHidden();[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach((function(t){t>=0&&(e.text.placedSymbolArray.get(t).hidden=w||b?1:0)})),o.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).hidden=w||_?1:0);var E=i.variableOffsets[o.crossTileID];E&&i.markUsedJustification(e,E.anchor,o,y);var S=i.placedOrientations[o.crossTileID];S&&(i.markUsedJustification(e,"left",o,S),i.markUsedOrientation(e,S,o))}if(g){var C=Me(m.icon),T=!(p&&o.verticalPlacedIconSymbolIndex&&b);o.placedIconSymbolIndex>=0&&(d(e.icon,o.numIconVertices,T?C:Pe),e.icon.placedSymbolArray.get(o.placedIconSymbolIndex).hidden=m.icon.isHidden()),o.verticalPlacedIconSymbolIndex>=0&&(d(e.icon,o.numVerticalIconVertices,T?Pe:C),e.icon.placedSymbolArray.get(o.verticalPlacedIconSymbolIndex).hidden=m.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){var O=e.collisionArrays[r];if(O){var A=new t.Point(0,0);if(O.textBox||O.verticalTextBox){var k=!0;if(c){var M=i.variableOffsets[v];M?(A=be(M.anchor,M.width,M.height,M.textOffset,M.textBoxScale),l&&A._rotate(f?i.transform.angle:-i.transform.angle)):k=!1}O.textBox&&we(e.textCollisionBox.collisionVertexArray,m.text.placed,!k||b,A.x,A.y),O.verticalTextBox&&we(e.textCollisionBox.collisionVertexArray,m.text.placed,!k||_,A.x,A.y)}var P=Boolean(!_&&O.verticalIconBox);O.iconBox&&we(e.iconCollisionBox.collisionVertexArray,m.icon.placed,P,p?A.x:0,p?A.y:0),O.verticalIconBox&&we(e.iconCollisionBox.collisionVertexArray,m.icon.placed,!P,p?A.x:0,p?A.y:0)}}},m=0;m<e.symbolInstances.length;m++)v(m);if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){var g=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=g.invProjMatrix,e.placementViewportMatrix=g.viewportMatrix,e.collisionCircleArray=g.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}},xe.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},xe.prototype.zoomAdjustment=function(t){return Math.max(0,(this.transform.zoom-t)/1.5)},xe.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},xe.prototype.stillRecent=function(t,e){var n=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*n>t},xe.prototype.setStale=function(){this.stale=!0};var Ee=Math.pow(2,25),Se=Math.pow(2,24),Ce=Math.pow(2,17),Te=Math.pow(2,16),Oe=Math.pow(2,9),Ae=Math.pow(2,8),ke=Math.pow(2,1);function Me(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*Ee+e*Se+n*Ce+e*Te+n*Oe+e*Ae+n*ke+e}var Pe=0,Ie=function(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Ie.prototype.continuePlacement=function(t,e,n,r,i){for(var o=this._bucketParts;this._currentTileIndex<t.length;)if(e.getBucketParts(o,r,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort((function(t,e){return t.sortKey-e.sortKey})));this._currentPartIndex<o.length;)if(e.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,i())return!0;return!1};var Le=function(t,e,n,r,i,o,a){this.placement=new xe(t,i,o,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1};Le.prototype.isDone=function(){return this._done},Le.prototype.continuePlacement=function(e,n,r){for(var i=this,o=t.browser.now(),a=function(){var e=t.browser.now()-o;return!i._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=n[e[this._currentPlacementIndex]],u=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=u)&&(!s.maxzoom||s.maxzoom>u)){if(this._inProgressLayer||(this._inProgressLayer=new Ie(s)),this._inProgressLayer.continuePlacement(r[s.source],this.placement,this._showCollisionBoxes,s,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Le.prototype.commit=function(t){return this.placement.commit(t),this.placement};var Re=512/t.EXTENT/2,De=function(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var r=0;r<e.length;r++){var i=e.get(r),o=i.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,t)})}};De.prototype.getScaledCoordinates=function(e,n){var r=Re/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*t.EXTENT+e.anchorX)*r),y:Math.floor((n.canonical.y*t.EXTENT+e.anchorY)*r)}},De.prototype.findMatches=function(t,e,n){for(var r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),i=0;i<t.length;i++){var o=t.get(i);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,e),u=0,c=a;u<c.length;u+=1){var l=c[u];if(Math.abs(l.coord.x-s.x)<=r&&Math.abs(l.coord.y-s.y)<=r&&!n[l.crossTileID]){n[l.crossTileID]=!0,o.crossTileID=l.crossTileID;break}}}}};var Ne=function(){this.maxCrossTileID=0};Ne.prototype.generate=function(){return++this.maxCrossTileID};var je=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};je.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var n in this.indexes){var r=this.indexes[n],i={};for(var o in r){var a=r[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),i[a.tileID.key]=a}this.indexes[n]=i}this.lng=t},je.prototype.addBucket=function(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var r=0;r<e.symbolInstances.length;r++)e.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var i=this.usedCrossTileIDs[t.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>t.overscaledZ)for(var s in a){var u=a[s];u.tileID.isChildOf(t)&&u.findMatches(e.symbolInstances,t,i)}else{var c=a[t.scaledTo(Number(o)).key];c&&c.findMatches(e.symbolInstances,t,i)}}for(var l=0;l<e.symbolInstances.length;l++){var f=e.symbolInstances.get(l);f.crossTileID||(f.crossTileID=n.generate(),i[f.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new De(t,e.symbolInstances,e.bucketInstanceId),!0},je.prototype.removeBucketCrossTileIDs=function(t,e){for(var n in e.indexedSymbolInstances)for(var r=0,i=e.indexedSymbolInstances[n];r<i.length;r+=1)delete this.usedCrossTileIDs[t][i[r].crossTileID]},je.prototype.removeStaleBuckets=function(t){var e=!1;for(var n in this.indexes){var r=this.indexes[n];for(var i in r)t[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],e=!0)}return e};var Fe=function(){this.layerIndexes={},this.crossTileIDs=new Ne,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Fe.prototype.addLayer=function(t,e,n){var r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new je);var i=!1,o={};r.handleWrapJump(n);for(var a=0,s=e;a<s.length;a+=1){var u=s[a],c=u.getBucket(t);c&&t.id===c.layerIds[0]&&(c.bucketInstanceId||(c.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(u.tileID,c,this.crossTileIDs)&&(i=!0),o[c.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(i=!0),i},Fe.prototype.pruneUnusedLayers=function(t){var e={};for(var n in t.forEach((function(t){e[t]=!0})),this.layerIndexes)e[n]||delete this.layerIndexes[n]};var ze=function(e,n){return t.emitValidationErrors(e,n&&n.filter((function(t){return"source.canvas"!==t.identifier})))},Be=t.pick(Ut,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ue=t.pick(Ut,["setCenter","setZoom","setBearing","setPitch"]),Ve=function(){var e={},n=t.styleSpec.$version;for(var r in t.styleSpec.$root){var i,o=t.styleSpec.$root[r];o.required&&null!=(i="version"===r?n:"array"===o.type?[]:{})&&(e[r]=i)}return e}(),qe=function(e){function n(r,i){var o=this;void 0===i&&(i={}),e.call(this),this.map=r,this.dispatcher=new S(Ft(),this),this.imageManager=new p,this.imageManager.setEventedParent(this),this.glyphManager=new b(r._requestManager,i.localIdeographFontFamily),this.lineAtlas=new E(256,512),this.crossTileSymbolIndex=new Fe,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var a=this;this._rtlTextPluginCallback=n.registerForPluginStateChange((function(e){a.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},(function(e,n){if(t.triggerPluginCompletionEvent(e),n&&n.every((function(t){return t})))for(var r in a.sourceCaches)a.sourceCaches[r].reload()}))})),this.on("data",(function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=o.sourceCaches[t.sourceId];if(e){var n=e.getSource();if(n&&n.vectorLayerIds)for(var r in o._layers){var i=o._layers[r];i.source===n.id&&o._validateLayer(i)}}}}))}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.loadURL=function(e,n){var r=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var i="boolean"==typeof n.validate?n.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,n.accessToken);var o=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(o,(function(e,n){r._request=null,e?r.fire(new t.ErrorEvent(e)):n&&r._load(n,i)}))},n.prototype.loadJSON=function(e,n){var r=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame((function(){r._request=null,r._load(e,!1!==n.validate)}))},n.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(Ve,!1)},n.prototype._load=function(e,n){if(!n||!ze(this,t.validateStyle(e))){for(var r in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(r,e.sources[r],{validate:!1});e.sprite?this._loadSprite(e.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var i=Bt(this.stylesheet.layers);this._order=i.map((function(t){return t.id})),this._layers={},this._serializedLayers={};for(var o=0,a=i;o<a.length;o+=1){var s=a[o];(s=t.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s,this._serializedLayers[s.id]=s.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},n.prototype._loadSprite=function(e){var n=this;this._spriteRequest=function(e,n,r){var i,o,a,s=t.browser.devicePixelRatio>1?"@2x":"",u=t.getJSON(n.transformRequest(n.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),(function(t,e){u=null,a||(a=t,i=e,l())})),c=t.getImage(n.transformRequest(n.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),(function(t,e){c=null,a||(a=t,o=e,l())}));function l(){if(a)r(a);else if(i&&o){var e=t.browser.getImageData(o),n={};for(var s in i){var u=i[s],c=u.width,l=u.height,f=u.x,p=u.y,h=u.sdf,d=u.pixelRatio,v=u.stretchX,m=u.stretchY,g=u.content,y=new t.RGBAImage({width:c,height:l});t.RGBAImage.copy(e,y,{x:f,y:p},{x:0,y:0},{width:c,height:l}),n[s]={data:y,pixelRatio:d,sdf:h,stretchX:v,stretchY:m,content:g}}r(null,n)}}return{cancel:function(){u&&(u.cancel(),u=null),c&&(c.cancel(),c=null)}}}(e,this.map._requestManager,(function(e,r){if(n._spriteRequest=null,e)n.fire(new t.ErrorEvent(e));else if(r)for(var i in r)n.imageManager.addImage(i,r[i]);n.imageManager.setLoaded(!0),n._availableImages=n.imageManager.listImages(),n.dispatcher.broadcast("setImages",n._availableImages),n.fire(new t.Event("data",{dataType:"style"}))}))},n.prototype._validateLayer=function(e){var n=this.sourceCaches[e.source];if(n){var r=e.sourceLayer;if(r){var i=n.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+r+'" does not exist on source "'+i.id+'" as specified by style layer "'+e.id+'"')))}}},n.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},n.prototype._serializeLayers=function(t){for(var e=[],n=0,r=t;n<r.length;n+=1){var i=this._layers[r[n]];"custom"!==i.type&&e.push(i.serialize())}return e},n.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},n.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},n.prototype.update=function(e){if(this._loaded){var n=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var o in(r.length||i.length)&&this._updateWorkerLayers(r,i),this._updatedSources){var a=this._updatedSources[o];"reload"===a?this._reloadSource(o):"clear"===a&&this._clearSource(o)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}var u={};for(var c in this.sourceCaches){var l=this.sourceCaches[c];u[c]=l.used,l.used=!1}for(var f=0,p=this._order;f<p.length;f+=1){var h=this._layers[p[f]];h.recalculate(e,this._availableImages),!h.isHidden(e.zoom)&&h.source&&(this.sourceCaches[h.source].used=!0)}for(var d in u){var v=this.sourceCaches[d];u[d]!==v.used&&v.fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:d}))}this.light.recalculate(e),this.z=e.zoom,n&&this.fire(new t.Event("data",{dataType:"style"}))}},n.prototype._updateTilesForChangedImages=function(){var t=Object.keys(this._changedImages);if(t.length){for(var e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}},n.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},n.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},n.prototype.setState=function(e){var n=this;if(this._checkLoaded(),ze(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=Bt(e.layers);var r=function(e,n){if(!e)return[{command:Ut.setStyle,args:[n]}];var r=[];try{if(!t.deepEqual(e.version,n.version))return[{command:Ut.setStyle,args:[n]}];t.deepEqual(e.center,n.center)||r.push({command:Ut.setCenter,args:[n.center]}),t.deepEqual(e.zoom,n.zoom)||r.push({command:Ut.setZoom,args:[n.zoom]}),t.deepEqual(e.bearing,n.bearing)||r.push({command:Ut.setBearing,args:[n.bearing]}),t.deepEqual(e.pitch,n.pitch)||r.push({command:Ut.setPitch,args:[n.pitch]}),t.deepEqual(e.sprite,n.sprite)||r.push({command:Ut.setSprite,args:[n.sprite]}),t.deepEqual(e.glyphs,n.glyphs)||r.push({command:Ut.setGlyphs,args:[n.glyphs]}),t.deepEqual(e.transition,n.transition)||r.push({command:Ut.setTransition,args:[n.transition]}),t.deepEqual(e.light,n.light)||r.push({command:Ut.setLight,args:[n.light]});var i={},o=[];!function(e,n,r,i){var o;for(o in n=n||{},e=e||{})e.hasOwnProperty(o)&&(n.hasOwnProperty(o)||qt(o,r,i));for(o in n)n.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t.deepEqual(e[o],n[o])||("geojson"===e[o].type&&"geojson"===n[o].type&&Ht(e,n,o)?r.push({command:Ut.setGeoJSONSourceData,args:[o,n[o].data]}):Gt(o,n,r,i)):Vt(o,n,r))}(e.sources,n.sources,o,i);var a=[];e.layers&&e.layers.forEach((function(t){i[t.source]?r.push({command:Ut.removeLayer,args:[t.id]}):a.push(t)})),r=r.concat(o),function(e,n,r){n=n||[];var i,o,a,s,u,c,l,f=(e=e||[]).map(Xt),p=n.map(Xt),h=e.reduce(Zt,{}),d=n.reduce(Zt,{}),v=f.slice(),m=Object.create(null);for(i=0,o=0;i<f.length;i++)d.hasOwnProperty(a=f[i])?o++:(r.push({command:Ut.removeLayer,args:[a]}),v.splice(v.indexOf(a,o),1));for(i=0,o=0;i<p.length;i++)v[v.length-1-i]!==(a=p[p.length-1-i])&&(h.hasOwnProperty(a)?(r.push({command:Ut.removeLayer,args:[a]}),v.splice(v.lastIndexOf(a,v.length-o),1)):o++,r.push({command:Ut.addLayer,args:[d[a],c=v[v.length-i]]}),v.splice(v.length-i,0,a),m[a]=!0);for(i=0;i<p.length;i++)if(s=h[a=p[i]],u=d[a],!m[a]&&!t.deepEqual(s,u))if(t.deepEqual(s.source,u.source)&&t.deepEqual(s["source-layer"],u["source-layer"])&&t.deepEqual(s.type,u.type)){for(l in Wt(s.layout,u.layout,r,a,null,Ut.setLayoutProperty),Wt(s.paint,u.paint,r,a,null,Ut.setPaintProperty),t.deepEqual(s.filter,u.filter)||r.push({command:Ut.setFilter,args:[a,u.filter]}),t.deepEqual(s.minzoom,u.minzoom)&&t.deepEqual(s.maxzoom,u.maxzoom)||r.push({command:Ut.setLayerZoomRange,args:[a,u.minzoom,u.maxzoom]}),s)s.hasOwnProperty(l)&&"layout"!==l&&"paint"!==l&&"filter"!==l&&"metadata"!==l&&"minzoom"!==l&&"maxzoom"!==l&&(0===l.indexOf("paint.")?Wt(s[l],u[l],r,a,l.slice(6),Ut.setPaintProperty):t.deepEqual(s[l],u[l])||r.push({command:Ut.setLayerProperty,args:[a,l,u[l]]}));for(l in u)u.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&"layout"!==l&&"paint"!==l&&"filter"!==l&&"metadata"!==l&&"minzoom"!==l&&"maxzoom"!==l&&(0===l.indexOf("paint.")?Wt(s[l],u[l],r,a,l.slice(6),Ut.setPaintProperty):t.deepEqual(s[l],u[l])||r.push({command:Ut.setLayerProperty,args:[a,l,u[l]]}))}else r.push({command:Ut.removeLayer,args:[a]}),c=v[v.lastIndexOf(a)+1],r.push({command:Ut.addLayer,args:[u,c]})}(a,n.layers,r)}catch(t){console.warn("Unable to compute style diff:",t),r=[{command:Ut.setStyle,args:[n]}]}return r}(this.serialize(),e).filter((function(t){return!(t.command in Ue)}));if(0===r.length)return!1;var i=r.filter((function(t){return!(t.command in Be)}));if(i.length>0)throw new Error("Unimplemented: "+i.map((function(t){return t.command})).join(", ")+".");return r.forEach((function(t){"setTransition"!==t.command&&n[t.command].apply(n,t.args)})),this.stylesheet=e,!0},n.prototype.addImage=function(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,n),this._afterImageUpdated(e)},n.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},n.prototype.getImage=function(t){return this.imageManager.getImage(t)},n.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this._afterImageUpdated(e)},n.prototype._afterImageUpdated=function(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))},n.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},n.prototype.addSource=function(e,n,r){var i=this;if(void 0===r&&(r={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(n).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,n,null,r))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var o=this.sourceCaches[e]=new Mt(e,n,this.dispatcher);o.style=this,o.setEventedParent(this,(function(){return{isSourceLoaded:i.loaded(),source:o.serialize(),sourceId:e}})),o.onAdd(this.map),this._changed=!0}},n.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+n+'" is using it.')));var r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},n.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},n.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},n.prototype.addLayer=function(e,n,r){void 0===r&&(r={}),this._checkLoaded();var i=e.id;if(this.getLayer(i))this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" already exists on this map')));else{var o;if("custom"===e.type){if(ze(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(i,e.source),e=t.clone$1(e),e=t.extend(e,{source:i})),this._validate(t.validateStyle.layer,"layers."+i,e,{arrayIndex:-1},r))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[o.id]=o.serialize()}var a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.')));else{if(this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o,this._removedLayers[i]&&o.source&&"custom"!==o.type){var s=this._removedLayers[i];delete this._removedLayers[i],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}},n.prototype.moveLayer=function(e,n){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==n){var r=this._order.indexOf(e);this._order.splice(r,1);var i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(i,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},n.prototype.removeLayer=function(e){this._checkLoaded();var n=this._layers[e];if(n){n.setEventedParent(null);var r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},n.prototype.getLayer=function(t){return this._layers[t]},n.prototype.hasLayer=function(t){return t in this._layers},n.prototype.setLayerZoomRange=function(e,n,r){this._checkLoaded();var i=this.getLayer(e);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},n.prototype.setFilter=function(e,n,r){void 0===r&&(r={}),this._checkLoaded();var i=this.getLayer(e);if(i){if(!t.deepEqual(i.filter,n))return null==n?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(t.validateStyle.filter,"layers."+i.id+".filter",n,null,r)||(i.filter=t.clone$1(n),this._updateLayer(i)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},n.prototype.getFilter=function(e){return t.clone$1(this.getLayer(e).filter)},n.prototype.setLayoutProperty=function(e,n,r,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getLayoutProperty(n),r)||(o.setLayoutProperty(n,r,i),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getLayoutProperty=function(e,n){var r=this.getLayer(e);if(r)return r.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},n.prototype.setPaintProperty=function(e,n,r,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getPaintProperty(n),r)||(o.setPaintProperty(n,r,i)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},n.prototype.setFeatureState=function(e,n){this._checkLoaded();var r=e.source,i=e.sourceLayer,o=this.sourceCaches[r];if(void 0!==o){var a=o.getSource().type;"geojson"===a&&i?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==a||i?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),o.setFeatureState(i,e.id,n)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},n.prototype.removeFeatureState=function(e,n){this._checkLoaded();var r=e.source,i=this.sourceCaches[r];if(void 0!==i){var o=i.getSource().type,a="vector"===o?e.sourceLayer:void 0;"vector"!==o||a?n&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):i.removeFeatureState(a,e.id,n):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},n.prototype.getFeatureState=function(e){this._checkLoaded();var n=e.source,r=e.sourceLayer,i=this.sourceCaches[n];if(void 0!==i){if("vector"!==i.getSource().type||r)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),i.getFeatureState(r,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},n.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},n.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,(function(t){return t.serialize()})),layers:this._serializeLayers(this._order)},(function(t){return void 0!==t}))},n.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},n.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,n=function(t){return"fill-extrusion"===e._layers[t].type},r={},i=[],o=this._order.length-1;o>=0;o--){var a=this._order[o];if(n(a)){r[a]=o;for(var s=0,u=t;s<u.length;s+=1){var c=u[s][a];if(c)for(var l=0,f=c;l<f.length;l+=1)i.push(f[l])}}}i.sort((function(t,e){return e.intersectionZ-t.intersectionZ}));for(var p=[],h=this._order.length-1;h>=0;h--){var d=this._order[h];if(n(d))for(var v=i.length-1;v>=0;v--){var m=i[v].feature;if(r[m.layer.id]<h)break;p.push(m),i.pop()}else for(var g=0,y=t;g<y.length;g+=1){var b=y[g][d];if(b)for(var _=0,x=b;_<x.length;_+=1)p.push(x[_].feature)}}return p},n.prototype.queryRenderedFeatures=function(e,n,r){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter,null,n);var i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,a=n.layers;o<a.length;o+=1){var s=a[o],u=this._layers[s];if(!u)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];i[u.source]=!0}}var c=[];for(var l in n.availableImages=this._availableImages,this.sourceCaches)n.layers&&!i[l]||c.push(j(this.sourceCaches[l],this._layers,this._serializedLayers,e,n,r));return this.placement&&c.push(function(t,e,n,r,i,o,a){for(var s={},u=o.queryRenderedSymbols(r),c=[],l=0,f=Object.keys(u).map(Number);l<f.length;l+=1)c.push(a[f[l]]);c.sort(F);for(var p=function(){var n=d[h],r=n.featureIndex.lookupSymbolFeatures(u[n.bucketInstanceId],e,n.bucketIndex,n.sourceLayerIndex,i.filter,i.layers,i.availableImages,t);for(var o in r){var a=s[o]=s[o]||[],c=r[o];c.sort((function(t,e){var r=n.featureSortOrder;if(r){var i=r.indexOf(t.featureIndex);return r.indexOf(e.featureIndex)-i}return e.featureIndex-t.featureIndex}));for(var l=0,f=c;l<f.length;l+=1)a.push(f[l])}},h=0,d=c;h<d.length;h+=1)p();var v=function(e){s[e].forEach((function(r){var i=r.feature,o=n[t[e].source].getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=o}))};for(var m in s)v(m);return s}(this._layers,this._serializedLayers,this.sourceCaches,e,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(c)},n.prototype.querySourceFeatures=function(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter,null,n);var r=this.sourceCaches[e];return r?function(t,e){for(var n=t.getRenderableIds().map((function(e){return t.getTileByID(e)})),r=[],i={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;i[s]||(i[s]=!0,a.querySourceFeatures(r,e))}return r}(r,n):[]},n.prototype.addSourceType=function(t,e,r){return n.getSourceType(t)?r(new Error('A source type called "'+t+'" already exists.')):(n.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},r):r(null,null))},n.prototype.getLight=function(){return this.light.getLight()},n.prototype.setLight=function(e,n){void 0===n&&(n={}),this._checkLoaded();var r=this.light.getLight(),i=!1;for(var o in e)if(!t.deepEqual(e[o],r[o])){i=!0;break}if(i){var a={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(a)}},n.prototype._validate=function(e,n,r,i,o){return void 0===o&&(o={}),(!o||!1!==o.validate)&&ze(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:r,styleSpec:t.styleSpec},i)))},n.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[e].setEventedParent(null);for(var n in this.sourceCaches)this.sourceCaches[n].clearTiles(),this.sourceCaches[n].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},n.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},n.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},n.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},n.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},n.prototype._updatePlacement=function(e,n,r,i,o){void 0===o&&(o=!1);for(var a=!1,s=!1,u={},c=0,l=this._order;c<l.length;c+=1){var f=this._layers[l[c]];if("symbol"===f.type){if(!u[f.source]){var p=this.sourceCaches[f.source];u[f.source]=p.getRenderableIds(!0).map((function(t){return p.getTileByID(t)})).sort((function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)}))}var h=this.crossTileSymbolIndex.addLayer(f,u[f.source],e.center.lng);a=a||h}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((o=o||this._layerOrderChanged||0===r)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),e.zoom))&&(this.pauseablePlacement=new Le(e,this._order,o,n,r,i,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,u),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(var d=0,v=this._order;d<v.length;d+=1){var m=this._layers[v[d]];"symbol"===m.type&&this.placement.updateLayerOpacities(m,u[m.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},n.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},n.prototype.getImages=function(t,e,n){this.imageManager.getImages(e.icons,n),this._updateTilesForChangedImages();var r=this.sourceCaches[e.source];r&&r.setDependencies(e.tileID.key,e.type,e.icons)},n.prototype.getGlyphs=function(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)},n.prototype.getResource=function(e,n,r){return t.makeRequest(n,r)},n}(t.Evented);qe.getSourceType=function(t){return D[t]},qe.setSourceType=function(t,e){D[t]=e},qe.registerForPluginStateChange=t.registerForPluginStateChange;var Ge=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),He=yn("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),We=yn("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Xe=yn("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Ze=yn("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Ye=yn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ke=yn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Je=yn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Qe=yn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),$e=yn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),tn=yn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),en=yn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),nn=yn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),rn=yn("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),on=yn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),an=yn("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),sn=yn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),un=yn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),cn=yn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ln=yn("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),fn=yn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),pn=yn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),hn=yn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),dn=yn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),vn=yn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),mn=yn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),gn=yn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function yn(t,e){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=e.match(/attribute ([\w]+) ([\w]+)/g),i=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=o?o.concat(i):i,s={};return{fragmentSource:t=t.replace(n,(function(t,e,n,r,i){return s[i]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+i+"\nvarying "+n+" "+r+" "+i+";\n#else\nuniform "+n+" "+r+" u_"+i+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+i+"\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n"})),vertexSource:e=e.replace(n,(function(t,e,n,r,i){var o="float"===r?"vec2":"vec4",a=i.match(/color/)?"color":o;return s[i]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float u_"+i+"_t;\nattribute "+n+" "+o+" a_"+i+";\nvarying "+n+" "+r+" "+i+";\n#else\nuniform "+n+" "+r+" u_"+i+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = a_"+i+";\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = unpack_mix_"+a+"(a_"+i+", u_"+i+"_t);\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float u_"+i+"_t;\nattribute "+n+" "+o+" a_"+i+";\n#else\nuniform "+n+" "+r+" u_"+i+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+n+" "+r+" "+i+" = a_"+i+";\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+n+" "+r+" "+i+" = unpack_mix_"+a+"(a_"+i+", u_"+i+"_t);\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n"})),staticAttributes:r,staticUniforms:a}}var bn=Object.freeze({__proto__:null,prelude:He,background:We,backgroundPattern:Xe,circle:Ze,clippingMask:Ye,heatmap:Ke,heatmapTexture:Je,collisionBox:Qe,collisionCircle:$e,debug:tn,fill:en,fillOutline:nn,fillOutlinePattern:rn,fillPattern:on,fillExtrusion:an,fillExtrusionPattern:sn,hillshadePrepare:un,hillshade:cn,line:ln,lineGradient:fn,linePattern:pn,lineSDF:hn,raster:dn,symbolIcon:vn,symbolSDF:mn,symbolTextAndIcon:gn}),_n=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function xn(t){for(var e=[],n=0;n<t.length;n++)if(null!==t[n]){var r=t[n].split(" ");e.push(r.pop())}return e}_n.prototype.bind=function(t,e,n,r,i,o,a,s){this.context=t;for(var u=this.boundPaintVertexBuffers.length!==r.length,c=0;!u&&c<r.length;c++)this.boundPaintVertexBuffers[c]!==r[c]&&(u=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===n&&!u&&this.boundIndexBuffer===i&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind()):this.freshBind(e,n,r,i,o,a,s)},_n.prototype.freshBind=function(t,e,n,r,i,o,a){var s,u=t.numAttributes,c=this.context,l=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=c.currentNumAttributes||0;for(var f=u;f<s;f++)l.disableVertexAttribArray(f)}e.enableAttributes(l,t);for(var p=0,h=n;p<h.length;p+=1)h[p].enableAttributes(l,t);o&&o.enableAttributes(l,t),a&&a.enableAttributes(l,t),e.bind(),e.setVertexAttribPointers(l,t,i);for(var d=0,v=n;d<v.length;d+=1){var m=v[d];m.bind(),m.setVertexAttribPointers(l,t,i)}o&&(o.bind(),o.setVertexAttribPointers(l,t,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(l,t,i)),c.currentNumAttributes=u},_n.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var wn=function(t,e,n,r,i,o){var a=t.gl;this.program=a.createProgram();for(var s=xn(n.staticAttributes),u=r?r.getBinderAttributes():[],c=s.concat(u),l=n.staticUniforms?xn(n.staticUniforms):[],f=r?r.getBinderUniforms():[],p=[],h=0,d=l.concat(f);h<d.length;h+=1){var v=d[h];p.indexOf(v)<0&&p.push(v)}var m=r?r.defines():[];o&&m.push("#define OVERDRAW_INSPECTOR;");var g=m.concat(He.fragmentSource,n.fragmentSource).join("\n"),y=m.concat(He.vertexSource,n.vertexSource).join("\n"),b=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(b,g),a.compileShader(b),a.attachShader(this.program,b);var _=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(_,y),a.compileShader(_),a.attachShader(this.program,_),this.attributes={};var x={};this.numAttributes=c.length;for(var w=0;w<this.numAttributes;w++)c[w]&&(a.bindAttribLocation(this.program,w,c[w]),this.attributes[c[w]]=w);a.linkProgram(this.program),a.deleteShader(_),a.deleteShader(b);for(var E=0;E<p.length;E++){var S=p[E];if(S&&!x[S]){var C=a.getUniformLocation(this.program,S);C&&(x[S]=C)}}this.fixedUniforms=i(t,x),this.binderUniforms=r?r.getUniforms(t,x):[]}}};function En(t,e,n){var r=1/pe(n,1,e.transform.tileZoom),i=Math.pow(2,n.tileID.overscaledZ),o=n.tileSize*Math.pow(2,e.transform.tileZoom)/i,a=o*(n.tileID.canonical.x+n.tileID.wrap*i),s=o*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[r,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}wn.prototype.draw=function(t,e,n,r,i,o,a,s,u,c,l,f,p,h,d,v){var m,g=t.gl;if(!this.failedToCreate){for(var y in t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(r),t.setColorMode(i),t.setCullFace(o),this.fixedUniforms)this.fixedUniforms[y].set(a[y]);h&&h.setUniforms(t,this.binderUniforms,f,{zoom:p});for(var b=(m={},m[g.LINES]=2,m[g.TRIANGLES]=3,m[g.LINE_STRIP]=1,m)[e],_=0,x=l.get();_<x.length;_+=1){var w=x[_],E=w.vaos||(w.vaos={});(E[s]||(E[s]=new _n)).bind(t,this,u,h?h.getPaintVertexBuffers():[],c,w.vertexOffset,d,v),g.drawElements(e,w.primitiveLength*b,g.UNSIGNED_SHORT,w.primitiveOffset*b*2)}}};var Sn=function(e,n,r,i){var o=n.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],u=t.create$1();"viewport"===o.properties.get("anchor")&&t.fromRotation(u,-n.transform.angle),t.transformMat3(s,s,u);var c=o.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+r,u_opacity:i}},Cn=function(e,n,r,i,o,a,s){return t.extend(Sn(e,n,r,i),En(a,n,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8})},Tn=function(t){return{u_matrix:t}},On=function(e,n,r,i){return t.extend(Tn(e),En(r,n,i))},An=function(t,e){return{u_matrix:t,u_world:e}},kn=function(e,n,r,i,o){return t.extend(On(e,n,r,i),{u_world:o})},Mn=function(e,n,r,i){var o,a,s=e.transform;if("map"===i.paint.get("circle-pitch-alignment")){var u=pe(r,1,s.zoom);o=!0,a=[u,u]}else o=!1,a=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===i.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(n.posMatrix,r,i.paint.get("circle-translate"),i.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:a}},Pn=function(t,e,n){var r=pe(n,1,e.zoom),i=Math.pow(2,e.zoom-n.tileID.overscaledZ),o=n.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[e.pixelsToGLUnits[0]/(r*i),e.pixelsToGLUnits[1]/(r*i)],u_overscale_factor:o}},In=function(t,e,n){return{u_matrix:t,u_inv_matrix:e,u_camera_to_center_distance:n.cameraToCenterDistance,u_viewport_size:[n.width,n.height]}},Ln=function(t,e,n){return void 0===n&&(n=1),{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:n}},Rn=function(t){return{u_matrix:t}},Dn=function(t,e,n,r){return{u_matrix:t,u_extrude_scale:pe(e,1,n),u_intensity:r}},Nn=function(e,n,r){var i=e.transform;return{u_matrix:Un(e,n,r),u_ratio:1/pe(n,1,i.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]]}},jn=function(e,n,r,i){return t.extend(Nn(e,n,r),{u_image:0,u_image_height:i})},Fn=function(e,n,r,i){var o=e.transform,a=Bn(n,o);return{u_matrix:Un(e,n,r),u_texsize:n.imageAtlasTexture.size,u_ratio:1/pe(n,1,o.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[a,i.fromScale,i.toScale],u_fade:i.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},zn=function(e,n,r,i,o){var a=e.lineAtlas,s=Bn(n,e.transform),u="round"===r.layout.get("line-cap"),c=a.getDash(i.from,u),l=a.getDash(i.to,u),f=c.width*o.fromScale,p=l.width*o.toScale;return t.extend(Nn(e,n,r),{u_patternscale_a:[s/f,-c.height/2],u_patternscale_b:[s/p,-l.height/2],u_sdfgamma:a.width/(256*Math.min(f,p)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:c.y,u_tex_y_b:l.y,u_mix:o.t})};function Bn(t,e){return 1/pe(t,1,e.tileZoom)}function Un(t,e,n){return t.translatePosMatrix(e.tileID.posMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}var Vn=function(t,e,n,r,i){return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(a=i.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:qn(i.paint.get("raster-hue-rotate"))};var o,a};function qn(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}var Gn,Hn=function(t,e,n,r,i,o,a,s,u,c){var l=i.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:l.cameraToCenterDistance,u_pitch:l.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:l.width/l.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+u,u_pitch_with_map:+r,u_texsize:c,u_texture:0}},Wn=function(e,n,r,i,o,a,s,u,c,l,f){var p=o.transform;return t.extend(Hn(e,n,r,i,o,a,s,u,c,l),{u_gamma_scale:i?Math.cos(p._pitch)*p.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+f})},Xn=function(e,n,r,i,o,a,s,u,c,l){return t.extend(Wn(e,n,r,i,o,a,s,u,!0,c,!0),{u_texsize_icon:l,u_texture_icon:1})},Zn=function(t,e,n){return{u_matrix:t,u_opacity:e,u_color:n}},Yn=function(e,n,r,i,o,a){return t.extend(function(t,e,n,r){var i=n.imageManager.getPattern(t.from.toString()),o=n.imageManager.getPattern(t.to.toString()),a=n.imageManager.getPixelSize(),s=a.width,u=a.height,c=Math.pow(2,r.tileID.overscaledZ),l=r.tileSize*Math.pow(2,n.transform.tileZoom)/c,f=l*(r.tileID.canonical.x+r.tileID.wrap*c),p=l*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,u],u_mix:e.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/pe(r,1,n.transform.tileZoom),u_pixel_coord_upper:[f>>16,p>>16],u_pixel_coord_lower:[65535&f,65535&p]}}(i,a,r,o),{u_matrix:e,u_opacity:n})},Kn={fillExtrusion:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fillExtrusionPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,n.u_height_factor),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fill:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},fillPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},fillOutline:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world)}},fillOutlinePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},circle:function(e,n){return{u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,n.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},collisionBox:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,n.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,n.u_overscale_factor)}},collisionCircle:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_inv_matrix:new t.UniformMatrix4f(e,n.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(e,n.u_viewport_size)}},debug:function(e,n){return{u_color:new t.UniformColor(e,n.u_color),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_overlay:new t.Uniform1i(e,n.u_overlay),u_overlay_scale:new t.Uniform1f(e,n.u_overlay_scale)}},clippingMask:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmap:function(e,n){return{u_extrude_scale:new t.Uniform1f(e,n.u_extrude_scale),u_intensity:new t.Uniform1f(e,n.u_intensity),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmapTexture:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_opacity:new t.Uniform1f(e,n.u_opacity)}},hillshade:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_latrange:new t.Uniform2f(e,n.u_latrange),u_light:new t.Uniform2f(e,n.u_light),u_shadow:new t.UniformColor(e,n.u_shadow),u_highlight:new t.UniformColor(e,n.u_highlight),u_accent:new t.UniformColor(e,n.u_accent)}},hillshadePrepare:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_dimension:new t.Uniform2f(e,n.u_dimension),u_zoom:new t.Uniform1f(e,n.u_zoom),u_unpack:new t.Uniform4f(e,n.u_unpack)}},line:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels)}},lineGradient:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_image:new t.Uniform1i(e,n.u_image),u_image_height:new t.Uniform1f(e,n.u_image_height)}},linePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_image:new t.Uniform1i(e,n.u_image),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},lineSDF:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,n.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,n.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,n.u_sdfgamma),u_image:new t.Uniform1i(e,n.u_image),u_tex_y_a:new t.Uniform1f(e,n.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,n.u_tex_y_b),u_mix:new t.Uniform1f(e,n.u_mix)}},raster:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_tl_parent:new t.Uniform2f(e,n.u_tl_parent),u_scale_parent:new t.Uniform1f(e,n.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,n.u_buffer_scale),u_fade_t:new t.Uniform1f(e,n.u_fade_t),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image0:new t.Uniform1i(e,n.u_image0),u_image1:new t.Uniform1i(e,n.u_image1),u_brightness_low:new t.Uniform1f(e,n.u_brightness_low),u_brightness_high:new t.Uniform1f(e,n.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,n.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,n.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,n.u_spin_weights)}},symbolIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture)}},symbolSDF:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}},symbolTextAndIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texsize_icon:new t.Uniform2f(e,n.u_texsize_icon),u_texture:new t.Uniform1i(e,n.u_texture),u_texture_icon:new t.Uniform1i(e,n.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}},background:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_color:new t.UniformColor(e,n.u_color)}},backgroundPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image:new t.Uniform1i(e,n.u_image),u_pattern_tl_a:new t.Uniform2f(e,n.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,n.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,n.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,n.u_pattern_br_b),u_texsize:new t.Uniform2f(e,n.u_texsize),u_mix:new t.Uniform1f(e,n.u_mix),u_pattern_size_a:new t.Uniform2f(e,n.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,n.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,n.u_scale_a),u_scale_b:new t.Uniform1f(e,n.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,n.u_tile_units_to_pixels)}}};function Jn(e,n,r,i,o,a,s){for(var u=e.context,c=u.gl,l=e.useProgram("collisionBox"),f=[],p=0,h=0,d=0;d<i.length;d++){var v=i[d],m=n.getTile(v),g=m.getBucket(r);if(g){var y=v.posMatrix;0===o[0]&&0===o[1]||(y=e.translatePosMatrix(v.posMatrix,m,o,a));var b=s?g.textCollisionBox:g.iconCollisionBox,_=g.collisionCircleArray;if(_.length>0){var x=t.create(),w=y;t.mul(x,g.placementInvProjMatrix,e.transform.glCoordMatrix),t.mul(x,x,g.placementViewportMatrix),f.push({circleArray:_,circleOffset:h,transform:w,invTransform:x}),h=p+=_.length/4}b&&l.draw(u,c.LINES,Ct.disabled,Tt.disabled,e.colorModeForRenderPass(),At.disabled,Pn(y,e.transform,m),r.id,b.layoutVertexBuffer,b.indexBuffer,b.segments,null,e.transform.zoom,null,null,b.collisionVertexBuffer)}}if(s&&f.length){var E=e.useProgram("collisionCircle"),S=new t.StructArrayLayout2f1f2i16;S.resize(4*p),S._trim();for(var C=0,T=0,O=f;T<O.length;T+=1)for(var A=O[T],k=0;k<A.circleArray.length/4;k++){var M=4*k,P=A.circleArray[M+0],I=A.circleArray[M+1],L=A.circleArray[M+2],R=A.circleArray[M+3];S.emplace(C++,P,I,L,R,0),S.emplace(C++,P,I,L,R,1),S.emplace(C++,P,I,L,R,2),S.emplace(C++,P,I,L,R,3)}(!Gn||Gn.length<2*p)&&(Gn=function(e){var n=2*e,r=new t.StructArrayLayout3ui6;r.resize(n),r._trim();for(var i=0;i<n;i++){var o=6*i;r.uint16[o+0]=4*i+0,r.uint16[o+1]=4*i+1,r.uint16[o+2]=4*i+2,r.uint16[o+3]=4*i+2,r.uint16[o+4]=4*i+3,r.uint16[o+5]=4*i+0}return r}(p));for(var D=u.createIndexBuffer(Gn,!0),N=u.createVertexBuffer(S,t.collisionCircleLayout.members,!0),j=0,F=f;j<F.length;j+=1){var z=F[j],B=In(z.transform,z.invTransform,e.transform);E.draw(u,c.TRIANGLES,Ct.disabled,Tt.disabled,e.colorModeForRenderPass(),At.disabled,B,r.id,N,D,t.SegmentVector.simpleSegment(0,2*z.circleOffset,z.circleArray.length,z.circleArray.length/2),null,e.transform.zoom,null,null,null)}N.destroy(),D.destroy()}}var Qn=t.identity(new Float32Array(16));function $n(e,n,r,i,o,a){var s=t.getAnchorAlignment(e),u=-(s.horizontalAlign-.5)*n,c=-(s.verticalAlign-.5)*r,l=t.evaluateVariableOffset(e,i);return new t.Point((u/o+l[0])*a,(c/o+l[1])*a)}function tr(e,n,r,i,o,a,s,u,c,l,f){var p=e.text.placedSymbolArray,h=e.text.dynamicLayoutVertexArray,d=e.icon.dynamicLayoutVertexArray,v={};h.clear();for(var m=0;m<p.length;m++){var g=p.get(m),y=g.hidden||!g.crossTileID||e.allowVerticalPlacement&&!g.placedOrientation?null:i[g.crossTileID];if(y){var b=new t.Point(g.anchorX,g.anchorY),_=$t(b,r?u:s),x=te(a.cameraToCenterDistance,_.signedDistanceFromCamera),w=o.evaluateSizeForFeature(e.textSizeData,l,g)*x/t.ONE_EM;r&&(w*=e.tilePixelRatio/c);for(var E=$n(y.anchor,y.width,y.height,y.textOffset,y.textBoxScale,w),S=r?$t(b.add(E),s).point:_.point.add(n?E.rotate(-a.angle):E),C=e.allowVerticalPlacement&&g.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,T=0;T<g.numGlyphs;T++)t.addDynamicAttributes(h,S,C);f&&g.associatedIconIndex>=0&&(v[g.associatedIconIndex]={shiftedAnchor:S,angle:C})}else ce(g.numGlyphs,h)}if(f){d.clear();for(var O=e.icon.placedSymbolArray,A=0;A<O.length;A++){var k=O.get(A);if(k.hidden)ce(k.numGlyphs,d);else{var M=v[A];if(M)for(var P=0;P<k.numGlyphs;P++)t.addDynamicAttributes(d,M.shiftedAnchor,M.angle);else ce(k.numGlyphs,d)}}e.icon.dynamicLayoutVertexBuffer.updateData(d)}e.text.dynamicLayoutVertexBuffer.updateData(h)}function er(t,e,n){return n.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function nr(e,n,r,i,o,a,s,u,c,l,f,p){for(var h=e.context,d=h.gl,v=e.transform,m="map"===u,g="map"===c,y=m&&"point"!==r.layout.get("symbol-placement"),b=m&&!g&&!y,_=void 0!==r.layout.get("symbol-sort-key").constantOr(1),x=!1,w=e.depthModeForSublayer(0,Ct.ReadOnly),E=r.layout.get("text-variable-anchor"),S=[],C=0,T=i;C<T.length;C+=1){var O=T[C],A=n.getTile(O),k=A.getBucket(r);if(k){var M=o?k.text:k.icon;if(M&&M.segments.get().length){var P=M.programConfigurations.get(r.id),I=o||k.sdfIcons,L=o?k.textSizeData:k.iconSizeData,R=g||0!==v.pitch,D=e.useProgram(er(I,o,k),P),N=t.evaluateSizeForZoom(L,v.zoom),j=void 0,F=[0,0],z=void 0,B=void 0,U=null,V=void 0;if(o)z=A.glyphAtlasTexture,B=d.LINEAR,j=A.glyphAtlasTexture.size,k.iconsInText&&(F=A.imageAtlasTexture.size,U=A.imageAtlasTexture,V=R||e.options.rotating||e.options.zooming||"composite"===L.kind||"camera"===L.kind?d.LINEAR:d.NEAREST);else{var q=1!==r.layout.get("icon-size").constantOr(0)||k.iconsNeedLinear;z=A.imageAtlasTexture,B=I||e.options.rotating||e.options.zooming||q||R?d.LINEAR:d.NEAREST,j=A.imageAtlasTexture.size}var G=pe(A,1,e.transform.zoom),H=Jt(O.posMatrix,g,m,e.transform,G),W=Qt(O.posMatrix,g,m,e.transform,G),X=E&&k.hasTextData(),Z="none"!==r.layout.get("icon-text-fit")&&X&&k.hasIconData();y&&ne(k,O.posMatrix,e,o,H,W,g,l);var Y=e.translatePosMatrix(O.posMatrix,A,a,s),K=y||o&&E||Z?Qn:H,J=e.translatePosMatrix(W,A,a,s,!0),Q=I&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),$={program:D,buffers:M,uniformValues:I?k.iconsInText?Xn(L.kind,N,b,g,e,Y,K,J,j,F):Wn(L.kind,N,b,g,e,Y,K,J,o,j,!0):Hn(L.kind,N,b,g,e,Y,K,J,o,j),atlasTexture:z,atlasTextureIcon:U,atlasInterpolation:B,atlasInterpolationIcon:V,isSDF:I,hasHalo:Q};if(_&&k.canOverlap){x=!0;for(var tt=0,et=M.segments.get();tt<et.length;tt+=1){var nt=et[tt];S.push({segments:new t.SegmentVector([nt]),sortKey:nt.sortKey,state:$})}}else S.push({segments:M.segments,sortKey:0,state:$})}}}x&&S.sort((function(t,e){return t.sortKey-e.sortKey}));for(var rt=0,it=S;rt<it.length;rt+=1){var ot=it[rt],at=ot.state;if(h.activeTexture.set(d.TEXTURE0),at.atlasTexture.bind(at.atlasInterpolation,d.CLAMP_TO_EDGE),at.atlasTextureIcon&&(h.activeTexture.set(d.TEXTURE1),at.atlasTextureIcon&&at.atlasTextureIcon.bind(at.atlasInterpolationIcon,d.CLAMP_TO_EDGE)),at.isSDF){var st=at.uniformValues;at.hasHalo&&(st.u_is_halo=1,rr(at.buffers,ot.segments,r,e,at.program,w,f,p,st)),st.u_is_halo=0}rr(at.buffers,ot.segments,r,e,at.program,w,f,p,at.uniformValues)}}function rr(t,e,n,r,i,o,a,s,u){var c=r.context;i.draw(c,c.gl.TRIANGLES,o,a,s,At.disabled,u,n.id,t.layoutVertexBuffer,t.indexBuffer,e,n.paint,r.transform.zoom,t.programConfigurations.get(n.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function ir(t,e,n,r,i,o,a){var s,u,c,l,f,p=t.context.gl,h=n.paint.get("fill-pattern"),d=h&&h.constantOr(1),v=n.getCrossfadeParameters();a?(u=d&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=p.LINES):(u=d?"fillPattern":"fill",s=p.TRIANGLES);for(var m=0,g=r;m<g.length;m+=1){var y=g[m],b=e.getTile(y);if(!d||b.patternsLoaded()){var _=b.getBucket(n);if(_){var x=_.programConfigurations.get(n.id),w=t.useProgram(u,x);d&&(t.context.activeTexture.set(p.TEXTURE0),b.imageAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),x.updatePaintBuffers(v));var E=h.constantOr(null);if(E&&b.imageAtlas){var S=b.imageAtlas,C=S.patternPositions[E.to.toString()],T=S.patternPositions[E.from.toString()];C&&T&&x.setConstantPatternPositions(C,T)}var O=t.translatePosMatrix(y.posMatrix,b,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(a){l=_.indexBuffer2,f=_.segments2;var A=[p.drawingBufferWidth,p.drawingBufferHeight];c="fillOutlinePattern"===u&&d?kn(O,t,v,b,A):An(O,A)}else l=_.indexBuffer,f=_.segments,c=d?On(O,t,v,b):Tn(O);w.draw(t.context,s,i,t.stencilModeForClipping(y),o,At.disabled,c,n.id,_.layoutVertexBuffer,l,f,n.paint,t.transform.zoom,x)}}}}function or(t,e,n,r,i,o,a){for(var s=t.context,u=s.gl,c=n.paint.get("fill-extrusion-pattern"),l=c.constantOr(1),f=n.getCrossfadeParameters(),p=n.paint.get("fill-extrusion-opacity"),h=0,d=r;h<d.length;h+=1){var v=d[h],m=e.getTile(v),g=m.getBucket(n);if(g){var y=g.programConfigurations.get(n.id),b=t.useProgram(l?"fillExtrusionPattern":"fillExtrusion",y);l&&(t.context.activeTexture.set(u.TEXTURE0),m.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),y.updatePaintBuffers(f));var _=c.constantOr(null);if(_&&m.imageAtlas){var x=m.imageAtlas,w=x.patternPositions[_.to.toString()],E=x.patternPositions[_.from.toString()];w&&E&&y.setConstantPatternPositions(w,E)}var S=t.translatePosMatrix(v.posMatrix,m,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),C=n.paint.get("fill-extrusion-vertical-gradient"),T=l?Cn(S,t,C,p,v,f,m):Sn(S,t,C,p);b.draw(s,s.gl.TRIANGLES,i,o,a,At.backCCW,T,n.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,n.paint,t.transform.zoom,y)}}}function ar(e,n,r,i,o,a){var s=e.context,u=s.gl,c=n.fbo;if(c){var l=e.useProgram("hillshade");s.activeTexture.set(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,c.colorAttachment.get());var f=function(e,n,r){var i=r.paint.get("hillshade-shadow-color"),o=r.paint.get("hillshade-highlight-color"),a=r.paint.get("hillshade-accent-color"),s=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);var u,c,l,f=!e.options.moving;return{u_matrix:e.transform.calculatePosMatrix(n.tileID.toUnwrapped(),f),u_image:0,u_latrange:(u=n.tileID,c=Math.pow(2,u.canonical.z),l=u.canonical.y,[new t.MercatorCoordinate(0,l/c).toLngLat().lat,new t.MercatorCoordinate(0,(l+1)/c).toLngLat().lat]),u_light:[r.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:o,u_accent:a}}(e,n,r);l.draw(s,u.TRIANGLES,i,o,a,At.disabled,f,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}function sr(e,n,r,i,o,a){var s=e.context,u=s.gl,c=n.dem;if(c&&c.data){var l=c.dim,f=c.stride,p=c.getPixels();if(s.activeTexture.set(u.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(f),n.demTexture){var h=n.demTexture;h.update(p,{premultiply:!1}),h.bind(u.NEAREST,u.CLAMP_TO_EDGE)}else n.demTexture=new t.Texture(s,p,u.RGBA,{premultiply:!1}),n.demTexture.bind(u.NEAREST,u.CLAMP_TO_EDGE);s.activeTexture.set(u.TEXTURE0);var d=n.fbo;if(!d){var v=new t.Texture(s,{width:l,height:l,data:null},u.RGBA);v.bind(u.LINEAR,u.CLAMP_TO_EDGE),(d=n.fbo=s.createFramebuffer(l,l,!0)).colorAttachment.set(v.texture)}s.bindFramebuffer.set(d.framebuffer),s.viewport.set([0,0,l,l]),e.useProgram("hillshadePrepare").draw(s,u.TRIANGLES,i,o,a,At.disabled,function(e,n){var r=n.stride,i=t.create();return t.ortho(i,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(i,i,[0,-t.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:e.overscaledZ,u_unpack:n.getUnpackVector()}}(n.tileID,c),r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function ur(e,n,r,i,o){var a=i.paint.get("raster-fade-duration");if(a>0){var s=t.browser.now(),u=(s-e.timeAdded)/a,c=n?(s-n.timeAdded)/a:-1,l=r.getSource(),f=o.coveringZoomLevel({tileSize:l.tileSize,roundZoom:l.roundZoom}),p=!n||Math.abs(n.tileID.overscaledZ-f)>Math.abs(e.tileID.overscaledZ-f),h=p&&e.refreshedUponExpiration?1:t.clamp(p?u:1-c,0,1);return e.refreshedUponExpiration&&u>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-h}:{opacity:h,mix:0}}return{opacity:1,mix:0}}var cr=new t.Color(1,0,0,1),lr=new t.Color(0,1,0,1),fr=new t.Color(0,0,1,1),pr=new t.Color(1,0,1,1),hr=new t.Color(0,1,1,1);function dr(t,e,n,r){mr(t,0,e+n/2,t.transform.width,n,r)}function vr(t,e,n,r){mr(t,e-n/2,0,n,t.transform.height,r)}function mr(e,n,r,i,o,a){var s=e.context,u=s.gl;u.enable(u.SCISSOR_TEST),u.scissor(n*t.browser.devicePixelRatio,r*t.browser.devicePixelRatio,i*t.browser.devicePixelRatio,o*t.browser.devicePixelRatio),s.clear({color:a}),u.disable(u.SCISSOR_TEST)}function gr(e,n,r){var i=e.context,o=i.gl,a=r.posMatrix,s=e.useProgram("debug"),u=Ct.disabled,c=Tt.disabled,l=e.colorModeForRenderPass();i.activeTexture.set(o.TEXTURE0),e.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),s.draw(i,o.LINE_STRIP,u,c,l,At.disabled,Ln(a,t.Color.red),"$debug",e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);var f=n.getTileByID(r.key).latestRawTileData,p=Math.floor((f&&f.byteLength||0)/1024),h=n.getTile(r).tileSize,d=512/Math.min(h,512)*(r.overscaledZ/e.transform.zoom)*.5,v=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(v+=" => "+r.overscaledZ),function(t,e){t.initDebugOverlayCanvas();var n=t.debugOverlayCanvas,r=t.context.gl,i=t.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(e,5,5),i.strokeText(e,5,5),t.debugOverlayTexture.update(n),t.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(e,v+" "+p+"kb"),s.draw(i,o.TRIANGLES,u,c,Ot.alphaBlended,At.disabled,Ln(a,t.Color.transparent,d),"$debug",e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)}var yr={symbol:function(e,n,r,i,o){if("translucent"===e.renderPass){var a=Tt.disabled,s=e.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(e,n,r,i,o,a,s){for(var u=n.transform,c="map"===o,l="map"===a,f=0,p=e;f<p.length;f+=1){var h=p[f],d=i.getTile(h),v=d.getBucket(r);if(v&&v.text&&v.text.segments.get().length){var m=t.evaluateSizeForZoom(v.textSizeData,u.zoom),g=pe(d,1,n.transform.zoom),y=Jt(h.posMatrix,l,c,n.transform,g),b="none"!==r.layout.get("icon-text-fit")&&v.hasIconData();if(m){var _=Math.pow(2,u.zoom-d.tileID.overscaledZ);tr(v,c,l,s,t.symbolSize,u,y,h.posMatrix,_,m,b)}}}}(i,e,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&nr(e,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),a,s),0!==r.paint.get("text-opacity").constantOr(1)&&nr(e,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(Jn(e,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),Jn(e,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))}},circle:function(e,n,r,i){if("translucent"===e.renderPass){var o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),u=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0!==o.constantOr(1)||0!==a.constantOr(1)&&0!==s.constantOr(1)){for(var c=e.context,l=c.gl,f=e.depthModeForSublayer(0,Ct.ReadOnly),p=Tt.disabled,h=e.colorModeForRenderPass(),d=[],v=0;v<i.length;v++){var m=i[v],g=n.getTile(m),y=g.getBucket(r);if(y){var b=y.programConfigurations.get(r.id),_={programConfiguration:b,program:e.useProgram("circle",b),layoutVertexBuffer:y.layoutVertexBuffer,indexBuffer:y.indexBuffer,uniformValues:Mn(e,m,g,r)};if(u)for(var x=0,w=y.segments.get();x<w.length;x+=1){var E=w[x];d.push({segments:new t.SegmentVector([E]),sortKey:E.sortKey,state:_})}else d.push({segments:y.segments,sortKey:0,state:_})}}u&&d.sort((function(t,e){return t.sortKey-e.sortKey}));for(var S=0,C=d;S<C.length;S+=1){var T=C[S],O=T.state;O.program.draw(c,l.TRIANGLES,f,p,h,At.disabled,O.uniformValues,r.id,O.layoutVertexBuffer,O.indexBuffer,T.segments,r.paint,e.transform.zoom,O.programConfiguration)}}}},heatmap:function(e,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,a=o.gl,s=Tt.disabled,u=new Ot([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n){var r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),t.bindFramebuffer.set(i.framebuffer);else{var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,n,r){var i=t.gl;i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e.width/4,e.height/4,0,i.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:i.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(t,e,o,i)}}(o,e,r),o.clear({color:t.Color.transparent});for(var c=0;c<i.length;c++){var l=i[c];if(!n.hasRenderableParent(l)){var f=n.getTile(l),p=f.getBucket(r);if(p){var h=p.programConfigurations.get(r.id);e.useProgram("heatmap",h).draw(o,a.TRIANGLES,Ct.disabled,s,u,At.disabled,Dn(l.posMatrix,f,e.transform.zoom,r.paint.get("heatmap-intensity")),r.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,r.paint,e.transform.zoom,h)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){var r=e.context,i=r.gl,o=n.heatmapFbo;if(o){r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);var a=n.colorRampTexture;a||(a=n.colorRampTexture=new t.Texture(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,i.TRIANGLES,Ct.disabled,Tt.disabled,e.colorModeForRenderPass(),At.disabled,function(e,n,r,i){var o=t.create();t.ortho(o,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:n.paint.get("heatmap-opacity")}}(e,n),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}}(e,r))},line:function(e,n,r,i){if("translucent"===e.renderPass){var o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0!==o.constantOr(1)&&0!==a.constantOr(1))for(var s=e.depthModeForSublayer(0,Ct.ReadOnly),u=e.colorModeForRenderPass(),c=r.paint.get("line-dasharray"),l=r.paint.get("line-pattern"),f=l.constantOr(1),p=r.paint.get("line-gradient"),h=r.getCrossfadeParameters(),d=f?"linePattern":c?"lineSDF":p?"lineGradient":"line",v=e.context,m=v.gl,g=!0,y=0,b=i;y<b.length;y+=1){var _=b[y],x=n.getTile(_);if(!f||x.patternsLoaded()){var w=x.getBucket(r);if(w){var E=w.programConfigurations.get(r.id),S=e.context.program.get(),C=e.useProgram(d,E),T=g||C.program!==S,O=l.constantOr(null);if(O&&x.imageAtlas){var A=x.imageAtlas,k=A.patternPositions[O.to.toString()],M=A.patternPositions[O.from.toString()];k&&M&&E.setConstantPatternPositions(k,M)}var P=f?Fn(e,x,r,h):c?zn(e,x,r,c,h):p?jn(e,x,r,w.lineClipsArray.length):Nn(e,x,r);if(f)v.activeTexture.set(m.TEXTURE0),x.imageAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),E.updatePaintBuffers(h);else if(c&&(T||e.lineAtlas.dirty))v.activeTexture.set(m.TEXTURE0),e.lineAtlas.bind(v);else if(p){var I=w.gradients[r.id],L=I.texture;if(r.gradientVersion!==I.version){var R=256;if(r.stepInterpolant){var D=n.getSource().maxzoom,N=_.canonical.z===D?Math.ceil(1<<e.transform.maxZoom-_.canonical.z):1;R=t.clamp(t.nextPowerOfTwo(w.maxLineLength/t.EXTENT*1024*N),256,v.maxTextureSize)}I.gradient=t.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:R,image:I.gradient||void 0,clips:w.lineClipsArray}),I.texture?I.texture.update(I.gradient):I.texture=new t.Texture(v,I.gradient,m.RGBA),I.version=r.gradientVersion,L=I.texture}v.activeTexture.set(m.TEXTURE0),L.bind(r.stepInterpolant?m.NEAREST:m.LINEAR,m.CLAMP_TO_EDGE)}C.draw(v,m.TRIANGLES,s,e.stencilModeForClipping(_),u,At.disabled,P,r.id,w.layoutVertexBuffer,w.indexBuffer,w.segments,r.paint,e.transform.zoom,E,w.layoutVertexBuffer2),g=!1}}}}},fill:function(e,n,r,i){var o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=e.colorModeForRenderPass(),u=r.paint.get("fill-pattern"),c=e.opaquePassEnabledForLayer()&&!u.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===c){var l=e.depthModeForSublayer(1,"opaque"===e.renderPass?Ct.ReadWrite:Ct.ReadOnly);ir(e,n,r,i,l,s,!1)}if("translucent"===e.renderPass&&r.paint.get("fill-antialias")){var f=e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,Ct.ReadOnly);ir(e,n,r,i,f,s,!0)}}},"fill-extrusion":function(t,e,n,r){var i=n.paint.get("fill-extrusion-opacity");if(0!==i&&"translucent"===t.renderPass){var o=new Ct(t.context.gl.LEQUAL,Ct.ReadWrite,t.depthRangeFor3D);if(1!==i||n.paint.get("fill-extrusion-pattern").constantOr(1))or(t,e,n,r,o,Tt.disabled,Ot.disabled),or(t,e,n,r,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var a=t.colorModeForRenderPass();or(t,e,n,r,o,Tt.disabled,a)}}},hillshade:function(t,e,n,r){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var i=t.context,o=t.depthModeForSublayer(0,Ct.ReadOnly),a=t.colorModeForRenderPass(),s="translucent"===t.renderPass?t.stencilConfigForOverlap(r):[{},r],u=s[0],c=0,l=s[1];c<l.length;c+=1){var f=l[c],p=e.getTile(f);p.needsHillshadePrepare&&"offscreen"===t.renderPass?sr(t,p,n,o,Tt.disabled,a):"translucent"===t.renderPass&&ar(t,p,n,o,u[f.overscaledZ],a)}i.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,n,r){if("translucent"===t.renderPass&&0!==n.paint.get("raster-opacity")&&r.length)for(var i=t.context,o=i.gl,a=e.getSource(),s=t.useProgram("raster"),u=t.colorModeForRenderPass(),c=a instanceof I?[{},r]:t.stencilConfigForOverlap(r),l=c[0],f=c[1],p=f[f.length-1].overscaledZ,h=!t.options.moving,d=0,v=f;d<v.length;d+=1){var m=v[d],g=t.depthModeForSublayer(m.overscaledZ-p,1===n.paint.get("raster-opacity")?Ct.ReadWrite:Ct.ReadOnly,o.LESS),y=e.getTile(m),b=t.transform.calculatePosMatrix(m.toUnwrapped(),h);y.registerFadeDuration(n.paint.get("raster-fade-duration"));var _=e.findLoadedParent(m,0),x=ur(y,_,e,n,t.transform),w=void 0,E=void 0,S="nearest"===n.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;i.activeTexture.set(o.TEXTURE0),y.texture.bind(S,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),i.activeTexture.set(o.TEXTURE1),_?(_.texture.bind(S,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),w=Math.pow(2,_.tileID.overscaledZ-y.tileID.overscaledZ),E=[y.tileID.canonical.x*w%1,y.tileID.canonical.y*w%1]):y.texture.bind(S,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var C=Vn(b,E||[0,0],w||1,x,n);a instanceof I?s.draw(i,o.TRIANGLES,g,Tt.disabled,u,At.disabled,C,n.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):s.draw(i,o.TRIANGLES,g,l[m.overscaledZ],u,At.disabled,C,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,n){var r=n.paint.get("background-color"),i=n.paint.get("background-opacity");if(0!==i){var o=t.context,a=o.gl,s=t.transform,u=s.tileSize,c=n.paint.get("background-pattern");if(!t.isPatternMissing(c)){var l=!c&&1===r.a&&1===i&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===l){var f=Tt.disabled,p=t.depthModeForSublayer(0,"opaque"===l?Ct.ReadWrite:Ct.ReadOnly),h=t.colorModeForRenderPass(),d=t.useProgram(c?"backgroundPattern":"background"),v=s.coveringTiles({tileSize:u});c&&(o.activeTexture.set(a.TEXTURE0),t.imageManager.bind(t.context));for(var m=n.getCrossfadeParameters(),g=0,y=v;g<y.length;g+=1){var b=y[g],_=t.transform.calculatePosMatrix(b.toUnwrapped()),x=c?Yn(_,i,t,c,{tileID:b,tileSize:u},m):Zn(_,i,r);d.draw(o,a.TRIANGLES,p,f,h,At.disabled,x,n.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,n){for(var r=0;r<n.length;r++)gr(t,e,n[r])},custom:function(t,e,n){var r=t.context,i=n.implementation;if("offscreen"===t.renderPass){var o=i.prerender;o&&(t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),o.call(i,r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),r.setStencilMode(Tt.disabled);var a="3d"===i.renderingMode?new Ct(t.context.gl.LEQUAL,Ct.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,Ct.ReadOnly);r.setDepthMode(a),i.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState(),r.bindFramebuffer.set(null)}}},br=function(t,e){this.context=new kt(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=Mt.maxUnderzooming+Mt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Fe,this.gpuTimers={}};br.prototype.resize=function(e,n){if(this.width=e*t.browser.devicePixelRatio,this.height=n*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var r=0,i=this.style._order;r<i.length;r+=1)this.style._layers[i[r]].resize()},br.prototype.setup=function(){var e=this.context,n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,Ge.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var r=new t.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(r,Ge.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var i=new t.StructArrayLayout4i8;i.emplaceBack(0,0,0,0),i.emplaceBack(t.EXTENT,0,t.EXTENT,0),i.emplaceBack(0,t.EXTENT,0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(i,P.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,Ge.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s),this.emptyTexture=new t.Texture(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA);var u=this.context.gl;this.stencilClearMode=new Tt({func:u.ALWAYS,mask:0},0,255,u.ZERO,u.ZERO,u.ZERO)},br.prototype.clearStencil=function(){var e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var r=t.create();t.ortho(r,0,this.width,this.height,0,0,1),t.scale(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,n.TRIANGLES,Ct.disabled,this.stencilClearMode,Ot.disabled,At.disabled,Rn(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},br.prototype._renderTileClippingMasks=function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var n=this.context,r=n.gl;this.nextStencilID+e.length>256&&this.clearStencil(),n.setColorMode(Ot.disabled),n.setDepthMode(Ct.disabled);var i=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var o=0,a=e;o<a.length;o+=1){var s=a[o],u=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;i.draw(n,r.TRIANGLES,Ct.disabled,new Tt({func:r.ALWAYS,mask:0},u,255,r.KEEP,r.KEEP,r.REPLACE),Ot.disabled,At.disabled,Rn(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},br.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new Tt({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},br.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new Tt({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},br.prototype.stencilConfigForOverlap=function(t){var e,n=this.context.gl,r=t.sort((function(t,e){return e.overscaledZ-t.overscaledZ})),i=r[r.length-1].overscaledZ,o=r[0].overscaledZ-i+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();for(var a={},s=0;s<o;s++)a[s+i]=new Tt({func:n.GEQUAL,mask:255},s+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[a,r]}return[(e={},e[i]=Tt.disabled,e),r]},br.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new Ot([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Ot.unblended:Ot.alphaBlended},br.prototype.depthModeForSublayer=function(t,e,n){if(!this.opaquePassEnabledForLayer())return Ct.disabled;var r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Ct(n||this.context.gl.LEQUAL,e,[r,r])},br.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},br.prototype.render=function(e,n){var r=this;this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var i=this.style._order,o=this.style.sourceCaches;for(var a in o){var s=o[a];s.used&&s.prepare(this.context)}var u,c,l={},f={},p={};for(var h in o){var d=o[h];l[h]=d.getVisibleCoordinates(),f[h]=l[h].slice().reverse(),p[h]=d.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var v=0;v<i.length;v++)if(this.style._layers[i[v]].is3D()){this.opaquePassCutoff=v;break}this.renderPass="offscreen";for(var m=0,g=i;m<g.length;m+=1){var y=this.style._layers[g[m]];if(y.hasOffscreenPass()&&!y.isHidden(this.transform.zoom)){var b=f[y.source];("custom"===y.type||b.length)&&this.renderLayer(this,o[y.source],y,b)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){var _=this.style._layers[i[this.currentLayer]],x=o[_.source],w=l[_.source];this._renderTileClippingMasks(_,w),this.renderLayer(this,x,_,w)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){var E=this.style._layers[i[this.currentLayer]],S=o[E.source],C=("symbol"===E.type?p:f)[E.source];this._renderTileClippingMasks(E,l[E.source]),this.renderLayer(this,S,E,C)}this.options.showTileBoundaries&&(t.values(this.style._layers).forEach((function(t){t.source&&!t.isHidden(r.transform.zoom)&&(t.source!==(c&&c.id)&&(c=r.style.sourceCaches[t.source]),(!u||u.getSource().maxzoom<c.getSource().maxzoom)&&(u=c))})),u&&yr.debug(this,u,u.getVisibleCoordinates())),this.options.showPadding&&function(t){var e=t.transform.padding;dr(t,t.transform.height-(e.top||0),3,cr),dr(t,e.bottom||0,3,lr),vr(t,e.left||0,3,fr),vr(t,t.transform.width-(e.right||0),3,pr);var n=t.transform.centerPoint;!function(t,e,n,r){mr(t,e-1,n-10,2,20,r),mr(t,e-10,n-1,20,2,r)}(t,n.x,t.transform.height-n.y,hr)}(this),this.context.setDefault()},br.prototype.renderLayer=function(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||r.length)&&(this.id=n.id,this.gpuTimingStart(n),yr[n.type](t,e,n,r,this.style.placement.variableOffsets),this.gpuTimingEnd())},br.prototype.gpuTimingStart=function(t){if(this.options.gpuTiming){var e=this.context.extTimerQuery,n=this.gpuTimers[t.id];n||(n=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),n.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,n.query)}},br.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}},br.prototype.collectGpuTimers=function(){var t=this.gpuTimers;return this.gpuTimers={},t},br.prototype.queryGpuTimers=function(t){var e={};for(var n in t){var r=t[n],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),e[n]=o}return e},br.prototype.translatePosMatrix=function(e,n,r,i,o){if(!r[0]&&!r[1])return e;var a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){var s=Math.sin(a),u=Math.cos(a);r=[r[0]*u-r[1]*s,r[0]*s+r[1]*u]}var c=[o?r[0]:pe(n,r[0],this.transform.zoom),o?r[1]:pe(n,r[1],this.transform.zoom),0],l=new Float32Array(16);return t.translate(l,e,c),l},br.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},br.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},br.prototype.isPatternMissing=function(t){if(!t)return!1;if(!t.from||!t.to)return!0;var e=this.imageManager.getPattern(t.from.toString()),n=this.imageManager.getPattern(t.to.toString());return!e||!n},br.prototype.useProgram=function(t,e){this.cache=this.cache||{};var n=""+t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new wn(this.context,t,bn[t],e,Kn[t],this._showOverdrawInspector)),this.cache[n]},br.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},br.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)},br.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},br.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var _r=function(t,e){this.points=t,this.planes=e};_r.fromInvProjectionMatrix=function(e,n,r){var i=Math.pow(2,r),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(n){return t.transformMat4([],n,e)})).map((function(e){return t.scale$1([],e,1/e[3]/n*i)})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(e){var n=t.sub([],o[e[0]],o[e[1]]),r=t.sub([],o[e[2]],o[e[1]]),i=t.normalize([],t.cross([],n,r)),a=-t.dot(i,o[e[1]]);return i.concat(a)}));return new _r(o,a)};var xr=function(e,n){this.min=e,this.max=n,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};xr.prototype.quadrant=function(e){for(var n=[e%2==0,e<2],r=t.clone$2(this.min),i=t.clone$2(this.max),o=0;o<n.length;o++)r[o]=n[o]?this.min[o]:this.center[o],i[o]=n[o]?this.center[o]:this.max[o];return i[2]=this.max[2],new xr(r,i)},xr.prototype.distanceX=function(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]},xr.prototype.distanceY=function(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]},xr.prototype.intersects=function(e){for(var n=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],r=!0,i=0;i<e.planes.length;i++){for(var o=e.planes[i],a=0,s=0;s<n.length;s++)a+=t.dot$1(o,n[s])>=0;if(0===a)return 0;a!==n.length&&(r=!1)}if(r)return 2;for(var u=0;u<3;u++){for(var c=Number.MAX_VALUE,l=-Number.MAX_VALUE,f=0;f<e.points.length;f++){var p=e.points[f][u]-this.min[u];c=Math.min(c,p),l=Math.max(l,p)}if(l<0||c>this.max[u]-this.min[u])return 0}return 1};var wr=function(t,e,n,r){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),isNaN(t)||t<0||isNaN(e)||e<0||isNaN(n)||n<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=n,this.right=r};wr.prototype.interpolate=function(e,n,r){return null!=n.top&&null!=e.top&&(this.top=t.number(e.top,n.top,r)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,n.bottom,r)),null!=n.left&&null!=e.left&&(this.left=t.number(e.left,n.left,r)),null!=n.right&&null!=e.right&&(this.right=t.number(e.right,n.right,r)),this},wr.prototype.getCenter=function(e,n){var r=t.clamp((this.left+e-this.right)/2,0,e),i=t.clamp((this.top+n-this.bottom)/2,0,n);return new t.Point(r,i)},wr.prototype.equals=function(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right},wr.prototype.clone=function(){return new wr(this.top,this.bottom,this.left,this.right)},wr.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Er=function(e,n,r,i,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=null==r?0:r,this._maxPitch=null==i?60:i,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new wr,this._posMatrixCache={},this._alignedPosMatrixCache={}},Sr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Er.prototype.clone=function(){var t=new Er(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t},Sr.minZoom.get=function(){return this._minZoom},Sr.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},Sr.maxZoom.get=function(){return this._maxZoom},Sr.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},Sr.minPitch.get=function(){return this._minPitch},Sr.minPitch.set=function(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))},Sr.maxPitch.get=function(){return this._maxPitch},Sr.maxPitch.set=function(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))},Sr.renderWorldCopies.get=function(){return this._renderWorldCopies},Sr.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},Sr.worldSize.get=function(){return this.tileSize*this.scale},Sr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Sr.size.get=function(){return new t.Point(this.width,this.height)},Sr.bearing.get=function(){return-this.angle/Math.PI*180},Sr.bearing.set=function(e){var n=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Sr.pitch.get=function(){return this._pitch/Math.PI*180},Sr.pitch.set=function(e){var n=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())},Sr.fov.get=function(){return this._fov/Math.PI*180},Sr.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},Sr.zoom.get=function(){return this._zoom},Sr.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},Sr.center.get=function(){return this._center},Sr.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},Sr.padding.get=function(){return this._edgeInsets.toJSON()},Sr.padding.set=function(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())},Sr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Er.prototype.isPaddingEqual=function(t){return this._edgeInsets.equals(t)},Er.prototype.interpolatePadding=function(t,e,n){this._unmodified=!1,this._edgeInsets.interpolate(t,e,n),this._constrain(),this._calcMatrices()},Er.prototype.coveringZoomLevel=function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)},Er.prototype.getVisibleUnwrappedCoordinates=function(e){var n=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var r=this.pointCoordinate(new t.Point(0,0)),i=this.pointCoordinate(new t.Point(this.width,0)),o=this.pointCoordinate(new t.Point(this.width,this.height)),a=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(r.x,i.x,o.x,a.x)),u=Math.floor(Math.max(r.x,i.x,o.x,a.x)),c=s-1;c<=u+1;c++)0!==c&&n.push(new t.UnwrappedTileID(c,e));return n},Er.prototype.coveringTiles=function(e){var n=this.coveringZoomLevel(e),r=n;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);var i=t.MercatorCoordinate.fromLngLat(this.center),o=Math.pow(2,n),a=[o*i.x,o*i.y,0],s=_r.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n),u=e.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(u=n);var c=function(t){return{aabb:new xr([t*o,0,0],[(t+1)*o,o,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}},l=[],f=[],p=n,h=e.reparseOverscaled?r:n;if(this._renderWorldCopies)for(var d=1;d<=3;d++)l.push(c(-d)),l.push(c(d));for(l.push(c(0));l.length>0;){var v=l.pop(),m=v.x,g=v.y,y=v.fullyVisible;if(!y){var b=v.aabb.intersects(s);if(0===b)continue;y=2===b}var _=v.aabb.distanceX(a),x=v.aabb.distanceY(a),w=Math.max(Math.abs(_),Math.abs(x));if(v.zoom===p||w>3+(1<<p-v.zoom)-2&&v.zoom>=u)f.push({tileID:new t.OverscaledTileID(v.zoom===p?h:v.zoom,v.wrap,v.zoom,m,g),distanceSq:t.sqrLen([a[0]-.5-m,a[1]-.5-g])});else for(var E=0;E<4;E++){var S=(m<<1)+E%2,C=(g<<1)+(E>>1);l.push({aabb:v.aabb.quadrant(E),zoom:v.zoom+1,x:S,y:C,wrap:v.wrap,fullyVisible:y})}}return f.sort((function(t,e){return t.distanceSq-e.distanceSq})).map((function(t){return t.tileID}))},Er.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},Sr.unmodified.get=function(){return this._unmodified},Er.prototype.zoomScale=function(t){return Math.pow(2,t)},Er.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},Er.prototype.project=function(e){var n=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(n)*this.worldSize)},Er.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},Sr.point.get=function(){return this.project(this.center)},Er.prototype.setLocationAtPoint=function(e,n){var r=this.pointCoordinate(n),i=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.MercatorCoordinate(o.x-(r.x-i.x),o.y-(r.y-i.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())},Er.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},Er.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},Er.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},Er.prototype.coordinateLocation=function(t){return t.toLngLat()},Er.prototype.pointCoordinate=function(e){var n=[e.x,e.y,0,1],r=[e.x,e.y,1,1];t.transformMat4(n,n,this.pixelMatrixInverse),t.transformMat4(r,r,this.pixelMatrixInverse);var i=n[3],o=r[3],a=n[1]/i,s=r[1]/o,u=n[2]/i,c=r[2]/o,l=u===c?0:(0-u)/(c-u);return new t.MercatorCoordinate(t.number(n[0]/i,r[0]/o,l)/this.worldSize,t.number(a,s,l)/this.worldSize)},Er.prototype.coordinatePoint=function(e){var n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix),new t.Point(n[0]/n[3],n[1]/n[3])},Er.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},Er.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Er.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Er.prototype.calculatePosMatrix=function(e,n){void 0===n&&(n=!1);var r=e.key,i=n?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];var o=e.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*e.wrap,u=t.identity(new Float64Array(16));return t.translate(u,u,[s*a,o.y*a,0]),t.scale(u,u,[a/t.EXTENT,a/t.EXTENT,1]),t.multiply(u,n?this.alignedProjMatrix:this.projMatrix,u),i[r]=new Float32Array(u),i[r]},Er.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Er.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,n,r,i,o=-90,a=90,s=-180,u=180,c=this.size,l=this._unmodified;if(this.latRange){var f=this.latRange;o=t.mercatorYfromLat(f[1])*this.worldSize,e=(a=t.mercatorYfromLat(f[0])*this.worldSize)-o<c.y?c.y/(a-o):0}if(this.lngRange){var p=this.lngRange;s=t.mercatorXfromLng(p[0])*this.worldSize,n=(u=t.mercatorXfromLng(p[1])*this.worldSize)-s<c.x?c.x/(u-s):0}var h=this.point,d=Math.max(n||0,e||0);if(d)return this.center=this.unproject(new t.Point(n?(u+s)/2:h.x,e?(a+o)/2:h.y)),this.zoom+=this.scaleZoom(d),this._unmodified=l,void(this._constraining=!1);if(this.latRange){var v=h.y,m=c.y/2;v-m<o&&(i=o+m),v+m>a&&(i=a-m)}if(this.lngRange){var g=h.x,y=c.x/2;g-y<s&&(r=s+y),g+y>u&&(r=u-y)}void 0===r&&void 0===i||(this.center=this.unproject(new t.Point(void 0!==r?r:h.x,void 0!==i?i:h.y))),this._unmodified=l,this._constraining=!1}},Er.prototype._calcMatrices=function(){if(this.height){var e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var n=Math.PI/2+this._pitch,r=this._fov*(.5+e.y/this.height),i=Math.sin(r)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-n-r,.01,Math.PI-.01)),o=this.point,a=o.x,s=o.y,u=1.01*(Math.cos(Math.PI/2-this._pitch)*i+this.cameraToCenterDistance),c=this.height/50,l=new Float64Array(16);t.perspective(l,this._fov,this.width/this.height,c,u),l[8]=2*-e.x/this.width,l[9]=2*e.y/this.height,t.scale(l,l,[1,-1,1]),t.translate(l,l,[0,0,-this.cameraToCenterDistance]),t.rotateX(l,l,this._pitch),t.rotateZ(l,l,this.angle),t.translate(l,l,[-a,-s,0]),this.mercatorMatrix=t.scale([],l,[this.worldSize,this.worldSize,this.worldSize]),t.scale(l,l,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=l,this.invProjMatrix=t.invert([],this.projMatrix);var f=this.width%2/2,p=this.height%2/2,h=Math.cos(this.angle),d=Math.sin(this.angle),v=a-Math.round(a)+h*f+d*p,m=s-Math.round(s)+h*p+d*f,g=new Float64Array(l);if(t.translate(g,g,[v>.5?v-1:v,m>.5?m-1:m,0]),this.alignedProjMatrix=g,l=t.create(),t.scale(l,l,[this.width/2,-this.height/2,1]),t.translate(l,l,[1,-1,0]),this.labelPlaneMatrix=l,l=t.create(),t.scale(l,l,[1,-1,1]),t.translate(l,l,[-1,-1,0]),t.scale(l,l,[2/this.width,2/this.height,1]),this.glCoordMatrix=l,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(l=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=l,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Er.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance},Er.prototype.getCameraPoint=function(){var e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,e))},Er.prototype.getCameraQueryGeometry=function(e){var n=this.getCameraPoint();if(1===e.length)return[e[0],n];for(var r=n.x,i=n.y,o=n.x,a=n.y,s=0,u=e;s<u.length;s+=1){var c=u[s];r=Math.min(r,c.x),i=Math.min(i,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y)}return[new t.Point(r,i),new t.Point(o,i),new t.Point(o,a),new t.Point(r,a),new t.Point(r,i)]},Object.defineProperties(Er.prototype,Sr);var Cr=function(e){var n,r,i,o;this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(n=this._updateHashUnthrottled.bind(this),r=!1,i=null,o=function(){i=null,r&&(n(),i=setTimeout(o,300),r=!1)},function(){return r=!0,i||o(),i})};Cr.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Cr.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Cr.prototype.getHashString=function(e){var n=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,i=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,i),a=Math.round(n.lng*o)/o,s=Math.round(n.lat*o)/o,u=this._map.getBearing(),c=this._map.getPitch(),l="";if(l+=e?"/"+a+"/"+s+"/"+r:r+"/"+s+"/"+a,(u||c)&&(l+="/"+Math.round(10*u)/10),c&&(l+="/"+Math.round(c)),this._hashName){var f=this._hashName,p=!1,h=t.window.location.hash.slice(1).split("&").map((function(t){var e=t.split("=")[0];return e===f?(p=!0,e+"="+l):t})).filter((function(t){return t}));return p||h.push(f+"="+l),"#"+h.join("&")}return"#"+l},Cr.prototype._getCurrentHash=function(){var e,n=this,r=t.window.location.hash.replace("#","");return this._hashName?(r.split("&").map((function(t){return t.split("=")})).forEach((function(t){t[0]===n._hashName&&(e=t)})),(e&&e[1]||"").split("/")):r.split("/")},Cr.prototype._onHashChange=function(){var t=this._getCurrentHash();if(t.length>=3&&!t.some((function(t){return isNaN(t)}))){var e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1},Cr.prototype._updateHashUnthrottled=function(){var e=t.window.location.href.replace(/(#.+)?$/,this.getHashString());try{t.window.history.replaceState(t.window.history.state,null,e)}catch(t){}};var Tr={linearity:.3,easing:t.bezier(0,0,.3,1)},Or=t.extend({deceleration:2500,maxSpeed:1400},Tr),Ar=t.extend({deceleration:20,maxSpeed:1400},Tr),kr=t.extend({deceleration:1e3,maxSpeed:360},Tr),Mr=t.extend({deceleration:1e3,maxSpeed:90},Tr),Pr=function(t){this._map=t,this.clear()};function Ir(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function Lr(e,n,r){var i=r.maxSpeed,o=r.linearity,a=r.deceleration,s=t.clamp(e*o/(n/1e3),-i,i),u=Math.abs(s)/(a*o);return{easing:r.easing,duration:1e3*u,amount:s*(u/2)}}Pr.prototype.clear=function(){this._inertiaBuffer=[]},Pr.prototype.record=function(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:e})},Pr.prototype._drainInertiaBuffer=function(){for(var e=this._inertiaBuffer,n=t.browser.now();e.length>0&&n-e[0].time>160;)e.shift()},Pr.prototype._onMoveEnd=function(e){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var n={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},r=0,i=this._inertiaBuffer;r<i.length;r+=1){var o=i[r].settings;n.zoom+=o.zoomDelta||0,n.bearing+=o.bearingDelta||0,n.pitch+=o.pitchDelta||0,o.panDelta&&n.pan._add(o.panDelta),o.around&&(n.around=o.around),o.pinchAround&&(n.pinchAround=o.pinchAround)}var a=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(n.pan.mag()){var u=Lr(n.pan.mag(),a,t.extend({},Or,e||{}));s.offset=n.pan.mult(u.amount/n.pan.mag()),s.center=this._map.transform.center,Ir(s,u)}if(n.zoom){var c=Lr(n.zoom,a,Ar);s.zoom=this._map.transform.zoom+c.amount,Ir(s,c)}if(n.bearing){var l=Lr(n.bearing,a,kr);s.bearing=this._map.transform.bearing+t.clamp(l.amount,-179,179),Ir(s,l)}if(n.pitch){var f=Lr(n.pitch,a,Mr);s.pitch=this._map.transform.pitch+f.amount,Ir(s,f)}if(s.zoom||s.bearing){var p=void 0===n.pinchAround?n.around:n.pinchAround;s.around=p?this._map.unproject(p):this._map.getCenter()}return this.clear(),t.extend(s,{noMoveStart:!0})}};var Rr=function(e){function r(r,i,o,a){void 0===a&&(a={});var s=n.mousePos(i.getCanvasContainer(),o),u=i.unproject(s);e.call(this,r,t.extend({point:s,lngLat:u,originalEvent:o},a)),this._defaultPrevented=!1,this.target=i}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var i={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,i),r}(t.Event),Dr=function(e){function r(r,i,o){var a="touchend"===r?o.changedTouches:o.touches,s=n.touchPos(i.getCanvasContainer(),a),u=s.map((function(t){return i.unproject(t)})),c=s.reduce((function(t,e,n,r){return t.add(e.div(r.length))}),new t.Point(0,0)),l=i.unproject(c);e.call(this,r,{points:s,point:c,lngLats:u,lngLat:l,originalEvent:o}),this._defaultPrevented=!1}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var i={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,i),r}(t.Event),Nr=function(t){function e(e,n,r){t.call(this,e,{originalEvent:r}),this._defaultPrevented=!1}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,n),e}(t.Event),jr=function(t,e){this._map=t,this._clickTolerance=e.clickTolerance};jr.prototype.reset=function(){delete this._mousedownPos},jr.prototype.wheel=function(t){return this._firePreventable(new Nr(t.type,this._map,t))},jr.prototype.mousedown=function(t,e){return this._mousedownPos=e,this._firePreventable(new Rr(t.type,this._map,t))},jr.prototype.mouseup=function(t){this._map.fire(new Rr(t.type,this._map,t))},jr.prototype.click=function(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new Rr(t.type,this._map,t))},jr.prototype.dblclick=function(t){return this._firePreventable(new Rr(t.type,this._map,t))},jr.prototype.mouseover=function(t){this._map.fire(new Rr(t.type,this._map,t))},jr.prototype.mouseout=function(t){this._map.fire(new Rr(t.type,this._map,t))},jr.prototype.touchstart=function(t){return this._firePreventable(new Dr(t.type,this._map,t))},jr.prototype.touchmove=function(t){this._map.fire(new Dr(t.type,this._map,t))},jr.prototype.touchend=function(t){this._map.fire(new Dr(t.type,this._map,t))},jr.prototype.touchcancel=function(t){this._map.fire(new Dr(t.type,this._map,t))},jr.prototype._firePreventable=function(t){if(this._map.fire(t),t.defaultPrevented)return{}},jr.prototype.isEnabled=function(){return!0},jr.prototype.isActive=function(){return!1},jr.prototype.enable=function(){},jr.prototype.disable=function(){};var Fr=function(t){this._map=t};Fr.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Fr.prototype.mousemove=function(t){this._map.fire(new Rr(t.type,this._map,t))},Fr.prototype.mousedown=function(){this._delayContextMenu=!0},Fr.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Rr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Fr.prototype.contextmenu=function(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new Rr(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()},Fr.prototype.isEnabled=function(){return!0},Fr.prototype.isActive=function(){return!1},Fr.prototype.enable=function(){},Fr.prototype.disable=function(){};var zr=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1};function Br(t,e){for(var n={},r=0;r<t.length;r++)n[t[r].identifier]=e[r];return n}zr.prototype.isEnabled=function(){return!!this._enabled},zr.prototype.isActive=function(){return!!this._active},zr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},zr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},zr.prototype.mousedown=function(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(n.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)},zr.prototype.mousemoveWindow=function(t,e){if(this._active){var r=e;if(!(this._lastPos.equals(r)||!this._box&&r.dist(this._startPos)<this._clickTolerance)){var i=this._startPos;this._lastPos=r,this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var o=Math.min(i.x,r.x),a=Math.max(i.x,r.x),s=Math.min(i.y,r.y),u=Math.max(i.y,r.y);n.setTransform(this._box,"translate("+o+"px,"+s+"px)"),this._box.style.width=a-o+"px",this._box.style.height=u-s+"px"}}},zr.prototype.mouseupWindow=function(e,r){var i=this;if(this._active&&0===e.button){var o=this._startPos,a=r;if(this.reset(),n.suppressClick(),o.x!==a.x||o.y!==a.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:function(t){return t.fitScreenCoordinates(o,a,i._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",e)}},zr.prototype.keydown=function(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))},zr.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos},zr.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))};var Ur=function(t){this.reset(),this.numTouches=t.numTouches};Ur.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Ur.prototype.touchstart=function(e,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),r.length===this.numTouches&&(this.centroid=function(e){for(var n=new t.Point(0,0),r=0,i=e;r<i.length;r+=1)n._add(i[r]);return n.div(e.length)}(n),this.touches=Br(r,n)))},Ur.prototype.touchmove=function(t,e,n){if(!this.aborted&&this.centroid){var r=Br(n,e);for(var i in this.touches){var o=r[i];(!o||o.dist(this.touches[i])>30)&&(this.aborted=!0)}}},Ur.prototype.touchend=function(t,e,n){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){var r=!this.aborted&&this.centroid;if(this.reset(),r)return r}};var Vr=function(t){this.singleTap=new Ur(t),this.numTaps=t.numTaps,this.reset()};Vr.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Vr.prototype.touchstart=function(t,e,n){this.singleTap.touchstart(t,e,n)},Vr.prototype.touchmove=function(t,e,n){this.singleTap.touchmove(t,e,n)},Vr.prototype.touchend=function(t,e,n){var r=this.singleTap.touchend(t,e,n);if(r){var i=t.timeStamp-this.lastTime<500,o=!this.lastTap||this.lastTap.dist(r)<30;if(i&&o||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}};var qr=function(){this._zoomIn=new Vr({numTouches:1,numTaps:2}),this._zoomOut=new Vr({numTouches:2,numTaps:1}),this.reset()};qr.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},qr.prototype.touchstart=function(t,e,n){this._zoomIn.touchstart(t,e,n),this._zoomOut.touchstart(t,e,n)},qr.prototype.touchmove=function(t,e,n){this._zoomIn.touchmove(t,e,n),this._zoomOut.touchmove(t,e,n)},qr.prototype.touchend=function(t,e,n){var r=this,i=this._zoomIn.touchend(t,e,n),o=this._zoomOut.touchend(t,e,n);return i?(this._active=!0,t.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(i)},{originalEvent:t})}}):o?(this._active=!0,t.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(o)},{originalEvent:t})}}):void 0},qr.prototype.touchcancel=function(){this.reset()},qr.prototype.enable=function(){this._enabled=!0},qr.prototype.disable=function(){this._enabled=!1,this.reset()},qr.prototype.isEnabled=function(){return this._enabled},qr.prototype.isActive=function(){return this._active};var Gr={0:1,2:2},Hr=function(t){this.reset(),this._clickTolerance=t.clickTolerance||1};Hr.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Hr.prototype._correctButton=function(t,e){return!1},Hr.prototype._move=function(t,e){return{}},Hr.prototype.mousedown=function(t,e){if(!this._lastPoint){var r=n.mouseButton(t);this._correctButton(t,r)&&(this._lastPoint=e,this._eventButton=r)}},Hr.prototype.mousemoveWindow=function(t,e){var n=this._lastPoint;if(n)if(t.preventDefault(),function(t,e){var n=Gr[e];return void 0===t.buttons||(t.buttons&n)!==n}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(n,e)},Hr.prototype.mouseupWindow=function(t){this._lastPoint&&n.mouseButton(t)===this._eventButton&&(this._moved&&n.suppressClick(),this.reset())},Hr.prototype.enable=function(){this._enabled=!0},Hr.prototype.disable=function(){this._enabled=!1,this.reset()},Hr.prototype.isEnabled=function(){return this._enabled},Hr.prototype.isActive=function(){return this._active};var Wr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.mousedown=function(e,n){t.prototype.mousedown.call(this,e,n),this._lastPoint&&(this._active=!0)},e.prototype._correctButton=function(t,e){return 0===e&&!t.ctrlKey},e.prototype._move=function(t,e){return{around:e,panDelta:e.sub(t)}},e}(Hr),Xr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var n=.8*(e.x-t.x);if(n)return this._active=!0,{bearingDelta:n}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(Hr),Zr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var n=-.5*(e.y-t.y);if(n)return this._active=!0,{pitchDelta:n}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(Hr),Yr=function(t){this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()};Yr.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},Yr.prototype.touchstart=function(t,e,n){return this._calculateTransform(t,e,n)},Yr.prototype.touchmove=function(t,e,n){if(this._active&&!(n.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,e,n)},Yr.prototype.touchend=function(t,e,n){this._calculateTransform(t,e,n),this._active&&n.length<this._minTouches&&this.reset()},Yr.prototype.touchcancel=function(){this.reset()},Yr.prototype._calculateTransform=function(e,n,r){r.length>0&&(this._active=!0);var i=Br(r,n),o=new t.Point(0,0),a=new t.Point(0,0),s=0;for(var u in i){var c=i[u],l=this._touches[u];l&&(o._add(c),a._add(c.sub(l)),s++,i[u]=c)}if(this._touches=i,!(s<this._minTouches)&&a.mag()){var f=a.div(s);if(this._sum._add(f),!(this._sum.mag()<this._clickTolerance))return{around:o.div(s),panDelta:f}}},Yr.prototype.enable=function(){this._enabled=!0},Yr.prototype.disable=function(){this._enabled=!1,this.reset()},Yr.prototype.isEnabled=function(){return this._enabled},Yr.prototype.isActive=function(){return this._active};var Kr=function(){this.reset()};function Jr(t,e,n){for(var r=0;r<t.length;r++)if(t[r].identifier===n)return e[r]}function Qr(t,e){return Math.log(t/e)/Math.LN2}Kr.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Kr.prototype._start=function(t){},Kr.prototype._move=function(t,e,n){return{}},Kr.prototype.touchstart=function(t,e,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([e[0],e[1]]))},Kr.prototype.touchmove=function(t,e,n){if(this._firstTwoTouches){t.preventDefault();var r=this._firstTwoTouches,i=r[1],o=Jr(n,e,r[0]),a=Jr(n,e,i);if(o&&a){var s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,t)}}},Kr.prototype.touchend=function(t,e,r){if(this._firstTwoTouches){var i=this._firstTwoTouches,o=i[1],a=Jr(r,e,i[0]),s=Jr(r,e,o);a&&s||(this._active&&n.suppressClick(),this.reset())}},Kr.prototype.touchcancel=function(){this.reset()},Kr.prototype.enable=function(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around},Kr.prototype.disable=function(){this._enabled=!1,this.reset()},Kr.prototype.isEnabled=function(){return this._enabled},Kr.prototype.isActive=function(){return this._active};var $r=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._distance,delete this._startDistance},e.prototype._start=function(t){this._startDistance=this._distance=t[0].dist(t[1])},e.prototype._move=function(t,e){var n=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Qr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Qr(this._distance,n),pinchAround:e}},e}(Kr);function ti(t,e){return 180*t.angleWith(e)/Math.PI}var ei=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},e.prototype._start=function(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])},e.prototype._move=function(t,e){var n=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ti(this._vector,n),pinchAround:e}},e.prototype._isBelowThreshold=function(t){this._minDiameter=Math.min(this._minDiameter,t.mag());var e=25/(Math.PI*this._minDiameter)*360,n=ti(t,this._startVector);return Math.abs(n)<e},e}(Kr);function ni(t){return Math.abs(t.y)>Math.abs(t.x)}var ri=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},e.prototype._start=function(t){this._lastPoints=t,ni(t[0].sub(t[1]))&&(this._valid=!1)},e.prototype._move=function(t,e,n){var r=t[0].sub(this._lastPoints[0]),i=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(r,i,n.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(r.y+i.y)/2*-.5}},e.prototype.gestureBeginsVertically=function(t,e,n){if(void 0!==this._valid)return this._valid;var r=t.mag()>=2,i=e.mag()>=2;if(r||i){if(!r||!i)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;var o=t.y>0==e.y>0;return ni(t)&&ni(e)&&o}},e}(Kr),ii={panStep:100,bearingStep:15,pitchStep:10},oi=function(){var t=ii;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1};function ai(t){return t*(2-t)}oi.prototype.reset=function(){this._active=!1},oi.prototype.keydown=function(t){var e=this;if(!(t.altKey||t.ctrlKey||t.metaKey)){var n=0,r=0,i=0,o=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:t.shiftKey?r=-1:(t.preventDefault(),o=-1);break;case 39:t.shiftKey?r=1:(t.preventDefault(),o=1);break;case 38:t.shiftKey?i=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?i=-1:(t.preventDefault(),a=1);break;default:return}return this._rotationDisabled&&(r=0,i=0),{cameraAnimation:function(s){var u=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:ai,zoom:n?Math.round(u)+n*(t.shiftKey?2:1):u,bearing:s.getBearing()+r*e._bearingStep,pitch:s.getPitch()+i*e._pitchStep,offset:[-o*e._panStep,-a*e._panStep],center:s.getCenter()},{originalEvent:t})}}}},oi.prototype.enable=function(){this._enabled=!0},oi.prototype.disable=function(){this._enabled=!1,this.reset()},oi.prototype.isEnabled=function(){return this._enabled},oi.prototype.isActive=function(){return this._active},oi.prototype.disableRotation=function(){this._rotationDisabled=!0},oi.prototype.enableRotation=function(){this._rotationDisabled=!1};var si=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onTimeout"],this)};si.prototype.setZoomRate=function(t){this._defaultZoomRate=t},si.prototype.setWheelZoomRate=function(t){this._wheelZoomRate=t},si.prototype.isEnabled=function(){return!!this._enabled},si.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},si.prototype.isZooming=function(){return!!this._zooming},si.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},si.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},si.prototype.wheel=function(e){if(this.isEnabled()){var n=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,r=t.browser.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%4.000244140625==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this._active||this._start(e)),e.preventDefault()}},si.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)},si.prototype._start=function(e){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var r=n.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(r)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},si.prototype.renderFrame=function(){var e=this;if(this._frameId&&(this._frameId=null,this.isActive())){var n=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,i=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==i&&(i=1/i);var o="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(o*i))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a,s="number"==typeof this._targetZoom?this._targetZoom:n.zoom,u=this._startZoom,c=this._easing,l=!1;if("wheel"===this._type&&u&&c){var f=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),p=c(f);a=t.number(u,s,p),f<1?this._frameId||(this._frameId=!0):l=!0}else a=s,l=!0;return this._active=!0,l&&(this._active=!1,this._finishTimeout=setTimeout((function(){e._zooming=!1,e._handler._triggerRenderFrame(),delete e._targetZoom,delete e._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!l,zoomDelta:a-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},si.prototype._smoothOutEasing=function(e){var n=t.ease;if(this._prevEase){var r=this._prevEase,i=(t.browser.now()-r.start)/r.duration,o=r.easing(i+.01)-r.easing(i),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);n=t.bezier(a,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:n},n},si.prototype.reset=function(){this._active=!1};var ui=function(t,e){this._clickZoom=t,this._tapZoom=e};ui.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},ui.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},ui.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},ui.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ci=function(){this.reset()};ci.prototype.reset=function(){this._active=!1},ci.prototype.dblclick=function(t,e){return t.preventDefault(),{cameraAnimation:function(n){n.easeTo({duration:300,zoom:n.getZoom()+(t.shiftKey?-1:1),around:n.unproject(e)},{originalEvent:t})}}},ci.prototype.enable=function(){this._enabled=!0},ci.prototype.disable=function(){this._enabled=!1,this.reset()},ci.prototype.isEnabled=function(){return this._enabled},ci.prototype.isActive=function(){return this._active};var li=function(){this._tap=new Vr({numTouches:1,numTaps:1}),this.reset()};li.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},li.prototype.touchstart=function(t,e,n){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=e[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(t,e,n))},li.prototype.touchmove=function(t,e,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;var r=e[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,t.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(t,e,n)},li.prototype.touchend=function(t,e,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(t,e,n)&&(this._tapTime=t.timeStamp)},li.prototype.touchcancel=function(){this.reset()},li.prototype.enable=function(){this._enabled=!0},li.prototype.disable=function(){this._enabled=!1,this.reset()},li.prototype.isEnabled=function(){return this._enabled},li.prototype.isActive=function(){return this._active};var fi=function(t,e,n){this._el=t,this._mousePan=e,this._touchPan=n};fi.prototype.enable=function(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},fi.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},fi.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},fi.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var pi=function(t,e,n){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=n};pi.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},pi.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},pi.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},pi.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var hi=function(t,e,n,r){this._el=t,this._touchZoom=e,this._touchRotate=n,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0};hi.prototype.enable=function(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},hi.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},hi.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},hi.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},hi.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},hi.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var di=function(t){return t.zoom||t.drag||t.pitch||t.rotate},vi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(t.Event);function mi(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}var gi=function(e,r){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Pr(e),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(r),t.bindAll(["handleEvent","handleWindowEvent"],this);var i=this._el;this._listeners=[[i,"touchstart",{passive:!0}],[i,"touchmove",{passive:!1}],[i,"touchend",void 0],[i,"touchcancel",void 0],[i,"mousedown",void 0],[i,"mousemove",void 0],[i,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[i,"mouseover",void 0],[i,"mouseout",void 0],[i,"dblclick",void 0],[i,"click",void 0],[i,"keydown",{capture:!1}],[i,"keyup",void 0],[i,"wheel",{passive:!1}],[i,"contextmenu",void 0],[t.window,"blur",void 0]];for(var o=0,a=this._listeners;o<a.length;o+=1){var s=a[o],u=s[0];n.addEventListener(u,s[1],u===t.window.document?this.handleWindowEvent:this.handleEvent,s[2])}};gi.prototype.destroy=function(){for(var e=0,r=this._listeners;e<r.length;e+=1){var i=r[e],o=i[0];n.removeEventListener(o,i[1],o===t.window.document?this.handleWindowEvent:this.handleEvent,i[2])}},gi.prototype._addDefaultHandlers=function(t){var e=this._map,n=e.getCanvasContainer();this._add("mapEvent",new jr(e,t));var r=e.boxZoom=new zr(e,t);this._add("boxZoom",r);var i=new qr,o=new ci;e.doubleClickZoom=new ui(o,i),this._add("tapZoom",i),this._add("clickZoom",o);var a=new li;this._add("tapDragZoom",a);var s=e.touchPitch=new ri;this._add("touchPitch",s);var u=new Xr(t),c=new Zr(t);e.dragRotate=new pi(t,u,c),this._add("mouseRotate",u,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);var l=new Wr(t),f=new Yr(t);e.dragPan=new fi(n,l,f),this._add("mousePan",l),this._add("touchPan",f,["touchZoom","touchRotate"]);var p=new ei,h=new $r;e.touchZoomRotate=new hi(n,h,p,a),this._add("touchRotate",p,["touchPan","touchZoom"]),this._add("touchZoom",h,["touchPan","touchRotate"]);var d=e.scrollZoom=new si(e,this);this._add("scrollZoom",d,["mousePan"]);var v=e.keyboard=new oi;this._add("keyboard",v),this._add("blockableMapEvent",new Fr(e));for(var m=0,g=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];m<g.length;m+=1){var y=g[m];t.interactive&&t[y]&&e[y].enable(t[y])}},gi.prototype._add=function(t,e,n){this._handlers.push({handlerName:t,handler:e,allowed:n}),this._handlersById[t]=e},gi.prototype.stop=function(t){if(!this._updatingCamera){for(var e=0,n=this._handlers;e<n.length;e+=1)n[e].handler.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}},gi.prototype.isActive=function(){for(var t=0,e=this._handlers;t<e.length;t+=1)if(e[t].handler.isActive())return!0;return!1},gi.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},gi.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},gi.prototype.isMoving=function(){return Boolean(di(this._eventsInProgress))||this.isZooming()},gi.prototype._blockedByActive=function(t,e,n){for(var r in t)if(r!==n&&(!e||e.indexOf(r)<0))return!0;return!1},gi.prototype.handleWindowEvent=function(t){this.handleEvent(t,t.type+"Window")},gi.prototype._getMapTouches=function(t){for(var e=[],n=0,r=t;n<r.length;n+=1){var i=r[n];this._el.contains(i.target)&&e.push(i)}return e},gi.prototype.handleEvent=function(t,e){if("blur"!==t.type){this._updatingCamera=!0;for(var r="renderFrame"===t.type?void 0:t,i={needsRenderFrame:!1},o={},a={},s=t.touches?this._getMapTouches(t.touches):void 0,u=s?n.touchPos(this._el,s):n.mousePos(this._el,t),c=0,l=this._handlers;c<l.length;c+=1){var f=l[c],p=f.handlerName,h=f.handler,d=f.allowed;if(h.isEnabled()){var v=void 0;this._blockedByActive(a,d,p)?h.reset():h[e||t.type]&&(v=h[e||t.type](t,u,s),this.mergeHandlerResult(i,o,v,p,r),v&&v.needsRenderFrame&&this._triggerRenderFrame()),(v||h.isActive())&&(a[p]=h)}}var m={};for(var g in this._previousActiveHandlers)a[g]||(m[g]=r);this._previousActiveHandlers=a,(Object.keys(m).length||mi(i))&&(this._changes.push([i,o,m]),this._triggerRenderFrame()),(Object.keys(a).length||mi(i))&&this._map._stop(!0),this._updatingCamera=!1;var y=i.cameraAnimation;y&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],y(this._map))}else this.stop(!0)},gi.prototype.mergeHandlerResult=function(e,n,r,i,o){if(r){t.extend(e,r);var a={handlerName:i,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(n.zoom=a),void 0!==r.panDelta&&(n.drag=a),void 0!==r.pitchDelta&&(n.pitch=a),void 0!==r.bearingDelta&&(n.rotate=a)}},gi.prototype._applyChanges=function(){for(var e={},n={},r={},i=0,o=this._changes;i<o.length;i+=1){var a=o[i],s=a[0],u=a[1],c=a[2];s.panDelta&&(e.panDelta=(e.panDelta||new t.Point(0,0))._add(s.panDelta)),s.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(e.around=s.around),void 0!==s.pinchAround&&(e.pinchAround=s.pinchAround),s.noInertia&&(e.noInertia=s.noInertia),t.extend(n,u),t.extend(r,c)}this._updateMapTransform(e,n,r),this._changes=[]},gi.prototype._updateMapTransform=function(t,e,n){var r=this._map,i=r.transform;if(!mi(t))return this._fireEvents(e,n,!0);var o=t.panDelta,a=t.zoomDelta,s=t.bearingDelta,u=t.pitchDelta,c=t.around,l=t.pinchAround;void 0!==l&&(c=l),r._stop(!0),c=c||r.transform.centerPoint;var f=i.pointLocation(o?c.sub(o):c);s&&(i.bearing+=s),u&&(i.pitch+=u),a&&(i.zoom+=a),i.setLocationAtPoint(f,c),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(e,n,!0)},gi.prototype._fireEvents=function(e,n,r){var i=this,o=di(this._eventsInProgress),a=di(e),s={};for(var u in e)this._eventsInProgress[u]||(s[u+"start"]=e[u].originalEvent),this._eventsInProgress[u]=e[u];for(var c in!o&&a&&this._fireEvent("movestart",a.originalEvent),s)this._fireEvent(c,s[c]);for(var l in a&&this._fireEvent("move",a.originalEvent),e)this._fireEvent(l,e[l].originalEvent);var f,p={};for(var h in this._eventsInProgress){var d=this._eventsInProgress[h],v=d.handlerName,m=d.originalEvent;this._handlersById[v].isActive()||(delete this._eventsInProgress[h],p[h+"end"]=f=n[v]||m)}for(var g in p)this._fireEvent(g,p[g]);var y=di(this._eventsInProgress);if(r&&(o||a)&&!y){this._updatingCamera=!0;var b=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),_=function(t){return 0!==t&&-i._bearingSnap<t&&t<i._bearingSnap};b?(_(b.bearing||this._map.getBearing())&&(b.bearing=0),this._map.easeTo(b,{originalEvent:f})):(this._map.fire(new t.Event("moveend",{originalEvent:f})),_(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},gi.prototype._fireEvent=function(e,n){this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},gi.prototype._requestFrame=function(){var t=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(e){delete t._frameId,t.handleEvent(new vi("renderFrame",{timeStamp:e})),t._applyChanges()}))},gi.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var yi=function(e){function n(n,r){e.call(this),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=r.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},n.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},n.prototype.panBy=function(e,n,r){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),r)},n.prototype.panTo=function(e,n,r){return this.easeTo(t.extend({center:e},n),r)},n.prototype.getZoom=function(){return this.transform.zoom},n.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},n.prototype.zoomTo=function(e,n,r){return this.easeTo(t.extend({zoom:e},n),r)},n.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},n.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},n.prototype.getBearing=function(){return this.transform.bearing},n.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},n.prototype.getPadding=function(){return this.transform.padding},n.prototype.setPadding=function(t,e){return this.jumpTo({padding:t},e),this},n.prototype.rotateTo=function(e,n,r){return this.easeTo(t.extend({bearing:e},n),r)},n.prototype.resetNorth=function(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this},n.prototype.resetNorthPitch=function(e,n){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),n),this},n.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},n.prototype.getPitch=function(){return this.transform.pitch},n.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},n.prototype.cameraForBounds=function(e,n){e=t.LngLatBounds.convert(e);var r=n&&n.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),r,n)},n.prototype._cameraForBoxAndBearing=function(e,n,r,i){var o={top:0,bottom:0,right:0,left:0};if("number"==typeof(i=t.extend({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){var a=i.padding;i.padding={top:a,bottom:a,right:a,left:a}}i.padding=t.extend(o,i.padding);var s=this.transform,u=s.padding,c=s.project(t.LngLat.convert(e)),l=s.project(t.LngLat.convert(n)),f=c.rotate(-r*Math.PI/180),p=l.rotate(-r*Math.PI/180),h=new t.Point(Math.max(f.x,p.x),Math.max(f.y,p.y)),d=new t.Point(Math.min(f.x,p.x),Math.min(f.y,p.y)),v=h.sub(d),m=(s.width-(u.left+u.right+i.padding.left+i.padding.right))/v.x,g=(s.height-(u.top+u.bottom+i.padding.top+i.padding.bottom))/v.y;if(!(g<0||m<0)){var y=Math.min(s.scaleZoom(s.scale*Math.min(m,g)),i.maxZoom),b="number"==typeof i.offset.x?new t.Point(i.offset.x,i.offset.y):t.Point.convert(i.offset),_=new t.Point((i.padding.left-i.padding.right)/2,(i.padding.top-i.padding.bottom)/2).rotate(r*Math.PI/180),x=b.add(_).mult(s.scale/s.zoomScale(y));return{center:s.unproject(c.add(l).div(2).sub(x)),zoom:y,bearing:r}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},n.prototype.fitBounds=function(t,e,n){return this._fitInternal(this.cameraForBounds(t,e),e,n)},n.prototype.fitScreenCoordinates=function(e,n,r,i,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(n)),r,i),i,o)},n.prototype._fitInternal=function(e,n,r){return e?(delete(n=t.extend(e,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this},n.prototype.jumpTo=function(e,n){this.stop();var r=this.transform,i=!1,o=!1,a=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(i=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=t.LngLat.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(o=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(a=!0,r.pitch=+e.pitch),null==e.padding||r.isPaddingEqual(e.padding)||(r.padding=e.padding),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),i&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),a&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))},n.prototype.easeTo=function(e,n){var r=this;this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.browser.prefersReducedMotion)&&(e.duration=0);var i=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),u=this.getPadding(),c="zoom"in e?+e.zoom:o,l="bearing"in e?this._normalizeBearing(e.bearing,a):a,f="pitch"in e?+e.pitch:s,p="padding"in e?e.padding:i.padding,h=t.Point.convert(e.offset),d=i.centerPoint.add(h),v=i.pointLocation(d),m=t.LngLat.convert(e.center||v);this._normalizeCenter(m);var g,y,b=i.project(v),_=i.project(m).sub(b),x=i.zoomScale(c-o);e.around&&(g=t.LngLat.convert(e.around),y=i.locationPoint(g));var w={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||c!==o,this._rotating=this._rotating||a!==l,this._pitching=this._pitching||f!==s,this._padding=!i.isPaddingEqual(p),this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,w),this._ease((function(e){if(r._zooming&&(i.zoom=t.number(o,c,e)),r._rotating&&(i.bearing=t.number(a,l,e)),r._pitching&&(i.pitch=t.number(s,f,e)),r._padding&&(i.interpolatePadding(u,p,e),d=i.centerPoint.add(h)),g)i.setLocationAtPoint(g,y);else{var v=i.zoomScale(i.zoom-o),m=c>o?Math.min(2,x):Math.max(.5,x),w=Math.pow(m,1-e),E=i.unproject(b.add(_.mult(e*w)).mult(v));i.setLocationAtPoint(i.renderWorldCopies?E.wrap():E,d)}r._fireMoveEvents(n)}),(function(t){r._afterEase(n,t)}),e),this},n.prototype._prepareEase=function(e,n,r){void 0===r&&(r={}),this._moving=!0,n||r.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!r.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!r.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!r.pitching&&this.fire(new t.Event("pitchstart",e))},n.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},n.prototype._afterEase=function(e,n){if(!this._easeId||!n||this._easeId!==n){delete this._easeId;var r=this._zooming,i=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new t.Event("zoomend",e)),i&&this.fire(new t.Event("rotateend",e)),o&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}},n.prototype.flyTo=function(e,n){var r=this;if(!e.essential&&t.browser.prefersReducedMotion){var i=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,n)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var o=this.transform,a=this.getZoom(),s=this.getBearing(),u=this.getPitch(),c=this.getPadding(),l="zoom"in e?t.clamp(+e.zoom,o.minZoom,o.maxZoom):a,f="bearing"in e?this._normalizeBearing(e.bearing,s):s,p="pitch"in e?+e.pitch:u,h="padding"in e?e.padding:o.padding,d=o.zoomScale(l-a),v=t.Point.convert(e.offset),m=o.centerPoint.add(v),g=o.pointLocation(m),y=t.LngLat.convert(e.center||g);this._normalizeCenter(y);var b=o.project(g),_=o.project(y).sub(b),x=e.curve,w=Math.max(o.width,o.height),E=w/d,S=_.mag();if("minZoom"in e){var C=t.clamp(Math.min(e.minZoom,a,l),o.minZoom,o.maxZoom),T=w/o.zoomScale(C-a);x=Math.sqrt(T/S*2)}var O=x*x;function A(t){var e=(E*E-w*w+(t?-1:1)*O*O*S*S)/(2*(t?E:w)*O*S);return Math.log(Math.sqrt(e*e+1)-e)}function k(t){return(Math.exp(t)-Math.exp(-t))/2}function M(t){return(Math.exp(t)+Math.exp(-t))/2}var P=A(0),I=function(t){return M(P)/M(P+x*t)},L=function(t){return w*((M(P)*(k(e=P+x*t)/M(e))-k(P))/O)/S;var e},R=(A(1)-P)/x;if(Math.abs(S)<1e-6||!isFinite(R)){if(Math.abs(w-E)<1e-6)return this.easeTo(e,n);var D=E<w?-1:1;R=Math.abs(Math.log(E/w))/x,L=function(){return 0},I=function(t){return Math.exp(D*x*t)}}return e.duration="duration"in e?+e.duration:1e3*R/("screenSpeed"in e?+e.screenSpeed/x:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=s!==f,this._pitching=p!==u,this._padding=!o.isPaddingEqual(h),this._prepareEase(n,!1),this._ease((function(e){var i=e*R,d=1/I(i);o.zoom=1===e?l:a+o.scaleZoom(d),r._rotating&&(o.bearing=t.number(s,f,e)),r._pitching&&(o.pitch=t.number(u,p,e)),r._padding&&(o.interpolatePadding(c,h,e),m=o.centerPoint.add(v));var g=1===e?y:o.unproject(b.add(_.mult(L(i))).mult(d));o.setLocationAtPoint(o.renderWorldCopies?g.wrap():g,m),r._fireMoveEvents(n)}),(function(){return r._afterEase(n)}),e),this},n.prototype.isEasing=function(){return!!this._easeFrameId},n.prototype.stop=function(){return this._stop()},n.prototype._stop=function(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var n=this._onEaseEnd;delete this._onEaseEnd,n.call(this,e)}if(!t){var r=this.handlers;r&&r.stop(!1)}return this},n.prototype._ease=function(e,n,r){!1===r.animate||0===r.duration?(e(1),n()):(this._easeStart=t.browser.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},n.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},n.prototype._normalizeBearing=function(e,n){e=t.wrap(e,-180,180);var r=Math.abs(e-n);return Math.abs(e-360-n)<r&&(e-=360),Math.abs(e+360-n)<r&&(e+=360),e},n.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}},n}(t.Evented),bi=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};bi.prototype.getDefaultPosition=function(){return"bottom-right"},bi.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=n.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=n.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},bi.prototype.onRemove=function(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},bi.prototype._setElementTitle=function(t,e){var n=this._map._getUIString("AttributionControl."+e);t.title=n,t.setAttribute("aria-label",n)},bi.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},bi.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){var r=n.reduce((function(t,e,r){return e.value&&(t+=e.key+"="+e.value+(r<n.length-1?"&":"")),t}),"?");e.href=t.config.FEEDBACK_URL+"/"+r+(this._map._hash?this._map._hash.getHashString(!0):""),e.rel="noopener nofollow",this._setElementTitle(e,"MapFeedback")}},bi.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},bi.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((function(t){return"string"!=typeof t?"":t}))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var n=this._map.style.sourceCaches;for(var r in n){var i=n[r];if(i.used){var o=i.getSource();o.attribution&&t.indexOf(o.attribution)<0&&t.push(o.attribution)}}t.sort((function(t,e){return t.length-e.length}));var a=(t=t.filter((function(e,n){for(var r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0}))).join(" | ");a!==this._attribHTML&&(this._attribHTML=a,t.length?(this._innerContainer.innerHTML=a,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},bi.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var _i=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};_i.prototype.onAdd=function(t){this._map=t,this._container=n.create("div","mapboxgl-ctrl");var e=n.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},_i.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},_i.prototype.getDefaultPosition=function(){return"bottom-left"},_i.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},_i.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},_i.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var xi=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};xi.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},xi.prototype.remove=function(t){for(var e=this._currentlyRunning,n=0,r=e?this._queue.concat(e):this._queue;n<r.length;n+=1){var i=r[n];if(i.id===t)return void(i.cancelled=!0)}},xi.prototype.run=function(t){void 0===t&&(t=0);var e=this._currentlyRunning=this._queue;this._queue=[];for(var n=0,r=e;n<r.length;n+=1){var i=r[n];if(!i.cancelled&&(i.callback(t),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},xi.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var wi={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ei=t.window.HTMLImageElement,Si=t.window.HTMLElement,Ci=t.window.ImageBitmap,Ti={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Oi=function(r){function i(e){var n=this;if(null!=(e=t.extend({},Ti,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var i=new Er(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies);if(r.call(this,i,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new xi,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},wi,e.locale),this._clickTolerance=e.clickTolerance,this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken),"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof Si))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return n._update(!1)})),this.on("moveend",(function(){return n._update(!1)})),this.on("zoom",(function(){return n._update(!0)})),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new gi(this,e),this._hash=e.hash&&new Cr("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new bi({customAttribution:e.customAttribution})),this.addControl(new _i,e.logoPosition),this.on("style.load",(function(){n.transform.unmodified&&n.jumpTo(n.style.stylesheet)})),this.on("data",(function(e){n._update("style"===e.dataType),n.fire(new t.Event(e.dataType+"data",e))})),this.on("dataloading",(function(e){n.fire(new t.Event(e.dataType+"dataloading",e))}))}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var o={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return i.prototype._getMapId=function(){return this._mapId},i.prototype.addControl=function(e,n){if(void 0===n&&(n=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=e.onAdd(this);this._controls.push(e);var i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this},i.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this},i.prototype.hasControl=function(t){return this._controls.indexOf(t)>-1},i.prototype.resize=function(e){var n=this._containerDimensions(),r=n[0],i=n[1];this._resizeCanvas(r,i),this.transform.resize(r,i),this.painter.resize(r,i);var o=!this._moving;return o&&(this.stop(),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e))),this.fire(new t.Event("resize",e)),o&&this.fire(new t.Event("moveend",e)),this},i.prototype.getBounds=function(){return this.transform.getBounds()},i.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},i.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},i.prototype.setMinZoom=function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},i.prototype.getMinZoom=function(){return this.transform.minZoom},i.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},i.prototype.getMaxZoom=function(){return this.transform.maxZoom},i.prototype.setMinPitch=function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},i.prototype.getMinPitch=function(){return this.transform.minPitch},i.prototype.setMaxPitch=function(t){if((t=null==t?60:t)>60)throw new Error("maxPitch must be less than or equal to 60");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")},i.prototype.getMaxPitch=function(){return this.transform.maxPitch},i.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},i.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},i.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},i.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},i.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},i.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},i.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},i.prototype._createDelegatedListener=function(t,e,n){var r,i=this;if("mouseenter"===t||"mouseover"===t){var o=!1;return{layer:e,listener:n,delegates:{mousemove:function(r){var a=i.getLayer(e)?i.queryRenderedFeatures(r.point,{layers:[e]}):[];a.length?o||(o=!0,n.call(i,new Rr(t,i,r.originalEvent,{features:a}))):o=!1},mouseout:function(){o=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:e,listener:n,delegates:{mousemove:function(r){(i.getLayer(e)?i.queryRenderedFeatures(r.point,{layers:[e]}):[]).length?a=!0:a&&(a=!1,n.call(i,new Rr(t,i,r.originalEvent)))},mouseout:function(e){a&&(a=!1,n.call(i,new Rr(t,i,e.originalEvent)))}}}}return{layer:e,listener:n,delegates:(r={},r[t]=function(t){var r=i.getLayer(e)?i.queryRenderedFeatures(t.point,{layers:[e]}):[];r.length&&(t.features=r,n.call(i,t),delete t.features)},r)}},i.prototype.on=function(t,e,n){if(void 0===n)return r.prototype.on.call(this,t,e);var i=this._createDelegatedListener(t,e,n);for(var o in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(i),i.delegates)this.on(o,i.delegates[o]);return this},i.prototype.once=function(t,e,n){if(void 0===n)return r.prototype.once.call(this,t,e);var i=this._createDelegatedListener(t,e,n);for(var o in i.delegates)this.once(o,i.delegates[o]);return this},i.prototype.off=function(t,e,n){var i=this;return void 0===n?r.prototype.off.call(this,t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&function(r){for(var o=r[t],a=0;a<o.length;a++){var s=o[a];if(s.layer===e&&s.listener===n){for(var u in s.delegates)i.off(u,s.delegates[u]);return o.splice(a,1),i}}}(this._delegatedListeners),this)},i.prototype.queryRenderedFeatures=function(e,n){if(!this.style)return[];var r;if(void 0!==n||void 0===e||e instanceof t.Point||Array.isArray(e)||(n=e,e=void 0),n=n||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])r=[t.Point.convert(e)];else{var i=t.Point.convert(e[0]),o=t.Point.convert(e[1]);r=[i,new t.Point(o.x,i.y),o,new t.Point(i.x,o.y),i]}return this.style.queryRenderedFeatures(r,n,this.transform)},i.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},i.prototype.setStyle=function(e,n){return!1!==(n=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(e,n))},i.prototype._getUIString=function(t){var e=this._locale[t];if(null==e)throw new Error("Missing UI string '"+t+"'");return e},i.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new qe(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},i.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new qe(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},i.prototype._diffStyle=function(e,n){var r=this;if("string"==typeof e){var i=this._requestManager.normalizeStyleURL(e),o=this._requestManager.transformRequest(i,t.ResourceType.Style);t.getJSON(o,(function(e,i){e?r.fire(new t.ErrorEvent(e)):i&&r._updateDiff(i,n)}))}else"object"==typeof e&&this._updateDiff(e,n)},i.prototype._updateDiff=function(e,n){try{this.style.setState(e)&&this._update(!0)}catch(r){t.warnOnce("Unable to perform style diff: "+(r.message||r.error||r)+".  Rebuilding the style from scratch."),this._updateStyle(e,n)}},i.prototype.getStyle=function(){if(this.style)return this.style.serialize()},i.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},i.prototype.addSource=function(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)},i.prototype.isSourceLoaded=function(e){var n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},i.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var n=t[e]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},i.prototype.addSourceType=function(t,e,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,n)},i.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},i.prototype.getSource=function(t){return this.style.getSource(t)},i.prototype.addImage=function(e,n,r){void 0===r&&(r={});var i=r.pixelRatio;void 0===i&&(i=1);var o=r.sdf;void 0===o&&(o=!1);var a=r.stretchX,s=r.stretchY,u=r.content;if(this._lazyInitEmptyStyle(),n instanceof Ei||Ci&&n instanceof Ci){var c=t.browser.getImageData(n);this.style.addImage(e,{data:new t.RGBAImage({width:c.width,height:c.height},c.data),pixelRatio:i,stretchX:a,stretchY:s,content:u,sdf:o,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var l=n;this.style.addImage(e,{data:new t.RGBAImage({width:n.width,height:n.height},new Uint8Array(n.data)),pixelRatio:i,stretchX:a,stretchY:s,content:u,sdf:o,version:0,userImage:l}),l.onAdd&&l.onAdd(this,e)}},i.prototype.updateImage=function(e,n){var r=this.style.getImage(e);if(!r)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var i=n instanceof Ei||Ci&&n instanceof Ci?t.browser.getImageData(n):n,o=i.width,a=i.height,s=i.data;return void 0===o||void 0===a?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):o!==r.data.width||a!==r.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(r.data.replace(s,!(n instanceof Ei||Ci&&n instanceof Ci)),void this.style.updateImage(e,r))},i.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},i.prototype.removeImage=function(t){this.style.removeImage(t)},i.prototype.loadImage=function(e,n){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),n)},i.prototype.listImages=function(){return this.style.listImages()},i.prototype.addLayer=function(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)},i.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},i.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},i.prototype.getLayer=function(t){return this.style.getLayer(t)},i.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)},i.prototype.setFilter=function(t,e,n){return void 0===n&&(n={}),this.style.setFilter(t,e,n),this._update(!0)},i.prototype.getFilter=function(t){return this.style.getFilter(t)},i.prototype.setPaintProperty=function(t,e,n,r){return void 0===r&&(r={}),this.style.setPaintProperty(t,e,n,r),this._update(!0)},i.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},i.prototype.setLayoutProperty=function(t,e,n,r){return void 0===r&&(r={}),this.style.setLayoutProperty(t,e,n,r),this._update(!0)},i.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},i.prototype.setLight=function(t,e){return void 0===e&&(e={}),this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)},i.prototype.getLight=function(){return this.style.getLight()},i.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},i.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},i.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},i.prototype.getContainer=function(){return this._container},i.prototype.getCanvasContainer=function(){return this._canvasContainer},i.prototype.getCanvas=function(){return this._canvas},i.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},i.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},i.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=n.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=n.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=n.create("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var r=this._containerDimensions();this._resizeCanvas(r[0],r[1]);var i=this._controlContainer=n.create("div","mapboxgl-control-container",t),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(t){o[t]=n.create("div","mapboxgl-ctrl-"+t,i)})),this._container.addEventListener("scroll",this._onMapScroll,!1)},i.prototype._resizeCanvas=function(e,n){var r=t.browser.devicePixelRatio||1;this._canvas.width=r*e,this._canvas.height=r*n,this._canvas.style.width=e+"px",this._canvas.style.height=n+"px"},i.prototype._setupPainter=function(){var n=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);r?(this.painter=new br(r,this.transform),t.webpSupported.testSupport(r)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},i.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},i.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},i.prototype._onMapScroll=function(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},i.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},i.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},i.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},i.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},i.prototype._render=function(e){var n,r=this,i=0,o=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(n=o.createQueryEXT(),o.beginQueryEXT(o.TIME_ELAPSED_EXT,n),i=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),!this._removed){var a=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var s=this.transform.zoom,u=t.browser.now();this.style.zoomHistory.update(s,u);var c=new t.EvaluationParameters(s,{now:u,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),l=c.crossFadingFactor();1===l&&l===this._crossFadingFactor||(a=!0,this._crossFadingFactor=l),this.style.update(c)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var f=t.browser.now()-i;o.endQueryEXT(o.TIME_ELAPSED_EXT,n),setTimeout((function(){var e=o.getQueryObjectEXT(n,o.QUERY_RESULT_EXT)/1e6;o.deleteQueryEXT(n),r.fire(new t.Event("gpu-timing-frame",{cpuTime:f,gpuTime:e}))}),50)}if(this.listens("gpu-timing-layer")){var p=this.painter.collectGpuTimers();setTimeout((function(){var e=r.painter.queryGpuTimers(p);r.fire(new t.Event("gpu-timing-layer",{layerTimes:e}))}),50)}var h=this._sourcesDirty||this._styleDirty||this._placementDirty;return h||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),!this._loaded||this._fullyLoaded||h||(this._fullyLoaded=!0),this}},i.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,n=this._controls;e<n.length;e+=1)n[e].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),Ai(this._canvasContainer),Ai(this._controlContainer),Ai(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},i.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame((function(t){e._frame=null,e._render(t)})))},i.prototype._onWindowOnline=function(){this._update()},i.prototype._onWindowResize=function(t){this._trackResize&&this.resize({originalEvent:t})._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},o.showPadding.get=function(){return!!this._showPadding},o.showPadding.set=function(t){this._showPadding!==t&&(this._showPadding=t,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(t){this._vertices=t,this._update()},i.prototype._setCacheLimits=function(e,n){t.setCacheLimits(e,n)},o.version.get=function(){return t.version},Object.defineProperties(i.prototype,o),i}(yi);function Ai(t){t.parentNode&&t.parentNode.removeChild(t)}var ki={showCompass:!0,showZoom:!0,visualizePitch:!1},Mi=function(e){var r=this;this.options=t.extend({},ki,e),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(t){return r._map.zoomIn({},{originalEvent:t})})),n.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(t){return r._map.zoomOut({},{originalEvent:t})})),n.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(t){r.options.visualizePitch?r._map.resetNorthPitch({},{originalEvent:t}):r._map.resetNorth({},{originalEvent:t})})),this._compassIcon=n.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Mi.prototype._updateZoomButtons=function(){var t=this._map.getZoom(),e=t===this._map.getMaxZoom(),n=t===this._map.getMinZoom();this._zoomInButton.disabled=e,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",e.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())},Mi.prototype._rotateCompassArrow=function(){var t=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=t},Mi.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Pi(this._map,this._compass,this.options.visualizePitch)),this._container},Mi.prototype.onRemove=function(){n.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Mi.prototype._createButton=function(t,e){var r=n.create("button",t,this._container);return r.type="button",r.addEventListener("click",e),r},Mi.prototype._setButtonTitle=function(t,e){var n=this._map._getUIString("NavigationControl."+e);t.title=n,t.setAttribute("aria-label",n)};var Pi=function(e,r,i){void 0===i&&(i=!1),this._clickTolerance=10,this.element=r,this.mouseRotate=new Xr({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,i&&(this.mousePitch=new Zr({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener(r,"mousedown",this.mousedown),n.addEventListener(r,"touchstart",this.touchstart,{passive:!1}),n.addEventListener(r,"touchmove",this.touchmove),n.addEventListener(r,"touchend",this.touchend),n.addEventListener(r,"touchcancel",this.reset)};function Ii(e,n,r){if(e=new t.LngLat(e.lng,e.lat),n){var i=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=r.locationPoint(e).distSqr(n);r.locationPoint(i).distSqr(n)<a?e=i:r.locationPoint(o).distSqr(n)<a&&(e=o)}for(;Math.abs(e.lng-r.center.lng)>180;){var s=r.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=r.width&&s.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e}Pi.prototype.down=function(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),n.disableDrag()},Pi.prototype.move=function(t,e){var n=this.map,r=this.mouseRotate.mousemoveWindow(t,e);if(r&&r.bearingDelta&&n.setBearing(n.getBearing()+r.bearingDelta),this.mousePitch){var i=this.mousePitch.mousemoveWindow(t,e);i&&i.pitchDelta&&n.setPitch(n.getPitch()+i.pitchDelta)}},Pi.prototype.off=function(){var t=this.element;n.removeEventListener(t,"mousedown",this.mousedown),n.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),n.removeEventListener(t,"touchmove",this.touchmove),n.removeEventListener(t,"touchend",this.touchend),n.removeEventListener(t,"touchcancel",this.reset),this.offTemp()},Pi.prototype.offTemp=function(){n.enableDrag(),n.removeEventListener(t.window,"mousemove",this.mousemove),n.removeEventListener(t.window,"mouseup",this.mouseup)},Pi.prototype.mousedown=function(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:function(){return e.preventDefault()}}),n.mousePos(this.element,e)),n.addEventListener(t.window,"mousemove",this.mousemove),n.addEventListener(t.window,"mouseup",this.mouseup)},Pi.prototype.mousemove=function(t){this.move(t,n.mousePos(this.element,t))},Pi.prototype.mouseup=function(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()},Pi.prototype.touchstart=function(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=n.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return t.preventDefault()}},this._startPos))},Pi.prototype.touchmove=function(t){1!==t.targetTouches.length?this.reset():(this._lastPos=n.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:function(){return t.preventDefault()}},this._lastPos))},Pi.prototype.touchend=function(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Pi.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Li={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ri(t,e,n){var r=t.classList;for(var i in Li)r.remove("mapboxgl-"+n+"-anchor-"+i);r.add("mapboxgl-"+n+"-anchor-"+e)}var Di,Ni=function(e){function r(r,i){if(e.call(this),(r instanceof t.window.HTMLElement||i)&&(r=t.extend({element:r},i)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&"auto"!==r.pitchAlignment?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=t.Point.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=n.create("div"),this._element.setAttribute("aria-label","Map marker");var o=n.createNS("http://www.w3.org/2000/svg","svg");o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height","41px"),o.setAttributeNS(null,"width","27px"),o.setAttributeNS(null,"viewBox","0 0 27 41");var a=n.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"stroke","none"),a.setAttributeNS(null,"stroke-width","1"),a.setAttributeNS(null,"fill","none"),a.setAttributeNS(null,"fill-rule","evenodd");var s=n.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");var u=n.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"transform","translate(3.0, 29.0)"),u.setAttributeNS(null,"fill","#000000");for(var c=0,l=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];c<l.length;c+=1){var f=l[c],p=n.createNS("http://www.w3.org/2000/svg","ellipse");p.setAttributeNS(null,"opacity","0.04"),p.setAttributeNS(null,"cx","10.5"),p.setAttributeNS(null,"cy","5.80029008"),p.setAttributeNS(null,"rx",f.rx),p.setAttributeNS(null,"ry",f.ry),u.appendChild(p)}var h=n.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"fill",this._color);var d=n.createNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),h.appendChild(d);var v=n.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"opacity","0.25"),v.setAttributeNS(null,"fill","#000000");var m=n.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),v.appendChild(m);var g=n.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","translate(6.0, 7.0)"),g.setAttributeNS(null,"fill","#FFFFFF");var y=n.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"transform","translate(8.0, 8.0)");var b=n.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#000000"),b.setAttributeNS(null,"opacity","0.25"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962");var _=n.createNS("http://www.w3.org/2000/svg","circle");_.setAttributeNS(null,"fill","#FFFFFF"),_.setAttributeNS(null,"cx","5.5"),_.setAttributeNS(null,"cy","5.5"),_.setAttributeNS(null,"r","5.4999962"),y.appendChild(b),y.appendChild(_),s.appendChild(u),s.appendChild(h),s.appendChild(v),s.appendChild(g),s.appendChild(y),o.appendChild(s),o.setAttributeNS(null,"height",41*this._scale+"px"),o.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(o),this._offset=t.Point.convert(r&&r.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(t){t.preventDefault()})),this._element.addEventListener("mousedown",(function(t){t.preventDefault()})),Ri(this._element,this._anchor,"marker"),this._popup=null}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},r.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},r.prototype.getElement=function(){return this._element},r.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},r.prototype._onKeyPress=function(t){var e=t.code,n=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==n&&13!==n||this.togglePopup()},r.prototype._onMapClick=function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},r.prototype.getPopup=function(){return this._popup},r.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},r.prototype._update=function(t){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Ii(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(e="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var r="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?r="rotateX(0deg)":"map"===this._pitchAlignment&&(r="rotateX("+this._map.getPitch()+"deg)"),t&&"moveend"!==t.type||(this._pos=this._pos.round()),n.setTransform(this._element,Li[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+r+" "+e)}},r.prototype.getOffset=function(){return this._offset},r.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},r.prototype._onMove=function(e){if(!this._isDragging){var n=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=n}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))},r.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},r.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},r.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},r.prototype.isDraggable=function(){return this._draggable},r.prototype.setRotation=function(t){return this._rotation=t||0,this._update(),this},r.prototype.getRotation=function(){return this._rotation},r.prototype.setRotationAlignment=function(t){return this._rotationAlignment=t||"auto",this._update(),this},r.prototype.getRotationAlignment=function(){return this._rotationAlignment},r.prototype.setPitchAlignment=function(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this},r.prototype.getPitchAlignment=function(){return this._pitchAlignment},r}(t.Evented),ji={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Fi=0,zi=!1,Bi=function(e){function r(n){e.call(this),this.options=t.extend({},ji,n),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.onAdd=function(e){var r;return this._map=e,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),r=this._setupUI,void 0!==Di?r(Di):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then((function(t){r(Di="denied"!==t.state)})):r(Di=!!t.window.navigator.geolocation),this._container},r.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),n.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Fi=0,zi=!1},r.prototype._isOutOfMapMaxBounds=function(t){var e=this._map.getMaxBounds(),n=t.coords;return e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())},r.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},r.prototype._onSuccess=function(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}},r.prototype._updateCamera=function(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude),r=e.coords.accuracy,i=this._map.getBearing(),o=t.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),o,{geolocateSource:!0})},r.prototype._updateMarker=function(e){if(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},r.prototype._updateCircleRadius=function(){var t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),n=this._map.unproject([1,t]),r=e.distanceTo(n),i=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=i+"px",this._circleElement.style.height=i+"px"},r.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},r.prototype._onError=function(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&zi)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}},r.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},r.prototype._setupUI=function(e){var r=this;if(this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this._geolocateButton=n.create("button","mapboxgl-ctrl-geolocate",this._container),n.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{var o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ni(this._dotElement),this._circleElement=n.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ni({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(e){e.geolocateSource||"ACTIVE_LOCK"!==r._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(r._watchState="BACKGROUND",r._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),r._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),r.fire(new t.Event("trackuserlocationend")))}))},r.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Fi--,zi=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Fi>1?(e={maximumAge:6e5,timeout:0},zi=!0):(e=this.options.positionOptions,zi=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},r.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},r}(t.Evented),Ui={maxWidth:100,unit:"metric"},Vi=function(e){this.options=t.extend({},Ui,e),t.bindAll(["_onMove","setUnit"],this)};function qi(t,e,n){var r=n&&n.maxWidth||100,i=t._container.clientHeight/2,o=t.unproject([0,i]),a=t.unproject([r,i]),s=o.distanceTo(a);if(n&&"imperial"===n.unit){var u=3.2808*s;u>5280?Gi(e,r,u/5280,t._getUIString("ScaleControl.Miles")):Gi(e,r,u,t._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?Gi(e,r,s/1852,t._getUIString("ScaleControl.NauticalMiles")):s>=1e3?Gi(e,r,s/1e3,t._getUIString("ScaleControl.Kilometers")):Gi(e,r,s,t._getUIString("ScaleControl.Meters"))}function Gi(t,e,n,r){var i,o,a,s=(i=n,(o=Math.pow(10,(""+Math.floor(i)).length-1))*(a=(a=i/o)>=10?10:a>=5?5:a>=3?3:a>=2?2:a>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(a)));t.style.width=e*(s/n)+"px",t.innerHTML=s+"&nbsp;"+r}Vi.prototype.getDefaultPosition=function(){return"bottom-left"},Vi.prototype._onMove=function(){qi(this._map,this._container,this.options)},Vi.prototype.onAdd=function(t){return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Vi.prototype.onRemove=function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Vi.prototype.setUnit=function(t){this.options.unit=t,qi(this._map,this._container,this.options)};var Hi=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};Hi.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Hi.prototype.onRemove=function(){n.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Hi.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Hi.prototype._setupUI=function(){var e=this._fullscreenButton=n.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);n.create("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Hi.prototype._updateTitle=function(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t},Hi.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Hi.prototype._isFullscreen=function(){return this._fullscreen},Hi.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Hi.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Wi={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Xi=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Zi=function(e){function r(n){e.call(this),this.options=t.extend(Object.create(Wi),n),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.addTo=function(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},r.prototype.isOpen=function(){return!!this._map},r.prototype.remove=function(){return this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},r.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},r.prototype.getElement=function(){return this._container},r.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},r.prototype.setHTML=function(e){var n,r=t.window.document.createDocumentFragment(),i=t.window.document.createElement("body");for(i.innerHTML=e;n=i.firstChild;)r.appendChild(n);return this.setDOMContent(r)},r.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},r.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},r.prototype.setDOMContent=function(t){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=n.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(t),this._createCloseButton(),this._update(),this._focusFirstElement(),this},r.prototype.addClassName=function(t){this._container&&this._container.classList.add(t)},r.prototype.removeClassName=function(t){this._container&&this._container.classList.remove(t)},r.prototype.setOffset=function(t){return this.options.offset=t,this._update(),this},r.prototype.toggleClassName=function(t){if(this._container)return this._container.classList.toggle(t)},r.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=n.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},r.prototype._onMouseUp=function(t){this._update(t.point)},r.prototype._onMouseMove=function(t){this._update(t.point)},r.prototype._onDrag=function(t){this._update(t.point)},r.prototype._update=function(e){var r=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=n.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=n.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(t){return r._container.classList.add(t)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ii(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||e)){var i=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat),o=this.options.anchor,a=function e(n){if(n){if("number"==typeof n){var r=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new t.Point(0,0),top:new t.Point(0,n),"top-left":new t.Point(r,r),"top-right":new t.Point(-r,r),bottom:new t.Point(0,-n),"bottom-left":new t.Point(r,-r),"bottom-right":new t.Point(-r,-r),left:new t.Point(n,0),right:new t.Point(-n,0)}}if(n instanceof t.Point||Array.isArray(n)){var i=t.Point.convert(n);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:t.Point.convert(n.center||[0,0]),top:t.Point.convert(n.top||[0,0]),"top-left":t.Point.convert(n["top-left"]||[0,0]),"top-right":t.Point.convert(n["top-right"]||[0,0]),bottom:t.Point.convert(n.bottom||[0,0]),"bottom-left":t.Point.convert(n["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(n["bottom-right"]||[0,0]),left:t.Point.convert(n.left||[0,0]),right:t.Point.convert(n.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!o){var s,u=this._container.offsetWidth,c=this._container.offsetHeight;s=i.y+a.bottom.y<c?["top"]:i.y>this._map.transform.height-c?["bottom"]:[],i.x<u/2?s.push("left"):i.x>this._map.transform.width-u/2&&s.push("right"),o=0===s.length?"bottom":s.join("-")}var l=i.add(a[o]).round();n.setTransform(this._container,Li[o]+" translate("+l.x+"px,"+l.y+"px)"),Ri(this._container,o,"popup")}},r.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var t=this._container.querySelector(Xi);t&&t.focus()}},r.prototype._onClose=function(){this.remove()},r}(t.Evented),Yi={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:Oi,NavigationControl:Mi,GeolocateControl:Bi,AttributionControl:bi,ScaleControl:Vi,FullscreenControl:Hi,Popup:Zi,Marker:Ni,Style:qe,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:function(){Ft().acquire(Rt)},clearPrewarmedResources:function(){var t=Nt;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(Rt),Nt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Dt.workerCount},set workerCount(t){Dt.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(e){t.clearTileCache(e)},workerUrl:""};return Yi})),n}))},I5Nx:function(t,e,n){"use strict";var r=n("HIsA"),i=n("O4tt"),o=n("NVMI"),a=n("2I03"),s=n("PaPB"),u=n("HKEF");r({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=o(this),n=a(e.length),r=u(e,0);return r.length=i(r,e,e,n,0,void 0===t?1:s(t)),r}})},I5X1:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("rRIJ"),i=n("xwgP"),o=n("Ogoc"),a=n.n(o),s=n("qwGt");function u(t,e){var n=Object(i["useContext"])(s["a"]),o=Object(i["useRef"])(e);o.current=e;var u=Object(i["useState"])((()=>o.current?o.current(n.data[t]):n.data[t])),c=Object(r["a"])(u,2),l=c[0],f=c[1],p=Object(i["useRef"])(l);p.current=l;var h=Object(i["useRef"])(!1);return Object(i["useEffect"])((()=>(h.current=!0,()=>{h.current=!1})),[]),Object(i["useEffect"])((()=>{var r=r=>{if(h.current)if(e&&o.current){var i=o.current(r),s=p.current;a()(i,s)||f(i)}else f(r);else setTimeout((()=>{n.data[t]=r,n.update(t)}))};try{n.callbacks[t].add(r),n.update(t)}catch(i){n.callbacks[t]=new Set,n.callbacks[t].add(r),n.update(t)}return()=>{n.callbacks[t].delete(r)}}),[t]),l}},I67C:function(t,e,n){var r,i,o,a,s,u,c,l,f=n("2JD6"),p=n("qmtO").f,h=n("IRht"),d=n("vYQ8").set,v=n("dpzy"),m=f.MutationObserver||f.WebKitMutationObserver,g=f.process,y=f.Promise,b="process"==h(g),_=p(f,"queueMicrotask"),x=_&&_.value;x||(r=function(){var t,e;b&&(t=g.domain)&&t.exit();while(i){e=i.fn,i=i.next;try{e()}catch(n){throw i?a():o=void 0,n}}o=void 0,t&&t.enter()},b?a=function(){g.nextTick(r)}:m&&!v?(s=!0,u=document.createTextNode(""),new m(r).observe(u,{characterData:!0}),a=function(){u.data=s=!s}):y&&y.resolve?(c=y.resolve(void 0),l=c.then,a=function(){l.call(c,r)}):a=function(){d.call(f,r)}),t.exports=x||function(t){var e={fn:t,next:void 0};o&&(o.next=e),i||(i=e,a()),o=e}},I77w:function(t,e){function n(t){return-1!==Function.toString.call(t).indexOf("[native code]")}t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},I9cW:function(t,e,n){},IDl8:function(t,e,n){var r=n("Hiyu"),i=n("7+LC"),o=n("riWr");t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},IKXP:function(t,e,n){"use strict";var r=n("HIsA"),i=n("PaPB"),o=n("4dmQ"),a=n("x+a2"),s=n("7+LC"),u=1..toFixed,c=Math.floor,l=function(t,e,n){return 0===e?n:e%2===1?l(t,e-1,n*t):l(t*t,e/2,n)},f=function(t){var e=0,n=t;while(n>=4096)e+=12,n/=4096;while(n>=2)e+=1,n/=2;return e},p=u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){u.call({})}));r({target:"Number",proto:!0,forced:p},{toFixed:function(t){var e,n,r,s,u=o(this),p=i(t),h=[0,0,0,0,0,0],d="",v="0",m=function(t,e){var n=-1,r=e;while(++n<6)r+=t*h[n],h[n]=r%1e7,r=c(r/1e7)},g=function(t){var e=6,n=0;while(--e>=0)n+=h[e],h[e]=c(n/t),n=n%t*1e7},y=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==h[t]){var n=String(h[t]);e=""===e?n:e+a.call("0",7-n.length)+n}return e};if(p<0||p>20)throw RangeError("Incorrect fraction digits");if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(d="-",u=-u),u>1e-21)if(e=f(u*l(2,69,1))-69,n=e<0?u*l(2,-e,1):u/l(2,e,1),n*=4503599627370496,e=52-e,e>0){m(0,n),r=p;while(r>=7)m(1e7,0),r-=7;m(l(10,r,1),0),r=e-1;while(r>=23)g(1<<23),r-=23;g(1<<r),m(1,1),g(2),v=y()}else m(0,n),m(1<<-e,0),v=y()+a.call("0",p);return p>0?(s=v.length,v=d+(s<=p?"0."+a.call("0",p-s)+v:v.slice(0,s-p)+"."+v.slice(s-p))):v=d+v,v}})},ILaO:function(t,e,n){"use strict";n.r(e);n("xmvT"),n("ygwf")},IQzM:function(t,e,n){},IRht:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},ITfU:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenSyntax=void 0;var r=n("zN6Y"),i=n("09fY"),o=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=i.namedConstraint(t),new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){var e=null!==t.target&&!t.target.isNamed()&&!t.target.isTagged();return e},new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=i.taggedConstraint(t)(e),new r.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return i.typeConstraint(t)(e.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return i.namedConstraint(t)(e.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return i.taggedConstraint(t)(e)(n.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return i.traverseAncerstors(e,i.typeConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!i.traverseAncerstors(e,i.typeConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return i.traverseAncerstors(e,i.namedConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!i.traverseAncerstors(e,i.namedConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return i.traverseAncerstors(n,i.taggedConstraint(t)(e))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return!i.traverseAncerstors(n,i.taggedConstraint(t)(e))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return i.traverseAncerstors(e,t)},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!i.traverseAncerstors(e,t)},new r.BindingOnSyntax(this._binding)},t}();e.BindingWhenSyntax=o},IU95:function(t,e,n){var r=n("HIsA"),i=n("hXyk"),o=n("1PaV"),a=n("afop"),s=n("twJ5"),u="Seeded Random",c=u+" Generator",l=s.set,f=s.getterFor(c),p='Math.seededPRNG() argument should have a "seed" field with a finite value.',h=a((function(t){l(this,{type:c,seed:t%2147483647})}),u,(function(){var t=f(this),e=t.seed=(1103515245*t.seed+12345)%2147483647;return{value:(1073741823&e)/1073741823,done:!1}}));r({target:"Math",stat:!0,forced:!0},{seededPRNG:function(t){var e=i(t).seed;if(!o(e))throw TypeError(p);return new h(e)}})},IXhw:function(t,e,n){var r=n("HIsA"),i=n("VeQJ");r({target:"Set",stat:!0},{of:i})},IZ4i:function(t,e,n){var r=n("vqXp"),i=n("tIv8"),o=n("WeNx"),a=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=a},Iph1:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"message",{enumerable:!0,get:function(){return r["default"]}}),Object.defineProperty(e,"notification",{enumerable:!0,get:function(){return i["default"]}}),n("VHnM");var r=o(n("lD53"));n("ILaO");var i=o(n("y5iR"));function o(t){return t&&t.__esModule?t:{default:t}}},Itlo:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagged=void 0;var r=n("rMkn"),i=n("ZLnY");function o(t,e){return function(n,o,a){var s=new r.Metadata(t,e);"number"===typeof a?i.tagParameter(n,o,a,s):i.tagProperty(n,o,s)}}e.tagged=o},Iu9s:function(t,e,n){"use strict";var r=n("7+LC");function i(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=r((function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=r((function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},Ixdt:function(t,e,n){var r=n("fQKG"),i=n("/DyB"),o=i((function(t,e,n){r(t,e,n)}));t.exports=o},IyCX:function(t,e,n){"use strict";n.d(e,"m",(function(){return a})),n.d(e,"a",(function(){return o})),n.d(e,"s",(function(){return Z})),n.d(e,"q",(function(){return Y})),n.d(e,"r",(function(){return J})),n.d(e,"o",(function(){return tt})),n.d(e,"B",(function(){return nt})),n.d(e,"u",(function(){return it})),n.d(e,"x",(function(){return ot})),n.d(e,"w",(function(){return at})),n.d(e,"t",(function(){return st})),n.d(e,"D",(function(){return ut})),n.d(e,"e",(function(){return ct})),n.d(e,"C",(function(){return lt})),n.d(e,"v",(function(){return ft})),n.d(e,"z",(function(){return pt})),n.d(e,"y",(function(){return ht})),n.d(e,"k",(function(){return dt})),n.d(e,"i",(function(){return vt})),n.d(e,"c",(function(){return mt})),n.d(e,"j",(function(){return gt})),n.d(e,"A",(function(){return _t})),n.d(e,"l",(function(){return xt})),n.d(e,"n",(function(){return wt})),n.d(e,"p",(function(){return Et})),n.d(e,"g",(function(){return yt})),n.d(e,"f",(function(){return St})),n.d(e,"h",(function(){return Ct})),n.d(e,"b",(function(){return r})),n.d(e,"d",(function(){return i}));var r={};n.r(r),n.d(r,"getContainer",(function(){return l})),n.d(r,"trim",(function(){return f})),n.d(r,"splitWords",(function(){return p})),n.d(r,"create",(function(){return d})),n.d(r,"remove",(function(){return v})),n.d(r,"addClass",(function(){return m})),n.d(r,"removeClass",(function(){return g})),n.d(r,"hasClass",(function(){return y})),n.d(r,"setClass",(function(){return b})),n.d(r,"getClass",(function(){return _})),n.d(r,"empty",(function(){return x})),n.d(r,"setTransform",(function(){return E})),n.d(r,"triggerResize",(function(){return S})),n.d(r,"printCanvas",(function(){return C})),n.d(r,"getViewPortScale",(function(){return T})),n.d(r,"DPR",(function(){return O}));var i={};function o(t){var e=131,n=137,r=0;t+="x";for(var i=Math.floor(9007199254740991/n),o=0;o<t.length;o++)r>i&&(r=Math.floor(r/n)),r=r*e+t.charCodeAt(o);return r}function a(t){t=t.toString();var e=5381,n=t.length;while(n)e=33*e^t.charCodeAt(--n);return e>>>0}n.r(i),n.d(i,"sum",(function(){return At})),n.d(i,"max",(function(){return Tt})),n.d(i,"min",(function(){return Ot})),n.d(i,"mean",(function(){return kt})),n.d(i,"mode",(function(){return Mt})),n.d(i,"statMap",(function(){return Pt})),n.d(i,"getColumn",(function(){return It})),n.d(i,"getSatByColumn",(function(){return Lt}));var s=n("m5Te"),u=n.n(s),c=window.document.documentElement.style;function l(t){var e=t;return"string"===typeof t&&(e=document.getElementById(t)),e}function f(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function p(t){return f(t).split(/\s+/)}function h(t){if(!c)return t[0];for(var e in t)if(t[e]&&t[e]in c)return t[e];return t[0]}function d(t,e,n){var r=document.createElement(t);return r.className=e||"",n&&n.appendChild(r),r}function v(t){var e=t.parentNode;e&&e.removeChild(t)}function m(t,e){if(void 0!==t.classList)for(var n=p(e),r=0,i=n.length;r<i;r++)t.classList.add(n[r]);else if(!y(t,e)){var o=_(t);b(t,(o?o+" ":"")+e)}}function g(t,e){void 0!==t.classList?t.classList.remove(e):b(t,f((" "+_(t)+" ").replace(" "+e+" "," ")))}function y(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=_(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function b(t,e){t instanceof HTMLElement?t.className=e:t.className.baseVal=e}function _(t){return t instanceof SVGElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function x(t){while(t&&t.firstChild)t.removeChild(t.firstChild)}var w=h(["transform","WebkitTransform"]);function E(t,e){t.style[w]=e}function S(){if("function"===typeof Event)window.dispatchEvent(new Event("resize"));else{var t=window.document.createEvent("UIEvents");t.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(t)}}function C(t){var e=["padding: "+(t.height/2-8)+"px "+t.width/2+"px;","line-height: "+t.height+"px;","background-image: url("+t.toDataURL()+");"];console.log("%c\n",e.join(""))}function T(){var t,e=document.querySelector('meta[name="viewport"]');if(!e)return 1;var n=null===(t=e.content)||void 0===t?void 0:t.split(","),r=n.find((function(t){var e=t.split("="),n=u()(e,2),r=n[0];n[1];return"initial-scale"===r}));return r?1*r.split("=")[1]:1}var O=T()<1?1:window.devicePixelRatio,A=n("txMq"),k=n.n(A),M=n("RgF4"),P=n.n(M),I=n("cZYw"),L=n.n(I),R=n("r9+l"),D=n.n(R),N=n("hbjN"),j=n.n(N),F=n("fI5W"),z=n.n(F),B=n("a/iU"),U=n.n(B),V=n("Xrqc"),q=n.n(V);function G(t){var e=H();return function(){var n,r=z()(t);if(e){var i=z()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return j()(this,n)}}function H(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var W=function(t){D()(n,t);var e=G(n);function n(t,r,i){var o;return k()(this,n),o=e.call(this,t),q()(L()(o),"status",void 0),q()(L()(o),"url",void 0),o.status=r,o.url=i,o.name=o.constructor.name,o.message=t,o}return P()(n,[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}]),n}(U()(Error));function X(t){var e=new XMLHttpRequest;for(var n in e.open("GET",t.url,!0),t.headers)t.headers.hasOwnProperty(n)&&e.setRequestHeader(n,t.headers[n]);return e.withCredentials="include"===t.credentials,e}var Z=function(t,e){var n=X(t);return n.setRequestHeader("Accept","application/json"),n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if(n.status>=200&&n.status<300&&n.response){var r;try{r=JSON.parse(n.response)}catch(i){return e(i)}e(null,r)}else 401===n.status?e(new W("".concat(n.statusText),n.status,t.url)):e(new W(n.statusText,n.status,t.url))},n.send(),n},Y=function(t,e){var n=X(t);return n.responseType="arraybuffer",n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){var r=n.response;if(0===r.byteLength&&200===n.status)return e(new Error("http status 200 returned without content."));n.status>=200&&n.status<300&&n.response?e(null,{data:r,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")}):e(new W(n.statusText,n.status,t.url))},n.send(),n};var K="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",J=function(t,e){return Y(t,(function(t,n){if(t)e(t);else if(n){var r=new window.Image;r.crossOrigin="anonymous";var i=window.URL||window.webkitURL;r.onload=function(){e(null,r),i.revokeObjectURL(r.src)};var o=new window.Blob([new Uint8Array(n.data)],{type:"image/png"});r.src=n.data.byteLength?i.createObjectURL(o):K}}))},Q=n("lqff"),$=2*Math.PI*6378137/2;function tt(t){var e=[1/0,1/0,-1/0,-1/0];return t.forEach((function(t){var n=t.coordinates;et(e,n)})),e}function et(t,e){return Array.isArray(e[0])?e.forEach((function(e){et(t,e)})):(t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])),t}function nt(t,e){return rt(t,e)}function rt(t,e){return Array.isArray(t[0])?t.map((function(t){return rt(t,e)})):e(t)}function it(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{enable:!0,decimal:1};t=ut(t,e);var r=t[0],i=t[1],o=r*$/180,a=Math.log(Math.tan((90+i)*Math.PI/360))/(Math.PI/180);return a=a*$/180,n.enable&&(o=Number(o.toFixed(n.decimal)),a=Number(a.toFixed(n.decimal))),3===t.length?[o,a,t[2]]:[o,a]}function ot(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=t[0],r=t[1],i=n/$*180,o=r/$*180;return o=180/Math.PI*(2*Math.atan(Math.exp(o*Math.PI/180))-Math.PI/2),void 0!==e&&null!==e&&(i=Number(i.toFixed(e)),o=Number(o.toFixed(e))),3===t.length?[i,o,t[2]]:[i,o]}function at(t){if(void 0===t||null===t)throw new Error("lng is required");return(t>180||t<-180)&&(t%=360,t>180&&(t=-360+t),t<-180&&(t=360+t),0===t&&(t=0)),t}function st(t){if(void 0===t||null===t)throw new Error("lat is required");return(t>90||t<-90)&&(t%=180,t>90&&(t=-180+t),t<-90&&(t=180+t),0===t&&(t=0)),t}function ut(t,e){if(!1===e)return t;var n=at(t[0]),r=st(t[1]);return r>85&&(r=85),r<-85&&(r=-85),3===t.length?[n,r,t[2]]:[n,r]}function ct(t){var e=85.0511287798,n=Math.max(Math.min(e,t[1]),-e),r=256<<20,i=Math.PI/180,o=t[0]*i,a=n*i;a=Math.log(Math.tan(Math.PI/4+a/2));var s=.5/Math.PI,u=.5,c=-.5/Math.PI;return i=.5,o=r*(s*o+u),a=r*(c*a+i),[Math.floor(o),Math.floor(a)]}function lt(t){var e=.5/Math.PI,n=.5,r=-.5/Math.PI,i=.5,o=256<<20,a=u()(t,2),s=a[0],c=a[1];s=(s/o-n)/e,c=(c/o-i)/r,c=2*(Math.atan(Math.pow(Math.E,c))-Math.PI/4),i=Math.PI/180;var l=c/i,f=s/i;return[f,l]}function ft(t,e,n){var r=Object(Q["a"])(e[1]-t[1]),i=Object(Q["a"])(e[0]-t[0]),o=Object(Q["a"])(t[1]),a=Object(Q["a"])(e[1]),s=Math.pow(Math.sin(r/2),2)+Math.pow(Math.sin(i/2),2)*Math.cos(o)*Math.cos(a);return Object(Q["k"])(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)),"meters")}function pt(t){var e=Math.PI/180,n=85.0511287798,r=6378137,i=Math.max(Math.min(n,t[1]),-n),o=Math.sin(i*e),a=r*t[0]*e,s=r*Math.log((1+o)/(1-o))/2;return[a,s]}function ht(t,e){var n=Math.abs(t[1][1]-t[0][1])*e,r=Math.abs(t[1][0]-t[0][0])*e;return[[t[0][0]-r,t[0][1]-n],[t[1][0]+r,t[1][1]+n]]}function dt(t,e){return t[0][0]<=e[0][0]&&t[0][1]<=e[0][1]&&t[1][0]>=e[1][0]&&t[1][1]>=e[1][1]}function vt(t){return[[t[0],t[1]],[t[2],t[3]]]}var mt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,n=arguments.length>1?arguments[1]:void 0;k()(this,t),q()(this,"limit",void 0),q()(this,"cache",void 0),q()(this,"destroy",void 0),q()(this,"order",void 0),this.limit=e,this.destroy=n||this.defaultDestroy,this.order=[],this.clear()}return P()(t,[{key:"clear",value:function(){var t=this;this.order.forEach((function(e){t["delete"](e)})),this.cache={},this.order=[]}},{key:"get",value:function(t){var e=this.cache[t];return e&&(this.deleteOrder(t),this.appendOrder(t)),e}},{key:"set",value:function(t,e){this.cache[t]?(this["delete"](t),this.cache[t]=e,this.appendOrder(t)):(Object.keys(this.cache).length===this.limit&&this["delete"](this.order[0]),this.cache[t]=e,this.appendOrder(t))}},{key:"delete",value:function(t){var e=this.cache[t];e&&(this.deleteCache(t),this.deleteOrder(t),this.destroy(e,t))}},{key:"deleteCache",value:function(t){delete this.cache[t]}},{key:"deleteOrder",value:function(t){var e=this.order.findIndex((function(e){return e===t}));e>=0&&this.order.splice(e,1)}},{key:"appendOrder",value:function(t){this.order.push(t)}},{key:"defaultDestroy",value:function(t,e){return null}}]),t}();function gt(t,e){t.forEach((function(t){e[t]&&(e[t]=e[t].bind(e))}))}var yt,bt=n("GfBb");function _t(t){var e=bt["a"](t),n=[0,0,0,0];return null!=e&&(n[0]=e.r/255,n[1]=e.g/255,n[2]=e.b/255,n[3]=e.opacity),n}function xt(t){var e=t&&t[0],n=t&&t[1],r=t&&t[2],i=e+256*n+65536*r-1;return i}function wt(t){return[t+1&255,t+1>>8&255,t+1>>8>>8&255]}function Et(t){var e=document.createElement("canvas"),n=e.getContext("2d");e.width=256,e.height=1;for(var r=n.createLinearGradient(0,0,256,1),i=null,o=t.positions[0],a=t.positions[t.positions.length-1],s=0;s<t.colors.length;++s){var u=(t.positions[s]-o)/(a-o);r.addColorStop(u,t.colors[s])}return n.fillStyle=r,n.fillRect(0,0,256,1),i=new Uint8ClampedArray(n.getImageData(0,0,256,1).data),new ImageData(i,256,1)}(function(t){t["CENTER"]="center",t["TOP"]="top",t["TOP-LEFT"]="top-left",t["TOP-RIGHT"]="top-right",t["BOTTOM"]="bottom",t["BOTTOM-LEFT"]="bottom-left",t["LEFT"]="left",t["RIGHT"]="right"})(yt||(yt={}));var St={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ct(t,e,n){var r=t.classList;for(var i in St)St.hasOwnProperty(i)&&r.remove("l7-".concat(n,"-anchor-").concat(i));r.add("l7-".concat(n,"-anchor-").concat(e))}function Tt(t){if(0===t.length)throw new Error("max requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]>e&&(e=t[n]);return 1*e}function Ot(t){if(0===t.length)throw new Error("min requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]<e&&(e=t[n]);return 1*e}function At(t){if(0===t.length)return 0;for(var e=1*t[0],n=1;n<t.length;n++)e+=1*t[n];return e}function kt(t){if(0===t.length)throw new Error("mean requires at least one data point");return At(t)/t.length}function Mt(t){if(0===t.length)throw new Error("mean requires at least one data point");if(t.length<3)return t[0];t.sort();for(var e=t[0],n=NaN,r=0,i=1,o=1;o<t.length+1;o++)t[o]!==e?(i>r&&(r=i,n=e),i=1,e=t[o]):i++;return 1*n}var Pt={min:Ot,max:Tt,mean:kt,sum:At,mode:Mt};function It(t,e){return t.map((function(t){return t[e]}))}function Lt(t,e){return Pt[t](e)}},IzJh:function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",(function(){return r}))},J6EZ:function(t,e,n){var r=n("bVFb");r("split")},J7X1:function(t,e,n){var r=n("2RC6").f,i=n("+qhb"),o=n("kPvK"),a=o("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,a)&&r(t,a,{configurable:!0,value:e})}},J9FK:function(t,e,n){"use strict";function r(t,e,n){n=n||2;var r,o,s,u,c,l,p,h=e&&e.length,d=h?e[0]*n:t.length,v=i(t,0,d,n,!0),m=[];if(!v||v.next===v.prev)return m;if(h&&(v=f(t,e,v,n)),t.length>80*n){r=s=t[0],o=u=t[1];for(var g=n;g<d;g+=n)c=t[g],l=t[g+1],c<r&&(r=c),l<o&&(o=l),c>s&&(s=c),l>u&&(u=l);p=Math.max(s-r,u-o),p=0!==p?1/p:0}return a(v,m,n,r,o,p),m}function i(t,e,n,r,i){var o,a;if(i===R(t,e,n,r)>0)for(o=e;o<n;o+=r)a=P(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=P(o,t[o],t[o+1],a);return a&&E(a,a.next)&&(I(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!E(r,r.next)&&0!==w(r.prev,r,r.next))r=r.next;else{if(I(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function a(t,e,n,r,i,f,p){if(t){!p&&f&&m(t,r,i,f);var h,d,v=t;while(t.prev!==t.next)if(h=t.prev,d=t.next,f?u(t,r,i,f):s(t))e.push(h.i/n),e.push(t.i/n),e.push(d.i/n),I(t),t=d.next,v=d.next;else if(t=d,t===v){p?1===p?(t=c(o(t),e,n),a(t,e,n,r,i,f,2)):2===p&&l(t,e,n,r,i,f):a(o(t),e,n,r,i,f,1);break}}}function s(t){var e=t.prev,n=t,r=t.next;if(w(e,n,r)>=0)return!1;var i=t.next.next;while(i!==t.prev){if(_(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&w(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(t,e,n,r){var i=t.prev,o=t,a=t.next;if(w(i,o,a)>=0)return!1;var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=y(s,u,e,n,r),p=y(c,l,e,n,r),h=t.prevZ,d=t.nextZ;while(h&&h.z>=f&&d&&d.z<=p){if(h!==t.prev&&h!==t.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&w(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,d!==t.prev&&d!==t.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&w(d.prev,d,d.next)>=0)return!1;d=d.nextZ}while(h&&h.z>=f){if(h!==t.prev&&h!==t.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&w(h.prev,h,h.next)>=0)return!1;h=h.prevZ}while(d&&d.z<=p){if(d!==t.prev&&d!==t.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&w(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function c(t,e,n){var r=t;do{var i=r.prev,a=r.next.next;!E(i,a)&&S(i,r,r.next,a)&&A(i,a)&&A(a,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(a.i/n),I(r),I(r.next),r=t=a),r=r.next}while(r!==t);return o(r)}function l(t,e,n,r,i,s){var u=t;do{var c=u.next.next;while(c!==u.prev){if(u.i!==c.i&&x(u,c)){var l=M(u,c);return u=o(u,u.next),l=o(l,l.next),a(u,e,n,r,i,s),void a(l,e,n,r,i,s)}c=c.next}u=u.next}while(u!==t)}function f(t,e,n,r){var a,s,u,c,l,f=[];for(a=0,s=e.length;a<s;a++)u=e[a]*r,c=a<s-1?e[a+1]*r:t.length,l=i(t,u,c,r,!1),l===l.next&&(l.steiner=!0),f.push(b(l));for(f.sort(p),a=0;a<f.length;a++)n=h(f[a],n),n=o(n,n.next);return n}function p(t,e){return t.x-e.x}function h(t,e){var n=d(t,e);if(!n)return e;var r=M(n,t),i=o(n,n.next);return o(r,r.next),e===n?i:e}function d(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n;var u,c=n,l=n.x,f=n.y,p=1/0;r=n;do{i>=r.x&&r.x>=l&&i!==r.x&&_(o<f?i:a,o,l,f,o<f?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),A(r,t)&&(u<p||u===p&&(r.x>n.x||r.x===n.x&&v(n,r)))&&(n=r,p=u)),r=r.next}while(r!==c);return n}function v(t,e){return w(t.prev,t,e.prev)<0&&w(e.next,t,t.next)<0}function m(t,e,n,r){var i=t;do{null===i.z&&(i.z=y(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,g(i)}function g(t){var e,n,r,i,o,a,s,u,c=1;do{n=t,t=null,o=null,a=0;while(n){for(a++,r=n,s=0,e=0;e<c;e++)if(s++,r=r.nextZ,!r)break;u=c;while(s>0||u>0&&r)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1);return t}function y(t,e,n,r,i){return t=32767*(t-n)*i,e=32767*(e-r)*i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function b(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function _(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function x(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!O(t,e)&&(A(t,e)&&A(e,t)&&k(t,e)&&(w(t.prev,t,e.prev)||w(t,e.prev,e))||E(t,e)&&w(t.prev,t,t.next)>0&&w(e.prev,e,e.next)>0)}function w(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function E(t,e){return t.x===e.x&&t.y===e.y}function S(t,e,n,r){var i=T(w(t,e,n)),o=T(w(t,e,r)),a=T(w(n,r,t)),s=T(w(n,r,e));return i!==o&&a!==s||(!(0!==i||!C(t,n,e))||(!(0!==o||!C(t,r,e))||(!(0!==a||!C(n,t,r))||!(0!==s||!C(n,e,r)))))}function C(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function T(t){return t>0?1:t<0?-1:0}function O(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&S(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function A(t,e){return w(t.prev,t,t.next)<0?w(t,e,t.next)>=0&&w(t,t.prev,e)>=0:w(t,e,t.prev)<0||w(t,t.next,e)<0}function k(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}function M(t,e){var n=new L(t.i,t.x,t.y),r=new L(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function P(t,e,n,r){var i=new L(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function I(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function L(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function R(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}t.exports=r,t.exports["default"]=r,r.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(R(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var c=e[s]*n,l=s<u-1?e[s+1]*n:t.length;a-=Math.abs(R(t,c,l,n))}var f=0;for(s=0;s<r.length;s+=3){var p=r[s]*n,h=r[s+1]*n,d=r[s+2]*n;f+=Math.abs((t[p]-t[d])*(t[h+1]-t[p+1])-(t[p]-t[h])*(t[d+1]-t[p+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},r.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},JDxl:function(t,e,n){"use strict";var r=n("m5Te");function i(){var t=n("xwgP");return i=function(){return t},t}function o(){var t=s(n("x2v5"));return o=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=s(n("+pX7"));function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e){return h(t)||p(t,e)||l(t,e)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t,e){if(t){if("string"===typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function h(t){if(Array.isArray(t))return t}function d(t,e,n){return Object.entries(o()["default"][t]).reduce((function(t,i){var o=r(i,2),a=o[0],s=o[1];return t[a]=s.map((function(t){var r=Object.assign({},t);return Object.keys(t).forEach((function(t){if(/^description(\.|$)/.test(t)){var i=t.match(/^description\.?(.*)$/),o=u(i,2),a=o[1];a&&a!==e||!a&&!n?delete r[t]:r.description=r[t]}})),r})),t}),{})}var v=function(t){var e=(0,i().useContext)(a["default"]),n=e.locale,r=e.config.locales,o=!r.length||r[0].name===n,s=(0,i().useState)(d(t,n,o)),c=u(s,2),l=c[0],f=c[1];return(0,i().useEffect)((function(){f(d(t,n,o))}),[t,n,o]),l};e["default"]=v},JENe:function(t,e,n){var r=n("HIsA"),i=n("5AZ8");r({target:"WeakSet",stat:!0},{from:i})},JY8B:function(t,e,n){var r=n("kPvK"),i=n("bWCM"),o=n("2RC6"),a=r("unscopables"),s=Array.prototype;void 0==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),t.exports=function(t){s[a][t]=!0}},Ji6T:function(t,e,n){var r=n("hXyk"),i=n("mKn/"),o=n("2I03"),a=n("40mc"),s=n("tg/3"),u=n("acWz"),c=function(t,e){this.stopped=t,this.result=e},l=t.exports=function(t,e,n,l,f){var p,h,d,v,m,g,y,b=a(e,n,l?2:1);if(f)p=t;else{if(h=s(t),"function"!=typeof h)throw TypeError("Target is not iterable");if(i(h)){for(d=0,v=o(t.length);v>d;d++)if(m=l?b(r(y=t[d])[0],y[1]):b(t[d]),m&&m instanceof c)return m;return new c(!1)}p=h.call(t)}g=p.next;while(!(y=g.call(p)).done)if(m=u(p,b,y.value,l),"object"==typeof m&&m&&m instanceof c)return m;return new c(!1)};l.stop=function(t){return new c(!0,t)}},Jibm:function(t,e){function n(){return[]}t.exports=n},Jjhy:function(t,e){var n=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function r(t){return n.test(t)}t.exports=r},JofH:function(t,e,n){var r=n("7Mx0"),i=n("qhWv");function o(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=i(n),n=n===n?n:0),void 0!==e&&(e=i(e),e=e===e?e:0),r(i(t),e,n)}t.exports=o},JqKL:function(t,e,n){"use strict";var r=n("HIsA"),i=n("2JD6"),o=n("Hiyu"),a=n("pMf/"),s=n("Wp5u"),u=n("HC6f"),c=n("xOST"),l=n("OLna"),f=n("D8FR"),p=n("2I03"),h=n("PM2V"),d=n("eusP"),v=n("n2ef"),m=n("+qhb"),g=n("KpHK"),y=n("pxmn"),b=n("bWCM"),_=n("UPu9"),x=n("szjD").f,w=n("b4JQ"),E=n("Xf1w").forEach,S=n("QD/U"),C=n("2RC6"),T=n("qmtO"),O=n("twJ5"),A=n("cGOV"),k=O.get,M=O.set,P=C.f,I=T.f,L=Math.round,R=i.RangeError,D=u.ArrayBuffer,N=u.DataView,j=s.NATIVE_ARRAY_BUFFER_VIEWS,F=s.TYPED_ARRAY_TAG,z=s.TypedArray,B=s.TypedArrayPrototype,U=s.aTypedArrayConstructor,V=s.isTypedArray,q="BYTES_PER_ELEMENT",G="Wrong length",H=function(t,e){var n=0,r=e.length,i=new(U(t))(r);while(r>n)i[n]=e[n++];return i},W=function(t,e){P(t,e,{get:function(){return k(this)[e]}})},X=function(t){var e;return t instanceof D||"ArrayBuffer"==(e=g(t))||"SharedArrayBuffer"==e},Z=function(t,e){return V(t)&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Y=function(t,e){return Z(t,e=v(e,!0))?l(2,t[e]):I(t,e)},K=function(t,e,n){return!(Z(t,e=v(e,!0))&&y(n)&&m(n,"value"))||m(n,"get")||m(n,"set")||n.configurable||m(n,"writable")&&!n.writable||m(n,"enumerable")&&!n.enumerable?P(t,e,n):(t[e]=n.value,t)};o?(j||(T.f=Y,C.f=K,W(B,"buffer"),W(B,"byteOffset"),W(B,"byteLength"),W(B,"length")),r({target:"Object",stat:!0,forced:!j},{getOwnPropertyDescriptor:Y,defineProperty:K}),t.exports=function(t,e,n){var o=t.match(/\d+$/)[0]/8,s=t+(n?"Clamped":"")+"Array",u="get"+t,l="set"+t,v=i[s],m=v,g=m&&m.prototype,C={},T=function(t,e){var n=k(t);return n.view[u](e*o+n.byteOffset,!0)},O=function(t,e,r){var i=k(t);n&&(r=(r=L(r))<0?0:r>255?255:255&r),i.view[l](e*o+i.byteOffset,r,!0)},I=function(t,e){P(t,e,{get:function(){return T(this,e)},set:function(t){return O(this,e,t)},enumerable:!0})};j?a&&(m=e((function(t,e,n,r){return c(t,m,s),A(function(){return y(e)?X(e)?void 0!==r?new v(e,d(n,o),r):void 0!==n?new v(e,d(n,o)):new v(e):V(e)?H(m,e):w.call(m,e):new v(h(e))}(),t,m)})),_&&_(m,z),E(x(v),(function(t){t in m||f(m,t,v[t])})),m.prototype=g):(m=e((function(t,e,n,r){c(t,m,s);var i,a,u,l=0,f=0;if(y(e)){if(!X(e))return V(e)?H(m,e):w.call(m,e);i=e,f=d(n,o);var v=e.byteLength;if(void 0===r){if(v%o)throw R(G);if(a=v-f,a<0)throw R(G)}else if(a=p(r)*o,a+f>v)throw R(G);u=a/o}else u=h(e),a=u*o,i=new D(a);M(t,{buffer:i,byteOffset:f,byteLength:a,length:u,view:new N(i)});while(l<u)I(t,l++)})),_&&_(m,z),g=m.prototype=b(B)),g.constructor!==m&&f(g,"constructor",m),F&&f(g,F,s),C[s]=m,r({global:!0,forced:m!=v,sham:!j},C),q in m||f(m,q,o),q in g||f(g,q,o),S(s)}):t.exports=function(){}},JsUm:function(t,e,n){var r=n("QSfS");function i(){this.__data__=new r,this.size=0}t.exports=i},"JuV/":function(t,e,n){"use strict";n.d(e,"a",(function(){return pt}));var r=n("FpZt"),i=n("TWOK"),o=n("rRIJ"),a=n("uMeh"),s=n("xwgP"),u=n("30a0"),c=n("67H3"),l=n("jK+o"),f=n.n(l),p=n("SUfK");function h(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit".concat(t)]="webkit".concat(e),n["Moz".concat(t)]="moz".concat(e),n["ms".concat(t)]="MS".concat(e),n["O".concat(t)]="o".concat(e.toLowerCase()),n}function d(t,e){var n={animationend:h("Animation","AnimationEnd"),transitionend:h("Transition","TransitionEnd")};return t&&("AnimationEvent"in e||delete n.animationend.animation,"TransitionEvent"in e||delete n.transitionend.transition),n}var v=d(Object(p["a"])(),"undefined"!==typeof window?window:{}),m={};if(Object(p["a"])()){var g=document.createElement("div");m=g.style}var y={};function b(t){if(y[t])return y[t];var e=v[t];if(e)for(var n=Object.keys(e),r=n.length,i=0;i<r;i+=1){var o=n[i];if(Object.prototype.hasOwnProperty.call(e,o)&&o in m)return y[t]=e[o],y[t]}return""}var _=b("animationend"),x=b("transitionend"),w=!(!_||!x),E=_||"animationend",S=x||"transitionend";function C(t,e){if(!t)return null;if("object"===Object(a["a"])(t)){var n=e.replace(/-\w/g,(function(t){return t[1].toUpperCase()}));return t[n]}return"".concat(t,"-").concat(e)}var T="none",O="appear",A="enter",k="leave",M="none",P="prepare",I="start",L="active",R="end";function D(t){var e=Object(s["useRef"])(!1),n=Object(s["useState"])(t),r=Object(o["a"])(n,2),i=r[0],a=r[1];function u(t){e.current||a(t)}return Object(s["useEffect"])((function(){return function(){e.current=!0}}),[]),[i,u]}var N=Object(p["a"])()?s["useLayoutEffect"]:s["useEffect"],j=N,F=n("ZOCG"),z=function(){var t=s["useRef"](null);function e(){F["a"].cancel(t.current)}function n(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;e();var o=Object(F["a"])((function(){i<=1?r({isCanceled:function(){return o!==t.current}}):n(r,i-1)}));t.current=o}return s["useEffect"]((function(){return function(){e()}}),[]),[n,e]},B=[P,I,L,R],U=!1,V=!0;function q(t){return t===L||t===R}var G=function(t,e){var n=s["useState"](M),r=Object(o["a"])(n,2),i=r[0],a=r[1],u=z(),c=Object(o["a"])(u,2),l=c[0],f=c[1];function p(){a(P)}return j((function(){if(i!==M&&i!==R){var t=B.indexOf(i),n=B[t+1],r=e(i);r===U?a(n):l((function(t){function e(){t.isCanceled()||a(n)}!0===r?e():Promise.resolve(r).then(e)}))}}),[t,i]),s["useEffect"]((function(){return function(){f()}}),[]),[p,i]},H=function(t){var e=Object(s["useRef"])(),n=Object(s["useRef"])(t);n.current=t;var r=s["useCallback"]((function(t){n.current(t)}),[]);function i(t){t&&(t.removeEventListener(S,r),t.removeEventListener(E,r))}function o(t){e.current&&e.current!==t&&i(e.current),t&&t!==e.current&&(t.addEventListener(S,r),t.addEventListener(E,r),e.current=t)}return s["useEffect"]((function(){return function(){i(e.current)}}),[]),[o,i]};function W(t,e,n,a){var u=a.motionEnter,c=void 0===u||u,l=a.motionAppear,f=void 0===l||l,p=a.motionLeave,h=void 0===p||p,d=a.motionDeadline,v=a.motionLeaveImmediately,m=a.onAppearPrepare,g=a.onEnterPrepare,y=a.onLeavePrepare,b=a.onAppearStart,_=a.onEnterStart,x=a.onLeaveStart,w=a.onAppearActive,E=a.onEnterActive,S=a.onLeaveActive,C=a.onAppearEnd,M=a.onEnterEnd,R=a.onLeaveEnd,N=a.onVisibleChanged,F=D(),z=Object(o["a"])(F,2),B=z[0],W=z[1],X=D(T),Z=Object(o["a"])(X,2),Y=Z[0],K=Z[1],J=D(null),Q=Object(o["a"])(J,2),$=Q[0],tt=Q[1],et=Object(s["useRef"])(!1),nt=Object(s["useRef"])(null),rt=Object(s["useRef"])(!1),it=Object(s["useRef"])(null);function ot(){var t=n();return t||it.current}var at=Object(s["useRef"])(!1);function st(t){var e,n=ot();t&&!t.deadline&&t.target!==n||(Y===O&&at.current?e=null===C||void 0===C?void 0:C(n,t):Y===A&&at.current?e=null===M||void 0===M?void 0:M(n,t):Y===k&&at.current&&(e=null===R||void 0===R?void 0:R(n,t)),!1===e||rt.current||(K(T),tt(null)))}var ut=H(st),ct=Object(o["a"])(ut,1),lt=ct[0],ft=s["useMemo"]((function(){var t,e,n;switch(Y){case"appear":return t={},Object(r["a"])(t,P,m),Object(r["a"])(t,I,b),Object(r["a"])(t,L,w),t;case"enter":return e={},Object(r["a"])(e,P,g),Object(r["a"])(e,I,_),Object(r["a"])(e,L,E),e;case"leave":return n={},Object(r["a"])(n,P,y),Object(r["a"])(n,I,x),Object(r["a"])(n,L,S),n;default:return{}}}),[Y]),pt=G(Y,(function(t){if(t===P){var e=ft[P];return e?e(ot()):U}var n;vt in ft&&tt((null===(n=ft[vt])||void 0===n?void 0:n.call(ft,ot(),null))||null);return vt===L&&(lt(ot()),d>0&&(clearTimeout(nt.current),nt.current=setTimeout((function(){st({deadline:!0})}),d))),V})),ht=Object(o["a"])(pt,2),dt=ht[0],vt=ht[1],mt=q(vt);at.current=mt,j((function(){W(e);var n,r=et.current;(et.current=!0,t)&&(!r&&e&&f&&(n=O),r&&e&&c&&(n=A),(r&&!e&&h||!r&&v&&!e&&h)&&(n=k),n&&(K(n),dt()))}),[e]),Object(s["useEffect"])((function(){(Y===O&&!f||Y===A&&!c||Y===k&&!h)&&K(T)}),[f,c,h]),Object(s["useEffect"])((function(){return function(){clearTimeout(nt.current),rt.current=!0}}),[]),Object(s["useEffect"])((function(){void 0!==B&&Y===T&&(null===N||void 0===N||N(B))}),[B,Y]);var gt=$;return ft[P]&&vt===I&&(gt=Object(i["a"])({transition:"none"},gt)),[Y,vt,gt,null!==B&&void 0!==B?B:e]}var X=n("kUw8"),Z=n("nKrB"),Y=n("XF5O"),K=n("tST3"),J=function(t){Object(Y["a"])(n,t);var e=Object(K["a"])(n);function n(){return Object(X["a"])(this,n),e.apply(this,arguments)}return Object(Z["a"])(n,[{key:"render",value:function(){return this.props.children}}]),n}(s["Component"]),Q=J;function $(t){var e=t;function n(t){return!(!t.motionName||!e)}"object"===Object(a["a"])(t)&&(e=t.transitionSupport);var l=s["forwardRef"]((function(t,e){var a=t.visible,l=void 0===a||a,p=t.removeOnLeave,h=void 0===p||p,d=t.forceRender,v=t.children,m=t.motionName,g=t.leavedClassName,y=t.eventProps,b=n(t),_=Object(s["useRef"])(),x=Object(s["useRef"])();function w(){try{return Object(u["a"])(_.current||x.current)}catch(t){return null}}var E=W(b,l,w,t),S=Object(o["a"])(E,4),O=S[0],A=S[1],k=S[2],M=S[3],L=s["useRef"](M);M&&(L.current=!0);var R=Object(s["useRef"])(e);R.current=e;var D,N=s["useCallback"]((function(t){_.current=t,Object(c["b"])(R.current,t)}),[]),j=Object(i["a"])(Object(i["a"])({},y),{},{visible:l});if(v)if(O!==T&&n(t)){var F,z;A===P?z="prepare":q(A)?z="active":A===I&&(z="start"),D=v(Object(i["a"])(Object(i["a"])({},j),{},{className:f()(C(m,O),(F={},Object(r["a"])(F,C(m,"".concat(O,"-").concat(z)),z),Object(r["a"])(F,m,"string"===typeof m),F)),style:k}),N)}else D=M?v(Object(i["a"])({},j),N):!h&&L.current?v(Object(i["a"])(Object(i["a"])({},j),{},{className:g}),N):d?v(Object(i["a"])(Object(i["a"])({},j),{},{style:{display:"none"}}),N):null;else D=null;return s["createElement"](Q,{ref:x},D)}));return l.displayName="CSSMotion",l}var tt=$(w),et=n("M2Sr"),nt=n("8tFq"),rt="add",it="keep",ot="remove",at="removed";function st(t){var e;return e=t&&"object"===Object(a["a"])(t)&&"key"in t?t:{key:t},Object(i["a"])(Object(i["a"])({},e),{},{key:String(e.key)})}function ut(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map(st)}function ct(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,o=e.length,a=ut(t),s=ut(e);a.forEach((function(t){for(var e=!1,a=r;a<o;a+=1){var u=s[a];if(u.key===t.key){r<a&&(n=n.concat(s.slice(r,a).map((function(t){return Object(i["a"])(Object(i["a"])({},t),{},{status:rt})}))),r=a),n.push(Object(i["a"])(Object(i["a"])({},u),{},{status:it})),r+=1,e=!0;break}}e||n.push(Object(i["a"])(Object(i["a"])({},t),{},{status:ot}))})),r<o&&(n=n.concat(s.slice(r).map((function(t){return Object(i["a"])(Object(i["a"])({},t),{},{status:rt})}))));var u={};n.forEach((function(t){var e=t.key;u[e]=(u[e]||0)+1}));var c=Object.keys(u).filter((function(t){return u[t]>1}));return c.forEach((function(t){n=n.filter((function(e){var n=e.key,r=e.status;return n!==t||r!==ot})),n.forEach((function(e){e.key===t&&(e.status=it)}))})),n}var lt=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function ft(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tt,n=function(t){Object(Y["a"])(r,t);var n=Object(K["a"])(r);function r(){var t;return Object(X["a"])(this,r),t=n.apply(this,arguments),t.state={keyEntities:[]},t.removeKey=function(e){t.setState((function(t){var n=t.keyEntities;return{keyEntities:n.map((function(t){return t.key!==e?t:Object(i["a"])(Object(i["a"])({},t),{},{status:at})}))}}))},t}return Object(Z["a"])(r,[{key:"render",value:function(){var t=this,n=this.state.keyEntities,r=this.props,i=r.component,o=r.children,a=r.onVisibleChanged,u=Object(nt["a"])(r,["component","children","onVisibleChanged"]),c=i||s["Fragment"],l={};return lt.forEach((function(t){l[t]=u[t],delete u[t]})),delete u.keys,s["createElement"](c,u,n.map((function(n){var r=n.status,i=Object(nt["a"])(n,["status"]),u=r===rt||r===it;return s["createElement"](e,Object(et["a"])({},l,{key:i.key,visible:u,eventProps:i,onVisibleChanged:function(e){null===a||void 0===a||a(e,{key:i.key}),e||t.removeKey(i.key)}}),o)})))}}],[{key:"getDerivedStateFromProps",value:function(t,e){var n=t.keys,r=e.keyEntities,i=ut(n),o=ct(r,i);return{keyEntities:o.filter((function(t){var e=r.find((function(e){var n=e.key;return t.key===n}));return!e||e.status!==at||t.status!==ot}))}}}]),r}(s["Component"]);return n.defaultProps={component:"div"},n}var pt=ft(w);e["b"]=tt},JuhJ:function(t,e,n){"use strict";function r(){var t=o(n("xwgP"));return r=function(){return t},t}function i(){var t=n("OS9G");return i=function(){return t},t}function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var c=function(t,e){var n=[],o=t.match.params.uuid,a=void 0===t.location.query.wrapper,u=e[o];if(u){var c=s(s({},u.previewerProps),{},{hideActions:(u.previewerProps.hideActions||[]).concat(["EXTERNAL"])});void 0!==t.location.query.capture&&(c.motions=(c.motions||[]).slice(),c.motions.unshift("autoplay"),c.motions.every((function(t){return!t.startsWith("capture")}))&&c.motions.push("capture:[id|=root]")),n=a?[r()["default"].createElement((function(){return(0,i().useMotions)(c.motions||[],document.documentElement),r()["default"].createElement("div",{},r()["default"].createElement(u.component))}))]:[c,r()["default"].createElement(u.component)]}return n};e["default"]=c},JyHP:function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n},"JzK+":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on "+t);return t}},K6Lp:function(t,e,n){"use strict";n.r(e);var r=n("xwgP"),i=n.n(r),o=n("OS9G"),a=n("W+6v");n("Rsk4");e["default"]=t=>(i.a.useEffect((()=>{var e;null!==t&&void 0!==t&&null!==(e=t.location)&&void 0!==e&&e.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(t.location.hash.slice(1)))}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"markdown"},i.a.createElement("p",null,"\u5730\u56fe\u7ed8\u5236\u7ec4\u4ef6\uff0c\u652f\u6301\u70b9\u3001\u7ebf\u3001\u9762\uff0c \u5706\u3001\u77e9\u5f62\u3001\u7684\u7ed8\u5236\u7f16\u8f91\u3002"),i.a.createElement("h1",{id:"\u4f7f\u7528"},i.a.createElement(o["AnchorLink"],{to:"#\u4f7f\u7528","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u4f7f\u7528"),i.a.createElement("p",null,i.a.createElement("strong",null,"using modules")),i.a.createElement(a["a"],{code:"import { DrawControl } from '@antv/l7-draw';",lang:"javascript"}),i.a.createElement("p",null,i.a.createElement("strong",null,"CDN \u7248\u672c\u5f15\u7528")),i.a.createElement(a["a"],{code:'<head>\n  <! --\u5f15\u5165\u6700\u65b0\u7248\u7684L7-Draw --\x3e\n  <script src="https://unpkg.com/@antv/l7-draw"><\/script>\n</head>',lang:"html"}),i.a.createElement("h2",{id:"\u5b9e\u4f8b\u5316"},i.a.createElement(o["AnchorLink"],{to:"#\u5b9e\u4f8b\u5316","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u5b9e\u4f8b\u5316"),i.a.createElement(a["a"],{code:"const control = new DrawControl(scene, option);\nscene.addControl(control);",lang:"javascript"}),i.a.createElement(a["a"],{code:"// CDN \u5f15\u7528\nconst control = new L7.Draw.DrawControl(scene, option);\nscene.addControl(control);",lang:"javascript"}))))},KM8y:function(t,e,n){"use strict";n.r(e);var r=n("xwgP"),i=n.n(r),o=n("OS9G"),a=n("oSqR"),s=n("Rsk4"),u=i.a.memo(s["default"]["docs-draw_line"].component);e["default"]=t=>(i.a.useEffect((()=>{var e;null!==t&&void 0!==t&&null!==(e=t.location)&&void 0!==e&&e.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(t.location.hash.slice(1)))}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"markdown"},i.a.createElement("h2",{id:"\u6298\u7ebf\u56fe"},i.a.createElement(o["AnchorLink"],{to:"#\u6298\u7ebf\u56fe","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u6298\u7ebf\u56fe")),i.a.createElement(a["default"],s["default"]["docs-draw_line"].previewerProps,i.a.createElement(u,null)))))},KRrj:function(t,e){function n(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;var o=Array(i);while(++r<i)o[r]=t[r+e];return o}t.exports=n},KZbS:function(t,e,n){"use strict";var r=n("5SLN"),i=n("Txhl"),o=i(r("String.prototype.indexOf"));t.exports=function(t,e){var n=r(t,!!e);return"function"===typeof n&&o(t,".prototype.")>-1?i(n):n}},"KgZ/":function(t,e,n){var r=n("Vfe6");function i(t,e){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.map(o(i,e)),t;case"GeometryCollection":return t.geometries=t.geometries.map(o(i,e)),t;case"Feature":return t.geometry=i(t.geometry,e),t;case"Polygon":case"MultiPolygon":return a(t,e);default:return t}}function o(t,e){return function(n){return t(n,e)}}function a(t,e){return"Polygon"===t.type?t.coordinates=s(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(o(s,e))),t}function s(t,e){e=!!e,t[0]=u(t[0],e);for(var n=1;n<t.length;n++)t[n]=u(t[n],!e);return t}function u(t,e){return c(t)===e?t:t.reverse()}function c(t){return r.ring(t)>=0}t.exports=i},Kjl2:function(t,e,n){"use strict";function r(t){if(Array.isArray(t))return t}n.d(e,"a",(function(){return r}))},KmIr:function(t,e,n){var r=n("AZAf"),i=n("3sCP"),o=n("TIpG");function a(t){return o(t)?r(t):i(t)}t.exports=a},KpHK:function(t,e,n){var r=n("R64i"),i=n("IRht"),o=n("kPvK"),a=o("toStringTag"),s="Arguments"==i(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(n){}};t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=u(e=Object(t),a))?n:s?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},Krt8:function(t,e,n){var r=n("B0cc");function i(t){if(Array.isArray(t))return r(t)}t.exports=i,t.exports["default"]=t.exports,t.exports.__esModule=!0},Krz3:function(t,e,n){"use strict";var r,i,o,a=n("kI7s"),s=n("D8FR"),u=n("+qhb"),c=n("kPvK"),l=n("m52V"),f=c("iterator"),p=!1,h=function(){return this};[].keys&&(o=[].keys(),"next"in o?(i=a(a(o)),i!==Object.prototype&&(r=i)):p=!0),void 0==r&&(r={}),l||u(r,f)||s(r,f,h),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},Kzx3:function(t,e,n){"use strict";function r(t,e){return r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(t,e)}n.d(e,"a",(function(){return r}))},L1c7:function(t,e,n){var r=n("HIsA");r({target:"Math",stat:!0},{isubh:function(t,e,n,r){var i=t>>>0,o=e>>>0,a=n>>>0;return o-(r>>>0)-((~i&a|~(i^a)&i-a>>>0)>>>31)|0}})},L44n:function(t,e,n){"use strict";var r=n("+OvE"),i=Object.prototype.hasOwnProperty,o=Array.isArray,a={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(t){return t.replace(/&#(\d+);/g,(function(t,e){return String.fromCharCode(parseInt(e,10))}))},u=function(t,e){return t&&"string"===typeof t&&e.comma&&t.indexOf(",")>-1?t.split(","):t},c="utf8=%26%2310003%3B",l="utf8=%E2%9C%93",f=function(t,e){var n,f={},p=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,h=e.parameterLimit===1/0?void 0:e.parameterLimit,d=p.split(e.delimiter,h),v=-1,m=e.charset;if(e.charsetSentinel)for(n=0;n<d.length;++n)0===d[n].indexOf("utf8=")&&(d[n]===l?m="utf-8":d[n]===c&&(m="iso-8859-1"),v=n,n=d.length);for(n=0;n<d.length;++n)if(n!==v){var g,y,b=d[n],_=b.indexOf("]="),x=-1===_?b.indexOf("="):_+1;-1===x?(g=e.decoder(b,a.decoder,m,"key"),y=e.strictNullHandling?null:""):(g=e.decoder(b.slice(0,x),a.decoder,m,"key"),y=r.maybeMap(u(b.slice(x+1),e),(function(t){return e.decoder(t,a.decoder,m,"value")}))),y&&e.interpretNumericEntities&&"iso-8859-1"===m&&(y=s(y)),b.indexOf("[]=")>-1&&(y=o(y)?[y]:y),i.call(f,g)?f[g]=r.combine(f[g],y):f[g]=y}return f},p=function(t,e,n,r){for(var i=r?e:u(e,n),o=t.length-1;o>=0;--o){var a,s=t[o];if("[]"===s&&n.parseArrays)a=[].concat(i);else{a=n.plainObjects?Object.create(null):{};var c="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,l=parseInt(c,10);n.parseArrays||""!==c?!isNaN(l)&&s!==c&&String(l)===c&&l>=0&&n.parseArrays&&l<=n.arrayLimit?(a=[],a[l]=i):a[c]=i:a={0:i}}i=a}return i},h=function(t,e,n,r){if(t){var o=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,a=/(\[[^[\]]*])/,s=/(\[[^[\]]*])/g,u=n.depth>0&&a.exec(o),c=u?o.slice(0,u.index):o,l=[];if(c){if(!n.plainObjects&&i.call(Object.prototype,c)&&!n.allowPrototypes)return;l.push(c)}var f=0;while(n.depth>0&&null!==(u=s.exec(o))&&f<n.depth){if(f+=1,!n.plainObjects&&i.call(Object.prototype,u[1].slice(1,-1))&&!n.allowPrototypes)return;l.push(u[1])}return u&&l.push("["+o.slice(u.index)+"]"),p(l,e,n,r)}},d=function(t){if(!t)return a;if(null!==t.decoder&&void 0!==t.decoder&&"function"!==typeof t.decoder)throw new TypeError("Decoder has to be a function.");if("undefined"!==typeof t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e="undefined"===typeof t.charset?a.charset:t.charset;return{allowDots:"undefined"===typeof t.allowDots?a.allowDots:!!t.allowDots,allowPrototypes:"boolean"===typeof t.allowPrototypes?t.allowPrototypes:a.allowPrototypes,allowSparse:"boolean"===typeof t.allowSparse?t.allowSparse:a.allowSparse,arrayLimit:"number"===typeof t.arrayLimit?t.arrayLimit:a.arrayLimit,charset:e,charsetSentinel:"boolean"===typeof t.charsetSentinel?t.charsetSentinel:a.charsetSentinel,comma:"boolean"===typeof t.comma?t.comma:a.comma,decoder:"function"===typeof t.decoder?t.decoder:a.decoder,delimiter:"string"===typeof t.delimiter||r.isRegExp(t.delimiter)?t.delimiter:a.delimiter,depth:"number"===typeof t.depth||!1===t.depth?+t.depth:a.depth,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"===typeof t.interpretNumericEntities?t.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"===typeof t.parameterLimit?t.parameterLimit:a.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"===typeof t.plainObjects?t.plainObjects:a.plainObjects,strictNullHandling:"boolean"===typeof t.strictNullHandling?t.strictNullHandling:a.strictNullHandling}};t.exports=function(t,e){var n=d(e);if(""===t||null===t||"undefined"===typeof t)return n.plainObjects?Object.create(null):{};for(var i="string"===typeof t?f(t,n):t,o=n.plainObjects?Object.create(null):{},a=Object.keys(i),s=0;s<a.length;++s){var u=a[s],c=h(u,i[u],n,"string"===typeof t);o=r.merge(o,c,n)}return!0===n.allowSparse?o:r.compact(o)}},LHz1:function(t,e,n){"use strict";var r=n("txMq"),i=n("RgF4");function o(){var t=n("xwgP");return o=function(){return t},t}function a(t,e){return f(t)||l(t,e)||u(t,e)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,e){if(t){if("string"===typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function f(t){if(Array.isArray(t))return t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var p,h="data-prefers-color",d="dumi:prefers-color",v=function(){function t(){var e=this;r(this,t),this.color=void 0,this.callbacks=[],this.color=localStorage.getItem(d)||document.documentElement.getAttribute(h),["light","dark"].forEach((function(t){var n=e.getColorMedia(t),r=function(n){n.matches&&"auto"===e.color&&(document.documentElement.setAttribute(h,t),e.applyCallbacks())};n.addEventListener?n.addEventListener("change",r):n.addListener&&n.addListener(r)}))}return i(t,[{key:"getColorMedia",value:function(t){return window.matchMedia("(prefers-color-scheme: ".concat(t,")"))}},{key:"isColorMode",value:function(t){return this.getColorMedia(t).matches}},{key:"applyCallbacks",value:function(){var t=this;this.callbacks.forEach((function(e){return e(t.color)}))}},{key:"listen",value:function(t){this.callbacks.push(t)}},{key:"unlisten",value:function(t){this.callbacks.splice(this.callbacks.indexOf(t),1)}},{key:"set",value:function(t){return this.color=t,localStorage.setItem(d,t),this.applyCallbacks(),"auto"===t?document.documentElement.setAttribute(h,this.isColorMode("dark")?"dark":"light"):document.documentElement.setAttribute(h,t),t}}]),t}(),m=function(){var t=(0,o().useState)(),e=a(t,2),n=e[0],r=e[1],i=(0,o().useCallback)((function(t){p.set(t)}),[]);return(0,o().useEffect)((function(){return p=p||new v,p.listen(r),r(p.color),function(){return p.unlisten(r)}}),[]),[n,i]};e["default"]=m},LP2i:function(t,e,n){var r=n("tmP0"),i=n("k77j"),o=n("oX5j"),a=1,s=2;function u(t,e,n,u,c,l){var f=n&a,p=t.length,h=e.length;if(p!=h&&!(f&&h>p))return!1;var d=l.get(t),v=l.get(e);if(d&&v)return d==e&&v==t;var m=-1,g=!0,y=n&s?new r:void 0;l.set(t,e),l.set(e,t);while(++m<p){var b=t[m],_=e[m];if(u)var x=f?u(_,b,m,e,t,l):u(b,_,m,t,e,l);if(void 0!==x){if(x)continue;g=!1;break}if(y){if(!i(e,(function(t,e){if(!o(y,e)&&(b===t||c(b,t,n,u,l)))return y.push(e)}))){g=!1;break}}else if(b!==_&&!c(b,_,n,u,l)){g=!1;break}}return l["delete"](t),l["delete"](e),g}t.exports=u},LTDN:function(t,e,n){"use strict";var r=n("hXyk"),i=n("DDwO");t.exports=function(){for(var t,e=r(this),n=i(e["delete"]),o=!0,a=0,s=arguments.length;a<s;a++)t=n.call(e,arguments[a]),o=o&&t;return!!o}},LXEX:function(t,e,n){"use strict";t.exports=function(t,e){for(var n={},r=Object.keys(t),i=Array.isArray(e),o=0;o<r.length;o++){var a=r[o],s=t[a];(i?-1!==e.indexOf(a):e(a,s,t))&&(n[a]=s)}return n}},LlNi:function(t,e,n){"use strict";var r=n("rZnw"),i=n("+OvE"),o=n("gUnd"),a=Object.prototype.hasOwnProperty,s={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},u=Array.isArray,c=Array.prototype.push,l=function(t,e){c.apply(t,u(e)?e:[e])},f=Date.prototype.toISOString,p=o["default"],h={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,format:p,formatter:o.formatters[p],indices:!1,serializeDate:function(t){return f.call(t)},skipNulls:!1,strictNullHandling:!1},d=function(t){return"string"===typeof t||"number"===typeof t||"boolean"===typeof t||"symbol"===typeof t||"bigint"===typeof t},v=function t(e,n,o,a,s,c,f,p,v,m,g,y,b,_,x){var w=e;if(x.has(e))throw new RangeError("Cyclic object value");if("function"===typeof f?w=f(n,w):w instanceof Date?w=m(w):"comma"===o&&u(w)&&(w=i.maybeMap(w,(function(t){return t instanceof Date?m(t):t}))),null===w){if(a)return c&&!b?c(n,h.encoder,_,"key",g):n;w=""}if(d(w)||i.isBuffer(w)){if(c){var E=b?n:c(n,h.encoder,_,"key",g);return[y(E)+"="+y(c(w,h.encoder,_,"value",g))]}return[y(n)+"="+y(String(w))]}var S,C=[];if("undefined"===typeof w)return C;if("comma"===o&&u(w))S=[{value:w.length>0?w.join(",")||null:void 0}];else if(u(f))S=f;else{var T=Object.keys(w);S=p?T.sort(p):T}for(var O=0;O<S.length;++O){var A=S[O],k="object"===typeof A&&void 0!==A.value?A.value:w[A];if(!s||null!==k){var M=u(w)?"function"===typeof o?o(n,A):n:n+(v?"."+A:"["+A+"]");x.set(e,!0);var P=r();l(C,t(k,M,o,a,s,c,f,p,v,m,g,y,b,_,P))}}return C},m=function(t){if(!t)return h;if(null!==t.encoder&&void 0!==t.encoder&&"function"!==typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||h.charset;if("undefined"!==typeof t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=o["default"];if("undefined"!==typeof t.format){if(!a.call(o.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var r=o.formatters[n],i=h.filter;return("function"===typeof t.filter||u(t.filter))&&(i=t.filter),{addQueryPrefix:"boolean"===typeof t.addQueryPrefix?t.addQueryPrefix:h.addQueryPrefix,allowDots:"undefined"===typeof t.allowDots?h.allowDots:!!t.allowDots,charset:e,charsetSentinel:"boolean"===typeof t.charsetSentinel?t.charsetSentinel:h.charsetSentinel,delimiter:"undefined"===typeof t.delimiter?h.delimiter:t.delimiter,encode:"boolean"===typeof t.encode?t.encode:h.encode,encoder:"function"===typeof t.encoder?t.encoder:h.encoder,encodeValuesOnly:"boolean"===typeof t.encodeValuesOnly?t.encodeValuesOnly:h.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:"function"===typeof t.serializeDate?t.serializeDate:h.serializeDate,skipNulls:"boolean"===typeof t.skipNulls?t.skipNulls:h.skipNulls,sort:"function"===typeof t.sort?t.sort:null,strictNullHandling:"boolean"===typeof t.strictNullHandling?t.strictNullHandling:h.strictNullHandling}};t.exports=function(t,e){var n,i,o=t,a=m(e);"function"===typeof a.filter?(i=a.filter,o=i("",o)):u(a.filter)&&(i=a.filter,n=i);var c,f=[];if("object"!==typeof o||null===o)return"";c=e&&e.arrayFormat in s?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices";var p=s[c];n||(n=Object.keys(o)),a.sort&&n.sort(a.sort);for(var h=r(),d=0;d<n.length;++d){var g=n[d];a.skipNulls&&null===o[g]||l(f,v(o[g],g,p,a.strictNullHandling,a.skipNulls,a.encode?a.encoder:null,a.filter,a.sort,a.allowDots,a.serializeDate,a.format,a.formatter,a.encodeValuesOnly,a.charset,h))}var y=f.join(a.delimiter),b=!0===a.addQueryPrefix?"?":"";return a.charsetSentinel&&("iso-8859-1"===a.charset?b+="utf8=%26%2310003%3B&":b+="utf8=%E2%9C%93&"),y.length>0?b+y:""}},Lsfr:function(t,e,n){(function(t){var r=n("HLqh"),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a&&r.process,u=function(){try{var t=o&&o.require&&o.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(e){}}();t.exports=u}).call(this,n("7y0d")(t))},"LtJ/":function(t,e,n){var r=n("3Jv6"),i=n("8ifL"),o=n("2Swa"),a="[object Object]",s=Function.prototype,u=Object.prototype,c=s.toString,l=u.hasOwnProperty,f=c.call(Object);function p(t){if(!o(t)||r(t)!=a)return!1;var e=i(t);if(null===e)return!0;var n=l.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==f}t.exports=p},LuuT:function(t,e,n){"use strict";var r=n("HIsA"),i=n("Xf1w").map,o=n("HqdE"),a=n("/5yA"),s=o("map"),u=a("map");r({target:"Array",proto:!0,forced:!s||!u},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"M/IS":function(t,e,n){var r=n("eoOI");function i(t){return r(this,t).get(t)}t.exports=i},M2Sr:function(t,e,n){"use strict";function r(){return r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r.apply(this,arguments)}n.d(e,"a",(function(){return r}))},MLhk:function(t,e,n){var r=n("zzj5"),i=n("l5Zz"),o=n("OXyq"),a=n("HgUS"),s=n("0b1I");function u(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype["delete"]=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},MOrU:function(t,e,n){var r=n("bVFb");r("search")},"Ma/q":function(t,e){function n(t){return function(e,n,r){var i=-1,o=Object(e),a=r(e),s=a.length;while(s--){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}t.exports=n},MbSy:function(t,e,n){var r=n("cvn4"),i=Math.max;function o(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){var o=arguments,a=-1,s=i(o.length-e,0),u=Array(s);while(++a<s)u[a]=o[e+a];a=-1;var c=Array(e+1);while(++a<e)c[a]=o[a];return c[e]=n(u),r(t,this,c)}}t.exports=o},Mi4E:function(t,e,n){var r=n("HIsA");r({target:"Math",stat:!0},{RAD_PER_DEG:180/Math.PI})},Mq00:function(t,e){function n(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},Mz7Q:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unmanaged=void 0;var r=n("9L8m"),i=n("rMkn"),o=n("ZLnY");function a(){return function(t,e,n){var a=new i.Metadata(r.UNMANAGED_TAG,!0);o.tagParameter(t,e,n,a)}}e.unmanaged=a},NA9k:function(t,e,n){var r=n("Hiyu"),i=n("2RC6"),o=n("ma2j"),a=n("Iu9s").UNSUPPORTED_Y;r&&("g"!=/./g.flags||a)&&i.f(RegExp.prototype,"flags",{configurable:!0,get:o})},NDin:function(t,e,n){var r=n("m9sd"),i=n("ar+g");function o(t,e){return r(t,i(t),e)}t.exports=o},NG5O:function(t,e){var n=/\s/;function r(t){var e=t.length;while(e--&&n.test(t.charAt(e)));return e}t.exports=r},NHY1:function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},NNlX:function(t,e,n){"use strict";var r=n("ghbW"),i=n("vldi");t.exports=r("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},NVMI:function(t,e,n){var r=n("JzK+");t.exports=function(t){return Object(r(t))}},NYcp:function(t,e,n){"use strict";var r=n("DDwO"),i=n("pxmn"),o=[].slice,a={},s=function(t,e,n){if(!(e in a)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";a[e]=Function("C,a","return new C("+r.join(",")+")")}return a[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=o.call(arguments,1),a=function(){var r=n.concat(o.call(arguments));return this instanceof a?s(e,r.length,r):e.apply(t,r)};return i(e.prototype)&&(a.prototype=e.prototype),a}},Nau9:function(t,e,n){"use strict";var r=n("HIsA"),i=n("DDwO"),o=n("0MLT"),a=n("uCRN"),s=n("Ji6T");r({target:"Promise",stat:!0},{allSettled:function(t){var e=this,n=o.f(e),r=n.resolve,u=n.reject,c=a((function(){var n=i(e.resolve),o=[],a=0,u=1;s(t,(function(t){var i=a++,s=!1;o.push(void 0),u++,n.call(e,t).then((function(t){s||(s=!0,o[i]={status:"fulfilled",value:t},--u||r(o))}),(function(t){s||(s=!0,o[i]={status:"rejected",reason:t},--u||r(o))}))})),--u||r(o)}));return c.error&&u(c.value),n.promise}})},Npd2:function(t,e,n){var r=n("3FqU"),i=n("ZU2r"),o=n("sCLo"),a=n("qXph"),s=n("zftb"),u=n("VL8K"),c=n("+Gi7"),l=n("wvSg"),f=n("lDzS"),p=n("wmqP"),h=n("E5vS"),d=n("LtJ/"),v=n("lOrw"),m=n("TKkZ"),g=n("k7N2");function y(t,e,n,y,b,_,x){var w=m(t,n),E=m(e,n),S=x.get(E);if(S)r(t,n,S);else{var C=_?_(w,E,n+"",t,e,x):void 0,T=void 0===C;if(T){var O=c(E),A=!O&&f(E),k=!O&&!A&&v(E);C=E,O||A||k?c(w)?C=w:l(w)?C=a(w):A?(T=!1,C=i(E,!0)):k?(T=!1,C=o(E,!0)):C=[]:d(E)||u(E)?(C=w,u(w)?C=g(w):h(w)&&!p(w)||(C=s(E))):T=!1}T&&(x.set(E,C),b(C,E,y,_,x),x["delete"](E)),r(t,n,C)}}t.exports=y},O4tt:function(t,e,n){"use strict";var r=n("dOdC"),i=n("2I03"),o=n("40mc"),a=function(t,e,n,s,u,c,l,f){var p,h=u,d=0,v=!!l&&o(l,f,3);while(d<s){if(d in n){if(p=v?v(n[d],d,e):n[d],c>0&&r(p))h=a(t,e,p,i(p.length),h,c-1)-1;else{if(h>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[h]=p}h++}d++}return h};t.exports=a},O7jt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBindingDictionary=e.createMockRequest=e.plan=void 0;var r=n("tMVM"),i=n("196R"),o=n("2+60"),a=n("9L8m"),s=n("AUMs"),u=n("Rph/"),c=n("5i8x"),l=n("rMkn"),f=n("tqfL"),p=n("wOqf"),h=n("qwYJ"),d=n("Y26w");function v(t){return t._bindingDictionary}function m(t,e,n,r,i,o){var s=t?a.MULTI_INJECT_TAG:a.INJECT_TAG,u=new l.Metadata(s,n),c=new d.Target(e,r,n,u);if(void 0!==i){var f=new l.Metadata(i,o);c.metadata.push(f)}return c}function g(t,e,n,i,o){var a=_(n.container,o.serviceIdentifier),s=[];return a.length===r.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"===typeof o.serviceIdentifier&&t.getConstructorMetadata(o.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(o.serviceIdentifier).toSelf(),a=_(n.container,o.serviceIdentifier)),s=e?a:a.filter((function(t){var e=new h.Request(t.serviceIdentifier,n,i,t,o);return t.constraint(e)})),y(o.serviceIdentifier,s,o,n.container),s}function y(t,e,n,o){switch(e.length){case r.BindingCount.NoBindingsAvailable:if(n.isOptional())return e;var a=u.getServiceIdentifierAsString(t),s=i.NOT_REGISTERED;throw s+=u.listMetadataForTarget(a,n),s+=u.listRegisteredBindingsForServiceIdentifier(o,a,_),new Error(s);case r.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return e;case r.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return e;a=u.getServiceIdentifierAsString(t),s=i.AMBIGUOUS_MATCH+" "+a;throw s+=u.listRegisteredBindingsForServiceIdentifier(o,a,_),new Error(s)}}function b(t,e,n,r,a,s){var u,c;if(null===a){u=g(t,e,r,null,s),c=new h.Request(n,r,null,u,s);var l=new f.Plan(r,c);r.addPlan(l)}else u=g(t,e,r,a,s),c=a.addChildRequest(s.serviceIdentifier,u,s);u.forEach((function(e){var n=null;if(s.isArray())n=c.addChildRequest(e.serviceIdentifier,e,s);else{if(e.cache)return;n=c}if(e.type===o.BindingTypeEnum.Instance&&null!==e.implementationType){var a=p.getDependencies(t,e.implementationType);if(!r.container.options.skipBaseClassChecks){var u=p.getBaseClassDependencyCount(t,e.implementationType);if(a.length<u){var l=i.ARGUMENTS_LENGTH_MISMATCH(p.getFunctionName(e.implementationType));throw new Error(l)}}a.forEach((function(e){b(t,!1,e.serviceIdentifier,r,n,e)}))}}))}function _(t,e){var n=[],r=v(t);return r.hasKey(e)?n=r.get(e):null!==t.parent&&(n=_(t.parent,e)),n}function x(t,e,n,r,i,o,a,l){void 0===l&&(l=!1);var f=new c.Context(e),p=m(n,r,i,"",o,a);try{return b(t,l,i,f,null,p),f}catch(h){throw s.isStackOverflowExeption(h)&&f.plan&&u.circularDependencyToException(f.plan.rootRequest),h}}function w(t,e,n,r){var i=new d.Target(o.TargetTypeEnum.Variable,"",e,new l.Metadata(n,r)),a=new c.Context(t),s=new h.Request(e,a,null,[],i);return s}e.getBindingDictionary=v,e.plan=x,e.createMockRequest=w},OFkz:function(t,e,n){"use strict";n.r(e),n.d(e,"createBrowserHistory",(function(){return o["a"]})),n.d(e,"createHashHistory",(function(){return o["b"]})),n.d(e,"createMemoryHistory",(function(){return o["d"]})),n.d(e,"__RouterContext",(function(){return a["h"]})),n.d(e,"Link",(function(){return b})),n.d(e,"MemoryRouter",(function(){return a["a"]})),n.d(e,"NavLink",(function(){return E})),n.d(e,"Prompt",(function(){return a["b"]})),n.d(e,"Redirect",(function(){return a["c"]})),n.d(e,"Route",(function(){return a["d"]})),n.d(e,"Router",(function(){return a["e"]})),n.d(e,"StaticRouter",(function(){return a["f"]})),n.d(e,"Switch",(function(){return a["g"]})),n.d(e,"matchPath",(function(){return a["i"]})),n.d(e,"useHistory",(function(){return a["j"]})),n.d(e,"useLocation",(function(){return a["k"]})),n.d(e,"useParams",(function(){return a["l"]})),n.d(e,"useRouteMatch",(function(){return a["m"]})),n.d(e,"withRouter",(function(){return a["n"]})),n.d(e,"ApplyPluginsType",(function(){return nt})),n.d(e,"Plugin",(function(){return at})),n.d(e,"dynamic",(function(){return tt})),n.d(e,"isBrowser",(function(){return rt}));var r=n("TFir"),i=n.n(r),o=n("HFu6"),a=n("q5+0"),s=n("zUoc"),u=n("xwgP"),c=n.n(u),l=(n("EH+i"),n("M2Sr")),f=n("lkpF"),p=n("AKk7");c.a.Component;c.a.Component;var h=function(t,e){return"function"===typeof t?t(e):t},d=function(t,e){return"string"===typeof t?Object(o["c"])(t,null,null,e):t},v=function(t){return t},m=c.a.forwardRef;function g(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}"undefined"===typeof m&&(m=v);var y=m((function(t,e){var n=t.innerRef,r=t.navigate,i=t.onClick,o=Object(f["a"])(t,["innerRef","navigate","onClick"]),a=o.target,s=Object(l["a"])({},o,{onClick:function(t){try{i&&i(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||a&&"_self"!==a||g(t)||(t.preventDefault(),r())}});return s.ref=v!==m&&e||n,c.a.createElement("a",s)}));var b=m((function(t,e){var n=t.component,r=void 0===n?y:n,i=t.replace,o=t.to,s=t.innerRef,u=Object(f["a"])(t,["component","replace","to","innerRef"]);return c.a.createElement(a["h"].Consumer,null,(function(t){t||Object(p["a"])(!1);var n=t.history,a=d(h(o,t.location),t.location),f=a?n.createHref(a):"",g=Object(l["a"])({},u,{href:f,navigate:function(){var e=h(o,t.location),r=i?n.replace:n.push;r(e)}});return v!==m?g.ref=e||s:g.innerRef=s,c.a.createElement(r,g)}))})),_=function(t){return t},x=c.a.forwardRef;function w(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter((function(t){return t})).join(" ")}"undefined"===typeof x&&(x=_);var E=x((function(t,e){var n=t["aria-current"],r=void 0===n?"page":n,i=t.activeClassName,o=void 0===i?"active":i,s=t.activeStyle,u=t.className,v=t.exact,m=t.isActive,g=t.location,y=t.sensitive,E=t.strict,S=t.style,C=t.to,T=t.innerRef,O=Object(f["a"])(t,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return c.a.createElement(a["h"].Consumer,null,(function(t){t||Object(p["a"])(!1);var n=g||t.location,i=d(h(C,n),n),f=i.pathname,A=f&&f.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),k=A?Object(a["i"])(n.pathname,{path:A,exact:v,sensitive:y,strict:E}):null,M=!!(m?m(k,n):k),P=M?w(u,o):u,I=M?Object(l["a"])({},S,{},s):S,L=Object(l["a"])({"aria-current":M&&r||null,className:P,style:I,to:i},O);return _!==x?L.ref=e||T:L.innerRef=T,c.a.createElement(b,L)}))})),S=n("y6vj");function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function O(t){return O="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function A(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function k(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){A(o,r,i,a,s,"next",t)}function s(t){A(o,r,i,a,s,"throw",t)}a(void 0)}))}}function M(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function I(t,e,n){return e&&P(t.prototype,e),n&&P(t,n),t}function L(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R(t){return D(t)||N(t)||j(t)||z()}function D(t){if(Array.isArray(t))return t}function N(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function j(t,e){if(t){if("string"===typeof t)return F(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(t,e):void 0}}function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function z(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function B(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=j(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}var U=Object(u["createContext"])(null),V=[],q=[],G=!1;function H(t){var e=t(),n={loading:!0,loaded:null,error:null};return n.promise=e.then((function(t){return n.loading=!1,n.loaded=t,t}))["catch"]((function(t){throw n.loading=!1,n.error=t,t})),n}function W(t){var e={loading:!1,loaded:{},error:null},n=[];try{Object.keys(t).forEach((function(r){var i=H(t[r]);i.loading?e.loading=!0:(e.loaded[r]=i.loaded,e.error=i.error),n.push(i.promise),i.promise.then((function(t){e.loaded[r]=t}))["catch"]((function(t){e.error=t}))}))}catch(r){e.error=r}return e.promise=Promise.all(n).then((function(t){return e.loading=!1,t}))["catch"]((function(t){throw e.loading=!1,t})),e}function X(t){return t&&t.__esModule?t["default"]:t}function Z(t,e){return Object(u["createElement"])(X(t),e)}function Y(t,e){var n=Object.assign({loader:null,loading:null,delay:200,timeout:null,render:Z,webpack:null,modules:null},e),r=null;function i(){if(!r){var e=new K(t,n);r={getCurrentValue:e.getCurrentValue.bind(e),subscribe:e.subscribe.bind(e),retry:e.retry.bind(e),promise:e.promise.bind(e)}}return r.promise()}if("undefined"===typeof window&&V.push(i),!G&&"undefined"!==typeof window&&"function"===typeof n.webpack){var o=n.webpack();q.push((function(t){var e,n=B(o);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(-1!==t.indexOf(r))return i()}}catch(a){n.e(a)}finally{n.f()}}))}var a=function(t,e){i();var o=Object(u["useContext"])(U),a=Object(S["useSubscription"])(r);return Object(u["useImperativeHandle"])(e,(function(){return{retry:r.retry}})),o&&Array.isArray(n.modules)&&n.modules.forEach((function(t){o(t)})),a.loading||a.error?Object(u["createElement"])(n.loading,{isLoading:a.loading,pastDelay:a.pastDelay,timedOut:a.timedOut,error:a.error,retry:r.retry}):a.loaded?n.render(a.loaded,t):null},s=Object(u["forwardRef"])(a);return s.preload=function(){return i()},s.displayName="LoadableComponent",s}var K=function(){function t(e,n){M(this,t),this._loadFn=e,this._opts=n,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}return I(t,[{key:"promise",value:function(){return this._res.promise}},{key:"retry",value:function(){var t=this;this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};var e=this._res,n=this._opts;e.loading&&("number"===typeof n.delay&&(0===n.delay?this._state.pastDelay=!0:this._delay=setTimeout((function(){t._update({pastDelay:!0})}),n.delay)),"number"===typeof n.timeout&&(this._timeout=setTimeout((function(){t._update({timedOut:!0})}),n.timeout))),this._res.promise.then((function(){t._update(),t._clearTimeouts()}))["catch"]((function(e){t._update(),t._clearTimeouts()})),this._update({})}},{key:"_update",value:function(t){this._state=T(T({},this._state),t),this._callbacks.forEach((function(t){return t()}))}},{key:"_clearTimeouts",value:function(){clearTimeout(this._delay),clearTimeout(this._timeout)}},{key:"getCurrentValue",value:function(){return T(T({},this._state),{},{error:this._res.error,loaded:this._res.loaded,loading:this._res.loading})}},{key:"subscribe",value:function(t){var e=this;return this._callbacks.add(t),function(){e._callbacks["delete"](t)}}}]),t}();function J(t){return Y(H,t)}function Q(t){if("function"!==typeof t.render)throw new Error("LoadableMap requires a `render(loaded, props)` function");return Y(W,t)}function $(t,e){var n=[];while(t.length){var r=t.pop();n.push(r(e))}return Promise.all(n).then((function(){if(t.length)return $(t,e)}))}function tt(t){var e=J,n={loading:function(t){t.error,t.isLoading;return Object(u["createElement"])("p",null,"loading...")}};if("function"===typeof t)n.loader=t;else{if("object"!==O(t))throw new Error("Unexpect arguments ".concat(t));n=T(T({},n),t)}return e(n)}function et(t,e){if(!t)throw new Error(e)}J.Map=Q,J.preloadAll=function(){return new Promise((function(t,e){$(V).then(t,e)}))},J.preloadReady=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((function(e){var n=function(){return G=!0,e()};$(q,t).then(n,n)}))},"undefined"!==typeof window&&(window.__NEXT_PRELOADREADY=J.preloadReady);var nt,rt=function(){return"undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement};function it(t){var e=t.fns,n=t.args;if(1===e.length)return e[0];var r=e.pop();return e.reduce((function(t,e){return function(){return e(t,n)}}),r)}function ot(t){return!!t&&"object"===O(t)&&"function"===typeof t.then}(function(t){t["compose"]="compose",t["modify"]="modify",t["event"]="event"})(nt||(nt={}));var at=function(){function t(e){M(this,t),this.validKeys=void 0,this.hooks={},this.validKeys=(null===e||void 0===e?void 0:e.validKeys)||[]}return I(t,[{key:"register",value:function(t){var e=this;et(!!t.apply,"register failed, plugin.apply must supplied"),et(!!t.path,"register failed, plugin.path must supplied"),Object.keys(t.apply).forEach((function(n){et(e.validKeys.indexOf(n)>-1,"register failed, invalid key ".concat(n," from plugin ").concat(t.path,".")),e.hooks[n]||(e.hooks[n]=[]),e.hooks[n]=e.hooks[n].concat(t.apply[n])}))}},{key:"getHooks",value:function(t){var e=t.split("."),n=R(e),r=n[0],i=n.slice(1),o=this.hooks[r]||[];return i.length&&(o=o.map((function(t){try{var e,n=t,r=B(i);try{for(r.s();!(e=r.n()).done;){var o=e.value;n=n[o]}}catch(a){r.e(a)}finally{r.f()}return n}catch(s){return null}})).filter(Boolean)),o}},{key:"applyPlugins",value:function(t){var e=t.key,n=t.type,r=t.initialValue,o=t.args,a=t.async,s=this.getHooks(e)||[];switch(o&&et("object"===O(o),"applyPlugins failed, args must be plain object."),n){case nt.modify:return a?s.reduce(function(){var t=k(i.a.mark((function t(n,r){var a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(et("function"===typeof r||"object"===O(r)||ot(r),"applyPlugins failed, all hooks for key ".concat(e," must be function, plain object or Promise.")),!ot(n)){t.next=5;break}return t.next=4,n;case 4:n=t.sent;case 5:if("function"!==typeof r){t.next=16;break}if(a=r(n,o),!ot(a)){t.next=13;break}return t.next=10,a;case 10:return t.abrupt("return",t.sent);case 13:return t.abrupt("return",a);case 14:t.next=21;break;case 16:if(!ot(r)){t.next=20;break}return t.next=19,r;case 19:r=t.sent;case 20:return t.abrupt("return",T(T({},n),r));case 21:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),ot(r)?r:Promise.resolve(r)):s.reduce((function(t,n){return et("function"===typeof n||"object"===O(n),"applyPlugins failed, all hooks for key ".concat(e," must be function or plain object.")),"function"===typeof n?n(t,o):T(T({},t),n)}),r);case nt.event:return s.forEach((function(t){et("function"===typeof t,"applyPlugins failed, all hooks for key ".concat(e," must be function.")),t(o)}));case nt.compose:return function(){return it({fns:s.concat(r),args:o})()}}}}]),t}()},OLna:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},OOuR:function(t,e,n){"use strict";var r=n("9izy").charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},OS9G:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"context",{enumerable:!0,get:function(){return r["default"]}}),Object.defineProperty(e,"Link",{enumerable:!0,get:function(){return i["default"]}}),Object.defineProperty(e,"NavLink",{enumerable:!0,get:function(){return o["default"]}}),Object.defineProperty(e,"AnchorLink",{enumerable:!0,get:function(){return a["default"]}}),Object.defineProperty(e,"useSearch",{enumerable:!0,get:function(){return s["default"]}}),Object.defineProperty(e,"useCopy",{enumerable:!0,get:function(){return u["default"]}}),Object.defineProperty(e,"useRiddle",{enumerable:!0,get:function(){return c["default"]}}),Object.defineProperty(e,"useMotions",{enumerable:!0,get:function(){return l["default"]}}),Object.defineProperty(e,"useCodeSandbox",{enumerable:!0,get:function(){return f["default"]}}),Object.defineProperty(e,"useLocaleProps",{enumerable:!0,get:function(){return p["default"]}}),Object.defineProperty(e,"useDemoUrl",{enumerable:!0,get:function(){return h["default"]}}),Object.defineProperty(e,"useApiData",{enumerable:!0,get:function(){return d["default"]}}),Object.defineProperty(e,"useTSPlaygroundUrl",{enumerable:!0,get:function(){return v["default"]}}),Object.defineProperty(e,"usePrefersColor",{enumerable:!0,get:function(){return m["default"]}});var r=g(n("+pX7")),i=g(n("uT4L")),o=g(n("yEfb")),a=g(n("bZcm")),s=g(n("XDUN")),u=g(n("o6tZ")),c=g(n("xzaY")),l=g(n("WwDD")),f=g(n("D5lA")),p=g(n("r5jq")),h=g(n("hK8i")),d=g(n("JDxl")),v=g(n("Vv4P")),m=g(n("LHz1"));function g(t){return t&&t.__esModule?t:{default:t}}},OTP3:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("8rYJ"),i=n("M2Sr"),o=n("rRIJ"),a=n("xwgP"),s=n("2gAT");function u(t){var e=a["useRef"]({}),n=a["useState"]([]),u=Object(o["a"])(n,2),c=u[0],l=u[1];function f(n){var o=!0;t.add(n,(function(t,n){var u=n.key;if(t&&(!e.current[u]||o)){var c=a["createElement"](s["a"],Object(i["a"])({},n,{holder:t}));e.current[u]=c,l((function(t){var e=t.findIndex((function(t){return t.key===n.key}));if(-1===e)return[].concat(Object(r["a"])(t),[c]);var i=Object(r["a"])(t);return i[e]=c,i}))}o=!1}))}return[f,a["createElement"](a["Fragment"],null,c)]}},OXHO:function(t,e,n){var r=n("HIsA"),i=n("bXon"),o=n("DDwO"),a=n("hXyk"),s=n("pxmn"),u=n("bWCM"),c=n("NYcp"),l=n("7+LC"),f=i("Reflect","construct"),p=l((function(){function t(){}return!(f((function(){}),[],t)instanceof t)})),h=!l((function(){f((function(){}))})),d=p||h;r({target:"Reflect",stat:!0,forced:d,sham:d},{construct:function(t,e){o(t),a(e);var n=arguments.length<3?t:o(arguments[2]);if(h&&!p)return f(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(c.apply(t,r))}var i=n.prototype,l=u(s(i)?i:Object.prototype),d=Function.apply.call(t,l,e);return s(d)?d:l}})},OXyq:function(t,e,n){var r=n("zOkb"),i="__lodash_hash_undefined__",o=Object.prototype,a=o.hasOwnProperty;function s(t){var e=this.__data__;if(r){var n=e[t];return n===i?void 0:n}return a.call(e,t)?e[t]:void 0}t.exports=s},Oaiz:function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},Ogjs:function(t,e,n){var r=n("2JD6"),i=n("5Nth"),o="__core-js_shared__",a=r[o]||i(o,{});t.exports=a},Ogoc:function(t,e,n){"use strict";t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;0!==i--;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!==i--;){var a=o[i];if(!t(e[a],n[a]))return!1}return!0}return e!==e&&n!==n}},Oowp:function(t,e,n){var r=n("cKxZ");function i(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n["return"]||n["return"]()}finally{if(u)throw a}}}}t.exports=i,t.exports["default"]=t.exports,t.exports.__esModule=!0},PBBb:function(t,e,n){"use strict";var r=n("Xf1w").forEach,i=n("1+Eb"),o=n("/5yA"),a=i("forEach"),s=o("forEach");t.exports=a&&s?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},PF9H:function(t,e,n){var r=n("HIsA"),i=n("Rkte"),o=n("kes9");r({target:"Math",stat:!0},{fscale:function(t,e,n,r,a){return o(i(t,e,n,r,a))}})},PM2V:function(t,e,n){var r=n("PaPB"),i=n("2I03");t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length or index");return n}},POrF:function(t,e,n){"use strict";var r=n("qV8l");t.exports=Function.prototype.bind||r},PR8p:function(t,e,n){var r=n("JqKL");r("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}),!0)},PaPB:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},PcCu:function(t,e,n){},"Pj+0":function(t,e,n){var r=n("bVFb");r("observable")},PlQJ:function(t,e,n){"use strict";var r=n("HIsA"),i=n("7+LC"),o=n("HC6f"),a=n("hXyk"),s=n("4dbd"),u=n("2I03"),c=n("70zE"),l=o.ArrayBuffer,f=o.DataView,p=l.prototype.slice,h=i((function(){return!new l(2).slice(1,void 0).byteLength}));r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:h},{slice:function(t,e){if(void 0!==p&&void 0===e)return p.call(a(this),t);var n=a(this).byteLength,r=s(t,n),i=s(void 0===e?n:e,n),o=new(c(this,l))(u(i-r)),h=new f(this),d=new f(o),v=0;while(r<i)d.setUint8(v++,h.getUint8(r++));return o}})},Q1Da:function(t,e,n){var r=n("kPvK");e.f=r},Q47P:function(t,e,n){var r=n("TxJF"),i=n("Jibm"),o=Object.prototype,a=o.propertyIsEnumerable,s=Object.getOwnPropertySymbols,u=s?function(t){return null==t?[]:(t=Object(t),r(s(t),(function(e){return a.call(t,e)})))}:i;t.exports=u},Q8h2:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncContainerModule=e.ContainerModule=void 0;var r=n("qSJf"),i=function(){function t(t){this.id=r.id(),this.registry=t}return t}();e.ContainerModule=i;var o=function(){function t(t){this.id=r.id(),this.registry=t}return t}();e.AsyncContainerModule=o},"QD/U":function(t,e,n){"use strict";var r=n("bXon"),i=n("2RC6"),o=n("kPvK"),a=n("Hiyu"),s=o("species");t.exports=function(t){var e=r(t),n=i.f;a&&e&&!e[s]&&n(e,s,{configurable:!0,get:function(){return this}})}},QIG3:function(t,e,n){"use strict";var r=n("2kiq"),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function c(t){return r.isMemo(t)?s:u[t["$$typeof"]]||i}u[r.ForwardRef]=a,u[r.Memo]=s;var l=Object.defineProperty,f=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,v=Object.prototype;function m(t,e,n){if("string"!==typeof e){if(v){var r=d(e);r&&r!==v&&m(t,r,n)}var i=f(e);p&&(i=i.concat(p(e)));for(var a=c(t),s=c(e),u=0;u<i.length;++u){var g=i[u];if(!o[g]&&(!n||!n[g])&&(!s||!s[g])&&(!a||!a[g])){var y=h(e,g);try{l(t,g,y)}catch(b){}}}}return t}t.exports=m},QSfS:function(t,e,n){var r=n("e9UT"),i=n("zSok"),o=n("UZM3"),a=n("BRXA"),s=n("fqR9");function u(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype["delete"]=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},"Qf+e":function(t,e,n){var r=n("JqKL");r("Int32",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},QgGs:function(t,e,n){var r=n("5MHJ"),i=n("2Swa"),o="[object Set]";function a(t){return i(t)&&r(t)==o}t.exports=a},QlC0:function(t,e,n){var r=n("kWwM"),i=n("hQlM"),o=n("Lsfr"),a=o&&o.isMap,s=a?i(a):r;t.exports=s},R64i:function(t,e,n){var r=n("kPvK"),i=r("toStringTag"),o={};o[i]="z",t.exports="[object z]"===String(o)},R6vp:function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("hXyk"),a=n("40mc"),s=n("wKMT"),u=n("Ji6T");r({target:"Set",proto:!0,real:!0,forced:i},{some:function(t){var e=o(this),n=s(e),r=a(t,arguments.length>1?arguments[1]:void 0,3);return u(n,(function(t){if(r(t,t,e))return u.stop()}),void 0,!1,!0).stopped}})},"RDD/":function(t,e,n){var r=n("kmCa"),i=n("Jjhy"),o=n("cA8S"),a=n("HwB0");function s(t,e,n){return t=o(t),e=n?void 0:e,void 0===e?i(t)?a(t):r(t):t.match(e)||[]}t.exports=s},"RH+t":function(t,e,n){"use strict";var r;n.d(e,"a",(function(){return r})),function(t){t["GAODE1.x"]="GAODE1.x",t["GAODE2.x"]="GAODE2.x",t["MAPBOX"]="MAPBOX",t["L7MAP"]="L7MAP"}(r||(r={}))},RUgK:function(t,e,n){var r=n("Hiyu"),i=n("y6vz"),o=n("2hCa"),a=n("73Ew").f,s=function(t){return function(e){var n,s=o(e),u=i(s),c=u.length,l=0,f=[];while(c>l)n=u[l++],r&&!a.call(s,n)||f.push(t?[n,s[n]]:s[n]);return f}};t.exports={entries:s(!0),values:s(!1)}},"Ra/9":function(t,e,n){var r=n("2hCa"),i=n("2I03"),o=n("4dbd"),a=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){while(c>l)if(s=u[l++],s!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},RaWV:function(t,e){function n(t,e,n,r){var i=-1,o=null==t?0:t.length;r&&o&&(n=t[++i]);while(++i<o)n=e(n,t[i],i,t);return n}t.exports=n},RgF4:function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}t.exports=r,t.exports["default"]=t.exports,t.exports.__esModule=!0},Rkte:function(t,e){t.exports=Math.scale||function(t,e,n,r,i){return 0===arguments.length||t!=t||e!=e||n!=n||r!=r||i!=i?NaN:t===1/0||t===-1/0?t:(t-e)*(i-r)/(n-e)+r}},"Rph/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.circularDependencyToException=e.listMetadataForTarget=e.listRegisteredBindingsForServiceIdentifier=e.getServiceIdentifierAsString=e.getFunctionName=void 0;var r=n("196R");function i(t){if("function"===typeof t){var e=t;return e.name}if("symbol"===typeof t)return t.toString();e=t;return e}function o(t,e,n){var r="",i=n(t,e);return 0!==i.length&&(r="\nRegistered bindings:",i.forEach((function(t){var e="Object";null!==t.implementationType&&(e=l(t.implementationType)),r=r+"\n "+e,t.constraint.metaData&&(r=r+" - "+t.constraint.metaData)}))),r}function a(t,e){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===e||a(t.parentRequest,e))}function s(t){function e(t,n){void 0===n&&(n=[]);var r=i(t.serviceIdentifier);return n.push(r),null!==t.parentRequest?e(t.parentRequest,n):n}var n=e(t);return n.reverse().join(" --\x3e ")}function u(t){t.childRequests.forEach((function(t){if(a(t,t.serviceIdentifier)){var e=s(t);throw new Error(r.CIRCULAR_DEPENDENCY+" "+e)}u(t)}))}function c(t,e){if(e.isTagged()||e.isNamed()){var n="",r=e.getNamedTag(),i=e.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==i&&i.forEach((function(t){n+=t.toString()+"\n"}))," "+t+"\n "+t+" - "+n}return" "+t}function l(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+e}e.getServiceIdentifierAsString=i,e.listRegisteredBindingsForServiceIdentifier=o,e.circularDependencyToException=u,e.listMetadataForTarget=c,e.getFunctionName=l},Rsk4:function(t,e,n){"use strict";n.r(e);var r="import React from 'react';\nimport { Scene } from '@antv/l7';\nimport { DrawControl } from '@antv/l7-draw';\nimport { GaodeMap } from '@antv/l7-maps';\n\nexport default () => {\n  React.useEffect(() => {\n    const scene = new Scene({\n      id: 'map',\n      map: new GaodeMap({\n        pitch: 0,\n        style: 'light',\n        center: [116.30470275878906, 39.88352811449648],\n        zoom: 12,\n      }),\n    });\n    scene.on('loaded', () => {\n      const drawControl = new DrawControl(scene, {\n        position: 'topright',\n        layout: 'horizontal', // horizontal vertical\n        controls: {\n          point: {\n            selectEnable: false,\n            showFeature: false,\n          },\n          line: {\n            selectEnable: false,\n            showFeature: false,\n          },\n          polygon: {\n            selectEnable: true,\n            showFeature: true,\n          },\n          circle: {\n            selectEnable: true,\n            showFeature: true,\n            showDistance: true,\n            showArea: true,\n          },\n          rect: false,\n          delete: false,\n        },\n      });\n      scene.on('click', () => {});\n      drawControl.on('draw.create', e => {\n        console.log('create', e);\n      });\n      drawControl.on('draw.delete', e => {\n        console.log('delete', e);\n      });\n      scene.addControl(drawControl);\n    });\n  }, []);\n\n  return (\n    <div\n      style={{\n        height: '800px',\n        position: 'relative',\n      }}\n      id=\"map\"\n    ></div>\n  );\n};",i="import React from 'react';\nimport { Scene } from '@antv/l7';\nimport { DrawPolygon } from '@antv/l7-draw';\nimport { GaodeMap } from '@antv/l7-maps';\nconst polygon2 = {\n  type: 'FeatureCollection',\n  features: [\n    {\n      type: 'Feature',\n      properties: {},\n      geometry: {\n        type: 'Polygon',\n        coordinates: [\n          [\n            [95.625, 43.068887774169625],\n            [116.71874999999999, 43.068887774169625],\n            [116.71874999999999, 55.97379820507658],\n            [95.625, 55.97379820507658],\n            [95.625, 43.068887774169625],\n          ],\n        ],\n      },\n    },\n  ],\n};\nconst polygon = {\n  type: 'FeatureCollection',\n  features: [\n    {\n      type: 'Feature',\n      properties: {},\n      geometry: {\n        type: 'Polygon',\n        coordinates: [\n          [\n            [116.30470275878906, 39.88352811449648],\n            [116.32083892822264, 39.89380183825623],\n            [116.31637573242188, 39.89617247892832],\n            [116.30556106567381, 39.89577737784395],\n            [116.30281448364258, 39.89709437260048],\n            [116.28822326660156, 39.90657598772839],\n            [116.27809524536131, 39.901571965464],\n            [116.27843856811523, 39.880103197763546],\n            [116.28822326660156, 39.87457027859936],\n            [116.29131317138673, 39.85928656392012],\n            [116.29371643066405, 39.852302354195864],\n            [116.3129425048828, 39.853620184014325],\n            [116.3393783569336, 39.85414730885731],\n            [116.3448715209961, 39.85796884289976],\n            [116.3448715209961, 39.87233063679467],\n            [116.3422966003418, 39.885240508711654],\n            [116.32564544677734, 39.889060310919994],\n            [116.31465911865234, 39.88813830918363],\n            [116.30470275878906, 39.88352811449648],\n          ],\n        ],\n      },\n    },\n  ],\n};\n\nexport default () => {\n  React.useEffect(() => {\n    const scene = new Scene({\n      id: 'map',\n      map: new GaodeMap({\n        pitch: 0,\n        style: 'light',\n        center: [116.30470275878906, 39.88352811449648],\n        zoom: 10,\n      }),\n    });\n    scene.on('loaded', () => {\n      const draw = new DrawPolygon(scene, {\n        data: polygon,\n      });\n\n      draw.on('draw.create', e => {\n        console.log(e);\n      });\n    });\n  }, []);\n\n  return (\n    <div\n      style={{\n        height: '400px',\n        position: 'relative',\n      }}\n      id=\"map\"\n    ></div>\n  );\n};",o="import React from 'react';\nimport { Scene } from '@antv/l7';\nimport { DrawPolygon, DrawCircle } from '@antv/l7-draw';\nimport { GaodeMap } from '@antv/l7-maps';\n\nexport default () => {\n  React.useEffect(() => {\n    const scene = new Scene({\n      id: 'map',\n      map: new GaodeMap({\n        pitch: 0,\n        style: 'light',\n        center: [116.30470275878906, 39.88352811449648],\n        zoom: 10,\n      }),\n    });\n    scene.on('loaded', () => {\n      const draw = new DrawCircle(scene, { showDistance: true, showArea: true });\n      draw.enable();\n\n      draw.on('draw.create', e => {\n        console.log(e);\n      });\n      draw.on('draw.update', e => {\n        console.log('update', e);\n      });\n    });\n  }, []);\n\n  return (\n    <div\n      style={{\n        height: '400px',\n        position: 'relative',\n      }}\n      id=\"map\"\n    ></div>\n  );\n};",a="import React, { useState } from 'react';\nimport { Scene } from '@antv/l7';\nimport { Button } from 'antd';\nimport { DrawLine } from '@antv/l7-draw';\nimport { GaodeMap } from '@antv/l7-maps';\n\nexport default () => {\n  const [drawTool, setDrawTool] = useState(undefined);\n\n  const clearAllData = () => {\n    drawTool.resetDraw();\n  };\n  const revokeData = () => {\n    if (drawTool.drawStatus === 'Drawing') {\n      drawTool.removeLatestVertex();\n    }\n  };\n  const startDraw = () => {\n    drawTool.enable();\n  };\n  React.useEffect(() => {\n    const scene = new Scene({\n      id: 'map',\n      map: new GaodeMap({\n        pitch: 0,\n        style: 'light',\n        center: [116.30470275878906, 39.88352811449648],\n        zoom: 20,\n      }),\n    });\n    scene.on('loaded', () => {\n      const draw = new DrawLine(scene, {\n        enableCustomDraw: true,\n        customDraw: async (start, end) => {\n          // const coord = await (\n          //   await fetch(\n          //     `https://restapi.amap.com/v3/direction/walking?origin=${start.lng},${start.lat}&destination=${end.lng},${end.lat}&key=261fb8bfa6d9ed16ed977d7cc62596e4`,\n          //   )\n          // ).json();\n          // if (coord.info === 'ok') {\n          //   const stepString = coord.route.paths[0].steps\n          //     .map(item => item.polyline)\n          //     .join(';');\n          //   const res = stepString.split(';').map(item => {\n          //     const [lng, lat] = item.split(',');\n          //     return {\n          //       lng: lng * 1,\n          //       lat: lat * 1,\n          //     };\n          //   });\n          //   return res;\n          // }\n          // return [end];\n          return [];\n        },\n        rewriteCursor: {\n          crosshair: 'wait',\n        },\n        checkDrawable: ({ lng, lat }, drawLine) => {\n          return lng > 116.304907;\n        },\n      });\n\n      draw.on('draw.create', e => {\n        console.log('draw.create', e);\n      });\n      draw.on('draw.update', e => {\n        console.log('update', e);\n      });\n      draw.on('draw.modechange', e => {\n        console.log('draw.modechange', e);\n      });\n      draw.on('draw.addpoint', (e, points) => {\n        console.log('draw.addpoint', e, points);\n      });\n      setDrawTool(draw);\n    });\n  }, []);\n\n  return (\n    <div>\n      <div style={{ marginBottom: '20px' }}>\n        <Button type=\"Default\" onClick={startDraw}>\n          \u5f00\u59cb\u7ed8\u5236\n        </Button>\n        <Button type=\"Default\" onClick={clearAllData}>\n          \u6e05\u9664\n        </Button>\n        <Button type=\"Default\" onClick={revokeData}>\n          \u64a4\u9500\n        </Button>\n      </div>\n      <div\n        style={{\n          height: '400px',\n          position: 'relative',\n        }}\n        id=\"map\"\n      ></div>\n    </div>\n  );\n};",s="import React from 'react';\nimport { Scene } from '@antv/l7';\nimport { DrawPolygon } from '@antv/l7-draw';\nimport { GaodeMap } from '@antv/l7-maps';\n\nexport default () => {\n  React.useEffect(() => {\n    const scene = new Scene({\n      id: 'map',\n      map: new GaodeMap({\n        pitch: 0,\n        style: 'light',\n        center: [116.30470275878906, 39.88352811449648],\n        zoom: 10,\n      }),\n    });\n    scene.on('loaded', () => {\n      const draw = new DrawPolygon(scene, { showDistance: true, showArea: true, });\n      draw.enable();\n\n      draw.on('draw.create', e => {\n        console.log(e);\n      });\n      draw.on('draw.update', e => {\n        console.log('update', e);\n      });\n    });\n  }, []);\n\n  return (\n    <div\n      style={{\n        height: '400px',\n        position: 'relative',\n      }}\n      id=\"map\"\n    ></div>\n  );\n};",u="import React from 'react';\nimport { Scene } from '@antv/l7';\nimport { DrawPolygon } from '@antv/l7-draw';\nimport { GaodeMap } from '@antv/l7-maps';\n\nexport default () => {\n  React.useEffect(() => {\n    const polygon = {\n      type: 'FeatureCollection',\n      features: [\n        {\n          type: 'Feature',\n          properties: {},\n          geometry: {\n            type: 'Polygon',\n            coordinates: [\n              [\n                [116.30470275878906, 39.88352811449648],\n                [116.32083892822264, 39.89380183825623],\n                [116.31637573242188, 39.89617247892832],\n                [116.30556106567381, 39.89577737784395],\n                [116.30281448364258, 39.89709437260048],\n                [116.28822326660156, 39.90657598772839],\n                [116.27809524536131, 39.901571965464],\n                [116.27843856811523, 39.880103197763546],\n                [116.28822326660156, 39.87457027859936],\n                [116.29131317138673, 39.85928656392012],\n                [116.29371643066405, 39.852302354195864],\n                [116.3129425048828, 39.853620184014325],\n                [116.3393783569336, 39.85414730885731],\n                [116.3448715209961, 39.85796884289976],\n                [116.3448715209961, 39.87233063679467],\n                [116.3422966003418, 39.885240508711654],\n                [116.32564544677734, 39.889060310919994],\n                [116.31465911865234, 39.88813830918363],\n                [116.30470275878906, 39.88352811449648],\n              ],\n            ],\n          },\n        },\n      ],\n    };\n    const scene = new Scene({\n      id: 'map',\n      map: new GaodeMap({\n        pitch: 0,\n        style: 'light',\n        center: [116.30470275878906, 39.88352811449648],\n        zoom: 12,\n      }),\n    });\n    scene.on('loaded', () => {\n      new DrawPolygon(scene, {\n        data: polygon,\n        showDistance: true,\n        showArea: true,\n      });\n    });\n  }, []);\n\n  return (\n    <div\n      style={{\n        height: '400px',\n        position: 'relative',\n      }}\n      id=\"map\"\n    ></div>\n  );\n};",c="import React from 'react';\nimport { Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\nimport { DrawControl } from '@antv/l7-draw';\n\nexport default () => {\n  React.useEffect(() => {\n    const scene = new Scene({\n      id: 'map',\n      map: new GaodeMap({\n        pitch: 0,\n        style: 'light',\n        center: [116.30470275878906, 39.88352811449648],\n        zoom: 10,\n      }),\n    });\n    scene.on('loaded', () => {\n      const drawControl = new DrawControl(scene, {\n        position: 'topright',\n        layout: 'horizontal', // horizontal vertical\n        controls: {\n          boxSelect: true,\n        },\n      });\n\n      scene.addControl(drawControl);\n      drawControl.on('draw.boxselect', e => {\n        console.log('update', e);\n      });\n    });\n  }, []);\n\n  return (\n    <div\n      style={{\n        height: '400px',\n        position: 'relative',\n      }}\n      id=\"map\"\n    ></div>\n  );\n};",l="import React from 'react';\nimport { Scene } from '@antv/l7';\nimport { DrawPolygon } from '@antv/l7-draw';\nimport { GaodeMap } from '@antv/l7-maps';\nimport { DrawControl } from '@antv/l7-draw';\n\nexport default () => {\n  React.useEffect(() => {\n    const scene = new Scene({\n      id: 'map',\n      map: new GaodeMap({\n        pitch: 0,\n        style: 'light',\n        center: [116.30470275878906, 39.88352811449648],\n        zoom: 10,\n      }),\n    });\n    scene.on('loaded', () => {\n      const drawControl = new DrawControl(scene, {\n        position: 'topright',\n        layout: 'horizontal', // horizontal vertical\n        controls: {\n          ruler: true,\n        },\n      });\n\n      scene.addControl(drawControl);\n    });\n  }, []);\n\n  return (\n    <div\n      style={{\n        height: '400px',\n        position: 'relative',\n      }}\n      id=\"map\"\n    ></div>\n  );\n};";e["default"]={"docs-draw_control":{component:n("51N6").default,previewerProps:{sources:{_:{jsx:r}},dependencies:{react:{version:"16.14.0"},"@antv/l7":{version:"^2.3.0"},"@antv/l7-draw":{version:"2.4.19"},"@antv/l7-maps":{version:"^2.3.0"}},identifier:"docs-draw_control"}},"docs-draw":{component:n("61WO").default,previewerProps:{sources:{_:{jsx:i}},dependencies:{react:{version:"16.14.0"},"@antv/l7":{version:"^2.3.0"},"@antv/l7-draw":{version:"2.4.19"},"@antv/l7-maps":{version:"^2.3.0"}},identifier:"docs-draw"}},"docs-draw_circle":{component:n("oYBD").default,previewerProps:{sources:{_:{jsx:o}},dependencies:{react:{version:"16.14.0"},"@antv/l7":{version:"^2.3.0"},"@antv/l7-draw":{version:"2.4.19"},"@antv/l7-maps":{version:"^2.3.0"}},identifier:"docs-draw_circle"}},"docs-draw_line":{component:n("kulY").default,previewerProps:{sources:{_:{jsx:a}},dependencies:{react:{version:">=16.9.0"},"@antv/l7":{version:"^2.3.0"},antd:{version:"4.16.13",css:"antd/dist/antd.css"},"@antv/l7-draw":{version:"2.4.19"},"@antv/l7-maps":{version:"^2.3.0"},"react-dom":{version:">=16.9.0"}},identifier:"docs-draw_line"}},"docs-draw_polygon":{component:n("99MV").default,previewerProps:{sources:{_:{jsx:s}},dependencies:{react:{version:"16.14.0"},"@antv/l7":{version:"^2.3.0"},"@antv/l7-draw":{version:"2.4.19"},"@antv/l7-maps":{version:"^2.3.0"}},identifier:"docs-draw_polygon"}},"docs-edit_polygon":{component:n("Aj84").default,previewerProps:{sources:{_:{jsx:u}},dependencies:{react:{version:"16.14.0"},"@antv/l7":{version:"^2.3.0"},"@antv/l7-draw":{version:"2.4.19"},"@antv/l7-maps":{version:"^2.3.0"}},identifier:"docs-edit_polygon"}},"\u5706\u5f62\u5de5\u5177-demo":{component:function(){var t=n("NHY1"),e=t(n("xwgP")),r=n("+RP0"),i=n("vTej"),o=n("/7QA"),a=function(){return e["default"].useEffect((function(){var t=new r.Scene({id:"map",map:new i.GaodeMap({pitch:0,style:"light",center:[116.30470275878906,39.88352811449648],zoom:10})});t.on("loaded",(function(){var e=new o.DrawControl(t,{position:"topright",layout:"horizontal",controls:{circle:!0}});t.addControl(e)}))}),[]),e["default"].createElement("div",{style:{height:"400px",position:"relative"},id:"map"})};return e["default"].createElement(a)},previewerProps:{sources:{_:{jsx:"import React from 'react';\nimport { Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\nimport { DrawControl } from '@antv/l7-draw';\n\nexport default () => {\n  React.useEffect(() => {\n    const scene = new Scene({\n      id: 'map',\n      map: new GaodeMap({\n        pitch: 0,\n        style: 'light',\n        center: [116.30470275878906, 39.88352811449648],\n        zoom: 10,\n      }),\n    });\n    scene.on('loaded', () => {\n      const drawControl = new DrawControl(scene, {\n        position: 'topright',\n        layout: 'horizontal', // horizontal vertical\n        controls: {\n          circle: true,\n        },\n      });\n\n      scene.addControl(drawControl);\n    });\n  }, []);\n\n  return (\n    <div\n      style={{\n        height: '400px',\n        position: 'relative',\n      }}\n      id=\"map\"\n    ></div>\n  );\n};"}},dependencies:{react:{version:"16.14.0"},"@antv/l7":{version:"^2.3.0"},"@antv/l7-maps":{version:"^2.3.0"},"@antv/l7-draw":{version:"2.4.19"}},identifier:"\u5706\u5f62\u5de5\u5177-demo"}},"\u5706\u5f62\u5de5\u5177-demo-1":{component:function(){var t=n("NHY1"),e=t(n("xwgP")),r=n("+RP0"),i=n("vTej"),o=n("/7QA"),a=function(){return e["default"].useEffect((function(){var t=new r.Scene({id:"map2",map:new i.GaodeMap({pitch:0,style:"light",center:[116.30470275878906,39.88352811449648],zoom:3})});t.on("loaded",(function(){var e=new o.DrawCircle(t);e.enable()}))}),[]),e["default"].createElement("div",{style:{height:"400px",position:"relative"},id:"map2"})};return e["default"].createElement(a)},previewerProps:{sources:{_:{jsx:"import React from 'react';\nimport { Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\nimport { DrawCircle } from '@antv/l7-draw';\n\nexport default () => {\n  React.useEffect(() => {\n    const scene = new Scene({\n      id: 'map2',\n      map: new GaodeMap({\n        pitch: 0,\n        style: 'light',\n        center: [116.30470275878906, 39.88352811449648],\n        zoom: 3,\n      }),\n    });\n    scene.on('loaded', () => {\n      const drawCircle = new DrawCircle(scene);\n      drawCircle.enable();\n    });\n  }, []);\n\n  return (\n    <div\n      style={{\n        height: '400px',\n        position: 'relative',\n      }}\n      id=\"map2\"\n    ></div>\n  );\n};"}},dependencies:{react:{version:"16.14.0"},"@antv/l7":{version:"^2.3.0"},"@antv/l7-maps":{version:"^2.3.0"},"@antv/l7-draw":{version:"2.4.19"}},identifier:"\u5706\u5f62\u5de5\u5177-demo-1"}},"docs-multi_select":{component:n("dxsU").default,previewerProps:{sources:{_:{jsx:c}},dependencies:{react:{version:"16.14.0"},"@antv/l7":{version:"^2.3.0"},"@antv/l7-maps":{version:"^2.3.0"},"@antv/l7-draw":{version:"2.4.19"}},identifier:"docs-multi_select"}},"\u6846\u9009\u5de5\u5177-demo":{component:function(){var t=n("NHY1"),e=t(n("xwgP")),r=n("+RP0"),i=n("vTej"),o=n("/7QA"),a=function(){return e["default"].useEffect((function(){var t=new r.Scene({id:"map2",map:new i.GaodeMap({pitch:0,style:"light",center:[116.30470275878906,39.88352811449648],zoom:10})});t.on("loaded",(function(){var e=new o.DrawBoxSelect(t);e.enable(),e.on("draw.boxselect",(function(t){console.log("select",t)}))}))}),[]),e["default"].createElement("div",{style:{height:"400px",position:"relative"},id:"map2"})};return e["default"].createElement(a)},previewerProps:{sources:{_:{jsx:"import React from 'react';\nimport { Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\nimport { DrawBoxSelect } from '@antv/l7-draw';\n\nexport default () => {\n  React.useEffect(() => {\n    const scene = new Scene({\n      id: 'map2',\n      map: new GaodeMap({\n        pitch: 0,\n        style: 'light',\n        center: [116.30470275878906, 39.88352811449648],\n        zoom: 10,\n      }),\n    });\n    scene.on('loaded', () => {\n      const drawbox = new DrawBoxSelect(scene);\n      drawbox.enable();\n      drawbox.on('draw.boxselect', e => {\n        console.log('select', e);\n      });\n    });\n  }, []);\n\n  return (\n    <div\n      style={{\n        height: '400px',\n        position: 'relative',\n      }}\n      id=\"map2\"\n    ></div>\n  );\n};"}},dependencies:{react:{version:"16.14.0"},"@antv/l7":{version:"^2.3.0"},"@antv/l7-maps":{version:"^2.3.0"},"@antv/l7-draw":{version:"2.4.19"}},identifier:"\u6846\u9009\u5de5\u5177-demo"}},"docs-ruler":{component:n("C6a0").default,previewerProps:{sources:{_:{jsx:l}},dependencies:{react:{version:"16.14.0"},"@antv/l7":{version:"^2.3.0"},"@antv/l7-draw":{version:"2.4.19"},"@antv/l7-maps":{version:"^2.3.0"}},identifier:"docs-ruler"}},"\u6d4b\u8ddd\u5de5\u5177-demo":{component:function(){var t=n("NHY1"),e=t(n("xwgP")),r=n("+RP0"),i=n("vTej"),o=n("/7QA"),a=function(){return e["default"].useEffect((function(){var t=new r.Scene({id:"map2",map:new i.GaodeMap({pitch:0,style:"light",center:[116.30470275878906,39.88352811449648],zoom:10})});t.on("loaded",(function(){var e=new o.DrawRuler(t);e.enable()}))}),[]),e["default"].createElement("div",{style:{height:"400px",position:"relative"},id:"map2"})};return e["default"].createElement(a)},previewerProps:{sources:{_:{jsx:"import React from 'react';\nimport { Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\nimport { DrawRuler } from '@antv/l7-draw';\n\nexport default () => {\n  React.useEffect(() => {\n    const scene = new Scene({\n      id: 'map2',\n      map: new GaodeMap({\n        pitch: 0,\n        style: 'light',\n        center: [116.30470275878906, 39.88352811449648],\n        zoom: 10,\n      }),\n    });\n    scene.on('loaded', () => {\n      const drawruler = new DrawRuler(scene);\n      drawruler.enable();\n    });\n  }, []);\n\n  return (\n    <div\n      style={{\n        height: '400px',\n        position: 'relative',\n      }}\n      id=\"map2\"\n    ></div>\n  );\n};"}},dependencies:{react:{version:"16.14.0"},"@antv/l7":{version:"^2.3.0"},"@antv/l7-maps":{version:"^2.3.0"},"@antv/l7-draw":{version:"2.4.19"}},identifier:"\u6d4b\u8ddd\u5de5\u5177-demo"}},"\u77e9\u5f62\u5de5\u5177-demo":{component:function(){var t=n("NHY1"),e=t(n("xwgP")),r=n("+RP0"),i=n("/7QA"),o=n("vTej"),a=function(){return e["default"].useEffect((function(){var t=new r.Scene({id:"map",map:new o.GaodeMap({pitch:0,style:"light",center:[116.30470275878906,39.88352811449648],zoom:4})});t.on("loaded",(function(){var e=new i.DrawControl(t,{position:"topright",layout:"horizontal",controls:{rect:!0,delete:!0}});t.addControl(e);var n=e.getDraw("rect");n.resetData({type:"rect",features:[[127.61718749999999,54.97761367069628],[117.42187500000001,23.241346102386135]]})}))}),[]),e["default"].createElement("div",{style:{height:"400px",position:"relative"},id:"map"})};return e["default"].createElement(a)},previewerProps:{sources:{_:{jsx:"import React from 'react';\nimport { Scene } from '@antv/l7';\nimport { DrawPolygon } from '@antv/l7-draw';\nimport { GaodeMap } from '@antv/l7-maps';\nimport { DrawControl } from '@antv/l7-draw';\n\nexport default () => {\n  React.useEffect(() => {\n    const scene = new Scene({\n      id: 'map',\n      map: new GaodeMap({\n        pitch: 0,\n        style: 'light',\n        center: [116.30470275878906, 39.88352811449648],\n        zoom: 4,\n      }),\n    });\n    scene.on('loaded', () => {\n      const drawControl = new DrawControl(scene, {\n        position: 'topright',\n        layout: 'horizontal', // horizontal vertical\n        controls: {\n          rect: true,\n          delete: true,\n        },\n      });\n      scene.addControl(drawControl);\n      const draw = drawControl.getDraw('rect');\n      draw.resetData({\n        type: 'rect',\n        features: [\n          [127.61718749999999, 54.97761367069628],\n          [117.42187500000001, 23.241346102386135],\n        ],\n      });\n    });\n  }, []);\n\n  return (\n    <div\n      style={{\n        height: '400px',\n        position: 'relative',\n      }}\n      id=\"map\"\n    ></div>\n  );\n};"}},dependencies:{react:{version:"16.14.0"},"@antv/l7":{version:"^2.3.0"},"@antv/l7-draw":{version:"2.4.19"},"@antv/l7-maps":{version:"^2.3.0"}},identifier:"\u77e9\u5f62\u5de5\u5177-demo"}},"\u77e9\u5f62\u5de5\u5177-demo-1":{component:function(){var t=n("NHY1"),e=t(n("xwgP")),r=n("+RP0"),i=n("vTej"),o=n("/7QA"),a=function(){return e["default"].useEffect((function(){var t=new r.Scene({id:"map2",map:new i.GaodeMap({pitch:0,style:"light",center:[116.30470275878906,39.88352811449648],zoom:3})});t.on("loaded",(function(){new o.DrawRect(t,{data:{type:"rect",features:[[127.61718749999999,54.97761367069628],[117.42187500000001,23.241346102386135]]}})}))}),[]),e["default"].createElement("div",{style:{height:"400px",position:"relative"},id:"map2"})};return e["default"].createElement(a)},previewerProps:{sources:{_:{jsx:"import React from 'react';\nimport { Scene } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\nimport { DrawRect } from '@antv/l7-draw';\n\nexport default () => {\n  React.useEffect(() => {\n    const scene = new Scene({\n      id: 'map2',\n      map: new GaodeMap({\n        pitch: 0,\n        style: 'light',\n        center: [116.30470275878906, 39.88352811449648],\n        zoom: 3,\n      }),\n    });\n    scene.on('loaded', () => {\n      const drawRect = new DrawRect(scene, {\n        data: {\n          type: 'rect',\n          features: [\n            [127.61718749999999, 54.97761367069628],\n            [117.42187500000001, 23.241346102386135],\n          ],\n        },\n      });\n    });\n  }, []);\n\n  return (\n    <div\n      style={{\n        height: '400px',\n        position: 'relative',\n      }}\n      id=\"map2\"\n    ></div>\n  );\n};"}},dependencies:{react:{version:"16.14.0"},"@antv/l7":{version:"^2.3.0"},"@antv/l7-maps":{version:"^2.3.0"},"@antv/l7-draw":{version:"2.4.19"}},identifier:"\u77e9\u5f62\u5de5\u5177-demo-1"}}}},Rtde:function(t,e,n){"use strict";(function(t){function n(){return n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n.apply(this,arguments)}function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e)}function i(t){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},i(t)}function o(t,e){return o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},o(t,e)}function a(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function s(t,e,n){return s=a()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=Function.bind.apply(t,r),a=new i;return n&&o(a,n.prototype),a},s.apply(null,arguments)}function u(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function c(t){var e="function"===typeof Map?new Map:void 0;return c=function(t){if(null===t||!u(t))return t;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return s(t,arguments,i(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),o(n,t)},c(t)}var l=/%[sdj%]/g,f=function(){};function p(t){if(!t||!t.length)return null;var e={};return t.forEach((function(t){var n=t.field;e[n]=e[n]||[],e[n].push(t)})),e}function h(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=1,i=e[0],o=e.length;if("function"===typeof i)return i.apply(null,e.slice(1));if("string"===typeof i){var a=String(i).replace(l,(function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(e[r++]);case"%d":return Number(e[r++]);case"%j":try{return JSON.stringify(e[r++])}catch(n){return"[Circular]"}break;default:return t}}));return a}return i}function d(t){return"string"===t||"url"===t||"hex"===t||"email"===t||"date"===t||"pattern"===t}function v(t,e){return void 0===t||null===t||(!("array"!==e||!Array.isArray(t)||t.length)||!(!d(e)||"string"!==typeof t||t))}function m(t,e,n){var r=[],i=0,o=t.length;function a(t){r.push.apply(r,t),i++,i===o&&n(r)}t.forEach((function(t){e(t,a)}))}function g(t,e,n){var r=0,i=t.length;function o(a){if(a&&a.length)n(a);else{var s=r;r+=1,s<i?e(t[s],o):n([])}}o([])}function y(t){var e=[];return Object.keys(t).forEach((function(n){e.push.apply(e,t[n])})),e}"undefined"!==typeof t&&Object({NODE_ENV:"production"});var b=function(t){function e(e,n){var r;return r=t.call(this,"Async Validation Error")||this,r.errors=e,r.fields=n,r}return r(e,t),e}(c(Error));function _(t,e,n,r){if(e.first){var i=new Promise((function(e,i){var o=function(t){return r(t),t.length?i(new b(t,p(t))):e()},a=y(t);g(a,n,o)}));return i["catch"]((function(t){return t})),i}var o=e.firstFields||[];!0===o&&(o=Object.keys(t));var a=Object.keys(t),s=a.length,u=0,c=[],l=new Promise((function(e,i){var l=function(t){if(c.push.apply(c,t),u++,u===s)return r(c),c.length?i(new b(c,p(c))):e()};a.length||(r(c),e()),a.forEach((function(e){var r=t[e];-1!==o.indexOf(e)?g(r,n,l):m(r,n,l)}))}));return l["catch"]((function(t){return t})),l}function x(t){return function(e){return e&&e.message?(e.field=e.field||t.fullField,e):{message:"function"===typeof e?e():e,field:e.field||t.fullField}}}function w(t,e){if(e)for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];"object"===typeof i&&"object"===typeof t[r]?t[r]=n({},t[r],i):t[r]=i}return t}function E(t,e,n,r,i,o){!t.required||n.hasOwnProperty(t.field)&&!v(e,o||t.type)||r.push(h(i.messages.required,t.fullField))}function S(t,e,n,r,i){(/^\s+$/.test(e)||""===e)&&r.push(h(i.messages.whitespace,t.fullField))}var C={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},T={integer:function(t){return T.number(t)&&parseInt(t,10)===t},float:function(t){return T.number(t)&&!T.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch(e){return!1}},date:function(t){return"function"===typeof t.getTime&&"function"===typeof t.getMonth&&"function"===typeof t.getYear&&!isNaN(t.getTime())},number:function(t){return!isNaN(t)&&"number"===typeof t},object:function(t){return"object"===typeof t&&!T.array(t)},method:function(t){return"function"===typeof t},email:function(t){return"string"===typeof t&&!!t.match(C.email)&&t.length<255},url:function(t){return"string"===typeof t&&!!t.match(C.url)},hex:function(t){return"string"===typeof t&&!!t.match(C.hex)}};function O(t,e,n,r,i){if(t.required&&void 0===e)E(t,e,n,r,i);else{var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],a=t.type;o.indexOf(a)>-1?T[a](e)||r.push(h(i.messages.types[a],t.fullField,t.type)):a&&typeof e!==t.type&&r.push(h(i.messages.types[a],t.fullField,t.type))}}function A(t,e,n,r,i){var o="number"===typeof t.len,a="number"===typeof t.min,s="number"===typeof t.max,u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=e,l=null,f="number"===typeof e,p="string"===typeof e,d=Array.isArray(e);if(f?l="number":p?l="string":d&&(l="array"),!l)return!1;d&&(c=e.length),p&&(c=e.replace(u,"_").length),o?c!==t.len&&r.push(h(i.messages[l].len,t.fullField,t.len)):a&&!s&&c<t.min?r.push(h(i.messages[l].min,t.fullField,t.min)):s&&!a&&c>t.max?r.push(h(i.messages[l].max,t.fullField,t.max)):a&&s&&(c<t.min||c>t.max)&&r.push(h(i.messages[l].range,t.fullField,t.min,t.max))}var k="enum";function M(t,e,n,r,i){t[k]=Array.isArray(t[k])?t[k]:[],-1===t[k].indexOf(e)&&r.push(h(i.messages[k],t.fullField,t[k].join(", ")))}function P(t,e,n,r,i){if(t.pattern)if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(e)||r.push(h(i.messages.pattern.mismatch,t.fullField,e,t.pattern));else if("string"===typeof t.pattern){var o=new RegExp(t.pattern);o.test(e)||r.push(h(i.messages.pattern.mismatch,t.fullField,e,t.pattern))}}var I={required:E,whitespace:S,type:O,range:A,enum:M,pattern:P};function L(t,e,n,r,i){var o=[],a=t.required||!t.required&&r.hasOwnProperty(t.field);if(a){if(v(e,"string")&&!t.required)return n();I.required(t,e,r,o,i,"string"),v(e,"string")||(I.type(t,e,r,o,i),I.range(t,e,r,o,i),I.pattern(t,e,r,o,i),!0===t.whitespace&&I.whitespace(t,e,r,o,i))}n(o)}function R(t,e,n,r,i){var o=[],a=t.required||!t.required&&r.hasOwnProperty(t.field);if(a){if(v(e)&&!t.required)return n();I.required(t,e,r,o,i),void 0!==e&&I.type(t,e,r,o,i)}n(o)}function D(t,e,n,r,i){var o=[],a=t.required||!t.required&&r.hasOwnProperty(t.field);if(a){if(""===e&&(e=void 0),v(e)&&!t.required)return n();I.required(t,e,r,o,i),void 0!==e&&(I.type(t,e,r,o,i),I.range(t,e,r,o,i))}n(o)}function N(t,e,n,r,i){var o=[],a=t.required||!t.required&&r.hasOwnProperty(t.field);if(a){if(v(e)&&!t.required)return n();I.required(t,e,r,o,i),void 0!==e&&I.type(t,e,r,o,i)}n(o)}function j(t,e,n,r,i){var o=[],a=t.required||!t.required&&r.hasOwnProperty(t.field);if(a){if(v(e)&&!t.required)return n();I.required(t,e,r,o,i),v(e)||I.type(t,e,r,o,i)}n(o)}function F(t,e,n,r,i){var o=[],a=t.required||!t.required&&r.hasOwnProperty(t.field);if(a){if(v(e)&&!t.required)return n();I.required(t,e,r,o,i),void 0!==e&&(I.type(t,e,r,o,i),I.range(t,e,r,o,i))}n(o)}function z(t,e,n,r,i){var o=[],a=t.required||!t.required&&r.hasOwnProperty(t.field);if(a){if(v(e)&&!t.required)return n();I.required(t,e,r,o,i),void 0!==e&&(I.type(t,e,r,o,i),I.range(t,e,r,o,i))}n(o)}function B(t,e,n,r,i){var o=[],a=t.required||!t.required&&r.hasOwnProperty(t.field);if(a){if((void 0===e||null===e)&&!t.required)return n();I.required(t,e,r,o,i,"array"),void 0!==e&&null!==e&&(I.type(t,e,r,o,i),I.range(t,e,r,o,i))}n(o)}function U(t,e,n,r,i){var o=[],a=t.required||!t.required&&r.hasOwnProperty(t.field);if(a){if(v(e)&&!t.required)return n();I.required(t,e,r,o,i),void 0!==e&&I.type(t,e,r,o,i)}n(o)}var V="enum";function q(t,e,n,r,i){var o=[],a=t.required||!t.required&&r.hasOwnProperty(t.field);if(a){if(v(e)&&!t.required)return n();I.required(t,e,r,o,i),void 0!==e&&I[V](t,e,r,o,i)}n(o)}function G(t,e,n,r,i){var o=[],a=t.required||!t.required&&r.hasOwnProperty(t.field);if(a){if(v(e,"string")&&!t.required)return n();I.required(t,e,r,o,i),v(e,"string")||I.pattern(t,e,r,o,i)}n(o)}function H(t,e,n,r,i){var o=[],a=t.required||!t.required&&r.hasOwnProperty(t.field);if(a){if(v(e,"date")&&!t.required)return n();var s;if(I.required(t,e,r,o,i),!v(e,"date"))s=e instanceof Date?e:new Date(e),I.type(t,s,r,o,i),s&&I.range(t,s.getTime(),r,o,i)}n(o)}function W(t,e,n,r,i){var o=[],a=Array.isArray(e)?"array":typeof e;I.required(t,e,r,o,i,a),n(o)}function X(t,e,n,r,i){var o=t.type,a=[],s=t.required||!t.required&&r.hasOwnProperty(t.field);if(s){if(v(e,o)&&!t.required)return n();I.required(t,e,r,a,i,o),v(e,o)||I.type(t,e,r,a,i)}n(a)}function Z(t,e,n,r,i){var o=[],a=t.required||!t.required&&r.hasOwnProperty(t.field);if(a){if(v(e)&&!t.required)return n();I.required(t,e,r,o,i)}n(o)}var Y={string:L,method:R,number:D,boolean:N,regexp:j,integer:F,float:z,array:B,object:U,enum:q,pattern:G,date:H,url:X,hex:X,email:X,required:W,any:Z};function K(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var J=K();function Q(t){this.rules=null,this._messages=J,this.define(t)}Q.prototype={messages:function(t){return t&&(this._messages=w(K(),t)),this._messages},define:function(t){if(!t)throw new Error("Cannot configure a schema with no rules");if("object"!==typeof t||Array.isArray(t))throw new Error("Rules must be an object");var e,n;for(e in this.rules={},t)t.hasOwnProperty(e)&&(n=t[e],this.rules[e]=Array.isArray(n)?n:[n])},validate:function(t,e,r){var i=this;void 0===e&&(e={}),void 0===r&&(r=function(){});var o,a,s=t,u=e,c=r;if("function"===typeof u&&(c=u,u={}),!this.rules||0===Object.keys(this.rules).length)return c&&c(),Promise.resolve();function l(t){var e,n=[],r={};function i(t){var e;Array.isArray(t)?n=(e=n).concat.apply(e,t):n.push(t)}for(e=0;e<t.length;e++)i(t[e]);n.length?r=p(n):(n=null,r=null),c(n,r)}if(u.messages){var f=this.messages();f===J&&(f=K()),w(f,u.messages),u.messages=f}else u.messages=this.messages();var d={},v=u.keys||Object.keys(this.rules);v.forEach((function(e){o=i.rules[e],a=s[e],o.forEach((function(r){var o=r;"function"===typeof o.transform&&(s===t&&(s=n({},s)),a=s[e]=o.transform(a)),o="function"===typeof o?{validator:o}:n({},o),o.validator=i.getValidationMethod(o),o.field=e,o.fullField=o.fullField||e,o.type=i.getType(o),o.validator&&(d[e]=d[e]||[],d[e].push({rule:o,value:a,source:s,field:e}))}))}));var m={};return _(d,u,(function(t,e){var r,i=t.rule,o=("object"===i.type||"array"===i.type)&&("object"===typeof i.fields||"object"===typeof i.defaultField);function a(t,e){return n({},e,{fullField:i.fullField+"."+t})}function s(r){void 0===r&&(r=[]);var s=r;if(Array.isArray(s)||(s=[s]),!u.suppressWarning&&s.length&&Q.warning("async-validator:",s),s.length&&void 0!==i.message&&(s=[].concat(i.message)),s=s.map(x(i)),u.first&&s.length)return m[i.field]=1,e(s);if(o){if(i.required&&!t.value)return void 0!==i.message?s=[].concat(i.message).map(x(i)):u.error&&(s=[u.error(i,h(u.messages.required,i.field))]),e(s);var c={};if(i.defaultField)for(var l in t.value)t.value.hasOwnProperty(l)&&(c[l]=i.defaultField);for(var f in c=n({},c,t.rule.fields),c)if(c.hasOwnProperty(f)){var p=Array.isArray(c[f])?c[f]:[c[f]];c[f]=p.map(a.bind(null,f))}var d=new Q(c);d.messages(u.messages),t.rule.options&&(t.rule.options.messages=u.messages,t.rule.options.error=u.error),d.validate(t.value,t.rule.options||u,(function(t){var n=[];s&&s.length&&n.push.apply(n,s),t&&t.length&&n.push.apply(n,t),e(n.length?n:null)}))}else e(s)}o=o&&(i.required||!i.required&&t.value),i.field=t.field,i.asyncValidator?r=i.asyncValidator(i,t.value,s,t.source,u):i.validator&&(r=i.validator(i,t.value,s,t.source,u),!0===r?s():!1===r?s(i.message||i.field+" fails"):r instanceof Array?s(r):r instanceof Error&&s(r.message)),r&&r.then&&r.then((function(){return s()}),(function(t){return s(t)}))}),(function(t){l(t)}))},getType:function(t){if(void 0===t.type&&t.pattern instanceof RegExp&&(t.type="pattern"),"function"!==typeof t.validator&&t.type&&!Y.hasOwnProperty(t.type))throw new Error(h("Unknown rule type %s",t.type));return t.type||"string"},getValidationMethod:function(t){if("function"===typeof t.validator)return t.validator;var e=Object.keys(t),n=e.indexOf("message");return-1!==n&&e.splice(n,1),1===e.length&&"required"===e[0]?Y.required:Y[this.getType(t)]||!1}},Q.register=function(t,e){if("function"!==typeof e)throw new Error("Cannot register a validator by type, validator is not a function");Y[t]=e},Q.warning=f,Q.messages=J,Q.validators=Y,e["a"]=Q}).call(this,n("7vYp"))},Rtff:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));n("lqff");function r(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function i(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}},"Rx/k":function(t,e,n){"use strict";var r="%[a-f0-9]{2}",i=new RegExp(r,"gi"),o=new RegExp("("+r+")+","gi");function a(t,e){try{return decodeURIComponent(t.join(""))}catch(i){}if(1===t.length)return t;e=e||1;var n=t.slice(0,e),r=t.slice(e);return Array.prototype.concat.call([],a(n),a(r))}function s(t){try{return decodeURIComponent(t)}catch(r){for(var e=t.match(i),n=1;n<e.length;n++)t=a(e,n).join(""),e=t.match(i);return t}}function u(t){var e={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},n=o.exec(t);while(n){try{e[n[0]]=decodeURIComponent(n[0])}catch(c){var r=s(n[0]);r!==n[0]&&(e[n[0]]=r)}n=o.exec(t)}e["%C2"]="\ufffd";for(var i=Object.keys(e),a=0;a<i.length;a++){var u=i[a];t=t.replace(new RegExp(u,"g"),e[u])}return t}t.exports=function(t){if("string"!==typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return u(t)}}},S6jd:function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("LTDN");r({target:"Map",proto:!0,real:!0,forced:i},{deleteAll:function(){return o.apply(this,arguments)}})},S8CN:function(t,e){function n(t,e,n,r){var i=t.length,o=n+(r?1:-1);while(r?o--:++o<i)if(e(t[o],o,t))return o;return-1}t.exports=n},SCzs:function(t,e,n){var r=n("HIsA"),i=n("icJ8"),o=n("hXyk"),a=i.toKey,s=i.set;r({target:"Reflect",stat:!0},{defineMetadata:function(t,e,n){var r=arguments.length<4?void 0:a(arguments[3]);s(t,e,o(n),r)}})},SHxf:function(t,e,n){var r=n("m9sd"),i=n("KmIr");function o(t,e){return t&&r(e,i(e),t)}t.exports=o},SUfK:function(t,e,n){"use strict";function r(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}n.d(e,"a",(function(){return r}))},SrKn:function(t,e,n){"use strict";t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,(function(t){return"%".concat(t.charCodeAt(0).toString(16).toUpperCase())}))}},T0ZP:function(t,e,n){(function(e,n){t.exports=n()})(0,(function(){"use strict";var t=function(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array||t instanceof Uint8ClampedArray},e=function(t,e){for(var n=Object.keys(e),r=0;r<n.length;++r)t[n[r]]=e[n[r]];return t},n="\n";function r(t){return"undefined"!==typeof atob?atob(t):"base64:"+t}function i(t){var e=new Error("(regl) "+t);throw console.error(e),e}function o(t,e){t||i(e)}function a(t){return t?": "+t:""}function s(t,e,n){t in e||i("unknown parameter ("+t+")"+a(n)+". possible values: "+Object.keys(e).join())}function u(e,n){t(e)||i("invalid parameter type"+a(n)+". must be a typed array")}function c(t,e){switch(e){case"number":return"number"===typeof t;case"object":return"object"===typeof t;case"string":return"string"===typeof t;case"boolean":return"boolean"===typeof t;case"function":return"function"===typeof t;case"undefined":return"undefined"===typeof t;case"symbol":return"symbol"===typeof t}}function l(t,e,n){c(t,e)||i("invalid parameter type"+a(n)+". expected "+e+", got "+typeof t)}function f(t,e){t>=0&&(0|t)===t||i("invalid parameter type, ("+t+")"+a(e)+". must be a nonnegative integer")}function p(t,e,n){e.indexOf(t)<0&&i("invalid value"+a(n)+". must be one of: "+e)}var h=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function d(t){Object.keys(t).forEach((function(t){h.indexOf(t)<0&&i('invalid regl constructor argument "'+t+'". must be one of '+h)}))}function v(t,e){t+="";while(t.length<e)t=" "+t;return t}function m(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function g(t,e){this.number=t,this.line=e,this.errors=[]}function y(t,e,n){this.file=t,this.line=e,this.message=n}function b(){var t=new Error,e=(t.stack||t).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(e);if(n)return n[1];var r=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(e);return r?r[1]:"unknown"}function _(){var t=new Error,e=(t.stack||t).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(e);if(n)return n[1];var r=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(e);return r?r[1]:"unknown"}function x(t,e){var n=t.split("\n"),i=1,o=0,a={unknown:new m,0:new m};a.unknown.name=a[0].name=e||b(),a.unknown.lines.push(new g(0,""));for(var s=0;s<n.length;++s){var u=n[s],c=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(u);if(c)switch(c[1]){case"line":var l=/(\d+)(\s+\d+)?/.exec(c[2]);l&&(i=0|l[1],l[2]&&(o=0|l[2],o in a||(a[o]=new m)));break;case"define":var f=/SHADER_NAME(_B64)?\s+(.*)$/.exec(c[2]);f&&(a[o].name=f[1]?r(f[2]):f[2]);break}a[o].lines.push(new g(i++,u))}return Object.keys(a).forEach((function(t){var e=a[t];e.lines.forEach((function(t){e.index[t.number]=t}))})),a}function w(t){var e=[];return t.split("\n").forEach((function(t){if(!(t.length<5)){var n=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(t);n?e.push(new y(0|n[1],0|n[2],n[3].trim())):t.length>0&&e.push(new y("unknown",0,t))}})),e}function E(t,e){e.forEach((function(e){var n=t[e.file];if(n){var r=n.index[e.line];if(r)return r.errors.push(e),void(n.hasErrors=!0)}t.unknown.hasErrors=!0,t.unknown.lines[0].errors.push(e)}))}function S(t,e,r,i,a){if(!t.getShaderParameter(e,t.COMPILE_STATUS)){var s=t.getShaderInfoLog(e),u=i===t.FRAGMENT_SHADER?"fragment":"vertex";P(r,"string",u+" shader source must be a string",a);var c=x(r,a),l=w(s);E(c,l),Object.keys(c).forEach((function(t){var e=c[t];if(e.hasErrors){var r=[""],i=[""];o("file number "+t+": "+e.name+"\n","color:red;text-decoration:underline;font-weight:bold"),e.lines.forEach((function(t){if(t.errors.length>0){o(v(t.number,4)+"|  ","background-color:yellow; font-weight:bold"),o(t.line+n,"color:red; background-color:yellow; font-weight:bold");var e=0;t.errors.forEach((function(r){var i=r.message,a=/^\s*'(.*)'\s*:\s*(.*)$/.exec(i);if(a){var s=a[1];switch(i=a[2],s){case"assign":s="=";break}e=Math.max(t.line.indexOf(s,e),0)}else e=0;o(v("| ",6)),o(v("^^^",e+3)+n,"font-weight:bold"),o(v("| ",6)),o(i+n,"font-weight:bold")})),o(v("| ",6)+n)}else o(v(t.number,4)+"|  "),o(t.line+n,"color:red")})),"undefined"===typeof document||window.chrome?console.log(r.join("")):(i[0]=r.join("%c"),console.log.apply(console,i))}function o(t,e){r.push(t),i.push(e||"")}})),o.raise("Error compiling "+u+" shader, "+c[0].name)}}function C(t,e,r,i,a){if(!t.getProgramParameter(e,t.LINK_STATUS)){var s=t.getProgramInfoLog(e),u=x(r,a),c=x(i,a),l='Error linking program with vertex shader, "'+c[0].name+'", and fragment shader "'+u[0].name+'"';"undefined"!==typeof document?console.log("%c"+l+n+"%c"+s,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(l+n+s),o.raise(l)}}function T(t){t._commandRef=b()}function O(t,e,n,r){function i(t){return t?r.id(t):0}function o(t,e){Object.keys(e).forEach((function(e){t[r.id(e)]=!0}))}T(t),t._fragId=i(t["static"].frag),t._vertId=i(t["static"].vert);var a=t._uniformSet={};o(a,e["static"]),o(a,e.dynamic);var s=t._attributeSet={};o(s,n["static"]),o(s,n.dynamic),t._hasCount="count"in t["static"]||"count"in t.dynamic||"elements"in t["static"]||"elements"in t.dynamic}function A(t,e){var n=_();i(t+" in command "+(e||b())+("unknown"===n?"":" called from "+n))}function k(t,e,n){t||A(e,n||b())}function M(t,e,n,r){t in e||A("unknown parameter ("+t+")"+a(n)+". possible values: "+Object.keys(e).join(),r||b())}function P(t,e,n,r){c(t,e)||A("invalid parameter type"+a(n)+". expected "+e+", got "+typeof t,r||b())}function I(t){t()}function L(t,e,n){t.texture?p(t.texture._texture.internalformat,e,"unsupported texture format for attachment"):p(t.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")}var R=33071,D=9728,N=9984,j=9985,F=9986,z=9987,B=5120,U=5121,V=5122,q=5123,G=5124,H=5125,W=5126,X=32819,Z=32820,Y=33635,K=34042,J=36193,Q={};function $(t,e){return t===Z||t===X||t===Y?2:t===K?4:Q[t]*e}function tt(t){return!(t&t-1)&&!!t}function et(t,e,n){var r,i=e.width,a=e.height,s=e.channels;o(i>0&&i<=n.maxTextureSize&&a>0&&a<=n.maxTextureSize,"invalid texture shape"),t.wrapS===R&&t.wrapT===R||o(tt(i)&&tt(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===e.mipmask?1!==i&&1!==a&&o(t.minFilter!==N&&t.minFilter!==F&&t.minFilter!==j&&t.minFilter!==z,"min filter requires mipmap"):(o(tt(i)&&tt(a),"texture must be a square power of 2 to support mipmapping"),o(e.mipmask===(i<<1)-1,"missing or incomplete mipmap data")),e.type===W&&(n.extensions.indexOf("oes_texture_float_linear")<0&&o(t.minFilter===D&&t.magFilter===D,"filter not supported, must enable oes_texture_float_linear"),o(!t.genMipmaps,"mipmap generation not supported with float textures"));var u=e.images;for(r=0;r<16;++r)if(u[r]){var c=i>>r,l=a>>r;o(e.mipmask&1<<r,"missing mipmap data");var f=u[r];if(o(f.width===c&&f.height===l,"invalid shape for mip images"),o(f.format===e.format&&f.internalformat===e.internalformat&&f.type===e.type,"incompatible type for mip image"),f.compressed);else if(f.data){var p=Math.ceil($(f.type,s)*c/f.unpackAlignment)*f.unpackAlignment;o(f.data.byteLength===p*l,"invalid data for image, buffer size is inconsistent with image format")}else f.element||f.copy}else t.genMipmaps||o(0===(e.mipmask&1<<r),"extra mipmap data");e.compressed&&o(!t.genMipmaps,"mipmap generation for compressed images not supported")}function nt(t,e,n,r){var i=t.width,a=t.height,s=t.channels;o(i>0&&i<=r.maxTextureSize&&a>0&&a<=r.maxTextureSize,"invalid texture shape"),o(i===a,"cube map must be square"),o(e.wrapS===R&&e.wrapT===R,"wrap mode not supported by cube map");for(var u=0;u<n.length;++u){var c=n[u];o(c.width===i&&c.height===a,"inconsistent cube map face shape"),e.genMipmaps&&(o(!c.compressed,"can not generate mipmap for compressed textures"),o(1===c.mipmask,"can not specify mipmaps and generate mipmaps"));for(var l=c.images,f=0;f<16;++f){var p=l[f];if(p){var h=i>>f,d=a>>f;o(c.mipmask&1<<f,"missing mipmap data"),o(p.width===h&&p.height===d,"invalid shape for mip images"),o(p.format===t.format&&p.internalformat===t.internalformat&&p.type===t.type,"incompatible type for mip image"),p.compressed||(p.data?o(p.data.byteLength===h*d*Math.max($(p.type,s),p.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):p.element||p.copy)}}}}Q[B]=Q[U]=1,Q[V]=Q[q]=Q[J]=Q[Y]=Q[X]=Q[Z]=2,Q[G]=Q[H]=Q[W]=Q[K]=4;var rt=e(o,{optional:I,raise:i,commandRaise:A,command:k,parameter:s,commandParameter:M,constructor:d,type:l,commandType:P,isTypedArray:u,nni:f,oneOf:p,shaderError:S,linkError:C,callSite:_,saveCommandRef:T,saveDrawInfo:O,framebufferFormat:L,guessCommand:b,texture2D:et,textureCube:nt}),it=0,ot=0,at=5,st=6;function ut(t,e){this.id=it++,this.type=t,this.data=e}function ct(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function lt(t){if(0===t.length)return[];var e=t.charAt(0),n=t.charAt(t.length-1);if(t.length>1&&e===n&&('"'===e||"'"===e))return['"'+ct(t.substr(1,t.length-2))+'"'];var r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t);if(r)return lt(t.substr(0,r.index)).concat(lt(r[1])).concat(lt(t.substr(r.index+r[0].length)));var i=t.split(".");if(1===i.length)return['"'+ct(t)+'"'];for(var o=[],a=0;a<i.length;++a)o=o.concat(lt(i[a]));return o}function ft(t){return"["+lt(t).join("][")+"]"}function pt(t,e){return new ut(t,ft(e+""))}function ht(t){return"function"===typeof t&&!t._reglType||t instanceof ut}function dt(t,e){return"function"===typeof t?new ut(ot,t):"number"===typeof t||"boolean"===typeof t?new ut(at,t):Array.isArray(t)?new ut(st,t.map((function(t,n){return dt(t,e+"["+n+"]")}))):t instanceof ut?t:void rt(!1,"invalid option type in uniform "+e)}var vt={DynamicVariable:ut,define:pt,isDynamic:ht,unbox:dt,accessor:ft},mt={next:"function"===typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"===typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},gt="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function yt(){var t={"":0},e=[""];return{id:function(n){var r=t[n];return r||(r=t[n]=e.length,e.push(n),r)},str:function(t){return e[t]}}}function bt(t,n,r){var i,o=document.createElement("canvas");function a(){var n=window.innerWidth,i=window.innerHeight;if(t!==document.body){var a=t.getBoundingClientRect();n=a.right-a.left,i=a.bottom-a.top}o.width=r*n,o.height=r*i,e(o.style,{width:n+"px",height:i+"px"})}function s(){i?i.disconnect():window.removeEventListener("resize",a),t.removeChild(o)}return e(o.style,{border:0,margin:0,padding:0,top:0,left:0}),t.appendChild(o),t===document.body&&(o.style.position="absolute",e(t.style,{margin:0,padding:0})),t!==document.body&&"function"===typeof ResizeObserver?(i=new ResizeObserver((function(){setTimeout(a)})),i.observe(t)):window.addEventListener("resize",a,!1),a(),{canvas:o,onDestroy:s}}function _t(t,e){function n(n){try{return t.getContext(n,e)}catch(r){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}function xt(t){return"string"===typeof t.nodeName&&"function"===typeof t.appendChild&&"function"===typeof t.getBoundingClientRect}function wt(t){return"function"===typeof t.drawArrays||"function"===typeof t.drawElements}function Et(t){return"string"===typeof t?t.split():(rt(Array.isArray(t),"invalid extension array"),t)}function St(t){return"string"===typeof t?(rt("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(t)):t}function Ct(t){var e,n,r,i,o=t||{},a={},s=[],u=[],c="undefined"===typeof window?1:window.devicePixelRatio,l=!1,f=function(t){t&&rt.raise(t)},p=function(){};if("string"===typeof o?(rt("undefined"!==typeof document,"selector queries only supported in DOM enviroments"),e=document.querySelector(o),rt(e,"invalid query string for element")):"object"===typeof o?xt(o)?e=o:wt(o)?(i=o,r=i.canvas):(rt.constructor(o),"gl"in o?i=o.gl:"canvas"in o?r=St(o.canvas):"container"in o&&(n=St(o.container)),"attributes"in o&&(a=o.attributes,rt.type(a,"object","invalid context attributes")),"extensions"in o&&(s=Et(o.extensions)),"optionalExtensions"in o&&(u=Et(o.optionalExtensions)),"onDone"in o&&(rt.type(o.onDone,"function","invalid or missing onDone callback"),f=o.onDone),"profile"in o&&(l=!!o.profile),"pixelRatio"in o&&(c=+o.pixelRatio,rt(c>0,"invalid pixel ratio"))):rt.raise("invalid arguments to regl"),e&&("canvas"===e.nodeName.toLowerCase()?r=e:n=e),!i){if(!r){rt("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");var h=bt(n||document.body,f,c);if(!h)return null;r=h.canvas,p=h.onDestroy}void 0===a.premultipliedAlpha&&(a.premultipliedAlpha=!0),i=_t(r,a)}return i?{gl:i,canvas:r,container:n,extensions:s,optionalExtensions:u,pixelRatio:c,profile:l,onDone:f,onDestroy:p}:(p(),f("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Tt(t,e){var n={};function r(e){rt.type(e,"string","extension name must be string");var r,i=e.toLowerCase();try{r=n[i]=t.getExtension(i)}catch(o){}return!!r}for(var i=0;i<e.extensions.length;++i){var o=e.extensions[i];if(!r(o))return e.onDestroy(),e.onDone('"'+o+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach((function(t){if(n[t]&&!r(t))throw new Error("(regl): error restoring extension "+t)}))}}}function Ot(t,e){for(var n=Array(t),r=0;r<t;++r)n[r]=e(r);return n}var At=5120,kt=5121,Mt=5122,Pt=5123,It=5124,Lt=5125,Rt=5126;function Dt(t){for(var e=16;e<=1<<28;e*=16)if(t<=e)return e;return 0}function Nt(t){var e,n;return e=(t>65535)<<4,t>>>=e,n=(t>255)<<3,t>>>=n,e|=n,n=(t>15)<<2,t>>>=n,e|=n,n=(t>3)<<1,t>>>=n,e|=n,e|t>>1}function jt(){var t=Ot(8,(function(){return[]}));function e(e){var n=Dt(e),r=t[Nt(n)>>2];return r.length>0?r.pop():new ArrayBuffer(n)}function n(e){t[Nt(e.byteLength)>>2].push(e)}function r(t,n){var r=null;switch(t){case At:r=new Int8Array(e(n),0,n);break;case kt:r=new Uint8Array(e(n),0,n);break;case Mt:r=new Int16Array(e(2*n),0,n);break;case Pt:r=new Uint16Array(e(2*n),0,n);break;case It:r=new Int32Array(e(4*n),0,n);break;case Lt:r=new Uint32Array(e(4*n),0,n);break;case Rt:r=new Float32Array(e(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r}function i(t){n(t.buffer)}return{alloc:e,free:n,allocType:r,freeType:i}}var Ft=jt();Ft.zero=jt();var zt=3408,Bt=3410,Ut=3411,Vt=3412,qt=3413,Gt=3414,Ht=3415,Wt=33901,Xt=33902,Zt=3379,Yt=3386,Kt=34921,Jt=36347,Qt=36348,$t=35661,te=35660,ee=34930,ne=36349,re=34076,ie=34024,oe=7936,ae=7937,se=7938,ue=35724,ce=34047,le=36063,fe=34852,pe=3553,he=34067,de=34069,ve=33984,me=6408,ge=5126,ye=5121,be=36160,_e=36053,xe=36064,we=16384,Ee=function(t,e){var n=1;e.ext_texture_filter_anisotropic&&(n=t.getParameter(ce));var r=1,i=1;e.webgl_draw_buffers&&(r=t.getParameter(fe),i=t.getParameter(le));var o=!!e.oes_texture_float;if(o){var a=t.createTexture();t.bindTexture(pe,a),t.texImage2D(pe,0,me,1,1,0,me,ge,null);var s=t.createFramebuffer();if(t.bindFramebuffer(be,s),t.framebufferTexture2D(be,xe,pe,a,0),t.bindTexture(pe,null),t.checkFramebufferStatus(be)!==_e)o=!1;else{t.viewport(0,0,1,1),t.clearColor(1,0,0,1),t.clear(we);var u=Ft.allocType(ge,4);t.readPixels(0,0,1,1,me,ge,u),t.getError()?o=!1:(t.deleteFramebuffer(s),t.deleteTexture(a),o=1===u[0]),Ft.freeType(u)}}var c="undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),l=!0;if(!c){var f=t.createTexture(),p=Ft.allocType(ye,36);t.activeTexture(ve),t.bindTexture(he,f),t.texImage2D(de,0,me,3,3,0,me,ye,p),Ft.freeType(p),t.bindTexture(he,null),t.deleteTexture(f),l=!t.getError()}return{colorBits:[t.getParameter(Bt),t.getParameter(Ut),t.getParameter(Vt),t.getParameter(qt)],depthBits:t.getParameter(Gt),stencilBits:t.getParameter(Ht),subpixelBits:t.getParameter(zt),extensions:Object.keys(e).filter((function(t){return!!e[t]})),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:t.getParameter(Wt),lineWidthDims:t.getParameter(Xt),maxViewportDims:t.getParameter(Yt),maxCombinedTextureUnits:t.getParameter($t),maxCubeMapSize:t.getParameter(re),maxRenderbufferSize:t.getParameter(ie),maxTextureUnits:t.getParameter(ee),maxTextureSize:t.getParameter(Zt),maxAttributes:t.getParameter(Kt),maxVertexUniforms:t.getParameter(Jt),maxVertexTextureUnits:t.getParameter(te),maxVaryingVectors:t.getParameter(Qt),maxFragmentUniforms:t.getParameter(ne),glsl:t.getParameter(ue),renderer:t.getParameter(ae),vendor:t.getParameter(oe),version:t.getParameter(se),readFloat:o,npotTextureCube:l}};function Se(e){return!!e&&"object"===typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"===typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||t(e.data))}var Ce=function(t){return Object.keys(t).map((function(e){return t[e]}))},Te={shape:Ie,flatten:Pe};function Oe(t,e,n){for(var r=0;r<e;++r)n[r]=t[r]}function Ae(t,e,n,r){for(var i=0,o=0;o<e;++o)for(var a=t[o],s=0;s<n;++s)r[i++]=a[s]}function ke(t,e,n,r,i,o){for(var a=o,s=0;s<e;++s)for(var u=t[s],c=0;c<n;++c)for(var l=u[c],f=0;f<r;++f)i[a++]=l[f]}function Me(t,e,n,r,i){for(var o=1,a=n+1;a<e.length;++a)o*=e[a];var s=e[n];if(e.length-n===4){var u=e[n+1],c=e[n+2],l=e[n+3];for(a=0;a<s;++a)ke(t[a],u,c,l,r,i),i+=o}else for(a=0;a<s;++a)Me(t[a],e,n+1,r,i),i+=o}function Pe(t,e,n,r){var i=1;if(e.length)for(var o=0;o<e.length;++o)i*=e[o];else i=0;var a=r||Ft.allocType(n,i);switch(e.length){case 0:break;case 1:Oe(t,e[0],a);break;case 2:Ae(t,e[0],e[1],a);break;case 3:ke(t,e[0],e[1],e[2],a,0);break;default:Me(t,e,0,a,0)}return a}function Ie(t){for(var e=[],n=t;n.length;n=n[0])e.push(n.length);return e}var Le={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Re=5120,De=5122,Ne=5124,je=5121,Fe=5123,ze=5125,Be=5126,Ue=5126,Ve={int8:Re,int16:De,int32:Ne,uint8:je,uint16:Fe,uint32:ze,float:Be,float32:Ue},qe=35048,Ge=35040,He={dynamic:qe,stream:Ge,static:35044},We=Te.flatten,Xe=Te.shape,Ze=35044,Ye=35040,Ke=5121,Je=5126,Qe=[];function $e(t){return 0|Le[Object.prototype.toString.call(t)]}function tn(t,e){for(var n=0;n<e.length;++n)t[n]=e[n]}function en(t,e,n,r,i,o,a){for(var s=0,u=0;u<n;++u)for(var c=0;c<r;++c)t[s++]=e[i*u+o*c+a]}function nn(e,n,r,i){var o=0,a={};function s(t){this.id=o++,this.buffer=e.createBuffer(),this.type=t,this.usage=Ze,this.byteLength=0,this.dimension=1,this.dtype=Ke,this.persistentData=null,r.profile&&(this.stats={size:0})}s.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},s.prototype.destroy=function(){h(this)};var u=[];function c(t,e){var n=u.pop();return n||(n=new s(t)),n.bind(),p(n,e,Ye,0,1,!1),n}function l(t){u.push(t)}function f(t,n,r){t.byteLength=n.byteLength,e.bufferData(t.type,n,r)}function p(e,n,r,i,o,a){var s,u;if(e.usage=r,Array.isArray(n)){if(e.dtype=i||Je,n.length>0)if(Array.isArray(n[0])){s=Xe(n);for(var c=1,l=1;l<s.length;++l)c*=s[l];e.dimension=c,u=We(n,s,e.dtype),f(e,u,r),a?e.persistentData=u:Ft.freeType(u)}else if("number"===typeof n[0]){e.dimension=o;var p=Ft.allocType(e.dtype,n.length);tn(p,n),f(e,p,r),a?e.persistentData=p:Ft.freeType(p)}else t(n[0])?(e.dimension=n[0].length,e.dtype=i||$e(n[0])||Je,u=We(n,[n.length,n[0].length],e.dtype),f(e,u,r),a?e.persistentData=u:Ft.freeType(u)):rt.raise("invalid buffer data")}else if(t(n))e.dtype=i||$e(n),e.dimension=o,f(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(Se(n)){s=n.shape;var h=n.stride,d=n.offset,v=0,m=0,g=0,y=0;1===s.length?(v=s[0],m=1,g=h[0],y=0):2===s.length?(v=s[0],m=s[1],g=h[0],y=h[1]):rt.raise("invalid shape"),e.dtype=i||$e(n.data)||Je,e.dimension=m;var b=Ft.allocType(e.dtype,v*m);en(b,n.data,v,m,g,y,d),f(e,b,r),a?e.persistentData=b:Ft.freeType(b)}else n instanceof ArrayBuffer?(e.dtype=Ke,e.dimension=o,f(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n)))):rt.raise("invalid buffer data")}function h(t){n.bufferCount--,i(t);var r=t.buffer;rt(r,"buffer must not be deleted already"),e.deleteBuffer(r),t.buffer=null,delete a[t.id]}function d(i,o,u,c){n.bufferCount++;var l=new s(o);function f(n){var i=Ze,o=null,a=0,s=0,u=1;return Array.isArray(n)||t(n)||Se(n)||n instanceof ArrayBuffer?o=n:"number"===typeof n?a=0|n:n&&(rt.type(n,"object","buffer arguments must be an object, a number or an array"),"data"in n&&(rt(null===o||Array.isArray(o)||t(o)||Se(o),"invalid data for buffer"),o=n.data),"usage"in n&&(rt.parameter(n.usage,He,"invalid buffer usage"),i=He[n.usage]),"type"in n&&(rt.parameter(n.type,Ve,"invalid buffer type"),s=Ve[n.type]),"dimension"in n&&(rt.type(n.dimension,"number","invalid dimension"),u=0|n.dimension),"length"in n&&(rt.nni(a,"buffer length must be a nonnegative integer"),a=0|n.length)),l.bind(),o?p(l,o,i,s,u,c):(a&&e.bufferData(l.type,a,i),l.dtype=s||Ke,l.usage=i,l.dimension=u,l.byteLength=a),r.profile&&(l.stats.size=l.byteLength*Qe[l.dtype]),f}function d(t,n){rt(n+t.byteLength<=l.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+t.byteLength+" starting from offset "+n+" to a buffer of size "+l.byteLength),e.bufferSubData(l.type,n,t)}function v(e,n){var r,i=0|(n||0);if(l.bind(),t(e)||e instanceof ArrayBuffer)d(e,i);else if(Array.isArray(e)){if(e.length>0)if("number"===typeof e[0]){var o=Ft.allocType(l.dtype,e.length);tn(o,e),d(o,i),Ft.freeType(o)}else if(Array.isArray(e[0])||t(e[0])){r=Xe(e);var a=We(e,r,l.dtype);d(a,i),Ft.freeType(a)}else rt.raise("invalid buffer data")}else if(Se(e)){r=e.shape;var s=e.stride,u=0,c=0,p=0,h=0;1===r.length?(u=r[0],c=1,p=s[0],h=0):2===r.length?(u=r[0],c=r[1],p=s[0],h=s[1]):rt.raise("invalid shape");var v=Array.isArray(e.data)?l.dtype:$e(e.data),m=Ft.allocType(v,u*c);en(m,e.data,u,c,p,h,e.offset),d(m,i),Ft.freeType(m)}else rt.raise("invalid data for buffer subdata");return f}return a[l.id]=l,u||f(i),f._reglType="buffer",f._buffer=l,f.subdata=v,r.profile&&(f.stats=l.stats),f.destroy=function(){h(l)},f}function v(){Ce(a).forEach((function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)}))}return r.profile&&(n.getTotalBufferSize=function(){var t=0;return Object.keys(a).forEach((function(e){t+=a[e].stats.size})),t}),{create:d,createStream:c,destroyStream:l,clear:function(){Ce(a).forEach(h),u.forEach(h)},getBuffer:function(t){return t&&t._buffer instanceof s?t._buffer:null},restore:v,_initBuffer:p}}Qe[5120]=1,Qe[5122]=2,Qe[5124]=4,Qe[5121]=1,Qe[5123]=2,Qe[5125]=4,Qe[5126]=4;var rn=0,on=0,an=1,sn=1,un=4,cn=4,ln={points:rn,point:on,lines:an,line:sn,triangles:un,triangle:cn,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},fn=0,pn=1,hn=4,dn=5120,vn=5121,mn=5122,gn=5123,yn=5124,bn=5125,_n=34963,xn=35040,wn=35044;function En(e,n,r,i){var o={},a=0,s={uint8:vn,uint16:gn};function u(t){this.id=a++,o[this.id]=this,this.buffer=t,this.primType=hn,this.vertCount=0,this.type=0}n.oes_element_index_uint&&(s.uint32=bn),u.prototype.bind=function(){this.buffer.bind()};var c=[];function l(t){var e=c.pop();return e||(e=new u(r.create(null,_n,!0,!1)._buffer)),p(e,t,xn,-1,-1,0,0),e}function f(t){c.push(t)}function p(i,o,a,s,u,c,l){var f;if(i.buffer.bind(),o){var p=l;l||t(o)&&(!Se(o)||t(o.data))||(p=n.oes_element_index_uint?bn:gn),r._initBuffer(i.buffer,o,a,p,3)}else e.bufferData(_n,c,a),i.buffer.dtype=f||vn,i.buffer.usage=a,i.buffer.dimension=3,i.buffer.byteLength=c;if(f=l,!l){switch(i.buffer.dtype){case vn:case dn:f=vn;break;case gn:case mn:f=gn;break;case bn:case yn:f=bn;break;default:rt.raise("unsupported type for element array")}i.buffer.dtype=f}i.type=f,rt(f!==bn||!!n.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var h=u;h<0&&(h=i.buffer.byteLength,f===gn?h>>=1:f===bn&&(h>>=2)),i.vertCount=h;var d=s;if(s<0){d=hn;var v=i.buffer.dimension;1===v&&(d=fn),2===v&&(d=pn),3===v&&(d=hn)}i.primType=d}function h(t){i.elementsCount--,rt(null!==t.buffer,"must not double destroy elements"),delete o[t.id],t.buffer.destroy(),t.buffer=null}function d(e,n){var o=r.create(null,_n,!0),a=new u(o._buffer);function c(e){if(e)if("number"===typeof e)o(e),a.primType=hn,a.vertCount=0|e,a.type=vn;else{var n=null,r=wn,i=-1,u=-1,l=0,f=0;Array.isArray(e)||t(e)||Se(e)?n=e:(rt.type(e,"object","invalid arguments for elements"),"data"in e&&(n=e.data,rt(Array.isArray(n)||t(n)||Se(n),"invalid data for element buffer")),"usage"in e&&(rt.parameter(e.usage,He,"invalid element buffer usage"),r=He[e.usage]),"primitive"in e&&(rt.parameter(e.primitive,ln,"invalid element buffer primitive"),i=ln[e.primitive]),"count"in e&&(rt("number"===typeof e.count&&e.count>=0,"invalid vertex count for elements"),u=0|e.count),"type"in e&&(rt.parameter(e.type,s,"invalid buffer type"),f=s[e.type]),"length"in e?l=0|e.length:(l=u,f===gn||f===mn?l*=2:f!==bn&&f!==yn||(l*=4))),p(a,n,r,i,u,l,f)}else o(),a.primType=hn,a.vertCount=0,a.type=vn;return c}return i.elementsCount++,c(e),c._reglType="elements",c._elements=a,c.subdata=function(t,e){return o.subdata(t,e),c},c.destroy=function(){h(a)},c}return{create:d,createStream:l,destroyStream:f,getElements:function(t){return"function"===typeof t&&t._elements instanceof u?t._elements:null},clear:function(){Ce(o).forEach(h)}}}var Sn=new Float32Array(1),Cn=new Uint32Array(Sn.buffer),Tn=5123;function On(t){for(var e=Ft.allocType(Tn,t.length),n=0;n<t.length;++n)if(isNaN(t[n]))e[n]=65535;else if(t[n]===1/0)e[n]=31744;else if(t[n]===-1/0)e[n]=64512;else{Sn[0]=t[n];var r=Cn[0],i=r>>>31<<15,o=(r<<1>>>24)-127,a=r>>13&1023;if(o<-24)e[n]=i;else if(o<-14){var s=-14-o;e[n]=i+(a+1024>>s)}else e[n]=o>15?i+31744:i+(o+15<<10)+a}return e}function An(e){return Array.isArray(e)||t(e)}var kn=function(t){return!(t&t-1)&&!!t},Mn=34467,Pn=3553,In=34067,Ln=34069,Rn=6408,Dn=6406,Nn=6407,jn=6409,Fn=6410,zn=32854,Bn=32855,Un=36194,Vn=32819,qn=32820,Gn=33635,Hn=34042,Wn=6402,Xn=34041,Zn=35904,Yn=35906,Kn=36193,Jn=33776,Qn=33777,$n=33778,tr=33779,er=35986,nr=35987,rr=34798,ir=35840,or=35841,ar=35842,sr=35843,ur=36196,cr=5121,lr=5123,fr=5125,pr=5126,hr=10242,dr=10243,vr=10497,mr=33071,gr=33648,yr=10240,br=10241,_r=9728,xr=9729,wr=9984,Er=9985,Sr=9986,Cr=9987,Tr=33170,Or=4352,Ar=4353,kr=4354,Mr=34046,Pr=3317,Ir=37440,Lr=37441,Rr=37443,Dr=37444,Nr=33984,jr=[wr,Sr,Er,Cr],Fr=[0,jn,Fn,Nn,Rn],zr={};function Br(t){return"[object "+t+"]"}zr[jn]=zr[Dn]=zr[Wn]=1,zr[Xn]=zr[Fn]=2,zr[Nn]=zr[Zn]=3,zr[Rn]=zr[Yn]=4;var Ur=Br("HTMLCanvasElement"),Vr=Br("OffscreenCanvas"),qr=Br("CanvasRenderingContext2D"),Gr=Br("ImageBitmap"),Hr=Br("HTMLImageElement"),Wr=Br("HTMLVideoElement"),Xr=Object.keys(Le).concat([Ur,Vr,qr,Gr,Hr,Wr]),Zr=[];Zr[cr]=1,Zr[pr]=4,Zr[Kn]=2,Zr[lr]=2,Zr[fr]=4;var Yr=[];function Kr(t){return Array.isArray(t)&&(0===t.length||"number"===typeof t[0])}function Jr(t){if(!Array.isArray(t))return!1;var e=t.length;return!(0===e||!An(t[0]))}function Qr(t){return Object.prototype.toString.call(t)}function $r(t){return Qr(t)===Ur}function ti(t){return Qr(t)===Vr}function ei(t){return Qr(t)===qr}function ni(t){return Qr(t)===Gr}function ri(t){return Qr(t)===Hr}function ii(t){return Qr(t)===Wr}function oi(t){if(!t)return!1;var e=Qr(t);return Xr.indexOf(e)>=0||(Kr(t)||Jr(t)||Se(t))}function ai(t){return 0|Le[Object.prototype.toString.call(t)]}function si(t,e){var n=e.length;switch(t.type){case cr:case lr:case fr:case pr:var r=Ft.allocType(t.type,n);r.set(e),t.data=r;break;case Kn:t.data=On(e);break;default:rt.raise("unsupported texture type, must specify a typed array")}}function ui(t,e){return Ft.allocType(t.type===Kn?pr:t.type,e)}function ci(t,e){t.type===Kn?(t.data=On(e),Ft.freeType(e)):t.data=e}function li(t,e,n,r,i,o){for(var a=t.width,s=t.height,u=t.channels,c=a*s*u,l=ui(t,c),f=0,p=0;p<s;++p)for(var h=0;h<a;++h)for(var d=0;d<u;++d)l[f++]=e[n*h+r*p+i*d+o];ci(t,l)}function fi(t,e,n,r,i,o){var a;if(a="undefined"!==typeof Yr[t]?Yr[t]:zr[t]*Zr[e],o&&(a*=6),i){var s=0,u=n;while(u>=1)s+=a*u*u,u/=2;return s}return a*n*r}function pi(n,r,i,o,a,s,u){var c={"don't care":Or,"dont care":Or,nice:kr,fast:Ar},l={repeat:vr,clamp:mr,mirror:gr},f={nearest:_r,linear:xr},p=e({mipmap:Cr,"nearest mipmap nearest":wr,"linear mipmap nearest":Er,"nearest mipmap linear":Sr,"linear mipmap linear":Cr},f),h={none:0,browser:Dr},d={uint8:cr,rgba4:Vn,rgb565:Gn,"rgb5 a1":qn},v={alpha:Dn,luminance:jn,"luminance alpha":Fn,rgb:Nn,rgba:Rn,rgba4:zn,"rgb5 a1":Bn,rgb565:Un},m={};r.ext_srgb&&(v.srgb=Zn,v.srgba=Yn),r.oes_texture_float&&(d.float32=d["float"]=pr),r.oes_texture_half_float&&(d["float16"]=d["half float"]=Kn),r.webgl_depth_texture&&(e(v,{depth:Wn,"depth stencil":Xn}),e(d,{uint16:lr,uint32:fr,"depth stencil":Hn})),r.webgl_compressed_texture_s3tc&&e(m,{"rgb s3tc dxt1":Jn,"rgba s3tc dxt1":Qn,"rgba s3tc dxt3":$n,"rgba s3tc dxt5":tr}),r.webgl_compressed_texture_atc&&e(m,{"rgb atc":er,"rgba atc explicit alpha":nr,"rgba atc interpolated alpha":rr}),r.webgl_compressed_texture_pvrtc&&e(m,{"rgb pvrtc 4bppv1":ir,"rgb pvrtc 2bppv1":or,"rgba pvrtc 4bppv1":ar,"rgba pvrtc 2bppv1":sr}),r.webgl_compressed_texture_etc1&&(m["rgb etc1"]=ur);var g=Array.prototype.slice.call(n.getParameter(Mn));Object.keys(m).forEach((function(t){var e=m[t];g.indexOf(e)>=0&&(v[t]=e)}));var y=Object.keys(v);i.textureFormats=y;var b=[];Object.keys(v).forEach((function(t){var e=v[t];b[e]=t}));var _=[];Object.keys(d).forEach((function(t){var e=d[t];_[e]=t}));var x=[];Object.keys(f).forEach((function(t){var e=f[t];x[e]=t}));var w=[];Object.keys(p).forEach((function(t){var e=p[t];w[e]=t}));var E=[];Object.keys(l).forEach((function(t){var e=l[t];E[e]=t}));var S=y.reduce((function(t,e){var n=v[e];return n===jn||n===Dn||n===jn||n===Fn||n===Wn||n===Xn||r.ext_srgb&&(n===Zn||n===Yn)?t[n]=n:n===Bn||e.indexOf("rgba")>=0?t[n]=Rn:t[n]=Nn,t}),{});function C(){this.internalformat=Rn,this.format=Rn,this.type=cr,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Dr,this.width=0,this.height=0,this.channels=0}function T(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function O(t,e){if("object"===typeof e&&e){if("premultiplyAlpha"in e&&(rt.type(e.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),t.premultiplyAlpha=e.premultiplyAlpha),"flipY"in e&&(rt.type(e.flipY,"boolean","invalid texture flip"),t.flipY=e.flipY),"alignment"in e&&(rt.oneOf(e.alignment,[1,2,4,8],"invalid texture unpack alignment"),t.unpackAlignment=e.alignment),"colorSpace"in e&&(rt.parameter(e.colorSpace,h,"invalid colorSpace"),t.colorSpace=h[e.colorSpace]),"type"in e){var n=e.type;rt(r.oes_texture_float||!("float"===n||"float32"===n),"you must enable the OES_texture_float extension in order to use floating point textures."),rt(r.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),rt(r.webgl_depth_texture||!("uint16"===n||"uint32"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),rt.parameter(n,d,"invalid texture type"),t.type=d[n]}var o=t.width,a=t.height,s=t.channels,u=!1;"shape"in e?(rt(Array.isArray(e.shape)&&e.shape.length>=2,"shape must be an array"),o=e.shape[0],a=e.shape[1],3===e.shape.length&&(s=e.shape[2],rt(s>0&&s<=4,"invalid number of channels"),u=!0),rt(o>=0&&o<=i.maxTextureSize,"invalid width"),rt(a>=0&&a<=i.maxTextureSize,"invalid height")):("radius"in e&&(o=a=e.radius,rt(o>=0&&o<=i.maxTextureSize,"invalid radius")),"width"in e&&(o=e.width,rt(o>=0&&o<=i.maxTextureSize,"invalid width")),"height"in e&&(a=e.height,rt(a>=0&&a<=i.maxTextureSize,"invalid height")),"channels"in e&&(s=e.channels,rt(s>0&&s<=4,"invalid number of channels"),u=!0)),t.width=0|o,t.height=0|a,t.channels=0|s;var c=!1;if("format"in e){var l=e.format;rt(r.webgl_depth_texture||!("depth"===l||"depth stencil"===l),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),rt.parameter(l,v,"invalid texture format");var f=t.internalformat=v[l];t.format=S[f],l in d&&("type"in e||(t.type=d[l])),l in m&&(t.compressed=!0),c=!0}!u&&c?t.channels=zr[t.format]:u&&!c?t.channels!==Fr[t.format]&&(t.format=t.internalformat=Fr[t.channels]):c&&u&&rt(t.channels===zr[t.format],"number of channels inconsistent with specified format")}}function A(t){n.pixelStorei(Ir,t.flipY),n.pixelStorei(Lr,t.premultiplyAlpha),n.pixelStorei(Rr,t.colorSpace),n.pixelStorei(Pr,t.unpackAlignment)}function k(){C.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function M(e,n){var r=null;if(oi(n)?r=n:n&&(rt.type(n,"object","invalid pixel data type"),O(e,n),"x"in n&&(e.xOffset=0|n.x),"y"in n&&(e.yOffset=0|n.y),oi(n.data)&&(r=n.data)),rt(!e.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),n.copy){rt(!r,"can not specify copy and data field for the same texture");var o=a.viewportWidth,s=a.viewportHeight;e.width=e.width||o-e.xOffset,e.height=e.height||s-e.yOffset,e.needsCopy=!0,rt(e.xOffset>=0&&e.xOffset<o&&e.yOffset>=0&&e.yOffset<s&&e.width>0&&e.width<=o&&e.height>0&&e.height<=s,"copy texture read out of bounds")}else if(r){if(t(r))e.channels=e.channels||4,e.data=r,"type"in n||e.type!==cr||(e.type=ai(r));else if(Kr(r))e.channels=e.channels||4,si(e,r),e.alignment=1,e.needsFree=!0;else if(Se(r)){var u=r.data;Array.isArray(u)||e.type!==cr||(e.type=ai(u));var c,l,f,p,h,d,v=r.shape,m=r.stride;3===v.length?(f=v[2],d=m[2]):(rt(2===v.length,"invalid ndarray pixel data, must be 2 or 3D"),f=1,d=1),c=v[0],l=v[1],p=m[0],h=m[1],e.alignment=1,e.width=c,e.height=l,e.channels=f,e.format=e.internalformat=Fr[f],e.needsFree=!0,li(e,u,p,h,d,r.offset)}else if($r(r)||ti(r)||ei(r))$r(r)||ti(r)?e.element=r:e.element=r.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(ni(r))e.element=r,e.width=r.width,e.height=r.height,e.channels=4;else if(ri(r))e.element=r,e.width=r.naturalWidth,e.height=r.naturalHeight,e.channels=4;else if(ii(r))e.element=r,e.width=r.videoWidth,e.height=r.videoHeight,e.channels=4;else if(Jr(r)){var g=e.width||r[0].length,y=e.height||r.length,b=e.channels;b=An(r[0][0])?b||r[0][0].length:b||1;for(var _=Te.shape(r),x=1,w=0;w<_.length;++w)x*=_[w];var E=ui(e,x);Te.flatten(r,_,"",E),ci(e,E),e.alignment=1,e.width=g,e.height=y,e.channels=b,e.format=e.internalformat=Fr[b],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;e.type===pr?rt(i.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):e.type===Kn&&rt(i.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function P(t,e,r){var i=t.element,a=t.data,s=t.internalformat,u=t.format,c=t.type,l=t.width,f=t.height;A(t),i?n.texImage2D(e,r,u,u,c,i):t.compressed?n.compressedTexImage2D(e,r,s,l,f,0,a):t.needsCopy?(o(),n.copyTexImage2D(e,r,u,t.xOffset,t.yOffset,l,f,0)):n.texImage2D(e,r,u,l,f,0,u,c,a||null)}function I(t,e,r,i,a){var s=t.element,u=t.data,c=t.internalformat,l=t.format,f=t.type,p=t.width,h=t.height;A(t),s?n.texSubImage2D(e,a,r,i,l,f,s):t.compressed?n.compressedTexSubImage2D(e,a,r,i,c,p,h,u):t.needsCopy?(o(),n.copyTexSubImage2D(e,a,r,i,t.xOffset,t.yOffset,p,h)):n.texSubImage2D(e,a,r,i,p,h,l,f,u)}var L=[];function R(){return L.pop()||new k}function D(t){t.needsFree&&Ft.freeType(t.data),k.call(t),L.push(t)}function N(){C.call(this),this.genMipmaps=!1,this.mipmapHint=Or,this.mipmask=0,this.images=Array(16)}function j(t,e,n){var r=t.images[0]=R();t.mipmask=1,r.width=t.width=e,r.height=t.height=n,r.channels=t.channels=4}function F(t,e){var n=null;if(oi(e))n=t.images[0]=R(),T(n,t),M(n,e),t.mipmask=1;else if(O(t,e),Array.isArray(e.mipmap))for(var r=e.mipmap,i=0;i<r.length;++i)n=t.images[i]=R(),T(n,t),n.width>>=i,n.height>>=i,M(n,r[i]),t.mipmask|=1<<i;else n=t.images[0]=R(),T(n,t),M(n,e),t.mipmask=1;T(t,t.images[0]),!t.compressed||t.internalformat!==Jn&&t.internalformat!==Qn&&t.internalformat!==$n&&t.internalformat!==tr||rt(t.width%4===0&&t.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function z(t,e){for(var n=t.images,r=0;r<n.length;++r){if(!n[r])return;P(n[r],e,r)}}var B=[];function U(){var t=B.pop()||new N;C.call(t),t.mipmask=0;for(var e=0;e<16;++e)t.images[e]=null;return t}function V(t){for(var e=t.images,n=0;n<e.length;++n)e[n]&&D(e[n]),e[n]=null;B.push(t)}function q(){this.minFilter=_r,this.magFilter=_r,this.wrapS=mr,this.wrapT=mr,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Or}function G(t,e){if("min"in e){var n=e.min;rt.parameter(n,p),t.minFilter=p[n],jr.indexOf(t.minFilter)>=0&&!("faces"in e)&&(t.genMipmaps=!0)}if("mag"in e){var r=e.mag;rt.parameter(r,f),t.magFilter=f[r]}var o=t.wrapS,a=t.wrapT;if("wrap"in e){var s=e.wrap;"string"===typeof s?(rt.parameter(s,l),o=a=l[s]):Array.isArray(s)&&(rt.parameter(s[0],l),rt.parameter(s[1],l),o=l[s[0]],a=l[s[1]])}else{if("wrapS"in e){var u=e.wrapS;rt.parameter(u,l),o=l[u]}if("wrapT"in e){var h=e.wrapT;rt.parameter(h,l),a=l[h]}}if(t.wrapS=o,t.wrapT=a,"anisotropic"in e){var d=e.anisotropic;rt("number"===typeof d&&d>=1&&d<=i.maxAnisotropic,"aniso samples must be between 1 and "),t.anisotropic=e.anisotropic}if("mipmap"in e){var v=!1;switch(typeof e.mipmap){case"string":rt.parameter(e.mipmap,c,"invalid mipmap hint"),t.mipmapHint=c[e.mipmap],t.genMipmaps=!0,v=!0;break;case"boolean":v=t.genMipmaps=e.mipmap;break;case"object":rt(Array.isArray(e.mipmap),"invalid mipmap type"),t.genMipmaps=!1,v=!0;break;default:rt.raise("invalid mipmap type")}v&&!("min"in e)&&(t.minFilter=wr)}}function H(t,e){n.texParameteri(e,br,t.minFilter),n.texParameteri(e,yr,t.magFilter),n.texParameteri(e,hr,t.wrapS),n.texParameteri(e,dr,t.wrapT),r.ext_texture_filter_anisotropic&&n.texParameteri(e,Mr,t.anisotropic),t.genMipmaps&&(n.hint(Tr,t.mipmapHint),n.generateMipmap(e))}var W=0,X={},Z=i.maxTextureUnits,Y=Array(Z).map((function(){return null}));function K(t){C.call(this),this.mipmask=0,this.internalformat=Rn,this.id=W++,this.refCount=1,this.target=t,this.texture=n.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new q,u.profile&&(this.stats={size:0})}function J(t){n.activeTexture(Nr),n.bindTexture(t.target,t.texture)}function Q(){var t=Y[0];t?n.bindTexture(t.target,t.texture):n.bindTexture(Pn,null)}function $(t){var e=t.texture;rt(e,"must not double destroy texture");var r=t.unit,i=t.target;r>=0&&(n.activeTexture(Nr+r),n.bindTexture(i,null),Y[r]=null),n.deleteTexture(e),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete X[t.id],s.textureCount--}function tt(t,e){var r=new K(Pn);function o(t,e){var n=r.texInfo;q.call(n);var a=U();return"number"===typeof t?j(a,0|t,"number"===typeof e?0|e:0|t):t?(rt.type(t,"object","invalid arguments to regl.texture"),G(n,t),F(a,t)):j(a,1,1),n.genMipmaps&&(a.mipmask=(a.width<<1)-1),r.mipmask=a.mipmask,T(r,a),rt.texture2D(n,a,i),r.internalformat=a.internalformat,o.width=a.width,o.height=a.height,J(r),z(a,Pn),H(n,Pn),Q(),V(a),u.profile&&(r.stats.size=fi(r.internalformat,r.type,a.width,a.height,n.genMipmaps,!1)),o.format=b[r.internalformat],o.type=_[r.type],o.mag=x[n.magFilter],o.min=w[n.minFilter],o.wrapS=E[n.wrapS],o.wrapT=E[n.wrapT],o}function a(t,e,n,i){rt(!!t,"must specify image data");var a=0|e,s=0|n,u=0|i,c=R();return T(c,r),c.width=0,c.height=0,M(c,t),c.width=c.width||(r.width>>u)-a,c.height=c.height||(r.height>>u)-s,rt(r.type===c.type&&r.format===c.format&&r.internalformat===c.internalformat,"incompatible format for texture.subimage"),rt(a>=0&&s>=0&&a+c.width<=r.width&&s+c.height<=r.height,"texture.subimage write out of bounds"),rt(r.mipmask&1<<u,"missing mipmap data"),rt(c.data||c.element||c.needsCopy,"missing image data"),J(r),I(c,Pn,a,s,u),Q(),D(c),o}function c(t,e){var i=0|t,a=0|e||i;if(i===r.width&&a===r.height)return o;o.width=r.width=i,o.height=r.height=a,J(r);for(var s=0;r.mipmask>>s;++s){var c=i>>s,l=a>>s;if(!c||!l)break;n.texImage2D(Pn,s,r.format,c,l,0,r.format,r.type,null)}return Q(),u.profile&&(r.stats.size=fi(r.internalformat,r.type,i,a,!1,!1)),o}return X[r.id]=r,s.textureCount++,o(t,e),o.subimage=a,o.resize=c,o._reglType="texture2d",o._texture=r,u.profile&&(o.stats=r.stats),o.destroy=function(){r.decRef()},o}function et(t,e,r,o,a,c){var l=new K(In);X[l.id]=l,s.cubeCount++;var f=new Array(6);function p(t,e,n,r,o,a){var s,c=l.texInfo;for(q.call(c),s=0;s<6;++s)f[s]=U();if("number"!==typeof t&&t)if("object"===typeof t)if(e)F(f[0],t),F(f[1],e),F(f[2],n),F(f[3],r),F(f[4],o),F(f[5],a);else if(G(c,t),O(l,t),"faces"in t){var h=t.faces;for(rt(Array.isArray(h)&&6===h.length,"cube faces must be a length 6 array"),s=0;s<6;++s)rt("object"===typeof h[s]&&!!h[s],"invalid input for cube map face"),T(f[s],l),F(f[s],h[s])}else for(s=0;s<6;++s)F(f[s],t);else rt.raise("invalid arguments to cube map");else{var d=0|t||1;for(s=0;s<6;++s)j(f[s],d,d)}for(T(l,f[0]),i.npotTextureCube||rt(kn(l.width)&&kn(l.height),"your browser does not support non power or two texture dimensions"),c.genMipmaps?l.mipmask=(f[0].width<<1)-1:l.mipmask=f[0].mipmask,rt.textureCube(l,c,f,i),l.internalformat=f[0].internalformat,p.width=f[0].width,p.height=f[0].height,J(l),s=0;s<6;++s)z(f[s],Ln+s);for(H(c,In),Q(),u.profile&&(l.stats.size=fi(l.internalformat,l.type,p.width,p.height,c.genMipmaps,!0)),p.format=b[l.internalformat],p.type=_[l.type],p.mag=x[c.magFilter],p.min=w[c.minFilter],p.wrapS=E[c.wrapS],p.wrapT=E[c.wrapT],s=0;s<6;++s)V(f[s]);return p}function h(t,e,n,r,i){rt(!!e,"must specify image data"),rt("number"===typeof t&&t===(0|t)&&t>=0&&t<6,"invalid face");var o=0|n,a=0|r,s=0|i,u=R();return T(u,l),u.width=0,u.height=0,M(u,e),u.width=u.width||(l.width>>s)-o,u.height=u.height||(l.height>>s)-a,rt(l.type===u.type&&l.format===u.format&&l.internalformat===u.internalformat,"incompatible format for texture.subimage"),rt(o>=0&&a>=0&&o+u.width<=l.width&&a+u.height<=l.height,"texture.subimage write out of bounds"),rt(l.mipmask&1<<s,"missing mipmap data"),rt(u.data||u.element||u.needsCopy,"missing image data"),J(l),I(u,Ln+t,o,a,s),Q(),D(u),p}function d(t){var e=0|t;if(e!==l.width){p.width=l.width=e,p.height=l.height=e,J(l);for(var r=0;r<6;++r)for(var i=0;l.mipmask>>i;++i)n.texImage2D(Ln+r,i,l.format,e>>i,e>>i,0,l.format,l.type,null);return Q(),u.profile&&(l.stats.size=fi(l.internalformat,l.type,p.width,p.height,!1,!0)),p}}return p(t,e,r,o,a,c),p.subimage=h,p.resize=d,p._reglType="textureCube",p._texture=l,u.profile&&(p.stats=l.stats),p.destroy=function(){l.decRef()},p}function nt(){for(var t=0;t<Z;++t)n.activeTexture(Nr+t),n.bindTexture(Pn,null),Y[t]=null;Ce(X).forEach($),s.cubeCount=0,s.textureCount=0}function it(){for(var t=0;t<Z;++t){var e=Y[t];e&&(e.bindCount=0,e.unit=-1,Y[t]=null)}Ce(X).forEach((function(t){t.texture=n.createTexture(),n.bindTexture(t.target,t.texture);for(var e=0;e<32;++e)if(0!==(t.mipmask&1<<e))if(t.target===Pn)n.texImage2D(Pn,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);else for(var r=0;r<6;++r)n.texImage2D(Ln+r,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);H(t.texInfo,t.target)}))}function ot(){for(var t=0;t<Z;++t){var e=Y[t];e&&(e.bindCount=0,e.unit=-1,Y[t]=null),n.activeTexture(Nr+t),n.bindTexture(Pn,null),n.bindTexture(In,null)}}return e(K.prototype,{bind:function(){var t=this;t.bindCount+=1;var e=t.unit;if(e<0){for(var r=0;r<Z;++r){var i=Y[r];if(i){if(i.bindCount>0)continue;i.unit=-1}Y[r]=t,e=r;break}e>=Z&&rt.raise("insufficient number of texture units"),u.profile&&s.maxTextureUnits<e+1&&(s.maxTextureUnits=e+1),t.unit=e,n.activeTexture(Nr+e),n.bindTexture(t.target,t.texture)}return e},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&$(this)}}),u.profile&&(s.getTotalTextureSize=function(){var t=0;return Object.keys(X).forEach((function(e){t+=X[e].stats.size})),t}),{create2D:tt,createCube:et,clear:nt,getTexture:function(t){return null},restore:it,refresh:ot}}Yr[zn]=2,Yr[Bn]=2,Yr[Un]=2,Yr[Xn]=4,Yr[Jn]=.5,Yr[Qn]=.5,Yr[$n]=1,Yr[tr]=1,Yr[er]=.5,Yr[nr]=1,Yr[rr]=1,Yr[ir]=.5,Yr[or]=.25,Yr[ar]=.5,Yr[sr]=.25,Yr[ur]=.5;var hi=36161,di=32854,vi=32855,mi=36194,gi=33189,yi=36168,bi=34041,_i=35907,xi=34836,wi=34842,Ei=34843,Si=[];function Ci(t,e,n){return Si[t]*e*n}Si[di]=2,Si[vi]=2,Si[mi]=2,Si[gi]=2,Si[yi]=1,Si[bi]=4,Si[_i]=4,Si[xi]=16,Si[wi]=8,Si[Ei]=6;var Ti=function(t,e,n,r,i){var o={rgba4:di,rgb565:mi,"rgb5 a1":vi,depth:gi,stencil:yi,"depth stencil":bi};e.ext_srgb&&(o["srgba"]=_i),e.ext_color_buffer_half_float&&(o["rgba16f"]=wi,o["rgb16f"]=Ei),e.webgl_color_buffer_float&&(o["rgba32f"]=xi);var a=[];Object.keys(o).forEach((function(t){var e=o[t];a[e]=t}));var s=0,u={};function c(t){this.id=s++,this.refCount=1,this.renderbuffer=t,this.format=di,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function l(e){var n=e.renderbuffer;rt(n,"must not double destroy renderbuffer"),t.bindRenderbuffer(hi,null),t.deleteRenderbuffer(n),e.renderbuffer=null,e.refCount=0,delete u[e.id],r.renderbufferCount--}function f(e,s){var l=new c(t.createRenderbuffer());function f(e,r){var s=0,u=0,c=di;if("object"===typeof e&&e){var p=e;if("shape"in p){var h=p.shape;rt(Array.isArray(h)&&h.length>=2,"invalid renderbuffer shape"),s=0|h[0],u=0|h[1]}else"radius"in p&&(s=u=0|p.radius),"width"in p&&(s=0|p.width),"height"in p&&(u=0|p.height);"format"in p&&(rt.parameter(p.format,o,"invalid renderbuffer format"),c=o[p.format])}else"number"===typeof e?(s=0|e,u="number"===typeof r?0|r:s):e?rt.raise("invalid arguments to renderbuffer constructor"):s=u=1;if(rt(s>0&&u>0&&s<=n.maxRenderbufferSize&&u<=n.maxRenderbufferSize,"invalid renderbuffer size"),s!==l.width||u!==l.height||c!==l.format)return f.width=l.width=s,f.height=l.height=u,l.format=c,t.bindRenderbuffer(hi,l.renderbuffer),t.renderbufferStorage(hi,c,s,u),rt(0===t.getError(),"invalid render buffer format"),i.profile&&(l.stats.size=Ci(l.format,l.width,l.height)),f.format=a[l.format],f}function p(e,r){var o=0|e,a=0|r||o;return o===l.width&&a===l.height||(rt(o>0&&a>0&&o<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),f.width=l.width=o,f.height=l.height=a,t.bindRenderbuffer(hi,l.renderbuffer),t.renderbufferStorage(hi,l.format,o,a),rt(0===t.getError(),"invalid render buffer format"),i.profile&&(l.stats.size=Ci(l.format,l.width,l.height))),f}return u[l.id]=l,r.renderbufferCount++,f(e,s),f.resize=p,f._reglType="renderbuffer",f._renderbuffer=l,i.profile&&(f.stats=l.stats),f.destroy=function(){l.decRef()},f}function p(){Ce(u).forEach((function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(hi,e.renderbuffer),t.renderbufferStorage(hi,e.format,e.width,e.height)})),t.bindRenderbuffer(hi,null)}return c.prototype.decRef=function(){--this.refCount<=0&&l(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var t=0;return Object.keys(u).forEach((function(e){t+=u[e].stats.size})),t}),{create:f,clear:function(){Ce(u).forEach(l)},restore:p}},Oi=36160,Ai=36161,ki=3553,Mi=34069,Pi=36064,Ii=36096,Li=36128,Ri=33306,Di=36053,Ni=36054,ji=36055,Fi=36057,zi=36061,Bi=36193,Ui=5121,Vi=5126,qi=6407,Gi=6408,Hi=6402,Wi=[qi,Gi],Xi=[];Xi[Gi]=4,Xi[qi]=3;var Zi=[];Zi[Ui]=1,Zi[Vi]=4,Zi[Bi]=2;var Yi=32854,Ki=32855,Ji=36194,Qi=33189,$i=36168,to=34041,eo=35907,no=34836,ro=34842,io=34843,oo=[Yi,Ki,Ji,eo,ro,io,no],ao={};function so(t,n,r,i,o,a){var s={cur:null,next:null,dirty:!1,setFBO:null},u=["rgba"],c=["rgba4","rgb565","rgb5 a1"];n.ext_srgb&&c.push("srgba"),n.ext_color_buffer_half_float&&c.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&c.push("rgba32f");var l=["uint8"];function f(t,e,n){this.target=t,this.texture=e,this.renderbuffer=n;var r=0,i=0;e?(r=e.width,i=e.height):n&&(r=n.width,i=n.height),this.width=r,this.height=i}function p(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function h(t,e,n){if(t)if(t.texture){var r=t.texture._texture,i=Math.max(1,r.width),o=Math.max(1,r.height);rt(i===e&&o===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var a=t.renderbuffer._renderbuffer;rt(a.width===e&&a.height===n,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function d(e,n){n&&(n.texture?t.framebufferTexture2D(Oi,e,n.target,n.texture._texture.texture,0):t.framebufferRenderbuffer(Oi,e,Ai,n.renderbuffer._renderbuffer.renderbuffer))}function v(t){var e=ki,n=null,r=null,i=t;"object"===typeof t&&(i=t.data,"target"in t&&(e=0|t.target)),rt.type(i,"function","invalid attachment data");var o=i._reglType;return"texture2d"===o?(n=i,rt(e===ki)):"textureCube"===o?(n=i,rt(e>=Mi&&e<Mi+6,"invalid cube map target")):"renderbuffer"===o?(r=i,e=Ai):rt.raise("invalid regl object for attachment"),new f(e,n,r)}function m(t,e,n,r,a){if(n){var s=i.create2D({width:t,height:e,format:r,type:a});return s._texture.refCount=0,new f(ki,s,null)}var u=o.create({width:t,height:e,format:r});return u._renderbuffer.refCount=0,new f(Ai,null,u)}function g(t){return t&&(t.texture||t.renderbuffer)}function y(t,e,n){t&&(t.texture?t.texture.resize(e,n):t.renderbuffer&&t.renderbuffer.resize(e,n),t.width=e,t.height=n)}n.oes_texture_half_float&&l.push("half float","float16"),n.oes_texture_float&&l.push("float","float32");var b=0,_={};function x(){this.id=b++,_[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function w(t){t.colorAttachments.forEach(p),p(t.depthAttachment),p(t.stencilAttachment),p(t.depthStencilAttachment)}function E(e){var n=e.framebuffer;rt(n,"must not double destroy framebuffer"),t.deleteFramebuffer(n),e.framebuffer=null,a.framebufferCount--,delete _[e.id]}function S(e){var n;t.bindFramebuffer(Oi,e.framebuffer);var i=e.colorAttachments;for(n=0;n<i.length;++n)d(Pi+n,i[n]);for(n=i.length;n<r.maxColorAttachments;++n)t.framebufferTexture2D(Oi,Pi+n,ki,null,0);t.framebufferTexture2D(Oi,Ri,ki,null,0),t.framebufferTexture2D(Oi,Ii,ki,null,0),t.framebufferTexture2D(Oi,Li,ki,null,0),d(Ii,e.depthAttachment),d(Li,e.stencilAttachment),d(Ri,e.depthStencilAttachment);var o=t.checkFramebufferStatus(Oi);t.isContextLost()||o===Di||rt.raise("framebuffer configuration not supported, status = "+ao[o]),t.bindFramebuffer(Oi,s.next?s.next.framebuffer:null),s.cur=s.next,t.getError()}function C(t,i){var o=new x;function f(t,e){var i;rt(s.next!==o,"can not update framebuffer which is currently in use");var a=0,p=0,d=!0,y=!0,b=null,_=!0,x="rgba",E="uint8",C=1,T=null,O=null,A=null,k=!1;if("number"===typeof t)a=0|t,p=0|e||a;else if(t){rt.type(t,"object","invalid arguments for framebuffer");var M=t;if("shape"in M){var P=M.shape;rt(Array.isArray(P)&&P.length>=2,"invalid shape for framebuffer"),a=P[0],p=P[1]}else"radius"in M&&(a=p=M.radius),"width"in M&&(a=M.width),"height"in M&&(p=M.height);("color"in M||"colors"in M)&&(b=M.color||M.colors,Array.isArray(b)&&rt(1===b.length||n.webgl_draw_buffers,"multiple render targets not supported")),b||("colorCount"in M&&(C=0|M.colorCount,rt(C>0,"invalid color buffer count")),"colorTexture"in M&&(_=!!M.colorTexture,x="rgba4"),"colorType"in M&&(E=M.colorType,_?(rt(n.oes_texture_float||!("float"===E||"float32"===E),"you must enable OES_texture_float in order to use floating point framebuffer objects"),rt(n.oes_texture_half_float||!("half float"===E||"float16"===E),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===E||"float16"===E?(rt(n.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),x="rgba16f"):"float"!==E&&"float32"!==E||(rt(n.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),x="rgba32f"),rt.oneOf(E,l,"invalid color type")),"colorFormat"in M&&(x=M.colorFormat,u.indexOf(x)>=0?_=!0:c.indexOf(x)>=0?_=!1:_?rt.oneOf(M.colorFormat,u,"invalid color format for texture"):rt.oneOf(M.colorFormat,c,"invalid color format for renderbuffer"))),("depthTexture"in M||"depthStencilTexture"in M)&&(k=!(!M.depthTexture&&!M.depthStencilTexture),rt(!k||n.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in M&&("boolean"===typeof M.depth?d=M.depth:(T=M.depth,y=!1)),"stencil"in M&&("boolean"===typeof M.stencil?y=M.stencil:(O=M.stencil,d=!1)),"depthStencil"in M&&("boolean"===typeof M.depthStencil?d=y=M.depthStencil:(A=M.depthStencil,d=!1,y=!1))}else a=p=1;var I=null,L=null,R=null,D=null;if(Array.isArray(b))I=b.map(v);else if(b)I=[v(b)];else for(I=new Array(C),i=0;i<C;++i)I[i]=m(a,p,_,x,E);rt(n.webgl_draw_buffers||I.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),rt(I.length<=r.maxColorAttachments,"too many color attachments, not supported"),a=a||I[0].width,p=p||I[0].height,T?L=v(T):d&&!y&&(L=m(a,p,k,"depth","uint32")),O?R=v(O):y&&!d&&(R=m(a,p,!1,"stencil","uint8")),A?D=v(A):!T&&!O&&y&&d&&(D=m(a,p,k,"depth stencil","depth stencil")),rt(!!T+!!O+!!A<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var N=null;for(i=0;i<I.length;++i)if(h(I[i],a,p),rt(!I[i]||I[i].texture&&Wi.indexOf(I[i].texture._texture.format)>=0||I[i].renderbuffer&&oo.indexOf(I[i].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+i+" is invalid"),I[i]&&I[i].texture){var j=Xi[I[i].texture._texture.format]*Zi[I[i].texture._texture.type];null===N?N=j:rt(N===j,"all color attachments much have the same number of bits per pixel.")}return h(L,a,p),rt(!L||L.texture&&L.texture._texture.format===Hi||L.renderbuffer&&L.renderbuffer._renderbuffer.format===Qi,"invalid depth attachment for framebuffer object"),h(R,a,p),rt(!R||R.renderbuffer&&R.renderbuffer._renderbuffer.format===$i,"invalid stencil attachment for framebuffer object"),h(D,a,p),rt(!D||D.texture&&D.texture._texture.format===to||D.renderbuffer&&D.renderbuffer._renderbuffer.format===to,"invalid depth-stencil attachment for framebuffer object"),w(o),o.width=a,o.height=p,o.colorAttachments=I,o.depthAttachment=L,o.stencilAttachment=R,o.depthStencilAttachment=D,f.color=I.map(g),f.depth=g(L),f.stencil=g(R),f.depthStencil=g(D),f.width=o.width,f.height=o.height,S(o),f}function p(t,e){rt(s.next!==o,"can not resize a framebuffer which is currently in use");var n=Math.max(0|t,1),r=Math.max(0|e||n,1);if(n===o.width&&r===o.height)return f;for(var i=o.colorAttachments,a=0;a<i.length;++a)y(i[a],n,r);return y(o.depthAttachment,n,r),y(o.stencilAttachment,n,r),y(o.depthStencilAttachment,n,r),o.width=f.width=n,o.height=f.height=r,S(o),f}return a.framebufferCount++,f(t,i),e(f,{resize:p,_reglType:"framebuffer",_framebuffer:o,destroy:function(){E(o),w(o)},use:function(t){s.setFBO({framebuffer:f},t)}})}function T(t){var o=Array(6);function a(t){var r;rt(o.indexOf(s.next)<0,"can not update framebuffer which is currently in use");var c,f={color:null},p=0,h=null,d="rgba",v="uint8",m=1;if("number"===typeof t)p=0|t;else if(t){rt.type(t,"object","invalid arguments for framebuffer");var g=t;if("shape"in g){var y=g.shape;rt(Array.isArray(y)&&y.length>=2,"invalid shape for framebuffer"),rt(y[0]===y[1],"cube framebuffer must be square"),p=y[0]}else"radius"in g&&(p=0|g.radius),"width"in g?(p=0|g.width,"height"in g&&rt(g.height===p,"must be square")):"height"in g&&(p=0|g.height);("color"in g||"colors"in g)&&(h=g.color||g.colors,Array.isArray(h)&&rt(1===h.length||n.webgl_draw_buffers,"multiple render targets not supported")),h||("colorCount"in g&&(m=0|g.colorCount,rt(m>0,"invalid color buffer count")),"colorType"in g&&(rt.oneOf(g.colorType,l,"invalid color type"),v=g.colorType),"colorFormat"in g&&(d=g.colorFormat,rt.oneOf(g.colorFormat,u,"invalid color format for texture"))),"depth"in g&&(f.depth=g.depth),"stencil"in g&&(f.stencil=g.stencil),"depthStencil"in g&&(f.depthStencil=g.depthStencil)}else p=1;if(h)if(Array.isArray(h))for(c=[],r=0;r<h.length;++r)c[r]=h[r];else c=[h];else{c=Array(m);var b={radius:p,format:d,type:v};for(r=0;r<m;++r)c[r]=i.createCube(b)}for(f.color=Array(c.length),r=0;r<c.length;++r){var _=c[r];rt("function"===typeof _&&"textureCube"===_._reglType,"invalid cube map"),p=p||_.width,rt(_.width===p&&_.height===p,"invalid cube map shape"),f.color[r]={target:Mi,data:c[r]}}for(r=0;r<6;++r){for(var x=0;x<c.length;++x)f.color[x].target=Mi+r;r>0&&(f.depth=o[0].depth,f.stencil=o[0].stencil,f.depthStencil=o[0].depthStencil),o[r]?o[r](f):o[r]=C(f)}return e(a,{width:p,height:p,color:c})}function c(t){var e,n=0|t;if(rt(n>0&&n<=r.maxCubeMapSize,"invalid radius for cube fbo"),n===a.width)return a;var i=a.color;for(e=0;e<i.length;++e)i[e].resize(n);for(e=0;e<6;++e)o[e].resize(n);return a.width=a.height=n,a}return a(t),e(a,{faces:o,resize:c,_reglType:"framebufferCube",destroy:function(){o.forEach((function(t){t.destroy()}))}})}function O(){s.cur=null,s.next=null,s.dirty=!0,Ce(_).forEach((function(e){e.framebuffer=t.createFramebuffer(),S(e)}))}return e(s,{getFramebuffer:function(t){if("function"===typeof t&&"framebuffer"===t._reglType){var e=t._framebuffer;if(e instanceof x)return e}return null},create:C,createCube:T,clear:function(){Ce(_).forEach(E)},restore:O})}ao[Di]="complete",ao[Ni]="incomplete attachment",ao[Fi]="incomplete dimensions",ao[ji]="incomplete, missing attachment",ao[zi]="unsupported";var uo=5126,co=34962;function lo(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=uo,this.offset=0,this.stride=0,this.divisor=0}function fo(e,n,r,i,o){for(var a=r.maxAttributes,s=new Array(a),u=0;u<a;++u)s[u]=new lo;var c=0,l={},f={Record:lo,scope:{},state:s,currentVAO:null,targetVAO:null,restore:h()?_:function(){},createVAO:x,getVAO:v,destroyBuffer:p,setVAO:h()?m:g,clear:h()?y:function(){}};function p(t){for(var n=0;n<s.length;++n){var r=s[n];r.buffer===t&&(e.disableVertexAttribArray(n),r.buffer=null)}}function h(){return n.oes_vertex_array_object}function d(){return n.angle_instanced_arrays}function v(t){return"function"===typeof t&&t._vao?t._vao:null}function m(t){if(t!==f.currentVAO){var e=h();t?e.bindVertexArrayOES(t.vao):e.bindVertexArrayOES(null),f.currentVAO=t}}function g(t){if(t!==f.currentVAO){if(t)t.bindAttrs();else for(var n=d(),r=0;r<s.length;++r){var i=s[r];i.buffer?(e.enableVertexAttribArray(r),e.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offfset),n&&i.divisor&&n.vertexAttribDivisorANGLE(r,i.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}f.currentVAO=t}}function y(){Ce(l).forEach((function(t){t.destroy()}))}function b(){this.id=++c,this.attributes=[];var t=h();this.vao=t?t.createVertexArrayOES():null,l[this.id]=this,this.buffers=[]}function _(){var t=h();t&&Ce(l).forEach((function(t){t.refresh()}))}function x(e){var r=new b;function s(e){rt(Array.isArray(e),"arguments to vertex array constructor must be an array"),rt(e.length<a,"too many attributes"),rt(e.length>0,"must specify at least one attribute");var i={},u=r.attributes;u.length=e.length;for(var c=0;c<e.length;++c){var l,f=e[c],p=u[c]=new lo,h=f.data||f;if(Array.isArray(h)||t(h)||Se(h))r.buffers[c]&&(l=r.buffers[c],t(h)&&l._buffer.byteLength>=h.byteLength?l.subdata(h):(l.destroy(),r.buffers[c]=null)),r.buffers[c]||(l=r.buffers[c]=o.create(f,co,!1,!0)),p.buffer=o.getBuffer(l),p.size=0|p.buffer.dimension,p.normalized=!1,p.type=p.buffer.dtype,p.offset=0,p.stride=0,p.divisor=0,p.state=1,i[c]=1;else o.getBuffer(f)?(p.buffer=o.getBuffer(f),p.size=0|p.buffer.dimension,p.normalized=!1,p.type=p.buffer.dtype,p.offset=0,p.stride=0,p.divisor=0,p.state=1):o.getBuffer(f.buffer)?(p.buffer=o.getBuffer(f.buffer),p.size=0|(+f.size||p.buffer.dimension),p.normalized=!!f.normalized||!1,"type"in f?(rt.parameter(f.type,Ve,"invalid buffer type"),p.type=Ve[f.type]):p.type=p.buffer.dtype,p.offset=0|(f.offset||0),p.stride=0|(f.stride||0),p.divisor=0|(f.divisor||0),p.state=1,rt(p.size>=1&&p.size<=4,"size must be between 1 and 4"),rt(p.offset>=0,"invalid offset"),rt(p.stride>=0&&p.stride<=255,"stride must be between 0 and 255"),rt(p.divisor>=0,"divisor must be positive"),rt(!p.divisor||!!n.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in f?(rt(c>0,"first attribute must not be a constant"),p.x=+f.x||0,p.y=+f.y||0,p.z=+f.z||0,p.w=+f.w||0,p.state=2):rt(!1,"invalid attribute spec for location "+c)}for(var d=0;d<r.buffers.length;++d)!i[d]&&r.buffers[d]&&(r.buffers[d].destroy(),r.buffers[d]=null);return r.refresh(),s}return i.vaoCount+=1,s.destroy=function(){for(var t=0;t<r.buffers.length;++t)r.buffers[t]&&r.buffers[t].destroy();r.buffers.length=0,r.destroy()},s._vao=r,s._reglType="vao",s(e)}return b.prototype.bindAttrs=function(){for(var t=d(),n=this.attributes,r=0;r<n.length;++r){var i=n[r];i.buffer?(e.enableVertexAttribArray(r),e.bindBuffer(co,i.buffer.buffer),e.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offset),t&&i.divisor&&t.vertexAttribDivisorANGLE(r,i.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}for(var o=n.length;o<a;++o)e.disableVertexAttribArray(o)},b.prototype.refresh=function(){var t=h();t&&(t.bindVertexArrayOES(this.vao),this.bindAttrs(),f.currentVAO=this)},b.prototype.destroy=function(){if(this.vao){var t=h();this===f.currentVAO&&(f.currentVAO=null,t.bindVertexArrayOES(null)),t.deleteVertexArrayOES(this.vao),this.vao=null}l[this.id]&&(delete l[this.id],i.vaoCount-=1)},f}var po=35632,ho=35633,vo=35718,mo=35721;function go(t,n,r,i){var o={},a={};function s(t,e,n,r){this.name=t,this.id=e,this.location=n,this.info=r}function u(t,e){for(var n=0;n<t.length;++n)if(t[n].id===e.id)return void(t[n].location=e.location);t.push(e)}function c(e,r,i){var s=e===po?o:a,u=s[r];if(!u){var c=n.str(r);u=t.createShader(e),t.shaderSource(u,c),t.compileShader(u),rt.shaderError(t,u,c,e,i),s[r]=u}return u}var l={},f=[],p=0;function h(t,e){this.id=p++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,i.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function d(e,r,o){var a,l,f=c(po,e.fragId),p=c(ho,e.vertId),h=e.program=t.createProgram();if(t.attachShader(h,f),t.attachShader(h,p),o)for(a=0;a<o.length;++a){var d=o[a];t.bindAttribLocation(h,d[0],d[1])}t.linkProgram(h),rt.linkError(t,h,n.str(e.fragId),n.str(e.vertId),r);var v=t.getProgramParameter(h,vo);i.profile&&(e.stats.uniformsCount=v);var m=e.uniforms;for(a=0;a<v;++a)if(l=t.getActiveUniform(h,a),l)if(l.size>1)for(var g=0;g<l.size;++g){var y=l.name.replace("[0]","["+g+"]");u(m,new s(y,n.id(y),t.getUniformLocation(h,y),l))}else u(m,new s(l.name,n.id(l.name),t.getUniformLocation(h,l.name),l));var b=t.getProgramParameter(h,mo);i.profile&&(e.stats.attributesCount=b);var _=e.attributes;for(a=0;a<b;++a)l=t.getActiveAttrib(h,a),l&&u(_,new s(l.name,n.id(l.name),t.getAttribLocation(h,l.name),l))}function v(){o={},a={};for(var t=0;t<f.length;++t)d(f[t],null,f[t].attributes.map((function(t){return[t.location,t.name]})))}return i.profile&&(r.getMaxUniformsCount=function(){var t=0;return f.forEach((function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)})),t},r.getMaxAttributesCount=function(){var t=0;return f.forEach((function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)})),t}),{clear:function(){var e=t.deleteShader.bind(t);Ce(o).forEach(e),o={},Ce(a).forEach(e),a={},f.forEach((function(e){t.deleteProgram(e.program)})),f.length=0,l={},r.shaderCount=0},program:function(n,i,s,u){rt.command(n>=0,"missing vertex shader",s),rt.command(i>=0,"missing fragment shader",s);var c=l[i];c||(c=l[i]={});var p=c[n];if(p&&(p.refCount++,!u))return p;var v=new h(i,n);return r.shaderCount++,d(v,s,u),p||(c[n]=v),f.push(v),e(v,{destroy:function(){if(v.refCount--,v.refCount<=0){t.deleteProgram(v.program);var e=f.indexOf(v);f.splice(e,1),r.shaderCount--}c[v.vertId].refCount<=0&&(t.deleteShader(a[v.vertId]),delete a[v.vertId],delete l[v.fragId][v.vertId]),Object.keys(l[v.fragId]).length||(t.deleteShader(o[v.fragId]),delete o[v.fragId],delete l[v.fragId])}})},restore:v,shader:c,frag:-1,vert:-1}}var yo=6408,bo=5121,_o=3333,xo=5126;function wo(e,n,r,i,o,a,s){function u(u){var c;null===n.next?(rt(o.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),c=bo):(rt(null!==n.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),c=n.next.colorAttachments[0].texture._texture.type,a.oes_texture_float?(rt(c===bo||c===xo,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),c===xo&&rt(s.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):rt(c===bo,"Reading from a framebuffer is only allowed for the type 'uint8'"));var l=0,f=0,p=i.framebufferWidth,h=i.framebufferHeight,d=null;t(u)?d=u:u&&(rt.type(u,"object","invalid arguments to regl.read()"),l=0|u.x,f=0|u.y,rt(l>=0&&l<i.framebufferWidth,"invalid x offset for regl.read"),rt(f>=0&&f<i.framebufferHeight,"invalid y offset for regl.read"),p=0|(u.width||i.framebufferWidth-l),h=0|(u.height||i.framebufferHeight-f),d=u.data||null),d&&(c===bo?rt(d instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):c===xo&&rt(d instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),rt(p>0&&p+l<=i.framebufferWidth,"invalid width for read pixels"),rt(h>0&&h+f<=i.framebufferHeight,"invalid height for read pixels"),r();var v=p*h*4;return d||(c===bo?d=new Uint8Array(v):c===xo&&(d=d||new Float32Array(v))),rt.isTypedArray(d,"data buffer for regl.read() must be a typedarray"),rt(d.byteLength>=v,"data buffer for regl.read() too small"),e.pixelStorei(_o,4),e.readPixels(l,f,p,h,yo,c,d),d}function c(t){var e;return n.setFBO({framebuffer:t.framebuffer},(function(){e=u(t)})),e}function l(t){return t&&"framebuffer"in t?c(t):u(t)}return l}function Eo(t){return Array.prototype.slice.call(t)}function So(t){return Eo(t).join("")}function Co(){var t=0,n=[],r=[];function i(e){for(var i=0;i<r.length;++i)if(r[i]===e)return n[i];var o="g"+t++;return n.push(o),r.push(e),o}function o(){var n=[];function r(){n.push.apply(n,Eo(arguments))}var i=[];function o(){var e="v"+t++;return i.push(e),arguments.length>0&&(n.push(e,"="),n.push.apply(n,Eo(arguments)),n.push(";")),e}return e(r,{def:o,toString:function(){return So([i.length>0?"var "+i.join(",")+";":"",So(n)])}})}function a(){var t=o(),n=o(),r=t.toString,i=n.toString;function a(e,r){n(e,r,"=",t.def(e,r),";")}return e((function(){t.apply(t,Eo(arguments))}),{def:t.def,entry:t,exit:n,save:a,set:function(e,n,r){a(e,n),t(e,n,"=",r,";")},toString:function(){return r()+i()}})}function s(){var t=So(arguments),n=a(),r=a(),i=n.toString,o=r.toString;return e(n,{then:function(){return n.apply(n,Eo(arguments)),this},else:function(){return r.apply(r,Eo(arguments)),this},toString:function(){var e=o();return e&&(e="else{"+e+"}"),So(["if(",t,"){",i(),"}",e])}})}var u=o(),c={};function l(t,n){var r=[];function i(){var t="a"+r.length;return r.push(t),t}n=n||0;for(var o=0;o<n;++o)i();var s=a(),u=s.toString,l=c[t]=e(s,{arg:i,toString:function(){return So(["function(",r.join(),"){",u(),"}"])}});return l}function f(){var t=['"use strict";',u,"return {"];Object.keys(c).forEach((function(e){t.push('"',e,'":',c[e].toString(),",")})),t.push("}");var e=So(t).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),i=Function.apply(null,n.concat(e));return i.apply(null,r)}return{global:u,link:i,block:o,proc:l,scope:a,cond:s,compile:f}}var To="xyzw".split(""),Oo=5121,Ao=1,ko=2,Mo=0,Po=1,Io=2,Lo=3,Ro=4,Do=5,No=6,jo="dither",Fo="blend.enable",zo="blend.color",Bo="blend.equation",Uo="blend.func",Vo="depth.enable",qo="depth.func",Go="depth.range",Ho="depth.mask",Wo="colorMask",Xo="cull.enable",Zo="cull.face",Yo="frontFace",Ko="lineWidth",Jo="polygonOffset.enable",Qo="polygonOffset.offset",$o="sample.alpha",ta="sample.enable",ea="sample.coverage",na="stencil.enable",ra="stencil.mask",ia="stencil.func",oa="stencil.opFront",aa="stencil.opBack",sa="scissor.enable",ua="scissor.box",ca="viewport",la="profile",fa="framebuffer",pa="vert",ha="frag",da="elements",va="primitive",ma="count",ga="offset",ya="instances",ba="vao",_a="Width",xa="Height",wa=fa+_a,Ea=fa+xa,Sa=ca+_a,Ca=ca+xa,Ta="drawingBuffer",Oa=Ta+_a,Aa=Ta+xa,ka=[Uo,Bo,ia,oa,aa,ea,ca,ua,Qo],Ma=34962,Pa=34963,Ia=35632,La=35633,Ra=3553,Da=34067,Na=2884,ja=3042,Fa=3024,za=2960,Ba=2929,Ua=3089,Va=32823,qa=32926,Ga=32928,Ha=5126,Wa=35664,Xa=35665,Za=35666,Ya=5124,Ka=35667,Ja=35668,Qa=35669,$a=35670,ts=35671,es=35672,ns=35673,rs=35674,is=35675,os=35676,as=35678,ss=35680,us=4,cs=1028,ls=1029,fs=2304,ps=2305,hs=32775,ds=32776,vs=519,ms=7680,gs=0,ys=1,bs=32774,_s=513,xs=36160,ws=36064,Es={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ss=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Cs={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Ts={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Os={frag:Ia,vert:La},As={cw:fs,ccw:ps};function ks(e){return Array.isArray(e)||t(e)||Se(e)}function Ms(t){return t.sort((function(t,e){return t===ca?-1:e===ca?1:t<e?-1:1}))}function Ps(t,e,n,r){this.thisDep=t,this.contextDep=e,this.propDep=n,this.append=r}function Is(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function Ls(t){return new Ps(!1,!1,!1,t)}function Rs(t,e){var n=t.type;if(n===Mo){var r=t.data.length;return new Ps(!0,r>=1,r>=2,e)}if(n===Ro){var i=t.data;return new Ps(i.thisDep,i.contextDep,i.propDep,e)}if(n===Do)return new Ps(!1,!1,!1,e);if(n===No){for(var o=!1,a=!1,s=!1,u=0;u<t.data.length;++u){var c=t.data[u];if(c.type===Po)s=!0;else if(c.type===Io)a=!0;else if(c.type===Lo)o=!0;else if(c.type===Mo){o=!0;var l=c.data;l>=1&&(a=!0),l>=2&&(s=!0)}else c.type===Ro&&(o=o||c.data.thisDep,a=a||c.data.contextDep,s=s||c.data.propDep)}return new Ps(o,a,s,e)}return new Ps(n===Lo,n===Io,n===Po,e)}var Ds=new Ps(!1,!1,!1,(function(){}));function Ns(t,n,r,i,o,a,s,u,c,l,f,p,h,d,v){var m=l.Record,g={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(g.min=hs,g.max=ds);var y=r.angle_instanced_arrays,b=r.webgl_draw_buffers,_={dirty:!0,profile:v.profile},x={},w=[],E={},S={};function C(t){return t.replace(".","_")}function T(t,e,n){var r=C(t);w.push(t),x[r]=_[r]=!!n,E[r]=e}function O(t,e,n){var r=C(t);w.push(t),Array.isArray(n)?(_[r]=n.slice(),x[r]=n.slice()):_[r]=x[r]=n,S[r]=e}T(jo,Fa),T(Fo,ja),O(zo,"blendColor",[0,0,0,0]),O(Bo,"blendEquationSeparate",[bs,bs]),O(Uo,"blendFuncSeparate",[ys,gs,ys,gs]),T(Vo,Ba,!0),O(qo,"depthFunc",_s),O(Go,"depthRange",[0,1]),O(Ho,"depthMask",!0),O(Wo,Wo,[!0,!0,!0,!0]),T(Xo,Na),O(Zo,"cullFace",ls),O(Yo,Yo,ps),O(Ko,Ko,1),T(Jo,Va),O(Qo,"polygonOffset",[0,0]),T($o,qa),T(ta,Ga),O(ea,"sampleCoverage",[1,!1]),T(na,za),O(ra,"stencilMask",-1),O(ia,"stencilFunc",[vs,0,-1]),O(oa,"stencilOpSeparate",[cs,ms,ms,ms]),O(aa,"stencilOpSeparate",[ls,ms,ms,ms]),T(sa,Ua),O(ua,"scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),O(ca,ca,[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var A={gl:t,context:h,strings:n,next:x,current:_,draw:p,elements:a,buffer:o,shader:f,attributes:l.state,vao:l,uniforms:c,framebuffer:u,extensions:r,timer:d,isBufferArgs:ks},k={primTypes:ln,compareFuncs:Cs,blendFuncs:Es,blendEquations:g,stencilOps:Ts,glTypes:Ve,orientationType:As};rt.optional((function(){A.isArrayLike=An})),b&&(k.backBuffer=[ls],k.drawBuffer=Ot(i.maxDrawbuffers,(function(t){return 0===t?[0]:Ot(t,(function(t){return ws+t}))})));var M=0;function P(){var t=Co(),e=t.link,r=t.global;t.id=M++,t.batchId="0";var i=e(A),o=t.shared={props:"a0"};Object.keys(A).forEach((function(t){o[t]=r.def(i,".",t)})),rt.optional((function(){t.CHECK=e(rt),t.commandStr=rt.guessCommand(),t.command=e(t.commandStr),t.assert=function(t,n,r){t("if(!(",n,"))",this.CHECK,".commandRaise(",e(r),",",this.command,");")},k.invalidBlendCombinations=Ss}));var a=t.next={},s=t.current={};Object.keys(S).forEach((function(t){Array.isArray(_[t])&&(a[t]=r.def(o.next,".",t),s[t]=r.def(o.current,".",t))}));var u=t.constants={};Object.keys(k).forEach((function(t){u[t]=r.def(JSON.stringify(k[t]))})),t.invoke=function(n,r){switch(r.type){case Mo:var i=["this",o.context,o.props,t.batchId];return n.def(e(r.data),".call(",i.slice(0,Math.max(r.data.length+1,4)),")");case Po:return n.def(o.props,r.data);case Io:return n.def(o.context,r.data);case Lo:return n.def("this",r.data);case Ro:return r.data.append(t,n),r.data.ref;case Do:return r.data.toString();case No:return r.data.map((function(e){return t.invoke(n,e)}))}},t.attribCache={};var c={};return t.scopeAttrib=function(t){var r=n.id(t);if(r in c)return c[r];var i=l.scope[r];i||(i=l.scope[r]=new m);var o=c[r]=e(i);return o},t}function I(t){var e,n=t["static"],r=t.dynamic;if(la in n){var i=!!n[la];e=Ls((function(t,e){return i})),e.enable=i}else if(la in r){var o=r[la];e=Rs(o,(function(t,e){return t.invoke(e,o)}))}return e}function L(t,e){var n=t["static"],r=t.dynamic;if(fa in n){var i=n[fa];return i?(i=u.getFramebuffer(i),rt.command(i,"invalid framebuffer object"),Ls((function(t,e){var n=t.link(i),r=t.shared;e.set(r.framebuffer,".next",n);var o=r.context;return e.set(o,"."+wa,n+".width"),e.set(o,"."+Ea,n+".height"),n}))):Ls((function(t,e){var n=t.shared;e.set(n.framebuffer,".next","null");var r=n.context;return e.set(r,"."+wa,r+"."+Oa),e.set(r,"."+Ea,r+"."+Aa),"null"}))}if(fa in r){var o=r[fa];return Rs(o,(function(t,e){var n=t.invoke(e,o),r=t.shared,i=r.framebuffer,a=e.def(i,".getFramebuffer(",n,")");rt.optional((function(){t.assert(e,"!"+n+"||"+a,"invalid framebuffer object")})),e.set(i,".next",a);var s=r.context;return e.set(s,"."+wa,a+"?"+a+".width:"+s+"."+Oa),e.set(s,"."+Ea,a+"?"+a+".height:"+s+"."+Aa),a}))}return null}function R(t,e,n){var r=t["static"],i=t.dynamic;function o(t){if(t in r){var o=r[t];rt.commandType(o,"object","invalid "+t,n.commandStr);var a,s,u=!0,c=0|o.x,l=0|o.y;return"width"in o?(a=0|o.width,rt.command(a>=0,"invalid "+t,n.commandStr)):u=!1,"height"in o?(s=0|o.height,rt.command(s>=0,"invalid "+t,n.commandStr)):u=!1,new Ps(!u&&e&&e.thisDep,!u&&e&&e.contextDep,!u&&e&&e.propDep,(function(t,e){var n=t.shared.context,r=a;"width"in o||(r=e.def(n,".",wa,"-",c));var i=s;return"height"in o||(i=e.def(n,".",Ea,"-",l)),[c,l,r,i]}))}if(t in i){var f=i[t],p=Rs(f,(function(e,n){var r=e.invoke(n,f);rt.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)}));var i=e.shared.context,o=n.def(r,".x|0"),a=n.def(r,".y|0"),s=n.def('"width" in ',r,"?",r,".width|0:","(",i,".",wa,"-",o,")"),u=n.def('"height" in ',r,"?",r,".height|0:","(",i,".",Ea,"-",a,")");return rt.optional((function(){e.assert(n,s+">=0&&"+u+">=0","invalid "+t)})),[o,a,s,u]}));return e&&(p.thisDep=p.thisDep||e.thisDep,p.contextDep=p.contextDep||e.contextDep,p.propDep=p.propDep||e.propDep),p}return e?new Ps(e.thisDep,e.contextDep,e.propDep,(function(t,e){var n=t.shared.context;return[0,0,e.def(n,".",wa),e.def(n,".",Ea)]})):null}var a=o(ca);if(a){var s=a;a=new Ps(a.thisDep,a.contextDep,a.propDep,(function(t,e){var n=s.append(t,e),r=t.shared.context;return e.set(r,"."+Sa,n[2]),e.set(r,"."+Ca,n[3]),n}))}return{viewport:a,scissor_box:o(ua)}}function D(t,e){var n=t["static"],r="string"===typeof n[ha]&&"string"===typeof n[pa];if(r){if(Object.keys(e.dynamic).length>0)return null;var i=e["static"],o=Object.keys(i);if(o.length>0&&"number"===typeof i[o[0]]){for(var a=[],s=0;s<o.length;++s)rt("number"===typeof i[o[s]],"must specify all vertex attribute locations when using vaos"),a.push([0|i[o[s]],o[s]]);return a}}return null}function N(t,e,r){var i=t["static"],o=t.dynamic;function a(t){if(t in i){var e=n.id(i[t]);rt.optional((function(){f.shader(Os[t],e,rt.guessCommand())}));var r=Ls((function(){return e}));return r.id=e,r}if(t in o){var a=o[t];return Rs(a,(function(e,n){var r=e.invoke(n,a),i=n.def(e.shared.strings,".id(",r,")");return rt.optional((function(){n(e.shared.shader,".shader(",Os[t],",",i,",",e.command,");")})),i}))}return null}var s,u=a(ha),c=a(pa),l=null;return Is(u)&&Is(c)?(l=f.program(c.id,u.id,null,r),s=Ls((function(t,e){return t.link(l)}))):s=new Ps(u&&u.thisDep||c&&c.thisDep,u&&u.contextDep||c&&c.contextDep,u&&u.propDep||c&&c.propDep,(function(t,e){var n,r,i=t.shared.shader;n=u?u.append(t,e):e.def(i,".",ha),r=c?c.append(t,e):e.def(i,".",pa);var o=i+".program("+r+","+n;return rt.optional((function(){o+=","+t.command})),e.def(o+")")})),{frag:u,vert:c,progVar:s,program:l}}function j(t,e){var n=t["static"],r=t.dynamic;function i(){if(da in n){var t=n[da];ks(t)?t=a.getElements(a.create(t,!0)):t&&(t=a.getElements(t),rt.command(t,"invalid elements",e.commandStr));var i=Ls((function(e,n){if(t){var r=e.link(t);return e.ELEMENTS=r,r}return e.ELEMENTS=null,null}));return i.value=t,i}if(da in r){var o=r[da];return Rs(o,(function(t,e){var n=t.shared,r=n.isBufferArgs,i=n.elements,a=t.invoke(e,o),s=e.def("null"),u=e.def(r,"(",a,")"),c=t.cond(u).then(s,"=",i,".createStream(",a,");")["else"](s,"=",i,".getElements(",a,");");return rt.optional((function(){t.assert(c["else"],"!"+a+"||"+s,"invalid elements")})),e.entry(c),e.exit(t.cond(u).then(i,".destroyStream(",s,");")),t.ELEMENTS=s,s}))}return null}var o=i();function s(){if(va in n){var t=n[va];return rt.commandParameter(t,ln,"invalid primitve",e.commandStr),Ls((function(e,n){return ln[t]}))}if(va in r){var i=r[va];return Rs(i,(function(t,e){var n=t.constants.primTypes,r=t.invoke(e,i);return rt.optional((function(){t.assert(e,r+" in "+n,"invalid primitive, must be one of "+Object.keys(ln))})),e.def(n,"[",r,"]")}))}return o?Is(o)?o.value?Ls((function(t,e){return e.def(t.ELEMENTS,".primType")})):Ls((function(){return us})):new Ps(o.thisDep,o.contextDep,o.propDep,(function(t,e){var n=t.ELEMENTS;return e.def(n,"?",n,".primType:",us)})):null}function u(t,i){if(t in n){var a=0|n[t];return rt.command(!i||a>=0,"invalid "+t,e.commandStr),Ls((function(t,e){return i&&(t.OFFSET=a),a}))}if(t in r){var s=r[t];return Rs(s,(function(e,n){var r=e.invoke(n,s);return i&&(e.OFFSET=r,rt.optional((function(){e.assert(n,r+">=0","invalid "+t)}))),r}))}return i&&o?Ls((function(t,e){return t.OFFSET="0",0})):null}var c=u(ga,!0);function l(){if(ma in n){var t=0|n[ma];return rt.command("number"===typeof t&&t>=0,"invalid vertex count",e.commandStr),Ls((function(){return t}))}if(ma in r){var i=r[ma];return Rs(i,(function(t,e){var n=t.invoke(e,i);return rt.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")})),n}))}if(o){if(Is(o)){if(o)return c?new Ps(c.thisDep,c.contextDep,c.propDep,(function(t,e){var n=e.def(t.ELEMENTS,".vertCount-",t.OFFSET);return rt.optional((function(){t.assert(e,n+">=0","invalid vertex offset/element buffer too small")})),n})):Ls((function(t,e){return e.def(t.ELEMENTS,".vertCount")}));var a=Ls((function(){return-1}));return rt.optional((function(){a.MISSING=!0})),a}var s=new Ps(o.thisDep||c.thisDep,o.contextDep||c.contextDep,o.propDep||c.propDep,(function(t,e){var n=t.ELEMENTS;return t.OFFSET?e.def(n,"?",n,".vertCount-",t.OFFSET,":-1"):e.def(n,"?",n,".vertCount:-1")}));return rt.optional((function(){s.DYNAMIC=!0})),s}return null}return{elements:o,primitive:s(),count:l(),instances:u(ya,!1),offset:c}}function F(t,e){var n=t["static"],r=t.dynamic,o={};return w.forEach((function(t){var a=C(t);function s(e,i){if(t in n){var s=e(n[t]);o[a]=Ls((function(){return s}))}else if(t in r){var u=r[t];o[a]=Rs(u,(function(t,e){return i(t,e,t.invoke(e,u))}))}}switch(t){case Xo:case Fo:case jo:case na:case Vo:case sa:case Jo:case $o:case ta:case Ho:return s((function(n){return rt.commandType(n,"boolean",t,e.commandStr),n}),(function(e,n,r){return rt.optional((function(){e.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+t,e.commandStr)})),r}));case qo:return s((function(n){return rt.commandParameter(n,Cs,"invalid "+t,e.commandStr),Cs[n]}),(function(e,n,r){var i=e.constants.compareFuncs;return rt.optional((function(){e.assert(n,r+" in "+i,"invalid "+t+", must be one of "+Object.keys(Cs))})),n.def(i,"[",r,"]")}));case Go:return s((function(t){return rt.command(An(t)&&2===t.length&&"number"===typeof t[0]&&"number"===typeof t[1]&&t[0]<=t[1],"depth range is 2d array",e.commandStr),t}),(function(t,e,n){rt.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")}));var r=e.def("+",n,"[0]"),i=e.def("+",n,"[1]");return[r,i]}));case Uo:return s((function(t){rt.commandType(t,"object","blend.func",e.commandStr);var n="srcRGB"in t?t.srcRGB:t.src,r="srcAlpha"in t?t.srcAlpha:t.src,i="dstRGB"in t?t.dstRGB:t.dst,o="dstAlpha"in t?t.dstAlpha:t.dst;return rt.commandParameter(n,Es,a+".srcRGB",e.commandStr),rt.commandParameter(r,Es,a+".srcAlpha",e.commandStr),rt.commandParameter(i,Es,a+".dstRGB",e.commandStr),rt.commandParameter(o,Es,a+".dstAlpha",e.commandStr),rt.command(-1===Ss.indexOf(n+", "+i),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+i+")",e.commandStr),[Es[n],Es[i],Es[r],Es[o]]}),(function(e,n,r){var i=e.constants.blendFuncs;function o(o,a){var s=n.def('"',o,a,'" in ',r,"?",r,".",o,a,":",r,".",o);return rt.optional((function(){e.assert(n,s+" in "+i,"invalid "+t+"."+o+a+", must be one of "+Object.keys(Es))})),s}rt.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")}));var a=o("src","RGB"),s=o("dst","RGB");rt.optional((function(){var t=e.constants.invalidBlendCombinations;e.assert(n,t+".indexOf("+a+'+", "+'+s+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")}));var u=n.def(i,"[",a,"]"),c=n.def(i,"[",o("src","Alpha"),"]"),l=n.def(i,"[",s,"]"),f=n.def(i,"[",o("dst","Alpha"),"]");return[u,l,c,f]}));case Bo:return s((function(n){return"string"===typeof n?(rt.commandParameter(n,g,"invalid "+t,e.commandStr),[g[n],g[n]]):"object"===typeof n?(rt.commandParameter(n.rgb,g,t+".rgb",e.commandStr),rt.commandParameter(n.alpha,g,t+".alpha",e.commandStr),[g[n.rgb],g[n.alpha]]):void rt.commandRaise("invalid blend.equation",e.commandStr)}),(function(e,n,r){var i=e.constants.blendEquations,o=n.def(),a=n.def(),s=e.cond("typeof ",r,'==="string"');return rt.optional((function(){function n(t,n,r){e.assert(t,r+" in "+i,"invalid "+n+", must be one of "+Object.keys(g))}n(s.then,t,r),e.assert(s["else"],r+"&&typeof "+r+'==="object"',"invalid "+t),n(s["else"],t+".rgb",r+".rgb"),n(s["else"],t+".alpha",r+".alpha")})),s.then(o,"=",a,"=",i,"[",r,"];"),s["else"](o,"=",i,"[",r,".rgb];",a,"=",i,"[",r,".alpha];"),n(s),[o,a]}));case zo:return s((function(t){return rt.command(An(t)&&4===t.length,"blend.color must be a 4d array",e.commandStr),Ot(4,(function(e){return+t[e]}))}),(function(t,e,n){return rt.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")})),Ot(4,(function(t){return e.def("+",n,"[",t,"]")}))}));case ra:return s((function(t){return rt.commandType(t,"number",a,e.commandStr),0|t}),(function(t,e,n){return rt.optional((function(){t.assert(e,"typeof "+n+'==="number"',"invalid stencil.mask")})),e.def(n,"|0")}));case ia:return s((function(n){rt.commandType(n,"object",a,e.commandStr);var r=n.cmp||"keep",i=n.ref||0,o="mask"in n?n.mask:-1;return rt.commandParameter(r,Cs,t+".cmp",e.commandStr),rt.commandType(i,"number",t+".ref",e.commandStr),rt.commandType(o,"number",t+".mask",e.commandStr),[Cs[r],i,o]}),(function(t,e,n){var r=t.constants.compareFuncs;rt.optional((function(){function i(){t.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}i(n+"&&typeof ",n,'==="object"'),i('!("cmp" in ',n,")||(",n,".cmp in ",r,")")}));var i=e.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",ms),o=e.def(n,".ref|0"),a=e.def('"mask" in ',n,"?",n,".mask|0:-1");return[i,o,a]}));case oa:case aa:return s((function(n){rt.commandType(n,"object",a,e.commandStr);var r=n.fail||"keep",i=n.zfail||"keep",o=n.zpass||"keep";return rt.commandParameter(r,Ts,t+".fail",e.commandStr),rt.commandParameter(i,Ts,t+".zfail",e.commandStr),rt.commandParameter(o,Ts,t+".zpass",e.commandStr),[t===aa?ls:cs,Ts[r],Ts[i],Ts[o]]}),(function(e,n,r){var i=e.constants.stencilOps;function o(o){return rt.optional((function(){e.assert(n,'!("'+o+'" in '+r+")||("+r+"."+o+" in "+i+")","invalid "+t+"."+o+", must be one of "+Object.keys(Ts))})),n.def('"',o,'" in ',r,"?",i,"[",r,".",o,"]:",ms)}return rt.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)})),[t===aa?ls:cs,o("fail"),o("zfail"),o("zpass")]}));case Qo:return s((function(t){rt.commandType(t,"object",a,e.commandStr);var n=0|t.factor,r=0|t.units;return rt.commandType(n,"number",a+".factor",e.commandStr),rt.commandType(r,"number",a+".units",e.commandStr),[n,r]}),(function(e,n,r){rt.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)}));var i=n.def(r,".factor|0"),o=n.def(r,".units|0");return[i,o]}));case Zo:return s((function(t){var n=0;return"front"===t?n=cs:"back"===t&&(n=ls),rt.command(!!n,a,e.commandStr),n}),(function(t,e,n){return rt.optional((function(){t.assert(e,n+'==="front"||'+n+'==="back"',"invalid cull.face")})),e.def(n,'==="front"?',cs,":",ls)}));case Ko:return s((function(t){return rt.command("number"===typeof t&&t>=i.lineWidthDims[0]&&t<=i.lineWidthDims[1],"invalid line width, must be a positive number between "+i.lineWidthDims[0]+" and "+i.lineWidthDims[1],e.commandStr),t}),(function(t,e,n){return rt.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">="+i.lineWidthDims[0]+"&&"+n+"<="+i.lineWidthDims[1],"invalid line width")})),n}));case Yo:return s((function(t){return rt.commandParameter(t,As,a,e.commandStr),As[t]}),(function(t,e,n){return rt.optional((function(){t.assert(e,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")})),e.def(n+'==="cw"?'+fs+":"+ps)}));case Wo:return s((function(t){return rt.command(An(t)&&4===t.length,"color.mask must be length 4 array",e.commandStr),t.map((function(t){return!!t}))}),(function(t,e,n){return rt.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")})),Ot(4,(function(t){return"!!"+n+"["+t+"]"}))}));case ea:return s((function(t){rt.command("object"===typeof t&&t,a,e.commandStr);var n="value"in t?t.value:1,r=!!t.invert;return rt.command("number"===typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",e.commandStr),[n,r]}),(function(t,e,n){rt.optional((function(){t.assert(e,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")}));var r=e.def('"value" in ',n,"?+",n,".value:1"),i=e.def("!!",n,".invert");return[r,i]}))}})),o}function z(t,e){var n=t["static"],r=t.dynamic,i={};return Object.keys(n).forEach((function(t){var r,o=n[t];if("number"===typeof o||"boolean"===typeof o)r=Ls((function(){return o}));else if("function"===typeof o){var a=o._reglType;"texture2d"===a||"textureCube"===a?r=Ls((function(t){return t.link(o)})):"framebuffer"===a||"framebufferCube"===a?(rt.command(o.color.length>0,'missing color attachment for framebuffer sent to uniform "'+t+'"',e.commandStr),r=Ls((function(t){return t.link(o.color[0])}))):rt.commandRaise('invalid data for uniform "'+t+'"',e.commandStr)}else An(o)?r=Ls((function(e){var n=e.global.def("[",Ot(o.length,(function(n){return rt.command("number"===typeof o[n]||"boolean"===typeof o[n],"invalid uniform "+t,e.commandStr),o[n]})),"]");return n})):rt.commandRaise('invalid or missing data for uniform "'+t+'"',e.commandStr);r.value=o,i[t]=r})),Object.keys(r).forEach((function(t){var e=r[t];i[t]=Rs(e,(function(t,n){return t.invoke(n,e)}))})),i}function B(t,e){var r=t["static"],i=t.dynamic,a={};return Object.keys(r).forEach((function(t){var i=r[t],s=n.id(t),u=new m;if(ks(i))u.state=Ao,u.buffer=o.getBuffer(o.create(i,Ma,!1,!0)),u.type=0;else{var c=o.getBuffer(i);if(c)u.state=Ao,u.buffer=c,u.type=0;else if(rt.command("object"===typeof i&&i,"invalid data for attribute "+t,e.commandStr),"constant"in i){var l=i.constant;u.buffer="null",u.state=ko,"number"===typeof l?u.x=l:(rt.command(An(l)&&l.length>0&&l.length<=4,"invalid constant for attribute "+t,e.commandStr),To.forEach((function(t,e){e<l.length&&(u[t]=l[e])})))}else{c=ks(i.buffer)?o.getBuffer(o.create(i.buffer,Ma,!1,!0)):o.getBuffer(i.buffer),rt.command(!!c,'missing buffer for attribute "'+t+'"',e.commandStr);var f=0|i.offset;rt.command(f>=0,'invalid offset for attribute "'+t+'"',e.commandStr);var p=0|i.stride;rt.command(p>=0&&p<256,'invalid stride for attribute "'+t+'", must be integer betweeen [0, 255]',e.commandStr);var h=0|i.size;rt.command(!("size"in i)||h>0&&h<=4,'invalid size for attribute "'+t+'", must be 1,2,3,4',e.commandStr);var d=!!i.normalized,v=0;"type"in i&&(rt.commandParameter(i.type,Ve,"invalid type for attribute "+t,e.commandStr),v=Ve[i.type]);var g=0|i.divisor;"divisor"in i&&(rt.command(0===g||y,'cannot specify divisor for attribute "'+t+'", instancing not supported',e.commandStr),rt.command(g>=0,'invalid divisor for attribute "'+t+'"',e.commandStr)),rt.optional((function(){var n=e.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(i).forEach((function(e){rt.command(r.indexOf(e)>=0,'unknown parameter "'+e+'" for attribute pointer "'+t+'" (valid parameters are '+r+")",n)}))})),u.buffer=c,u.state=Ao,u.size=h,u.normalized=d,u.type=v||c.dtype,u.offset=f,u.stride=p,u.divisor=g}}a[t]=Ls((function(t,e){var n=t.attribCache;if(s in n)return n[s];var r={isStream:!1};return Object.keys(u).forEach((function(t){r[t]=u[t]})),u.buffer&&(r.buffer=t.link(u.buffer),r.type=r.type||r.buffer+".dtype"),n[s]=r,r}))})),Object.keys(i).forEach((function(t){var e=i[t];function n(n,r){var i=n.invoke(r,e),o=n.shared,a=n.constants,s=o.isBufferArgs,u=o.buffer;rt.optional((function(){n.assert(r,i+"&&(typeof "+i+'==="object"||typeof '+i+'==="function")&&('+s+"("+i+")||"+u+".getBuffer("+i+")||"+u+".getBuffer("+i+".buffer)||"+s+"("+i+'.buffer)||("constant" in '+i+"&&(typeof "+i+'.constant==="number"||'+o.isArrayLike+"("+i+".constant))))",'invalid dynamic attribute "'+t+'"')}));var c={isStream:r.def(!1)},l=new m;l.state=Ao,Object.keys(l).forEach((function(t){c[t]=r.def(""+l[t])}));var f=c.buffer,p=c.type;function h(t){r(c[t],"=",i,".",t,"|0;")}return r("if(",s,"(",i,")){",c.isStream,"=true;",f,"=",u,".createStream(",Ma,",",i,");",p,"=",f,".dtype;","}else{",f,"=",u,".getBuffer(",i,");","if(",f,"){",p,"=",f,".dtype;",'}else if("constant" in ',i,"){",c.state,"=",ko,";","if(typeof "+i+'.constant === "number"){',c[To[0]],"=",i,".constant;",To.slice(1).map((function(t){return c[t]})).join("="),"=0;","}else{",To.map((function(t,e){return c[t]+"="+i+".constant.length>"+e+"?"+i+".constant["+e+"]:0;"})).join(""),"}}else{","if(",s,"(",i,".buffer)){",f,"=",u,".createStream(",Ma,",",i,".buffer);","}else{",f,"=",u,".getBuffer(",i,".buffer);","}",p,'="type" in ',i,"?",a.glTypes,"[",i,".type]:",f,".dtype;",c.normalized,"=!!",i,".normalized;"),h("size"),h("offset"),h("stride"),h("divisor"),r("}}"),r.exit("if(",c.isStream,"){",u,".destroyStream(",f,");","}"),c}a[t]=Rs(e,n)})),a}function U(t,e){var n=t["static"],r=t.dynamic;if(ba in n){var i=n[ba];return null!==i&&null===l.getVAO(i)&&(i=l.createVAO(i)),Ls((function(t){return t.link(l.getVAO(i))}))}if(ba in r){var o=r[ba];return Rs(o,(function(t,e){var n=t.invoke(e,o);return e.def(t.shared.vao+".getVAO("+n+")")}))}return null}function V(t){var e=t["static"],n=t.dynamic,r={};return Object.keys(e).forEach((function(t){var n=e[t];r[t]=Ls((function(t,e){return"number"===typeof n||"boolean"===typeof n?""+n:t.link(n)}))})),Object.keys(n).forEach((function(t){var e=n[t];r[t]=Rs(e,(function(t,n){return t.invoke(n,e)}))})),r}function q(t,e,n,i,o){var a=t["static"],s=t.dynamic;rt.optional((function(){var t=[fa,pa,ha,da,va,ga,ma,ya,la,ba].concat(w);function e(e){Object.keys(e).forEach((function(e){rt.command(t.indexOf(e)>=0,'unknown parameter "'+e+'"',o.commandStr)}))}e(a),e(s)}));var u=D(t,e),c=L(t,o),f=R(t,c,o),p=j(t,o),h=F(t,o),d=N(t,o,u);function v(t){var e=f[t];e&&(h[t]=e)}v(ca),v(C(ua));var m=Object.keys(h).length>0,g={framebuffer:c,draw:p,shader:d,state:h,dirty:m,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(g.profile=I(t,o),g.uniforms=z(n,o),g.drawVAO=g.scopeVAO=U(t,o),!g.drawVAO&&d.program&&!u&&r.angle_instanced_arrays){var y=!0,b=d.program.attributes.map((function(t){var n=e["static"][t];return y=y&&!!n,n}));if(y&&b.length>0){var _=l.getVAO(l.createVAO(b));g.drawVAO=new Ps(null,null,null,(function(t,e){return t.link(_)})),g.useVAO=!0}}return u?g.useVAO=!0:g.attributes=B(e,o),g.context=V(i,o),g}function G(t,e,n){var r=t.shared,i=r.context,o=t.scope();Object.keys(n).forEach((function(r){e.save(i,"."+r);var a=n[r],s=a.append(t,e);Array.isArray(s)?o(i,".",r,"=[",s.join(),"];"):o(i,".",r,"=",s,";")})),e(o)}function H(t,e,n,r){var i,o=t.shared,a=o.gl,s=o.framebuffer;b&&(i=e.def(o.extensions,".webgl_draw_buffers"));var u,c=t.constants,l=c.drawBuffer,f=c.backBuffer;u=n?n.append(t,e):e.def(s,".next"),r||e("if(",u,"!==",s,".cur){"),e("if(",u,"){",a,".bindFramebuffer(",xs,",",u,".framebuffer);"),b&&e(i,".drawBuffersWEBGL(",l,"[",u,".colorAttachments.length]);"),e("}else{",a,".bindFramebuffer(",xs,",null);"),b&&e(i,".drawBuffersWEBGL(",f,");"),e("}",s,".cur=",u,";"),r||e("}")}function W(t,e,n){var r=t.shared,i=r.gl,o=t.current,a=t.next,s=r.current,u=r.next,c=t.cond(s,".dirty");w.forEach((function(e){var r,l,f=C(e);if(!(f in n.state))if(f in a){r=a[f],l=o[f];var p=Ot(_[f].length,(function(t){return c.def(r,"[",t,"]")}));c(t.cond(p.map((function(t,e){return t+"!=="+l+"["+e+"]"})).join("||")).then(i,".",S[f],"(",p,");",p.map((function(t,e){return l+"["+e+"]="+t})).join(";"),";"))}else{r=c.def(u,".",f);var h=t.cond(r,"!==",s,".",f);c(h),f in E?h(t.cond(r).then(i,".enable(",E[f],");")["else"](i,".disable(",E[f],");"),s,".",f,"=",r,";"):h(i,".",S[f],"(",r,");",s,".",f,"=",r,";")}})),0===Object.keys(n.state).length&&c(s,".dirty=false;"),e(c)}function X(t,e,n,r){var i=t.shared,o=t.current,a=i.current,s=i.gl;Ms(Object.keys(n)).forEach((function(i){var u=n[i];if(!r||r(u)){var c=u.append(t,e);if(E[i]){var l=E[i];Is(u)?e(s,c?".enable(":".disable(",l,");"):e(t.cond(c).then(s,".enable(",l,");")["else"](s,".disable(",l,");")),e(a,".",i,"=",c,";")}else if(An(c)){var f=o[i];e(s,".",S[i],"(",c,");",c.map((function(t,e){return f+"["+e+"]="+t})).join(";"),";")}else e(s,".",S[i],"(",c,");",a,".",i,"=",c,";")}}))}function Z(t,e){y&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function Y(t,e,n,r,i){var o,a,s,u=t.shared,c=t.stats,l=u.current,f=u.timer,p=n.profile;function h(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function v(t){o=e.def(),t(o,"=",h(),";"),"string"===typeof i?t(c,".count+=",i,";"):t(c,".count++;"),d&&(r?(a=e.def(),t(a,"=",f,".getNumPendingQueries();")):t(f,".beginQuery(",c,");"))}function m(t){t(c,".cpuTime+=",h(),"-",o,";"),d&&(r?t(f,".pushScopeStats(",a,",",f,".getNumPendingQueries(),",c,");"):t(f,".endQuery();"))}function g(t){var n=e.def(l,".profile");e(l,".profile=",t,";"),e.exit(l,".profile=",n,";")}if(p){if(Is(p))return void(p.enable?(v(e),m(e.exit),g("true")):g("false"));s=p.append(t,e),g(s)}else s=e.def(l,".profile");var y=t.block();v(y),e("if(",s,"){",y,"}");var b=t.block();m(b),e.exit("if(",s,"){",b,"}")}function K(t,e,n,r,i){var o=t.shared;function a(t){switch(t){case Wa:case Ka:case ts:return 2;case Xa:case Ja:case es:return 3;case Za:case Qa:case ns:return 4;default:return 1}}function s(n,r,i){var a=o.gl,s=e.def(n,".location"),u=e.def(o.attributes,"[",s,"]"),c=i.state,l=i.buffer,f=[i.x,i.y,i.z,i.w],p=["buffer","normalized","offset","stride"];function h(){e("if(!",u,".buffer){",a,".enableVertexAttribArray(",s,");}");var n,o=i.type;if(n=i.size?e.def(i.size,"||",r):r,e("if(",u,".type!==",o,"||",u,".size!==",n,"||",p.map((function(t){return u+"."+t+"!=="+i[t]})).join("||"),"){",a,".bindBuffer(",Ma,",",l,".buffer);",a,".vertexAttribPointer(",[s,n,o,i.normalized,i.stride,i.offset],");",u,".type=",o,";",u,".size=",n,";",p.map((function(t){return u+"."+t+"="+i[t]+";"})).join(""),"}"),y){var c=i.divisor;e("if(",u,".divisor!==",c,"){",t.instancing,".vertexAttribDivisorANGLE(",[s,c],");",u,".divisor=",c,";}")}}function d(){e("if(",u,".buffer){",a,".disableVertexAttribArray(",s,");",u,".buffer=null;","}if(",To.map((function(t,e){return u+"."+t+"!=="+f[e]})).join("||"),"){",a,".vertexAttrib4f(",s,",",f,");",To.map((function(t,e){return u+"."+t+"="+f[e]+";"})).join(""),"}")}c===Ao?h():c===ko?d():(e("if(",c,"===",Ao,"){"),h(),e("}else{"),d(),e("}"))}r.forEach((function(r){var o,u=r.name,c=n.attributes[u];if(c){if(!i(c))return;o=c.append(t,e)}else{if(!i(Ds))return;var l=t.scopeAttrib(u);rt.optional((function(){t.assert(e,l+".state","missing attribute "+u)})),o={},Object.keys(new m).forEach((function(t){o[t]=e.def(l,".",t)}))}s(t.link(r),a(r.info.type),o)}))}function J(t,e,r,i,o){for(var a,s=t.shared,u=s.gl,c=0;c<i.length;++c){var l,f=i[c],p=f.name,h=f.info.type,d=r.uniforms[p],v=t.link(f),m=v+".location";if(d){if(!o(d))continue;if(Is(d)){var g=d.value;if(rt.command(null!==g&&"undefined"!==typeof g,'missing uniform "'+p+'"',t.commandStr),h===as||h===ss){rt.command("function"===typeof g&&(h===as&&("texture2d"===g._reglType||"framebuffer"===g._reglType)||h===ss&&("textureCube"===g._reglType||"framebufferCube"===g._reglType)),"invalid texture for uniform "+p,t.commandStr);var y=t.link(g._texture||g.color[0]._texture);e(u,".uniform1i(",m,",",y+".bind());"),e.exit(y,".unbind();")}else if(h===rs||h===is||h===os){rt.optional((function(){rt.command(An(g),"invalid matrix for uniform "+p,t.commandStr),rt.command(h===rs&&4===g.length||h===is&&9===g.length||h===os&&16===g.length,"invalid length for matrix uniform "+p,t.commandStr)}));var b=t.global.def("new Float32Array(["+Array.prototype.slice.call(g)+"])"),_=2;h===is?_=3:h===os&&(_=4),e(u,".uniformMatrix",_,"fv(",m,",false,",b,");")}else{switch(h){case Ha:rt.commandType(g,"number","uniform "+p,t.commandStr),a="1f";break;case Wa:rt.command(An(g)&&2===g.length,"uniform "+p,t.commandStr),a="2f";break;case Xa:rt.command(An(g)&&3===g.length,"uniform "+p,t.commandStr),a="3f";break;case Za:rt.command(An(g)&&4===g.length,"uniform "+p,t.commandStr),a="4f";break;case $a:rt.commandType(g,"boolean","uniform "+p,t.commandStr),a="1i";break;case Ya:rt.commandType(g,"number","uniform "+p,t.commandStr),a="1i";break;case ts:rt.command(An(g)&&2===g.length,"uniform "+p,t.commandStr),a="2i";break;case Ka:rt.command(An(g)&&2===g.length,"uniform "+p,t.commandStr),a="2i";break;case es:rt.command(An(g)&&3===g.length,"uniform "+p,t.commandStr),a="3i";break;case Ja:rt.command(An(g)&&3===g.length,"uniform "+p,t.commandStr),a="3i";break;case ns:rt.command(An(g)&&4===g.length,"uniform "+p,t.commandStr),a="4i";break;case Qa:rt.command(An(g)&&4===g.length,"uniform "+p,t.commandStr),a="4i";break}e(u,".uniform",a,"(",m,",",An(g)?Array.prototype.slice.call(g):g,");")}continue}l=d.append(t,e)}else{if(!o(Ds))continue;l=e.def(s.uniforms,"[",n.id(p),"]")}h===as?(rt(!Array.isArray(l),"must specify a scalar prop for textures"),e("if(",l,"&&",l,'._reglType==="framebuffer"){',l,"=",l,".color[0];","}")):h===ss&&(rt(!Array.isArray(l),"must specify a scalar prop for cube maps"),e("if(",l,"&&",l,'._reglType==="framebufferCube"){',l,"=",l,".color[0];","}")),rt.optional((function(){function n(n,r){t.assert(e,n,'bad data or missing for uniform "'+p+'".  '+r)}function r(t){rt(!Array.isArray(l),"must not specify an array type for uniform"),n("typeof "+l+'==="'+t+'"',"invalid type, expected "+t)}function i(e,r){Array.isArray(l)?rt(l.length===e,"must have length "+e):n(s.isArrayLike+"("+l+")&&"+l+".length==="+e,"invalid vector, should have length "+e,t.commandStr)}function o(e){rt(!Array.isArray(l),"must not specify a value type"),n("typeof "+l+'==="function"&&'+l+'._reglType==="texture'+(e===Ra?"2d":"Cube")+'"',"invalid texture type",t.commandStr)}switch(h){case Ya:r("number");break;case Ka:i(2,"number");break;case Ja:i(3,"number");break;case Qa:i(4,"number");break;case Ha:r("number");break;case Wa:i(2,"number");break;case Xa:i(3,"number");break;case Za:i(4,"number");break;case $a:r("boolean");break;case ts:i(2,"boolean");break;case es:i(3,"boolean");break;case ns:i(4,"boolean");break;case rs:i(4,"number");break;case is:i(9,"number");break;case os:i(16,"number");break;case as:o(Ra);break;case ss:o(Da);break}}));var x=1;switch(h){case as:case ss:var w=e.def(l,"._texture");e(u,".uniform1i(",m,",",w,".bind());"),e.exit(w,".unbind();");continue;case Ya:case $a:a="1i";break;case Ka:case ts:a="2i",x=2;break;case Ja:case es:a="3i",x=3;break;case Qa:case ns:a="4i",x=4;break;case Ha:a="1f";break;case Wa:a="2f",x=2;break;case Xa:a="3f",x=3;break;case Za:a="4f",x=4;break;case rs:a="Matrix2fv";break;case is:a="Matrix3fv";break;case os:a="Matrix4fv";break}if(e(u,".uniform",a,"(",m,","),"M"===a.charAt(0)){var E=Math.pow(h-rs+2,2),S=t.global.def("new Float32Array(",E,")");Array.isArray(l)?e("false,(",Ot(E,(function(t){return S+"["+t+"]="+l[t]})),",",S,")"):e("false,(Array.isArray(",l,")||",l," instanceof Float32Array)?",l,":(",Ot(E,(function(t){return S+"["+t+"]="+l+"["+t+"]"})),",",S,")")}else x>1?e(Ot(x,(function(t){return Array.isArray(l)?l[t]:l+"["+t+"]"}))):(rt(!Array.isArray(l),"uniform value must not be an array"),e(l));e(");")}}function Q(t,e,n,r){var i=t.shared,o=i.gl,a=i.draw,s=r.draw;function u(){var i,u=s.elements,c=e;return u?((u.contextDep&&r.contextDynamic||u.propDep)&&(c=n),i=u.append(t,c)):i=c.def(a,".",da),i&&c("if("+i+")"+o+".bindBuffer("+Pa+","+i+".buffer.buffer);"),i}function c(){var i,o=s.count,u=e;return o?((o.contextDep&&r.contextDynamic||o.propDep)&&(u=n),i=o.append(t,u),rt.optional((function(){o.MISSING&&t.assert(e,"false","missing vertex count"),o.DYNAMIC&&t.assert(u,i+">=0","missing vertex count")}))):(i=u.def(a,".",ma),rt.optional((function(){t.assert(u,i+">=0","missing vertex count")}))),i}var l=u();function f(i){var o=s[i];return o?o.contextDep&&r.contextDynamic||o.propDep?o.append(t,n):o.append(t,e):e.def(a,".",i)}var p,h,d=f(va),v=f(ga),m=c();if("number"===typeof m){if(0===m)return}else n("if(",m,"){"),n.exit("}");y&&(p=f(ya),h=t.instancing);var g=l+".type",b=s.elements&&Is(s.elements);function _(){function t(){n(h,".drawElementsInstancedANGLE(",[d,m,g,v+"<<(("+g+"-"+Oo+")>>1)",p],");")}function e(){n(h,".drawArraysInstancedANGLE(",[d,v,m,p],");")}l?b?t():(n("if(",l,"){"),t(),n("}else{"),e(),n("}")):e()}function x(){function t(){n(o+".drawElements("+[d,m,g,v+"<<(("+g+"-"+Oo+")>>1)"]+");")}function e(){n(o+".drawArrays("+[d,v,m]+");")}l?b?t():(n("if(",l,"){"),t(),n("}else{"),e(),n("}")):e()}y&&("number"!==typeof p||p>=0)?"string"===typeof p?(n("if(",p,">0){"),_(),n("}else if(",p,"<0){"),x(),n("}")):_():x()}function $(t,e,n,r,i){var o=P(),a=o.proc("body",i);return rt.optional((function(){o.commandStr=e.commandStr,o.command=o.link(e.commandStr)})),y&&(o.instancing=a.def(o.shared.extensions,".angle_instanced_arrays")),t(o,a,n,r),o.compile().body}function tt(t,e,n,r){Z(t,e),n.useVAO?n.drawVAO?e(t.shared.vao,".setVAO(",n.drawVAO.append(t,e),");"):e(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(e(t.shared.vao,".setVAO(null);"),K(t,e,n,r.attributes,(function(){return!0}))),J(t,e,n,r.uniforms,(function(){return!0})),Q(t,e,e,n)}function et(t,e){var n=t.proc("draw",1);Z(t,n),G(t,n,e.context),H(t,n,e.framebuffer),W(t,n,e),X(t,n,e.state),Y(t,n,e,!1,!0);var r=e.shader.progVar.append(t,n);if(n(t.shared.gl,".useProgram(",r,".program);"),e.shader.program)tt(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var i=t.global.def("{}"),o=n.def(r,".id"),a=n.def(i,"[",o,"]");n(t.cond(a).then(a,".call(this,a0);")["else"](a,"=",i,"[",o,"]=",t.link((function(n){return $(tt,t,e,n,1)})),"(",r,");",a,".call(this,a0);"))}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}function nt(t,e,n,r){function i(){return!0}t.batchId="a1",Z(t,e),K(t,e,n,r.attributes,i),J(t,e,n,r.uniforms,i),Q(t,e,e,n)}function it(t,e,n,r){Z(t,e);var i=n.contextDep,o=e.def(),a="a0",s="a1",u=e.def();t.shared.props=u,t.batchId=o;var c=t.scope(),l=t.scope();function f(t){return t.contextDep&&i||t.propDep}function p(t){return!f(t)}if(e(c.entry,"for(",o,"=0;",o,"<",s,";++",o,"){",u,"=",a,"[",o,"];",l,"}",c.exit),n.needsContext&&G(t,l,n.context),n.needsFramebuffer&&H(t,l,n.framebuffer),X(t,l,n.state,f),n.profile&&f(n.profile)&&Y(t,l,n,!1,!0),r)n.useVAO?n.drawVAO?f(n.drawVAO)?l(t.shared.vao,".setVAO(",n.drawVAO.append(t,l),");"):c(t.shared.vao,".setVAO(",n.drawVAO.append(t,c),");"):c(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(c(t.shared.vao,".setVAO(null);"),K(t,c,n,r.attributes,p),K(t,l,n,r.attributes,f)),J(t,c,n,r.uniforms,p),J(t,l,n,r.uniforms,f),Q(t,c,l,n);else{var h=t.global.def("{}"),d=n.shader.progVar.append(t,l),v=l.def(d,".id"),m=l.def(h,"[",v,"]");l(t.shared.gl,".useProgram(",d,".program);","if(!",m,"){",m,"=",h,"[",v,"]=",t.link((function(e){return $(nt,t,n,e,2)})),"(",d,");}",m,".call(this,a0[",o,"],",o,");")}}function ot(t,e){var n=t.proc("batch",2);t.batchId="0",Z(t,n);var r=!1,i=!0;Object.keys(e.context).forEach((function(t){r=r||e.context[t].propDep})),r||(G(t,n,e.context),i=!1);var o=e.framebuffer,a=!1;function s(t){return t.contextDep&&r||t.propDep}o?(o.propDep?r=a=!0:o.contextDep&&r&&(a=!0),a||H(t,n,o)):H(t,n,null),e.state.viewport&&e.state.viewport.propDep&&(r=!0),W(t,n,e),X(t,n,e.state,(function(t){return!s(t)})),e.profile&&s(e.profile)||Y(t,n,e,!1,"a1"),e.contextDep=r,e.needsContext=i,e.needsFramebuffer=a;var u=e.shader.progVar;if(u.contextDep&&r||u.propDep)it(t,n,e,null);else{var c=u.append(t,n);if(n(t.shared.gl,".useProgram(",c,".program);"),e.shader.program)it(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var l=t.global.def("{}"),f=n.def(c,".id"),p=n.def(l,"[",f,"]");n(t.cond(p).then(p,".call(this,a0,a1);")["else"](p,"=",l,"[",f,"]=",t.link((function(n){return $(it,t,e,n,2)})),"(",c,");",p,".call(this,a0,a1);"))}}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}function at(t,e){var r=t.proc("scope",3);t.batchId="a2";var i=t.shared,o=i.current;function a(n){var o=e.shader[n];o&&r.set(i.shader,"."+n,o.append(t,r))}G(t,r,e.context),e.framebuffer&&e.framebuffer.append(t,r),Ms(Object.keys(e.state)).forEach((function(n){var o=e.state[n],a=o.append(t,r);An(a)?a.forEach((function(e,i){r.set(t.next[n],"["+i+"]",e)})):r.set(i.next,"."+n,a)})),Y(t,r,e,!0,!0),[da,ga,ma,ya,va].forEach((function(n){var o=e.draw[n];o&&r.set(i.draw,"."+n,""+o.append(t,r))})),Object.keys(e.uniforms).forEach((function(o){var a=e.uniforms[o].append(t,r);Array.isArray(a)&&(a="["+a.join()+"]"),r.set(i.uniforms,"["+n.id(o)+"]",a)})),Object.keys(e.attributes).forEach((function(n){var i=e.attributes[n].append(t,r),o=t.scopeAttrib(n);Object.keys(new m).forEach((function(t){r.set(o,"."+t,i[t])}))})),e.scopeVAO&&r.set(i.vao,".targetVAO",e.scopeVAO.append(t,r)),a(pa),a(ha),Object.keys(e.state).length>0&&(r(o,".dirty=true;"),r.exit(o,".dirty=true;")),r("a1(",t.shared.context,",a0,",t.batchId,");")}function st(t){if("object"===typeof t&&!An(t)){for(var e=Object.keys(t),n=0;n<e.length;++n)if(vt.isDynamic(t[e[n]]))return!0;return!1}}function ut(t,e,n){var r=e["static"][n];if(r&&st(r)){var i=t.global,o=Object.keys(r),a=!1,s=!1,u=!1,c=t.global.def("{}");o.forEach((function(e){var n=r[e];if(vt.isDynamic(n)){"function"===typeof n&&(n=r[e]=vt.unbox(n));var o=Rs(n,null);a=a||o.thisDep,u=u||o.propDep,s=s||o.contextDep}else{switch(i(c,".",e,"="),typeof n){case"number":i(n);break;case"string":i('"',n,'"');break;case"object":Array.isArray(n)&&i("[",n.join(),"]");break;default:i(t.link(n));break}i(";")}})),e.dynamic[n]=new vt.DynamicVariable(Ro,{thisDep:a,contextDep:s,propDep:u,ref:c,append:l}),delete e["static"][n]}function l(t,e){o.forEach((function(n){var i=r[n];if(vt.isDynamic(i)){var o=t.invoke(e,i);e(c,".",n,"=",o,";")}}))}}function ct(t,n,r,i,o){var a=P();a.stats=a.link(o),Object.keys(n["static"]).forEach((function(t){ut(a,n,t)})),ka.forEach((function(e){ut(a,t,e)}));var s=q(t,n,r,i,a);return et(a,s),at(a,s),ot(a,s),e(a.compile(),{destroy:function(){s.shader.program.destroy()}})}return{next:x,current:_,procs:function(){var t=P(),e=t.proc("poll"),n=t.proc("refresh"),o=t.block();e(o),n(o);var a,s=t.shared,u=s.gl,c=s.next,l=s.current;o(l,".dirty=false;"),H(t,e),H(t,n,null,!0),y&&(a=t.link(y)),r.oes_vertex_array_object&&n(t.link(r.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var f=0;f<i.maxAttributes;++f){var p=n.def(s.attributes,"[",f,"]"),h=t.cond(p,".buffer");h.then(u,".enableVertexAttribArray(",f,");",u,".bindBuffer(",Ma,",",p,".buffer.buffer);",u,".vertexAttribPointer(",f,",",p,".size,",p,".type,",p,".normalized,",p,".stride,",p,".offset);")["else"](u,".disableVertexAttribArray(",f,");",u,".vertexAttrib4f(",f,",",p,".x,",p,".y,",p,".z,",p,".w);",p,".buffer=null;"),n(h),y&&n(a,".vertexAttribDivisorANGLE(",f,",",p,".divisor);")}return n(t.shared.vao,".currentVAO=null;",t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"),Object.keys(E).forEach((function(r){var i=E[r],a=o.def(c,".",r),s=t.block();s("if(",a,"){",u,".enable(",i,")}else{",u,".disable(",i,")}",l,".",r,"=",a,";"),n(s),e("if(",a,"!==",l,".",r,"){",s,"}")})),Object.keys(S).forEach((function(r){var i,a,s=S[r],f=_[r],p=t.block();if(p(u,".",s,"("),An(f)){var h=f.length;i=t.global.def(c,".",r),a=t.global.def(l,".",r),p(Ot(h,(function(t){return i+"["+t+"]"})),");",Ot(h,(function(t){return a+"["+t+"]="+i+"["+t+"];"})).join("")),e("if(",Ot(h,(function(t){return i+"["+t+"]!=="+a+"["+t+"]"})).join("||"),"){",p,"}")}else i=o.def(c,".",r),a=o.def(l,".",r),p(i,");",l,".",r,"=",i,";"),e("if(",i,"!==",a,"){",p,"}");n(p)})),t.compile()}(),compile:ct}}function js(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Fs=34918,zs=34919,Bs=35007,Us=function(t,e){if(!e.ext_disjoint_timer_query)return null;var n=[];function r(){return n.pop()||e.ext_disjoint_timer_query.createQueryEXT()}function i(t){n.push(t)}var o=[];function a(t){var n=r();e.ext_disjoint_timer_query.beginQueryEXT(Bs,n),o.push(n),h(o.length-1,o.length,t)}function s(){e.ext_disjoint_timer_query.endQueryEXT(Bs)}function u(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var c=[];function l(){return c.pop()||new u}function f(t){c.push(t)}var p=[];function h(t,e,n){var r=l();r.startQueryIndex=t,r.endQueryIndex=e,r.sum=0,r.stats=n,p.push(r)}var d=[],v=[];function m(){var t,n,r=o.length;if(0!==r){v.length=Math.max(v.length,r+1),d.length=Math.max(d.length,r+1),d[0]=0,v[0]=0;var a=0;for(t=0,n=0;n<o.length;++n){var s=o[n];e.ext_disjoint_timer_query.getQueryObjectEXT(s,zs)?(a+=e.ext_disjoint_timer_query.getQueryObjectEXT(s,Fs),i(s)):o[t++]=s,d[n+1]=a,v[n+1]=t}for(o.length=t,t=0,n=0;n<p.length;++n){var u=p[n],c=u.startQueryIndex,l=u.endQueryIndex;u.sum+=d[l]-d[c];var h=v[c],m=v[l];m===h?(u.stats.gpuTime+=u.sum/1e6,f(u)):(u.startQueryIndex=h,u.endQueryIndex=m,p[t++]=u)}p.length=t}}return{beginQuery:a,endQuery:s,pushScopeStats:h,update:m,getNumPendingQueries:function(){return o.length},clear:function(){n.push.apply(n,o);for(var t=0;t<n.length;t++)e.ext_disjoint_timer_query.deleteQueryEXT(n[t]);o.length=0,n.length=0},restore:function(){o.length=0,n.length=0}}},Vs=16384,qs=256,Gs=1024,Hs=34962,Ws="webglcontextlost",Xs="webglcontextrestored",Zs=1,Ys=2,Ks=3;function Js(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}function Qs(t){var n=Ct(t);if(!n)return null;var r=n.gl,i=r.getContextAttributes(),o=r.isContextLost(),a=Tt(r,n);if(!a)return null;var s=yt(),u=js(),c=a.extensions,l=Us(r,c),f=gt(),p=r.drawingBufferWidth,h=r.drawingBufferHeight,d={tick:0,time:0,viewportWidth:p,viewportHeight:h,framebufferWidth:p,framebufferHeight:h,drawingBufferWidth:p,drawingBufferHeight:h,pixelRatio:n.pixelRatio},v={},m={elements:null,primitive:4,count:-1,offset:0,instances:-1},g=Ee(r,c),y=nn(r,u,n,_),b=fo(r,c,g,u,y);function _(t){return b.destroyBuffer(t)}var x=En(r,c,y,u),w=go(r,s,u,n),E=pi(r,c,g,(function(){T.procs.poll()}),d,u,n),S=Ti(r,c,g,u,n),C=so(r,c,g,E,S,u),T=Ns(r,s,c,g,y,x,E,C,v,b,w,m,d,l,n),O=wo(r,C,T.procs.poll,d,i,c,g),A=T.next,k=r.canvas,M=[],P=[],I=[],L=[n.onDestroy],R=null;function D(){if(0===M.length)return l&&l.update(),void(R=null);R=mt.next(D),X();for(var t=M.length-1;t>=0;--t){var e=M[t];e&&e(d,null,0)}r.flush(),l&&l.update()}function N(){!R&&M.length>0&&(R=mt.next(D))}function j(){R&&(mt.cancel(D),R=null)}function F(t){t.preventDefault(),o=!0,j(),P.forEach((function(t){t()}))}function z(t){r.getError(),o=!1,a.restore(),w.restore(),y.restore(),E.restore(),S.restore(),C.restore(),b.restore(),l&&l.restore(),T.procs.refresh(),N(),I.forEach((function(t){t()}))}function B(){M.length=0,j(),k&&(k.removeEventListener(Ws,F),k.removeEventListener(Xs,z)),w.clear(),C.clear(),S.clear(),E.clear(),x.clear(),y.clear(),b.clear(),l&&l.clear(),L.forEach((function(t){t()}))}function U(t){function n(t){var n=e({},t);function r(t){if(t in n){var e=n[t];delete n[t],Object.keys(e).forEach((function(r){n[t+"."+r]=e[r]}))}}return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),r("blend"),r("depth"),r("cull"),r("stencil"),r("polygonOffset"),r("scissor"),r("sample"),"vao"in t&&(n.vao=t.vao),n}function r(t,e){var n={},r={};return Object.keys(t).forEach((function(i){var o=t[i];if(vt.isDynamic(o))r[i]=vt.unbox(o,i);else{if(e&&Array.isArray(o))for(var a=0;a<o.length;++a)if(vt.isDynamic(o[a]))return void(r[i]=vt.unbox(o,i));n[i]=o}})),{dynamic:r,static:n}}rt(!!t,"invalid args to regl({...})"),rt.type(t,"object","invalid args to regl({...})");var i=r(t.context||{},!0),a=r(t.uniforms||{},!0),s=r(t.attributes||{},!1),u=r(n(t),!1),c={gpuTime:0,cpuTime:0,count:0},l=T.compile(u,s,a,i,c),f=l.draw,p=l.batch,h=l.scope,d=[];function v(t){while(d.length<t)d.push(null);return d}function m(t,e){var n;if(o&&rt.raise("context lost"),"function"===typeof t)return h.call(this,null,t,0);if("function"===typeof e)if("number"===typeof t)for(n=0;n<t;++n)h.call(this,null,e,n);else{if(!Array.isArray(t))return h.call(this,t,e,0);for(n=0;n<t.length;++n)h.call(this,t[n],e,n)}else if("number"===typeof t){if(t>0)return p.call(this,v(0|t),0|t)}else{if(!Array.isArray(t))return f.call(this,t);if(t.length)return p.call(this,t,t.length)}}return e(m,{stats:c,destroy:function(){l.destroy()}})}k&&(k.addEventListener(Ws,F,!1),k.addEventListener(Xs,z,!1));var V=C.setFBO=U({framebuffer:vt.define.call(null,Zs,"framebuffer")});function q(t,e){var n=0;T.procs.poll();var i=e.color;i&&(r.clearColor(+i[0]||0,+i[1]||0,+i[2]||0,+i[3]||0),n|=Vs),"depth"in e&&(r.clearDepth(+e.depth),n|=qs),"stencil"in e&&(r.clearStencil(0|e.stencil),n|=Gs),rt(!!n,"called regl.clear with no buffer specified"),r.clear(n)}function G(t){if(rt("object"===typeof t&&t,"regl.clear() takes an object as input"),"framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var n=0;n<6;++n)V(e({framebuffer:t.framebuffer.faces[n]},t),q);else V(t,q);else q(null,t)}function H(t){function e(){var e=Js(M,t);function n(){var t=Js(M,n);M[t]=M[M.length-1],M.length-=1,M.length<=0&&j()}rt(e>=0,"cannot cancel a frame twice"),M[e]=n}return rt.type(t,"function","regl.frame() callback must be a function"),M.push(t),N(),{cancel:e}}function W(){var t=A.viewport,e=A.scissor_box;t[0]=t[1]=e[0]=e[1]=0,d.viewportWidth=d.framebufferWidth=d.drawingBufferWidth=t[2]=e[2]=r.drawingBufferWidth,d.viewportHeight=d.framebufferHeight=d.drawingBufferHeight=t[3]=e[3]=r.drawingBufferHeight}function X(){d.tick+=1,d.time=Y(),W(),T.procs.poll()}function Z(){E.refresh(),W(),T.procs.refresh(),l&&l.update()}function Y(){return(gt()-f)/1e3}function K(t,e){var n;switch(rt.type(e,"function","listener callback must be a function"),t){case"frame":return H(e);case"lost":n=P;break;case"restore":n=I;break;case"destroy":n=L;break;default:rt.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(e),{cancel:function(){for(var t=0;t<n.length;++t)if(n[t]===e)return n[t]=n[n.length-1],void n.pop()}}}Z();var J=e(U,{clear:G,prop:vt.define.bind(null,Zs),context:vt.define.bind(null,Ys),this:vt.define.bind(null,Ks),draw:U({}),buffer:function(t){return y.create(t,Hs,!1,!1)},elements:function(t){return x.create(t,!1)},texture:E.create2D,cube:E.createCube,renderbuffer:S.create,framebuffer:C.create,framebufferCube:C.createCube,vao:b.createVAO,attributes:i,frame:H,on:K,limits:g,hasExtension:function(t){return g.extensions.indexOf(t.toLowerCase())>=0},read:O,destroy:B,_gl:r,_refresh:Z,poll:function(){X(),l&&l.update()},now:Y,stats:u});return n.onDone(null,J),J}return Qs}))},T12o:function(t,e,n){"use strict";n.r(e);var r=n("xwgP"),i=n.n(r),o=n("OS9G"),a=n("oSqR"),s=n("Rsk4"),u=i.a.memo(s["default"]["docs-edit_polygon"].component);e["default"]=t=>(i.a.useEffect((()=>{var e;null!==t&&void 0!==t&&null!==(e=t.location)&&void 0!==e&&e.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(t.location.hash.slice(1)))}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"markdown"}),i.a.createElement(a["default"],s["default"]["docs-edit_polygon"].previewerProps,i.a.createElement(u,null)))))},T9r4:function(t,e,n){var r=n("bXon");t.exports=r("navigator","userAgent")||""},TD2g:function(t,e){var n=Object.prototype,r=n.hasOwnProperty;function i(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&r.call(t,"index")&&(n.index=t.index,n.input=t.input),n}t.exports=i},TFir:function(t,e,n){t.exports=n("tEmt")},TIpG:function(t,e,n){var r=n("wmqP"),i=n("mjh8");function o(t){return null!=t&&i(t.length)&&!r(t)}t.exports=o},TJOf:function(t,e,n){var r=n("tIv8");function i(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}t.exports=i},TKkZ:function(t,e){function n(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}t.exports=n},TWOK:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("FpZt");function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){Object(r["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},TX3P:function(t,e,n){(function(e){var n="Expected a function",r=NaN,i="[object Symbol]",o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt,l="object"==typeof e&&e&&e.Object===Object&&e,f="object"==typeof self&&self&&self.Object===Object&&self,p=l||f||Function("return this")(),h=Object.prototype,d=h.toString,v=Math.max,m=Math.min,g=function(){return p.Date.now()};function y(t,e,r){var i,o,a,s,u,c,l=0,f=!1,p=!1,h=!0;if("function"!=typeof t)throw new TypeError(n);function d(e){var n=i,r=o;return i=o=void 0,l=e,s=t.apply(r,n),s}function y(t){return l=t,u=setTimeout(E,e),f?d(t):s}function _(t){var n=t-c,r=t-l,i=e-n;return p?m(i,a-r):i}function x(t){var n=t-c,r=t-l;return void 0===c||n>=e||n<0||p&&r>=a}function E(){var t=g();if(x(t))return S(t);u=setTimeout(E,_(t))}function S(t){return u=void 0,h&&i?d(t):(i=o=void 0,s)}function C(){void 0!==u&&clearTimeout(u),l=0,i=c=o=u=void 0}function T(){return void 0===u?s:S(g())}function O(){var t=g(),n=x(t);if(i=arguments,o=this,c=t,n){if(void 0===u)return y(c);if(p)return u=setTimeout(E,e),d(c)}return void 0===u&&(u=setTimeout(E,e)),s}return e=w(e)||0,b(r)&&(f=!!r.leading,p="maxWait"in r,a=p?v(w(r.maxWait)||0,e):a,h="trailing"in r?!!r.trailing:h),O.cancel=C,O.flush=T,O}function b(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function _(t){return!!t&&"object"==typeof t}function x(t){return"symbol"==typeof t||_(t)&&d.call(t)==i}function w(t){if("number"==typeof t)return t;if(x(t))return r;if(b(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=b(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=s.test(t);return n||u.test(t)?c(t.slice(2),n?2:8):a.test(t)?r:+t}t.exports=y}).call(this,n("oN6F"))},TaHB:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return o}));var r=1e-6,i="undefined"!==typeof Float32Array?Float32Array:Array,o=Math.random;Math.PI;Math.hypot||(Math.hypot=function(){var t=0,e=arguments.length;while(e--)t+=arguments[e]*arguments[e];return Math.sqrt(t)})},TdPr:function(t,e,n){var r=n("TpDJ"),i=n("TIpG"),o=n("TeP8"),a=n("E5vS");function s(t,e,n){if(!a(n))return!1;var s=typeof e;return!!("number"==s?i(n)&&o(e,n.length):"string"==s&&e in n)&&r(n[e],t)}t.exports=s},TeP8:function(t,e){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;function i(t,e){var i=typeof t;return e=null==e?n:e,!!e&&("number"==i||"symbol"!=i&&r.test(t))&&t>-1&&t%1==0&&t<e}t.exports=i},Tj1F:function(t,e,n){"use strict";(function(t){function r(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function i(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function o(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a}function a(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t}function s(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t["default"]:t}function u(t,e){return e={exports:{}},t(e,e.exports),e.exports}n.d(e,"a",(function(){return P})),n.d(e,"b",(function(){return D})),n.d(e,"c",(function(){return O})),n.d(e,"d",(function(){return R}));var c=u((function(t,e){function n(t){return t&&"number"===typeof t.length&&t.length>=0&&t.length%1===0}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n,t.exports=e["default"]}));s(c);var l=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){return function(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];var r=e.pop();return t.call(this,e,r)}},t.exports=e["default"]}));s(l);var f=u((function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.fallback=a,n.wrap=s;var r,i=n.hasSetImmediate="function"===typeof setImmediate&&setImmediate,o=n.hasNextTick="object"===typeof t&&"function"===typeof t.nextTick;function a(t){setTimeout(t,0)}function s(t){return function(e){var n=[],r=arguments.length-1;while(r-- >0)n[r]=arguments[r+1];return t((function(){return e.apply(void 0,n)}))}}r=i?setImmediate:o?t.nextTick:a,n["default"]=s(r)}));s(f);f.fallback,f.wrap,f.hasSetImmediate,f.hasNextTick;var p=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var n=i(l),r=i(f);function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return(0,h.isAsync)(t)?function(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];var r=e.pop(),i=t.apply(this,e);return a(i,r)}:(0,n["default"])((function(e,n){var r;try{r=t.apply(this,e)}catch(i){return n(i)}if(r&&"function"===typeof r.then)return a(r,n);n(null,r)}))}function a(t,e){return t.then((function(t){s(e,null,t)}),(function(t){s(e,t&&t.message?t:new Error(t))}))}function s(t,e,n){try{t(e,n)}catch(i){(0,r["default"])((function(t){throw t}),i)}}t.exports=e["default"]}));s(p);var h=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isAsyncIterable=e.isAsyncGenerator=e.isAsync=void 0;var n=r(p);function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return"AsyncFunction"===t[Symbol.toStringTag]}function o(t){return"AsyncGenerator"===t[Symbol.toStringTag]}function a(t){return"function"===typeof t[Symbol.asyncIterator]}function s(t){if("function"!==typeof t)throw new Error("expected a function");return i(t)?(0,n["default"])(t):t}e["default"]=s,e.isAsync=i,e.isAsyncGenerator=o,e.isAsyncIterable=a}));s(h);h.isAsyncIterable,h.isAsyncGenerator,h.isAsync;var d=u((function(t,e){function n(t,e){if(void 0===e&&(e=t.length),!e)throw new Error("arity is undefined");function n(){var n=this,r=[],i=arguments.length;while(i--)r[i]=arguments[i];return"function"===typeof r[e-1]?t.apply(this,r):new Promise((function(i,o){r[e-1]=function(t){var e=[],n=arguments.length-1;while(n-- >0)e[n]=arguments[n+1];if(t)return o(t);i(e.length>1?e:e[0])},t.apply(n,r)}))}return Object.defineProperty(n,"name",{configurable:!0,value:"awaitable("+t.name+")"}),n}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n,t.exports=e["default"]}));s(d);var v=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=o(c),r=o(h),i=o(d);function o(t){return t&&t.__esModule?t:{default:t}}e["default"]=(0,i["default"])((function(t,e,i){var o=(0,n["default"])(e)?[]:{};t(e,(function(t,e,n){(0,r["default"])(t)((function(t){var r,i=[],a=arguments.length-1;while(a-- >0)i[a]=arguments[a+1];i.length<2&&(r=i,i=r[0]),o[e]=i,n(t)}))}),(function(t){return i(t,o)}))}),3),t.exports=e["default"]}));s(v);var m=u((function(t,e){function n(t){function e(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];if(null!==t){var r=t;t=null,r.apply(this,e)}}return Object.assign(e,t),e}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n,t.exports=e["default"]}));s(m);var g=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){return t[Symbol.iterator]&&t[Symbol.iterator]()},t.exports=e["default"]}));s(g);var y=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=u;var n=i(c),r=i(g);function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=-1,n=t.length;return function(){return++e<n?{value:t[e],key:e}:null}}function a(t){var e=-1;return function(){var n=t.next();return n.done?null:(e++,{value:n.value,key:e})}}function s(t){var e=t?Object.keys(t):[],n=-1,r=e.length;return function(){var i=e[++n];return n<r?{value:t[i],key:i}:null}}function u(t){if((0,n["default"])(t))return o(t);var e=(0,r["default"])(t);return e?a(e):s(t)}t.exports=e["default"]}));s(y);var b=u((function(t,e){function n(t){return function(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];if(null===t)throw new Error("Callback was already called.");var r=t;t=null,r.apply(this,e)}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n,t.exports=e["default"]}));s(b);var _=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n={};e["default"]=n,t.exports=e["default"]}));s(_);var x=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i;var n=r(_);function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,r,i){var o=!1,a=!1,s=!1,u=0,c=0;function l(){u>=e||s||o||(s=!0,t.next().then((function(t){var e=t.value,n=t.done;if(!a&&!o){if(s=!1,n)return o=!0,void(u<=0&&i(null));u++,r(e,c,f),c++,l()}}))["catch"](p))}function f(t,e){if(u-=1,!a)return t?p(t):!1===t?(o=!0,void(a=!0)):e===n["default"]||o&&u<=0?(o=!0,i(null)):void l()}function p(t){a||(s=!1,o=!0,i(t))}l()}t.exports=e["default"]}));s(x);var w=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=s(m),r=s(y),i=s(b),o=s(x),a=s(_);function s(t){return t&&t.__esModule?t:{default:t}}e["default"]=function(t){return function(e,s,u){if(u=(0,n["default"])(u),t<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!e)return u(null);if((0,h.isAsyncGenerator)(e))return(0,o["default"])(e,t,s,u);if((0,h.isAsyncIterable)(e))return(0,o["default"])(e[Symbol.asyncIterator](),t,s,u);var c=(0,r["default"])(e),l=!1,f=!1,p=0,d=!1;function v(t,e){if(!f)if(p-=1,t)l=!0,u(t);else if(!1===t)l=!0,f=!0;else{if(e===a["default"]||l&&p<=0)return l=!0,u(null);d||m()}}function m(){d=!0;while(p<t&&!l){var e=c();if(null===e)return l=!0,void(p<=0&&u(null));p+=1,s(e.value,e.key,(0,i["default"])(v))}d=!1}m()}},t.exports=e["default"]}));s(w);var E=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=o(w),r=o(h),i=o(d);function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e,i,o){return(0,n["default"])(e)(t,(0,r["default"])(i),o)}e["default"]=(0,i["default"])(a,4),t.exports=e["default"]}));s(E);var S=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=i(E),r=i(d);function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,r){return(0,n["default"])(t,1,e,r)}e["default"]=(0,r["default"])(o,3),t.exports=e["default"]}));s(S);var C=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var n=i(v),r=i(S);function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){return(0,n["default"])(r["default"],t,e)}t.exports=e["default"]})),T=s(C),O=function(){function t(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];this.args=[],this.tasks=[]}return t.prototype.call=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];return this.args=e,T(this.tasks)},t.prototype.tap=function(t,e){var n=this;this.tasks.push((function(r){e.apply(void 0,a(n.args)),r(null,t)}))},t}(),A=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=l(c),r=l(_),i=l(E),o=l(m),a=l(b),s=l(h),u=l(d);function l(t){return t&&t.__esModule?t:{default:t}}function f(t,e,n){n=(0,o["default"])(n);var i=0,s=0,u=t.length,c=!1;function l(t,e){!1===t&&(c=!0),!0!==c&&(t?n(t):++s!==u&&e!==r["default"]||n(null))}for(0===u&&n(null);i<u;i++)e(t[i],i,(0,a["default"])(l))}function p(t,e,n){return(0,i["default"])(t,1/0,e,n)}function v(t,e,r){var i=(0,n["default"])(t)?f:p;return i(t,(0,s["default"])(e),r)}e["default"]=(0,u["default"])(v,3),t.exports=e["default"]}));s(A);var k=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var n=i(A),r=i(v);function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){return(0,r["default"])(n["default"],t,e)}t.exports=e["default"]})),M=s(k),P=function(){function t(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];this.tasks=[]}return t.prototype.promise=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];return M(this.tasks)},t.prototype.tapPromise=function(t,e){var n=this;this.tasks.push((function(o){return r(n,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,e()];case 1:return n.sent(),o(null,t),[2]}}))}))}))},t}(),I=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=a(m),r=a(b),i=a(h),o=a(d);function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(e=(0,n["default"])(e),!Array.isArray(t))return e(new Error("First argument to waterfall must be an array of functions"));if(!t.length)return e();var o=0;function a(e){var n=(0,i["default"])(t[o++]);n.apply(void 0,e.concat([(0,r["default"])(s)]))}function s(n){var r=[],i=arguments.length-1;while(i-- >0)r[i]=arguments[i+1];if(!1!==n)return n||o===t.length?e.apply(void 0,[n].concat(r)):void a(r)}a([])}e["default"]=(0,o["default"])(s),t.exports=e["default"]})),L=s(I),R=function(){function t(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];this.tasks=[]}return t.prototype.call=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];return L(this.tasks)},t.prototype.tap=function(t,e){0===this.tasks.length?this.tasks.push((function(t){var n=e();t(!!n&&null,n)})):this.tasks.push((function(n,r){var i=e();r(!!i&&null,t)}))},t}(),D=function(){function t(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];this.tasks=[]}return t.prototype.call=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];return T(this.tasks)},t.prototype.tap=function(t,e){this.tasks.push((function(n){var r=e();n(r,t)}))},t}()}).call(this,n("7vYp"))},Tk1U:function(t,e,n){"use strict";var r=n("hXyk"),i=n("n2ef");t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(r(this),"number"!==t)}},TlJp:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("xwgP"),i=r["createContext"](void 0),o=function(t){var e=t.children,n=t.size;return r["createElement"](i.Consumer,null,(function(t){return r["createElement"](i.Provider,{value:n||t},e)}))};e["b"]=i},TpDJ:function(t,e){function n(t,e){return t===e||t!==t&&e!==e}t.exports=n},Tphk:function(t,e,n){"use strict";var r=n("HIsA"),i=n("Ji6T"),o=n("DDwO");r({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;o(e);var r=o(n.set);return i(t,(function(t){r.call(n,e(t),t)})),n}})},TxJF:function(t,e){function n(t,e){var n=-1,r=null==t?0:t.length,i=0,o=[];while(++n<r){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}t.exports=n},Txhl:function(t,e,n){"use strict";var r=n("POrF"),i=n("5SLN"),o=i("%Function.prototype.apply%"),a=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||r.call(a,o),u=i("%Object.getOwnPropertyDescriptor%",!0),c=i("%Object.defineProperty%",!0),l=i("%Math.max%");if(c)try{c({},"a",{value:1})}catch(p){c=null}t.exports=function(t){var e=s(r,a,arguments);if(u&&c){var n=u(e,"length");n.configurable&&c(e,"length",{value:1+l(0,t.length-(arguments.length-1))})}return e};var f=function(){return s(r,o,arguments)};c?c(t.exports,"apply",{value:f}):t.exports.apply=f},UHDP:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("BbNA");function i(t,e){void 0===e&&(e=!0);var n=r.makePropertyInjectDecorator(t,e),i=r.makePropertyInjectNamedDecorator(t,e),o=r.makePropertyInjectTaggedDecorator(t,e),a=r.makePropertyMultiInjectDecorator(t,e);return{lazyInject:n,lazyInjectNamed:i,lazyInjectTagged:o,lazyMultiInject:a}}e["default"]=i},UPu9:function(t,e,n){var r=n("hXyk"),i=n("0f0C");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,t.call(n,[]),e=n instanceof Array}catch(o){}return function(n,o){return r(n),i(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},UTnC:function(t,e,n){"use strict";var r=n("ma2j"),i=n("Iu9s"),o=RegExp.prototype.exec,a=String.prototype.replace,s=o,u=function(){var t=/a/,e=/b*/g;return o.call(t,"a"),o.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),c=i.UNSUPPORTED_Y||i.BROKEN_CARET,l=void 0!==/()??/.exec("")[1],f=u||l||c;f&&(s=function(t){var e,n,i,s,f=this,p=c&&f.sticky,h=r.call(f),d=f.source,v=0,m=t;return p&&(h=h.replace("y",""),-1===h.indexOf("g")&&(h+="g"),m=String(t).slice(f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==t[f.lastIndex-1])&&(d="(?: "+d+")",m=" "+m,v++),n=new RegExp("^(?:"+d+")",h)),l&&(n=new RegExp("^"+d+"$(?!\\s)",h)),u&&(e=f.lastIndex),i=o.call(p?n:f,m),p?i?(i.input=i.input.slice(v),i[0]=i[0].slice(v),i.index=f.lastIndex,f.lastIndex+=i[0].length):f.lastIndex=0:u&&i&&(f.lastIndex=f.global?i.index+i[0].length:e),l&&i&&i.length>1&&a.call(i[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)})),i}),t.exports=s},UZM3:function(t,e,n){var r=n("Go1P");function i(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}t.exports=i},UaKd:function(t,e,n){"use strict";function r(t){return t&&"object"===typeof t&&"default"in t?t["default"]:t}var i=n("xwgP"),o=r(i);function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var u=!("undefined"===typeof window||!window.document||!window.document.createElement);function c(t,e,n){if("function"!==typeof t)throw new Error("Expected reducePropsToState to be a function.");if("function"!==typeof e)throw new Error("Expected handleStateChangeOnClient to be a function.");if("undefined"!==typeof n&&"function"!==typeof n)throw new Error("Expected mapStateOnServer to either be undefined or a function.");function r(t){return t.displayName||t.name||"Component"}return function(c){if("function"!==typeof c)throw new Error("Expected WrappedComponent to be a React component.");var l,f=[];function p(){l=t(f.map((function(t){return t.props}))),h.canUseDOM?e(l):n&&(l=n(l))}var h=function(t){function e(){return t.apply(this,arguments)||this}s(e,t),e.peek=function(){return l},e.rewind=function(){if(e.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var t=l;return l=void 0,f=[],t};var n=e.prototype;return n.UNSAFE_componentWillMount=function(){f.push(this),p()},n.componentDidUpdate=function(){p()},n.componentWillUnmount=function(){var t=f.indexOf(this);f.splice(t,1),p()},n.render=function(){return o.createElement(c,this.props)},e}(i.PureComponent);return a(h,"displayName","SideEffect("+r(c)+")"),a(h,"canUseDOM",u),h}}t.exports=c},Uadk:function(t,e,n){var r=n("HIsA"),i=n("E06e"),o=Math.acosh,a=Math.log,s=Math.sqrt,u=Math.LN2,c=!o||710!=Math.floor(o(Number.MAX_VALUE))||o(1/0)!=1/0;r({target:"Math",stat:!0,forced:c},{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?a(t)+u:i(t-1+s(t-1)*s(t+1))}})},UpgW:function(t,e,n){var r=n("Ffxn"),i=n("cA8S"),o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a="\\u0300-\\u036f",s="\\ufe20-\\ufe2f",u="\\u20d0-\\u20ff",c=a+s+u,l="["+c+"]",f=RegExp(l,"g");function p(t){return t=i(t),t&&t.replace(o,r).replace(f,"")}t.exports=p},UqPo:function(t,e,n){var r=n("HIsA"),i=n("icJ8"),o=n("hXyk"),a=i.toKey,s=i.getMap,u=i.store;r({target:"Reflect",stat:!0},{deleteMetadata:function(t,e){var n=arguments.length<3?void 0:a(arguments[2]),r=s(o(e),n,!1);if(void 0===r||!r["delete"](t))return!1;if(r.size)return!0;var i=u.get(e);return i["delete"](n),!!i.size||u["delete"](e)}})},Uvls:function(t,e,n){"use strict";var r=n("R64i"),i=n("KpHK");t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},Uvt4:function(t,e,n){"use strict";var r=n("8tFq"),i=n("M2Sr"),o=n("TWOK"),a=n("kUw8"),s=n("nKrB"),u=n("XF5O"),c=n("tST3"),l=n("xwgP"),f=n("fK+4"),p=n.n(f),h=n("jK+o"),d=n.n(h),v=n("JuV/"),m=n("2gAT"),g=n("OTP3"),y=0,b=Date.now();function _(){var t=y;return y+=1,"rcNotification_".concat(b,"_").concat(t)}var x=function(t){Object(u["a"])(n,t);var e=Object(c["a"])(n);function n(){var t;Object(a["a"])(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t=e.call.apply(e,[this].concat(i)),t.state={notices:[]},t.hookRefs=new Map,t.add=function(e,n){var r=e.key||_(),i=Object(o["a"])(Object(o["a"])({},e),{},{key:r}),a=t.props.maxCount;t.setState((function(t){var e=t.notices,o=e.map((function(t){return t.notice.key})).indexOf(r),s=e.concat();return-1!==o?s.splice(o,1,{notice:i,holderCallback:n}):(a&&e.length>=a&&(i.key=s[0].notice.key,i.updateMark=_(),i.userPassKey=r,s.shift()),s.push({notice:i,holderCallback:n})),{notices:s}}))},t.remove=function(e){t.setState((function(t){var n=t.notices;return{notices:n.filter((function(t){var n=t.notice,r=n.key,i=n.userPassKey,o=i||r;return o!==e}))}}))},t.noticePropsMap={},t}return Object(s["a"])(n,[{key:"getTransitionName",value:function(){var t=this.props,e=t.prefixCls,n=t.animation,r=this.props.transitionName;return!r&&n&&(r="".concat(e,"-").concat(n)),r}},{key:"render",value:function(){var t=this,e=this.state.notices,n=this.props,r=n.prefixCls,a=n.className,s=n.closeIcon,u=n.style,c=[];return e.forEach((function(n,i){var a=n.notice,u=n.holderCallback,l=i===e.length-1?a.updateMark:void 0,f=a.key,p=a.userPassKey,h=Object(o["a"])(Object(o["a"])(Object(o["a"])({prefixCls:r,closeIcon:s},a),a.props),{},{key:f,noticeKey:p||f,updateMark:l,onClose:function(e){var n;t.remove(e),null===(n=a.onClose)||void 0===n||n.call(a)},onClick:a.onClick,children:a.content});c.push(f),t.noticePropsMap[f]={props:h,holderCallback:u}})),l["createElement"]("div",{className:d()(r,a),style:u},l["createElement"](v["a"],{keys:c,motionName:this.getTransitionName(),onVisibleChanged:function(e,n){var r=n.key;e||delete t.noticePropsMap[r]}},(function(e){var n=e.key,a=e.className,s=e.style,u=e.visible,c=t.noticePropsMap[n],f=c.props,p=c.holderCallback;return p?l["createElement"]("div",{key:n,className:d()(a,"".concat(r,"-hook-holder")),style:Object(o["a"])({},s),ref:function(e){"undefined"!==typeof n&&(e?(t.hookRefs.set(n,e),p(e,f)):t.hookRefs["delete"](n))}}):l["createElement"](m["a"],Object(i["a"])({},f,{className:d()(a,null===f||void 0===f?void 0:f.className),style:Object(o["a"])(Object(o["a"])({},s),null===f||void 0===f?void 0:f.style),visible:u}))})))}}]),n}(l["Component"]);x.newInstance=void 0,x.defaultProps={prefixCls:"rc-notification",animation:"fade",style:{top:65,left:"50%"}},x.newInstance=function(t,e){var n=t||{},o=n.getContainer,a=Object(r["a"])(n,["getContainer"]),s=document.createElement("div");if(o){var u=o();u.appendChild(s)}else document.body.appendChild(s);var c=!1;function f(t){c||(c=!0,e({notice:function(e){t.add(e)},removeNotice:function(e){t.remove(e)},component:t,destroy:function(){p.a.unmountComponentAtNode(s),s.parentNode&&s.parentNode.removeChild(s)},useNotification:function(){return Object(g["a"])(t)}}))}p.a.render(l["createElement"](x,Object(i["a"])({},a,{ref:f})),s)};var w=x;e["a"]=w},"V8i+":function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("bXon"),a=n("hXyk"),s=n("DDwO"),u=n("40mc"),c=n("70zE"),l=n("YjHi"),f=n("Ji6T");r({target:"Map",proto:!0,real:!0,forced:i},{filter:function(t){var e=a(this),n=l(e),r=u(t,arguments.length>1?arguments[1]:void 0,3),i=new(c(e,o("Map"))),p=s(i.set);return f(n,(function(t,n){r(n,t,e)&&p.call(i,t,n)}),void 0,!0,!0),i}})},VGuf:function(t,e,n){"use strict";n.r(e);var r=n("xwgP"),i=n.n(r),o=n("OS9G"),a=n("oSqR"),s=n("Rsk4"),u=i.a.memo(s["default"]["docs-draw_polygon"].component);e["default"]=t=>(i.a.useEffect((()=>{var e;null!==t&&void 0!==t&&null!==(e=t.location)&&void 0!==e&&e.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(t.location.hash.slice(1)))}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"markdown"},i.a.createElement("h2",{id:"\u7ed8\u5236\u9762"},i.a.createElement(o["AnchorLink"],{to:"#\u7ed8\u5236\u9762","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u7ed8\u5236\u9762")),i.a.createElement(a["default"],s["default"]["docs-draw_polygon"].previewerProps,i.a.createElement(u,null)))))},VHnM:function(t,e,n){"use strict";n.r(e);n("xmvT"),n("0k/8")},VL8K:function(t,e,n){var r=n("sMtq"),i=n("2Swa"),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},VaST:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n("M2Sr"),i=n("kUw8"),o=n("nKrB"),a=n("XF5O"),s=n("tST3"),u=n("xwgP"),c=n("+hmf"),l=c["a"],f=n("zJnk"),p=function(t){Object(a["a"])(n,t);var e=Object(s["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return Object(o["a"])(n,[{key:"getLocale",value:function(){var t=this.props,e=t.componentName,n=t.defaultLocale,i=n||l[null!==e&&void 0!==e?e:"global"],o=this.context,a=e&&o?o[e]:{};return Object(r["a"])(Object(r["a"])({},i instanceof Function?i():i),a||{})}},{key:"getLocaleCode",value:function(){var t=this.context,e=t&&t.locale;return t&&t.exist&&!e?l.locale:e}},{key:"render",value:function(){return this.props.children(this.getLocale(),this.getLocaleCode(),this.context)}}]),n}(u["Component"]);p.defaultProps={componentName:"global"},p.contextType=f["a"]},VeQJ:function(t,e,n){"use strict";t.exports=function(){var t=arguments.length,e=new Array(t);while(t--)e[t]=arguments[t];return new this(e)}},Vfe6:function(t,e,n){var r=n("YHGW");function i(t){var e,n=0;switch(t.type){case"Polygon":return o(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=o(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(e=0;e<t.geometries.length;e++)n+=i(t.geometries[e]);return n}}function o(t){var e=0;if(t&&t.length>0){e+=Math.abs(a(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(a(t[n]))}return e}function a(t){var e,n,i,o,a,u,c,l=0,f=t.length;if(f>2){for(c=0;c<f;c++)c===f-2?(o=f-2,a=f-1,u=0):c===f-1?(o=f-1,a=0,u=1):(o=c,a=c+1,u=c+2),e=t[o],n=t[a],i=t[u],l+=(s(i[0])-s(e[0]))*Math.sin(s(n[1]));l=l*r.RADIUS*r.RADIUS/2}return l}function s(t){return t*Math.PI/180}t.exports.geometry=i,t.exports.ring=a},VtbN:function(t,e,n){(function(e,n){t.exports=n()})(0,(function(){"use strict";function t(n,r,i,o,a,s){if(!(a-o<=i)){var u=o+a>>1;e(n,r,u,o,a,s%2),t(n,r,i,o,u-1,s+1),t(n,r,i,u+1,a,s+1)}}function e(t,r,i,o,a,s){while(a>o){if(a-o>600){var u=a-o+1,c=i-o+1,l=Math.log(u),f=.5*Math.exp(2*l/3),p=.5*Math.sqrt(l*f*(u-f)/u)*(c-u/2<0?-1:1),h=Math.max(o,Math.floor(i-c*f/u+p)),d=Math.min(a,Math.floor(i+(u-c)*f/u+p));e(t,r,i,h,d,s)}var v=r[2*i+s],m=o,g=a;n(t,r,o,i),r[2*a+s]>v&&n(t,r,o,a);while(m<g){n(t,r,m,g),m++,g--;while(r[2*m+s]<v)m++;while(r[2*g+s]>v)g--}r[2*o+s]===v?n(t,r,o,g):(g++,n(t,r,g,a)),g<=i&&(o=g+1),i<=g&&(a=g-1)}}function n(t,e,n,i){r(t,n,i),r(e,2*n,2*i),r(e,2*n+1,2*i+1)}function r(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function i(t,e,n,r,i,o,a){var s,u,c=[0,t.length-1,0],l=[];while(c.length){var f=c.pop(),p=c.pop(),h=c.pop();if(p-h<=a)for(var d=h;d<=p;d++)s=e[2*d],u=e[2*d+1],s>=n&&s<=i&&u>=r&&u<=o&&l.push(t[d]);else{var v=Math.floor((h+p)/2);s=e[2*v],u=e[2*v+1],s>=n&&s<=i&&u>=r&&u<=o&&l.push(t[v]);var m=(f+1)%2;(0===f?n<=s:r<=u)&&(c.push(h),c.push(v-1),c.push(m)),(0===f?i>=s:o>=u)&&(c.push(v+1),c.push(p),c.push(m))}}return l}function o(t,e,n,r,i,o){var s=[0,t.length-1,0],u=[],c=i*i;while(s.length){var l=s.pop(),f=s.pop(),p=s.pop();if(f-p<=o)for(var h=p;h<=f;h++)a(e[2*h],e[2*h+1],n,r)<=c&&u.push(t[h]);else{var d=Math.floor((p+f)/2),v=e[2*d],m=e[2*d+1];a(v,m,n,r)<=c&&u.push(t[d]);var g=(l+1)%2;(0===l?n-i<=v:r-i<=m)&&(s.push(p),s.push(d-1),s.push(g)),(0===l?n+i>=v:r+i>=m)&&(s.push(d+1),s.push(f),s.push(g))}}return u}function a(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}var s=function(t){return t[0]},u=function(t){return t[1]},c=function(e,n,r,i,o){void 0===n&&(n=s),void 0===r&&(r=u),void 0===i&&(i=64),void 0===o&&(o=Float64Array),this.nodeSize=i,this.points=e;for(var a=e.length<65536?Uint16Array:Uint32Array,c=this.ids=new a(e.length),l=this.coords=new o(2*e.length),f=0;f<e.length;f++)c[f]=f,l[2*f]=n(e[f]),l[2*f+1]=r(e[f]);t(c,l,i,0,c.length-1,0)};c.prototype.range=function(t,e,n,r){return i(this.ids,this.coords,t,e,n,r,this.nodeSize)},c.prototype.within=function(t,e,n){return o(this.ids,this.coords,t,e,n,this.nodeSize)};var l={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},f=Math.fround||function(t){return function(e){return t[0]=+e,t[0]}}(new Float32Array(1)),p=function(t){this.options=x(Object.create(l),t),this.trees=new Array(this.options.maxZoom+1)};function h(t,e,n,r,i){return{x:f(t),y:f(e),zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function d(t,e){var n=t.geometry.coordinates,r=n[0],i=n[1];return{x:f(g(r)),y:f(y(i)),zoom:1/0,index:e,parentId:-1}}function v(t){return{type:"Feature",id:t.id,properties:m(t),geometry:{type:"Point",coordinates:[b(t.x),_(t.y)]}}}function m(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return x(x({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function g(t){return t/360+.5}function y(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function b(t){return 360*(t-.5)}function _(t){var e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function x(t,e){for(var n in e)t[n]=e[n];return t}function w(t){return t.x}function E(t){return t.y}return p.prototype.load=function(t){var e=this.options,n=e.log,r=e.minZoom,i=e.maxZoom,o=e.nodeSize;n&&console.time("total time");var a="prepare "+t.length+" points";n&&console.time(a),this.points=t;for(var s=[],u=0;u<t.length;u++)t[u].geometry&&s.push(d(t[u],u));this.trees[i+1]=new c(s,w,E,o,Float32Array),n&&console.timeEnd(a);for(var l=i;l>=r;l--){var f=+Date.now();s=this._cluster(s,l),this.trees[l]=new c(s,w,E,o,Float32Array),n&&console.log("z%d: %d clusters in %dms",l,s.length,+Date.now()-f)}return n&&console.timeEnd("total time"),this},p.prototype.getClusters=function(t,e){var n=((t[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[1])),i=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){var a=this.getClusters([n,r,180,o],e),s=this.getClusters([-180,r,i,o],e);return a.concat(s)}for(var u=this.trees[this._limitZoom(e)],c=u.range(g(n),y(o),g(i),y(r)),l=[],f=0,p=c;f<p.length;f+=1){var h=p[f],d=u.points[h];l.push(d.numPoints?v(d):this.points[d.index])}return l},p.prototype.getChildren=function(t){var e=this._getOriginId(t),n=this._getOriginZoom(t),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.points[e];if(!o)throw new Error(r);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i.within(o.x,o.y,a),u=[],c=0,l=s;c<l.length;c+=1){var f=l[c],p=i.points[f];p.parentId===t&&u.push(p.numPoints?v(p):this.points[p.index])}if(0===u.length)throw new Error(r);return u},p.prototype.getLeaves=function(t,e,n){e=e||10,n=n||0;var r=[];return this._appendLeaves(r,t,e,n,0),r},p.prototype.getTile=function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options,a=o.extent,s=o.radius,u=s/a,c=(n-u)/i,l=(n+1+u)/i,f={features:[]};return this._addTileFeatures(r.range((e-u)/i,c,(e+1+u)/i,l),r.points,e,n,i,f),0===e&&this._addTileFeatures(r.range(1-u/i,c,1,l),r.points,i,n,i,f),e===i-1&&this._addTileFeatures(r.range(0,c,u/i,l),r.points,-1,n,i,f),f.features.length?f:null},p.prototype.getClusterExpansionZoom=function(t){var e=this._getOriginZoom(t)-1;while(e<=this.options.maxZoom){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},p.prototype._appendLeaves=function(t,e,n,r,i){for(var o=this.getChildren(e),a=0,s=o;a<s.length;a+=1){var u=s[a],c=u.properties;if(c&&c.cluster?i+c.point_count<=r?i+=c.point_count:i=this._appendLeaves(t,c.cluster_id,n,r,i):i<r?i++:t.push(u),t.length===n)break}return i},p.prototype._addTileFeatures=function(t,e,n,r,i,o){for(var a=0,s=t;a<s.length;a+=1){var u=s[a],c=e[u],l=c.numPoints,f=void 0,p=void 0,h=void 0;if(l)f=m(c),p=c.x,h=c.y;else{var d=this.points[c.index];f=d.properties,p=g(d.geometry.coordinates[0]),h=y(d.geometry.coordinates[1])}var v={type:1,geometry:[[Math.round(this.options.extent*(p*i-n)),Math.round(this.options.extent*(h*i-r))]],tags:f},b=void 0;l?b=c.id:this.options.generateId?b=c.index:this.points[c.index].id&&(b=this.points[c.index].id),void 0!==b&&(v.id=b),o.features.push(v)}},p.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))},p.prototype._cluster=function(t,e){for(var n=[],r=this.options,i=r.radius,o=r.extent,a=r.reduce,s=r.minPoints,u=i/(o*Math.pow(2,e)),c=0;c<t.length;c++){var l=t[c];if(!(l.zoom<=e)){l.zoom=e;for(var f=this.trees[e+1],p=f.within(l.x,l.y,u),d=l.numPoints||1,v=d,m=0,g=p;m<g.length;m+=1){var y=g[m],b=f.points[y];b.zoom>e&&(v+=b.numPoints||1)}if(v>=s){for(var _=l.x*d,x=l.y*d,w=a&&d>1?this._map(l,!0):null,E=(c<<5)+(e+1)+this.points.length,S=0,C=p;S<C.length;S+=1){var T=C[S],O=f.points[T];if(!(O.zoom<=e)){O.zoom=e;var A=O.numPoints||1;_+=O.x*A,x+=O.y*A,O.parentId=E,a&&(w||(w=this._map(l,!0)),a(w,this._map(O)))}}l.parentId=E,n.push(h(_/v,x/v,E,v,w))}else if(n.push(l),v>1)for(var k=0,M=p;k<M.length;k+=1){var P=M[k],I=f.points[P];I.zoom<=e||(I.zoom=e,n.push(I))}}}return n},p.prototype._getOriginId=function(t){return t-this.points.length>>5},p.prototype._getOriginZoom=function(t){return(t-this.points.length)%32},p.prototype._map=function(t,e){if(t.numPoints)return e?x({},t.properties):t.properties;var n=this.points[t.index].properties,r=this.options.map(n);return e&&r===n?x({},r):r},p}))},Vv4P:function(t,e,n){"use strict";function r(){var t=n("xwgP");return r=function(){return t},t}function i(){var t=o(n("7QR1"));return i=function(){return t},t}function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){return f(t)||l(t,e)||u(t,e)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,e){if(t){if("string"===typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function f(t){if(Array.isArray(t))return t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var p={"zh-CN":"https://www.typescriptlang.org/zh/play","en-US":"https://www.typescriptlang.org/play"},h=function(t,e){var n=function(){var t=/^zh|cn$/.test(arguments.length<=0?void 0:arguments[0])?p["zh-CN"]:p["en-US"];return"".concat(t,"?skipLibCheck=true&jsx=1#code/").concat(i()["default"].compressToEncodedURIComponent(arguments.length<=1?void 0:arguments[1]))},o=(0,r().useState)(n(t,e)),s=a(o,2),u=s[0],c=s[1];return(0,r().useEffect)((function(){c(n(t,e))}),[t,e]),u};e["default"]=h},"W+6v":function(t,e,n){"use strict";var r=n("xwgP"),i=n.n(r),o=function(){var t=0,e={util:{encode:function(t){return t instanceof n?new n(t.type,e.util.encode(t.content),t.alias):"Array"===e.util.type(t)?t.map(e.util.encode):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(t){return Object.prototype.toString.call(t).match(/\[object (\w+)\]/)[1]},objId:function(e){return e["__id"]||Object.defineProperty(e,"__id",{value:++t}),e["__id"]},clone:function(t,n){var r=e.util.type(t);switch(n=n||{},r){case"Object":if(n[e.util.objId(t)])return n[e.util.objId(t)];o={};for(var i in n[e.util.objId(t)]=o,t)t.hasOwnProperty(i)&&(o[i]=e.util.clone(t[i],n));return o;case"Array":if(n[e.util.objId(t)])return n[e.util.objId(t)];var o=[];return n[e.util.objId(t)]=o,t.forEach((function(t,r){o[r]=e.util.clone(t,n)})),o}return t}},languages:{extend:function(t,n){var r=e.util.clone(e.languages[t]);for(var i in n)r[i]=n[i];return r},insertBefore:function(t,n,r,i){i=i||e.languages;var o=i[t];if(2==arguments.length){for(var a in r=arguments[1],r)r.hasOwnProperty(a)&&(o[a]=r[a]);return o}var s={};for(var u in o)if(o.hasOwnProperty(u)){if(u==n)for(var a in r)r.hasOwnProperty(a)&&(s[a]=r[a]);s[u]=o[u]}return e.languages.DFS(e.languages,(function(e,n){n===i[t]&&e!=t&&(this[e]=s)})),i[t]=s},DFS:function(t,n,r,i){for(var o in i=i||{},t)t.hasOwnProperty(o)&&(n.call(t,o,t[o],r||o),"Object"!==e.util.type(t[o])||i[e.util.objId(t[o])]?"Array"!==e.util.type(t[o])||i[e.util.objId(t[o])]||(i[e.util.objId(t[o])]=!0,e.languages.DFS(t[o],n,o,i)):(i[e.util.objId(t[o])]=!0,e.languages.DFS(t[o],n,null,i)))}},plugins:{},highlight:function(t,r,i){var o={code:t,grammar:r,language:i};return e.hooks.run("before-tokenize",o),o.tokens=e.tokenize(o.code,o.grammar),e.hooks.run("after-tokenize",o),n.stringify(e.util.encode(o.tokens),o.language)},matchGrammar:function(t,n,r,i,o,a,s){var u=e.Token;for(var c in r)if(r.hasOwnProperty(c)&&r[c]){if(c==s)return;var l=r[c];l="Array"===e.util.type(l)?l:[l];for(var f=0;f<l.length;++f){var p=l[f],h=p.inside,d=!!p.lookbehind,v=!!p.greedy,m=0,g=p.alias;if(v&&!p.pattern.global){var y=p.pattern.toString().match(/[imuy]*$/)[0];p.pattern=RegExp(p.pattern.source,y+"g")}p=p.pattern||p;for(var b=i,_=o;b<n.length;_+=n[b].length,++b){var x=n[b];if(n.length>t.length)return;if(!(x instanceof u)){if(v&&b!=n.length-1){p.lastIndex=_;var w=p.exec(t);if(!w)break;for(var E=w.index+(d?w[1].length:0),S=w.index+w[0].length,C=b,T=_,O=n.length;C<O&&(T<S||!n[C].type&&!n[C-1].greedy);++C)T+=n[C].length,E>=T&&(++b,_=T);if(n[b]instanceof u)continue;A=C-b,x=t.slice(_,T),w.index-=_}else{p.lastIndex=0;w=p.exec(x);var A=1}if(w){d&&(m=w[1]?w[1].length:0);E=w.index+m,w=w[0].slice(m),S=E+w.length;var k=x.slice(0,E),M=x.slice(S),P=[b,A];k&&(++b,_+=k.length,P.push(k));var I=new u(c,h?e.tokenize(w,h):w,g,w,v);if(P.push(I),M&&P.push(M),Array.prototype.splice.apply(n,P),1!=A&&e.matchGrammar(t,n,r,b,_,!0,c),a)break}else if(a)break}}}}},hooks:{add:function(){},run:function(t,e){}},tokenize:function(t,n,r){var i=[t],o=n.rest;if(o){for(var a in o)n[a]=o[a];delete n.rest}return e.matchGrammar(t,i,n,0,0,!1),i}},n=e.Token=function(t,e,n,r,i){this.type=t,this.content=e,this.alias=n,this.length=0|(r||"").length,this.greedy=!!i};return n.stringify=function(t,r,i){if("string"==typeof t)return t;if("Array"===e.util.type(t))return t.map((function(e){return n.stringify(e,r,t)})).join("");var o={type:t.type,content:n.stringify(t.content,r,i),tag:"span",classes:["token",t.type],attributes:{},language:r,parent:i};if(t.alias){var a="Array"===e.util.type(t.alias)?t.alias:[t.alias];Array.prototype.push.apply(o.classes,a)}var s=Object.keys(o.attributes).map((function(t){return t+'="'+(o.attributes[t]||"").replace(/"/g,"&quot;")+'"'})).join(" ");return"<"+o.tag+' class="'+o.classes.join(" ")+'"'+(s?" "+s:"")+">"+o.content+"</"+o.tag+">"},e}();o.languages.markup={comment:/<!--[\s\S]*?-->/,prolog:/<\?[\s\S]+?\?>/,doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/,name:/[^\s<>'"]+/}},cdata:/<!\[CDATA\[[\s\S]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},o.languages.markup["tag"].inside["attr-value"].inside["entity"]=o.languages.markup["entity"],o.languages.markup["doctype"].inside["internal-subset"].inside=o.languages.markup,o.hooks.add("wrap",(function(t){"entity"===t.type&&(t.attributes["title"]=t.content.replace(/&amp;/,"&"))})),Object.defineProperty(o.languages.markup.tag,"addInlined",{value:function(t,e){var n={};n["language-"+e]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:o.languages[e]},n["cdata"]=/^<!\[CDATA\[|\]\]>$/i;var r={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};r["language-"+e]={pattern:/[\s\S]+/,inside:o.languages[e]};var i={};i[t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,(function(){return t})),"i"),lookbehind:!0,greedy:!0,inside:r},o.languages.insertBefore("markup","cdata",i)}}),o.languages.html=o.languages.markup,o.languages.mathml=o.languages.markup,o.languages.svg=o.languages.markup,o.languages.xml=o.languages.extend("markup",{}),o.languages.ssml=o.languages.xml,o.languages.atom=o.languages.xml,o.languages.rss=o.languages.xml,function(t){var e="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+e),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--?|-=|\+\+?|\+=|!=?|~|\*\*?|\*=|\/=?|%=?|<<=?|>>=?|<=?|>=?|==?|&&?|&=|\^=?|\|\|?|\|=|\?|:/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+e),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|x[0-9a-fA-F]{1,2}|u[0-9a-fA-F]{4}|U[0-9a-fA-F]{8})/};t.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)\w+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b\w+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+e),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+?)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)(["'])(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|(?!\2)[^\\`$])*\2/,lookbehind:!0,greedy:!0,inside:r}],environment:{pattern:RegExp("\\$?"+e),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|aptitude|apt-cache|apt-get|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:if|then|else|elif|fi|for|while|in|case|esac|function|select|do|done|until)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|break|cd|continue|eval|exec|exit|export|getopts|hash|pwd|readonly|return|shift|test|times|trap|umask|unset|alias|bind|builtin|caller|command|declare|echo|enable|help|let|local|logout|mapfile|printf|read|readarray|source|type|typeset|ulimit|unalias|set|shopt)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:true|false)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|==?|!=?|=~|<<[<-]?|[&\d]?>>|\d?[<>]&?|&[>&]?|\|[&|]?|<=?|>=?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=t.languages.bash;for(var i=["comment","function-name","for-or-select","assign-left","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],o=r.variable[1].inside,a=0;a<i.length;a++)o[i[a]]=t.languages.bash[i[a]];t.languages.shell=t.languages.bash}(o),o.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|interface|extends|implements|trait|instanceof|new)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},o.languages.c=o.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:__attribute__|_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/,function:/[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),o.languages.insertBefore("c","string",{macro:{pattern:/(^\s*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},o.languages.c["string"]],comment:o.languages.c["comment"],"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:o.languages.c}}},constant:/\b(?:__FILE__|__LINE__|__DATE__|__TIME__|__TIMESTAMP__|__func__|EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|stdin|stdout|stderr)\b/}),delete o.languages.c["boolean"],function(t){var e=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char8_t|char16_t|char32_t|class|compl|concept|const|consteval|constexpr|constinit|const_cast|continue|co_await|co_return|co_yield|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|int8_t|int16_t|int32_t|int64_t|uint8_t|uint16_t|uint32_t|uint64_t|long|mutable|namespace|new|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/;t.languages.cpp=t.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,(function(){return e.source}))),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:e,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:true|false)\b/}),t.languages.insertBefore("cpp","string",{"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),t.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:t.languages.extend("cpp",{})}}),t.languages.insertBefore("inside","operator",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},t.languages.cpp["base-clause"])}(o),function(t){var e=/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/;t.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:RegExp("[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+e.source+")*(?=\\s*\\{)"),string:{pattern:e,greedy:!0},property:/(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,important:/!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:,]/},t.languages.css["atrule"].inside.rest=t.languages.css;var n=t.languages.markup;n&&(n.tag.addInlined("style","css"),t.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/(^|["'\s])style\s*=\s*(?:"[^"]*"|'[^']*')/i,lookbehind:!0,inside:{"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{style:{pattern:/(["'])[\s\S]+(?=["']$)/,lookbehind:!0,alias:"language-css",inside:t.languages.css},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},"attr-name":/^style/i}}},n.tag))}(o),function(t){var e,n=/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/;t.languages.css.selector={pattern:t.languages.css.selector,inside:e={"pseudo-element":/:(?:after|before|first-letter|first-line|selection)|::[-\w]+/,"pseudo-class":/:[-\w]+/,class:/\.[-\w]+/,id:/#[-\w]+/,attribute:{pattern:RegExp("\\[(?:[^[\\]\"']|"+n.source+")*\\]"),greedy:!0,inside:{punctuation:/^\[|\]$/,"case-sensitivity":{pattern:/(\s)[si]$/i,lookbehind:!0,alias:"keyword"},namespace:{pattern:/^(\s*)(?:(?!\s)[-*\w\xA0-\uFFFF])*\|(?!=)/,lookbehind:!0,inside:{punctuation:/\|$/}},"attr-name":{pattern:/^(\s*)(?:(?!\s)[-\w\xA0-\uFFFF])+/,lookbehind:!0},"attr-value":[n,{pattern:/(=\s*)(?:(?!\s)[-\w\xA0-\uFFFF])+(?=\s*$)/,lookbehind:!0}],operator:/[|~*^$]?=/}},"n-th":[{pattern:/(\(\s*)[+-]?\d*[\dn](?:\s*[+-]\s*\d+)?(?=\s*\))/,lookbehind:!0,inside:{number:/[\dn]+/,operator:/[+-]/}},{pattern:/(\(\s*)(?:even|odd)(?=\s*\))/i,lookbehind:!0}],combinator:/>|\+|~|\|\|/,punctuation:/[(),]/}},t.languages.css["atrule"].inside["selector-function-argument"].inside=e,t.languages.insertBefore("css","property",{variable:{pattern:/(^|[^-\w\xA0-\uFFFF])--(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*/i,lookbehind:!0}});var r={pattern:/(\b\d+)(?:%|[a-z]+\b)/,lookbehind:!0},i={pattern:/(^|[^\w.-])-?(?:\d+(?:\.\d+)?|\.\d+)/,lookbehind:!0};t.languages.insertBefore("css","function",{operator:{pattern:/(\s)[+\-*\/](?=\s)/,lookbehind:!0},hexcode:{pattern:/\B#(?:[\da-f]{1,2}){3,4}\b/i,alias:"color"},color:[/\b(?:AliceBlue|AntiqueWhite|Aqua|Aquamarine|Azure|Beige|Bisque|Black|BlanchedAlmond|Blue|BlueViolet|Brown|BurlyWood|CadetBlue|Chartreuse|Chocolate|Coral|CornflowerBlue|Cornsilk|Crimson|Cyan|DarkBlue|DarkCyan|DarkGoldenRod|DarkGr[ae]y|DarkGreen|DarkKhaki|DarkMagenta|DarkOliveGreen|DarkOrange|DarkOrchid|DarkRed|DarkSalmon|DarkSeaGreen|DarkSlateBlue|DarkSlateGr[ae]y|DarkTurquoise|DarkViolet|DeepPink|DeepSkyBlue|DimGr[ae]y|DodgerBlue|FireBrick|FloralWhite|ForestGreen|Fuchsia|Gainsboro|GhostWhite|Gold|GoldenRod|Gr[ae]y|Green|GreenYellow|HoneyDew|HotPink|IndianRed|Indigo|Ivory|Khaki|Lavender|LavenderBlush|LawnGreen|LemonChiffon|LightBlue|LightCoral|LightCyan|LightGoldenRodYellow|LightGr[ae]y|LightGreen|LightPink|LightSalmon|LightSeaGreen|LightSkyBlue|LightSlateGr[ae]y|LightSteelBlue|LightYellow|Lime|LimeGreen|Linen|Magenta|Maroon|MediumAquaMarine|MediumBlue|MediumOrchid|MediumPurple|MediumSeaGreen|MediumSlateBlue|MediumSpringGreen|MediumTurquoise|MediumVioletRed|MidnightBlue|MintCream|MistyRose|Moccasin|NavajoWhite|Navy|OldLace|Olive|OliveDrab|Orange|OrangeRed|Orchid|PaleGoldenRod|PaleGreen|PaleTurquoise|PaleVioletRed|PapayaWhip|PeachPuff|Peru|Pink|Plum|PowderBlue|Purple|Red|RosyBrown|RoyalBlue|SaddleBrown|Salmon|SandyBrown|SeaGreen|SeaShell|Sienna|Silver|SkyBlue|SlateBlue|SlateGr[ae]y|Snow|SpringGreen|SteelBlue|Tan|Teal|Thistle|Tomato|Transparent|Turquoise|Violet|Wheat|White|WhiteSmoke|Yellow|YellowGreen)\b/i,{pattern:/\b(?:rgb|hsl)\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*\)\B|\b(?:rgb|hsl)a\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*,\s*(?:0|0?\.\d+|1)\s*\)\B/i,inside:{unit:r,number:i,function:/[\w-]+(?=\()/,punctuation:/[(),]/}}],entity:/\\[\da-f]{1,8}/i,unit:r,number:i})}(o),o.languages.javascript=o.languages.extend("clike",{"class-name":[o.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|})\s*)(?:catch|finally)\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|for|from|function|(?:get|set)(?=\s*[\[$\w\xA0-\uFFFF])|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:/\b(?:(?:0[xX](?:[\dA-Fa-f](?:_[\dA-Fa-f])?)+|0[bB](?:[01](?:_[01])?)+|0[oO](?:[0-7](?:_[0-7])?)+)n?|(?:\d(?:_\d)?)+n|NaN|Infinity)\b|(?:\b(?:\d(?:_\d)?)+\.?(?:\d(?:_\d)?)*|\B\.(?:\d(?:_\d)?)+)(?:[Ee][+-]?(?:\d(?:_\d)?)+)?/,operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),o.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/,o.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)\/(?:\[(?:[^\]\\\r\n]|\\.)*]|\\.|[^/\\\[\r\n])+\/[gimyus]{0,6}(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/,lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:o.languages.regex},"regex-flags":/[a-z]+$/,"regex-delimiter":/^\/|\/$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:o.languages.javascript},{pattern:/(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,inside:o.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:o.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:o.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),o.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\[\s\S]|\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})+}|(?!\${)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})+}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\${|}$/,alias:"punctuation"},rest:o.languages.javascript}},string:/[\s\S]+/}}}),o.languages.markup&&o.languages.markup.tag.addInlined("script","javascript"),o.languages.js=o.languages.javascript,function(t){var e=t.util.clone(t.languages.javascript);t.languages.jsx=t.languages.extend("markup",e),t.languages.jsx.tag.pattern=/<\/?(?:[\w.:-]+(?:\s+(?:[\w.:$-]+(?:=(?:"(?:\\[^]|[^\\"])*"|'(?:\\[^]|[^\\'])*'|[^\s{'">=]+|\{(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])+\}))?|\{\s*\.{3}\s*[a-z_$][\w$]*(?:\.[a-z_$][\w$]*)*\s*\}))*\s*\/?)?>/i,t.languages.jsx.tag.inside["tag"].pattern=/^<\/?[^\s>\/]*/i,t.languages.jsx.tag.inside["attr-value"].pattern=/=(?!\{)(?:"(?:\\[^]|[^\\"])*"|'(?:\\[^]|[^\\'])*'|[^\s'">]+)/i,t.languages.jsx.tag.inside["tag"].inside["class-name"]=/^[A-Z]\w*(?:\.[A-Z]\w*)*$/,t.languages.insertBefore("inside","attr-name",{spread:{pattern:/\{\s*\.{3}\s*[a-z_$][\w$]*(?:\.[a-z_$][\w$]*)*\s*\}/,inside:{punctuation:/\.{3}|[{}.]/,"attr-value":/\w+/}}},t.languages.jsx.tag),t.languages.insertBefore("inside","attr-value",{script:{pattern:/=(?:\{(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])+\})/i,inside:{"script-punctuation":{pattern:/^=(?={)/,alias:"punctuation"},rest:t.languages.jsx},alias:"language-javascript"}},t.languages.jsx.tag);var n=function t(e){return e?"string"===typeof e?e:"string"===typeof e.content?e.content:e.content.map(t).join(""):""},r=function e(r){for(var i=[],o=0;o<r.length;o++){var a=r[o],s=!1;if("string"!==typeof a&&("tag"===a.type&&a.content[0]&&"tag"===a.content[0].type?"</"===a.content[0].content[0].content?i.length>0&&i[i.length-1].tagName===n(a.content[0].content[1])&&i.pop():"/>"===a.content[a.content.length-1].content||i.push({tagName:n(a.content[0].content[1]),openedBraces:0}):i.length>0&&"punctuation"===a.type&&"{"===a.content?i[i.length-1].openedBraces++:i.length>0&&i[i.length-1].openedBraces>0&&"punctuation"===a.type&&"}"===a.content?i[i.length-1].openedBraces--:s=!0),(s||"string"===typeof a)&&i.length>0&&0===i[i.length-1].openedBraces){var u=n(a);o<r.length-1&&("string"===typeof r[o+1]||"plain-text"===r[o+1].type)&&(u+=n(r[o+1]),r.splice(o+1,1)),o>0&&("string"===typeof r[o-1]||"plain-text"===r[o-1].type)&&(u=n(r[o-1])+u,r.splice(o-1,1),o--),r[o]=new t.Token("plain-text",u,null,u)}a.content&&"string"!==typeof a.content&&e(a.content)}};t.hooks.add("after-tokenize",(function(t){"jsx"!==t.language&&"tsx"!==t.language||r(t.tokens)}))}(o),function(t){function e(t,e){return RegExp(t.replace(/<ID>/g,(function(){return/(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/.source})),e)}t.languages.insertBefore("javascript","function-variable",{"method-variable":{pattern:RegExp("(\\.\\s*)"+t.languages.javascript["function-variable"].pattern.source),lookbehind:!0,alias:["function-variable","method","function","property-access"]}}),t.languages.insertBefore("javascript","function",{method:{pattern:RegExp("(\\.\\s*)"+t.languages.javascript["function"].source),lookbehind:!0,alias:["function","property-access"]}}),t.languages.insertBefore("javascript","constant",{"known-class-name":[{pattern:/\b(?:(?:(?:Uint|Int)(?:8|16|32)|Uint8Clamped|Float(?:32|64))?Array|ArrayBuffer|BigInt|Boolean|DataView|Date|Error|Function|Intl|JSON|Math|Number|Object|Promise|Proxy|Reflect|RegExp|String|Symbol|(?:Weak)?(?:Set|Map)|WebAssembly)\b/,alias:"class-name"},{pattern:/\b(?:[A-Z]\w*)Error\b/,alias:"class-name"}]}),t.languages.insertBefore("javascript","keyword",{imports:{pattern:e(/(\bimport\b\s*)(?:<ID>(?:\s*,\s*(?:\*\s*as\s+<ID>|\{[^{}]*\}))?|\*\s*as\s+<ID>|\{[^{}]*\})(?=\s*\bfrom\b)/.source),lookbehind:!0,inside:t.languages.javascript},exports:{pattern:e(/(\bexport\b\s*)(?:\*(?:\s*as\s+<ID>)?(?=\s*\bfrom\b)|\{[^{}]*\})/.source),lookbehind:!0,inside:t.languages.javascript}}),t.languages.javascript["keyword"].unshift({pattern:/\b(?:as|default|export|from|import)\b/,alias:"module"},{pattern:/\b(?:await|break|catch|continue|do|else|for|finally|if|return|switch|throw|try|while|yield)\b/,alias:"control-flow"},{pattern:/\bnull\b/,alias:["null","nil"]},{pattern:/\bundefined\b/,alias:"nil"}),t.languages.insertBefore("javascript","operator",{spread:{pattern:/\.{3}/,alias:"operator"},arrow:{pattern:/=>/,alias:"operator"}}),t.languages.insertBefore("javascript","punctuation",{"property-access":{pattern:e(/(\.\s*)#?<ID>/.source),lookbehind:!0},"maybe-class-name":{pattern:/(^|[^$\w\xA0-\uFFFF])[A-Z][$\w\xA0-\uFFFF]+/,lookbehind:!0},dom:{pattern:/\b(?:document|location|navigator|performance|(?:local|session)Storage|window)\b/,alias:"variable"},console:{pattern:/\bconsole(?=\s*\.)/,alias:"class-name"}});for(var n=["function","function-variable","method","method-variable","property-access"],r=0;r<n.length;r++){var i=n[r],o=t.languages.javascript[i];"RegExp"===t.util.type(o)&&(o=t.languages.javascript[i]={pattern:o});var a=o.inside||{};o.inside=a,a["maybe-class-name"]=/^[A-Z][\s\S]*/}}(o),function(t){var e=/#(?!\{).+/,n={pattern:/#\{[^}]+\}/,alias:"variable"};t.languages.coffeescript=t.languages.extend("javascript",{comment:e,string:[{pattern:/'(?:\\[\s\S]|[^\\'])*'/,greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,greedy:!0,inside:{interpolation:n}}],keyword:/\b(?:and|break|by|catch|class|continue|debugger|delete|do|each|else|extend|extends|false|finally|for|if|in|instanceof|is|isnt|let|loop|namespace|new|no|not|null|of|off|on|or|own|return|super|switch|then|this|throw|true|try|typeof|undefined|unless|until|when|while|window|with|yes|yield)\b/,"class-member":{pattern:/@(?!\d)\w+/,alias:"variable"}}),t.languages.insertBefore("coffeescript","comment",{"multiline-comment":{pattern:/###[\s\S]+?###/,alias:"comment"},"block-regex":{pattern:/\/{3}[\s\S]*?\/{3}/,alias:"regex",inside:{comment:e,interpolation:n}}}),t.languages.insertBefore("coffeescript","string",{"inline-javascript":{pattern:/`(?:\\[\s\S]|[^\\`])*`/,inside:{delimiter:{pattern:/^`|`$/,alias:"punctuation"},script:{pattern:/[\s\S]+/,alias:"language-javascript",inside:t.languages.javascript}}},"multiline-string":[{pattern:/'''[\s\S]*?'''/,greedy:!0,alias:"string"},{pattern:/"""[\s\S]*?"""/,greedy:!0,alias:"string",inside:{interpolation:n}}]}),t.languages.insertBefore("coffeescript","keyword",{property:/(?!\d)\w+(?=\s*:(?!:))/}),delete t.languages.coffeescript["template-string"],t.languages.coffee=t.languages.coffeescript}(o),function(t){t.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var e={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(e).forEach((function(n){var r=e[n],i=[];/^\w+$/.test(n)||i.push(/\w+/.exec(n)[0]),"diff"===n&&i.push("bold"),t.languages.diff[n]={pattern:RegExp("^(?:["+r+"].*(?:\r\n?|\n|(?![\\s\\S])))+","m"),alias:i,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}})),Object.defineProperty(t.languages.diff,"PREFIXES",{value:e})}(o),o.languages.git={comment:/^#.*/m,deleted:/^[-\u2013].*/m,inserted:/^\+.*/m,string:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/m,command:{pattern:/^.*\$ git .*$/m,inside:{parameter:/\s--?\w+/m}},coord:/^@@.*@@$/m,"commit-sha1":/^commit \w{40}$/m},o.languages.go=o.languages.extend("clike",{string:{pattern:/(["'`])(?:\\[\s\S]|(?!\1)[^\\])*\1/,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|iota|nil|true|false)\b/,number:/(?:\b0x[a-f\d]+|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[-+]?\d+)?)i?/i,operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:bool|byte|complex(?:64|128)|error|float(?:32|64)|rune|string|u?int(?:8|16|32|64)?|uintptr|append|cap|close|complex|copy|delete|imag|len|make|new|panic|print(?:ln)?|real|recover)\b/}),delete o.languages.go["class-name"],o.languages.graphql={comment:/#.*/,description:{pattern:/(?:"""(?:[^"]|(?!""")")*"""|"(?:\\.|[^\\"\r\n])*")(?=\s*[a-z_])/i,greedy:!0,alias:"string",inside:{"language-markdown":{pattern:/(^"(?:"")?)(?!\1)[\s\S]+(?=\1$)/,lookbehind:!0,inside:o.languages.markdown}}},string:{pattern:/"""(?:[^"]|(?!""")")*"""|"(?:\\.|[^\\"\r\n])*"/,greedy:!0},number:/(?:\B-|\b)\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,boolean:/\b(?:true|false)\b/,variable:/\$[a-z_]\w*/i,directive:{pattern:/@[a-z_]\w*/i,alias:"function"},"attr-name":{pattern:/[a-z_]\w*(?=\s*(?:\((?:[^()"]|"(?:\\.|[^\\"\r\n])*")*\))?:)/i,greedy:!0},"class-name":{pattern:/(\b(?:enum|implements|interface|on|scalar|type|union)\s+|&\s*)[a-zA-Z_]\w*/,lookbehind:!0},fragment:{pattern:/(\bfragment\s+|\.{3}\s*(?!on\b))[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},keyword:/\b(?:directive|enum|extend|fragment|implements|input|interface|mutation|on|query|repeatable|scalar|schema|subscription|type|union)\b/,operator:/[!=|&]|\.{3}/,punctuation:/[!(){}\[\]:=,]/,constant:/\b(?!ID\b)[A-Z][A-Z_\d]*\b/},function(t){function e(t,e){return"___"+t.toUpperCase()+e+"___"}Object.defineProperties(t.languages["markup-templating"]={},{buildPlaceholders:{value:function(n,r,i,o){if(n.language===r){var a=n.tokenStack=[];n.code=n.code.replace(i,(function(t){if("function"===typeof o&&!o(t))return t;var i,s=a.length;while(-1!==n.code.indexOf(i=e(r,s)))++s;return a[s]=t,i})),n.grammar=t.languages.markup}}},tokenizePlaceholders:{value:function(n,r){if(n.language===r&&n.tokenStack){n.grammar=t.languages[r];var i=0,o=Object.keys(n.tokenStack);a(n.tokens)}function a(s){for(var u=0;u<s.length;u++){if(i>=o.length)break;var c=s[u];if("string"===typeof c||c.content&&"string"===typeof c.content){var l=o[i],f=n.tokenStack[l],p="string"===typeof c?c:c.content,h=e(r,l),d=p.indexOf(h);if(d>-1){++i;var v=p.substring(0,d),m=new t.Token(r,t.tokenize(f,n.grammar),"language-"+r,f),g=p.substring(d+h.length),y=[];v&&y.push.apply(y,a([v])),y.push(m),g&&y.push.apply(y,a([g])),"string"===typeof c?s.splice.apply(s,[u,1].concat(y)):c.content=y}}else c.content&&a(c.content)}return s}}}})}(o),function(t){t.languages.handlebars={comment:/\{\{![\s\S]*?\}\}/,delimiter:{pattern:/^\{\{\{?|\}\}\}?$/i,alias:"punctuation"},string:/(["'])(?:\\.|(?!\1)[^\\\r\n])*\1/,number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee][+-]?\d+)?/,boolean:/\b(?:true|false)\b/,block:{pattern:/^(\s*(?:~\s*)?)[#\/]\S+?(?=\s*(?:~\s*)?$|\s)/i,lookbehind:!0,alias:"keyword"},brackets:{pattern:/\[[^\]]+\]/,inside:{punctuation:/\[|\]/,variable:/[\s\S]+/}},punctuation:/[!"#%&':()*+,.\/;<=>@\[\\\]^`{|}~]/,variable:/[^!"#%&'()*+,\/;<=>@\[\\\]^`{|}~\s]+/},t.hooks.add("before-tokenize",(function(e){var n=/\{\{\{[\s\S]+?\}\}\}|\{\{[\s\S]+?\}\}/g;t.languages["markup-templating"].buildPlaceholders(e,"handlebars",n)})),t.hooks.add("after-tokenize",(function(e){t.languages["markup-templating"].tokenizePlaceholders(e,"handlebars")}))}(o),o.languages.json={property:{pattern:/"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,greedy:!0},string:{pattern:/"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:true|false)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}},o.languages.webmanifest=o.languages.json,o.languages.less=o.languages.extend("css",{comment:[/\/\*[\s\S]*?\*\//,{pattern:/(^|[^\\])\/\/.*/,lookbehind:!0}],atrule:{pattern:/@[\w-](?:\((?:[^(){}]|\([^(){}]*\))*\)|[^(){};\s]|\s+(?!\s))*?(?=\s*\{)/,inside:{punctuation:/[:()]/}},selector:{pattern:/(?:@\{[\w-]+\}|[^{};\s@])(?:@\{[\w-]+\}|\((?:[^(){}]|\([^(){}]*\))*\)|[^(){};@\s]|\s+(?!\s))*?(?=\s*\{)/,inside:{variable:/@+[\w-]+/}},property:/(?:@\{[\w-]+\}|[\w-])+(?:\+_?)?(?=\s*:)/i,operator:/[+\-*\/]/}),o.languages.insertBefore("less","property",{variable:[{pattern:/@[\w-]+\s*:/,inside:{punctuation:/:/}},/@@?[\w-]+/],"mixin-usage":{pattern:/([{;]\s*)[.#](?!\d)[\w-].*?(?=[(;])/,lookbehind:!0,alias:"function"}}),o.languages.makefile={comment:{pattern:/(^|[^\\])#(?:\\(?:\r\n|[\s\S])|[^\\\r\n])*/,lookbehind:!0},string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},builtin:/\.[A-Z][^:#=\s]+(?=\s*:(?!=))/,symbol:{pattern:/^(?:[^:=\s]|[ \t]+(?![\s:]))+(?=\s*:(?!=))/m,inside:{variable:/\$+(?:(?!\$)[^(){}:#=\s]+|(?=[({]))/}},variable:/\$+(?:(?!\$)[^(){}:#=\s]+|\([@*%<^+?][DF]\)|(?=[({]))/,keyword:[/-include\b|\b(?:define|else|endef|endif|export|ifn?def|ifn?eq|include|override|private|sinclude|undefine|unexport|vpath)\b/,{pattern:/(\()(?:addsuffix|abspath|and|basename|call|dir|error|eval|file|filter(?:-out)?|findstring|firstword|flavor|foreach|guile|if|info|join|lastword|load|notdir|or|origin|patsubst|realpath|shell|sort|strip|subst|suffix|value|warning|wildcard|word(?:s|list)?)(?=[ \t])/,lookbehind:!0}],operator:/(?:::|[?:+!])?=|[|@]/,punctuation:/[:;(){}]/},function(t){var e=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?!\n|\r\n?))/.source;function n(t){return t=t.replace(/<inner>/g,(function(){return e})),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+t+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,i=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,(function(){return r})),o=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;t.languages.markdown=t.languages.extend("markup",{}),t.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"font-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:t.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+i+o+"(?:"+i+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+i+o+")(?:"+i+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:t.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+i+")"+o+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+i+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:t.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/``.+?``|`[^`\r\n]+`/,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+?\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach((function(e){["url","bold","italic","strike"].forEach((function(n){e!==n&&(t.languages.markdown[e].inside.content.inside[n]=t.languages.markdown[n])}))})),t.hooks.add("after-tokenize",(function(t){function e(t){if(t&&"string"!==typeof t)for(var n=0,r=t.length;n<r;n++){var i=t[n];if("code"===i.type){var o=i.content[1],a=i.content[3];if(o&&a&&"code-language"===o.type&&"code-block"===a.type&&"string"===typeof o.content){var s=o.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");s=(/[a-z][\w-]*/i.exec(s)||[""])[0].toLowerCase();var u="language-"+s;a.alias?"string"===typeof a.alias?a.alias=[a.alias,u]:a.alias.push(u):a.alias=[u]}}else e(i.content)}}"markdown"!==t.language&&"md"!==t.language||e(t.tokens)})),t.hooks.add("wrap",(function(e){if("code-block"===e.type){for(var n="",r=0,i=e.classes.length;r<i;r++){var o=e.classes[r],a=/language-(.+)/.exec(o);if(a){n=a[1];break}}var s=t.languages[n];if(s){var u=e.content.replace(/&lt;/g,"<").replace(/&amp;/g,"&");e.content=t.highlight(u,s,n)}else if(n&&"none"!==n&&t.plugins.autoloader){var c="md-"+(new Date).valueOf()+"-"+Math.floor(1e16*Math.random());e.attributes["id"]=c,t.plugins.autoloader.loadLanguages(n,(function(){var e=document.getElementById(c);e&&(e.innerHTML=t.highlight(e.textContent,t.languages[n],n))}))}}})),t.languages.md=t.languages.markdown}(o),o.languages.objectivec=o.languages.extend("c",{string:/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1|@"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,keyword:/\b(?:asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while|in|self|super)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/}),delete o.languages.objectivec["class-name"],o.languages.objc=o.languages.objectivec,o.languages.ocaml={comment:/\(\*[\s\S]*?\*\)/,string:[{pattern:/"(?:\\.|[^\\\r\n"])*"/,greedy:!0},{pattern:/(['`])(?:\\(?:\d+|x[\da-f]+|.)|(?!\1)[^\\\r\n])\1/i,greedy:!0}],number:/\b(?:0x[\da-f][\da-f_]+|(?:0[bo])?\d[\d_]*(?:\.[\d_]*)?(?:e[+-]?[\d_]+)?)/i,directive:{pattern:/\B#\w+/,alias:"important"},label:{pattern:/\B~\w+/,alias:"function"},"type-variable":{pattern:/\B'\w+/,alias:"function"},variant:{pattern:/`\w+/,alias:"variable"},module:{pattern:/\b[A-Z]\w+/,alias:"variable"},keyword:/\b(?:as|assert|begin|class|constraint|do|done|downto|else|end|exception|external|for|fun|function|functor|if|in|include|inherit|initializer|lazy|let|match|method|module|mutable|new|nonrec|object|of|open|private|rec|sig|struct|then|to|try|type|val|value|virtual|when|where|while|with)\b/,boolean:/\b(?:false|true)\b/,operator:/:=|[=<>@^|&+\-*\/$%!?~][!$%&*+\-.\/:<=>?@^|~]*|\b(?:and|asr|land|lor|lsl|lsr|lxor|mod|or)\b/,punctuation:/[(){}\[\]|.,:;]|\b_\b/},o.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0},"string-interpolation":{pattern:/(?:f|rf|fr)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:{{)*){(?!{)(?:[^{}]|{(?!{)(?:[^{}]|{(?!{)(?:[^{}])+})+})+}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|rb|br)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|rb|br)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^\s*)@\w+(?:\.\w+)*/im,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:and|as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:True|False|None)\b/,number:/(?:\b(?=\d)|\B(?=\.))(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?j?\b/i,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},o.languages.python["string-interpolation"].inside["interpolation"].inside.rest=o.languages.python,o.languages.py=o.languages.python,o.languages.reason=o.languages.extend("clike",{string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^\\\r\n"])*"/,greedy:!0},"class-name":/\b[A-Z]\w*/,keyword:/\b(?:and|as|assert|begin|class|constraint|do|done|downto|else|end|exception|external|for|fun|function|functor|if|in|include|inherit|initializer|lazy|let|method|module|mutable|new|nonrec|object|of|open|or|private|rec|sig|struct|switch|then|to|try|type|val|virtual|when|while|with)\b/,operator:/\.{3}|:[:=]|\|>|->|=(?:==?|>)?|<=?|>=?|[|^?'#!~`]|[+\-*\/]\.?|\b(?:mod|land|lor|lxor|lsl|lsr|asr)\b/}),o.languages.insertBefore("reason","class-name",{character:{pattern:/'(?:\\x[\da-f]{2}|\\o[0-3][0-7][0-7]|\\\d{3}|\\.|[^'\\\r\n])'/,alias:"string"},constructor:{pattern:/\b[A-Z]\w*\b(?!\s*\.)/,alias:"variable"},label:{pattern:/\b[a-z]\w*(?=::)/,alias:"symbol"}}),delete o.languages.reason["function"],function(t){t.languages.sass=t.languages.extend("css",{comment:{pattern:/^([ \t]*)\/[\/*].*(?:(?:\r?\n|\r)\1[ \t].+)*/m,lookbehind:!0}}),t.languages.insertBefore("sass","atrule",{"atrule-line":{pattern:/^(?:[ \t]*)[@+=].+/m,inside:{atrule:/(?:@[\w-]+|[+=])/m}}}),delete t.languages.sass.atrule;var e=/\$[-\w]+|#\{\$[-\w]+\}/,n=[/[+*\/%]|[=!]=|<=?|>=?|\b(?:and|or|not)\b/,{pattern:/(\s+)-(?=\s)/,lookbehind:!0}];t.languages.insertBefore("sass","property",{"variable-line":{pattern:/^[ \t]*\$.+/m,inside:{punctuation:/:/,variable:e,operator:n}},"property-line":{pattern:/^[ \t]*(?:[^:\s]+ *:.*|:[^:\s].*)/m,inside:{property:[/[^:\s]+(?=\s*:)/,{pattern:/(:)[^:\s]+/,lookbehind:!0}],punctuation:/:/,variable:e,operator:n,important:t.languages.sass.important}}}),delete t.languages.sass.property,delete t.languages.sass.important,t.languages.insertBefore("sass","punctuation",{selector:{pattern:/([ \t]*)\S(?:,[^,\r\n]+|[^,\r\n]*)(?:,[^,\r\n]+)*(?:,(?:\r?\n|\r)\1[ \t]+\S(?:,[^,\r\n]+|[^,\r\n]*)(?:,[^,\r\n]+)*)*/,lookbehind:!0}})}(o),o.languages.scss=o.languages.extend("css",{comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0},atrule:{pattern:/@[\w-](?:\([^()]+\)|[^()\s]|\s+(?!\s))*?(?=\s+[{;])/,inside:{rule:/@[\w-]+/}},url:/(?:[-a-z]+-)?url(?=\()/i,selector:{pattern:/(?=\S)[^@;{}()]?(?:[^@;{}()\s]|\s+(?!\s)|#\{\$[-\w]+\})+(?=\s*\{(?:\}|\s|[^}][^:{}]*[:{][^}]+))/m,inside:{parent:{pattern:/&/,alias:"important"},placeholder:/%[-\w]+/,variable:/\$[-\w]+|#\{\$[-\w]+\}/}},property:{pattern:/(?:[-\w]|\$[-\w]|#\{\$[-\w]+\})+(?=\s*:)/,inside:{variable:/\$[-\w]+|#\{\$[-\w]+\}/}}}),o.languages.insertBefore("scss","atrule",{keyword:[/@(?:if|else(?: if)?|forward|for|each|while|import|use|extend|debug|warn|mixin|include|function|return|content)\b/i,{pattern:/( +)(?:from|through)(?= )/,lookbehind:!0}]}),o.languages.insertBefore("scss","important",{variable:/\$[-\w]+|#\{\$[-\w]+\}/}),o.languages.insertBefore("scss","function",{"module-modifier":{pattern:/\b(?:as|with|show|hide)\b/i,alias:"keyword"},placeholder:{pattern:/%[-\w]+/,alias:"selector"},statement:{pattern:/\B!(?:default|optional)\b/i,alias:"keyword"},boolean:/\b(?:true|false)\b/,null:{pattern:/\bnull\b/,alias:"keyword"},operator:{pattern:/(\s)(?:[-+*\/%]|[=!]=|<=?|>=?|and|or|not)(?=\s)/,lookbehind:!0}}),o.languages.scss["atrule"].inside.rest=o.languages.scss,o.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:_INSERT|COL)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:S|ING)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:TRUE|FALSE|NULL)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|IN|LIKE|NOT|OR|IS|DIV|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/},function(t){var e={pattern:/(\b\d+)(?:%|[a-z]+)/,lookbehind:!0},n={pattern:/(^|[^\w.-])-?(?:\d+(?:\.\d+)?|\.\d+)/,lookbehind:!0},r={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0},url:{pattern:/url\((["']?).*?\1\)/i,greedy:!0},string:{pattern:/("|')(?:(?!\1)[^\\\r\n]|\\(?:\r\n|[\s\S]))*\1/,greedy:!0},interpolation:null,func:null,important:/\B!(?:important|optional)\b/i,keyword:{pattern:/(^|\s+)(?:(?:if|else|for|return|unless)(?=\s+|$)|@[\w-]+)/,lookbehind:!0},hexcode:/#[\da-f]{3,6}/i,color:[/\b(?:AliceBlue|AntiqueWhite|Aqua|Aquamarine|Azure|Beige|Bisque|Black|BlanchedAlmond|Blue|BlueViolet|Brown|BurlyWood|CadetBlue|Chartreuse|Chocolate|Coral|CornflowerBlue|Cornsilk|Crimson|Cyan|DarkBlue|DarkCyan|DarkGoldenRod|DarkGr[ae]y|DarkGreen|DarkKhaki|DarkMagenta|DarkOliveGreen|DarkOrange|DarkOrchid|DarkRed|DarkSalmon|DarkSeaGreen|DarkSlateBlue|DarkSlateGr[ae]y|DarkTurquoise|DarkViolet|DeepPink|DeepSkyBlue|DimGr[ae]y|DodgerBlue|FireBrick|FloralWhite|ForestGreen|Fuchsia|Gainsboro|GhostWhite|Gold|GoldenRod|Gr[ae]y|Green|GreenYellow|HoneyDew|HotPink|IndianRed|Indigo|Ivory|Khaki|Lavender|LavenderBlush|LawnGreen|LemonChiffon|LightBlue|LightCoral|LightCyan|LightGoldenRodYellow|LightGr[ae]y|LightGreen|LightPink|LightSalmon|LightSeaGreen|LightSkyBlue|LightSlateGr[ae]y|LightSteelBlue|LightYellow|Lime|LimeGreen|Linen|Magenta|Maroon|MediumAquaMarine|MediumBlue|MediumOrchid|MediumPurple|MediumSeaGreen|MediumSlateBlue|MediumSpringGreen|MediumTurquoise|MediumVioletRed|MidnightBlue|MintCream|MistyRose|Moccasin|NavajoWhite|Navy|OldLace|Olive|OliveDrab|Orange|OrangeRed|Orchid|PaleGoldenRod|PaleGreen|PaleTurquoise|PaleVioletRed|PapayaWhip|PeachPuff|Peru|Pink|Plum|PowderBlue|Purple|Red|RosyBrown|RoyalBlue|SaddleBrown|Salmon|SandyBrown|SeaGreen|SeaShell|Sienna|Silver|SkyBlue|SlateBlue|SlateGr[ae]y|Snow|SpringGreen|SteelBlue|Tan|Teal|Thistle|Tomato|Transparent|Turquoise|Violet|Wheat|White|WhiteSmoke|Yellow|YellowGreen)\b/i,{pattern:/\b(?:rgb|hsl)\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*\)\B|\b(?:rgb|hsl)a\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*,\s*(?:0|0?\.\d+|1)\s*\)\B/i,inside:{unit:e,number:n,function:/[\w-]+(?=\()/,punctuation:/[(),]/}}],entity:/\\[\da-f]{1,8}/i,unit:e,boolean:/\b(?:true|false)\b/,operator:[/~|[+!\/%<>?=]=?|[-:]=|\*[*=]?|\.{2,3}|&&|\|\||\B-\B|\b(?:and|in|is(?: a| defined| not|nt)?|not|or)\b/],number:n,punctuation:/[{}()\[\];:,]/};r["interpolation"]={pattern:/\{[^\r\n}:]+\}/,alias:"variable",inside:{delimiter:{pattern:/^{|}$/,alias:"punctuation"},rest:r}},r["func"]={pattern:/[\w-]+\([^)]*\).*/,inside:{function:/^[^(]+/,rest:r}},t.languages.stylus={"atrule-declaration":{pattern:/(^\s*)@.+/m,lookbehind:!0,inside:{atrule:/^@[\w-]+/,rest:r}},"variable-declaration":{pattern:/(^[ \t]*)[\w$-]+\s*.?=[ \t]*(?:\{[^{}]*\}|\S.*|$)/m,lookbehind:!0,inside:{variable:/^\S+/,rest:r}},statement:{pattern:/(^[ \t]*)(?:if|else|for|return|unless)[ \t].+/m,lookbehind:!0,inside:{keyword:/^\S+/,rest:r}},"property-declaration":{pattern:/((?:^|\{)([ \t]*))(?:[\w-]|\{[^}\r\n]+\})+(?:\s*:\s*|[ \t]+)(?!\s)[^{\r\n]*(?:;|[^{\r\n,](?=$)(?!(?:\r?\n|\r)(?:\{|\2[ \t]+)))/m,lookbehind:!0,inside:{property:{pattern:/^[^\s:]+/,inside:{interpolation:r.interpolation}},rest:r}},selector:{pattern:/(^[ \t]*)(?:(?=\S)(?:[^{}\r\n:()]|::?[\w-]+(?:\([^)\r\n]*\)|(?![\w-]))|\{[^}\r\n]+\})+)(?:(?:\r?\n|\r)(?:\1(?:(?=\S)(?:[^{}\r\n:()]|::?[\w-]+(?:\([^)\r\n]*\)|(?![\w-]))|\{[^}\r\n]+\})+)))*(?:,$|\{|(?=(?:\r?\n|\r)(?:\{|\1[ \t]+)))/m,lookbehind:!0,inside:{interpolation:r.interpolation,comment:r.comment,punctuation:/[{},]/}},func:r.func,string:r.string,comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0,greedy:!0},interpolation:r.interpolation,punctuation:/[{}()\[\];:.]/}}(o),function(t){t.languages.typescript=t.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},keyword:/\b(?:abstract|as|asserts|async|await|break|case|catch|class|const|constructor|continue|debugger|declare|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|is|keyof|let|module|namespace|new|null|of|package|private|protected|public|readonly|return|require|set|static|super|switch|this|throw|try|type|typeof|undefined|var|void|while|with|yield)\b/,builtin:/\b(?:string|Function|any|number|boolean|Array|symbol|console|Promise|unknown|never)\b/}),delete t.languages.typescript["parameter"];var e=t.languages.extend("typescript",{});delete e["class-name"],t.languages.typescript["class-name"].inside=e,t.languages.insertBefore("typescript","function",{"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e}}}}),t.languages.ts=t.languages.typescript}(o),function(t){var e=t.util.clone(t.languages.typescript);t.languages.tsx=t.languages.extend("jsx",e);var n=t.languages.tsx.tag;n.pattern=RegExp(/(^|[^\w$]|(?=<\/))/.source+"(?:"+n.pattern.source+")",n.pattern.flags),n.lookbehind=!0}(o),o.languages.wasm={comment:[/\(;[\s\S]*?;\)/,{pattern:/;;.*/,greedy:!0}],string:{pattern:/"(?:\\[\s\S]|[^"\\])*"/,greedy:!0},keyword:[{pattern:/\b(?:align|offset)=/,inside:{operator:/=/}},{pattern:/\b(?:(?:f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))?|memory\.(?:grow|size))\b/,inside:{punctuation:/\./}},/\b(?:anyfunc|block|br(?:_if|_table)?|call(?:_indirect)?|data|drop|elem|else|end|export|func|get_(?:global|local)|global|if|import|local|loop|memory|module|mut|nop|offset|param|result|return|select|set_(?:global|local)|start|table|tee_local|then|type|unreachable)\b/],variable:/\$[\w!#$%&'*+\-./:<=>?@\\^_`|~]+/i,number:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/,punctuation:/[()]/},function(t){var e=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ \t]+"+e.source+")?|"+e.source+"(?:[ \t]+"+n.source+")?)",i=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,(function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source})),o=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function a(t,e){e=(e||"").replace(/m/g,"")+"m";var n=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|]|}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,(function(){return r})).replace(/<<value>>/g,(function(){return t}));return RegExp(n,e)}t.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,(function(){return r}))),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,(function(){return r})).replace(/<<key>>/g,(function(){return"(?:"+i+"|"+o+")"}))),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:a(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:a(/true|false/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:a(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:a(o),lookbehind:!0,greedy:!0},number:{pattern:a(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.?\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:e,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},t.languages.yml=t.languages.yaml}(o);var a=o,s={plain:{backgroundColor:"#2a2734",color:"#9a86fd"},styles:[{types:["comment","prolog","doctype","cdata","punctuation"],style:{color:"#6c6783"}},{types:["namespace"],style:{opacity:.7}},{types:["tag","operator","number"],style:{color:"#e09142"}},{types:["property","function"],style:{color:"#9a86fd"}},{types:["tag-id","selector","atrule-id"],style:{color:"#eeebff"}},{types:["attr-name"],style:{color:"#c4b9fe"}},{types:["boolean","string","entity","url","attr-value","keyword","control","directive","unit","statement","regex","at-rule","placeholder","variable"],style:{color:"#ffcc99"}},{types:["deleted"],style:{textDecorationLine:"line-through"}},{types:["inserted"],style:{textDecorationLine:"underline"}},{types:["italic"],style:{fontStyle:"italic"}},{types:["important","bold"],style:{fontWeight:"bold"}},{types:["important"],style:{color:"#c4b9fe"}}]},u=s,c={Prism:a,theme:u};function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(){return f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f.apply(this,arguments)}var p=/\r\n|\r|\n/,h=function(t){0===t.length?t.push({types:["plain"],content:"\n",empty:!0}):1===t.length&&""===t[0].content&&(t[0].content="\n",t[0].empty=!0)},d=function(t,e){var n=t.length;return n>0&&t[n-1]===e?t:t.concat(e)},v=function(t){var e=[[]],n=[t],r=[0],i=[t.length],o=0,a=0,s=[],u=[s];while(a>-1){while((o=r[a]++)<i[a]){var c=void 0,l=e[a],f=n[a],v=f[o];if("string"===typeof v?(l=a>0?l:["plain"],c=v):(l=d(l,v.type),v.alias&&(l=d(l,v.alias)),c=v.content),"string"===typeof c){var m=c.split(p),g=m.length;s.push({types:l,content:m[0]});for(var y=1;y<g;y++)h(s),u.push(s=[]),s.push({types:l,content:m[y]})}else a++,e.push(l),n.push(c),r.push(0),i.push(c.length)}a--,e.pop(),n.pop(),r.pop(),i.pop()}return h(s),u},m=function(t,e){var n=t.plain,r=Object.create(null),i=t.styles.reduce((function(t,n){var r=n.languages,i=n.style;return r&&!r.includes(e)||n.types.forEach((function(e){var n=f({},t[e],i);t[e]=n})),t}),r);return i.root=n,i.plain=f({},n,{backgroundColor:null}),i};function g(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===e.indexOf(r)&&(n[r]=t[r]);return n}var y=function(t){function e(){var e=this,n=[],r=arguments.length;while(r--)n[r]=arguments[r];t.apply(this,n),l(this,"getThemeDict",(function(t){if(void 0!==e.themeDict&&t.theme===e.prevTheme&&t.language===e.prevLanguage)return e.themeDict;e.prevTheme=t.theme,e.prevLanguage=t.language;var n=t.theme?m(t.theme,t.language):void 0;return e.themeDict=n})),l(this,"getLineProps",(function(t){var n=t.key,r=t.className,i=t.style,o=g(t,["key","className","style","line"]),a=o,s=f({},a,{className:"token-line",style:void 0,key:void 0}),u=e.getThemeDict(e.props);return void 0!==u&&(s.style=u.plain),void 0!==i&&(s.style=void 0!==s.style?f({},s.style,i):i),void 0!==n&&(s.key=n),r&&(s.className+=" "+r),s})),l(this,"getStyleForToken",(function(t){var n=t.types,r=t.empty,i=n.length,o=e.getThemeDict(e.props);if(void 0!==o){if(1===i&&"plain"===n[0])return r?{display:"inline-block"}:void 0;if(1===i&&!r)return o[n[0]];var a=r?{display:"inline-block"}:{},s=n.map((function(t){return o[t]}));return Object.assign.apply(Object,[a].concat(s))}})),l(this,"getTokenProps",(function(t){var n=t.key,r=t.className,i=t.style,o=t.token,a=g(t,["key","className","style","token"]),s=a,u=f({},s,{className:"token "+o.types.join(" "),children:o.content,style:e.getStyleForToken(o),key:void 0});return void 0!==i&&(u.style=void 0!==u.style?f({},u.style,i):i),void 0!==n&&(u.key=n),r&&(u.className+=" "+r),u})),l(this,"tokenize",(function(t,e,n,r){var i={code:e,grammar:n,language:r,tokens:[]};t.hooks.run("before-tokenize",i);var o=i.tokens=t.tokenize(i.code,i.grammar,i.language);return t.hooks.run("after-tokenize",i),o}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t=this.props,e=t.Prism,n=t.language,r=t.code,i=t.children,o=this.getThemeDict(this.props),a=e.languages[n],s=void 0!==a?this.tokenize(e,r,a,n):[r],u=v(s);return i({tokens:u,className:"prism-code language-"+n,style:void 0!==o?o.root:{},getLineProps:this.getLineProps,getTokenProps:this.getTokenProps})},e}(r["Component"]),b=y,_=n("OS9G");n("yvuI"),n("3fyM");function x(){return x=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x.apply(this,arguments)}function w(t,e){return O(t)||T(t,e)||S(t,e)||E()}function E(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(t,e){if(t){if("string"===typeof t)return C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(t,e):void 0}}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function T(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function O(t){if(Array.isArray(t))return t}e["a"]=function(t){var e=t.code,n=t.lang,r=t.showCopy,o=void 0===r||r,a=Object(_["useCopy"])(),s=w(a,2),u=s[0],l=s[1];return i.a.createElement("div",{className:"__dumi-default-code-block"},i.a.createElement(b,x({},c,{code:e,language:n,theme:void 0}),(function(t){var n=t.className,r=t.style,a=t.tokens,s=t.getLineProps,c=t.getTokenProps;return i.a.createElement("pre",{className:n,style:r},o&&i.a.createElement("button",{className:"__dumi-default-icon __dumi-default-code-block-copy-btn","data-status":l,onClick:function(){return u(e)}}),a.map((function(t,e){return i.a.createElement("div",s({line:t,key:e}),t.map((function(t,e){return i.a.createElement("span",c({token:t,key:e}))})))})))})))}},"W6v+":function(t,e,n){var r=n("bVFb");r("isConcatSpreadable")},WCPf:function(t,e,n){"use strict";var r=n("dZOt"),i=n("xwgP");e.useSubscription=function(t){var e=t.getCurrentValue,n=t.subscribe,o=i.useState((function(){return{getCurrentValue:e,subscribe:n,value:e()}}));t=o[0];var a=o[1];return o=t.value,t.getCurrentValue===e&&t.subscribe===n||(o=e(),a({getCurrentValue:e,subscribe:n,value:o})),i.useDebugValue(o),i.useEffect((function(){function t(){if(!i){var t=e();a((function(i){return i.getCurrentValue!==e||i.subscribe!==n||i.value===t?i:r({},i,{value:t})}))}}var i=!1,o=n(t);return t(),function(){i=!0,o()}}),[e,n]),o}},WNir:function(t,e,n){var r=n("DDwO"),i=n("NVMI"),o=n("aS93"),a=n("2I03"),s=function(t){return function(e,n,s,u){r(n);var c=i(e),l=o(c),f=a(c.length),p=t?f-1:0,h=t?-1:1;if(s<2)while(1){if(p in l){u=l[p],p+=h;break}if(p+=h,t?p<0:f<=p)throw TypeError("Reduce of empty array with no initial value")}for(;t?p>=0:f>p;p+=h)p in l&&(u=n(u,l[p],p,c));return u}};t.exports={left:s(!1),right:s(!0)}},WdrS:function(t,e,n){var r=n("IRht"),i=n("UTnC");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var o=n.call(t,e);if("object"!==typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},WeNx:function(t,e){function n(t){return t}t.exports=n},WemT:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.optional=void 0;var r=n("9L8m"),i=n("rMkn"),o=n("ZLnY");function a(){return function(t,e,n){var a=new i.Metadata(r.OPTIONAL_TAG,!0);"number"===typeof n?o.tagParameter(t,e,n,a):o.tagProperty(t,e,a)}}e.optional=a},Wp5u:function(t,e,n){"use strict";var r,i=n("13/t"),o=n("Hiyu"),a=n("2JD6"),s=n("pxmn"),u=n("+qhb"),c=n("KpHK"),l=n("D8FR"),f=n("GUTS"),p=n("2RC6").f,h=n("kI7s"),d=n("UPu9"),v=n("kPvK"),m=n("fotI"),g=a.Int8Array,y=g&&g.prototype,b=a.Uint8ClampedArray,_=b&&b.prototype,x=g&&h(g),w=y&&h(y),E=Object.prototype,S=E.isPrototypeOf,C=v("toStringTag"),T=m("TYPED_ARRAY_TAG"),O=i&&!!d&&"Opera"!==c(a.opera),A=!1,k={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},M=function(t){var e=c(t);return"DataView"===e||u(k,e)},P=function(t){return s(t)&&u(k,c(t))},I=function(t){if(P(t))return t;throw TypeError("Target is not a typed array")},L=function(t){if(d){if(S.call(x,t))return t}else for(var e in k)if(u(k,r)){var n=a[e];if(n&&(t===n||S.call(n,t)))return t}throw TypeError("Target is not a typed array constructor")},R=function(t,e,n){if(o){if(n)for(var r in k){var i=a[r];i&&u(i.prototype,t)&&delete i.prototype[t]}w[t]&&!n||f(w,t,n?e:O&&y[t]||e)}},D=function(t,e,n){var r,i;if(o){if(d){if(n)for(r in k)i=a[r],i&&u(i,t)&&delete i[t];if(x[t]&&!n)return;try{return f(x,t,n?e:O&&g[t]||e)}catch(s){}}for(r in k)i=a[r],!i||i[t]&&!n||f(i,t,e)}};for(r in k)a[r]||(O=!1);if((!O||"function"!=typeof x||x===Function.prototype)&&(x=function(){throw TypeError("Incorrect invocation")},O))for(r in k)a[r]&&d(a[r],x);if((!O||!w||w===E)&&(w=x.prototype,O))for(r in k)a[r]&&d(a[r].prototype,w);if(O&&h(_)!==w&&d(_,w),o&&!u(w,C))for(r in A=!0,p(w,C,{get:function(){return s(this)?this[T]:void 0}}),k)a[r]&&l(a[r],T,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:O,TYPED_ARRAY_TAG:A&&T,aTypedArray:I,aTypedArrayConstructor:L,exportTypedArrayMethod:R,exportTypedArrayStaticMethod:D,isView:M,isTypedArray:P,TypedArray:x,TypedArrayPrototype:w}},WwDD:function(t,e,n){"use strict";function r(){var t=n("xwgP");return r=function(){return t},t}function i(t,e){return c(t)||u(t,e)||a(t,e)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(t,e){if(t){if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function c(t){if(Array.isArray(t))return t}function l(t,e,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(o<e.length){var a=e[o],s=function(){return l(t,e,n,o+1)},u=a.match(/^([^:]+):?(.*)$/)||[],c=i(u,3),f=c[1],p=c[2];switch(f){case"autoplay":s();break;case"click":var h=p.match(/^(global\()?(.+?)\)?$/)||[],d=i(h,3),v=d[1],m=d[2],g=v?document:t;null===(r=g.querySelector(m))||void 0===r||r.click(),s();break;case"timeout":setTimeout(s,Number(p));break;case"capture":window.postMessage({type:"dumi:capture-element",value:p},"*"),s();break;default:console.warn("[dumi: motion] unknown motion '".concat(a,"', skip.")),s()}}else n()}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var f=function(t,e){var n=(0,r().useState)(!1),o=i(n,2),a=o[0],s=o[1],u=(0,r().useCallback)((function(){a||(l(e,t,(function(){s(!1)})),s(!0))}),[t,e,a]);return(0,r().useEffect)((function(){"autoplay"===t[0]&&e&&u()}),[t,e]),[u,a]};e["default"]=f},"X+MP":function(t,e){function n(t){return function(e){return null==t?void 0:t[e]}}t.exports=n},X260:function(t,e,n){var r=n("HIsA"),i=Math.min,o=Math.max;r({target:"Math",stat:!0},{clamp:function(t,e,n){return i(n,o(e,t))}})},XDUN:function(t,e,n){"use strict";var r=n("5EKB");function i(){var t=n("xwgP");return i=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o=n("OS9G");function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){return d(t)||h(t,e)||f(t,e)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(t,e){if(t){if("string"===typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function d(t){if(Array.isArray(t))return t}var v=function(t){var e=(0,i().useContext)(o.context),n=e.locale,a=e.routes,s=e.config.locales,u=(0,i().useState)([]),l=c(u,2),f=l[0],p=l[1],h=(0,i().useState)([]),d=c(h,2),v=d[0],m=d[1];return(0,i().useEffect)((function(){p(a.filter((function(t){var e=t.title,r=t.meta,i=(null===r||void 0===r?void 0:r.locale)===n,o=(null===r||void 0===r?void 0:r.locale)===s[0].name||!(null===r||void 0===r?void 0:r.locale)&&(!s.length||n===s[0].name);return e&&(o||i)})).reduce((function(t,e){var n,i,o={title:e.title,path:e.path};return(null===(n=e.meta)||void 0===n?void 0:n.group)&&(o.parent=e.meta.group),t.push(o),t.push.apply(t,r(((null===(i=e.meta)||void 0===i?void 0:i.slugs)||[]).filter((function(t){var n=t.value;return n!==e.title})).map((function(t){return{title:t.value,path:"".concat(e.path,"#").concat(t.heading),parent:o}})))),t}),[]))}),[a.length,n]),(0,i().useEffect)((function(){var e=null===t||void 0===t?void 0:t.trim().toUpperCase();if(e){for(var n=[],r=0;r<f.length;r+=1)f[r].title.toUpperCase().indexOf(e)>-1&&n.push(f[r]);m(n)}else m([])}),[t,f.length]),v},m=function(){var t=(0,i().useContext)(o.context),e=t.config.algolia,n=(0,i().useCallback)((function(t){window.docsearch(s({inputSelector:t},e))}),[e]);return n},g=function(t){var e=(0,i().useContext)(o.context),n=e.config,r=v(t),a=m();return n.algolia?a:r};e["default"]=g},XF5O:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("Kzx3");function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Object(r["a"])(t,e)}},XUFm:function(t,e,n){"use strict";var r=n("TWOK"),i=n("rRIJ"),o=n("FpZt"),a=n("8tFq"),s=n("xwgP"),u=n.n(s),c=n("jK+o"),l=n.n(c),f=n("vdin"),p=n("uMeh");function h(t,e){d(t)&&(t="100%");var n=v(t);return t=360===e?t:Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:(t=360===e?(t<0?t%e+e:t%e)/parseFloat(String(e)):t%e/parseFloat(String(e)),t)}function d(t){return"string"===typeof t&&-1!==t.indexOf(".")&&1===parseFloat(t)}function v(t){return"string"===typeof t&&-1!==t.indexOf("%")}function m(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function g(t){return t<=1?100*Number(t)+"%":t}function y(t){return 1===t.length?"0"+t:String(t)}function b(t,e,n){return{r:255*h(t,255),g:255*h(e,255),b:255*h(n,255)}}function _(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*n*(e-t):n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function x(t,e,n){var r,i,o;if(t=h(t,360),e=h(e,100),n=h(n,100),0===e)i=n,o=n,r=n;else{var a=n<.5?n*(1+e):n+e-n*e,s=2*n-a;r=_(s,a,t+1/3),i=_(s,a,t),o=_(s,a,t-1/3)}return{r:255*r,g:255*i,b:255*o}}function w(t,e,n){t=h(t,255),e=h(e,255),n=h(n,255);var r=Math.max(t,e,n),i=Math.min(t,e,n),o=0,a=r,s=r-i,u=0===r?0:s/r;if(r===i)o=0;else{switch(r){case t:o=(e-n)/s+(e<n?6:0);break;case e:o=(n-t)/s+2;break;case n:o=(t-e)/s+4;break;default:break}o/=6}return{h:o,s:u,v:a}}function E(t,e,n){t=6*h(t,360),e=h(e,100),n=h(n,100);var r=Math.floor(t),i=t-r,o=n*(1-e),a=n*(1-i*e),s=n*(1-(1-i)*e),u=r%6,c=[n,a,o,o,s,n][u],l=[s,n,n,a,o,o][u],f=[o,o,s,n,n,a][u];return{r:255*c,g:255*l,b:255*f}}function S(t,e,n,r){var i=[y(Math.round(t).toString(16)),y(Math.round(e).toString(16)),y(Math.round(n).toString(16))];return r&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function C(t){return T(t)/255}function T(t){return parseInt(t,16)}var O={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function A(t){var e={r:0,g:0,b:0},n=1,r=null,i=null,o=null,a=!1,s=!1;return"string"===typeof t&&(t=D(t)),"object"===typeof t&&(N(t.r)&&N(t.g)&&N(t.b)?(e=b(t.r,t.g,t.b),a=!0,s="%"===String(t.r).substr(-1)?"prgb":"rgb"):N(t.h)&&N(t.s)&&N(t.v)?(r=g(t.s),i=g(t.v),e=E(t.h,r,i),a=!0,s="hsv"):N(t.h)&&N(t.s)&&N(t.l)&&(r=g(t.s),o=g(t.l),e=x(t.h,r,o),a=!0,s="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(n=t.a)),n=m(n),{ok:a,format:t.format||s,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}var k="[-\\+]?\\d+%?",M="[-\\+]?\\d*\\.\\d+%?",P="(?:"+M+")|(?:"+k+")",I="[\\s|\\(]+("+P+")[,|\\s]+("+P+")[,|\\s]+("+P+")\\s*\\)?",L="[\\s|\\(]+("+P+")[,|\\s]+("+P+")[,|\\s]+("+P+")[,|\\s]+("+P+")\\s*\\)?",R={CSS_UNIT:new RegExp(P),rgb:new RegExp("rgb"+I),rgba:new RegExp("rgba"+L),hsl:new RegExp("hsl"+I),hsla:new RegExp("hsla"+L),hsv:new RegExp("hsv"+I),hsva:new RegExp("hsva"+L),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function D(t){if(t=t.trim().toLowerCase(),0===t.length)return!1;var e=!1;if(O[t])t=O[t],e=!0;else if("transparent"===t)return{r:0,g:0,b:0,a:0,format:"name"};var n=R.rgb.exec(t);return n?{r:n[1],g:n[2],b:n[3]}:(n=R.rgba.exec(t),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=R.hsl.exec(t),n?{h:n[1],s:n[2],l:n[3]}:(n=R.hsla.exec(t),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=R.hsv.exec(t),n?{h:n[1],s:n[2],v:n[3]}:(n=R.hsva.exec(t),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=R.hex8.exec(t),n?{r:T(n[1]),g:T(n[2]),b:T(n[3]),a:C(n[4]),format:e?"name":"hex8"}:(n=R.hex6.exec(t),n?{r:T(n[1]),g:T(n[2]),b:T(n[3]),format:e?"name":"hex"}:(n=R.hex4.exec(t),n?{r:T(n[1]+n[1]),g:T(n[2]+n[2]),b:T(n[3]+n[3]),a:C(n[4]+n[4]),format:e?"name":"hex8"}:(n=R.hex3.exec(t),!!n&&{r:T(n[1]+n[1]),g:T(n[2]+n[2]),b:T(n[3]+n[3]),format:e?"name":"hex"})))))))))}function N(t){return Boolean(R.CSS_UNIT.exec(String(t)))}var j=2,F=.16,z=.05,B=.05,U=.15,V=5,q=4,G=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function H(t){var e=t.r,n=t.g,r=t.b,i=w(e,n,r);return{h:360*i.h,s:i.s,v:i.v}}function W(t){var e=t.r,n=t.g,r=t.b;return"#".concat(S(e,n,r,!1))}function X(t,e,n){var r=n/100,i={r:(e.r-t.r)*r+t.r,g:(e.g-t.g)*r+t.g,b:(e.b-t.b)*r+t.b};return i}function Z(t,e,n){var r;return r=Math.round(t.h)>=60&&Math.round(t.h)<=240?n?Math.round(t.h)-j*e:Math.round(t.h)+j*e:n?Math.round(t.h)+j*e:Math.round(t.h)-j*e,r<0?r+=360:r>=360&&(r-=360),r}function Y(t,e,n){return 0===t.h&&0===t.s?t.s:(r=n?t.s-F*e:e===q?t.s+F:t.s+z*e,r>1&&(r=1),n&&e===V&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function K(t,e,n){var r;return r=n?t.v+B*e:t.v-U*e,r>1&&(r=1),Number(r.toFixed(2))}function J(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=A(t),i=V;i>0;i-=1){var o=H(r),a=W(A({h:Z(o,i,!0),s:Y(o,i,!0),v:K(o,i,!0)}));n.push(a)}n.push(W(r));for(var s=1;s<=q;s+=1){var u=H(r),c=W(A({h:Z(u,s),s:Y(u,s),v:K(u,s)}));n.push(c)}return"dark"===e.theme?G.map((function(t){var r=t.index,i=t.opacity,o=W(X(A(e.backgroundColor||"#141414"),A(n[r]),100*i));return o})):n}var Q={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},$={},tt={};Object.keys(Q).forEach((function(t){$[t]=J(Q[t]),$[t].primary=$[t][5],tt[t]=J(Q[t],{theme:"dark",backgroundColor:"#141414"}),tt[t].primary=tt[t][5]}));$.red,$.volcano,$.gold,$.orange,$.yellow,$.lime,$.green,$.cyan,$.blue,$.geekblue,$.purple,$.magenta,$.grey;var et=n("HWpy"),nt=n("nKQv");function rt(t,e){Object(et["a"])(t,"[@ant-design/icons] ".concat(e))}function it(t){return"object"===Object(p["a"])(t)&&"string"===typeof t.name&&"string"===typeof t.theme&&("object"===Object(p["a"])(t.icon)||"function"===typeof t.icon)}function ot(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).reduce((function(e,n){var r=t[n];switch(n){case"class":e.className=r,delete e.class;break;default:e[n]=r}return e}),{})}function at(t,e,n){return n?u.a.createElement(t.tag,Object(r["a"])(Object(r["a"])({key:e},ot(t.attrs)),n),(t.children||[]).map((function(n,r){return at(n,"".concat(e,"-").concat(t.tag,"-").concat(r))}))):u.a.createElement(t.tag,Object(r["a"])({key:e},ot(t.attrs)),(t.children||[]).map((function(n,r){return at(n,"".concat(e,"-").concat(t.tag,"-").concat(r))})))}function st(t){return J(t)[0]}function ut(t){return t?Array.isArray(t)?t:[t]:[]}var ct="\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",lt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,e=Object(s["useContext"])(f["a"]),n=e.csp;Object(s["useEffect"])((function(){Object(nt["a"])(t,"@ant-design-icons",{prepend:!0,csp:n})}),[])},ft=["icon","className","onClick","style","primaryColor","secondaryColor"],pt={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function ht(t){var e=t.primaryColor,n=t.secondaryColor;pt.primaryColor=e,pt.secondaryColor=n||st(e),pt.calculated=!!n}function dt(){return Object(r["a"])({},pt)}var vt=function(t){var e=t.icon,n=t.className,i=t.onClick,o=t.style,s=t.primaryColor,u=t.secondaryColor,c=Object(a["a"])(t,ft),l=pt;if(s&&(l={primaryColor:s,secondaryColor:u||st(s)}),lt(),rt(it(e),"icon should be icon definiton, but got ".concat(e)),!it(e))return null;var f=e;return f&&"function"===typeof f.icon&&(f=Object(r["a"])(Object(r["a"])({},f),{},{icon:f.icon(l.primaryColor,l.secondaryColor)})),at(f.icon,"svg-".concat(f.name),Object(r["a"])({className:n,onClick:i,style:o,"data-icon":f.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},c))};vt.displayName="IconReact",vt.getTwoToneColors=dt,vt.setTwoToneColors=ht;var mt=vt;function gt(t){var e=ut(t),n=Object(i["a"])(e,2),r=n[0],o=n[1];return mt.setTwoToneColors({primaryColor:r,secondaryColor:o})}function yt(){var t=mt.getTwoToneColors();return t.calculated?[t.primaryColor,t.secondaryColor]:t.primaryColor}var bt=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];gt("#1890ff");var _t=s["forwardRef"]((function(t,e){var n,u=t.className,c=t.icon,p=t.spin,h=t.rotate,d=t.tabIndex,v=t.onClick,m=t.twoToneColor,g=Object(a["a"])(t,bt),y=s["useContext"](f["a"]),b=y.prefixCls,_=void 0===b?"anticon":b,x=l()(_,(n={},Object(o["a"])(n,"".concat(_,"-").concat(c.name),!!c.name),Object(o["a"])(n,"".concat(_,"-spin"),!!p||"loading"===c.name),n),u),w=d;void 0===w&&v&&(w=-1);var E=h?{msTransform:"rotate(".concat(h,"deg)"),transform:"rotate(".concat(h,"deg)")}:void 0,S=ut(m),C=Object(i["a"])(S,2),T=C[0],O=C[1];return s["createElement"]("span",Object(r["a"])(Object(r["a"])({role:"img","aria-label":c.name},g),{},{ref:e,tabIndex:w,onClick:v,className:x}),s["createElement"](mt,{icon:c,primaryColor:T,secondaryColor:O,style:E}))}));_t.displayName="AntdIcon",_t.getTwoToneColor=yt,_t.setTwoToneColor=gt;e["a"]=_t},Xf1w:function(t,e,n){var r=n("40mc"),i=n("aS93"),o=n("NVMI"),a=n("2I03"),s=n("HKEF"),u=[].push,c=function(t){var e=1==t,n=2==t,c=3==t,l=4==t,f=6==t,p=5==t||f;return function(h,d,v,m){for(var g,y,b=o(h),_=i(b),x=r(d,v,3),w=a(_.length),E=0,S=m||s,C=e?S(h,w):n?S(h,0):void 0;w>E;E++)if((p||E in _)&&(g=_[E],y=x(g,E,b),t))if(e)C[E]=y;else if(y)switch(t){case 3:return!0;case 5:return g;case 6:return E;case 2:u.call(C,g)}else if(l)return!1;return f?-1:c||l?l:C}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},Xhqw:function(t,e,n){!function(t,n){n(e)}(0,(function(t){"use strict";function e(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&C(r),i&&T(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function n(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i,a=n.bbox;if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");switch(a&&C(a),t){case"Point":i=r(e).geometry;break;case"LineString":i=s(e).geometry;break;case"Polygon":i=o(e).geometry;break;case"MultiPoint":i=f(e).geometry;break;case"MultiLineString":i=l(e).geometry;break;case"MultiPolygon":i=p(e).geometry;break;default:throw new Error(t+" is invalid")}return a&&(i.bbox=a),i}function r(t,n,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!E(t[0])||!E(t[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:t},n,r)}function i(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return c(t.map((function(t){return r(t,e)})),n)}function o(t,n,r){if(!t)throw new Error("coordinates is required");for(var i=0;i<t.length;i++){var o=t[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++){if(0===i&&0===a&&!E(o[0][0])||!E(o[0][1]))throw new Error("coordinates must contain numbers");if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}}return e({type:"Polygon",coordinates:t},n,r)}function a(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return c(t.map((function(t){return o(t,e)})),n)}function s(t,n,r){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!E(t[0][1])||!E(t[0][1]))throw new Error("coordinates must contain numbers");return e({type:"LineString",coordinates:t},n,r)}function u(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return c(t.map((function(t){return s(t,e)})),n)}function c(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.bbox,r=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&C(n),r&&T(r);var i={type:"FeatureCollection"};return r&&(i.id=r),n&&(i.bbox=n),i.features=t,i}function l(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiLineString",coordinates:t},n,r)}function f(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiPoint",coordinates:t},n,r)}function p(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiPolygon",coordinates:t},n,r)}function h(t,n,r){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return e({type:"GeometryCollection",geometries:t},n,r)}function d(t,e){if(void 0===t||null===t||isNaN(t))throw new Error("num is required");if(e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function v(t,e){if(void 0===t||null===t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=jo[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}function m(t,e){if(void 0===t||null===t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=jo[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}function g(t,e){return b(m(t,e))}function y(t){if(null===t||void 0===t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e}function b(t){if(null===t||void 0===t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}function _(t){if(null===t||void 0===t)throw new Error("degrees is required");return t%360*Math.PI/180}function x(t,e,n){if(null===t||void 0===t)throw new Error("length is required");if(!(t>=0))throw new Error("length must be a positive number");return v(m(t,e),n||"kilometers")}function w(t,e,n){if(null===t||void 0===t)throw new Error("area is required");if(!(t>=0))throw new Error("area must be a positive number");var r=zo[e||"meters"];if(!r)throw new Error("invalid original units");var i=zo[n||"kilometers"];if(!i)throw new Error("invalid final units");return t/r*i}function E(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function S(t){return!!t&&t.constructor===Object}function C(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!E(t))throw new Error("bbox must only contain numbers")}))}function T(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function O(t,e,n){if(null!==t)for(var r,i,o,a,s,u,c,l,f=0,p=0,h=t.type,d="FeatureCollection"===h,v="Feature"===h,m=d?t.features.length:1,g=0;g<m;g++){s=(l=!!(c=d?t.features[g].geometry:v?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var y=0;y<s;y++){var b=0,_=0;if(null!==(a=l?c.geometries[y]:c)){u=a.coordinates;var x=a.type;switch(f=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":e(u,p,g,b,_),p++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++)e(u[r],p,g,b,_),p++,"MultiPoint"===x&&b++;"LineString"===x&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-f;i++)e(u[r][i],p,g,b,_),p++;"MultiLineString"===x&&b++,"Polygon"===x&&_++}"Polygon"===x&&b++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for("MultiPolygon"===x&&(_=0),i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-f;o++)e(u[r][i][o],p,g,b,_),p++;_++}b++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)O(a.geometries[r],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function A(t,e,n,r){var i=n;return O(t,(function(t,r,o,a,s){i=0===r&&void 0===n?t:e(i,t,r,o,a,s)}),r),i}function k(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties,n);break;case"Feature":e(t.properties,0)}}function M(t,e,n){var r=n;return k(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r}function P(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}function I(t,e,n){var r=n;return P(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r}function L(t){var e=[];return O(t,(function(t){e.push(t)})),e}function R(t,e){var n,r,i,o,a,s,u,c,l,f,p=0,h="FeatureCollection"===t.type,d="Feature"===t.type,v=h?t.features.length:1;for(n=0;n<v;n++){for(s=h?t.features[n].geometry:d?t.geometry:t,c=h?t.features[n].properties:d?t.properties:{},l=h?t.features[n].bbox:d?t.bbox:void 0,f=h?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,p,c,l,f);break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)e(o.geometries[r],p,c,l,f);break;default:throw new Error("Unknown Geometry Type")}else e(null,p,c,l,f);p++}}function D(t,e,n){var r=n;return R(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)})),r}function N(t,n){R(t,(function(t,r,i,o,a){var s,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return void n(e(t,i,{bbox:o,id:a}),r,0)}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}t.coordinates.forEach((function(t,o){n(e({type:s,coordinates:t},i),r,o)}))}))}function j(t,e,n){var r=n;return N(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r}function F(t,e){N(t,(function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;"Point"!==o&&"MultiPoint"!==o&&A(t,(function(o,a,u,c,l,f){var p=s([o,a],t.properties);return e(p,n,r,f,i),i++,a}))}}))}function z(t,e,n){var r=n,i=!1;return F(t,(function(t,o,a,s,u){r=!1===i&&void 0===n?t:e(r,t,o,a,s,u),i=!0})),r}function B(t,e){if(!t)throw new Error("geojson is required");N(t,(function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":e(t,n,r,0,0);break;case"Polygon":for(var a=0;a<o.length;a++)e(s(o[a],t.properties),n,r,a)}}}))}function U(t,e,n){var r=n;return B(t,(function(t,i,o,a){r=0===i&&void 0===n?t:e(r,t,i,o,a)})),r}function V(t){var e=[1/0,1/0,-1/0,-1/0];return O(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function q(t){if(!t)throw new Error("obj is required");var e=G(t);if(e.length>1&&E(e[0])&&E(e[1]))return e;throw new Error("Coordinate is not a valid Point")}function G(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return H(e),e;throw new Error("No valid coordinates")}function H(t){if(t.length>1&&E(t[0])&&E(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return H(t[0]);throw new Error("coordinates must only contain numbers")}function W(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function X(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function Z(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0;r<t.features.length;r++){var i=t.features[r];if(!i||"Feature"!==i.type||!i.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!i.geometry||i.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+i.geometry.type)}}function Y(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")}function K(){throw new Error("invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType")}function J(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}function Q(t,e,n){n=n||{};for(var r=Object.keys(qo),i=0;i<r.length;i++){var o=r[i],a=n[o];a=void 0!==a&&null!==a?a:qo[o],Go[o]=a}Go.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var s=function(t){var e=[],n=0;return t.rows,t.cols,t.cells.forEach((function(r,i){r.forEach((function(r,o){if(void 0!==r&&!function(t){return 5===t.cval||10===t.cval}(r)&&!tt(r)){var a=function(t,e,n){var r,i,o,a=t.length,s=[],u=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],c=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],l=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],f=(t[e][n],t[e][n]),p=f.cval,h=nt(f,o=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][p]);s.push([n+h[0],e+h[1]]),h=nt(f,o=l[p]),s.push([n+h[0],e+h[1]]),et(f);for(var d=n+u[p],v=e+c[p],m=p;d>=0&&v>=0&&v<a&&(d!=n||v!=e)&&void 0!==(f=t[v][d]);){if(0===(p=f.cval)||15===p)return{path:s,info:"mergeable"};o=l[p],r=u[p],i=c[p],5!==p&&10!==p||(5===p?f.flipped?-1===c[m]?(o="left",r=-1,i=0):(o="right",r=1,i=0):-1===u[m]&&(o="bottom",r=0,i=-1):10===p&&(f.flipped?-1===u[m]?(o="top",r=0,i=1):(o="bottom",r=0,i=-1):1===c[m]&&(o="left",r=-1,i=0))),h=nt(f,o),s.push([d+h[0],v+h[1]]),et(f),d+=r,v+=i,m=p}return{path:s,info:"closed"}}(t.cells,i,o),s=!1;if("mergeable"===a.info)for(var u=a.path[a.path.length-1][0],c=a.path[a.path.length-1][1],l=n-1;l>=0;l--)if(Math.abs(e[l][0][0]-u)<=1e-7&&Math.abs(e[l][0][1]-c)<=1e-7){for(var f=a.path.length-2;f>=0;--f)e[l].unshift(a.path[f]);s=!0;break}s||(e[n++]=a.path)}}))})),e}(function(t,e){for(var n=t.length-1,r=t[0].length-1,i={rows:n,cols:r,cells:[]},o=0;o<n;++o){i.cells[o]=[];for(var a=0;a<r;++a){var s=0,u=t[o+1][a],c=t[o+1][a+1],l=t[o][a+1],f=t[o][a];if(!(isNaN(u)||isNaN(c)||isNaN(l)||isNaN(f))){s|=u>=e?8:0,s|=c>=e?4:0,s|=l>=e?2:0;var p,h,d,v,m=!1;if(5===(s|=f>=e?1:0)||10===s){var g=(u+c+l+f)/4;5===s&&g<e?(s=10,m=!0):10===s&&g<e&&(s=5,m=!0)}if(0!==s&&15!==s)p=h=d=v=.5,1===s?(d=1-$(e,u,f),h=1-$(e,l,f)):2===s?(h=$(e,f,l),v=1-$(e,c,l)):3===s?(d=1-$(e,u,f),v=1-$(e,c,l)):4===s?(p=$(e,u,c),v=$(e,l,c)):5===s?(p=$(e,u,c),v=$(e,l,c),h=1-$(e,l,f),d=1-$(e,u,f)):6===s?(h=$(e,f,l),p=$(e,u,c)):7===s?(d=1-$(e,u,f),p=$(e,u,c)):8===s?(d=$(e,f,u),p=1-$(e,c,u)):9===s?(h=1-$(e,l,f),p=1-$(e,c,u)):10===s?(p=1-$(e,c,u),v=1-$(e,c,l),h=$(e,f,l),d=$(e,f,u)):11===s?(p=1-$(e,c,u),v=1-$(e,c,l)):12===s?(d=$(e,f,u),v=$(e,l,c)):13===s?(h=1-$(e,l,f),v=$(e,l,c)):14===s?(d=$(e,f,u),h=$(e,f,l)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+s),i.cells[o][a]={cval:s,flipped:m,top:p,right:v,bottom:h,left:d}}}}return i}(t,e));return"function"==typeof Go.successCallback&&Go.successCallback(s),s}function $(t,e,n){return(t-e)/(n-e)}function tt(t){return 0===t.cval||15===t.cval}function et(t){tt(t)||5===t.cval||10===t.cval||(t.cval=15)}function nt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function rt(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;Z(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return P(t,(function(t){var e=G(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){var e=n[t],r=e.sort((function(t,e){return G(t)[0]-G(e)[0]}));return r})).sort((function(t,n){return e?G(t[0])[1]-G(n[0])[1]:G(n[0])[1]-G(t[0])[1]}))}(t,r),a=[],s=0;s<o.length;s++){for(var u=o[s],c=[],l=0;l<u.length;l++){var f=u[l];f.properties[n]?c.push(f.properties[n]):c.push(0),!0===i&&(f.properties.matrixPosition=[s,l])}a.push(c)}return a}function it(t,e,n,r,i){for(n=n||0,r=r||t.length-1,i=i||function(t,e){return t<e?-1:t>e?1:0};r>n;){if(r-n>600){var o=r-n+1,a=e-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);it(t,e,Math.max(n,Math.floor(e-a*u/o+c)),Math.min(r,Math.floor(e+(o-a)*u/o+c)),i)}var l=t[e],f=n,p=r;for(ot(t,n,e),i(t[r],l)>0&&ot(t,n,r);f<p;){for(ot(t,f,p),f++,p--;i(t[f],l)<0;)f++;for(;i(t[p],l)>0;)p--}0===i(t[n],l)?ot(t,n,p):ot(t,++p,r),p<=e&&(n=p+1),e<=p&&(r=p-1)}}function ot(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function at(t,e){if(!(this instanceof at))return new at(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function st(t,e){ut(t,0,t.children.length,e,t)}function ut(t,e,n,r,i){i||(i=mt(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],ct(i,t.leaf?r(o):o);return i}function ct(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function lt(t,e){return t.minX-e.minX}function ft(t,e){return t.minY-e.minY}function pt(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function ht(t){return t.maxX-t.minX+(t.maxY-t.minY)}function dt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function vt(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function mt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function gt(t,e,n,r,i){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,Ho(t,o,e,n,i),a.push(e,o,o,n))}function yt(t,e){return e={exports:{}},t(e,e.exports),e.exports}function bt(t,e){if(!(this instanceof bt))return new bt(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||function(t,e){return t<e?-1:t>e?1:0},this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function _t(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var r,i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],o=0;o<t.length;o++){var a=t[o];a[0]<e[0]&&(e=a),a[0]>r[0]&&(r=a),a[1]<n[1]&&(n=a),a[1]>i[1]&&(i=a)}var s=[e,n,r,i],u=s.slice();for(o=0;o<t.length;o++)ia(t[o],s)||u.push(t[o]);var c=ta(u),l=[];for(o=0;o<c.length;o++)l.push(u[c[o]]);return l}(t),o=Wo(16,["[0]","[1]","[0]","[1]"]).load(t),a=[],s=0;s<i.length;s++){var u=i[s];o.remove(u),r=Ct(u,r),a.push(r)}var c=Wo(16);for(s=0;s<a.length;s++)c.insert(St(a[s]));for(var l=e*e,f=n*n;a.length;){var p=a.shift(),h=p.p,d=p.next.p,v=Tt(h,d);if(!(v<f)){var m=v/l;(u=function(t,e,n,r,i,o,a){for(var s=new na(null,xt),u=t.data;u;){for(var c=0;c<u.children.length;c++){var l=u.children[c],f=u.leaf?Ot(l,n,r):function(t,e,n){if(wt(t,n)||wt(e,n))return 0;var r=At(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=At(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=At(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var a=At(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(r,i,o,a)}(n,r,l);f>o||s.push({node:l,dist:f})}for(;s.length&&!s.peek().node.children;){var p=s.pop(),h=p.node,d=Ot(h,e,n),v=Ot(h,r,i);if(p.dist<d&&p.dist<v&&Et(n,h,a)&&Et(r,h,a))return h}(u=s.pop())&&(u=u.node)}return null}(o,p.prev.p,h,d,p.next.next.p,m,c))&&Math.min(Tt(u,h),Tt(u,d))<=m&&(a.push(p),a.push(Ct(u,p)),o.remove(u),c.remove(p),c.insert(St(p)),c.insert(St(p.next)))}}p=r;var g=[];do{g.push(p.p),p=p.next}while(p!==r);return g.push(p.p),g}function xt(t,e){return t.dist-e.dist}function wt(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function Et(t,e,n){for(var r=Math.min(t[0],e[0]),i=Math.min(t[1],e[1]),o=Math.max(t[0],e[0]),a=Math.max(t[1],e[1]),s=n.search({minX:r,minY:i,maxX:o,maxY:a}),u=0;u<s.length;u++)if(function(t,e,n,r){return t!==r&&e!==n&&oa(t,e,n)>0!=oa(t,e,r)>0&&oa(n,r,t)>0!=oa(n,r,e)>0}(s[u].p,s[u].next.p,t,e))return!1;return!0}function St(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function Ct(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function Tt(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function Ot(t,e,n){var r=e[0],i=e[1],o=n[0]-r,a=n[1]-i;if(0!==o||0!==a){var s=((t[0]-r)*o+(t[1]-i)*a)/(o*o+a*a);s>1?(r=n[0],i=n[1]):s>0&&(r+=o*s,i+=a*s)}return o=t[0]-r,a=t[1]-i,o*o+a*a}function At(t,e,n,r,i,o,a,s){var u,c,l,f,p=n-t,h=r-e,d=a-i,v=s-o,m=t-i,g=e-o,y=p*p+h*h,b=p*d+h*v,_=d*d+v*v,x=p*m+h*g,w=d*m+v*g,E=y*_-b*b,S=E,C=E;0===E?(c=0,S=1,f=w,C=_):(f=y*w-b*x,(c=b*w-_*x)<0?(c=0,f=w,C=_):c>S&&(c=S,f=w+b,C=_)),f<0?(f=0,-x<0?c=0:-x>y?c=S:(c=-x,S=y)):f>C&&(f=C,-x+b<0?c=0:-x+b>y?c=S:(c=-x+b,S=y)),u=0===c?0:c/S;var T=(1-(l=0===f?0:f/C))*i+l*a-((1-u)*t+u*n),O=(1-l)*o+l*s-((1-u)*e+u*r);return T*T+O*O}function kt(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.concavity||1/0,r=[];if(O(t,(function(t){r.push([t[0],t[1]])})),!r.length)return null;var i=aa(r,n);return i.length>3?o([i]):null}function Mt(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=q(t),o=G(e),a=e.geometry?e.geometry.type:e.type,s=e.bbox;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(i,s))return!1;"Polygon"===a&&(o=[o]);for(var u=0,c=!1;u<o.length&&!c;u++)if(Pt(i,o[u][0],r)){for(var l=!1,f=1;f<o[u].length&&!l;)Pt(i,o[u][f],!r)&&(l=!0),f++;l||(c=!0)}return c}function Pt(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var a=e[i][0],s=e[i][1],u=e[o][0],c=e[o][1];if(t[1]*(a-u)+s*(u-t[0])+c*(t[0]-a)==0&&(a-t[0])*(u-t[0])<=0&&(s-t[1])*(c-t[1])<=0)return!n;s>t[1]!=c>t[1]&&t[0]<(u-a)*(t[1]-s)/(c-s)+a&&(r=!r)}return r}function It(t,e){var n=[];return R(e,(function(e){P(t,(function(t){Mt(t,e)&&n.push(t)}))})),c(n)}function Lt(t,e){if("FeatureCollection"!==t.type)throw new Error("points must be a FeatureCollection");var n=!1;return c(function(t){if(t.length<3)return[];t.sort(Dt);for(var e,n,r,i,o,a,s=t.length-1,u=t[s].x,c=t[0].x,l=t[s].y,f=l;s--;)t[s].y<l&&(l=t[s].y),t[s].y>f&&(f=t[s].y);var p,h=c-u,d=f-l,v=h>d?h:d,m=.5*(c+u),g=.5*(f+l),y=[new Rt({x:m-20*v,y:g-v,__sentinel:!0},{x:m,y:g+20*v,__sentinel:!0},{x:m+20*v,y:g-v,__sentinel:!0})],b=[],_=[];for(s=t.length;s--;){for(_.length=0,p=y.length;p--;)(h=t[s].x-y[p].x)>0&&h*h>y[p].r?(b.push(y[p]),y.splice(p,1)):(d=t[s].y-y[p].y,h*h+d*d>y[p].r||(_.push(y[p].a,y[p].b,y[p].b,y[p].c,y[p].c,y[p].a),y.splice(p,1)));for(Nt(_),p=_.length;p;)n=_[--p],e=_[--p],r=t[s],i=n.x-e.x,o=n.y-e.y,a=2*(i*(r.y-n.y)-o*(r.x-n.x)),Math.abs(a)>1e-12&&y.push(new Rt(e,n,r))}for(Array.prototype.push.apply(b,y),s=b.length;s--;)(b[s].a.__sentinel||b[s].b.__sentinel||b[s].c.__sentinel)&&b.splice(s,1);return b}(t.features.map((function(t){var r={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?r.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,r.z=t.geometry.coordinates[2]),r}))).map((function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],i=[t.c.x,t.c.y],a={};return n?(e.push(t.a.z),r.push(t.b.z),i.push(t.c.z)):a={a:t.a.z,b:t.b.z,c:t.c.z},o([[e,r,i,e]],a)})))}function Rt(t,e,n){this.a=t,this.b=e,this.c=n;var r,i,o=e.x-t.x,a=e.y-t.y,s=n.x-t.x,u=n.y-t.y,c=o*(t.x+e.x)+a*(t.y+e.y),l=s*(t.x+n.x)+u*(t.y+n.y),f=2*(o*(n.y-e.y)-a*(n.x-e.x));this.x=(u*c-a*l)/f,this.y=(o*l-s*c)/f,r=this.x-t.x,i=this.y-t.y,this.r=r*r+i*i}function Dt(t,e){return e.x-t.x}function Nt(t){var e,n,r,i,o,a=t.length;t:for(;a;)for(n=t[--a],e=t[--a],r=a;r;)if(o=t[--r],i=t[--r],e===i&&n===o||e===o&&n===i){t.splice(a,2),t.splice(r,2),a-=2;continue t}}function jt(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.units,i=q(t),o=q(e),a=_(o[1]-i[1]),s=_(o[0]-i[0]),u=_(i[1]),c=_(o[1]),l=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(u)*Math.cos(c);return v(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),r)}function Ft(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return zt(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return zt(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Ut(t);default:throw new Error("unknown GeoJSON type")}}function zt(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=Bt(t.properties),e.geometry=Ut(t.geometry),e}function Bt(t){var e={};return t?(Object.keys(t).forEach((function(n){var r=t[n];"object"==typeof r?null===r?e[n]=null:r.length?e[n]=r.map((function(t){return t})):e[n]=Bt(r):e[n]=r})),e):e}function Ut(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return Ut(t)})),e):(e.coordinates=Vt(t.coordinates),e)}function Vt(t){return"object"!=typeof t[0]?t.slice():t.map((function(t){return Vt(t)}))}function qt(t,e){function n(t,e){e.length&&e.pop();for(var n=c[t<0?~t:t],r=0,i=n.length;r<i;++r)e.push(u(n[r],r));t<0&&la(e,i)}function r(t){return u(t)}function i(t){for(var e=[],r=0,i=t.length;r<i;++r)n(t[r],e);return e.length<2&&e.push(e[0]),e}function o(t){for(var e=i(t);e.length<4;)e.push(e[0]);return e}function a(t){return t.map(o)}function s(t){var e,n=t.type;switch(n){case"GeometryCollection":return{type:n,geometries:t.geometries.map(s)};case"Point":e=r(t.coordinates);break;case"MultiPoint":e=t.coordinates.map(r);break;case"LineString":e=i(t.arcs);break;case"MultiLineString":e=t.arcs.map(i);break;case"Polygon":e=a(t.arcs);break;case"MultiPolygon":e=t.arcs.map(a);break;default:return null}return{type:n,coordinates:e}}var u=ca(t.transform),c=t.arcs;return s(e)}function Gt(t,e){function n(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(n);break;case"Polygon":r(t.arcs);break;case"MultiPolygon":t.arcs.forEach(r)}}function r(t){t.forEach((function(e){e.forEach((function(e){(o[e=e<0?~e:e]||(o[e]=[])).push(t)}))})),a.push(t)}function i(e){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(qt(t,{type:"Polygon",arcs:[e]}).coordinates[0])}var o={},a=[],s=[];return e.forEach(n),a.forEach((function(t){if(!t._){var e=[],n=[t];for(t._=1,s.push(e);t=n.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){o[t<0?~t:t].forEach((function(t){t._||(t._=1,n.push(t))}))}))}))}})),a.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:s.map((function(e){var n,r=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){o[t<0?~t:t].length<2&&r.push(t)}))}))})),r=fa(t,r),(n=r.length)>1)for(var a,s,u=1,c=i(r[0]);u<n;++u)(a=i(r[u]))>c&&(s=r[0],r[0]=r[u],r[u]=s,c=a);return r}))}}function Ht(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function Wt(t){return null==t?{type:null}:("FeatureCollection"===t.type?function(t){var e={type:"GeometryCollection",geometries:t.features.map(Xt)};return null!=t.bbox&&(e.bbox=t.bbox),e}:"Feature"===t.type?Xt:Zt)(t)}function Xt(t){var e,n=Zt(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Zt(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Zt)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Yt(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function Kt(t,e){var n,r=t[0],i=t[1],o=e[0],a=e[1];return i<r&&(n=r,r=i,i=n),a<o&&(n=o,o=a,a=n),r===o&&i===a}function Jt(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==J(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Ft(t));var r=[],i=U(t,(function(t,e){var n=function(t,e){var n,r=t.geometry.coordinates,i=e.geometry.coordinates,o=Qt(r[0]),a=Qt(r[r.length-1]),u=Qt(i[0]),c=Qt(i[i.length-1]);if(o===c)n=i.concat(r.slice(1));else if(u===a)n=r.concat(i.slice(1));else if(o===u)n=r.slice(1).reverse().concat(i);else{if(a!==c)return null;n=r.concat(i.reverse().slice(1))}return s(n)}(t,e);return n||(r.push(t),e)}));return i&&r.push(i),r.length?1===r.length?r[0]:l(r.map((function(t){return t.coordinates}))):null}function Qt(t){return t[0].toString()+","+t[1].toString()}function $t(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==J(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Ft(t));var r=function(t){var e={};N(t,(function(t){e[t.geometry.type]=!0}));var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!r)throw new Error("geojson must be homogenous");switch(r){case"LineString":return Jt(t,e);case"Polygon":return function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==J(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Ft(t));var r=[];N(t,(function(t){r.push(t.geometry)}));var i=wa({geoms:h(r).geometry});return pa(i,i.objects.geoms.geometries)}(t,e);default:throw new Error(r+" is not supported")}}function te(t,n){var r="object"==typeof n?n.mutate:n;if(!t)throw new Error("geojson is required");var i=J(t),o=[];switch(i){case"LineString":o=ee(t);break;case"MultiLineString":case"Polygon":G(t).forEach((function(t){o.push(ee(t))}));break;case"MultiPolygon":G(t).forEach((function(t){var e=[];t.forEach((function(t){e.push(ee(t))})),o.push(e)}));break;case"Point":return t;case"MultiPoint":var a={};G(t).forEach((function(t){var e=t.join("-");a.hasOwnProperty(e)||(o.push(t),a[e]=!0)}));break;default:throw new Error(i+" geometry not supported")}return t.coordinates?!0===r?(t.coordinates=o,t):{type:i,coordinates:o}:!0===r?(t.geometry.coordinates=o,t):e({type:i,coordinates:o},t.properties,t.bbox,t.id)}function ee(t){var e=G(t);if(2===e.length&&!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(e[0],e[1]))return e;var n,r,i,o=[],a=e.length-1;o.push(e[0]);for(var s=1;s<a;s++)n=e[s-1],r=e[s],function(t,e,n){var r=n[0],i=n[1],o=t[0],a=t[1],s=e[0],u=e[1],c=s-o,l=u-a;return(r-o)*l-(i-a)*c==0&&(Math.abs(c)>=Math.abs(l)?c>0?o<=r&&r<=s:s<=r&&r<=o:l>0?a<=i&&i<=u:u<=i&&i<=a)}(n,i=e[s+1],r)||o.push(r);return o.push(i),o}function ne(t,e){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function re(t,e,n){var r=e.x,i=e.y,o=n.x-r,a=n.y-i;if(0!==o||0!==a){var s=((t.x-r)*o+(t.y-i)*a)/(o*o+a*a);s>1?(r=n.x,i=n.y):s>0&&(r+=o*s,i+=a*s)}return o=t.x-r,a=t.y-i,o*o+a*a}function ie(t,e,n,r,i){for(var o,a=r,s=e+1;s<n;s++){var u=re(t[s],t[e],t[n]);u>a&&(o=s,a=u)}a>r&&(o-e>1&&ie(t,e,o,r,i),i.push(t[o]),n-o>1&&ie(t,o,n,r,i))}function oe(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return t=n?t:function(t,e){for(var n,r=t[0],i=[r],o=1,a=t.length;o<a;o++)ne(n=t[o],r)>e&&(i.push(n),r=n);return r!==n&&i.push(n),i}(t,r),function(t,e){var n=t.length-1,r=[t[0]];return ie(t,0,n,e,r),r.push(t[n]),r}(t,r)}function ae(t,e,n){return oe(t.map((function(t){return{x:t[0],y:t[1],z:t[2]}})),e,n).map((function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]}))}function se(t,e,n){return t.map((function(t){var r=t.map((function(t){return{x:t[0],y:t[1]}}));if(r.length<4)throw new Error("invalid polygon");for(var i=oe(r,e,n).map((function(t){return[t.x,t.y]}));!function(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}(i);)i=oe(r,e-=.01*e,n).map((function(t){return[t.x,t.y]}));return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i}))}function ue(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.resolution||1e4,r=e.sharpness||.85;if(!t)throw new Error("line is required");if(!E(n))throw new Error("resolution must be an number");if(!E(r))throw new Error("sharpness must be an number");for(var i=[],o=new Ea({points:Y(t).coordinates.map((function(t){return{x:t[0],y:t[1]}})),duration:n,sharpness:r}),a=0;a<o.duration;a+=10){var u=o.pos(a);Math.floor(a/100)%2==0&&i.push([u.x,u.y])}return s(i,t.properties)}function ce(t){C(t);var e=Number(t[0]),n=Number(t[1]),r=Number(t[2]),i=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[e,n];return o([[a,[r,n],[r,i],[e,i],a]])}function le(t){return ce(V(t))}function fe(t){var e=t[0],n=t[1],r=t[2],i=t[3];if(jt(t.slice(0,2),[r,n])>=jt(t.slice(0,2),[e,i])){var o=(n+i)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}var a=(e+r)/2;return[a-(i-n)/2,n,a+(i-n)/2,i]}function pe(t,e,n,i){if(i=i||{},!S(i))throw new Error("options is invalid");var o=i.units,a=i.properties,s=q(t),u=_(s[0]),c=_(s[1]),l=_(n),f=m(e,o),p=Math.asin(Math.sin(c)*Math.cos(f)+Math.cos(c)*Math.sin(f)*Math.cos(l));return r([b(u+Math.atan2(Math.sin(l)*Math.sin(f)*Math.cos(c),Math.cos(f)-Math.sin(c)*Math.sin(p))),b(p)],a)}function he(t,e,n){var r=(n=n||{}).steps||64,i=n.properties;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be a number");r=r||64,i=i||t.properties||{};for(var a=[],s=0;s<r;s++)a.push(pe(t,e,-360*s/r,n).geometry.coordinates);return a.push(a[0]),o([a],i)}function de(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");if(!0===n["final"])return function(t,e){var n=de(e,t);return(n+180)%360}(t,e);var r=q(t),i=q(e),o=_(r[0]),a=_(i[0]),s=_(r[1]),u=_(i[1]),c=Math.sin(a-o)*Math.cos(u),l=Math.cos(s)*Math.sin(u)-Math.sin(s)*Math.cos(u)*Math.cos(a-o);return b(Math.atan2(c,l))}function ve(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.properties;if(!t)throw new Error("geojson is required");var i=V(t);return r([(i[0]+i[2])/2,(i[1]+i[3])/2],n)}function me(t,e){var n=0,i=0,o=0;return O(t,(function(t){n+=t[0],i+=t[1],o++}),!0),r([n/o,i/o],e)}function ge(t,e){switch(J(t)){case"Point":return t;case"Polygon":var n=[];O(t,(function(t){n.push(t)}));var i,o,a,s,u,c,l,f,p=me(t,e),h=p.geometry.coordinates,d=0,v=0,m=0,g=n.map((function(t){return[t[0]-h[0],t[1]-h[1]]}));for(i=0;i<n.length-1;i++)s=(o=g[i])[0],c=o[1],u=(a=g[i+1])[0],m+=f=s*(l=a[1])-u*c,d+=(s+u)*f,v+=(c+l)*f;if(0===m)return p;var y=1/(.5*m*6);return r([h[0]+y*d,h[1]+y*v],e);default:var b=kt(t);return b?ge(b,e):me(t,e)}}function ye(t){var e=[];return"FeatureCollection"===t.type?P(t,(function(t){O(t,(function(n){e.push(r(n,t.properties))}))})):O(t,(function(n){e.push(r(n,t.properties))})),c(e)}function be(t,e,n){n=n||2;var r,i,o,a,s,u,c,l=e&&e.length,f=l?e[0]*n:t.length,p=_e(t,0,f,n,!0),h=[];if(!p)return h;if(l&&(p=function(t,e,n,r){var i,o,a,s,u,c=[];for(i=0,o=e.length;i<o;i++)a=e[i]*r,s=i<o-1?e[i+1]*r:t.length,(u=_e(t,a,s,r,!1))===u.next&&(u.steiner=!0),c.push(function(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}(u));for(c.sort(Ee),i=0;i<c.length;i++)!function(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,c=n,l=n.x,f=n.y,p=1/0;for(r=n.next;r!==c;)i>=r.x&&r.x>=l&&i!==r.x&&Ce(o<f?i:a,o,l,f,o<f?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<p||u===p&&r.x>n.x)&&ke(r,t)&&(n=r,p=u),r=r.next;return n}(t,e)){var n=Me(e,t);xe(n,n.next)}}(c[i],n),n=xe(n,n.next);return n}(t,e,p,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<f;d+=n)s=t[d],u=t[d+1],s<r&&(r=s),u<i&&(i=u),s>o&&(o=s),u>a&&(a=u);c=0!==(c=Math.max(o-r,a-i))?1/c:0}return we(p,h,n,r,i,c),h}function _e(t,e,n,r,i){var o,a;if(i===Re(t,e,n,r)>0)for(o=e;o<n;o+=r)a=Pe(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=Pe(o,t[o],t[o+1],a);return a&&Oe(a,a.next)&&(Ie(a),a=a.next),a}function xe(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Oe(r,r.next)&&0!==Te(r.prev,r,r.next))r=r.next;else{if(Ie(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function we(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=Se(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<c&&(s++,r=r.nextZ);e++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(t,r,i,o);for(var s,u,c=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?function(t,e,n,r){var i=t.prev,o=t,a=t.next;if(Te(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=Se(s,u,e,n,r),p=Se(c,l,e,n,r),h=t.nextZ;h&&h.z<=p;){if(h!==t.prev&&h!==t.next&&Ce(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Te(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(h=t.prevZ;h&&h.z>=f;){if(h!==t.prev&&h!==t.next&&Ce(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Te(h.prev,h,h.next)>=0)return!1;h=h.prevZ}return!0}(t,r,i,o):function(t){var e=t.prev,n=t,r=t.next;if(Te(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Ce(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Te(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),Ie(t),t=u.next,c=u.next;else if((t=u)===c){a?1===a?we(t=function(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Oe(i,o)&&Ae(i,r,r.next,o)&&ke(i,o)&&ke(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Ie(r),Ie(r.next),r=t=o),r=r.next}while(r!==t);return r}(t,e,n),e,n,r,i,o,2):2===a&&function(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Ae(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&ke(t,e)&&ke(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}(a,s)){var u=Me(a,s);return a=xe(a,a.next),u=xe(u,u.next),we(a,e,n,r,i,o),void we(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}(t,e,n,r,i,o):we(xe(t),e,n,r,i,o,1);break}}}function Ee(t,e){return t.x-e.x}function Se(t,e,n,r,i){return t=32767*(t-n)*i,e=32767*(e-r)*i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function Ce(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Te(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Oe(t,e){return t.x===e.x&&t.y===e.y}function Ae(t,e,n,r){return!!(Oe(t,e)&&Oe(n,r)||Oe(t,r)&&Oe(n,e))||Te(t,e,n)>0!=Te(t,e,r)>0&&Te(n,r,t)>0!=Te(n,r,e)>0}function ke(t,e){return Te(t.prev,t,t.next)<0?Te(t,e,t.next)>=0&&Te(t,t.prev,e)>=0:Te(t,e,t.prev)<0||Te(t,t.next,e)<0}function Me(t,e){var n=new Le(t.i,t.x,t.y),r=new Le(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Pe(t,e,n,r){var i=new Le(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Ie(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Le(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Re(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function De(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}(t),n=Sa(e.vertices,e.holes,2),r=[],i=[];n.forEach((function(t,r){var o=n[r];i.push([e.vertices[2*o],e.vertices[2*o+1]])}));for(var a=0;a<i.length;a+=3){var s=i.slice(a,a+3);s.push(i[a]),r.push(o([s]))}return r}function Ne(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,r=1/0;return P(e,(function(e,i){var o=jt(t,e);o<r&&((n=Ft(e)).properties.featureIndex=i,n.properties.distanceToPoint=o,r=o)})),n}function je(t,e,n,r,i){Fe(t,e,n||0,r||t.length-1,i||function(t,e){return t<e?-1:t>e?1:0})}function Fe(t,e,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,a=e-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);Fe(t,e,Math.max(n,Math.floor(e-a*u/o+c)),Math.min(r,Math.floor(e+(o-a)*u/o+c)),i)}var l=t[e],f=n,p=r;for(ze(t,n,e),i(t[r],l)>0&&ze(t,n,r);f<p;){for(ze(t,f,p),f++,p--;i(t[f],l)<0;)f++;for(;i(t[p],l)>0;)p--}0===i(t[n],l)?ze(t,n,p):ze(t,++p,r),p<=e&&(n=p+1),e<=p&&(r=p-1)}}function ze(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Be(t,e){if(!(this instanceof Be))return new Be(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Ue(t,e){Ve(t,0,t.children.length,e,t)}function Ve(t,e,n,r,i){i||(i=Ke(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],qe(i,t.leaf?r(o):o);return i}function qe(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Ge(t,e){return t.minX-e.minX}function He(t,e){return t.minY-e.minY}function We(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Xe(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Ze(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Ye(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Ke(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Je(t,e,n,r,i){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(je(t,o=e+Math.ceil((n-e)/r/2)*r,e,n,i),a.push(e,o,o,n))}function Qe(t){var e=Be(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=$e(e)).bbox=e}else t.bbox=t.bbox?t.bbox:tn(t);return Be.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){var n=$e(t);n.bbox=t,e.push(n)})):P(t,(function(t){t.bbox=t.bbox?t.bbox:tn(t),e.push(t)})),Be.prototype.load.call(this,e)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=$e(e)).bbox=e}return Be.prototype.remove.call(this,t)},e.clear=function(){return Be.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:Be.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return Be.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:Be.prototype.all.call(this)}},e.toJSON=function(){return Be.prototype.toJSON.call(this)},e.fromJSON=function(t){return Be.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:tn(t),{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function $e(t){var e=[t[0],t[1]],n=[t[0],t[3]],r=[t[2],t[3]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],r,n,e]]}}}function tn(t){var e=[1/0,1/0,-1/0,-1/0];return O(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function en(t){if(!t)throw new Error("geojson is required");var e=[];return N(t,(function(t){!function(t,e){var n=[],r=t.geometry;switch(r.type){case"Polygon":n=G(r);break;case"LineString":n=[G(r)]}n.forEach((function(n){var r=function(t,e){var n=[];return t.reduce((function(t,r){var i=s([t,r],e);return i.bbox=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return[n<i?n:i,r<o?r:o,n>i?n:i,r>o?r:o]}(t,r),n.push(i),r})),n}(n,t.properties);r.forEach((function(t){t.id=e.length,e.push(t)}))}))}(t,e)})),c(e)}function nn(t,n){var r={},i=[];if("LineString"===t.type&&(t=e(t)),"LineString"===n.type&&(n=e(n)),"Feature"===t.type&&"Feature"===n.type&&"LineString"===t.geometry.type&&"LineString"===n.geometry.type&&2===t.geometry.coordinates.length&&2===n.geometry.coordinates.length){var o=rn(t,n);return o&&i.push(o),c(i)}var a=Qe();return a.load(en(n)),P(en(t),(function(t){P(a.search(t),(function(e){var n=rn(t,e);if(n){var o=G(n).join(",");r[o]||(r[o]=!0,i.push(n))}}))})),c(i)}function rn(t,e){var n=G(t),i=G(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==i.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=n[0][0],a=n[0][1],s=n[1][0],u=n[1][1],c=i[0][0],l=i[0][1],f=i[1][0],p=i[1][1],h=(p-l)*(s-o)-(f-c)*(u-a),d=(f-c)*(a-l)-(p-l)*(o-c),v=(s-o)*(a-l)-(u-a)*(o-c);if(0===h)return null;var m=d/h,g=v/h;return m>=0&&m<=1&&g>=0&&g<=1?r([o+m*(s-o),a+m*(u-a)]):null}function on(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i=t.geometry?t.geometry.type:t.type;if("LineString"!==i&&"MultiLineString"!==i)throw new Error("lines must be LineString or MultiLineString");var o=r([1/0,1/0],{dist:1/0}),a=0;return N(t,(function(t){for(var i=G(t),u=0;u<i.length-1;u++){var c=r(i[u]);c.properties.dist=jt(e,c,n);var l=r(i[u+1]);l.properties.dist=jt(e,l,n);var f=jt(c,l,n),p=Math.max(c.properties.dist,l.properties.dist),h=de(c,l),d=pe(e,p,h+90,n),v=pe(e,p,h-90,n),m=nn(s([d.geometry.coordinates,v.geometry.coordinates]),s([c.geometry.coordinates,l.geometry.coordinates])),g=null;m.features.length>0&&((g=m.features[0]).properties.dist=jt(e,g,n),g.properties.location=a+jt(c,g,n)),c.properties.dist<o.properties.dist&&((o=c).properties.index=u,o.properties.location=a),l.properties.dist<o.properties.dist&&((o=l).properties.index=u+1,o.properties.location=a+f),g&&g.properties.dist<o.properties.dist&&((o=g).properties.index=u),a+=f}})),o}function an(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r,i=n["final"];if(!t)throw new Error("start point is required");if(!e)throw new Error("end point is required");return(r=i?sn(q(e),q(t)):sn(q(t),q(e)))>180?-(360-r):r}function sn(t,e){var n=_(t[1]),r=_(e[1]),i=_(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(b(Math.atan2(i,o))+360)%360}function un(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("from point is required");if(!e)throw new Error("to point is required");var i=q(t),o=q(e);return o[0]+=o[0]-i[0]>180?-360:i[0]-o[0]>180?360:0,x(function(t,e,n){var r=n=void 0===n?No:Number(n),i=t[1]*Math.PI/180,o=e[1]*Math.PI/180,a=o-i,s=Math.abs(e[0]-t[0])*Math.PI/180;s>Math.PI&&(s-=2*Math.PI);var u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),c=Math.abs(u)>1e-11?a/u:Math.cos(i);return Math.sqrt(a*a+c*c*s*s)*r}(i,o),"meters",r)}function cn(t,e){return fn(t,"mercator",e)}function ln(t,e){return fn(t,"wgs84",e)}function fn(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&E(t[0])?t="mercator"===e?pn(t):hn(t):(!0!==r&&(t=Ft(t)),O(t,(function(t){var n="mercator"===e?pn(t):hn(t);t[0]=n[0],t[1]=n[1]}))),t}function pn(t){var e=Math.PI/180,n=20037508.342789244,r=[6378137*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,6378137*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return r[0]>n&&(r[0]=n),r[0]<-n&&(r[0]=-n),r[1]>n&&(r[1]=n),r[1]<-n&&(r[1]=-n),r}function hn(t){var e=180/Math.PI;return[t[0]*e/6378137,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/6378137)))*e]}function dn(t,n,i){if(i=i||{},!S(i))throw new Error("options is invalid");if(!t)throw new Error("pt is required");if(Array.isArray(t)?t=r(t):"Point"===t.type?t=e(t):X(t,"Point","point"),!n)throw new Error("line is required");Array.isArray(n)?n=s(n):"LineString"===n.type?n=e(n):X(n,"LineString","line");var o=1/0,a=t.geometry.coordinates;return F(n,(function(t){var e=t.geometry.coordinates[0],n=t.geometry.coordinates[1],s=function(t,e,n,i){var o=i.mercator,a=!0!==o?jt(e,t,i):vn(e,t,i),s=y(!0!==o?de(e,t):an(e,t)),u=y(!0!==o?de(e,n):an(e,n)),c=Math.abs(s-u);if(c>90)return a;var l=(u+180)%360,f=y(!0!==o?de(n,t):an(n,t)),p=Math.abs(f-l);return p>180&&(p=Math.abs(p-360)),p>90?!0!==o?jt(t,n,i):vn(t,n,i):!0!==o?a*Math.sin(_(c)):function(t,e,n,i){var o=0;(Math.abs(t[0])>=180||Math.abs(e[0])>=180||Math.abs(n[0])>=180)&&(o=t[0]>0||e[0]>0||n[0]>0?-180:180);var a=r(n),s=cn([t[0]+o,t[1]]),u=cn([e[0]+o,e[1]]),c=cn([n[0]+o,n[1]]),l=ln(function(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1],s=n[0],u=n[1],c=o-r,l=a-i,f=((s-r)*c+(u-i)*l)/(c*c+l*l);return[r+f*c,i+f*l]}(s,u,c));return 0!==o&&(l[0]-=o),un(a,l,i)}(e,n,t,i)}(a,e,n,i);o>s&&(o=s)})),o}function vn(t,e,n){var r=n.units,i=0;Math.abs(t[0])>=180&&(i=t[0]>0?-180:180),Math.abs(e[0])>=180&&(i=e[0]>0?-180:180);var o=cn([t[0]+i,t[1]]),a=cn([e[0]+i,e[1]]),s=function(t){return t*t},u=s(o[0]-a[0])+s(o[1]-a[1]);return x(Math.sqrt(u),"meters",r)}function mn(t){for(var n=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?c([e(t)]):c([t]):t}(t),i=ve(n),o=!1,a=0;!o&&a<n.features.length;){var s,u=n.features[a].geometry,l=!1;if("Point"===u.type)i.geometry.coordinates[0]===u.coordinates[0]&&i.geometry.coordinates[1]===u.coordinates[1]&&(o=!0);else if("MultiPoint"===u.type){var f=!1;for(s=0;!f&&s<u.coordinates.length;)i.geometry.coordinates[0]===u.coordinates[s][0]&&i.geometry.coordinates[1]===u.coordinates[s][1]&&(o=!0,f=!0),s++}else if("LineString"===u.type)for(s=0;!l&&s<u.coordinates.length-1;)gn(i.geometry.coordinates[0],i.geometry.coordinates[1],u.coordinates[s][0],u.coordinates[s][1],u.coordinates[s+1][0],u.coordinates[s+1][1])&&(l=!0,o=!0),s++;else if("MultiLineString"===u.type)for(var p=0;p<u.coordinates.length;){l=!1,s=0;for(var h=u.coordinates[p];!l&&s<h.length-1;)gn(i.geometry.coordinates[0],i.geometry.coordinates[1],h[s][0],h[s][1],h[s+1][0],h[s+1][1])&&(l=!0,o=!0),s++;p++}else"Polygon"!==u.type&&"MultiPolygon"!==u.type||Mt(i,u)&&(o=!0);a++}if(o)return i;var d=c([]);for(a=0;a<n.features.length;a++)d.features=d.features.concat(ye(n.features[a]).features);return r(Ne(i,d).geometry.coordinates)}function gn(t,e,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}function yn(t){return D(t,(function(t,e){return t+bn(e)}),0)}function bn(t){var e,n=0;switch(t.type){case"Polygon":return _n(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=_n(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(e=0;e<t.geometries.length;e++)n+=bn(t.geometries[e]);return n}}function _n(t){var e=0;if(t&&t.length>0){e+=Math.abs(xn(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(xn(t[n]))}return e}function xn(t){var e,n,r,i,o,a,s=0,u=t.length;if(u>2){for(a=0;a<u;a++)a===u-2?(r=u-2,i=u-1,o=0):a===u-1?(r=u-1,i=0,o=1):(r=a,i=a+1,o=a+2),e=t[r],n=t[i],s+=(wn(t[o][0])-wn(e[0]))*Math.sin(wn(n[1]));s=s*Oa*Oa/2}return s}function wn(t){return t*Math.PI/180}function En(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");if(!t)throw new Error("geojson is required");return z(t,(function(t,n){var r=n.geometry.coordinates;return t+jt(r[0],r[1],e)}),0)}function Sn(t,e,n,r){if(r=r||{},!S(r))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var a,u,c,l=0,f=0;f<i.length&&!(e>=l&&f===i.length-1);f++){if(l>e&&0===o.length){if(!(a=e-l))return o.push(i[f]),s(o);u=de(i[f],i[f-1])-180,c=pe(i[f],a,u,r),o.push(c.geometry.coordinates)}if(l>=n)return(a=n-l)?(u=de(i[f],i[f-1])-180,c=pe(i[f],a,u,r),o.push(c.geometry.coordinates),s(o)):(o.push(i[f]),s(o));if(l>=e&&o.push(i[f]),f===i.length-1)return s(o);l+=jt(i[f],i[f+1],r)}return s(i[i.length-1])}function Cn(t,e,n){var r=(n=n||{}).ignoreEndVertices;if(!S(n))throw new Error("invalid options");if(!t)throw new Error("pt is required");if(!e)throw new Error("line is required");for(var i=q(t),o=G(e),a=0;a<o.length-1;a++){var s=!1;if(r&&(0===a&&(s="start"),a===o.length-2&&(s="end"),0===a&&a+1===o.length-1&&(s="both")),function(t,e,n,r){var i=n[0],o=n[1],a=t[0],s=t[1],u=e[0],c=e[1],l=n[0]-a,f=n[1]-s,p=u-a,h=c-s;return l*h-f*p==0&&(r?"start"===r?Math.abs(p)>=Math.abs(h)?p>0?a<i&&i<=u:u<=i&&i<a:h>0?s<o&&o<=c:c<=o&&o<s:"end"===r?Math.abs(p)>=Math.abs(h)?p>0?a<=i&&i<u:u<i&&i<=a:h>0?s<=o&&o<c:c<o&&o<=s:"both"===r?Math.abs(p)>=Math.abs(h)?p>0?a<i&&i<u:u<i&&i<a:h>0?s<o&&o<c:c<o&&o<s:void 0:Math.abs(p)>=Math.abs(h)?p>0?a<=i&&i<=u:u<=i&&i<=a:h>0?s<=o&&o<=c:c<=o&&o<=s)}(o[a],o[a+1],i,s))return!0}return!1}function Tn(t,e){var n=J(t),r=J(e),i=Y(t),o=Y(e);switch(n){case"Point":switch(r){case"MultiPoint":return function(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(An(e.coordinates[n],t.coordinates)){r=!0;break}return r}(i,o);case"LineString":return Cn(i,o,{ignoreEndVertices:!0});case"Polygon":return Mt(i,o,{ignoreBoundary:!0});default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)An(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(i,o);case"LineString":return function(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!Cn(t.coordinates[r],e))return!1;n||(n=Cn(t.coordinates[r],e,{ignoreEndVertices:!0}))}return n}(i,o);case"Polygon":return function(t,e){for(var n=!0,r=0;r<t.coordinates.length;r++){var i=Mt(t.coordinates[1],e);if(!i){n=!1;break}i=Mt(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&i}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!Cn(t.coordinates[n],e))return!1;return!0}(i,o);case"Polygon":return function(t,e){var n=V(e),r=V(t);if(!On(n,r))return!1;for(var i=!1,o=0;o<t.coordinates.length-1;o++){if(!Mt(t.coordinates[o],e))return!1;if(i||(i=Mt(t.coordinates[o],e,{ignoreBoundary:!0})),!i){var a=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(t.coordinates[o],t.coordinates[o+1]);i=Mt(a,e,{ignoreBoundary:!0})}}return i}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Polygon":return function(t,e){var n=V(t);if(!On(V(e),n))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!Mt(t.coordinates[0][r],e))return!1;return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}}function On(t,e){return!(t[0]>e[0])&&!(t[2]<e[2])&&!(t[1]>e[1])&&!(t[3]<e[3])}function An(t,e){return t[0]===e[0]&&t[1]===e[1]}function kn(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i=n.mask,o=n.properties,a=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(J(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=t[0],u=t[1],l=t[2],f=t[3],p=e/jt([s,u],[l,u],n)*(l-s),h=e/jt([s,u],[s,f],n)*(f-u),d=l-s,v=f-u,m=Math.floor(d/p),g=(v-Math.floor(v/h)*h)/2,y=s+(d-m*p)/2;y<=l;){for(var b=u+g;b<=f;){var _=r([y,b],o);i?Tn(_,i)&&a.push(_):a.push(_),b+=h}y+=p}return c(a)}function Mn(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.precision,r=e.coordinates,i=e.mutate;if(n=void 0===n||null===n||isNaN(n)?6:n,r=void 0===r||null===r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return O(t,(function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)})),t}function Pn(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!Pn(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function In(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function Ln(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!Ln(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function Rn(t,e){var n=[],r=Qe();return N(e,(function(e){if(n.forEach((function(t,e){t.id=e})),n.length){var i=r.search(e);if(i.features.length){var o=Nn(e,i);n=n.filter((function(t){return t.id!==o.id})),r.remove(o),P(Dn(o,e),(function(t){n.push(t),r.insert(t)}))}}else(n=Dn(t,e).features).forEach((function(t){t.bbox||(t.bbox=fe(V(t)))})),r.load(c(n))})),c(n)}function Dn(t,e){var n=[],r=G(t)[0],i=G(t)[t.geometry.coordinates.length-1];if(jn(r,q(e))||jn(i,q(e)))return c([t]);var o=Qe(),a=en(t);o.load(a);var u=o.search(e);if(!u.features.length)return c([t]);var l=Nn(e,u),f=I(a,(function(t,r,i){var o=G(r)[1],a=q(e);return i===l.id?(t.push(a),n.push(s(t)),jn(a,o)?[a]:[a,o]):(t.push(o),t)}),[r]);return f.length>1&&n.push(s(f)),c(n)}function Nn(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,r=1/0;return P(e,(function(e){var i=on(e,t).properties.dist;i<r&&(n=e,r=i)})),n}function jn(t,e){return t[0]===e[0]&&t[1]===e[1]}function Fn(t,e,n,r,i){if(i=i||{},!S(i))throw new Error("options is invalid");var o=i.steps,a=i.units;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if(void 0===n||null===n)throw new Error("bearing1 is required");if(void 0===r||null===r)throw new Error("bearing2 is required");if("object"!=typeof i)throw new Error("options must be an object");o=o||64;var u=zn(n),c=zn(r),l=t.properties;if(u===c)return s(he(t,e,i).geometry.coordinates[0],l);for(var f=u,p=u<c?c:c+360,h=f,d=[],v=0;h<p;)d.push(pe(t,e,h,a).geometry.coordinates),h=f+360*++v/o;return h>p&&d.push(pe(t,e,p,a).geometry.coordinates),s(d,l)}function zn(t){var e=t%360;return e<0&&(e+=360),e}function Bn(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.properties,r=J(t),i=G(t);if(n=n||t.properties||{},!i.length)throw new Error("polygon must contain coordinates");switch(r){case"Polygon":return Un(i,n);case"MultiPolygon":var o=[];return i.forEach((function(t){o.push(Un(t,n))})),c(o);default:throw new Error("geom "+r+" not supported")}}function Un(t,e){return t.length>1?l(t,e):s(t[0],e)}function Vn(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.properties,r=e.autoComplete,i=e.orderCoords;if(!t)throw new Error("lines is required");switch(r=void 0===r||r,i=void 0===i||i,J(t)){case"FeatureCollection":case"GeometryCollection":var o=[];return(t.features?t.features:t.geometries).forEach((function(t){o.push(G(qn(t,{},r,i)))})),p(o,n)}return qn(t,n,r,i)}function qn(t,e,n,r){e=e||t.properties||{};var i=G(t),a=J(t);if(!i.length)throw new Error("line must contain coordinates");switch(a){case"LineString":return n&&(i=Gn(i)),o([i],e);case"MultiLineString":var u=[],c=0;return i.forEach((function(t){if(n&&(t=Gn(t)),r){var e=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.abs(e-r)*Math.abs(n-i)}(V(s(t)));e>c?(u.unshift(t),c=e):u.push(t)}else u.push(t)})),o(u,e);default:throw new Error("geometry type "+a+" is not supported")}}function Gn(t){var e=t[0],n=e[0],r=e[1],i=t[t.length-1],o=i[0],a=i[1];return n===o&&r===a||t.push(e),t}function Hn(t,e,n){var r,i,o,a,s,u=t.length,c=Xn(t[0],e),l=[];for(n||(n=[]),r=1;r<u;r++){for(i=t[r-1],a=s=Xn(o=t[r],e);;){if(!(c|a)){l.push(i),a!==s?(l.push(o),r<u-1&&(n.push(l),l=[])):r===u-1&&l.push(o);break}if(c&a)break;c?c=Xn(i=Wn(i,o,c,e),e):a=Xn(o=Wn(i,o,a,e),e)}c=s}return l.length&&n.push(l),n}function Wn(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function Xn(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function Zn(t,e){for(var n=[],r=0;r<t.length;r++){var i=Fa.polygon(t[r],e);i.length>0&&(i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]||i.push(i[0]),i.length>=4&&n.push(i))}return n}function Yn(t){return"[object Arguments]"===Object.prototype.toString.call(t)}function Kn(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?(n.strict,t===e):function(t,e,n){var r,i;if(Jn(t)||Jn(e))return!1;if(t.prototype!==e.prototype)return!1;if(Yn(t))return!!Yn(e)&&(t=za.call(t),e=za.call(e),Kn(t,e,n));if(Qn(t)){if(!Qn(e))return!1;if(t.length!==e.length)return!1;for(r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}try{var o=Object.keys(t),a=Object.keys(e)}catch(t){return!1}if(o.length!==a.length)return!1;for(o.sort(),a.sort(),r=o.length-1;r>=0;r--)if(o[r]!==a[r])return!1;for(r=o.length-1;r>=0;r--)if(i=o[r],!Kn(t[i],e[i],n))return!1;return typeof t==typeof e}(t,e,n))}function Jn(t){return null===t||void 0===t}function Qn(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&"function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0])}function $n(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r,i=n.tolerance||0,o=[],a=Qe();return a.load(en(t)),F(e,(function(t){var e=!1;P(a.search(t),(function(n){if(!1===e){var o=G(t).sort(),a=G(n).sort();Kn(o,a)||(0===i?Cn(o[0],n)&&Cn(o[1],n):on(n,o[0]).properties.dist<=i&&on(n,o[1]).properties.dist<=i)?(e=!0,r=r?tr(r,t):t):(0===i?Cn(a[0],t)&&Cn(a[1],t):on(t,a[0]).properties.dist<=i&&on(t,a[1]).properties.dist<=i)&&(r=r?tr(r,n):n)}})),!1===e&&r&&(o.push(r),r=void 0)})),r&&o.push(r),c(o)}function tr(t,e){var n=G(e),r=G(t),i=r[0],o=r[r.length-1],a=t.geometry.coordinates;return Kn(n[0],i)?a.unshift(n[1]):Kn(n[0],o)?a.push(n[1]):Kn(n[1],i)?a.unshift(n[0]):Kn(n[1],o)&&a.push(n[0]),t}function er(t){var e=t%360;return e<0&&(e+=360),e}function nr(t,e,n,i){if(i=i||{},!S(i))throw new Error("options is invalid");var o=i.units,a=i.properties;if(!t)throw new Error("origin is required");if(void 0===e||null===e)throw new Error("distance is required");if(void 0===n||null===n)throw new Error("bearing is required");if(!(e>=0))throw new Error("distance must be greater than 0");var s=x(e,o,"meters"),u=q(t),c=function(t,e,n,r){r=void 0===r?No:Number(r);var i=e/r,o=t[0]*Math.PI/180,a=_(t[1]),s=_(n),u=i*Math.cos(s),c=a+u;Math.abs(c)>Math.PI/2&&(c=c>0?Math.PI-c:-Math.PI-c);var l=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),f=Math.abs(l)>1e-11?u/l:Math.cos(a),p=i*Math.sin(s)/f;return[(180*(o+p)/Math.PI+540)%360-180,180*c/Math.PI]}(u,s,n);return c[0]+=c[0]-u[0]>180?-360:u[0]-c[0]>180?360:0,r(c,a)}function rr(t,e,n,r,i,o){for(var a=0;a<t.length;a++){var s=t[a],u=t[a+1];a===t.length-1&&(u=t[0]),r=ir(s,u,e),n<=0&&r>0?function(t,e,n){return ir(t,e,n)<0}(e,s,i)||(i=s):n>0&&r<=0&&(function(t,e,n){return ir(t,e,n)>0}(e,s,o)||(o=s)),n=r}return[i,o]}function ir(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function or(t){if(!t)throw new Error("line is required");var e=t.geometry?t.geometry.type:t.type;if(!Array.isArray(t)&&"LineString"!==e)throw new Error("geometry must be a LineString");for(var n,r,i=G(t),o=0,a=1;a<i.length;)n=r||i[0],o+=((r=i[a])[0]-n[0])*(r[1]+n[1]),a++;return o>0}function ar(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return R(t,(function(t){ar(t,e)})),t;case"LineString":return sr(G(t),e),t;case"Polygon":return ur(G(t),e),t;case"MultiLineString":return G(t).forEach((function(t){sr(t,e)})),t;case"MultiPolygon":return G(t).forEach((function(t){ur(t,e)})),t;case"Point":case"MultiPoint":return t}}function sr(t,e){or(t)===e&&t.reverse()}function ur(t,e){or(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)or(t[n])===e&&t[n].reverse()}function cr(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;Z(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return P(t,(function(t){var e=G(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){var e=n[t],r=e.sort((function(t,e){return G(t)[0]-G(e)[0]}));return r})).sort((function(t,n){return e?G(t[0])[1]-G(n[0])[1]:G(n[0])[1]-G(t[0])[1]}))}(t,r),a=[],s=0;s<o.length;s++){for(var u=o[s],c=[],l=0;l<u.length;l++){var f=u[l];f.properties[n]?c.push(f.properties[n]):c.push(0),!0===i&&(f.properties.matrixPosition=[s,l])}a.push(c)}return a}function lr(t,e,n,r){r=r||{};for(var i=Object.keys(Ba),o=0;o<i.length;o++){var a=i[o],s=r[a];s=void 0!==s&&null!==s?s:Ba[a],Ua[a]=s}Ua.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var u,c=function(t,e,n){for(var r=t.length-1,i=t[0].length-1,o={rows:r,cols:i,cells:[]},a=e+Math.abs(n),s=0;s<r;++s){o.cells[s]=[];for(var u=0;u<i;++u){var c=0,l=t[s+1][u],f=t[s+1][u+1],p=t[s][u+1],h=t[s][u];if(!(isNaN(l)||isNaN(f)||isNaN(p)||isNaN(h))){c|=l<e?0:l>a?128:64,c|=f<e?0:f>a?32:16,c|=p<e?0:p>a?8:4;var d=+(c|=h<e?0:h>a?2:1),v=0;if(17===c||18===c||33===c||34===c||38===c||68===c||72===c||98===c||102===c||132===c||136===c||137===c||152===c||153===c){var m=(l+f+p+h)/4;v=m>a?2:m<e?0:1,34===c?1===v?c=35:0===v&&(c=136):136===c?1===v?(c=35,v=4):0===v&&(c=34):17===c?1===v?(c=155,v=4):0===v&&(c=153):68===c?1===v?(c=103,v=4):0===v&&(c=102):153===c?1===v&&(c=155):102===c?1===v&&(c=103):152===c?v<2&&(c=156,v=1):137===c?v<2&&(c=139,v=1):98===c?v<2&&(c=99,v=1):38===c?v<2&&(c=39,v=1):18===c?v>0?(c=156,v=4):c=152:33===c?v>0?(c=139,v=4):c=137:72===c?v>0?(c=99,v=4):c=98:132===c&&(v>0?(c=39,v=4):c=38)}if(0!=c&&170!=c){var g,y,b,_,x,w,E,S;g=y=b=_=x=w=E=S=.5;var C=[];1===c?(b=1-fr(e,p,h),S=1-fr(e,l,h),C.push(Os[c])):169===c?(b=fr(a,h,p),S=fr(a,h,l),C.push(Os[c])):4===c?(w=1-fr(e,f,p),_=fr(e,h,p),C.push(Cs[c])):166===c?(w=fr(a,p,f),_=1-fr(a,p,h),C.push(Cs[c])):16===c?(x=fr(e,p,f),y=fr(e,l,f),C.push(Ss[c])):154===c?(x=1-fr(a,f,p),y=1-fr(a,f,l),C.push(Ss[c])):64===c?(E=fr(e,h,l),g=1-fr(e,f,l),C.push(ks[c])):106===c?(E=1-fr(a,l,h),g=fr(a,l,f),C.push(ks[c])):168===c?(_=fr(a,h,p),b=fr(e,h,p),S=fr(e,h,l),E=fr(a,h,l),C.push(Ts[c]),C.push(Os[c])):2===c?(_=1-fr(e,p,h),b=1-fr(a,p,h),S=1-fr(a,l,h),E=1-fr(e,l,h),C.push(Ts[c]),C.push(Os[c])):162===c?(x=fr(a,p,f),w=fr(e,p,f),_=1-fr(e,p,h),b=1-fr(a,p,h),C.push(Ts[c]),C.push(Os[c])):8===c?(x=1-fr(e,f,p),w=1-fr(a,f,p),_=fr(a,h,p),b=fr(e,h,p),C.push(Ss[c]),C.push(Cs[c])):138===c?(x=1-fr(e,f,p),w=1-fr(a,f,p),g=1-fr(a,f,l),y=1-fr(e,f,l),C.push(Ss[c]),C.push(Cs[c])):32===c?(x=fr(a,p,f),w=fr(e,p,f),g=fr(e,l,f),y=fr(a,l,f),C.push(Ss[c]),C.push(Cs[c])):42===c?(S=1-fr(a,l,h),E=1-fr(e,l,h),g=fr(e,l,f),y=fr(a,l,f),C.push(As[c]),C.push(ks[c])):128===c&&(S=fr(e,h,l),E=fr(a,h,l),g=1-fr(a,f,l),y=1-fr(e,f,l),C.push(As[c]),C.push(ks[c])),5===c?(w=1-fr(e,f,p),S=1-fr(e,l,h),C.push(Cs[c])):165===c?(w=fr(a,p,f),S=fr(a,h,l),C.push(Cs[c])):20===c?(_=fr(e,h,p),y=fr(e,l,f),C.push(Ts[c])):150===c?(_=1-fr(a,p,h),y=1-fr(a,f,l),C.push(Ts[c])):80===c?(x=fr(e,p,f),E=fr(e,h,l),C.push(Ss[c])):90===c?(x=1-fr(a,f,p),E=1-fr(a,l,h),C.push(Ss[c])):65===c?(b=1-fr(e,p,h),g=1-fr(e,f,l),C.push(Os[c])):105===c?(b=fr(a,h,p),g=fr(a,l,f),C.push(Os[c])):160===c?(x=fr(a,p,f),w=fr(e,p,f),S=fr(e,h,l),E=fr(a,h,l),C.push(Ss[c]),C.push(Cs[c])):10===c?(x=1-fr(e,f,p),w=1-fr(a,f,p),S=1-fr(a,l,h),E=1-fr(e,l,h),C.push(Ss[c]),C.push(Cs[c])):130===c?(_=1-fr(e,p,h),b=1-fr(a,p,h),g=1-fr(a,f,l),y=1-fr(e,f,l),C.push(Ts[c]),C.push(Os[c])):40===c?(_=fr(a,h,p),b=fr(e,h,p),g=fr(e,l,f),y=fr(a,l,f),C.push(Ts[c]),C.push(Os[c])):101===c?(w=fr(a,p,f),g=fr(a,l,f),C.push(Cs[c])):69===c?(w=1-fr(e,f,p),g=1-fr(e,f,l),C.push(Cs[c])):149===c?(S=fr(a,h,l),y=1-fr(a,f,l),C.push(As[c])):21===c?(S=1-fr(e,l,h),y=fr(e,l,f),C.push(As[c])):86===c?(_=1-fr(a,p,h),E=1-fr(a,l,h),C.push(Ts[c])):84===c?(_=fr(e,h,p),E=fr(e,h,l),C.push(Ts[c])):89===c?(x=1-fr(a,f,p),b=fr(a,h,p),C.push(Os[c])):81===c?(x=fr(e,p,f),b=1-fr(e,p,h),C.push(Os[c])):96===c?(x=fr(a,p,f),w=fr(e,p,f),E=fr(e,h,l),g=fr(a,l,f),C.push(Ss[c]),C.push(Cs[c])):74===c?(x=1-fr(e,f,p),w=1-fr(a,f,p),E=1-fr(a,l,h),g=1-fr(e,f,l),C.push(Ss[c]),C.push(Cs[c])):24===c?(x=1-fr(a,f,p),_=fr(a,h,p),b=fr(e,h,p),y=fr(e,l,f),C.push(Ss[c]),C.push(Os[c])):146===c?(x=fr(e,p,f),_=1-fr(e,p,h),b=1-fr(a,p,h),y=1-fr(a,f,l),C.push(Ss[c]),C.push(Os[c])):6===c?(w=1-fr(e,f,p),_=1-fr(a,p,h),S=1-fr(a,l,h),E=1-fr(e,l,h),C.push(Cs[c]),C.push(Ts[c])):164===c?(w=fr(a,p,f),_=fr(e,h,p),S=fr(e,h,l),E=fr(a,h,l),C.push(Cs[c]),C.push(Ts[c])):129===c?(b=1-fr(e,p,h),S=fr(a,h,l),g=1-fr(a,f,l),y=1-fr(e,f,l),C.push(Os[c]),C.push(As[c])):41===c?(b=fr(a,h,p),S=1-fr(e,l,h),g=fr(e,l,f),y=fr(a,l,f),C.push(Os[c]),C.push(As[c])):66===c?(_=1-fr(e,p,h),b=1-fr(a,p,h),E=1-fr(a,l,h),g=1-fr(e,f,l),C.push(Ts[c]),C.push(Os[c])):104===c?(_=fr(a,h,p),b=fr(e,h,p),E=fr(e,h,l),g=fr(a,l,f),C.push(Os[c]),C.push(Ms[c])):144===c?(x=fr(e,p,f),S=fr(e,h,l),E=fr(a,h,l),y=1-fr(a,f,l),C.push(Ss[c]),C.push(ks[c])):26===c?(x=1-fr(a,f,p),S=1-fr(a,l,h),E=1-fr(e,l,h),y=fr(e,l,f),C.push(Ss[c]),C.push(ks[c])):36===c?(w=fr(a,p,f),_=fr(e,h,p),g=fr(e,l,f),y=fr(a,l,f),C.push(Cs[c]),C.push(Ts[c])):134===c?(w=1-fr(e,f,p),_=1-fr(a,p,h),g=1-fr(a,f,l),y=1-fr(e,f,l),C.push(Cs[c]),C.push(Ts[c])):9===c?(x=1-fr(e,f,p),w=1-fr(a,f,p),b=fr(a,h,p),S=1-fr(e,l,h),C.push(Ss[c]),C.push(Cs[c])):161===c?(x=fr(a,p,f),w=fr(e,p,f),b=1-fr(e,p,h),S=fr(a,h,l),C.push(Ss[c]),C.push(Cs[c])):37===c?(w=fr(a,p,f),S=1-fr(e,l,h),g=fr(e,l,f),y=fr(a,l,f),C.push(Cs[c]),C.push(As[c])):133===c?(w=1-fr(e,f,p),S=fr(a,h,l),g=1-fr(a,f,l),y=1-fr(e,f,l),C.push(Cs[c]),C.push(As[c])):148===c?(_=fr(e,h,p),S=fr(e,h,l),E=fr(a,h,l),y=1-fr(a,f,l),C.push(Ts[c]),C.push(ks[c])):22===c?(_=1-fr(a,p,h),S=1-fr(a,l,h),E=1-fr(e,l,h),y=fr(e,l,f),C.push(Ts[c]),C.push(ks[c])):82===c?(x=fr(e,p,f),_=1-fr(e,p,h),b=1-fr(a,p,h),E=1-fr(a,l,h),C.push(Ss[c]),C.push(Os[c])):88===c?(x=1-fr(a,f,p),_=fr(a,h,p),b=fr(e,h,p),E=fr(e,h,l),C.push(Ss[c]),C.push(Os[c])):73===c?(x=1-fr(e,f,p),w=1-fr(a,f,p),b=fr(a,h,p),g=1-fr(e,f,l),C.push(Ss[c]),C.push(Cs[c])):97===c?(x=fr(a,p,f),w=fr(e,p,f),b=1-fr(e,p,h),g=fr(a,l,f),C.push(Ss[c]),C.push(Cs[c])):145===c?(x=fr(e,p,f),b=1-fr(e,p,h),S=fr(a,h,l),y=1-fr(a,f,l),C.push(Ss[c]),C.push(As[c])):25===c?(x=1-fr(a,f,p),b=fr(a,h,p),S=1-fr(e,l,h),y=fr(e,l,f),C.push(Ss[c]),C.push(As[c])):70===c?(w=1-fr(e,f,p),_=1-fr(a,p,h),E=1-fr(a,l,h),g=1-fr(e,f,l),C.push(Cs[c]),C.push(Ts[c])):100===c?(w=fr(a,p,f),_=fr(e,h,p),E=fr(e,h,l),g=fr(a,l,f),C.push(Cs[c]),C.push(Ts[c])):34===c?(0===v?(x=1-fr(e,f,p),w=1-fr(a,f,p),_=fr(a,h,p),b=fr(e,h,p),S=fr(e,h,l),E=fr(a,h,l),g=1-fr(a,f,l),y=1-fr(e,f,l)):(x=fr(a,p,f),w=fr(e,p,f),_=1-fr(e,p,h),b=1-fr(a,p,h),S=1-fr(a,l,h),E=1-fr(e,l,h),g=fr(e,l,f),y=fr(a,l,f)),C.push(Ss[c]),C.push(Cs[c]),C.push(As[c]),C.push(ks[c])):35===c?(4===v?(x=1-fr(e,f,p),w=1-fr(a,f,p),_=fr(a,h,p),b=fr(e,h,p),S=fr(e,h,l),E=fr(a,h,l),g=1-fr(a,f,l),y=1-fr(e,f,l)):(x=fr(a,p,f),w=fr(e,p,f),_=1-fr(e,p,h),b=1-fr(a,p,h),S=1-fr(a,l,h),E=1-fr(e,l,h),g=fr(e,l,f),y=fr(a,l,f)),C.push(Ss[c]),C.push(Cs[c]),C.push(Os[c]),C.push(ks[c])):136===c?(0===v?(x=fr(a,p,f),w=fr(e,p,f),_=1-fr(e,p,h),b=1-fr(a,p,h),S=1-fr(a,l,h),E=1-fr(e,l,h),g=fr(e,l,f),y=fr(a,l,f)):(x=1-fr(e,f,p),w=1-fr(a,f,p),_=fr(a,h,p),b=fr(e,h,p),S=fr(e,h,l),E=fr(a,h,l),g=1-fr(a,f,l),y=1-fr(e,f,l)),C.push(Ss[c]),C.push(Cs[c]),C.push(As[c]),C.push(ks[c])):153===c?(0===v?(x=fr(e,p,f),b=1-fr(e,p,h),S=1-fr(e,l,h),y=fr(e,l,f)):(x=1-fr(a,f,p),b=fr(a,h,p),S=fr(a,h,l),y=1-fr(a,f,l)),C.push(Ss[c]),C.push(Os[c])):102===c?(0===v?(w=1-fr(e,f,p),_=fr(e,h,p),E=fr(e,h,l),g=1-fr(e,f,l)):(w=fr(a,p,f),_=1-fr(a,p,h),E=1-fr(a,l,h),g=fr(a,l,f)),C.push(Cs[c]),C.push(ks[c])):155===c?(4===v?(x=fr(e,p,f),b=1-fr(e,p,h),S=1-fr(e,l,h),y=fr(e,l,f)):(x=1-fr(a,f,p),b=fr(a,h,p),S=fr(a,h,l),y=1-fr(a,f,l)),C.push(Ss[c]),C.push(As[c])):103===c?(4===v?(w=1-fr(e,f,p),_=fr(e,h,p),E=fr(e,h,l),g=1-fr(e,f,l)):(w=fr(a,p,f),_=1-fr(a,p,h),E=1-fr(a,l,h),g=fr(a,l,f)),C.push(Cs[c]),C.push(Ts[c])):152===c?(0===v?(x=fr(e,p,f),_=1-fr(e,p,h),b=1-fr(a,p,h),S=1-fr(a,l,h),E=1-fr(e,l,h),y=fr(e,l,f)):(x=1-fr(a,f,p),_=fr(a,h,p),b=fr(e,h,p),S=fr(e,h,l),E=fr(a,h,l),y=1-fr(a,f,l)),C.push(Ss[c]),C.push(Ts[c]),C.push(Os[c])):156===c?(4===v?(x=fr(e,p,f),_=1-fr(e,p,h),b=1-fr(a,p,h),S=1-fr(a,l,h),E=1-fr(e,l,h),y=fr(e,l,f)):(x=1-fr(a,f,p),_=fr(a,h,p),b=fr(e,h,p),S=fr(e,h,l),E=fr(a,h,l),y=1-fr(a,f,l)),C.push(Ss[c]),C.push(Os[c]),C.push(ks[c])):137===c?(0===v?(x=fr(a,p,f),w=fr(e,p,f),b=1-fr(e,p,h),S=1-fr(e,l,h),g=fr(e,l,f),y=fr(a,l,f)):(x=1-fr(e,f,p),w=1-fr(a,f,p),b=fr(a,h,p),S=fr(a,h,l),g=1-fr(a,f,l),y=1-fr(e,f,l)),C.push(Ss[c]),C.push(Cs[c]),C.push(Os[c])):139===c?(4===v?(x=fr(a,p,f),w=fr(e,p,f),b=1-fr(e,p,h),S=1-fr(e,l,h),g=fr(e,l,f),y=fr(a,l,f)):(x=1-fr(e,f,p),w=1-fr(a,f,p),b=fr(a,h,p),S=fr(a,h,l),g=1-fr(a,f,l),y=1-fr(e,f,l)),C.push(Ss[c]),C.push(Cs[c]),C.push(As[c])):98===c?(0===v?(x=1-fr(e,f,p),w=1-fr(a,f,p),_=fr(a,h,p),b=fr(e,h,p),E=fr(e,h,l),g=1-fr(e,f,l)):(x=fr(a,p,f),w=fr(e,p,f),_=1-fr(e,p,h),b=1-fr(a,p,h),E=1-fr(a,l,h),g=fr(a,l,f)),C.push(Ss[c]),C.push(Cs[c]),C.push(ks[c])):99===c?(4===v?(x=1-fr(e,f,p),w=1-fr(a,f,p),_=fr(a,h,p),b=fr(e,h,p),E=fr(e,h,l),g=1-fr(e,f,l)):(x=fr(a,p,f),w=fr(e,p,f),_=1-fr(e,p,h),b=1-fr(a,p,h),E=1-fr(a,l,h),g=fr(a,l,f)),C.push(Ss[c]),C.push(Cs[c]),C.push(Os[c])):38===c?(0===v?(w=1-fr(e,f,p),_=fr(e,h,p),S=fr(e,h,l),E=fr(a,h,l),g=1-fr(a,f,l),y=1-fr(e,f,l)):(w=fr(a,p,f),_=1-fr(a,p,h),S=1-fr(a,l,h),E=1-fr(e,l,h),g=fr(e,l,f),y=fr(a,l,f)),C.push(Cs[c]),C.push(As[c]),C.push(ks[c])):39===c?(4===v?(w=1-fr(e,f,p),_=fr(e,h,p),S=fr(e,h,l),E=fr(a,h,l),g=1-fr(a,f,l),y=1-fr(e,f,l)):(w=fr(a,p,f),_=1-fr(a,p,h),S=1-fr(a,l,h),E=1-fr(e,l,h),g=fr(e,l,f),y=fr(a,l,f)),C.push(Cs[c]),C.push(Ts[c]),C.push(ks[c])):85===c&&(x=1,w=0,_=1,b=0,S=0,E=1,g=0,y=1),(g<0||g>1||y<0||y>1||x<0||x>1||_<0||_>1||S<0||S>1||E<0||E>1)&&console.log("MarchingSquaresJS-isoBands: "+c+" "+d+" "+l+","+f+","+p+","+h+" "+v+" "+g+" "+y+" "+x+" "+w+" "+_+" "+b+" "+S+" "+E),o.cells[s][u]={cval:c,cval_real:d,flipped:v,topleft:g,topright:y,righttop:x,rightbottom:w,bottomright:_,bottomleft:b,leftbottom:S,lefttop:E,edges:C}}}}}return o}(t,e,n);return Ua.polygons?(Ua.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=function(t){var e=[],n=0;return t.cells.forEach((function(t,r){t.forEach((function(t,i){if(void 0!==t){var o=Is[t.cval](t);"object"==typeof o&&pr(o)?"object"==typeof o[0]&&pr(o[0])?"object"==typeof o[0][0]&&pr(o[0][0])?o.forEach((function(t){t.forEach((function(t){t[0]+=i,t[1]+=r})),e[n++]=t})):(o.forEach((function(t){t[0]+=i,t[1]+=r})),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}}))})),e}(c)):(Ua.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),u=function(t){for(var e=[],n=t.rows,r=t.cols,i=[],o=0;o<n;o++)for(var a=0;a<r;a++)if(void 0!==t.cells[o][a]&&t.cells[o][a].edges.length>0){var s=t.cells[o][a],u=function(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],n=t.cval_real;switch(e){case 0:return n&qa?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return n&Ga?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return n&Ga?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return n&Ha?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&qa?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return n&Ga?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return n&Ga?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return n&Ha?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return n&Ga?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return n&Ha?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return n&Ha?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&Va?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return n&Ga?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return n&Ha?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return n&Ha?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&Va?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return n&Ga?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&Va?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return n&Ha?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&Va?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&Va?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&qa?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&Va?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&qa?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}(s),c=null,l=a,f=o;null!==u&&i.push([u.p[0]+l,u.p[1]+f]);do{if(null===(c=function(t,e,n,r){var i,o,a,s,u,c=t.cval;switch(e){case-1:switch(r){case 0:i=Cs[c],a=es[c],s=ns[c],u=rs[c];break;default:i=Ss[c],a=Qa[c],s=$a[c],u=ts[c]}break;case 1:switch(r){case 0:i=As[c],a=hs[c],s=ds[c],u=vs[c];break;default:i=ks[c],a=ls[c],s=fs[c],u=ps[c]}break;default:switch(n){case-1:switch(r){case 0:i=Ms[c],a=Wa[c],s=Xa[c],u=Za[c];break;default:i=Ps[c],a=Ya[c],s=Ka[c],u=Ja[c]}break;case 1:switch(r){case 0:i=Os[c],a=is[c],s=os[c],u=as[c];break;default:i=Ts[c],a=ss[c],s=us[c],u=cs[c]}}}if(o=t.edges.indexOf(i),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),c=t.cval_real,i){case 0:c&qa?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:c&Ga?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:c&Ga?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:c&Ha?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:c&qa?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:c&Ga?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:c&Ga?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:c&Ha?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:c&Ga?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:c&Ha?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:c&Ha?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:c&Va?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:c&Ga?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:c&Ha?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:c&Ha?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:c&Va?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:c&Ga?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:c&Va?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:c&Ha?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:c&Va?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:c&Va?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:c&qa?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:c&Va?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:c&qa?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==a&&void 0!==s&&void 0!==u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+a+" "+s+" "+u)),{p:[e,n],x:a,y:s,o:u}}(t.cells[f][l],u.x,u.y,u.o)))break;if(i.push([c.p[0]+l,c.p[1]+f]),l+=c.x,f+=c.y,u=c,f<0||f>=n||l<0||l>=r||void 0===t.cells[f][l]){l-=c.x,f-=c.y;var p=function(t,e,n,r,i,o){for(var a=t.cells[n][e],s=a.cval_real,u=e+r,c=n+i,l=[],f=!1;!f;){if(void 0===t.cells[c]||void 0===t.cells[c][u])if(c-=i,u-=r,a=t.cells[c][u],s=a.cval_real,-1===i)if(0===o)if(s&Ha)l.push([u,c]),r=-1,i=0,o=0;else{if(!(s&Ga)){l.push([u+a.bottomright,c]),r=0,i=1,o=1,f=!0;break}l.push([u+1,c]),r=1,i=0,o=0}else{if(!(s&Ha)){if(s&Ga){l.push([u+a.bottomright,c]),r=0,i=1,o=1,f=!0;break}l.push([u+a.bottomleft,c]),r=0,i=1,o=0,f=!0;break}l.push([u,c]),r=-1,i=0,o=0}else if(1===i)if(0===o){if(!(s&qa)){if(s&Va){l.push([u+a.topleft,c+1]),r=0,i=-1,o=0,f=!0;break}l.push([u+a.topright,c+1]),r=0,i=-1,o=1,f=!0;break}l.push([u+1,c+1]),r=1,i=0,o=1}else l.push([u+1,c+1]),r=1,i=0,o=1;else if(-1===r)if(0===o){if(!(s&Va)){if(s&Ha){l.push([u,c+a.leftbottom]),r=1,i=0,o=0,f=!0;break}l.push([u,c+a.lefttop]),r=1,i=0,o=1,f=!0;break}l.push([u,c+1]),r=0,i=1,o=0}else{if(!(s&Va)){console.log("MarchingSquaresJS-isoBands: wtf");break}l.push([u,c+1]),r=0,i=1,o=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(s&Ga)){l.push([u+1,c+a.rightbottom]),r=-1,i=0,o=0,f=!0;break}l.push([u+1,c]),r=0,i=-1,o=1}else{if(!(s&Ga)){if(s&qa){l.push([u+1,c+a.righttop]),r=-1,i=0,o=1;break}l.push([u+1,c+a.rightbottom]),r=-1,i=0,o=0,f=!0;break}l.push([u+1,c]),r=0,i=-1,o=1}}else if(a=t.cells[c][u],s=a.cval_real,-1===r)if(0===o)if(void 0!==t.cells[c-1]&&void 0!==t.cells[c-1][u])r=0,i=-1,o=1;else{if(!(s&Ha)){l.push([u+a.bottomright,c]),r=0,i=1,o=1,f=!0;break}l.push([u,c])}else{if(!(s&Va)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+c);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[c+1]&&void 0!==t.cells[c+1][u])r=0,i=1,o=0;else{if(!(s&qa)){l.push([u+a.topleft,c+1]),r=0,i=-1,o=0,f=!0;break}l.push([u+1,c+1]),r=1,i=0,o=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[c][u+1])r=1,i=0,o=1;else{if(!(s&Ga)){l.push([u+1,c+a.righttop]),r=-1,i=0,o=1,f=!0;break}l.push([u+1,c]),r=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[c][u-1])r=-1,i=0,o=0;else{if(!(s&Va)){l.push([u,c+a.leftbottom]),r=1,i=0,o=0,f=!0;break}l.push([u,c+1]),r=0,i=1,o=0}}if(u+=r,c+=i,u===e&&c===n)break}return{path:l,i:u,j:c,x:r,y:i,o:o}}(t,l,f,c.x,c.y,c.o);if(null===p)break;p.path.forEach((function(t){i.push(t)})),l=p.i,f=p.j,u=p}}while(void 0!==t.cells[f][l]&&t.cells[f][l].edges.length>0);e.push(i),i=[],t.cells[o][a].edges.length>0&&a--}return e}(c)),"function"==typeof Ua.successCallback&&Ua.successCallback(u),u}function fr(t,e,n){return(t-e)/(n-e)}function pr(t){return t.constructor.toString().indexOf("Array")>-1}function hr(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.pivot,i=n.mutate;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("angle is required");return 0===e||(r||(r=me(t)),!1!==i&&void 0!==i||(t=Ft(t)),O(t,(function(t){var n=an(r,t)+e,i=un(r,t),o=G(nr(r,i,n));t[0]=o[0],t[1]=o[1]}))),t}function dr(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.origin,i=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(r)||"object"==typeof r;return!0!==i&&(t=Ft(t)),"FeatureCollection"!==t.type||o?vr(t,e,r):(P(t,(function(n,i){t.features[i]=vr(n,e,r)})),t)}function vr(t,e,n){var i="Point"===J(t);return n=function(t,e){if(void 0!==e&&null!==e||(e="centroid"),Array.isArray(e)||"object"==typeof e)return q(e);var n=t.bbox?t.bbox:V(t),i=n[0],o=n[1],a=n[2],s=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return r([i,o]);case"se":case"southeast":case"eastsouth":case"bottomright":return r([a,o]);case"nw":case"northwest":case"westnorth":case"topleft":return r([i,s]);case"ne":case"northeast":case"eastnorth":case"topright":return r([a,s]);case"center":return ve(t);case void 0:case null:case"centroid":return me(t);default:throw new Error("invalid origin")}}(t,n),1===e||i||O(t,(function(t){var r=un(n,t),i=an(n,t),o=G(nr(n,r*e,i));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)})),t}function mr(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function gr(t,e){return t[0]*e[1]-e[0]*t[1]}function yr(t,e){return!function(t,e){return 0===gr(mr(t),mr(e))}(t,e)&&function(t,e){var n=t[0],r=mr(t),i=e[0],o=mr(e),a=gr(r,o);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(n,function(t,e){return[t*e[0],t*e[1]]}(gr(function(t,e){return[t[0]-e[0],t[1]-e[1]]}(i,n),o)/a,r))}(t,e)}function br(t,e,n){var r=[],i=g(e,n),o=G(t),a=[];return o.forEach((function(t,e){if(e!==o.length-1){var n=function(t,e,n){var r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),i=t[0]+n*(e[1]-t[1])/r,o=e[0]+n*(e[1]-t[1])/r,a=t[1]+n*(t[0]-e[0])/r,s=e[1]+n*(t[0]-e[0])/r;return[[i,a],[o,s]]}(t,o[e+1],i);if(r.push(n),e>0){var s=r[e-1],u=yr(n,s);!1!==u&&(s[1]=u,n[0]=u),a.push(s[0]),e===o.length-2&&(a.push(n[0]),a.push(n[1]))}2===o.length&&(a.push(n[0]),a.push(n[1]))}})),s(a,t.properties)}function _r(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-e[0],a=n[1]-e[1];return Math.sign(r*a-o*i)}function xr(t,e){return e.geometry.coordinates[0].every((function(e){return Mt(r(e),t)}))}function wr(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(function(t,e,n){var r=n[0]-t[0],i=n[1]-t[1],o=e[0]-t[0],a=e[1]-t[1];return r*a-i*o==0&&(Math.abs(o)>=Math.abs(a)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function Er(t,e){return nn(e,Bn(t)).features.length>0}function Sr(t,e){return!(t[0]>e[0])&&!(t[2]<e[2])&&!(t[1]>e[1])&&!(t[3]<e[3])}function Cr(t,e){return t[0]===e[0]&&t[1]===e[1]}function Tr(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&!n&&!r;){for(var a=0;a<e.coordinates.length-1;a++){var s=!0;0!==a&&a!==e.coordinates.length-2||(s=!1),kr(e.coordinates[a],e.coordinates[a+1],t.coordinates[o],s)?n=!0:r=!0}o++}return n&&r}function Or(t,e){return nn(t,Bn(e)).features.length>0}function Ar(t,e){for(var n=!1,i=!1,o=t.coordinates[0].length,a=0;a<o&&n&&i;)Mt(r(t.coordinates[0][a]),e)?n=!0:i=!0,a++;return i&&i}function kr(t,e,n,r){var i=n[0]-t[0],o=n[1]-t[1],a=e[0]-t[0],s=e[1]-t[1];return 0==i*s-o*a&&(r?Math.abs(a)>=Math.abs(s)?a>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(a)>=Math.abs(s)?a>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:s>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}function Mr(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function Pr(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function Ir(t,e){return Bs(t,e,{strict:!0})}function Lr(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");var n=J(t);if(n!==J(e))throw new Error("features must be of the same type");if("Point"===n)throw new Error("Point geometry not supported");if(new Vs({precision:6}).compare(t,e))return!1;var r=0;switch(n){case"MultiPoint":var i=L(t),o=L(e);i.forEach((function(t){o.forEach((function(e){t[0]===e[0]&&t[1]===e[1]&&r++}))}));break;case"LineString":case"MultiLineString":F(t,(function(t){F(e,(function(e){$n(t,e).features.length&&r++}))}));break;case"Polygon":case"MultiPolygon":F(t,(function(t){F(e,(function(e){nn(t,e).features.length&&r++}))}))}return r>0}function Rr(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}function Dr(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function Nr(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}function jr(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new Fr(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function Fr(t,e,n){this.x=t,this.y=e,this.weight=n}function zr(t){this.content=[],this.scoreFunction=t}function Br(t){return t[0]}function Ur(t){return t[1]}function Vr(){this._=null}function qr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Gr(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Hr(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Wr(t){for(;t.L;)t=t.L;return t}function Xr(t,e,n,r){var i=[null,null],o=uu.push(i)-1;return i.left=t,i.right=e,n&&Yr(i,t,e,n),r&&Yr(i,e,t,r),au[t.index].halfedges.push(o),au[e.index].halfedges.push(o),i}function Zr(t,e,n){var r=[e,n];return r.left=t,r}function Yr(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function Kr(t,e,n,r,i){var o,a=t[0],s=t[1],u=a[0],c=a[1],l=0,f=1,p=s[0]-u,h=s[1]-c;if(o=e-u,p||!(o>0)){if(o/=p,p<0){if(o<l)return;o<f&&(f=o)}else if(p>0){if(o>f)return;o>l&&(l=o)}if(o=r-u,p||!(o<0)){if(o/=p,p<0){if(o>f)return;o>l&&(l=o)}else if(p>0){if(o<l)return;o<f&&(f=o)}if(o=n-c,h||!(o>0)){if(o/=h,h<0){if(o<l)return;o<f&&(f=o)}else if(h>0){if(o>f)return;o>l&&(l=o)}if(o=i-c,h||!(o<0)){if(o/=h,h<0){if(o>f)return;o>l&&(l=o)}else if(h>0){if(o<l)return;o<f&&(f=o)}return!(l>0||f<1)||(l>0&&(t[0]=[u+l*p,c+l*h]),f<1&&(t[1]=[u+f*p,c+f*h]),!0)}}}}}function Jr(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,u=t[0],c=t.left,l=t.right,f=c[0],p=c[1],h=l[0],d=l[1],v=(f+h)/2,m=(p+d)/2;if(d===p){if(v<e||v>=r)return;if(f>h){if(u){if(u[1]>=i)return}else u=[v,n];o=[v,i]}else{if(u){if(u[1]<n)return}else u=[v,i];o=[v,n]}}else if(a=(f-h)/(d-p),s=m-a*v,a<-1||a>1)if(f>h){if(u){if(u[1]>=i)return}else u=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/a,i];o=[(n-s)/a,n]}else if(p<d){if(u){if(u[0]>=r)return}else u=[e,a*e+s];o=[r,a*r+s]}else{if(u){if(u[0]<e)return}else u=[r,a*r+s];o=[e,a*e+s]}return t[0]=u,t[1]=o,!0}function Qr(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function $r(t,e){return e[+(e.left!==t.site)]}function ti(t,e){return e[+(e.left===t.site)]}function ei(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],u=r[0]-a,c=r[1]-s,l=o[0]-a,f=o[1]-s,p=2*(u*f-c*l);if(!(p>=-pu)){var h=u*u+c*c,d=l*l+f*f,v=(f*h-c*d)/p,m=(u*d-l*h)/p,g=cu.pop()||new function(){qr(this),this.x=this.y=this.arc=this.site=this.cy=null};g.arc=t,g.site=i,g.x=v+a,g.y=(g.cy=m+s)+Math.sqrt(v*v+m*m),t.circle=g;for(var y=null,b=su._;b;)if(g.y<b.y||g.y===b.y&&g.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}su.insert(y,g),y||(iu=g)}}}}function ni(t){var e=t.circle;e&&(e.P||(iu=e.N),su.remove(e),cu.push(e),qr(e),t.circle=null)}function ri(t){var e=lu.pop()||new function(){qr(this),this.edge=this.site=this.circle=null};return e.site=t,e}function ii(t){ni(t),ou.remove(t),lu.push(t),qr(t)}function oi(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];ii(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<fu&&Math.abs(r-u.circle.cy)<fu;)o=u.P,s.unshift(u),ii(u),u=o;s.unshift(u),ni(u);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<fu&&Math.abs(r-c.circle.cy)<fu;)a=c.N,s.push(c),ii(c),c=a;s.push(c),ni(c);var l,f=s.length;for(l=1;l<f;++l)c=s[l],u=s[l-1],Yr(c.edge,u.site,c.site,i);u=s[0],(c=s[f-1]).edge=Xr(u.site,c.site,null,i),ei(u),ei(c)}function ai(t){for(var e,n,r,i,o=t[0],a=t[1],s=ou._;s;)if((r=si(s,a)-o)>fu)s=s.L;else{if(!((i=o-function(t,e){var n=t.N;if(n)return si(n,e);var r=t.site;return r[1]===e?r[0]:1/0}(s,a))>fu)){r>-fu?(e=s.P,n=s):i>-fu?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){au[t.index]={site:t,halfedges:[]}}(t);var u=ri(t);if(ou.insert(e,u),e||n){if(e===n)return ni(e),n=ri(e.site),ou.insert(u,n),u.edge=n.edge=Xr(e.site,u.site),ei(e),void ei(n);if(n){ni(e),ni(n);var c=e.site,l=c[0],f=c[1],p=t[0]-l,h=t[1]-f,d=n.site,v=d[0]-l,m=d[1]-f,g=2*(p*m-h*v),y=p*p+h*h,b=v*v+m*m,_=[(m*y-h*b)/g+l,(p*b-v*y)/g+f];Yr(n.edge,c,d,_),u.edge=Xr(c,t,null,_),n.edge=Xr(t,d,null,_),ei(e),ei(n)}else u.edge=Xr(e.site,u.site)}}function si(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],u=n[1],c=u-e;if(!c)return s;var l=s-r,f=1/o-1/c,p=l/c;return f?(-p+Math.sqrt(p*p-2*f*(l*l/(-2*c)-u+c/2+i-o/2)))/f+r:(r+s)/2}function ui(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function ci(t,e){return e[1]-t[1]||e[0]-t[0]}function li(t,e){var n,r,i,o=t.sort(ci).pop();for(uu=[],au=new Array(t.length),ou=new Vr,su=new Vr;;)if(i=iu,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(ai(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;oi(i.arc)}if(function(){for(var t,e,n,r,i=0,o=au.length;i<o;++i)if((t=au[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=Qr(t,uu[e[n]]);for(a.sort((function(t,e){return s[e]-s[t]})),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var a=+e[0][0],s=+e[0][1],u=+e[1][0],c=+e[1][1];!function(t,e,n,r){for(var i,o=uu.length;o--;)Jr(i=uu[o],t,e,n,r)&&Kr(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>fu||Math.abs(i[0][1]-i[1][1])>fu)||delete uu[o]}(a,s,u,c),function(t,e,n,r){var i,o,a,s,u,c,l,f,p,h,d,v,m=au.length,g=!0;for(i=0;i<m;++i)if(o=au[i]){for(a=o.site,s=(u=o.halfedges).length;s--;)uu[u[s]]||u.splice(s,1);for(s=0,c=u.length;s<c;)d=(h=ti(o,uu[u[s]]))[0],v=h[1],f=(l=$r(o,uu[u[++s%c]]))[0],p=l[1],(Math.abs(d-f)>fu||Math.abs(v-p)>fu)&&(u.splice(s,0,uu.push(Zr(a,h,Math.abs(d-t)<fu&&r-v>fu?[t,Math.abs(f-t)<fu?p:r]:Math.abs(v-r)<fu&&n-d>fu?[Math.abs(p-r)<fu?f:n,r]:Math.abs(d-n)<fu&&v-e>fu?[n,Math.abs(f-n)<fu?p:e]:Math.abs(v-e)<fu&&d-t>fu?[Math.abs(p-e)<fu?f:t,e]:null))-1),++c);c&&(g=!1)}if(g){var y,b,_,x=1/0;for(i=0,g=null;i<m;++i)(o=au[i])&&(_=(y=(a=o.site)[0]-t)*y+(b=a[1]-e)*b)<x&&(x=_,g=o);if(g){var w=[t,e],E=[t,r],S=[n,r],C=[n,e];g.halfedges.push(uu.push(Zr(a=g.site,w,E))-1,uu.push(Zr(a,E,S))-1,uu.push(Zr(a,S,C))-1,uu.push(Zr(a,C,w))-1)}}for(i=0;i<m;++i)(o=au[i])&&(o.halfedges.length||delete au[i])}(a,s,u,c)}this.edges=uu,this.cells=au,ou=su=uu=au=null}function fi(t){return(t=t.slice()).push(t[0]),o([t])}function pi(t,e,n,r){var i=(r=r||{}).steps||64,a=r.units||"kilometers",s=r.angle||0,u=r.pivot||t,c=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!S(r))throw new Error("options must be an object");if(!E(i))throw new Error("steps must be a number");if(!E(s))throw new Error("angle must be a number");var l=q(t);if("degrees"===a)var f=_(s);else e=nr(t,e,90,{units:a}),n=nr(t,n,0,{units:a}),e=q(e)[0]-l[0],n=q(n)[1]-l[1];for(var p=[],h=0;h<i;h+=1){var d=-360*h/i,v=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(hi(d),2)),m=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(hi(d),2));if(d<-90&&d>=-270&&(v=-v),d<-180&&d>=-360&&(m=-m),"degrees"===a){var g=v*Math.cos(f)+m*Math.sin(f),y=m*Math.cos(f)-v*Math.sin(f);v=g,m=y}p.push([v+l[0],m+l[1]])}return p.push(p[0]),"degrees"===a?o([p],c):hr(o([p],c),s,{pivot:u})}function hi(t){var e=t*Math.PI/180;return Math.tan(e)}function di(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.properties,i=e.weight;if(!t)throw new Error("geojson is required");var o=0,a=0,s=0;return R(t,(function(t,e,n){var r=n[i];if(r=void 0===r||null===r?1:r,!E(r))throw new Error("weight value must be a number for feature index "+e);(r=Number(r))>0&&O(t,(function(t){o+=t[0]*r,a+=t[1]*r,s+=r}))})),r([o/s,a/s],n)}function vi(t,e,n,i){var o=n.properties.tolerance||.001,a=0,s=0,u=0,c=0;if(P(n,(function(e){var n=e.properties.weight,r=void 0===n||null===n?1:n;if(r=Number(r),!E(r))throw new Error("weight value must be a number");if(r>0){c+=1;var i=r*jt(e,t);0===i&&(i=1);var o=r/i;a+=e.geometry.coordinates[0]*o,s+=e.geometry.coordinates[1]*o,u+=o}})),c<1)throw new Error("no features to measure");var l=a/u,f=s/u;return 1===c||0===i||Math.abs(l-e[0])<o&&Math.abs(f-e[1])<o?r([l,f],{medianCandidates:n.properties.medianCandidates}):(n.properties.medianCandidates.push([l,f]),vi([l,f],t,n,i-1))}function mi(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function gi(t){if(S(t)&&(t=t.bbox),t&&!Array.isArray(t))throw new Error("bbox is invalid");return t?function(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}(t):[360*xi(),180*xi()]}function yi(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.bbox;void 0!==t&&null!==t||(t=1);for(var i=[],o=0;o<t;o++)i.push(r(gi(n)));return c(i)}function bi(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_radial_length;void 0!==t&&null!==t||(t=1),E(r)||(r=10),E(i)||(i=10);for(var a=[],s=0;s<t;s++){var u=[],l=Array.apply(null,new Array(r+1)).map(Math.random);l.forEach((function(t,e,n){n[e]=e>0?t+n[e-1]:t})),l.forEach((function(t){t=2*t*Math.PI/l[l.length-1];var e=Math.random();u.push([e*i*Math.sin(t),e*i*Math.cos(t)])})),u[u.length-1]=u[0],u=u.map(function(t){return function(e){return[e[0]+t[0],e[1]+t[1]]}}(gi(n))),a.push(o([u]))}return c(a)}function _i(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_length,o=e.max_rotation;void 0!==t&&null!==t||(t=1),(!E(r)||r<2)&&(r=10),E(i)||(i=1e-4),E(o)||(o=Math.PI/8);for(var a=[],u=0;u<t;u++){for(var l=[gi(n)],f=0;f<r-1;f++){var p=(0===f?2*Math.random()*Math.PI:Math.tan((l[f][1]-l[f-1][1])/(l[f][0]-l[f-1][0])))+(Math.random()-.5)*o*2,h=Math.random()*i;l.push([l[f][0]+h*Math.cos(p),l[f][1]+h*Math.sin(p)])}a.push(s(l))}return c(a)}function xi(){return Math.random()-.5}function wi(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(void 0===e||null===e)throw new Error("filter is required");var n=[];return P(t,(function(t){Ti(t.properties,e)&&n.push(t)})),c(n)}function Ei(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(void 0===e||null===e)throw new Error("property is required");for(var r=Ci(t,e),i=Object.keys(r),o=0;o<i.length;o++){for(var a=i[o],s=r[a],u=[],l=0;l<s.length;l++)u.push(t.features[s[l]]);n(c(u),a,o)}}function Si(t,e,n,r){var i=r;return Ei(t,e,(function(t,e,o){i=0===o&&void 0===r?t:n(i,t,e,o)})),i}function Ci(t,e){var n={};return P(t,(function(t,r){var i=t.properties||{};if(i.hasOwnProperty(e)){var o=i[e];n.hasOwnProperty(o)?n[o].push(r):n[o]=[r]}})),n}function Ti(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return t.hasOwnProperty(e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!Ti(t,e[r]))return!1;return!0}return Oi(t,e)}function Oi(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0}function Ai(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var i=e[r];t.hasOwnProperty(i)&&(n[i]=t[i])}return n}function ki(){}function Mi(t){this.message=t||""}function Pi(t){this.message=t||""}function Ii(){}function Li(t){return null===t?Rc:t.color}function Ri(t){return null===t?null:t.parent}function Di(t,e){null!==t&&(t.color=e)}function Ni(t){return null===t?null:t.left}function ji(t){return null===t?null:t.right}function Fi(){this.root_=null,this.size_=0}function zi(){}function Bi(){this.array_=[],arguments[0]instanceof bc&&this.addAll(arguments[0])}function Ui(){}function Vi(t){this.message=t||""}function qi(){this.array_=[]}function Gi(t){switch(t.type){case"Polygon":return yn(t)>1?t:null;case"MultiPolygon":var e=[];if(N(t,(function(t){yn(t)>1&&e.push(t.geometry.coordinates)})),e.length)return{type:"MultiPolygon",coordinates:e}}}function Hi(){this.reset()}function Wi(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}function Xi(t){return t>1?Bh:t<-1?-Bh:Math.asin(t)}function Zi(){}function Yi(t,e){t&&ed.hasOwnProperty(t.type)&&ed[t.type](t,e)}function Ki(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Ji(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Ki(t[n],e,1);e.polygonEnd()}function Qi(t){return[Xh(t[1],t[0]),Xi(t[2])]}function $i(t){var e=t[0],n=t[1],r=Zh(n);return[r*Zh(e),r*Jh(e),Jh(n)]}function to(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function eo(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function no(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ro(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function io(t){var e=Qh(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function oo(t,e){return[t>zh?t-Vh:t<-zh?t+Vh:t,e]}function ao(t,e,n){return(t%=Vh)?e||n?rd(uo(t),co(e,n)):uo(t):e||n?co(e,n):oo}function so(t){return function(e,n){return e+=t,[e>zh?e-Vh:e<-zh?e+Vh:e,n]}}function uo(t){var e=so(t);return e.invert=so(-t),e}function co(t,e){function n(t,e){var n=Zh(e),s=Zh(t)*n,u=Jh(t)*n,c=Jh(e),l=c*r+s*i;return[Xh(u*o-l*a,s*r-c*i),Xi(l*o+u*a)]}var r=Zh(t),i=Jh(t),o=Zh(e),a=Jh(e);return n.invert=function(t,e){var n=Zh(e),s=Zh(t)*n,u=Jh(t)*n,c=Jh(e),l=c*o-u*a;return[Xh(u*o+c*a,s*r+l*i),Xi(l*r-s*i)]},n}function lo(t,e){(e=$i(e))[0]-=t,io(e);var n=function(t){return t>1?0:t<-1?zh:Math.acos(t)}(-e[1]);return((-e[2]<0?-n:n)+Vh-Fh)%Vh}function fo(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function po(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function ho(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,c){var l=0,f=0;if(null==i||(l=a(i,s))!==(f=a(o,s))||u(i,o)<0^s>0)do{c.point(0===l||3===l?t:n,l>1?r:e)}while((l=(l+s+4)%4)!==f);else c.point(o[0],o[1])}function a(r,i){return Hh(r[0]-t)<Fh?i>0?0:3:Hh(r[0]-n)<Fh?i>0?2:1:Hh(r[1]-e)<Fh?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){function u(t,e){i(t,e)&&x.point(t,e)}function c(o,a){var s=i(o,a);if(f&&p.push([o,a]),b)h=o,d=a,v=s,b=!1,s&&(x.lineStart(),x.point(o,a));else if(s&&y)x.point(o,a);else{var u=[m=Math.max(pd,Math.min(fd,m)),g=Math.max(pd,Math.min(fd,g))],c=[o=Math.max(pd,Math.min(fd,o)),a=Math.max(pd,Math.min(fd,a))];ad(u,c,t,e,n,r)?(y||(x.lineStart(),x.point(u[0],u[1])),x.point(c[0],c[1]),s||x.lineEnd(),_=!1):s&&(x.lineStart(),x.point(o,a),_=!1)}m=o,g=a,y=s}var l,f,p,h,d,v,m,g,y,b,_,x=a,w=od(),E={point:u,lineStart:function(){E.point=c,f&&f.push(p=[]),b=!0,y=!1,m=g=NaN},lineEnd:function(){l&&(c(h,d),v&&y&&w.rejoin(),l.push(w.result())),E.point=u,y&&x.lineEnd()},polygonStart:function(){x=w,l=[],f=[],_=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=f.length;n<i;++n)for(var o,a,s=f[n],u=1,c=s.length,l=s[0],p=l[0],h=l[1];u<c;++u)o=p,a=h,p=(l=s[u])[0],h=l[1],a<=r?h>r&&(p-o)*(r-a)>(h-a)*(t-o)&&++e:h<=r&&(p-o)*(r-a)<(h-a)*(t-o)&&--e;return e}(),n=_&&e,i=(l=ld(l)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&ud(l,s,e,o,a),a.polygonEnd()),x=a,l=f=p=null}};return E}}function vo(t){return t.length>1}function mo(t,e){return((t=t.x)[0]<0?t[1]-Bh-Fh:Bh-t[1])-((e=e.x)[0]<0?e[1]-Bh-Fh:Bh-e[1])}function go(t){return function(e){var n=new yo;for(var r in t)n[r]=t[r];return n.stream=e,n}}function yo(){}function bo(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),nd(n,t.stream(bd));var a=bd.result(),s=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),u=+e[0][0]+(r-s*(a[1][0]+a[0][0]))/2,c=+e[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([u,c])}function _o(t){return function(t){function e(t){return t=c(t[0]*Gh,t[1]*Gh),[t[0]*v+a,s-t[1]*v]}function n(t,e){return t=o(t,e),[t[0]*v+a,s-t[1]*v]}function r(){c=rd(u=ao(_,x,w),o);var t=o(y,b);return a=m-t[0]*v,s=g+t[1]*v,i()}function i(){return h=d=null,e}var o,a,s,u,c,l,f,p,h,d,v=150,m=480,g=250,y=0,b=0,_=0,x=0,w=0,E=null,S=xd,C=null,T=dd,O=.5,A=Cd(n,O);return e.stream=function(t){return h&&d===t?h:h=Td(S(u,A(T(d=t))))},e.clipAngle=function(t){return arguments.length?(S=+t?wd(E=t*Gh,6*Gh):(E=null,xd),i()):E*qh},e.clipExtent=function(t){return arguments.length?(T=null==t?(C=l=f=p=null,dd):ho(C=+t[0][0],l=+t[0][1],f=+t[1][0],p=+t[1][1]),i()):null==C?null:[[C,l],[f,p]]},e.scale=function(t){return arguments.length?(v=+t,r()):v},e.translate=function(t){return arguments.length?(m=+t[0],g=+t[1],r()):[m,g]},e.center=function(t){return arguments.length?(y=t[0]%360*Gh,b=t[1]%360*Gh,r()):[y*qh,b*qh]},e.rotate=function(t){return arguments.length?(_=t[0]%360*Gh,x=t[1]%360*Gh,w=t.length>2?t[2]%360*Gh:0,r()):[_*qh,x*qh,w*qh]},e.precision=function(t){return arguments.length?(A=Cd(n,O=t*t),i()):Qh(O)},e.fitExtent=function(t,n){return bo(e,t,n)},e.fitSize=function(t,n){return function(t,e,n){return bo(t,[[0,0],e],n)}(e,t,n)},function(){return o=t.apply(this,arguments),e.invert=o.invert&&function(t){return(t=c.invert((t[0]-a)/v,(s-t[1])/v))&&[t[0]*qh,t[1]*qh]},r()}}((function(){return t}))()}function xo(t,e){return[t,Kh($h((Bh+e)/2))]}function wo(t,e){return[Kh($h((Bh+e)/2)),-t]}function Eo(t,n,r,i){var o=t.properties||{},a="Feature"===t.type?t.geometry:t;if("GeometryCollection"===a.type){var s=[];return R(t,(function(t){var e=Eo(t,n,r,i);e&&s.push(e)})),c(s)}var u,l=V(t),f=l[1]>50&&l[3]>50;u=f?{type:a.type,coordinates:Co(a.coordinates,Oo(a))}:cn(a);var p,h=(new El).read(u),d=v(m(n,r),"meters"),g=vp.bufferOp(h,d);if(g=(new Sl).write(g),!So(g.coordinates))return(p=f?{type:g.type,coordinates:To(g.coordinates,Oo(a))}:ln(g)).geometry?p:e(p,o)}function So(t){return Array.isArray(t[0])?So(t[0]):isNaN(t[0])}function Co(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return Co(t,e)}))}function To(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return To(t,e)}))}function Oo(t){var e=ve(t).geometry.coordinates.reverse(),n=e.map((function(t){return-t}));return Od().center(e).rotate(n).scale(No)}function Ao(){for(var t=new El,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=Dh.union(e,t.read(JSON.stringify(arguments[n].geometry)));return e=(new Sl).write(e),{type:"Feature",geometry:e,properties:arguments[0].properties}}function ko(t,n){var r=Y(t),i=Y(n);if(te(Mn(i,{precision:4})).coordinates[0].length<4)return null;if(te(Mn(r,{precision:4})).coordinates[0].length<4)return null;var o=new El,a=o.read(Mn(r)),s=o.read(Mn(i)),u=Th.intersection(a,s);return u.isEmpty()?null:e((new Sl).write(u))}function Mo(t,e){return function(t,e,n){var r,i;if(!Array.isArray(e))throw new Error("Get closest expects an array as second argument");return e.forEach((function(e,o){var a=n(e,t);a>=0&&(void 0===i||a<i)&&(i=a,r=o)})),r}(t,e,(function(t,e){return t-e}))}function Po(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.properties||{},i=n.triangles,a=n.mask;if(null===e||void 0===e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(a&&-1===["Polygon","MultiPolygon"].indexOf(J(a)))throw new Error("options.mask must be a (Multi)Polygon");var s=t[0],u=t[1],l=t[2],f=t[3],p=(u+f)/2,h=(s+l)/2,d=2*e/jt([s,p],[l,p],n)*(l-s),v=2*e/jt([h,u],[h,f],n)*(f-u),m=d/2,g=2*m,y=Math.sqrt(3)/2*v,b=l-s,_=f-u,x=.75*g,w=y,C=(b-g)/(g-m/2),T=Math.floor(C),O=(T*x-m/2-b)/2-m/2+x/2,A=Math.floor((_-y)/y),k=(_-A*y)/2,M=A*y-_>y/2;M&&(k-=y/4);for(var P=[],I=[],L=0;L<6;L++){var R=2*Math.PI/6*L;P.push(Math.cos(R)),I.push(Math.sin(R))}for(var D=[],N=0;N<=T;N++)for(var j=0;j<=A;j++){var F=N%2==1;if((0!==j||!F)&&(0!==j||!M)){var z=N*x+s-O,B=j*w+u+k;if(F&&(B-=y/2),!0===i)(function(t,e,n,r,i,a){for(var s=[],u=0;u<6;u++){var c=[];c.push(t),c.push([t[0]+e*i[u],t[1]+n*a[u]]),c.push([t[0]+e*i[(u+1)%6],t[1]+n*a[(u+1)%6]]),c.push(t),s.push(o([c],r))}return s})([z,B],d/2,v/2,r,P,I).forEach((function(t){a?ko(a,t)&&D.push(t):D.push(t)}));else{var U=function(t,e,n,r,i,a){for(var s=[],u=0;u<6;u++){var c=t[0]+e*i[u],l=t[1]+n*a[u];s.push([c,l])}return s.push(s[0].slice()),o([s],r)}([z,B],d/2,v/2,r,P,I);a?ko(a,U)&&D.push(U):D.push(U)}}}return c(D)}function Io(t){if(t.features.length<=1)return t;var e=function(t){var e=Wo(),n=[];return N(t,(function(t,e){var r=V(t);n.push({minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],geojson:t,index:e})})),e.load(n),e}(t),n=[],r={};return N(t,(function(t,i){if(r[i])return!0;for(e.remove({index:i},Lo),r[i]=!0;;){var o=V(t),a=e.search({minX:o[0],minY:o[1],maxX:o[2],maxY:o[3]});if(a.length>0){var s=a.map((function(t){return r[t.index]=!0,e.remove({index:t.index},Lo),t.geojson}));s.push(t),t=Ao.apply(this,s)}if(0===a.length)break}n.push(t)})),c(n)}function Lo(t,e){return t.index===e.index}function Ro(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.properties,i=n.mask,a=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(J(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=t[0],u=t[1],l=t[2],f=t[3],p=e/jt([s,u],[l,u],n)*(l-s),h=e/jt([s,u],[s,f],n)*(f-u),d=l-s,v=f-u,m=Math.floor(d/p),g=Math.floor(v/h),y=(v-g*h)/2,b=s+(d-m*p)/2,_=0;_<m;_++){for(var x=u+y,w=0;w<g;w++){var C=o([[[b,x],[b,x+h],[b+p,x+h],[b+p,x],[b,x]]],r);i?ko(i,C)&&a.push(C):a.push(C),x+=h}b+=p}return c(a)}function Do(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.properties,i=n.mask,a=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(J(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=e/jt([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),u=e/jt([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),l=0,f=t[0];f<=t[2];){for(var p=0,h=t[1];h<=t[3];){var d=null,v=null;l%2==0&&p%2==0?(d=o([[[f,h],[f,h+u],[f+s,h],[f,h]]],r),v=o([[[f,h+u],[f+s,h+u],[f+s,h],[f,h+u]]],r)):l%2==0&&p%2==1?(d=o([[[f,h],[f+s,h+u],[f+s,h],[f,h]]],r),v=o([[[f,h],[f,h+u],[f+s,h+u],[f,h]]],r)):p%2==0&&l%2==1?(d=o([[[f,h],[f,h+u],[f+s,h+u],[f,h]]],r),v=o([[[f,h],[f+s,h+u],[f+s,h],[f,h]]],r)):p%2==1&&l%2==1&&(d=o([[[f,h],[f,h+u],[f+s,h],[f,h]]],r),v=o([[[f,h+u],[f+s,h+u],[f+s,h],[f,h+u]]],r)),i?(ko(i,d)&&a.push(d),ko(i,v)&&a.push(v)):(a.push(d),a.push(v)),h+=u,p++}l++,f+=s}return c(a)}var No=6371008.8,jo={meters:No,metres:No,millimeters:1e3*No,millimetres:1e3*No,centimeters:100*No,centimetres:100*No,kilometers:No/1e3,kilometres:No/1e3,miles:No/1609.344,nauticalmiles:No/1852,inches:39.37*No,yards:No/1.0936,feet:3.28084*No,radians:1,degrees:No/111325},Fo={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/No,degrees:1/111325},zo={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:386e-9,yards:1.195990046,feet:10.763910417,inches:1550.003100006},Bo=Object.freeze({earthRadius:No,factors:jo,unitsFactors:Fo,areaFactors:zo,feature:e,geometry:n,point:r,points:i,polygon:o,polygons:a,lineString:s,lineStrings:u,featureCollection:c,multiLineString:l,multiPoint:f,multiPolygon:p,geometryCollection:h,round:d,radiansToLength:v,lengthToRadians:m,lengthToDegrees:g,bearingToAzimuth:y,radiansToDegrees:b,degreesToRadians:_,convertLength:x,convertArea:w,isNumber:E,isObject:S,validateBBox:C,validateId:T,radians2degrees:function(){throw new Error("method has been renamed to `radiansToDegrees`")},degrees2radians:function(){throw new Error("method has been renamed to `degreesToRadians`")},distanceToDegrees:function(){throw new Error("method has been renamed to `lengthToDegrees`")},distanceToRadians:function(){throw new Error("method has been renamed to `lengthToRadians`")},radiansToDistance:function(){throw new Error("method has been renamed to `radiansToLength`")},bearingToAngle:function(){throw new Error("method has been renamed to `bearingToAzimuth`")},convertDistance:function(){throw new Error("method has been renamed to `convertLength`")}}),Uo=Object.freeze({coordEach:O,coordReduce:A,propEach:k,propReduce:M,featureEach:P,featureReduce:I,coordAll:L,geomEach:R,geomReduce:D,flattenEach:N,flattenReduce:j,segmentEach:F,segmentReduce:z,lineEach:B,lineReduce:U}),Vo=Object.freeze({getCoord:q,getCoords:G,containsNumber:H,geojsonType:W,featureOf:X,collectionOf:Z,getGeom:Y,getGeomType:K,getType:J}),qo={successCallback:null,verbose:!1},Go={},Ho=it,Wo=at;at.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!vt(t,e))return n;for(var i,o,a,s,u=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],vt(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):dt(t,s)?this._all(a,n):u.push(a));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!vt(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],a=e.leaf?n(o):o,vt(t,a)){if(e.leaf||dt(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=mt([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,a=this.data,s=this.toBBox(t),u=[],c=[];a||u.length;){if(a||(a=u.pop(),r=u[u.length-1],n=c.pop(),o=!0),a.leaf&&-1!==(i=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}(t,a.children,e)))return a.children.splice(i,1),u.push(a),this._condense(u),this;o||a.leaf||!dt(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(u.push(a),c.push(n),n=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:lt,compareMinY:ft,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,a=this._maxEntries;if(o<=a)return i=mt(t.slice(e,n+1)),st(i,this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=mt([])).leaf=!1,i.height=r;var s,u,c,l,f=Math.ceil(o/a),p=f*Math.ceil(Math.sqrt(a));for(gt(t,e,n,p,this.compareMinX),s=e;s<=n;s+=p)for(gt(t,s,c=Math.min(s+p-1,n),f,this.compareMinY),u=s;u<=c;u+=f)l=Math.min(u+f-1,c),i.children.push(this._build(t,u,l,r-1));return st(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,u,c,l,f;r.push(e),!e.leaf&&r.length-1!==n;){for(l=f=1/0,i=0,o=e.children.length;i<o;i++)u=pt(a=e.children[i]),(c=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,a)-u)<f?(f=c,l=u<l?u:l,s=a):c===f&&u<l&&(l=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);for(a.children.push(t),ct(a,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=mt(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,st(n,this.toBBox),st(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=mt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,st(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,s,u,c,l;for(u=c=1/0,r=e;r<=n-e;r++)a=function(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}(i=ut(t,0,r,this.toBBox),o=ut(t,r,n,this.toBBox)),s=pt(i)+pt(o),a<u?(u=a,l=r,c=s<c?s:c):a===u&&s<c&&(c=s,l=r);return l},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:lt,i=t.leaf?this.compareMinY:ft;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,s=ut(t,0,e,a),u=ut(t,n-e,n,a),c=ht(s)+ht(u);for(i=e;i<n-e;i++)o=t.children[i],ct(s,t.leaf?a(o):o),c+=ht(s);for(i=n-e-1;i>=e;i--)o=t.children[i],ct(u,t.leaf?a(o):o),c+=ht(u);return c},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)ct(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():st(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Xo=function(t,e,n){var r=t*e,i=Zo*t,o=i-(i-t),a=t-o,s=Zo*e,u=s-(s-e),c=e-u,l=a*c-(r-o*u-a*u-o*c);return n?(n[0]=l,n[1]=r,n):[l,r]},Zo=+(Math.pow(2,27)+1),Yo=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],e[0]);var i,o,a=n+r,s=new Array(a),u=0,c=0,l=0,f=Math.abs,p=t[c],h=f(p),d=e[l],v=f(d);h<v?(o=p,(c+=1)<n&&(h=f(p=t[c]))):(o=d,(l+=1)<r&&(v=f(d=e[l]))),c<n&&h<v||l>=r?(i=p,(c+=1)<n&&(h=f(p=t[c]))):(i=d,(l+=1)<r&&(v=f(d=e[l])));for(var m,g,y=i+o,b=y-i,_=o-b,x=_,w=y;c<n&&l<r;)h<v?(i=p,(c+=1)<n&&(h=f(p=t[c]))):(i=d,(l+=1)<r&&(v=f(d=e[l]))),(_=(o=x)-(b=(y=i+o)-i))&&(s[u++]=_),x=w-((m=w+y)-(g=m-w))+(y-g),w=m;for(;c<n;)(_=(o=x)-(b=(y=(i=p)+o)-i))&&(s[u++]=_),x=w-((m=w+y)-(g=m-w))+(y-g),w=m,(c+=1)<n&&(p=t[c]);for(;l<r;)(_=(o=x)-(b=(y=(i=d)+o)-i))&&(s[u++]=_),x=w-((m=w+y)-(g=m-w))+(y-g),w=m,(l+=1)<r&&(d=e[l]);return x&&(s[u++]=x),w&&(s[u++]=w),u||(s[u++]=0),s.length=u,s},Ko=function(t,e,n){var r=t+e,i=r-t,o=e-i,a=t-(r-i);return n?(n[0]=a+o,n[1]=r,n):[a+o,r]},Jo=function(t,e){var n=t.length;if(1===n){var r=Xo(t[0],e);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],a=[.1,.1],s=0;Xo(t[0],e,o),o[0]&&(i[s++]=o[0]);for(var u=1;u<n;++u){Xo(t[u],e,a);var c=o[1];Ko(c,a[0],o),o[0]&&(i[s++]=o[0]);var l=a[1],f=o[1],p=l+f,h=f-(p-l);o[1]=p,h&&(i[s++]=h)}return o[1]&&(i[s++]=o[1]),0===s&&(i[s++]=0),i.length=s,i},Qo=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],-e[0]);var i,o,a=n+r,s=new Array(a),u=0,c=0,l=0,f=Math.abs,p=t[c],h=f(p),d=-e[l],v=f(d);h<v?(o=p,(c+=1)<n&&(h=f(p=t[c]))):(o=d,(l+=1)<r&&(v=f(d=-e[l]))),c<n&&h<v||l>=r?(i=p,(c+=1)<n&&(h=f(p=t[c]))):(i=d,(l+=1)<r&&(v=f(d=-e[l])));for(var m,g,y=i+o,b=y-i,_=o-b,x=_,w=y;c<n&&l<r;)h<v?(i=p,(c+=1)<n&&(h=f(p=t[c]))):(i=d,(l+=1)<r&&(v=f(d=-e[l]))),(_=(o=x)-(b=(y=i+o)-i))&&(s[u++]=_),x=w-((m=w+y)-(g=m-w))+(y-g),w=m;for(;c<n;)(_=(o=x)-(b=(y=(i=p)+o)-i))&&(s[u++]=_),x=w-((m=w+y)-(g=m-w))+(y-g),w=m,(c+=1)<n&&(p=t[c]);for(;l<r;)(_=(o=x)-(b=(y=(i=d)+o)-i))&&(s[u++]=_),x=w-((m=w+y)-(g=m-w))+(y-g),w=m,(l+=1)<r&&(d=-e[l]);return x&&(s[u++]=x),w&&(s[u++]=w),u||(s[u++]=0),s.length=u,s},$o=yt((function(t){function e(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,a=0;o<t.length;++o)o!==e&&(i[a++]=t[r][o]);return n}function n(t){return 1&t?"-":""}function r(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",r(t.slice(0,e)),",",r(t.slice(e)),")"].join("")}function i(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var o=[],a=0;a<t.length;++a)o.push(["scale(",r(i(e(t,a))),",",n(a),t[0][a],")"].join(""));return o}function o(t){for(var n=[],o=[],a=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),s=[],u=0;u<t;++u)0==(1&u)?n.push.apply(n,i(e(a,u))):o.push.apply(o,i(e(a,u))),s.push("m"+u);var c=r(n),l=r(o),f="orientation"+t+"Exact",p=["function ",f,"(",s.join(),"){var p=",c,",n=",l,",d=sub(p,n);return d[d.length-1];};return ",f].join("");return new Function("sum","prod","scale","sub",p)(Yo,Xo,Jo,Qo)}var a=5,s=o(3),u=o(4),c=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),a=i-o;if(i>0){if(o<=0)return a;r=i+o}else{if(!(i<0))return a;if(o>=0)return a;r=-(i+o)}var u=33306690738754716e-32*r;return a>=u||a<=-u?a:s(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],a=n[0]-r[0],s=t[1]-r[1],c=e[1]-r[1],l=n[1]-r[1],f=t[2]-r[2],p=e[2]-r[2],h=n[2]-r[2],d=o*l,v=a*c,m=a*s,g=i*l,y=i*c,b=o*s,_=f*(d-v)+p*(m-g)+h*(y-b),x=7771561172376103e-31*((Math.abs(d)+Math.abs(v))*Math.abs(f)+(Math.abs(m)+Math.abs(g))*Math.abs(p)+(Math.abs(y)+Math.abs(b))*Math.abs(h));return _>x||-_>x?_:u(t,e,n,r)}];!function(){for(;c.length<=a;)c.push(o(c.length));for(var e=[],n=["slow"],r=0;r<=a;++r)e.push("a"+r),n.push("o"+r);var i=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=a;++r)i.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(i.join(""));var s=Function.apply(void 0,n);for(t.exports=s.apply(void 0,[function(t){var e=c[t.length];return e||(e=c[t.length]=o(t.length)),e.apply(void 0,t)}].concat(c)),r=0;r<=a;++r)t.exports[r]=c[r]}()})),ta=function(t){var e=t.length;if(e<3){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var i=new Array(e);for(r=0;r<e;++r)i[r]=r;i.sort((function(e,n){var r=t[e][0]-t[n][0];return r||t[e][1]-t[n][1]}));var o=[i[0],i[1]],a=[i[0],i[1]];for(r=2;r<e;++r){for(var s=i[r],u=t[s],c=o.length;c>1&&ea(t[o[c-2]],t[o[c-1]],u)<=0;)c-=1,o.pop();for(o.push(s),c=a.length;c>1&&ea(t[a[c-2]],t[a[c-1]],u)>=0;)c-=1,a.pop();a.push(s)}n=new Array(a.length+o.length-2);for(var l=0,f=(r=0,o.length);r<f;++r)n[l++]=o[r];for(var p=a.length-2;p>0;--p)n[l++]=a[p];return n},ea=$o[3],na=bt,ra=bt;bt.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=o+1,s=e[o];if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,i)>=0)break;e[t]=s,t=o}e[t]=i}},na["default"]=ra;var ia=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,a=e.length-1;o<e.length;a=o++){var s=e[o][0],u=e[o][1],c=e[a][0],l=e[a][1];u>r!=l>r&&n<(c-s)*(r-u)/(l-u)+s&&(i=!i)}return i},oa=$o[3],aa=_t,sa=_t;aa["default"]=sa;var ua=function(t){return t},ca=function(t){if(null==t)return ua;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0);var u=2,c=t.length,l=new Array(c);for(l[0]=(e+=t[0])*r+o,l[1]=(n+=t[1])*i+a;u<c;)l[u]=t[u],++u;return l}},la=function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n},fa=function(t,e){function n(t,e){for(var n in t){var i=t[n];delete e[i.start],delete i.start,delete i.end,i.forEach((function(t){r[t<0?~t:t]=1})),a.push(i)}}var r={},i={},o={},a=[],s=-1;return e.forEach((function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++s],e[s]=n,e[r]=i)})),e.forEach((function(e){var n,r,a=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=r[r.length-1],e<0?[n,i]:[i,n]}(e),s=a[0],u=a[1];if(n=o[s])if(delete o[n.end],n.push(e),n.end=u,r=i[u]){delete i[r.start];var c=r===n?n:n.concat(r);i[c.start=n.start]=o[c.end=r.end]=c}else i[n.start]=o[n.end]=n;else if(n=i[u])if(delete i[n.start],n.unshift(e),n.start=s,r=o[s]){delete o[r.end];var l=r===n?n:r.concat(n);i[l.start=r.start]=o[l.end=n.end]=l}else i[n.start]=o[n.end]=n;else i[(n=[e]).start=s]=o[n.end=u]=n})),n(o,i),n(i,o),e.forEach((function(t){r[t<0?~t:t]||a.push([t])})),a},pa=function(t){return qt(t,Gt.apply(this,arguments))},ha=function(t,e,n,r,i,o){3===arguments.length&&(r=o=Array,i=null);for(var a=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=new o(t),u=t-1,c=0;c<t;++c)a[c]=i;return{set:function(r,o){for(var c=e(r)&u,l=a[c],f=0;l!=i;){if(n(l,r))return s[c]=o;if(++f>=t)throw new Error("full hashmap");l=a[c=c+1&u]}return a[c]=r,s[c]=o,o},maybeSet:function(r,o){for(var c=e(r)&u,l=a[c],f=0;l!=i;){if(n(l,r))return s[c];if(++f>=t)throw new Error("full hashmap");l=a[c=c+1&u]}return a[c]=r,s[c]=o,o},get:function(r,o){for(var c=e(r)&u,l=a[c],f=0;l!=i;){if(n(l,r))return s[c];if(++f>=t)break;l=a[c=c+1&u]}return o},keys:function(){for(var t=[],e=0,n=a.length;e<n;++e){var r=a[e];r!=i&&t.push(r)}return t}}},da=function(t,e){return t[0]===e[0]&&t[1]===e[1]},va=new ArrayBuffer(16),ma=new Float64Array(va),ga=new Uint32Array(va),ya=function(t){ma[0]=t[0],ma[1]=t[1];var e=ga[0]^ga[1];return 2147483647&(e<<5^e>>7^ga[2]^ga[3])},ba=function(t){function e(t,e,n,r){if(p[n]!==t){p[n]=t;var i=h[n];if(i>=0){var o=d[n];i===e&&o===r||i===r&&o===e||(++m,v[n]=1)}else h[n]=e,d[n]=r}}function n(t){return ya(u[t])}function r(t,e){return da(u[t],u[e])}var i,o,a,s,u=t.coordinates,c=t.lines,l=t.rings,f=function(){for(var t=ha(1.4*u.length,n,r,Int32Array,-1,Int32Array),e=new Int32Array(u.length),i=0,o=u.length;i<o;++i)e[i]=t.maybeSet(i,i);return e}(),p=new Int32Array(u.length),h=new Int32Array(u.length),d=new Int32Array(u.length),v=new Int8Array(u.length),m=0;for(i=0,o=u.length;i<o;++i)p[i]=h[i]=d[i]=-1;for(i=0,o=c.length;i<o;++i){var g=c[i],y=g[0],b=g[1];for(a=f[y],s=f[++y],++m,v[a]=1;++y<=b;)e(i,a,a=s,s=f[y]);++m,v[s]=1}for(i=0,o=u.length;i<o;++i)p[i]=-1;for(i=0,o=l.length;i<o;++i){var _=l[i],x=_[0]+1,w=_[1];for(e(i,f[w-1],a=f[x-1],s=f[x]);++x<=w;)e(i,a,a=s,s=f[x])}p=h=d=null;var E,S=function(t,e,n,r,i){3===arguments.length&&(r=Array,i=null);for(var o=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=t-1,s=0;s<t;++s)o[s]=i;return{add:function(r){for(var s=e(r)&a,u=o[s],c=0;u!=i;){if(n(u,r))return!0;if(++c>=t)throw new Error("full hashset");u=o[s=s+1&a]}return o[s]=r,!0},has:function(r){for(var s=e(r)&a,u=o[s],c=0;u!=i;){if(n(u,r))return!0;if(++c>=t)break;u=o[s=s+1&a]}return!1},values:function(){for(var t=[],e=0,n=o.length;e<n;++e){var r=o[e];r!=i&&t.push(r)}return t}}}(1.4*m,ya,da);for(i=0,o=u.length;i<o;++i)v[E=f[i]]&&S.add(u[E]);return S},_a=function(t){var e,n,r,i=ba(t),o=t.coordinates,a=t.lines,s=t.rings;for(n=0,r=a.length;n<r;++n)for(var u=a[n],c=u[0],l=u[1];++c<l;)i.has(o[c])&&(e={0:c,1:u[1]},u[1]=c,u=u.next=e);for(n=0,r=s.length;n<r;++n)for(var f=s[n],p=f[0],h=p,d=f[1],v=i.has(o[p]);++h<d;)i.has(o[h])&&(v?(e={0:h,1:f[1]},f[1]=h,f=f.next=e):(function(t,e,n,r){Ht(t,e,n),Ht(t,e,e+r),Ht(t,e+r,n)}(o,p,d,d-h),o[d]=o[p],v=!0,h=p));return t},xa=function(t){function e(t){var e,n,r,i,o,a,s,u;if(r=h.get(e=c[t[0]]))for(s=0,u=r.length;s<u;++s)if(i=r[s],function(t,e){var n=t[0],r=e[0],i=t[1],o=e[1];if(n-i!=r-o)return!1;for(;n<=i;++n,++r)if(!da(c[n],c[r]))return!1;return!0}(i,t))return t[0]=i[0],void(t[1]=i[1]);if(o=h.get(n=c[t[1]]))for(s=0,u=o.length;s<u;++s)if(a=o[s],function(t,e){var n=t[0],r=e[0],i=t[1],o=e[1];if(n-i!=r-o)return!1;for(;n<=i;++n,--o)if(!da(c[n],c[o]))return!1;return!0}(a,t))return t[1]=a[0],void(t[0]=a[1]);r?r.push(t):h.set(e,[t]),o?o.push(t):h.set(n,[t]),d.push(t)}function n(t,e){var n=t[0],r=e[0],o=t[1]-n;if(o!==e[1]-r)return!1;for(var a=i(t),s=i(e),u=0;u<o;++u)if(!da(c[n+(u+a)%o],c[r+(u+s)%o]))return!1;return!0}function r(t,e){var n=t[0],r=e[0],o=t[1],a=e[1],s=o-n;if(s!==a-r)return!1;for(var u=i(t),l=s-i(e),f=0;f<s;++f)if(!da(c[n+(f+u)%s],c[a-(f+l)%s]))return!1;return!0}function i(t){for(var e=t[0],n=t[1],r=e,i=r,o=c[r];++r<n;){var a=c[r];(a[0]<o[0]||a[0]===o[0]&&a[1]<o[1])&&(i=r,o=a)}return i-e}var o,a,s,u,c=t.coordinates,l=t.lines,f=t.rings,p=l.length+f.length;for(delete t.lines,delete t.rings,s=0,u=l.length;s<u;++s)for(o=l[s];o=o.next;)++p;for(s=0,u=f.length;s<u;++s)for(a=f[s];a=a.next;)++p;var h=ha(2*p*1.4,ya,da),d=t.arcs=[];for(s=0,u=l.length;s<u;++s){o=l[s];do{e(o)}while(o=o.next)}for(s=0,u=f.length;s<u;++s)if((a=f[s]).next)do{e(a)}while(a=a.next);else!function(t){var e,o,a,s,u;if(o=h.get(e=c[t[0]]))for(s=0,u=o.length;s<u;++s){if(a=o[s],n(a,t))return t[0]=a[0],void(t[1]=a[1]);if(r(a,t))return t[0]=a[1],void(t[1]=a[0])}if(o=h.get(e=c[t[0]+i(t)]))for(s=0,u=o.length;s<u;++s){if(a=o[s],n(a,t))return t[0]=a[0],void(t[1]=a[1]);if(r(a,t))return t[0]=a[1],void(t[1]=a[0])}o?o.push(t):h.set(e,[t]),d.push(t)}(a);return t},wa=function(t,e){function n(t){t&&l.hasOwnProperty(t.type)&&l[t.type](t)}function r(t){var e=[];do{var n=c.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function i(t){return t.map(r)}var o=function(t){function e(t){null!=t&&c.hasOwnProperty(t.type)&&c[t.type](t)}function n(t){var e=t[0],n=t[1];e<o&&(o=e),e>s&&(s=e),n<a&&(a=n),n>u&&(u=n)}function r(t){t.forEach(n)}function i(t){t.forEach(r)}var o=1/0,a=1/0,s=-1/0,u=-1/0,c={GeometryCollection:function(t){t.geometries.forEach(e)},Point:function(t){n(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(n)},LineString:function(t){r(t.arcs)},MultiLineString:function(t){t.arcs.forEach(r)},Polygon:function(t){t.arcs.forEach(r)},MultiPolygon:function(t){t.arcs.forEach(i)}};for(var l in t)e(t[l]);return s>=o&&u>=a?[o,a,s,u]:void 0}(t=function(t){var e,n={};for(e in t)n[e]=Wt(t[e]);return n}(t)),a=e>0&&o&&function(t,e,n){function r(t){return[Math.round((t[0]-c)*h),Math.round((t[1]-l)*d)]}function i(t,e){for(var n,r,i,o,a,s=-1,u=0,f=t.length,p=new Array(f);++s<f;)n=t[s],o=Math.round((n[0]-c)*h),a=Math.round((n[1]-l)*d),o===r&&a===i||(p[u++]=[r=o,i=a]);for(p.length=u;u<e;)u=p.push([p[0][0],p[0][1]]);return p}function o(t){return i(t,2)}function a(t){return i(t,4)}function s(t){return t.map(a)}function u(t){null!=t&&v.hasOwnProperty(t.type)&&v[t.type](t)}var c=e[0],l=e[1],f=e[2],p=e[3],h=f-c?(n-1)/(f-c):1,d=p-l?(n-1)/(p-l):1,v={GeometryCollection:function(t){t.geometries.forEach(u)},Point:function(t){t.coordinates=r(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(r)},LineString:function(t){t.arcs=o(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(o)},Polygon:function(t){t.arcs=s(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(s)}};for(var m in t)u(t[m]);return{scale:[1/h,1/d],translate:[c,l]}}(t,o,e),s=xa(_a(function(t){function e(t){t&&c.hasOwnProperty(t.type)&&c[t.type](t)}function n(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var r={0:o-n+1,1:o};return a.push(r),r}function r(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var r={0:o-n+1,1:o};return s.push(r),r}function i(t){return t.map(r)}var o=-1,a=[],s=[],u=[],c={GeometryCollection:function(t){t.geometries.forEach(e)},LineString:function(t){t.arcs=n(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(n)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}};for(var l in t)e(t[l]);return{type:"Topology",coordinates:u,lines:a,rings:s,objects:t}}(t))),u=s.coordinates,c=ha(1.4*s.arcs.length,Yt,Kt);t=s.objects,s.bbox=o,s.arcs=s.arcs.map((function(t,e){return c.set(t,e),u.slice(t[0],t[1]+1)})),delete s.coordinates,u=null;var l={GeometryCollection:function(t){t.geometries.forEach(n)},LineString:function(t){t.arcs=r(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(r)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}};for(var f in t)n(t[f]);return a&&(s.transform=a,s.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,i,o=t[e],a=0,s=1,u=o.length,c=o[0],l=c[0],f=c[1];++a<u;)r=(c=o[a])[0],i=c[1],r===l&&i===f||(o[s++]=[r-l,i-f],l=r,f=i);1===s&&(o[s++]=[0,0]),o.length=s}return t}(s.arcs)),s},Ea=function(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){n=this.centers[e],r=this.centers[e+1];var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,a=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+a)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};Ea.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},Ea.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},Ea.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])};var Sa=be,Ca=be;be.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(Re(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var c=e[s]*n,l=s<u-1?e[s+1]*n:t.length;a-=Math.abs(Re(t,c,l,n))}var f=0;for(s=0;s<r.length;s+=3){var p=r[s]*n,h=r[s+1]*n,d=r[s+2]*n;f+=Math.abs((t[p]-t[d])*(t[h+1]-t[p+1])-(t[p]-t[h])*(t[d+1]-t[p+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},be.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},Sa["default"]=Ca,Be.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!Ye(t,e))return n;for(var i,o,a,s,u=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],Ye(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):Ze(t,s)?this._all(a,n):u.push(a));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!Ye(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],a=e.leaf?n(o):o,Ye(t,a)){if(e.leaf||Ze(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Ke([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,a=this.data,s=this.toBBox(t),u=[],c=[];a||u.length;){if(a||(a=u.pop(),r=u[u.length-1],n=c.pop(),o=!0),a.leaf&&-1!==(i=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}(t,a.children,e)))return a.children.splice(i,1),u.push(a),this._condense(u),this;o||a.leaf||!Ze(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(u.push(a),c.push(n),n=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:Ge,compareMinY:He,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,a=this._maxEntries;if(o<=a)return i=Ke(t.slice(e,n+1)),Ue(i,this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=Ke([])).leaf=!1,i.height=r;var s,u,c,l,f=Math.ceil(o/a),p=f*Math.ceil(Math.sqrt(a));for(Je(t,e,n,p,this.compareMinX),s=e;s<=n;s+=p)for(Je(t,s,c=Math.min(s+p-1,n),f,this.compareMinY),u=s;u<=c;u+=f)l=Math.min(u+f-1,c),i.children.push(this._build(t,u,l,r-1));return Ue(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,u,c,l,f;r.push(e),!e.leaf&&r.length-1!==n;){for(l=f=1/0,i=0,o=e.children.length;i<o;i++)u=We(a=e.children[i]),(c=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,a)-u)<f?(f=c,l=u<l?u:l,s=a):c===f&&u<l&&(l=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);for(a.children.push(t),qe(a,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=Ke(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,Ue(n,this.toBBox),Ue(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=Ke([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Ue(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,s,u,c,l;for(u=c=1/0,r=e;r<=n-e;r++)a=function(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}(i=Ve(t,0,r,this.toBBox),o=Ve(t,r,n,this.toBBox)),s=We(i)+We(o),a<u?(u=a,l=r,c=s<c?s:c):a===u&&s<c&&(c=s,l=r);return l},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:Ge,i=t.leaf?this.compareMinY:He;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,s=Ve(t,0,e,a),u=Ve(t,n-e,n,a),c=Xe(s)+Xe(u);for(i=e;i<n-e;i++)o=t.children[i],qe(s,t.leaf?a(o):o),c+=Xe(s);for(i=n-e-1;i>=e;i--)o=t.children[i],qe(u,t.leaf?a(o):o),c+=Xe(u);return c},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)qe(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Ue(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Ta=Object.freeze({toMercator:cn,toWgs84:ln}),Oa=6378137,Aa=function(t,e,n){function r(t,n,r,i){var u,c,l=o[t][n],f=o[t][n+1],p=o[r][i],h=o[r][i+1],d=function(t,e,n,r){if(Pn(t,n)||Pn(t,r)||Pn(e,n)||Pn(r,n))return null;var i=t[0],o=t[1],a=e[0],s=e[1],u=n[0],c=n[1],l=r[0],f=r[1],p=(i-a)*(c-f)-(o-s)*(u-l);return 0===p?null:[((i*s-o*a)*(u-l)-(i-a)*(u*f-c*l))/p,((i*s-o*a)*(c-f)-(o-s)*(u*f-c*l))/p]}(l,f,p,h);if(null!==d&&(u=f[0]!==l[0]?(d[0]-l[0])/(f[0]-l[0]):(d[1]-l[1])/(f[1]-l[1]),c=h[0]!==p[0]?(d[0]-p[0])/(h[0]-p[0]):(d[1]-p[1])/(h[1]-p[1]),!(u>=1||u<=0||c>=1||c<=0))){var v=d,m=!s[v];m&&(s[v]=!0),e?a.push(e(d,t,n,l,f,u,r,i,p,h,c,m)):a.push(d)}}function i(t,e){var n,r,i,a,s=o[t][e],u=o[t][e+1];return s[0]<u[0]?(n=s[0],r=u[0]):(n=u[0],r=s[0]),s[1]<u[1]?(i=s[1],a=u[1]):(i=u[1],a=s[1]),{minX:n,minY:i,maxX:r,maxY:a,ring:t,edge:e}}if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var o=t.geometry.coordinates,a=[],s={};if(n){for(var u=[],c=0;c<o.length;c++)for(var l=0;l<o[c].length-1;l++)u.push(i(c,l));var f=Wo();f.load(u)}for(var p=0;p<o.length;p++)for(var h=0;h<o[p].length-1;h++)if(n)f.search(i(p,h)).forEach((function(t){var e=t.ring,n=t.edge;r(p,h,e,n)}));else for(var d=0;d<o.length;d++)for(var v=0;v<o[d].length-1;v++)r(p,h,d,v);return e||(a={type:"Feature",geometry:{type:"MultiPoint",coordinates:a}}),a},ka=function(t){function e(){for(var t=[],e=0;e<d.features.length;e++)-1==d.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,r=0;r<d.features.length;r++)t[e]!=r&&Mt(d.features[t[e]].geometry.coordinates[0][0],d.features[r],{ignoreBoundary:!0})&&yn(d.features[r])<1/0&&(n=r);d.features[t[e]].properties.parent=n}}function n(){for(var t=0;t<d.features.length;t++)if(-1==d.features[t].properties.parent){var e=d.features[t].properties.winding;d.features[t].properties.netWinding=e,r(t,e)}}function r(t,e){for(var n=0;n<d.features.length;n++)if(d.features[n].properties.parent==t){var i=e+d.features[n].properties.winding;d.features[n].properties.netWinding=i,r(n,i)}}if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var i=t.geometry.coordinates.length,a=[],s=0;s<i;s++){var u=t.geometry.coordinates[s];Ln(u[0],u[u.length-1])||u.push(u[0]),a.push.apply(a,u.slice(0,u.length-1))}if(!function(t){for(var e={},n=1,r=0,i=t.length;r<i;++r){if(e.hasOwnProperty(t[r])){n=0;break}e[t[r]]=1}return n}(a))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var l=a.length,f=Aa(t,(function(t,e,n,r,i,o,a,s,u,c,l,f){return[t,e,n,r,i,o,a,s,u,c,l,f]})),p=f.length;if(0==p){var h=[];for(s=0;s<i;s++)h.push(o([t.geometry.coordinates[s]],{parent:-1,winding:function(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(In([t[(e-1).modulo(t.length-1)],t[e],t[(e+1).modulo(t.length-1)]],!0))var r=1;else r=-1;return r}(t.geometry.coordinates[s])}));var d=c(h);return e(),n(),d}var v=[],m=[];for(s=0;s<i;s++){v.push([]);for(var g=0;g<t.geometry.coordinates[s].length-1;g++)v[s].push([new Ma(t.geometry.coordinates[s][(g+1).modulo(t.geometry.coordinates[s].length-1)],1,[s,g],[s,(g+1).modulo(t.geometry.coordinates[s].length-1)],void 0)]),m.push(new Pa(t.geometry.coordinates[s][g],[s,(g-1).modulo(t.geometry.coordinates[s].length-1)],[s,g],void 0,void 0,!1,!0))}for(s=0;s<p;s++)v[f[s][1]][f[s][2]].push(new Ma(f[s][0],f[s][5],[f[s][1],f[s][2]],[f[s][6],f[s][7]],void 0)),f[s][11]&&m.push(new Pa(f[s][0],[f[s][1],f[s][2]],[f[s][6],f[s][7]],void 0,void 0,!0,!0));var y=m.length;for(s=0;s<v.length;s++)for(g=0;g<v[s].length;g++)v[s][g].sort((function(t,e){return t.param<e.param?-1:1}));var b=[];for(s=0;s<y;s++)b.push({minX:m[s].coord[0],minY:m[s].coord[1],maxX:m[s].coord[0],maxY:m[s].coord[1],index:s});var _=Wo();for(_.load(b),s=0;s<v.length;s++)for(g=0;g<v[s].length;g++)for(var x=0;x<v[s][g].length;x++){E=x==v[s][g].length-1?v[s][(g+1).modulo(t.geometry.coordinates[s].length-1)][0].coord:v[s][g][x+1].coord;var w=_.search({minX:E[0],minY:E[1],maxX:E[0],maxY:E[1]})[0];v[s][g][x].nxtIsectAlongEdgeIn=w.index}for(s=0;s<v.length;s++)for(g=0;g<v[s].length;g++)for(x=0;x<v[s][g].length;x++){var E=v[s][g][x].coord,S=(w=_.search({minX:E[0],minY:E[1],maxX:E[0],maxY:E[1]})[0]).index;S<l?m[S].nxtIsectAlongRingAndEdge2=v[s][g][x].nxtIsectAlongEdgeIn:Ln(m[S].ringAndEdge1,v[s][g][x].ringAndEdgeIn)?m[S].nxtIsectAlongRingAndEdge1=v[s][g][x].nxtIsectAlongEdgeIn:m[S].nxtIsectAlongRingAndEdge2=v[s][g][x].nxtIsectAlongEdgeIn}var C=[];for(s=0,g=0;g<i;g++){var T=s;for(x=0;x<t.geometry.coordinates[g].length-1;x++)m[s].coord[0]<m[T].coord[0]&&(T=s),s++;var O=m[T].nxtIsectAlongRingAndEdge2;for(x=0;x<m.length;x++)if(m[x].nxtIsectAlongRingAndEdge1==T||m[x].nxtIsectAlongRingAndEdge2==T){var A=x;break}var k=In([m[A].coord,m[T].coord,m[O].coord],!0)?1:-1;C.push({isect:T,parent:-1,winding:k})}for(C.sort((function(t,e){return m[t.isect].coord>m[e.isect].coord?-1:1})),h=[];C.length>0;){var M=C.pop(),P=M.isect,I=M.parent,L=M.winding,R=h.length,D=[m[P].coord],N=P;if(m[P].ringAndEdge1Walkable)var j=m[P].ringAndEdge1,F=m[P].nxtIsectAlongRingAndEdge1;else j=m[P].ringAndEdge2,F=m[P].nxtIsectAlongRingAndEdge2;for(;!Ln(m[P].coord,m[F].coord);){D.push(m[F].coord);var z=void 0;for(s=0;s<C.length;s++)if(C[s].isect==F){z=s;break}if(void 0!=z&&C.splice(z,1),Ln(j,m[F].ringAndEdge1)){if(j=m[F].ringAndEdge2,m[F].ringAndEdge2Walkable=!1,m[F].ringAndEdge1Walkable){var B={isect:F};In([m[N].coord,m[F].coord,m[m[F].nxtIsectAlongRingAndEdge2].coord],1==L)?(B.parent=I,B.winding=-L):(B.parent=R,B.winding=L),C.push(B)}N=F,F=m[F].nxtIsectAlongRingAndEdge2}else j=m[F].ringAndEdge1,m[F].ringAndEdge1Walkable=!1,m[F].ringAndEdge2Walkable&&(B={isect:F},In([m[N].coord,m[F].coord,m[m[F].nxtIsectAlongRingAndEdge1].coord],1==L)?(B.parent=I,B.winding=-L):(B.parent=R,B.winding=L),C.push(B)),N=F,F=m[F].nxtIsectAlongRingAndEdge1}D.push(m[F].coord),h.push(o([D],{index:R,parent:I,winding:L,netWinding:void 0}))}return d=c(h),e(),n(),d},Ma=function(t,e,n,r,i){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},Pa=function(t,e,n,r,i,o,a){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=a};Number.prototype.modulo=function(t){return(this%t+t)%t};var Ia=Math.PI/180,La=180/Math.PI,Ra=function(t,e){this.lon=t,this.lat=e,this.x=Ia*t,this.y=Ia*e};Ra.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Ra.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new Ra(e,t)};var Da=function(){this.coords=[],this.length=0};Da.prototype.move_to=function(t){this.length++,this.coords.push(t)};var Na=function(t){this.properties=t||{},this.geometries=[]};Na.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},Na.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var ja=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Ra(t.x,t.y),this.end=new Ra(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};ja.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),a=La*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[La*Math.atan2(i,r),a]},ja.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,a=this.interpolate(o);n.push(a)}for(var s=!1,u=0,c=e&&e.offset?e.offset:10,l=180-c,f=-180+c,p=360-c,h=1;h<n.length;++h){var d=n[h-1][0],v=n[h][0],m=Math.abs(v-d);m>p&&(v>l&&d<f||d>l&&v<f)?s=!0:m>u&&(u=m)}var g=[];if(s&&u<c){var y=[];g.push(y);for(var b=0;b<n.length;++b){var _=parseFloat(n[b][0]);if(b>0&&Math.abs(_-n[b-1][0])>p){var x=parseFloat(n[b-1][0]),w=parseFloat(n[b-1][1]),E=parseFloat(n[b][0]),S=parseFloat(n[b][1]);if(x>-180&&x<f&&180===E&&b+1<n.length&&n[b-1][0]>-180&&n[b-1][0]<f){y.push([-180,n[b][1]]),b++,y.push([n[b][0],n[b][1]]);continue}if(x>l&&x<180&&-180===E&&b+1<n.length&&n[b-1][0]>l&&n[b-1][0]<180){y.push([180,n[b][1]]),b++,y.push([n[b][0],n[b][1]]);continue}if(x<f&&E>l){var C=x;x=E,E=C;var T=w;w=S,S=T}if(x>l&&E<f&&(E+=360),x<=180&&E>=180&&x<E){var O=(180-x)/(E-x),A=O*S+(1-O)*w;y.push([n[b-1][0]>l?180:-180,A]),(y=[]).push([n[b-1][0]>l?-180:180,A]),g.push(y)}else y=[],g.push(y);y.push([_,n[b][1]])}else y.push([n[b][0],n[b][1]])}}else{var k=[];g.push(k);for(var M=0;M<n.length;++M)k.push([n[M][0],n[M][1]])}for(var P=new Na(this.properties),I=0;I<g.length;++I){var L=new Da;P.geometries.push(L);for(var R=g[I],D=0;D<R.length;++D)L.move_to(R[D])}return P};var Fa=Hn;Hn.polyline=Hn,Hn.polygon=function(t,e){var n,r,i,o,a,s,u;for(r=1;r<=8;r*=2){for(n=[],o=!(Xn(i=t[t.length-1],e)&r),a=0;a<t.length;a++)(u=!(Xn(s=t[a],e)&r))!==o&&n.push(Wn(i,s,r,e)),u&&n.push(s),i=s,o=u;if(!(t=n).length)break}return n};var za=Array.prototype.slice,Ba={successCallback:null,verbose:!1,polygons:!1},Ua={},Va=64,qa=16,Ga=4,Ha=1,Wa=[],Xa=[],Za=[],Ya=[],Ka=[],Ja=[],Qa=[],$a=[],ts=[],es=[],ns=[],rs=[],is=[],os=[],as=[],ss=[],us=[],cs=[],ls=[],fs=[],ps=[],hs=[],ds=[],vs=[];Qa[85]=es[85]=-1,$a[85]=ns[85]=0,ts[85]=rs[85]=1,ls[85]=hs[85]=1,fs[85]=ds[85]=0,ps[85]=vs[85]=1,Wa[85]=Ya[85]=0,Xa[85]=Ka[85]=-1,Za[85]=as[85]=0,ss[85]=is[85]=0,us[85]=os[85]=1,Ja[85]=cs[85]=1,hs[1]=hs[169]=0,ds[1]=ds[169]=-1,vs[1]=vs[169]=0,is[1]=is[169]=-1,os[1]=os[169]=0,as[1]=as[169]=0,es[4]=es[166]=0,ns[4]=ns[166]=-1,rs[4]=rs[166]=1,ss[4]=ss[166]=1,us[4]=us[166]=0,cs[4]=cs[166]=0,Qa[16]=Qa[154]=0,$a[16]=$a[154]=1,ts[16]=ts[154]=1,Ya[16]=Ya[154]=1,Ka[16]=Ka[154]=0,Ja[16]=Ja[154]=1,ls[64]=ls[106]=0,fs[64]=fs[106]=1,ps[64]=ps[106]=0,Wa[64]=Wa[106]=-1,Xa[64]=Xa[106]=0,Za[64]=Za[106]=1,ls[2]=ls[168]=0,fs[2]=fs[168]=-1,ps[2]=ps[168]=1,hs[2]=hs[168]=0,ds[2]=ds[168]=-1,vs[2]=vs[168]=0,is[2]=is[168]=-1,os[2]=os[168]=0,as[2]=as[168]=0,ss[2]=ss[168]=-1,us[2]=us[168]=0,cs[2]=cs[168]=1,Qa[8]=Qa[162]=0,$a[8]=$a[162]=-1,ts[8]=ts[162]=0,es[8]=es[162]=0,ns[8]=ns[162]=-1,rs[8]=rs[162]=1,is[8]=is[162]=1,os[8]=os[162]=0,as[8]=as[162]=1,ss[8]=ss[162]=1,us[8]=us[162]=0,cs[8]=cs[162]=0,Qa[32]=Qa[138]=0,$a[32]=$a[138]=1,ts[32]=ts[138]=1,es[32]=es[138]=0,ns[32]=ns[138]=1,rs[32]=rs[138]=0,Wa[32]=Wa[138]=1,Xa[32]=Xa[138]=0,Za[32]=Za[138]=0,Ya[32]=Ya[138]=1,Ka[32]=Ka[138]=0,Ja[32]=Ja[138]=1,hs[128]=hs[42]=0,ds[128]=ds[42]=1,vs[128]=vs[42]=1,ls[128]=ls[42]=0,fs[128]=fs[42]=1,ps[128]=ps[42]=0,Wa[128]=Wa[42]=-1,Xa[128]=Xa[42]=0,Za[128]=Za[42]=1,Ya[128]=Ya[42]=-1,Ka[128]=Ka[42]=0,Ja[128]=Ja[42]=0,es[5]=es[165]=-1,ns[5]=ns[165]=0,rs[5]=rs[165]=0,hs[5]=hs[165]=1,ds[5]=ds[165]=0,vs[5]=vs[165]=0,ss[20]=ss[150]=0,us[20]=us[150]=1,cs[20]=cs[150]=1,Ya[20]=Ya[150]=0,Ka[20]=Ka[150]=-1,Ja[20]=Ja[150]=1,Qa[80]=Qa[90]=-1,$a[80]=$a[90]=0,ts[80]=ts[90]=1,ls[80]=ls[90]=1,fs[80]=fs[90]=0,ps[80]=ps[90]=1,is[65]=is[105]=0,os[65]=os[105]=1,as[65]=as[105]=0,Wa[65]=Wa[105]=0,Xa[65]=Xa[105]=-1,Za[65]=Za[105]=0,Qa[160]=Qa[10]=-1,$a[160]=$a[10]=0,ts[160]=ts[10]=1,es[160]=es[10]=-1,ns[160]=ns[10]=0,rs[160]=rs[10]=0,hs[160]=hs[10]=1,ds[160]=ds[10]=0,vs[160]=vs[10]=0,ls[160]=ls[10]=1,fs[160]=fs[10]=0,ps[160]=ps[10]=1,ss[130]=ss[40]=0,us[130]=us[40]=1,cs[130]=cs[40]=1,is[130]=is[40]=0,os[130]=os[40]=1,as[130]=as[40]=0,Wa[130]=Wa[40]=0,Xa[130]=Xa[40]=-1,Za[130]=Za[40]=0,Ya[130]=Ya[40]=0,Ka[130]=Ka[40]=-1,Ja[130]=Ja[40]=1,es[37]=es[133]=0,ns[37]=ns[133]=1,rs[37]=rs[133]=1,hs[37]=hs[133]=0,ds[37]=ds[133]=1,vs[37]=vs[133]=0,Wa[37]=Wa[133]=-1,Xa[37]=Xa[133]=0,Za[37]=Za[133]=0,Ya[37]=Ya[133]=1,Ka[37]=Ka[133]=0,Ja[37]=Ja[133]=0,ss[148]=ss[22]=-1,us[148]=us[22]=0,cs[148]=cs[22]=0,hs[148]=hs[22]=0,ds[148]=ds[22]=-1,vs[148]=vs[22]=1,ls[148]=ls[22]=0,fs[148]=fs[22]=1,ps[148]=ps[22]=1,Ya[148]=Ya[22]=-1,Ka[148]=Ka[22]=0,Ja[148]=Ja[22]=1,Qa[82]=Qa[88]=0,$a[82]=$a[88]=-1,ts[82]=ts[88]=1,ss[82]=ss[88]=1,us[82]=us[88]=0,cs[82]=cs[88]=1,is[82]=is[88]=-1,os[82]=os[88]=0,as[82]=as[88]=1,ls[82]=ls[88]=0,fs[82]=fs[88]=-1,ps[82]=ps[88]=0,Qa[73]=Qa[97]=0,$a[73]=$a[97]=1,ts[73]=ts[97]=0,es[73]=es[97]=0,ns[73]=ns[97]=-1,rs[73]=rs[97]=0,is[73]=is[97]=1,os[73]=os[97]=0,as[73]=as[97]=0,Wa[73]=Wa[97]=1,Xa[73]=Xa[97]=0,Za[73]=Za[97]=1,Qa[145]=Qa[25]=0,$a[145]=$a[25]=-1,ts[145]=ts[25]=0,is[145]=is[25]=1,os[145]=os[25]=0,as[145]=as[25]=1,hs[145]=hs[25]=0,ds[145]=ds[25]=1,vs[145]=vs[25]=1,Ya[145]=Ya[25]=-1,Ka[145]=Ka[25]=0,Ja[145]=Ja[25]=0,es[70]=es[100]=0,ns[70]=ns[100]=1,rs[70]=rs[100]=0,ss[70]=ss[100]=-1,us[70]=us[100]=0,cs[70]=cs[100]=1,ls[70]=ls[100]=0,fs[70]=fs[100]=-1,ps[70]=ps[100]=1,Wa[70]=Wa[100]=1,Xa[70]=Xa[100]=0,Za[70]=Za[100]=0,es[101]=es[69]=0,ns[101]=ns[69]=1,rs[101]=rs[69]=0,Wa[101]=Wa[69]=1,Xa[101]=Xa[69]=0,Za[101]=Za[69]=0,hs[149]=hs[21]=0,ds[149]=ds[21]=1,vs[149]=vs[21]=1,Ya[149]=Ya[21]=-1,Ka[149]=Ka[21]=0,Ja[149]=Ja[21]=0,ss[86]=ss[84]=-1,us[86]=us[84]=0,cs[86]=cs[84]=1,ls[86]=ls[84]=0,fs[86]=fs[84]=-1,ps[86]=ps[84]=1,Qa[89]=Qa[81]=0,$a[89]=$a[81]=-1,ts[89]=ts[81]=0,is[89]=is[81]=1,os[89]=os[81]=0,as[89]=as[81]=1,Qa[96]=Qa[74]=0,$a[96]=$a[74]=1,ts[96]=ts[74]=0,es[96]=es[74]=-1,ns[96]=ns[74]=0,rs[96]=rs[74]=1,ls[96]=ls[74]=1,fs[96]=fs[74]=0,ps[96]=ps[74]=0,Wa[96]=Wa[74]=1,Xa[96]=Xa[74]=0,Za[96]=Za[74]=1,Qa[24]=Qa[146]=0,$a[24]=$a[146]=-1,ts[24]=ts[146]=1,ss[24]=ss[146]=1,us[24]=us[146]=0,cs[24]=cs[146]=1,is[24]=is[146]=0,os[24]=os[146]=1,as[24]=as[146]=1,Ya[24]=Ya[146]=0,Ka[24]=Ka[146]=-1,Ja[24]=Ja[146]=0,es[6]=es[164]=-1,ns[6]=ns[164]=0,rs[6]=rs[164]=1,ss[6]=ss[164]=-1,us[6]=us[164]=0,cs[6]=cs[164]=0,hs[6]=hs[164]=0,ds[6]=ds[164]=-1,vs[6]=vs[164]=1,ls[6]=ls[164]=1,fs[6]=fs[164]=0,ps[6]=ps[164]=0,is[129]=is[41]=0,os[129]=os[41]=1,as[129]=as[41]=1,hs[129]=hs[41]=0,ds[129]=ds[41]=1,vs[129]=vs[41]=0,Wa[129]=Wa[41]=-1,Xa[129]=Xa[41]=0,Za[129]=Za[41]=0,Ya[129]=Ya[41]=0,Ka[129]=Ka[41]=-1,Ja[129]=Ja[41]=0,ss[66]=ss[104]=0,us[66]=us[104]=1,cs[66]=cs[104]=0,is[66]=is[104]=-1,os[66]=os[104]=0,as[66]=as[104]=1,ls[66]=ls[104]=0,fs[66]=fs[104]=-1,ps[66]=ps[104]=0,Wa[66]=Wa[104]=0,Xa[66]=Xa[104]=-1,Za[66]=Za[104]=1,Qa[144]=Qa[26]=-1,$a[144]=$a[26]=0,ts[144]=ts[26]=0,hs[144]=hs[26]=1,ds[144]=ds[26]=0,vs[144]=vs[26]=1,ls[144]=ls[26]=0,fs[144]=fs[26]=1,ps[144]=ps[26]=1,Ya[144]=Ya[26]=-1,Ka[144]=Ka[26]=0,Ja[144]=Ja[26]=1,es[36]=es[134]=0,ns[36]=ns[134]=1,rs[36]=rs[134]=1,ss[36]=ss[134]=0,us[36]=us[134]=1,cs[36]=cs[134]=0,Wa[36]=Wa[134]=0,Xa[36]=Xa[134]=-1,Za[36]=Za[134]=1,Ya[36]=Ya[134]=1,Ka[36]=Ka[134]=0,Ja[36]=Ja[134]=0,Qa[9]=Qa[161]=-1,$a[9]=$a[161]=0,ts[9]=ts[161]=0,es[9]=es[161]=0,ns[9]=ns[161]=-1,rs[9]=rs[161]=0,is[9]=is[161]=1,os[9]=os[161]=0,as[9]=as[161]=0,hs[9]=hs[161]=1,ds[9]=ds[161]=0,vs[9]=vs[161]=1,Qa[136]=0,$a[136]=1,ts[136]=1,es[136]=0,ns[136]=1,rs[136]=0,ss[136]=-1,us[136]=0,cs[136]=1,is[136]=-1,os[136]=0,as[136]=0,hs[136]=0,ds[136]=-1,vs[136]=0,ls[136]=0,fs[136]=-1,ps[136]=1,Wa[136]=1,Xa[136]=0,Za[136]=0,Ya[136]=1,Ka[136]=0,Ja[136]=1,Qa[34]=0,$a[34]=-1,ts[34]=0,es[34]=0,ns[34]=-1,rs[34]=1,ss[34]=1,us[34]=0,cs[34]=0,is[34]=1,os[34]=0,as[34]=1,hs[34]=0,ds[34]=1,vs[34]=1,ls[34]=0,fs[34]=1,ps[34]=0,Wa[34]=-1,Xa[34]=0,Za[34]=1,Ya[34]=-1,Ka[34]=0,Ja[34]=0,Qa[35]=0,$a[35]=1,ts[35]=1,es[35]=0,ns[35]=-1,rs[35]=1,ss[35]=1,us[35]=0,cs[35]=0,is[35]=-1,os[35]=0,as[35]=0,hs[35]=0,ds[35]=-1,vs[35]=0,ls[35]=0,fs[35]=1,ps[35]=0,Wa[35]=-1,Xa[35]=0,Za[35]=1,Ya[35]=1,Ka[35]=0,Ja[35]=1,Qa[153]=0,$a[153]=1,ts[153]=1,is[153]=-1,os[153]=0,as[153]=0,hs[153]=0,ds[153]=-1,vs[153]=0,Ya[153]=1,Ka[153]=0,Ja[153]=1,es[102]=0,ns[102]=-1,rs[102]=1,ss[102]=1,us[102]=0,cs[102]=0,ls[102]=0,fs[102]=1,ps[102]=0,Wa[102]=-1,Xa[102]=0,Za[102]=1,Qa[155]=0,$a[155]=-1,ts[155]=0,is[155]=1,os[155]=0,as[155]=1,hs[155]=0,ds[155]=1,vs[155]=1,Ya[155]=-1,Ka[155]=0,Ja[155]=0,es[103]=0,ns[103]=1,rs[103]=0,ss[103]=-1,us[103]=0,cs[103]=1,ls[103]=0,fs[103]=-1,ps[103]=1,Wa[103]=1,Xa[103]=0,Za[103]=0,Qa[152]=0,$a[152]=1,ts[152]=1,ss[152]=-1,us[152]=0,cs[152]=1,is[152]=-1,os[152]=0,as[152]=0,hs[152]=0,ds[152]=-1,vs[152]=0,ls[152]=0,fs[152]=-1,ps[152]=1,Ya[152]=1,Ka[152]=0,Ja[152]=1,Qa[156]=0,$a[156]=-1,ts[156]=1,ss[156]=1,us[156]=0,cs[156]=1,is[156]=-1,os[156]=0,as[156]=0,hs[156]=0,ds[156]=-1,vs[156]=0,ls[156]=0,fs[156]=1,ps[156]=1,Ya[156]=-1,Ka[156]=0,Ja[156]=1,Qa[137]=0,$a[137]=1,ts[137]=1,es[137]=0,ns[137]=1,rs[137]=0,is[137]=-1,os[137]=0,as[137]=0,hs[137]=0,ds[137]=-1,vs[137]=0,Wa[137]=1,Xa[137]=0,Za[137]=0,Ya[137]=1,Ka[137]=0,Ja[137]=1,Qa[139]=0,$a[139]=1,ts[139]=1,es[139]=0,ns[139]=-1,rs[139]=0,is[139]=1,os[139]=0,as[139]=0,hs[139]=0,ds[139]=1,vs[139]=0,Wa[139]=-1,Xa[139]=0,Za[139]=0,Ya[139]=1,Ka[139]=0,Ja[139]=1,Qa[98]=0,$a[98]=-1,ts[98]=0,es[98]=0,ns[98]=-1,rs[98]=1,ss[98]=1,us[98]=0,cs[98]=0,is[98]=1,os[98]=0,as[98]=1,ls[98]=0,fs[98]=1,ps[98]=0,Wa[98]=-1,Xa[98]=0,Za[98]=1,Qa[99]=0,$a[99]=1,ts[99]=0,es[99]=0,ns[99]=-1,rs[99]=1,ss[99]=1,us[99]=0,cs[99]=0,is[99]=-1,os[99]=0,as[99]=1,ls[99]=0,fs[99]=-1,ps[99]=0,Wa[99]=1,Xa[99]=0,Za[99]=1,es[38]=0,ns[38]=-1,rs[38]=1,ss[38]=1,us[38]=0,cs[38]=0,hs[38]=0,ds[38]=1,vs[38]=1,ls[38]=0,fs[38]=1,ps[38]=0,Wa[38]=-1,Xa[38]=0,Za[38]=1,Ya[38]=-1,Ka[38]=0,Ja[38]=0,es[39]=0,ns[39]=1,rs[39]=1,ss[39]=-1,us[39]=0,cs[39]=0,hs[39]=0,ds[39]=-1,vs[39]=1,ls[39]=0,fs[39]=1,ps[39]=0,Wa[39]=-1,Xa[39]=0,Za[39]=1,Ya[39]=1,Ka[39]=0,Ja[39]=0;var ms=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},gs=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},ys=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},bs=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},_s=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},xs=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},ws=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},Es=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Ss=[],Cs=[],Ts=[],Os=[],As=[],ks=[],Ms=[],Ps=[];Os[1]=As[1]=18,Os[169]=As[169]=18,Ts[4]=Cs[4]=12,Ts[166]=Cs[166]=12,Ss[16]=Ps[16]=4,Ss[154]=Ps[154]=4,ks[64]=Ms[64]=22,ks[106]=Ms[106]=22,Ts[2]=ks[2]=17,Os[2]=As[2]=18,Ts[168]=ks[168]=17,Os[168]=As[168]=18,Ss[8]=Os[8]=9,Cs[8]=Ts[8]=12,Ss[162]=Os[162]=9,Cs[162]=Ts[162]=12,Ss[32]=Ps[32]=4,Cs[32]=Ms[32]=1,Ss[138]=Ps[138]=4,Cs[138]=Ms[138]=1,As[128]=Ps[128]=21,ks[128]=Ms[128]=22,As[42]=Ps[42]=21,ks[42]=Ms[42]=22,Cs[5]=As[5]=14,Cs[165]=As[165]=14,Ts[20]=Ps[20]=6,Ts[150]=Ps[150]=6,Ss[80]=ks[80]=11,Ss[90]=ks[90]=11,Os[65]=Ms[65]=3,Os[105]=Ms[105]=3,Ss[160]=ks[160]=11,Cs[160]=As[160]=14,Ss[10]=ks[10]=11,Cs[10]=As[10]=14,Ts[130]=Ps[130]=6,Os[130]=Ms[130]=3,Ts[40]=Ps[40]=6,Os[40]=Ms[40]=3,Cs[101]=Ms[101]=1,Cs[69]=Ms[69]=1,As[149]=Ps[149]=21,As[21]=Ps[21]=21,Ts[86]=ks[86]=17,Ts[84]=ks[84]=17,Ss[89]=Os[89]=9,Ss[81]=Os[81]=9,Ss[96]=Ms[96]=0,Cs[96]=ks[96]=15,Ss[74]=Ms[74]=0,Cs[74]=ks[74]=15,Ss[24]=Ts[24]=8,Os[24]=Ps[24]=7,Ss[146]=Ts[146]=8,Os[146]=Ps[146]=7,Cs[6]=ks[6]=15,Ts[6]=As[6]=16,Cs[164]=ks[164]=15,Ts[164]=As[164]=16,Os[129]=Ps[129]=7,As[129]=Ms[129]=20,Os[41]=Ps[41]=7,As[41]=Ms[41]=20,Ts[66]=Ms[66]=2,Os[66]=ks[66]=19,Ts[104]=Ms[104]=2,Os[104]=ks[104]=19,Ss[144]=As[144]=10,ks[144]=Ps[144]=23,Ss[26]=As[26]=10,ks[26]=Ps[26]=23,Cs[36]=Ps[36]=5,Ts[36]=Ms[36]=2,Cs[134]=Ps[134]=5,Ts[134]=Ms[134]=2,Ss[9]=As[9]=10,Cs[9]=Os[9]=13,Ss[161]=As[161]=10,Cs[161]=Os[161]=13,Cs[37]=Ps[37]=5,As[37]=Ms[37]=20,Cs[133]=Ps[133]=5,As[133]=Ms[133]=20,Ts[148]=As[148]=16,ks[148]=Ps[148]=23,Ts[22]=As[22]=16,ks[22]=Ps[22]=23,Ss[82]=Ts[82]=8,Os[82]=ks[82]=19,Ss[88]=Ts[88]=8,Os[88]=ks[88]=19,Ss[73]=Ms[73]=0,Cs[73]=Os[73]=13,Ss[97]=Ms[97]=0,Cs[97]=Os[97]=13,Ss[145]=Os[145]=9,As[145]=Ps[145]=21,Ss[25]=Os[25]=9,As[25]=Ps[25]=21,Cs[70]=Ms[70]=1,Ts[70]=ks[70]=17,Cs[100]=Ms[100]=1,Ts[100]=ks[100]=17,Ss[34]=Os[34]=9,Cs[34]=Ts[34]=12,As[34]=Ps[34]=21,ks[34]=Ms[34]=22,Ss[136]=Ps[136]=4,Cs[136]=Ms[136]=1,Ts[136]=ks[136]=17,Os[136]=As[136]=18,Ss[35]=Ps[35]=4,Cs[35]=Ts[35]=12,Os[35]=As[35]=18,ks[35]=Ms[35]=22,Ss[153]=Ps[153]=4,Os[153]=As[153]=18,Cs[102]=Ts[102]=12,ks[102]=Ms[102]=22,Ss[155]=Os[155]=9,As[155]=Ps[155]=23,Cs[103]=Ms[103]=1,Ts[103]=ks[103]=17,Ss[152]=Ps[152]=4,Ts[152]=ks[152]=17,Os[152]=As[152]=18,Ss[156]=Ts[156]=8,Os[156]=As[156]=18,ks[156]=Ps[156]=23,Ss[137]=Ps[137]=4,Cs[137]=Ms[137]=1,Os[137]=As[137]=18,Ss[139]=Ps[139]=4,Cs[139]=Os[139]=13,As[139]=Ms[139]=20,Ss[98]=Os[98]=9,Cs[98]=Ts[98]=12,ks[98]=Ms[98]=22,Ss[99]=Ms[99]=0,Cs[99]=Ts[99]=12,Os[99]=ks[99]=19,Cs[38]=Ts[38]=12,As[38]=Ps[38]=21,ks[38]=Ms[38]=22,Cs[39]=Ps[39]=5,Ts[39]=As[39]=16,ks[39]=Ms[39]=22;var Is=[];Is[1]=Is[169]=ms,Is[4]=Is[166]=gs,Is[16]=Is[154]=ys,Is[64]=Is[106]=bs,Is[168]=Is[2]=_s,Is[162]=Is[8]=xs,Is[138]=Is[32]=ws,Is[42]=Is[128]=Es,Is[5]=Is[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},Is[20]=Is[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},Is[80]=Is[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},Is[65]=Is[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Is[160]=Is[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},Is[130]=Is[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},Is[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Is[101]=Is[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},Is[149]=Is[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},Is[86]=Is[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},Is[89]=Is[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},Is[96]=Is[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},Is[24]=Is[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},Is[6]=Is[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},Is[129]=Is[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},Is[66]=Is[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Is[144]=Is[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Is[36]=Is[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},Is[9]=Is[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Is[37]=Is[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Is[148]=Is[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Is[82]=Is[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},Is[73]=Is[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Is[145]=Is[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Is[70]=Is[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Is[34]=function(t){return[Es(t),xs(t)]},Is[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Is[136]=function(t){return[ws(t),_s(t)]},Is[153]=function(t){return[ys(t),ms(t)]},Is[102]=function(t){return[gs(t),bs(t)]},Is[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Is[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Is[152]=function(t){return[ys(t),_s(t)]},Is[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Is[137]=function(t){return[ws(t),ms(t)]},Is[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Is[98]=function(t){return[xs(t),bs(t)]},Is[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Is[38]=function(t){return[gs(t),Es(t)]},Is[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var Ls=function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1};Ls.buildId=function(t){return t.join(",")},Ls.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},Ls.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},Ls.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},Ls.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var r=e.to,i=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]==0&&i.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=_r(t.coordinates,r.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},Ls.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},Ls.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},Ls.prototype.addInnerEdge=function(t){this.innerEdges.push(t)};var Rs=function(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)};Rs.prototype.getSymetric=function(){return this.symetric||(this.symetric=new Rs(this.to,this.from),this.symetric.symetric=this),this.symetric},Rs.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},Rs.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},Rs.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},Rs.prototype.toLineString=function(){return s([this.from.coordinates,this.to.coordinates])},Rs.prototype.compareTo=function(t){return _r(t.from.coordinates,t.to.coordinates,this.to.coordinates)};var Ds=function(){this.edges=[],this.polygon=void 0,this.envelope=void 0},Ns={length:{configurable:!0}};Ds.prototype.push=function(t){this[this.edges.length]=t,this.edges.push(t),this.polygon=this.envelope=void 0},Ds.prototype.get=function(t){return this.edges[t]},Ns.length.get=function(){return this.edges.length},Ds.prototype.forEach=function(t){this.edges.forEach(t)},Ds.prototype.map=function(t){return this.edges.map(t)},Ds.prototype.some=function(t){return this.edges.some(t)},Ds.prototype.isValid=function(){return!0},Ds.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e}),0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=_r(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:i>0},Ds.prototype.toMultiPoint=function(){return f(this.edges.map((function(t){return t.from.coordinates})))},Ds.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=o([t])},Ds.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=le(this.toPolygon())},Ds.findEdgeRingContaining=function(t,e){var n,i,o=t.getEnvelope();return e.forEach((function(e){var a=e.getEnvelope();if(i&&(n=i.getEnvelope()),!function(t,e){var n=t.geometry.coordinates.map((function(t){return t[0]})),r=t.geometry.coordinates.map((function(t){return t[1]})),i=e.geometry.coordinates.map((function(t){return t[0]})),o=e.geometry.coordinates.map((function(t){return t[1]}));return Math.max(null,n)===Math.max(null,i)&&Math.max(null,r)===Math.max(null,o)&&Math.min(null,n)===Math.min(null,i)&&Math.min(null,r)===Math.min(null,o)}(a,o)&&xr(a,o)){var s=t.map((function(t){return t.from.coordinates})).find((function(t){return!e.some((function(e){return function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t,e.from.coordinates)}))}));s&&e.inside(r(s))&&(i&&!xr(n,a)||(i=e))}})),i},Ds.prototype.inside=function(t){return Mt(t,this.toPolygon())},Object.defineProperties(Ds.prototype,Ns);var js=function(){this.edges=[],this.nodes={}};js.fromGeoJson=function(t){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(t);var e=new js;return N(t,(function(t){X(t,"LineString","Graph::fromGeoJson"),A(t,(function(t,n){if(t){var r=e.getNode(t),i=e.getNode(n);e.addEdge(r,i)}return n}))})),e},js.prototype.getNode=function(t){var e=Ls.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new Ls(t)),n},js.prototype.addEdge=function(t,e){var n=new Rs(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},js.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},js.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}},js.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},js.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))},js.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var a=i[o],s=a.symetric,u=void 0,c=void 0;a.label===e&&(u=a),s.label===e&&(c=s),u&&c&&(c&&(r=c),u&&(r&&(r.next=u,r=void 0),n||(n=u)))}r&&(r.next=n)},js.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}})),t},js.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}));var e=[];return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e},js.prototype._findIntersectionNodes=function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++r})),r>1&&e.push(n.from),n=n.next};do{r()}while(!t.isEqual(n));return e},js.prototype._findEdgeRing=function(t){var e=t,n=new Ds;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},js.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},js.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()};var Fs=yt((function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n})),zs=(Fs.shim,yt((function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var i="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=i?n:r).supported=n,e.unsupported=r}))),Bs=(zs.supported,zs.unsupported,yt((function(t){function e(t){return null===t||void 0===t}function n(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&"function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0])}var r=Array.prototype.slice,i=t.exports=function(t,o,a){return a||(a={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?a.strict?t===o:t==o:function(t,o,a){var s,u;if(e(t)||e(o))return!1;if(t.prototype!==o.prototype)return!1;if(zs(t))return!!zs(o)&&(t=r.call(t),o=r.call(o),i(t,o,a));if(n(t)){if(!n(o))return!1;if(t.length!==o.length)return!1;for(s=0;s<t.length;s++)if(t[s]!==o[s])return!1;return!0}try{var c=Fs(t),l=Fs(o)}catch(t){return!1}if(c.length!=l.length)return!1;for(c.sort(),l.sort(),s=c.length-1;s>=0;s--)if(c[s]!=l[s])return!1;for(s=c.length-1;s>=0;s--)if(u=c[s],!i(t[u],o[u],a))return!1;return typeof t==typeof o}(t,o,a))}}))),Us=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:Ir};Us.prototype.compare=function(t,e){if(t.type!==e.type||!Pr(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=Mr(t),i=Mr(e);return r.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),i)}}return!1},Us.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},Us.prototype.compareLine=function(t,e,n,r){if(!Pr(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var a=this.compareCoord(i[n],o[n]);return this.direction||a?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},Us.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},Us.prototype.comparePath=function(t,e){var n=this;return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},Us.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every((function(t){return this.some((function(e){return i.compareLine(t,e,1,!0)}))}),r)}return!1},Us.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},Us.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},Us.prototype.removePseudo=function(t){return t};var Vs=Us,qs=yt((function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(i,a),this._expandCluster(a,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)})),Gs=yt((function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var a=new Array(l),s=0,u=0;u<l;u++)a[u]=0;for(var c=0;c<n;c++){var l=this.dataset[c].length;if(o===this.assignments[c]){for(u=0;u<l;u++)a[u]+=this.dataset[c][u];s++}}if(s>0){for(u=0;u<l;u++)a[u]/=s;this.centroids[o]=a}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,a=e.length,s=0;s<a;s++)(r=n(t,e[s]))<i&&(i=r,o=s);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)})),Hs=yt((function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?e>i&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)})),Ws=yt((function(t){function e(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}if(t.exports)var n=Hs;e.prototype.run=function(t,e,r,i){this._init(t,e,r,i);for(var o=0,a=this.dataset.length;o<a;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var s=this.clusters.length-1;this._orderedList.push(o);var u=new n(null,null,"asc"),c=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,c,u),this._expandCluster(s,u))}return this.clusters},e.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===r._processed[e]){var i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i);void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o))}}))},e.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var a=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,a,e),this._expandCluster(t,e))}}},e.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},e.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)})),Xs=yt((function(t){t.exports&&(t.exports={DBSCAN:qs,KMEANS:Gs,OPTICS:Ws,PriorityQueue:Hs})})),Zs=(Xs.DBSCAN,Xs.KMEANS,Xs.OPTICS,Xs.PriorityQueue,function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var a=(t[o]||0)-(e[o]||0);i+=a*a}return n?Math.sqrt(i):i}),Ys=Zs,Ks=function(t,e,n){var r=Math.abs(t-e);return n?r:r*r},Js=Zs,Qs=function(t,e){for(var n={},r=[],i=e<<2,o=t.length,a=t[0].length>0;r.length<e&&i-- >0;){var s=t[Math.floor(Math.random()*o)],u=a?s.join("_"):""+s;n[u]||(n[u]=!0,r.push(s))}if(r.length<e)throw new Error("Error initializating clusters");return r},$s=function(t,e){var n=t[0].length?Ys:Ks,r=[],i=t.length,o=t[0].length>0,a=t[Math.floor(Math.random()*i)];for(o&&a.join("_"),r.push(a);r.length<e;){for(var s=[],u=r.length,c=0,l=[],f=0;f<i;f++){for(var p=1/0,h=0;h<u;h++){var d=n(t[f],r[h]);d<=p&&(p=d)}s[f]=p}for(var v=0;v<i;v++)c+=s[v];for(var m=0;m<i;m++)l[m]={i:m,v:t[m],pr:s[m]/c,cs:0};l.sort((function(t,e){return t.pr-e.pr})),l[0].cs=l[0].pr;for(var g=1;g<i;g++)l[g].cs=l[g-1].cs+l[g].pr;for(var y=Math.random(),b=0;b<i-1&&l[b++].cs<y;);r.push(l[b-1].v)}return r},tu=1e4,eu=function(t,e,n,r){var i=[],o=[],a=[],s=[],u=!1,c=r||tu,l=t.length,f=t[0].length,p=f>0,h=[];if(n)i="kmrand"==n?Qs(t,e):"kmpp"==n?$s(t,e):n;else for(var d={};i.length<e;){var v=Math.floor(Math.random()*l);d[v]||(d[v]=!0,i.push(t[v]))}do{Rr(e,0,h);for(var m=0;m<l;m++){for(var g=1/0,y=0,b=0;b<e;b++)(s=p?Js(t[m],i[b]):Math.abs(t[m]-i[b]))<=g&&(g=s,y=b);a[m]=y,h[y]++}for(var _=[],x=(o=[],0);x<e;x++)_[x]=p?Rr(f,0,_[x]):0,o[x]=i[x];if(p){for(var w=0;w<e;w++)i[w]=[];for(var E=0;E<l;E++)for(var S=_[a[E]],C=t[E],T=0;T<f;T++)S[T]+=C[T];u=!0;for(var O=0;O<e;O++){for(var A=i[O],k=_[O],M=o[O],P=h[O],I=0;I<f;I++)A[I]=k[I]/P||0;if(u)for(var L=0;L<f;L++)if(M[L]!=A[L]){u=!1;break}}}else{for(var R=0;R<l;R++)_[a[R]]+=t[R];for(var D=0;D<e;D++)i[D]=_[D]/h[D]||0;u=!0;for(var N=0;N<e;N++)if(o[N]!=i[N]){u=!1;break}}u=u||--c<=0}while(!u);return{it:tu-c,k:e,idxs:a,centroids:i}},nu={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||nu.heuristics.manhattan,o=r.closest||!1,a=new zr((function(t){return t.f})),s=e;for(e.h=i(e,n),a.push(e);a.size()>0;){var u=a.pop();if(u===n)return Nr(u);u.closed=!0;for(var c=t.neighbors(u),l=0,f=c.length;l<f;++l){var p=c[l];if(!p.closed&&!p.isWall()){var h=u.g+p.getCost(u),d=p.visited;(!d||h<p.g)&&(p.visited=!0,p.parent=u,p.h=p.h||i(p,n),p.g=h,p.f=p.g+p.h,t.markDirty(p),o&&(p.h<s.h||p.h===s.h&&p.g<s.g)&&(s=p),d?a.rescoreElement(p):a.push(p))}}}return o?Nr(s):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};jr.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)nu.cleanNode(this.nodes[t])},jr.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)nu.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},jr.prototype.markDirty=function(t){this.dirtyNodes.push(t)},jr.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},jr.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,a=0,s=o.length;a<s;a++){for(t=[],n=0,r=(e=o[a]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},Fr.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Fr.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Fr.prototype.isWall=function(){return 0===this.weight},zr.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,a=o-1,s=null;if(a<e){var u=this.content[a];(i=this.scoreFunction(u))<r&&(s=a)}if(o<e){var c=this.content[o];this.scoreFunction(c)<(null===s?r:i)&&(s=o)}if(null===s)break;this.content[t]=this.content[s],this.content[s]=n,t=s}}};var ru=function(t){return function(){return t}};Vr.prototype={constructor:Vr,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Wr(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Gr(this,n),n=(t=n).U),n.C=!1,r.C=!0,Hr(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Hr(this,n),n=(t=n).U),n.C=!1,r.C=!0,Gr(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?Wr(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Gr(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Hr(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Gr(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Hr(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Gr(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Hr(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var iu,ou,au,su,uu,cu=[],lu=[],fu=1e-6,pu=1e-12;li.prototype={constructor:li,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return $r(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,s=n.site,u=-1,c=e[i[o-1]],l=c.left===s?c.right:c.left;++u<o;)a=l,l=(c=e[i[u]]).left===s?c.right:c.left,a&&l&&r<a.index&&r<l.index&&ui(s,a,l)<0&&t.push([s.data,a.data,l.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;var u=t-i.site[0],c=e-i.site[1],l=u*u+c*c;do{i=o.cells[r=a],a=null,i.halfedges.forEach((function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=t-s[0],c=e-s[1],f=u*u+c*c;f<l&&(l=f,a=s.index)}}))}while(null!==a);return o._found=r,null==n||l<=n*n?i.site:null}};var hu=function(){function t(t){return new li(t.map((function(r,i){var o=[Math.round(e(r,i,t)/fu)*fu,Math.round(n(r,i,t)/fu)*fu];return o.index=i,o.data=r,o})),r)}var e=Br,n=Ur,r=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(e="function"==typeof n?n:ru(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:ru(+e),t):n},t.extent=function(e){return arguments.length?(r=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},t.size=function(e){return arguments.length?(r=null==e?null:[[0,0],[+e[0],+e[1]]],t):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},t},du=Object.freeze({randomPosition:gi,randomPoint:yi,randomPolygon:bi,randomLineString:_i}),vu=Object.freeze({getCluster:wi,clusterEach:Ei,clusterReduce:Si,createBins:Ci,applyFilter:Ti,propertiesContainsFilter:Oi,filterProperties:Ai});"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(void 0===this||null===this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var mu=function(){};mu.prototype.interfaces_=function(){return[]},mu.prototype.getClass=function(){return mu},mu.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var gu=function(){},yu=function(){},bu={MAX_VALUE:{configurable:!0}};yu.isNaN=function(t){return Number.isNaN(t)},yu.doubleToLongBits=function(t){return t},yu.longBitsToDouble=function(t){return t},yu.isInfinite=function(t){return!Number.isFinite(t)},bu.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(yu,bu);var _u=function(){},xu=function(){},wu=function(){},Eu=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Su={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};Eu.prototype.setOrdinate=function(t,e){switch(t){case Eu.X:this.x=e;break;case Eu.Y:this.y=e;break;case Eu.Z:this.z=e;break;default:throw new gu("Invalid ordinate index: "+t)}},Eu.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!mu.equalsWithTolerance(this.x,e.x,n)&&!!mu.equalsWithTolerance(this.y,e.y,n)}},Eu.prototype.getOrdinate=function(t){switch(t){case Eu.X:return this.x;case Eu.Y:return this.y;case Eu.Z:return this.z}throw new gu("Invalid ordinate index: "+t)},Eu.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||yu.isNaN(this.z))&&yu.isNaN(t.z)},Eu.prototype.equals=function(t){return t instanceof Eu&&this.equals2D(t)},Eu.prototype.equalInZ=function(t,e){return mu.equalsWithTolerance(this.z,t.z,e)},Eu.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},Eu.prototype.clone=function(){},Eu.prototype.copy=function(){return new Eu(this)},Eu.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Eu.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},Eu.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},Eu.prototype.hashCode=function(){var t=17;return t=37*t+Eu.hashCode(this.x),37*t+Eu.hashCode(this.y)},Eu.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},Eu.prototype.interfaces_=function(){return[_u,xu,ki]},Eu.prototype.getClass=function(){return Eu},Eu.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=yu.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},Su.DimensionalComparator.get=function(){return Cu},Su.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},Su.NULL_ORDINATE.get=function(){return yu.NaN},Su.X.get=function(){return 0},Su.Y.get=function(){return 1},Su.Z.get=function(){return 2},Object.defineProperties(Eu,Su);var Cu=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new gu("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};Cu.prototype.compare=function(t,e){var n=t,r=e,i=Cu.compare(n.x,r.x);if(0!==i)return i;var o=Cu.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:Cu.compare(n.z,r.z)},Cu.prototype.interfaces_=function(){return[wu]},Cu.prototype.getClass=function(){return Cu},Cu.compare=function(t,e){return t<e?-1:t>e?1:yu.isNaN(t)?yu.isNaN(e)?0:-1:yu.isNaN(e)?1:0};var Tu=function(){};Tu.prototype.create=function(){},Tu.prototype.interfaces_=function(){return[]},Tu.prototype.getClass=function(){return Tu};var Ou=function(){},Au={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Ou.prototype.interfaces_=function(){return[]},Ou.prototype.getClass=function(){return Ou},Ou.toLocationSymbol=function(t){switch(t){case Ou.EXTERIOR:return"e";case Ou.BOUNDARY:return"b";case Ou.INTERIOR:return"i";case Ou.NONE:return"-"}throw new gu("Unknown location value: "+t)},Au.INTERIOR.get=function(){return 0},Au.BOUNDARY.get=function(){return 1},Au.EXTERIOR.get=function(){return 2},Au.NONE.get=function(){return-1},Object.defineProperties(Ou,Au);var ku=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},Mu=function(){},Pu={LOG_10:{configurable:!0}};Mu.prototype.interfaces_=function(){return[]},Mu.prototype.getClass=function(){return Mu},Mu.log10=function(t){var e=Math.log(t);return yu.isInfinite(e)||yu.isNaN(e)?e:e/Mu.LOG_10},Mu.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},Mu.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},Mu.wrap=function(t,e){return t<0?e- -t%e:t%e},Mu.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=t;return e>r&&(r=e),n>r&&(r=n),r}if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=i;return o>u&&(u=o),a>u&&(u=a),s>u&&(u=s),u}},Mu.average=function(t,e){return(t+e)/2},Pu.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(Mu,Pu);var Iu=function(t){this.str=t};Iu.prototype.append=function(t){this.str+=t},Iu.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},Iu.prototype.toString=function(t){return this.str};var Lu=function(t){this.value=t};Lu.prototype.intValue=function(){return this.value},Lu.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},Lu.isNaN=function(t){return Number.isNaN(t)};var Ru=function(){};Ru.isWhitespace=function(t){return t<=32&&t>=0||127===t},Ru.toUpperCase=function(t){return t.toUpperCase()};var Du=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var r=arguments[0];t.call(this,t.parse(r))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i,o)}},Nu={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};Du.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},Du.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=Du.magnitude(n._hi),i=Du.TEN.pow(r);(n=n.divide(i)).gt(Du.TEN)?(n=n.divide(Du.TEN),r+=1):n.lt(Du.ONE)&&(n=n.multiply(Du.TEN),r-=1);for(var o=r+1,a=new Iu,s=Du.MAX_PRINT_DIGITS-1,u=0;u<=s;u++){t&&u===o&&a.append(".");var c=Math.trunc(n._hi);if(c<0)break;var l=!1,f=0;c>9?(l=!0,f="9"):f="0"+c,a.append(f),n=n.subtract(Du.valueOf(c)).multiply(Du.TEN),l&&n.selfAdd(Du.TEN);var p=!0,h=Du.magnitude(n._hi);if(h<0&&Math.abs(h)>=s-u&&(p=!1),!p)break}return e[0]=r,a.toString()},Du.prototype.sqr=function(){return this.multiply(this)},Du.prototype.doubleValue=function(){return this._hi+this._lo},Du.prototype.subtract=function(){if(arguments[0]instanceof Du){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},Du.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},Du.prototype.isZero=function(){return 0===this._hi&&0===this._lo},Du.prototype.selfSubtract=function(){if(arguments[0]instanceof Du){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},Du.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},Du.prototype.min=function(t){return this.le(t)?this:t},Du.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof Du){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,c=null,l=null,f=null;return u=this._hi/n,c=Du.SPLIT*u,i=c-u,f=Du.SPLIT*n,i=c-i,o=u-i,a=f-n,l=u*n,a=f-a,s=n-a,f=i*a-l+i*s+o*a+o*s,c=(this._hi-l-f+this._lo-u*r)/n,f=u+c,this._hi=f,this._lo=u-f+c,this}},Du.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},Du.prototype.divide=function(){if(arguments[0]instanceof Du){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,a=null,s=null,u=null;return n=(o=this._hi/t._hi)-(e=(a=Du.SPLIT*o)-(e=a-o)),u=e*(r=(u=Du.SPLIT*t._hi)-(r=u-t._hi))-(s=o*t._hi)+e*(i=t._hi-r)+n*r+n*i,a=(this._hi-s-u+this._lo-o*t._lo)/t._hi,new Du(u=o+a,o-u+a)}if("number"==typeof arguments[0]){var c=arguments[0];return yu.isNaN(c)?Du.createNaN():Du.copy(this).selfDivide(c,0)}},Du.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},Du.prototype.pow=function(t){if(0===t)return Du.valueOf(1);var e=new Du(this),n=Du.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},Du.prototype.ceil=function(){if(this.isNaN())return Du.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new Du(t,e)},Du.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},Du.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},Du.prototype.setValue=function(){if(arguments[0]instanceof Du){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},Du.prototype.max=function(t){return this.ge(t)?this:t},Du.prototype.sqrt=function(){if(this.isZero())return Du.valueOf(0);if(this.isNegative())return Du.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=Du.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},Du.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof Du){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,a=null,s=null;return i=this._hi+e,a=i-this._hi,o=i-a,o=e-a+(this._hi-o),s=o+this._lo,n=i+s,r=s+(i-n),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],c=arguments[1],l=null,f=null,p=null,h=null,d=null,v=null,m=null;h=this._hi+u,f=this._lo+c,d=h-(v=h-this._hi),p=f-(m=f-this._lo);var g=(l=h+(v=(d=u-v+(this._hi-d))+f))+(v=(p=c-m+(this._lo-p))+(v+(h-l))),y=v+(l-g);return this._hi=g,this._lo=y,this}},Du.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof Du){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,c=null;i=(u=Du.SPLIT*this._hi)-this._hi,c=Du.SPLIT*n,i=u-i,o=this._hi-i,a=c-n;var l=(u=this._hi*n)+(c=i*(a=c-a)-u+i*(s=n-a)+o*a+o*s+(this._hi*r+this._lo*n)),f=c+(i=u-l);return this._hi=l,this._lo=f,this}},Du.prototype.selfSqr=function(){return this.selfMultiply(this)},Du.prototype.floor=function(){if(this.isNaN())return Du.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new Du(t,e)},Du.prototype.negate=function(){return this.isNaN()?this:new Du(-this._hi,-this._lo)},Du.prototype.clone=function(){},Du.prototype.multiply=function(){if(arguments[0]instanceof Du){var t=arguments[0];return t.isNaN()?Du.createNaN():Du.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return yu.isNaN(e)?Du.createNaN():Du.copy(this).selfMultiply(e,0)}},Du.prototype.isNaN=function(){return yu.isNaN(this._hi)},Du.prototype.intValue=function(){return Math.trunc(this._hi)},Du.prototype.toString=function(){var t=Du.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},Du.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+Du.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+Du.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},Du.prototype.reciprocal=function(){var t=null,e=null,n=null,r=null,i=null,o=null,a=null,s=null;e=(i=1/this._hi)-(t=(o=Du.SPLIT*i)-(t=o-i)),n=(s=Du.SPLIT*this._hi)-this._hi;var u=i+(o=(1-(a=i*this._hi)-(s=t*(n=s-n)-a+t*(r=this._hi-n)+e*n+e*r)-i*this._lo)/this._hi);return new Du(u,i-u+o)},Du.prototype.toSciNotation=function(){if(this.isZero())return Du.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=Du.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},Du.prototype.abs=function(){return this.isNaN()?Du.NaN:this.isNegative()?this.negate():new Du(this)},Du.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},Du.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},Du.prototype.add=function(){if(arguments[0]instanceof Du){var t=arguments[0];return Du.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Du.copy(this).selfAdd(e)}},Du.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof Du){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},Du.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},Du.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},Du.prototype.trunc=function(){return this.isNaN()?Du.NaN:this.isPositive()?this.floor():this.ceil()},Du.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},Du.prototype.interfaces_=function(){return[ki,_u,xu]},Du.prototype.getClass=function(){return Du},Du.sqr=function(t){return Du.valueOf(t).selfMultiply(t)},Du.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return Du.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new Du(e)}},Du.sqrt=function(t){return Du.valueOf(t).sqrt()},Du.parse=function(t){for(var e=0,n=t.length;Ru.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new Du,a=0,s=0,u=0;!(e>=n);){var c=t.charAt(e);if(e++,Ru.isDigit(c)){var l=c-"0";o.selfMultiply(Du.TEN),o.selfAdd(l),a++}else{if("."!==c){if("e"===c||"E"===c){var f=t.substring(e);try{u=Lu.parseInt(f)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+f+" in string "+t):e}break}throw new Error("Unexpected character '"+c+"' at position "+e+" in string "+t)}s=a}}var p=o,h=a-s-u;if(0===h)p=o;else if(h>0){var d=Du.TEN.pow(h);p=o.divide(d)}else if(h<0){var v=Du.TEN.pow(-h);p=o.multiply(v)}return r?p.negate():p},Du.createNaN=function(){return new Du(yu.NaN,yu.NaN)},Du.copy=function(t){return new Du(t)},Du.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},Du.stringOfChar=function(t,e){for(var n=new Iu,r=0;r<e;r++)n.append(t);return n.toString()},Nu.PI.get=function(){return new Du(3.141592653589793,12246467991473532e-32)},Nu.TWO_PI.get=function(){return new Du(6.283185307179586,24492935982947064e-32)},Nu.PI_2.get=function(){return new Du(1.5707963267948966,6123233995736766e-32)},Nu.E.get=function(){return new Du(2.718281828459045,14456468917292502e-32)},Nu.NaN.get=function(){return new Du(yu.NaN,yu.NaN)},Nu.EPS.get=function(){return 123259516440783e-46},Nu.SPLIT.get=function(){return 134217729},Nu.MAX_PRINT_DIGITS.get=function(){return 32},Nu.TEN.get=function(){return Du.valueOf(10)},Nu.ONE.get=function(){return Du.valueOf(1)},Nu.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Nu.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(Du,Nu);var ju=function(){},Fu={DP_SAFE_EPSILON:{configurable:!0}};ju.prototype.interfaces_=function(){return[]},ju.prototype.getClass=function(){return ju},ju.orientationIndex=function(t,e,n){var r=ju.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=Du.valueOf(e.x).selfAdd(-t.x),o=Du.valueOf(e.y).selfAdd(-t.y),a=Du.valueOf(n.x).selfAdd(-e.x),s=Du.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},ju.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},ju.intersection=function(t,e,n,r){var i=Du.valueOf(r.y).selfSubtract(n.y).selfMultiply(Du.valueOf(e.x).selfSubtract(t.x)),o=Du.valueOf(r.x).selfSubtract(n.x).selfMultiply(Du.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=Du.valueOf(r.x).selfSubtract(n.x).selfMultiply(Du.valueOf(t.y).selfSubtract(n.y)),u=Du.valueOf(r.y).selfSubtract(n.y).selfMultiply(Du.valueOf(t.x).selfSubtract(n.x)),c=s.subtract(u).selfDivide(a).doubleValue(),l=Du.valueOf(t.x).selfAdd(Du.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),f=Du.valueOf(e.x).selfSubtract(t.x).selfMultiply(Du.valueOf(t.y).selfSubtract(n.y)),p=Du.valueOf(e.y).selfSubtract(t.y).selfMultiply(Du.valueOf(t.x).selfSubtract(n.x)),h=f.subtract(p).selfDivide(a).doubleValue(),d=Du.valueOf(n.y).selfAdd(Du.valueOf(r.y).selfSubtract(n.y).selfMultiply(h)).doubleValue();return new Eu(l,d)},ju.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=i-o;if(i>0){if(o<=0)return ju.signum(a);r=i+o}else{if(!(i<0))return ju.signum(a);if(o>=0)return ju.signum(a);r=-i-o}var s=ju.DP_SAFE_EPSILON*r;return a>=s||-a>=s?ju.signum(a):2},ju.signum=function(t){return t>0?1:t<0?-1:0},Fu.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(ju,Fu);var zu=function(){},Bu={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Bu.X.get=function(){return 0},Bu.Y.get=function(){return 1},Bu.Z.get=function(){return 2},Bu.M.get=function(){return 3},zu.prototype.setOrdinate=function(t,e,n){},zu.prototype.size=function(){},zu.prototype.getOrdinate=function(t,e){},zu.prototype.getCoordinate=function(){},zu.prototype.getCoordinateCopy=function(t){},zu.prototype.getDimension=function(){},zu.prototype.getX=function(t){},zu.prototype.clone=function(){},zu.prototype.expandEnvelope=function(t){},zu.prototype.copy=function(){},zu.prototype.getY=function(t){},zu.prototype.toCoordinateArray=function(){},zu.prototype.interfaces_=function(){return[xu]},zu.prototype.getClass=function(){return zu},Object.defineProperties(zu,Bu);var Uu=function(){},Vu=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Uu),qu=function(){};qu.arraycopy=function(t,e,n,r,i){for(var o=0,a=e;a<e+i;a++)n[r+o]=t[a],o++},qu.getProperty=function(t){return{"line.separator":"\n"}[t]};var Gu=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof Eu&&arguments[1]instanceof Eu){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2];this.x=u,this.y=c,this.w=l}else if(4===arguments.length){var f=arguments[0],p=arguments[1],h=arguments[2],d=arguments[3],v=f.y-p.y,m=p.x-f.x,g=f.x*p.y-p.x*f.y,y=h.y-d.y,b=d.x-h.x,_=h.x*d.y-d.x*h.y;this.x=m*_-b*g,this.y=y*g-v*_,this.w=v*b-y*m}};Gu.prototype.getY=function(){var t=this.y/this.w;if(yu.isNaN(t)||yu.isInfinite(t))throw new Vu;return t},Gu.prototype.getX=function(){var t=this.x/this.w;if(yu.isNaN(t)||yu.isInfinite(t))throw new Vu;return t},Gu.prototype.getCoordinate=function(){var t=new Eu;return t.x=this.getX(),t.y=this.getY(),t},Gu.prototype.interfaces_=function(){return[]},Gu.prototype.getClass=function(){return Gu},Gu.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-r.y,u=r.x-n.x,c=n.x*r.y-r.x*n.y,l=i*u-s*o,f=(o*c-u*a)/l,p=(s*a-i*c)/l;if(yu.isNaN(f)||yu.isInfinite(f)||yu.isNaN(p)||yu.isInfinite(p))throw new Vu;return new Eu(f,p)};var Hu=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof Eu){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];this.init(o,a,s,u)}},Wu={serialVersionUID:{configurable:!0}};Hu.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Hu.prototype.equals=function(t){if(!(t instanceof Hu))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Hu.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Hu;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new Hu(e,r,n,i)},Hu.prototype.isNull=function(){return this._maxx<this._minx},Hu.prototype.getMaxX=function(){return this._maxx},Hu.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof Eu){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Hu){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},Hu.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Hu){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof Eu){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},Hu.prototype.getMinY=function(){return this._miny},Hu.prototype.getMinX=function(){return this._minx},Hu.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof Eu){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Hu){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},Hu.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Hu.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Hu.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Hu.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Hu.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Hu.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Hu.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Hu.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Hu.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Hu.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Hu){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof Eu){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},Hu.prototype.centre=function(){return this.isNull()?null:new Eu((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Hu.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof Eu){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Hu){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},Hu.prototype.getMaxY=function(){return this._maxy},Hu.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},Hu.prototype.hashCode=function(){var t=17;return t=37*t+Eu.hashCode(this._minx),t=37*t+Eu.hashCode(this._maxx),t=37*t+Eu.hashCode(this._miny),37*t+Eu.hashCode(this._maxy)},Hu.prototype.interfaces_=function(){return[_u,ki]},Hu.prototype.getClass=function(){return Hu},Hu.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),u=Math.max(o.x,a.x),c=Math.min(r.x,i.x),l=Math.max(r.x,i.x);return!(c>u)&&!(l<s)&&(s=Math.min(o.y,a.y),u=Math.max(o.y,a.y),c=Math.min(r.y,i.y),l=Math.max(r.y,i.y),!(c>u)&&!(l<s))}},Wu.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Hu,Wu);var Xu={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Zu=function(t){this.geometryFactory=t||new gl};Zu.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=Xu.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=Xu.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],Ku[n]&&(e=Ku[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Zu.prototype.write=function(t){return this.extractGeometry(t)},Zu.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Yu[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Yu[e].apply(this,[t])+")"};var Yu={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Yu.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Yu.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Yu.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Yu.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Yu.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Yu.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+Yu.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Yu.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},Ku={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Xu.spaces);return this.geometryFactory.createPoint(new Eu(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Xu.trimParens,"$1"),r.push(Ku.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Xu.spaces),r.push(new Eu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Xu.spaces),r.push(new Eu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(Xu.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Xu.trimParens,"$1"),r.push(Ku.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(Xu.parenComma),a=[],s=0,u=o.length;s<u;++s)e=o[s].replace(Xu.trimParens,"$1"),n=Ku.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(Xu.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Xu.trimParens,"$1"),r.push(Ku.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},Ju=function(t){this.parser=new Zu(t)};Ju.prototype.write=function(t){return this.parser.write(t)},Ju.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Qu=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),$u=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Qu),tc=function(){};tc.prototype.interfaces_=function(){return[]},tc.prototype.getClass=function(){return tc},tc.shouldNeverReachHere=function(){if(0===arguments.length)tc.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new $u("Should never reach here"+(null!==t?": "+t:""))}},tc.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],tc.isTrue(t,null);else if(2===arguments.length&&(t=arguments[0],e=arguments[1],!t))throw null===e?new $u:new $u(e)},tc.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],tc.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],!e.equals(t)))throw new $u("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var ec=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Eu,this._intPt[1]=new Eu,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},nc={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};ec.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},ec.prototype.getTopologySummary=function(){var t=new Iu;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},ec.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},ec.prototype.getIntersectionNum=function(){return this._result},ec.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},ec.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},ec.prototype.setPrecisionModel=function(t){this._precisionModel=t},ec.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},ec.prototype.getIntersection=function(t){return this._intPt[t]},ec.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},ec.prototype.hasIntersection=function(){return this._result!==ec.NO_INTERSECTION},ec.prototype.getEdgeDistance=function(t,e){return ec.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},ec.prototype.isCollinear=function(){return this._result===ec.COLLINEAR_INTERSECTION},ec.prototype.toString=function(){return Ju.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Ju.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},ec.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},ec.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},ec.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},ec.prototype.interfaces_=function(){return[]},ec.prototype.getClass=function(){return ec},ec.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=r>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return tc.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},ec.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return tc.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},nc.DONT_INTERSECT.get=function(){return 0},nc.DO_INTERSECT.get=function(){return 1},nc.COLLINEAR.get=function(){return 2},nc.NO_INTERSECTION.get=function(){return 0},nc.POINT_INTERSECTION.get=function(){return 1},nc.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(ec,nc);var rc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new Hu(this._inputLines[0][0],this._inputLines[0][1]),n=new Hu(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,Hu.intersects(n,r,e)&&0===ac.orientationIndex(n,r,e)&&0===ac.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=Gu.intersection(t,n,r,i)}catch(a){if(!(a instanceof Vu))throw a;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new Eu(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=ju.intersection(t,e,n,r),a=this.isInSegmentEnvelopes(o);qu.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&qu.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new Eu(t),o=new Eu(e),a=new Eu(n),s=new Eu(r),u=new Eu;this.normalizeToEnvCentre(i,o,a,s,u);var c=this.safeHCoordinateIntersection(i,o,a,s);return c.x+=u.x,c.y+=u.y,c},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=Hu.intersects(e,n,r),a=Hu.intersects(e,n,i),s=Hu.intersects(r,i,e),u=Hu.intersects(r,i,n);return o&&a?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):s&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||a||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,c=n.x<r.x?n.x:r.x,l=n.y<r.y?n.y:r.y,f=n.x>r.x?n.x:r.x,p=n.y>r.y?n.y:r.y,h=((o>c?o:c)+(s<f?s:f))/2,d=((a>l?a:l)+(u<p?u:p))/2;i.x=h,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!Hu.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=ac.orientationIndex(e,n,r),a=ac.orientationIndex(e,n,i);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=ac.orientationIndex(r,i,e),u=ac.orientationIndex(r,i,n);return s>0&&u>0||s<0&&u<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===a||0===s||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new Eu(r):0===a?this._intPt[0]=new Eu(i):0===s?this._intPt[0]=new Eu(e):0===u&&(this._intPt[0]=new Eu(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=ac.distancePointLine(t,n,r),a=ac.distancePointLine(e,n,r);return a<o&&(o=a,i=e),(a=ac.distancePointLine(n,t,e))<o&&(o=a,i=n),(a=ac.distancePointLine(r,t,e))<o&&(o=a,i=r),i},e}(ec),ic=function(){};ic.prototype.interfaces_=function(){return[]},ic.prototype.getClass=function(){return ic},ic.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return ic.signOfDet2x2(r,i,o,a)},ic.signOfDet2x2=function(t,e,n,r){var i=null,o=null,a=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if(a=Math.floor(n/t),n-=a*t,(r-=a*e)<0)return-i;if(r>e)return i;if(t>n+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if(a=Math.floor(t/n),t-=a*n,(e-=a*r)<0)return i;if(e>r)return-i;if(n>t+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var oc=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};oc.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,u=ic.signOfDet2x2(i,o,a,s);if(0===u)return this._isPointOnSegment=!0,null;s<o&&(u=-u),u>0&&this._crossingCount++}},oc.prototype.isPointInPolygon=function(){return this.getLocation()!==Ou.EXTERIOR},oc.prototype.getLocation=function(){return this._isPointOnSegment?Ou.BOUNDARY:this._crossingCount%2==1?Ou.INTERIOR:Ou.EXTERIOR},oc.prototype.isOnSegment=function(){return this._isPointOnSegment},oc.prototype.interfaces_=function(){return[]},oc.prototype.getClass=function(){return oc},oc.locatePointInRing=function(){if(arguments[0]instanceof Eu&&ku(arguments[1],zu)){for(var t=arguments[0],e=arguments[1],n=new oc(t),r=new Eu,i=new Eu,o=1;o<e.size();o++)if(e.getCoordinate(o,r),e.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof Eu&&arguments[1]instanceof Array){for(var a=arguments[0],s=arguments[1],u=new oc(a),c=1;c<s.length;c++){var l=s[c],f=s[c-1];if(u.countSegment(l,f),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var ac=function(){},sc={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};ac.prototype.interfaces_=function(){return[]},ac.prototype.getClass=function(){return ac},ac.orientationIndex=function(t,e,n){return ju.orientationIndex(t,e,n)},ac.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(ku(arguments[0],zu)){var a=arguments[0],s=a.size();if(s<3)return 0;var u=new Eu,c=new Eu,l=new Eu;a.getCoordinate(0,c),a.getCoordinate(1,l);var f=c.x;l.x-=f;for(var p=0,h=1;h<s-1;h++)u.y=c.y,c.x=l.x,c.y=l.y,a.getCoordinate(h+1,l),l.x-=f,p+=c.x*(u.y-l.y);return p/2}},ac.distanceLineLine=function(t,e,n,r){if(t.equals(e))return ac.distancePointLine(t,n,r);if(n.equals(r))return ac.distancePointLine(r,t,e);var i=!1;if(Hu.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=a/o;(u<0||u>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?Mu.min(ac.distancePointLine(t,n,r),ac.distancePointLine(e,n,r),ac.distancePointLine(n,t,e),ac.distancePointLine(r,t,e)):0},ac.isPointInRing=function(t,e){return ac.locatePointInRing(t,e)!==Ou.EXTERIOR},ac.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new Eu;t.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,u=r.y,c=s-i,l=u-o;n+=Math.sqrt(c*c+l*l),i=s,o=u}return n},ac.isCCW=function(t){var e=t.length-1;if(e<3)throw new gu("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==r);var s=r;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==r);var u=t[a],c=t[s];if(u.equals2D(n)||c.equals2D(n)||u.equals2D(c))return!1;var l=ac.computeOrientation(u,n,c),f=!1;return f=0===l?u.x>c.x:l>0,f},ac.locatePointInRing=function(t,e){return oc.locatePointInRing(t,e)},ac.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},ac.computeOrientation=function(t,e,n){return ac.orientationIndex(t,e,n)},ac.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new gu("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=ac.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var u=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),c=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/u;if(c<=0)return o.distance(a);if(c>=1)return o.distance(s);var l=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/u;return Math.abs(l)*Math.sqrt(u)}},ac.isOnLine=function(t,e){for(var n=new rc,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},sc.CLOCKWISE.get=function(){return-1},sc.RIGHT.get=function(){return ac.CLOCKWISE},sc.COUNTERCLOCKWISE.get=function(){return 1},sc.LEFT.get=function(){return ac.COUNTERCLOCKWISE},sc.COLLINEAR.get=function(){return 0},sc.STRAIGHT.get=function(){return ac.COLLINEAR},Object.defineProperties(ac,sc);var uc=function(){};uc.prototype.filter=function(t){},uc.prototype.interfaces_=function(){return[]},uc.prototype.getClass=function(){return uc};var cc=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},lc={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};cc.prototype.isGeometryCollection=function(){return this.getSortIndex()===cc.SORTINDEX_GEOMETRYCOLLECTION},cc.prototype.getFactory=function(){return this._factory},cc.prototype.getGeometryN=function(t){return this},cc.prototype.getArea=function(){return 0},cc.prototype.isRectangle=function(){return!1},cc.prototype.equals=function(){if(arguments[0]instanceof cc){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof cc))return!1;var n=e;return this.equalsExact(n)}},cc.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},cc.prototype.geometryChanged=function(){this.apply(cc.geometryChangedFilter)},cc.prototype.geometryChangedAction=function(){this._envelope=null},cc.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},cc.prototype.getLength=function(){return 0},cc.prototype.getNumGeometries=function(){return 1},cc.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},cc.prototype.getUserData=function(){return this._userData},cc.prototype.getSRID=function(){return this._SRID},cc.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},cc.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===cc.SORTINDEX_GEOMETRYCOLLECTION)throw new gu("This method does not support GeometryCollection arguments")},cc.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},cc.prototype.norm=function(){var t=this.copy();return t.normalize(),t},cc.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},cc.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Hu(this._envelope)},cc.prototype.setSRID=function(t){this._SRID=t},cc.prototype.setUserData=function(t){this._userData=t},cc.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},cc.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},cc.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===cc.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===cc.SORTINDEX_MULTIPOINT||this.getSortIndex()===cc.SORTINDEX_MULTILINESTRING||this.getSortIndex()===cc.SORTINDEX_MULTIPOLYGON},cc.prototype.interfaces_=function(){return[xu,_u,ki]},cc.prototype.getClass=function(){return cc},cc.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},cc.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},lc.serialVersionUID.get=function(){return 0x799ea46522854c00},lc.SORTINDEX_POINT.get=function(){return 0},lc.SORTINDEX_MULTIPOINT.get=function(){return 1},lc.SORTINDEX_LINESTRING.get=function(){return 2},lc.SORTINDEX_LINEARRING.get=function(){return 3},lc.SORTINDEX_MULTILINESTRING.get=function(){return 4},lc.SORTINDEX_POLYGON.get=function(){return 5},lc.SORTINDEX_MULTIPOLYGON.get=function(){return 6},lc.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},lc.geometryChangedFilter.get=function(){return fc},Object.defineProperties(cc,lc);var fc=function(){};fc.interfaces_=function(){return[uc]},fc.filter=function(t){t.geometryChangedAction()};var pc=function(){};pc.prototype.filter=function(t){},pc.prototype.interfaces_=function(){return[]},pc.prototype.getClass=function(){return pc};var hc=function(){},dc={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};hc.prototype.isInBoundary=function(t){},hc.prototype.interfaces_=function(){return[]},hc.prototype.getClass=function(){return hc},dc.Mod2BoundaryNodeRule.get=function(){return vc},dc.EndPointBoundaryNodeRule.get=function(){return mc},dc.MultiValentEndPointBoundaryNodeRule.get=function(){return gc},dc.MonoValentEndPointBoundaryNodeRule.get=function(){return yc},dc.MOD2_BOUNDARY_RULE.get=function(){return new vc},dc.ENDPOINT_BOUNDARY_RULE.get=function(){return new mc},dc.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new gc},dc.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new yc},dc.OGC_SFS_BOUNDARY_RULE.get=function(){return hc.MOD2_BOUNDARY_RULE},Object.defineProperties(hc,dc);var vc=function(){};vc.prototype.isInBoundary=function(t){return t%2==1},vc.prototype.interfaces_=function(){return[hc]},vc.prototype.getClass=function(){return vc};var mc=function(){};mc.prototype.isInBoundary=function(t){return t>0},mc.prototype.interfaces_=function(){return[hc]},mc.prototype.getClass=function(){return mc};var gc=function(){};gc.prototype.isInBoundary=function(t){return t>1},gc.prototype.interfaces_=function(){return[hc]},gc.prototype.getClass=function(){return gc};var yc=function(){};yc.prototype.isInBoundary=function(t){return 1===t},yc.prototype.interfaces_=function(){return[hc]},yc.prototype.getClass=function(){return yc};var bc=function(){};bc.prototype.add=function(){},bc.prototype.addAll=function(){},bc.prototype.isEmpty=function(){},bc.prototype.iterator=function(){},bc.prototype.size=function(){},bc.prototype.toArray=function(){},bc.prototype.remove=function(){};var _c=function(t){function e(e){t.call(this),this.message=e||""}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={name:{configurable:!0}};return n.name.get=function(){return"IndexOutOfBoundsException"},Object.defineProperties(e,n),e}(Error),xc=function(){};xc.prototype.hasNext=function(){},xc.prototype.next=function(){},xc.prototype.remove=function(){};var wc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(bc);(Mi.prototype=new Error).name="NoSuchElementException";var Ec=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bc&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,bc]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Sc(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new _c;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(wc),Sc=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Mi;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(xc),Cc=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=!1,i=e.iterator();i.hasNext();)this.add(i.next(),n),r=!0;return r}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof Eu&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],u=arguments[1];if(arguments[2])for(var c=0;c<s.length;c++)this.add(s[c],u);else for(var l=s.length-1;l>=0;l--)this.add(s[l],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof Eu){var f=arguments[0],p=arguments[1];if(!arguments[2]){var h=this.size();if(h>0){if(f>0&&this.get(f-1).equals2D(p))return null;if(f<h&&this.get(f).equals2D(p))return null}}t.prototype.add.call(this,f,p)}}else if(4===arguments.length){var d=arguments[0],v=arguments[1],m=arguments[2],g=arguments[3],y=1;m>g&&(y=-1);for(var b=m;b!==g;b+=y)this.add(d[b],v);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new Eu(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(Ec),Tc=function(){},Oc={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Oc.ForwardComparator.get=function(){return Ac},Oc.BidirectionalComparator.get=function(){return kc},Oc.coordArrayType.get=function(){return new Array(0).fill(null)},Tc.prototype.interfaces_=function(){return[]},Tc.prototype.getClass=function(){return Tc},Tc.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},Tc.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Tc.indexOf(r,e)<0)return r}return null},Tc.scroll=function(t,e){var n=Tc.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);qu.arraycopy(t,n,r,0,t.length-n),qu.arraycopy(t,0,r,t.length-n,n),qu.arraycopy(r,0,t,0,t.length)},Tc.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},Tc.intersection=function(t,e){for(var n=new Cc,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Tc.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Tc.removeRepeatedPoints=function(t){return Tc.hasRepeatedPoints(t)?new Cc(t,!1).toCoordinateArray():t},Tc.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},Tc.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},Tc.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new Eu(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],u=0;u<s;u++)o[a+u]=new Eu(r[i+u])},Tc.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},Tc.envelope=function(t){for(var e=new Hu,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Tc.toCoordinateArray=function(t){return t.toArray(Tc.coordArrayType)},Tc.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Tc.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Tc.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},Tc.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},Tc.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Tc.extract=function(t,e,n){e=Mu.clamp(e,0,t.length);var r=(n=Mu.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=e;a<=n;a++)i[o++]=t[a];return i},Object.defineProperties(Tc,Oc);var Ac=function(){};Ac.prototype.compare=function(t,e){return Tc.compare(t,e)},Ac.prototype.interfaces_=function(){return[wu]},Ac.prototype.getClass=function(){return Ac};var kc=function(){};kc.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Tc.compare(n,r);return Tc.isEqualReversed(n,r)?0:i},kc.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Tc.increasingDirection(n),o=Tc.increasingDirection(r),a=i>0?0:n.length-1,s=o>0?0:n.length-1,u=0;u<n.length;u++){var c=n[a].compareTo(r[s]);if(0!==c)return c;a+=i,s+=o}return 0},kc.prototype.interfaces_=function(){return[wu]},kc.prototype.getClass=function(){return kc};var Mc=function(){};Mc.prototype.get=function(){},Mc.prototype.put=function(){},Mc.prototype.size=function(){},Mc.prototype.values=function(){},Mc.prototype.entrySet=function(){};var Pc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Mc);(Pi.prototype=new Error).name="OperationNotSupported",(Ii.prototype=new bc).contains=function(){};var Ic=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bc&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Lc(this)},e}(Ii),Lc=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Mi;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new Pi},e}(xc),Rc=0;(Fi.prototype=new Pc).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},Fi.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Rc,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:n,color:Rc,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},Fi.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(Ri(t)===Ni(Ri(Ri(t)))){var e=ji(Ri(Ri(t)));1===Li(e)?(Di(Ri(t),Rc),Di(e,Rc),Di(Ri(Ri(t)),1),t=Ri(Ri(t))):(t===ji(Ri(t))&&(t=Ri(t),this.rotateLeft(t)),Di(Ri(t),Rc),Di(Ri(Ri(t)),1),this.rotateRight(Ri(Ri(t))))}else{var n=Ni(Ri(Ri(t)));1===Li(n)?(Di(Ri(t),Rc),Di(n,Rc),Di(Ri(Ri(t)),1),t=Ri(Ri(t))):(t===Ni(Ri(t))&&(t=Ri(t),this.rotateRight(t)),Di(Ri(t),Rc),Di(Ri(Ri(t)),1),this.rotateLeft(Ri(Ri(t))))}this.root_.color=Rc},Fi.prototype.values=function(){var t=new Ec,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Fi.successor(e));)t.add(e.value);return t},Fi.prototype.entrySet=function(){var t=new Ic,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Fi.successor(e));)t.add(e);return t},Fi.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Fi.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Fi.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Fi.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},Fi.prototype.size=function(){return this.size_};var Dc=function(){};Dc.prototype.interfaces_=function(){return[]},Dc.prototype.getClass=function(){return Dc},zi.prototype=new Ii,(Bi.prototype=new zi).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},Bi.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},Bi.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Bi.prototype.remove=function(t){throw new Pi},Bi.prototype.size=function(){return this.array_.length},Bi.prototype.isEmpty=function(){return 0===this.array_.length},Bi.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},Bi.prototype.iterator=function(){return new Nc(this)};var Nc=function(t){this.treeSet_=t,this.position_=0};Nc.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Mi;return this.treeSet_.array_[this.position_++]},Nc.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Nc.prototype.remove=function(){throw new Pi};var jc=function(){};jc.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},jc.asList=function(t){for(var e=new Ec,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var Fc=function(){},zc={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};zc.P.get=function(){return 0},zc.L.get=function(){return 1},zc.A.get=function(){return 2},zc.FALSE.get=function(){return-1},zc.TRUE.get=function(){return-2},zc.DONTCARE.get=function(){return-3},zc.SYM_FALSE.get=function(){return"F"},zc.SYM_TRUE.get=function(){return"T"},zc.SYM_DONTCARE.get=function(){return"*"},zc.SYM_P.get=function(){return"0"},zc.SYM_L.get=function(){return"1"},zc.SYM_A.get=function(){return"2"},Fc.prototype.interfaces_=function(){return[]},Fc.prototype.getClass=function(){return Fc},Fc.toDimensionSymbol=function(t){switch(t){case Fc.FALSE:return Fc.SYM_FALSE;case Fc.TRUE:return Fc.SYM_TRUE;case Fc.DONTCARE:return Fc.SYM_DONTCARE;case Fc.P:return Fc.SYM_P;case Fc.L:return Fc.SYM_L;case Fc.A:return Fc.SYM_A}throw new gu("Unknown dimension value: "+t)},Fc.toDimensionValue=function(t){switch(Ru.toUpperCase(t)){case Fc.SYM_FALSE:return Fc.FALSE;case Fc.SYM_TRUE:return Fc.TRUE;case Fc.SYM_DONTCARE:return Fc.DONTCARE;case Fc.SYM_P:return Fc.P;case Fc.SYM_L:return Fc.L;case Fc.SYM_A:return Fc.A}throw new gu("Unknown dimension symbol: "+t)},Object.defineProperties(Fc,zc);var Bc=function(){};Bc.prototype.filter=function(t){},Bc.prototype.interfaces_=function(){return[]},Bc.prototype.getClass=function(){return Bc};var Uc=function(){};Uc.prototype.filter=function(t,e){},Uc.prototype.isDone=function(){},Uc.prototype.isGeometryChanged=function(){},Uc.prototype.interfaces_=function(){return[]},Uc.prototype.getClass=function(){return Uc};var Vc=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new gu("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new Hu,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();jc.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Fc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Fc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new Bi(jc.asList(this._geometries)),n=new Bi(jc.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o=r,a=this.getNumGeometries(),s=o.getNumGeometries(),u=0;u<a&&u<s;){var c=this.getGeometryN(u),l=o.getGeometryN(u),f=c.compareToSameClass(l,i);if(0!==f)return f;u++}return u<a?1:u<s?-1:0}},e.prototype.apply=function(){if(ku(arguments[0],pc))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(ku(arguments[0],Uc)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(ku(arguments[0],Bc)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(ku(arguments[0],uc)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),tc.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(cc),qc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return cc.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Fc.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Gc(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Dc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(Vc),Gc=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=hc.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};Gc.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Gc.prototype.getBoundary=function(){return this._geom instanceof Yc?this.boundaryLineString(this._geom):this._geom instanceof qc?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Gc.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Gc.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Gc.prototype.computeBoundaryCoordinates=function(t){var e=new Ec;this._endpointMap=new Fi;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return Tc.toCoordinateArray(e)},Gc.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Hc,this._endpointMap.put(t,e)),e.count++},Gc.prototype.interfaces_=function(){return[]},Gc.prototype.getClass=function(){return Gc},Gc.getBoundary=function(){if(1===arguments.length){var t=arguments[0];return new Gc(t).getBoundary()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new Gc(e,n).getBoundary()}};var Hc=function(){this.count=null};Hc.prototype.interfaces_=function(){return[]},Hc.prototype.getClass=function(){return Hc};var Wc=function(){},Xc={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Wc.prototype.interfaces_=function(){return[]},Wc.prototype.getClass=function(){return Wc},Wc.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Wc.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",a=new function(){}(new function(){}(Wc.getStackTrace(r))),s=0;s<i;s++)try{o+=a.readLine()+Wc.NEWLINE}catch(t){if(!(t instanceof Ui))throw t;tc.shouldNeverReachHere()}return o}},Wc.split=function(t,e){for(var n=e.length,r=new Ec,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var s=new Array(r.size()).fill(null),u=0;u<s.length;u++)s[u]=r.get(u);return s},Wc.toString=function(){if(1===arguments.length){var t=arguments[0];return Wc.SIMPLE_ORDINATE_FORMAT.format(t)}},Wc.spaces=function(t){return Wc.chars(" ",t)},Xc.NEWLINE.get=function(){return qu.getProperty("line.separator")},Xc.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Wc,Xc);var Zc=function(){};Zc.prototype.interfaces_=function(){return[]},Zc.prototype.getClass=function(){return Zc},Zc.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Zc.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,zu.X)===t.getOrdinate(e-1,zu.X)&&t.getOrdinate(0,zu.Y)===t.getOrdinate(e-1,zu.Y)},Zc.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(t.getOrdinate(i,o)!==e.getOrdinate(i,o)&&(!yu.isNaN(a)||!yu.isNaN(s)))return!1}return!0},Zc.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Zc.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Zc.copy(e,i-1,r,o,1);return r},Zc.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Zc.swap(t,r,e-r)},Zc.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Zc.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Zc.copyCoord(t,e+o,n,r+o)},Zc.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new Iu;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Wc.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Zc.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Zc.createClosedRing(t,e,4):e.getOrdinate(0,zu.X)===e.getOrdinate(n-1,zu.X)&&e.getOrdinate(0,zu.Y)===e.getOrdinate(n-1,zu.Y)?e:Zc.createClosedRing(t,e,n+1)},Zc.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Zc.copy(e,0,r,0,i);for(var o=i;o<n;o++)Zc.copy(e,0,r,o,1);return r};var Yc=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Hu:this._points.expandEnvelope(new Hu)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Zc.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Fc.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return ac.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Zc.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(ku(arguments[0],pc))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(ku(arguments[0],Uc)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(ku(arguments[0],Bc)||ku(arguments[0],uc))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Gc(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new gu("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Dc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(cc),Kc=function(){};Kc.prototype.interfaces_=function(){return[]},Kc.prototype.getClass=function(){return Kc};var Jc=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Hu;var t=new Hu;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Fc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(ku(arguments[0],pc)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(ku(arguments[0],Uc)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(ku(arguments[0],Bc)||ku(arguments[0],uc))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),tc.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Kc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(cc),Qc=function(){};Qc.prototype.interfaces_=function(){return[]},Qc.prototype.getClass=function(){return Qc};var $c=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new gu("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new gu("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(ac.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(ac.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var u=t.getX(s),c=t.getY(s);if(u!==o===(c!==a))return!1;o=u,a=c}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(r._holes[a],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);jc.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);qu.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=Tc.minCoordinate(e.getCoordinates());Tc.scroll(r,i),qu.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],ac.isCCW(e.getCoordinates())===n&&Tc.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[0],i=arguments[1],o=r,a=this._shell,s=o._shell,u=a.compareToSameClass(s,i);if(0!==u)return u;for(var c=this.getNumInteriorRing(),l=o.getNumInteriorRing(),f=0;f<c&&f<l;){var p=this.getInteriorRingN(f),h=o.getInteriorRingN(f),d=p.compareToSameClass(h,i);if(0!==d)return d;f++}return f<c?1:f<l?-1:0}},e.prototype.apply=function(t){if(ku(t,pc)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(ku(t,Uc)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(ku(t,Bc))t.filter(this);else if(ku(t,uc)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Qc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(cc),tl=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return cc.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Fc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Kc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(Vc),el=function(t){function e(e,n){e instanceof Eu&&n instanceof gl&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return cc.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Fc.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Zc.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new gu("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new gu("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Yc),nl=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return cc.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Ec,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Qc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(Vc),rl=function(t){this._factory=t||null,this._isUserDataCopied=!1},il={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};rl.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},rl.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},rl.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Vc?this.editGeometryCollection(t,e):t instanceof $c?this.editPolygon(t,e):t instanceof Jc||t instanceof Yc?e.edit(t,this._factory):(tc.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},rl.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new Ec,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===tl?this._factory.createMultiPoint(r.toArray([])):n.getClass()===qc?this._factory.createMultiLineString(r.toArray([])):n.getClass()===nl?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},rl.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new Ec,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},rl.prototype.interfaces_=function(){return[]},rl.prototype.getClass=function(){return rl},rl.GeometryEditorOperation=function(){},il.NoOpGeometryOperation.get=function(){return ol},il.CoordinateOperation.get=function(){return al},il.CoordinateSequenceOperation.get=function(){return sl},Object.defineProperties(rl,il);var ol=function(){};ol.prototype.edit=function(t,e){return t},ol.prototype.interfaces_=function(){return[rl.GeometryEditorOperation]},ol.prototype.getClass=function(){return ol};var al=function(){};al.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof el?e.createLinearRing(n):t instanceof Yc?e.createLineString(n):t instanceof Jc?n.length>0?e.createPoint(n[0]):e.createPoint():t},al.prototype.interfaces_=function(){return[rl.GeometryEditorOperation]},al.prototype.getClass=function(){return al};var sl=function(){};sl.prototype.edit=function(t,e){return t instanceof el?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Yc?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Jc?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},sl.prototype.interfaces_=function(){return[rl.GeometryEditorOperation]},sl.prototype.getClass=function(){return sl};var ul=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new Eu}else if(ku(arguments[0],zu)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var u=0;u<a;u++)this._coordinates[u]=new Eu}},cl={serialVersionUID:{configurable:!0}};ul.prototype.setOrdinate=function(t,e,n){switch(e){case zu.X:this._coordinates[t].x=n;break;case zu.Y:this._coordinates[t].y=n;break;case zu.Z:this._coordinates[t].z=n;break;default:throw new gu("invalid ordinateIndex")}},ul.prototype.size=function(){return this._coordinates.length},ul.prototype.getOrdinate=function(t,e){switch(e){case zu.X:return this._coordinates[t].x;case zu.Y:return this._coordinates[t].y;case zu.Z:return this._coordinates[t].z}return yu.NaN},ul.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},ul.prototype.getCoordinateCopy=function(t){return new Eu(this._coordinates[t])},ul.prototype.getDimension=function(){return this._dimension},ul.prototype.getX=function(t){return this._coordinates[t].x},ul.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ul(t,this._dimension)},ul.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ul.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ul(t,this._dimension)},ul.prototype.toString=function(){if(this._coordinates.length>0){var t=new Iu(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ul.prototype.getY=function(t){return this._coordinates[t].y},ul.prototype.toCoordinateArray=function(){return this._coordinates},ul.prototype.interfaces_=function(){return[zu,ki]},ul.prototype.getClass=function(){return ul},cl.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ul,cl);var ll=function(){},fl={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ll.prototype.readResolve=function(){return ll.instance()},ll.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new ul(t)}if(ku(arguments[0],zu)){var e=arguments[0];return new ul(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return r>3&&(r=3),r<2?new ul(n):new ul(n,r)}},ll.prototype.interfaces_=function(){return[Tu,ki]},ll.prototype.getClass=function(){return ll},ll.instance=function(){return ll.instanceObject},fl.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},fl.instanceObject.get=function(){return new ll},Object.defineProperties(ll,fl);var pl=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new Ec,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Ic;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(Mc),hl=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof vl){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},dl={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};hl.prototype.equals=function(t){if(!(t instanceof hl))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},hl.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new Lu(n).compareTo(new Lu(r))},hl.prototype.getScale=function(){return this._scale},hl.prototype.isFloating=function(){return this._modelType===hl.FLOATING||this._modelType===hl.FLOATING_SINGLE},hl.prototype.getType=function(){return this._modelType},hl.prototype.toString=function(){var t="UNKNOWN";return this._modelType===hl.FLOATING?t="Floating":this._modelType===hl.FLOATING_SINGLE?t="Floating-Single":this._modelType===hl.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},hl.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return yu.isNaN(t)||this._modelType===hl.FLOATING_SINGLE?t:this._modelType===hl.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof Eu){var e=arguments[0];if(this._modelType===hl.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},hl.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===hl.FLOATING?t=16:this._modelType===hl.FLOATING_SINGLE?t=6:this._modelType===hl.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},hl.prototype.setScale=function(t){this._scale=Math.abs(t)},hl.prototype.interfaces_=function(){return[ki,_u]},hl.prototype.getClass=function(){return hl},hl.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},dl.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},dl.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(hl,dl);var vl=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},ml={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};vl.prototype.readResolve=function(){return vl.nameToTypeMap.get(this._name)},vl.prototype.toString=function(){return this._name},vl.prototype.interfaces_=function(){return[ki]},vl.prototype.getClass=function(){return vl},ml.serialVersionUID.get=function(){return-552860263173159e4},ml.nameToTypeMap.get=function(){return new pl},Object.defineProperties(vl,ml),hl.Type=vl,hl.FIXED=new vl("FIXED"),hl.FLOATING=new vl("FLOATING"),hl.FLOATING_SINGLE=new vl("FLOATING SINGLE");var gl=function t(){this._precisionModel=new hl,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?ku(arguments[0],Tu)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof hl&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},yl={serialVersionUID:{configurable:!0}};gl.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new Eu(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new Eu(t.getMinX(),t.getMinY()),new Eu(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new Eu(t.getMinX(),t.getMinY()),new Eu(t.getMinX(),t.getMaxY()),new Eu(t.getMaxX(),t.getMaxY()),new Eu(t.getMaxX(),t.getMinY()),new Eu(t.getMinX(),t.getMinY())]),null)},gl.prototype.createLineString=function(t){return t?t instanceof Array?new Yc(this.getCoordinateSequenceFactory().create(t),this):ku(t,zu)?new Yc(t,this):void 0:new Yc(this.getCoordinateSequenceFactory().create([]),this)},gl.prototype.createMultiLineString=function(){if(0===arguments.length)return new qc(null,this);if(1===arguments.length){var t=arguments[0];return new qc(t,this)}},gl.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(gl.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof $c)return this.createMultiPolygon(gl.toPolygonArray(t));if(s instanceof Yc)return this.createMultiLineString(gl.toLineStringArray(t));if(s instanceof Jc)return this.createMultiPoint(gl.toPointArray(t));tc.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},gl.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},gl.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Eu){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(ku(arguments[0],zu)){var e=arguments[0];return new Jc(e,this)}}},gl.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},gl.prototype.createPolygon=function(){if(0===arguments.length)return new $c(null,null,this);if(1===arguments.length){if(ku(arguments[0],zu)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof el){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return new $c(r,i,this)}},gl.prototype.getSRID=function(){return this._SRID},gl.prototype.createGeometryCollection=function(){if(0===arguments.length)return new Vc(null,this);if(1===arguments.length){var t=arguments[0];return new Vc(t,this)}},gl.prototype.createGeometry=function(t){return new rl(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},gl.prototype.getPrecisionModel=function(){return this._precisionModel},gl.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(ku(arguments[0],zu)){var e=arguments[0];return new el(e,this)}}},gl.prototype.createMultiPolygon=function(){if(0===arguments.length)return new nl(null,this);if(1===arguments.length){var t=arguments[0];return new nl(t,this)}},gl.prototype.createMultiPoint=function(){if(0===arguments.length)return new tl(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new tl(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(ku(arguments[0],zu)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var r=new Array(n.size()).fill(null),i=0;i<n.size();i++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());Zc.copy(n,i,o,0,1),r[i]=this.createPoint(o)}return this.createMultiPoint(r)}}},gl.prototype.interfaces_=function(){return[ki]},gl.prototype.getClass=function(){return gl},gl.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},gl.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},gl.getDefaultCoordinateSequenceFactory=function(){return ll.instance()},gl.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},gl.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},gl.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},gl.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},gl.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},gl.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},gl.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},yl.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(gl,yl);var bl=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],_l=function(t){this.geometryFactory=t||new gl};_l.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!xl[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==bl.indexOf(n)?xl[n].apply(this,[e.coordinates]):"GeometryCollection"===n?xl[n].apply(this,[e.geometries]):xl[n].apply(this,[e])},_l.prototype.write=function(t){var e=t.getGeometryType();if(!wl[e])throw new Error("Geometry is not supported");return wl[e].apply(this,[t])};var xl={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!xl[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=xl.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new Eu(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new Eu(t[0],t[1]),new Eu(t[2],t[1]),new Eu(t[2],t[3]),new Eu(t[0],t[3]),new Eu(t[0],t[1])])},Point:function(t){var e=new Eu(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xl.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=xl.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xl.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=xl.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],a=xl.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(xl.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},wl={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:wl.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=wl.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(wl.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=wl.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=wl.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=wl.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=wl.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(wl[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},El=function(t){this.geometryFactory=t||new gl,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new _l(this.geometryFactory)};El.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===hl.FIXED&&this.reducePrecision(e),e},El.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Sl=function(){this.parser=new _l(this.geometryFactory)};Sl.prototype.write=function(t){return this.parser.write(t)};var Cl=function(){},Tl={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Cl.prototype.interfaces_=function(){return[]},Cl.prototype.getClass=function(){return Cl},Cl.opposite=function(t){return t===Cl.LEFT?Cl.RIGHT:t===Cl.RIGHT?Cl.LEFT:t},Tl.ON.get=function(){return 0},Tl.LEFT.get=function(){return 1},Tl.RIGHT.get=function(){return 2},Object.defineProperties(Cl,Tl),(Vi.prototype=new Error).name="EmptyStackException",(qi.prototype=new wc).add=function(t){return this.array_.push(t),!0},qi.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},qi.prototype.push=function(t){return this.array_.push(t),t},qi.prototype.pop=function(t){if(0===this.array_.length)throw new Vi;return this.array_.pop()},qi.prototype.peek=function(){if(0===this.array_.length)throw new Vi;return this.array_[this.array_.length-1]},qi.prototype.empty=function(){return 0===this.array_.length},qi.prototype.isEmpty=function(){return this.empty()},qi.prototype.search=function(t){return this.array_.indexOf(t)},qi.prototype.size=function(){return this.array_.length},qi.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Ol=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Ol.prototype.getCoordinate=function(){return this._minCoord},Ol.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Ol.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();tc.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=ac.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===ac.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===ac.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Ol.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Cl.LEFT;return n[e].y<n[e+1].y&&(r=Cl.RIGHT),r},Ol.prototype.getEdge=function(){return this._orientedDe},Ol.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Ol.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Ol.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}tc.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Cl.LEFT&&(this._orientedDe=this._minDe.getSym())},Ol.prototype.interfaces_=function(){return[]},Ol.prototype.getClass=function(){return Ol};var Al=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new Eu(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Qu),kl=function(){this.array_=[]};kl.prototype.addLast=function(t){this.array_.push(t)},kl.prototype.removeFirst=function(){return this.array_.shift()},kl.prototype.isEmpty=function(){return 0===this.array_.length};var Ml=function(){this._finder=null,this._dirEdgeList=new Ec,this._nodes=new Ec,this._rightMostCoord=null,this._env=null,this._finder=new Ol};Ml.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Ml.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Ml.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Al("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Ml.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Cl.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Ml.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Ml.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Cl.RIGHT)>=1&&e.getDepth(Cl.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Ml.prototype.computeDepths=function(t){var e=new Ic,n=new kl,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},Ml.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Ml.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Hu,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Ml.prototype.addReachable=function(t){var e=new qi;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Ml.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Cl.LEFT,t.getDepth(Cl.RIGHT)),e.setDepth(Cl.RIGHT,t.getDepth(Cl.LEFT))},Ml.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Ml.prototype.getNodes=function(){return this._nodes},Ml.prototype.getDirectedEdges=function(){return this._dirEdgeList},Ml.prototype.interfaces_=function(){return[_u]},Ml.prototype.getClass=function(){return Ml};var Pl=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Cl.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[Cl.ON]=o,this.location[Cl.LEFT]=a,this.location[Cl.RIGHT]=s}};Pl.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Pl.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==Ou.NONE)return!1;return!0},Pl.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===Ou.NONE&&(this.location[e]=t)},Pl.prototype.isLine=function(){return 1===this.location.length},Pl.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Cl.ON]=this.location[Cl.ON],e[Cl.LEFT]=Ou.NONE,e[Cl.RIGHT]=Ou.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===Ou.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Pl.prototype.getLocations=function(){return this.location},Pl.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Cl.LEFT];this.location[Cl.LEFT]=this.location[Cl.RIGHT],this.location[Cl.RIGHT]=t},Pl.prototype.toString=function(){var t=new Iu;return this.location.length>1&&t.append(Ou.toLocationSymbol(this.location[Cl.LEFT])),t.append(Ou.toLocationSymbol(this.location[Cl.ON])),this.location.length>1&&t.append(Ou.toLocationSymbol(this.location[Cl.RIGHT])),t.toString()},Pl.prototype.setLocations=function(t,e,n){this.location[Cl.ON]=t,this.location[Cl.LEFT]=e,this.location[Cl.RIGHT]=n},Pl.prototype.get=function(t){return t<this.location.length?this.location[t]:Ou.NONE},Pl.prototype.isArea=function(){return this.location.length>1},Pl.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===Ou.NONE)return!0;return!1},Pl.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Cl.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Pl.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(Ou.NONE)},Pl.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Pl.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Pl.prototype.interfaces_=function(){return[]},Pl.prototype.getClass=function(){return Pl};var Il=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Pl(e),this.elt[1]=new Pl(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Pl(n.elt[0]),this.elt[1]=new Pl(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Pl(Ou.NONE),this.elt[1]=new Pl(Ou.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Pl(o,a,s),this.elt[1]=new Pl(o,a,s)}else if(4===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2],f=arguments[3];this.elt[0]=new Pl(Ou.NONE,Ou.NONE,Ou.NONE),this.elt[1]=new Pl(Ou.NONE,Ou.NONE,Ou.NONE),this.elt[u].setLocations(c,l,f)}};Il.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Il.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Il.prototype.isNull=function(t){return this.elt[t].isNull()},Il.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Il.prototype.isLine=function(t){return this.elt[t].isLine()},Il.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Pl(t.elt[e]):this.elt[e].merge(t.elt[e])},Il.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Il.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Cl.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Il.prototype.toString=function(){var t=new Iu;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Il.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Il.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Il.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Cl.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Il.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Il.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Il.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Pl(this.elt[t].location[0]))},Il.prototype.interfaces_=function(){return[]},Il.prototype.getClass=function(){return Il},Il.toLineLabel=function(t){for(var e=new Il(Ou.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Ll=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Ec,this._pts=new Ec,this._label=new Il(Ou.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Ec,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Ll.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=ac.isCCW(this._ring.getCoordinates())},Ll.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Ll.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Al("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Al("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();tc.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Ll.prototype.getLinearRing=function(){return this._ring},Ll.prototype.getCoordinate=function(t){return this._pts.get(t)},Ll.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Ll.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}},Ll.prototype.isHole=function(){return this._isHole},Ll.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Ll.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!ac.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Ll.prototype.addHole=function(t){this._holes.add(t)},Ll.prototype.isShell=function(){return null===this._shell},Ll.prototype.getLabel=function(){return this._label},Ll.prototype.getEdges=function(){return this._edges},Ll.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Ll.prototype.getShell=function(){return this._shell},Ll.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=e.getLocation(n,Cl.RIGHT);if(r===Ou.NONE)return null;if(this._label.getLocation(n)===Ou.NONE)return this._label.setLocation(n,r),null}},Ll.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Ll.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Ll.prototype.interfaces_=function(){return[]},Ll.prototype.getClass=function(){return Ll};var Rl=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ll),Dl=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new Ec,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Rl(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ll),Nl=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Nl.prototype.setVisited=function(t){this._isVisited=t},Nl.prototype.setInResult=function(t){this._isInResult=t},Nl.prototype.isCovered=function(){return this._isCovered},Nl.prototype.isCoveredSet=function(){return this._isCoveredSet},Nl.prototype.setLabel=function(t){this._label=t},Nl.prototype.getLabel=function(){return this._label},Nl.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Nl.prototype.updateIM=function(t){tc.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Nl.prototype.isInResult=function(){return this._isInResult},Nl.prototype.isVisited=function(){return this._isVisited},Nl.prototype.interfaces_=function(){return[]},Nl.prototype.getClass=function(){return Nl};var jl=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Il(0,Ou.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=Ou.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==Ou.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Il(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Il)for(var n=arguments[0],r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===Ou.NONE&&this._label.setLocation(r,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=Ou.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case Ou.BOUNDARY:n=Ou.INTERIOR;break;case Ou.INTERIOR:default:n=Ou.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Nl),Fl=function(){this.nodeMap=new Fi,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};Fl.prototype.find=function(t){return this.nodeMap.get(t)},Fl.prototype.addNode=function(){if(arguments[0]instanceof Eu){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof jl){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},Fl.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Fl.prototype.iterator=function(){return this.nodeMap.values().iterator()},Fl.prototype.values=function(){return this.nodeMap.values()},Fl.prototype.getBoundaryNodes=function(t){for(var e=new Ec,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===Ou.BOUNDARY&&e.add(r)}return e},Fl.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Fl.prototype.interfaces_=function(){return[]},Fl.prototype.getClass=function(){return Fl};var zl=function(){},Bl={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};zl.prototype.interfaces_=function(){return[]},zl.prototype.getClass=function(){return zl},zl.isNorthern=function(t){return t===zl.NE||t===zl.NW},zl.isOpposite=function(t,e){return t!==e&&2===(t-e+4)%4},zl.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},zl.isInHalfPlane=function(t,e){return e===zl.SE?t===zl.SE||t===zl.SW:t===e||t===e+1},zl.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new gu("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?zl.NE:zl.SE:e>=0?zl.NW:zl.SW}if(arguments[0]instanceof Eu&&arguments[1]instanceof Eu){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new gu("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?zl.NE:zl.SE:r.y>=n.y?zl.NW:zl.SW}},Bl.NE.get=function(){return 0},Bl.NW.get=function(){return 1},Bl.SW.get=function(){return 2},Bl.SE.get=function(){return 3},Object.defineProperties(zl,Bl);var Ul=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=i,this.init(o,a),this._label=s}};Ul.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:ac.computeOrientation(t._p0,t._p1,this._p1)},Ul.prototype.getDy=function(){return this._dy},Ul.prototype.getCoordinate=function(){return this._p0},Ul.prototype.setNode=function(t){this._node=t},Ul.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Ul.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Ul.prototype.getDirectedCoordinate=function(){return this._p1},Ul.prototype.getDx=function(){return this._dx},Ul.prototype.getLabel=function(){return this._label},Ul.prototype.getEdge=function(){return this._edge},Ul.prototype.getQuadrant=function(){return this._quadrant},Ul.prototype.getNode=function(){return this._node},Ul.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Ul.prototype.computeLabel=function(t){},Ul.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=zl.quadrant(this._dx,this._dy),tc.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Ul.prototype.interfaces_=function(){return[_u]},Ul.prototype.getClass=function(){return Ul};var Vl=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Il(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Al("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Cl.LEFT)===Ou.INTERIOR&&this._label.getLocation(e,Cl.RIGHT)===Ou.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Cl.LEFT]+"/"+this._depth[Cl.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,Ou.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,Ou.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Cl.LEFT&&(r=-1);var i=Cl.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===Ou.EXTERIOR&&e===Ou.INTERIOR?1:t===Ou.INTERIOR&&e===Ou.EXTERIOR?-1:0},e}(Ul),ql=function(){};ql.prototype.createNode=function(t){return new jl(t,null)},ql.prototype.interfaces_=function(){return[]},ql.prototype.getClass=function(){return ql};var Gl=function(){if(this._edges=new Ec,this._nodes=null,this._edgeEndList=new Ec,0===arguments.length)this._nodes=new Fl(new ql);else if(1===arguments.length){var t=arguments[0];this._nodes=new Fl(t)}};Gl.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Gl.prototype.find=function(t){return this._nodes.find(t)},Gl.prototype.addNode=function(){if(arguments[0]instanceof jl){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof Eu){var e=arguments[0];return this._nodes.addNode(e)}},Gl.prototype.getNodeIterator=function(){return this._nodes.iterator()},Gl.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Gl.prototype.debugPrintln=function(t){qu.out.println(t)},Gl.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===Ou.BOUNDARY},Gl.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Gl.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&ac.computeOrientation(t,e,r)===ac.COLLINEAR&&zl.quadrant(t,e)===zl.quadrant(n,r)},Gl.prototype.getEdgeEnds=function(){return this._edgeEndList},Gl.prototype.debugPrint=function(t){qu.out.print(t)},Gl.prototype.getEdgeIterator=function(){return this._edges.iterator()},Gl.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},Gl.prototype.insertEdge=function(t){this._edges.add(t)},Gl.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Gl.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new Vl(n,!0),i=new Vl(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},Gl.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Gl.prototype.getNodes=function(){return this._nodes.values()},Gl.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},Gl.prototype.interfaces_=function(){return[]},Gl.prototype.getClass=function(){return Gl},Gl.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Hl=function(){this._geometryFactory=null,this._shellList=new Ec;var t=arguments[0];this._geometryFactory=t};Hl.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Hl.prototype.computePolygons=function(t){for(var e=new Ec,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Hl.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Al("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Hl.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new Ec,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else r.add(o)}return r},Hl.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Hl.prototype.buildMaximalEdgeRings=function(t){for(var e=new Ec,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Dl(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Hl.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Hl.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Hl.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var u=s.next(),c=u.getLinearRing(),l=c.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var f=!1;l.contains(r)&&ac.isPointInRing(i,c.getCoordinates())&&(f=!0),f&&(null===o||a.contains(l))&&(o=u)}return o},Hl.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return tc.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Hl.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Gl.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new Ec,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Hl.prototype.interfaces_=function(){return[]},Hl.prototype.getClass=function(){return Hl};var Wl=function(){};Wl.prototype.getBounds=function(){},Wl.prototype.interfaces_=function(){return[]},Wl.prototype.getClass=function(){return Wl};var Xl=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Xl.prototype.getItem=function(){return this._item},Xl.prototype.getBounds=function(){return this._bounds},Xl.prototype.interfaces_=function(){return[Wl,ki]},Xl.prototype.getClass=function(){return Xl};var Zl=function(){this._size=null,this._items=null,this._size=0,this._items=new Ec,this._items.add(null)};Zl.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Zl.prototype.size=function(){return this._size},Zl.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},Zl.prototype.clear=function(){this._size=0,this._items.clear()},Zl.prototype.isEmpty=function(){return 0===this._size},Zl.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Zl.prototype.interfaces_=function(){return[]},Zl.prototype.getClass=function(){return Zl};var Yl=function(){};Yl.prototype.visitItem=function(t){},Yl.prototype.interfaces_=function(){return[]},Yl.prototype.getClass=function(){return Yl};var Kl=function(){};Kl.prototype.insert=function(t,e){},Kl.prototype.remove=function(t,e){},Kl.prototype.query=function(){},Kl.prototype.interfaces_=function(){return[]},Kl.prototype.getClass=function(){return Kl};var Jl=function(){if(this._childBoundables=new Ec,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Ql={serialVersionUID:{configurable:!0}};Jl.prototype.getLevel=function(){return this._level},Jl.prototype.size=function(){return this._childBoundables.size()},Jl.prototype.getChildBoundables=function(){return this._childBoundables},Jl.prototype.addChildBoundable=function(t){tc.isTrue(null===this._bounds),this._childBoundables.add(t)},Jl.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Jl.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Jl.prototype.interfaces_=function(){return[Wl,ki]},Jl.prototype.getClass=function(){return Jl},Ql.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Jl,Ql);var $l=function(){};$l.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},$l.min=function(t){return $l.sort(t),t.get(0)},$l.sort=function(t,e){var n=t.toArray();e?jc.sort(n,e):jc.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},$l.singletonList=function(t){var e=new Ec;return e.add(t),e};var tf=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};tf.prototype.expandToQueue=function(t,e){var n=tf.isComposite(this._boundable1),r=tf.isComposite(this._boundable2);if(n&&r)return tf.area(this._boundable1)>tf.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new gu("neither boundable is composite")},tf.prototype.isLeaves=function(){return!(tf.isComposite(this._boundable1)||tf.isComposite(this._boundable2))},tf.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tf.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new tf(o,e,this._itemDistance);a.getDistance()<r&&n.add(a)}},tf.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tf.prototype.getDistance=function(){return this._distance},tf.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tf.prototype.interfaces_=function(){return[_u]},tf.prototype.getClass=function(){return tf},tf.area=function(t){return t.getBounds().getArea()},tf.isComposite=function(t){return t instanceof Jl};var ef=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Ec,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];tc.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nf={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};ef.prototype.getNodeCapacity=function(){return this._nodeCapacity},ef.prototype.lastNode=function(t){return t.get(t.size()-1)},ef.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Jl?t+=this.size(n):n instanceof Xl&&(t+=1)}return t}},ef.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Xl&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},ef.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new Ec:t}if(1===arguments.length){for(var e=arguments[0],n=new Ec,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Jl){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof Xl?n.add(i.getItem()):tc.shouldNeverReachHere()}return n.size()<=0?null:n}},ef.prototype.insert=function(t,e){tc.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Xl(t,e))},ef.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new Ec;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(tc.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Jl?this.boundablesAtLevel(n,a,i):(tc.isTrue(a instanceof Xl),-1===n&&i.add(a))}return null}},ef.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new Ec;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(ku(arguments[2],Yl)&&arguments[0]instanceof Object&&arguments[1]instanceof Jl)for(var i=arguments[0],o=arguments[1],a=arguments[2],s=o.getChildBoundables(),u=0;u<s.size();u++){var c=s.get(u);this.getIntersectsOp().intersects(c.getBounds(),i)&&(c instanceof Jl?this.query(i,c,a):c instanceof Xl?a.visitItem(c.getItem()):tc.shouldNeverReachHere())}else if(ku(arguments[2],wc)&&arguments[0]instanceof Object&&arguments[1]instanceof Jl)for(var l=arguments[0],f=arguments[1],p=arguments[2],h=f.getChildBoundables(),d=0;d<h.size();d++){var v=h.get(d);this.getIntersectsOp().intersects(v.getBounds(),l)&&(v instanceof Jl?this.query(l,v,p):v instanceof Xl?p.add(v.getItem()):tc.shouldNeverReachHere())}},ef.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},ef.prototype.getRoot=function(){return this.build(),this._root},ef.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var u=s.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof Jl&&(o=this.remove(n,u,i))){a=u;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}},ef.prototype.createHigherLevels=function(t,e){tc.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},ef.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Jl){var r=this.depth(n);r>t&&(t=r)}}return t+1}},ef.prototype.createParentBoundables=function(t,e){tc.isTrue(!t.isEmpty());var n=new Ec;n.add(this.createNode(e));var r=new Ec(t);$l.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},ef.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},ef.prototype.interfaces_=function(){return[ki]},ef.prototype.getClass=function(){return ef},ef.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nf.IntersectsOp.get=function(){return rf},nf.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nf.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(ef,nf);var rf=function(){},of=function(){};of.prototype.distance=function(t,e){},of.prototype.interfaces_=function(){return[]},of.prototype.getClass=function(){return of};var af=function(t){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,t.call(this,n)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){tc.isTrue(t.length>0);for(var n=new Ec,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},e.prototype.createNode=function(t){return new sf(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new Ec;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(ku(arguments[2],Yl)&&arguments[0]instanceof Object&&arguments[1]instanceof Jl){var i=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,i,o,a)}else if(ku(arguments[2],wc)&&arguments[0]instanceof Object&&arguments[1]instanceof Jl){var s=arguments[0],u=arguments[1],c=arguments[2];t.prototype.query.call(this,s,u,c)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){tc.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new Ec(t);$l.sort(i,e.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(ku(arguments[0],of)){var t=arguments[0],n=new tf(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof tf){var r=arguments[0];return this.nearestNeighbour(r,yu.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&ku(arguments[1],of)){var i=arguments[0],o=arguments[1],a=new tf(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof tf&&"number"==typeof arguments[1]){var s=arguments[0],u=arguments[1],c=null,l=new Zl;for(l.add(s);!l.isEmpty()&&u>0;){var f=l.poll(),p=f.getDistance();if(p>=u)break;f.isLeaves()?(u=p,c=f):f.expandToQueue(l,u)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===arguments.length){var h=arguments[0],d=arguments[1],v=arguments[2],m=new Xl(h,d),g=new tf(this.getRoot(),m,v);return this.nearestNeighbour(g)[0]}},e.prototype.interfaces_=function(){return[Kl,ki]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return sf},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[wu]},compare:function(n,r){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(r.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[wu]},compare:function(n,r){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(r.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(ef),sf=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new Hu(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Jl),uf=function(){};uf.prototype.interfaces_=function(){return[]},uf.prototype.getClass=function(){return uf},uf.relativeSign=function(t,e){return t<e?-1:t>e?1:0},uf.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=uf.relativeSign(e.x,n.x),i=uf.relativeSign(e.y,n.y);switch(t){case 0:return uf.compareValue(r,i);case 1:return uf.compareValue(i,r);case 2:return uf.compareValue(i,-r);case 3:return uf.compareValue(-r,i);case 4:return uf.compareValue(-r,-i);case 5:return uf.compareValue(-i,-r);case 6:return uf.compareValue(-i,r);case 7:return uf.compareValue(r,-i)}return tc.shouldNeverReachHere("invalid octant value"),0},uf.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var cf=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new Eu(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};cf.prototype.getCoordinate=function(){return this.coord},cf.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},cf.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:uf.compare(this._segmentOctant,this.coord,e.coord)},cf.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},cf.prototype.isInterior=function(){return this._isInterior},cf.prototype.interfaces_=function(){return[_u]},cf.prototype.getClass=function(){return cf};var lf=function(){this._nodeMap=new Fi,this._edge=null;var t=arguments[0];this._edge=t};lf.prototype.getSplitCoordinates=function(){var t=new Cc;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},lf.prototype.addCollapsedNodes=function(){var t=new Ec;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},lf.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},lf.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new Lu(e+1))}},lf.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new Eu(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new Eu(e.coord))},lf.prototype.iterator=function(){return this._nodeMap.values().iterator()},lf.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},lf.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},lf.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new Lu(e[0])),r=i}},lf.prototype.getEdge=function(){return this._edge},lf.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},lf.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new Eu(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new Eu(e.coord)),new df(o,this._edge.getData())},lf.prototype.add=function(t,e){var n=new cf(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(tc.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},lf.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Qu("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new Qu("bad split edge end point at "+i)},lf.prototype.interfaces_=function(){return[]},lf.prototype.getClass=function(){return lf};var ff=function(){};ff.prototype.interfaces_=function(){return[]},ff.prototype.getClass=function(){return ff},ff.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new gu("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof Eu&&arguments[1]instanceof Eu){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new gu("Cannot compute the octant for two identical points "+i);return ff.octant(a,s)}};var pf=function(){};pf.prototype.getCoordinates=function(){},pf.prototype.size=function(){},pf.prototype.getCoordinate=function(t){},pf.prototype.isClosed=function(){},pf.prototype.setData=function(t){},pf.prototype.getData=function(){},pf.prototype.interfaces_=function(){return[]},pf.prototype.getClass=function(){return pf};var hf=function(){};hf.prototype.addIntersection=function(t,e){},hf.prototype.interfaces_=function(){return[pf]},hf.prototype.getClass=function(){return hf};var df=function(){this._nodeList=new lf(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};df.prototype.getCoordinates=function(){return this._pts},df.prototype.size=function(){return this._pts.length},df.prototype.getCoordinate=function(t){return this._pts[t]},df.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},df.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},df.prototype.setData=function(t){this._data=t},df.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:ff.octant(t,e)},df.prototype.getData=function(){return this._data},df.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[3],o=new Eu(n.getIntersection(i));this.addIntersection(o,r)}},df.prototype.toString=function(){return Ju.toLineString(new ul(this._pts))},df.prototype.getNodeList=function(){return this._nodeList},df.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},df.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},df.prototype.interfaces_=function(){return[hf]},df.prototype.getClass=function(){return df},df.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Ec;return df.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(r)};var vf=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new Eu,this.p1=new Eu;else if(1===arguments.length){var t=arguments[0];this.p0=new Eu(t.p0),this.p1=new Eu(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new Eu(e,n),this.p1=new Eu(r,i)}},mf={serialVersionUID:{configurable:!0}};vf.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},vf.prototype.orientationIndex=function(){if(arguments[0]instanceof vf){var t=arguments[0],e=ac.orientationIndex(this.p0,this.p1,t.p0),n=ac.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof Eu){var r=arguments[0];return ac.orientationIndex(this.p0,this.p1,r)}},vf.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},vf.prototype.isVertical=function(){return this.p0.x===this.p1.x},vf.prototype.equals=function(t){if(!(t instanceof vf))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},vf.prototype.intersection=function(t){var e=new rc;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},vf.prototype.project=function(){if(arguments[0]instanceof Eu){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new Eu(t);var e=this.projectionFactor(t),n=new Eu;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof vf){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new vf(a,s)}},vf.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},vf.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},vf.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},vf.prototype.distancePerpendicular=function(t){return ac.distancePointLinePerpendicular(t,this.p0,this.p1)},vf.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},vf.prototype.midPoint=function(){return vf.midPoint(this.p0,this.p1)},vf.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?yu.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},vf.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=yu.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<r&&(r=i,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},vf.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},vf.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},vf.prototype.getLength=function(){return this.p0.distance(this.p1)},vf.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},vf.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},vf.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},vf.prototype.lineIntersection=function(t){try{return Gu.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof Vu))throw t}return null},vf.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},vf.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,u=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/a,u=e*o/a}return new Eu(n-u,r+s)},vf.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},vf.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||yu.isNaN(e))&&(e=1),e},vf.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},vf.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},vf.prototype.distance=function(){if(arguments[0]instanceof vf){var t=arguments[0];return ac.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof Eu){var e=arguments[0];return ac.distancePointLine(e,this.p0,this.p1)}},vf.prototype.pointAlong=function(t){var e=new Eu;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},vf.prototype.hashCode=function(){var t=yu.doubleToLongBits(this.p0.x);t^=31*yu.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=yu.doubleToLongBits(this.p1.x);return n^=31*yu.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},vf.prototype.interfaces_=function(){return[_u,ki]},vf.prototype.getClass=function(){return vf},vf.midPoint=function(t,e){return new Eu((t.x+e.x)/2,(t.y+e.y)/2)},mf.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(vf,mf);var gf=function(){this.tempEnv1=new Hu,this.tempEnv2=new Hu,this._overlapSeg1=new vf,this._overlapSeg2=new vf};gf.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},gf.prototype.interfaces_=function(){return[]},gf.prototype.getClass=function(){return gf};var yf=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};yf.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},yf.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,r),a<n&&this.computeSelect(t,a,n,r)},yf.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},yf.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},yf.prototype.setId=function(t){this._id=t},yf.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},yf.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new Hu(t,e)}return this._env},yf.prototype.getEndIndex=function(){return this._end},yf.prototype.getStartIndex=function(){return this._start},yf.prototype.getContext=function(){return this._context},yf.prototype.getId=function(){return this._id},yf.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var a=this._pts[t],s=this._pts[e],u=n._pts[r],c=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(u,c),!o.tempEnv1.intersects(o.tempEnv2))return null;var l=Math.trunc((t+e)/2),f=Math.trunc((r+i)/2);t<l&&(r<f&&this.computeOverlapsInternal(t,l,n,r,f,o),f<i&&this.computeOverlapsInternal(t,l,n,f,i,o)),l<e&&(r<f&&this.computeOverlapsInternal(l,e,n,r,f,o),f<i&&this.computeOverlapsInternal(l,e,n,f,i,o))},yf.prototype.interfaces_=function(){return[]},yf.prototype.getClass=function(){return yf};var bf=function(){};bf.prototype.interfaces_=function(){return[]},bf.prototype.getClass=function(){return bf},bf.getChainStartIndices=function(t){var e=0,n=new Ec;n.add(new Lu(e));do{var r=bf.findChainEnd(t,e);n.add(new Lu(r)),e=r}while(e<t.length-1);return bf.toIntArray(n)},bf.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=zl.quadrant(t[n],t[n+1]),i=e+1;i<t.length;){if(!t[i-1].equals2D(t[i])&&zl.quadrant(t[i-1],t[i])!==r)break;i++}return i-1},bf.getChains=function(){if(1===arguments.length){var t=arguments[0];return bf.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new Ec,i=bf.getChainStartIndices(e),o=0;o<i.length-1;o++){var a=new yf(e,i[o],i[o+1],n);r.add(a)}return r}},bf.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var _f=function(){};_f.prototype.computeNodes=function(t){},_f.prototype.getNodedSubstrings=function(){},_f.prototype.interfaces_=function(){return[]},_f.prototype.getClass=function(){return _f};var xf=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};xf.prototype.setSegmentIntersector=function(t){this._segInt=t},xf.prototype.interfaces_=function(){return[_f]},xf.prototype.getClass=function(){return xf};var wf=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new Ec,this._index=new af,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return df.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=bf.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new Ef(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return Ef},Object.defineProperties(e,n),e}(xf),Ef=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3],o=e.getContext(),a=r.getContext();this._si.processIntersections(o,n,a,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(gf),Sf=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},Cf={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Sf.prototype.getEndCapStyle=function(){return this._endCapStyle},Sf.prototype.isSingleSided=function(){return this._isSingleSided},Sf.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Sf.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Sf.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Sf.JOIN_ROUND&&(this._quadrantSegments=Sf.DEFAULT_QUADRANT_SEGMENTS)},Sf.prototype.getJoinStyle=function(){return this._joinStyle},Sf.prototype.setJoinStyle=function(t){this._joinStyle=t},Sf.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Sf.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Sf.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Sf.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Sf.prototype.getMitreLimit=function(){return this._mitreLimit},Sf.prototype.setMitreLimit=function(t){this._mitreLimit=t},Sf.prototype.setSingleSided=function(t){this._isSingleSided=t},Sf.prototype.interfaces_=function(){return[]},Sf.prototype.getClass=function(){return Sf},Sf.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Cf.CAP_ROUND.get=function(){return 1},Cf.CAP_FLAT.get=function(){return 2},Cf.CAP_SQUARE.get=function(){return 3},Cf.JOIN_ROUND.get=function(){return 1},Cf.JOIN_MITRE.get=function(){return 2},Cf.JOIN_BEVEL.get=function(){return 3},Cf.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Cf.DEFAULT_MITRE_LIMIT.get=function(){return 5},Cf.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Sf,Cf);var Tf=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=ac.COUNTERCLOCKWISE,this._inputLine=t||null},Of={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Tf.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,t,n,r)},Tf.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Tf.DELETE,i=!0,r=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},Tf.prototype.isShallowConcavity=function(t,e,n,r){return ac.computeOrientation(t,e,n)===this._angleOrientation&&ac.distancePointLine(e,t,n)<r},Tf.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Tf.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0},Tf.prototype.isConcave=function(t,e,n){var r=ac.computeOrientation(t,e,n)===this._angleOrientation;return r},Tf.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=ac.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Tf.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Tf.DELETE;)e++;return e},Tf.prototype.isShallow=function(t,e,n,r){return ac.distancePointLine(e,t,n)<r},Tf.prototype.collapseLine=function(){for(var t=new Cc,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Tf.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Tf.prototype.interfaces_=function(){return[]},Tf.prototype.getClass=function(){return Tf},Tf.simplify=function(t,e){return new Tf(t).simplify(e)},Of.INIT.get=function(){return 0},Of.DELETE.get=function(){return 1},Of.KEEP.get=function(){return 1},Of.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Tf,Of);var Af=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Ec},kf={COORDINATE_ARRAY_TYPE:{configurable:!0}};Af.prototype.getCoordinates=function(){return this._ptList.toArray(Af.COORDINATE_ARRAY_TYPE)},Af.prototype.setPrecisionModel=function(t){this._precisionModel=t},Af.prototype.addPt=function(t){var e=new Eu(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Af.prototype.revere=function(){},Af.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},Af.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Af.prototype.toString=function(){return(new gl).createLineString(this.getCoordinates()).toString()},Af.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new Eu(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Af.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Af.prototype.interfaces_=function(){return[]},Af.prototype.getClass=function(){return Af},kf.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Af,kf);var Mf=function(){},Pf={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Mf.prototype.interfaces_=function(){return[]},Mf.prototype.getClass=function(){return Mf},Mf.toDegrees=function(t){return 180*t/Math.PI},Mf.normalize=function(t){for(;t>Math.PI;)t-=Mf.PI_TIMES_2;for(;t<=-Math.PI;)t+=Mf.PI_TIMES_2;return t},Mf.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Mf.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},Mf.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},Mf.interiorAngle=function(t,e,n){var r=Mf.angle(e,t),i=Mf.angle(e,n);return Math.abs(i-r)},Mf.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Mf.PI_TIMES_2;t>=Mf.PI_TIMES_2&&(t=0)}else{for(;t>=Mf.PI_TIMES_2;)t-=Mf.PI_TIMES_2;t<0&&(t=0)}return t},Mf.angleBetween=function(t,e,n){var r=Mf.angle(e,t),i=Mf.angle(e,n);return Mf.diff(r,i)},Mf.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Mf.toRadians=function(t){return t*Math.PI/180},Mf.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Mf.COUNTERCLOCKWISE:n<0?Mf.CLOCKWISE:Mf.NONE},Mf.angleBetweenOriented=function(t,e,n){var r=Mf.angle(e,t),i=Mf.angle(e,n)-r;return i<=-Math.PI?i+Mf.PI_TIMES_2:i>Math.PI?i-Mf.PI_TIMES_2:i},Pf.PI_TIMES_2.get=function(){return 2*Math.PI},Pf.PI_OVER_2.get=function(){return Math.PI/2},Pf.PI_OVER_4.get=function(){return Math.PI/4},Pf.COUNTERCLOCKWISE.get=function(){return ac.COUNTERCLOCKWISE},Pf.CLOCKWISE.get=function(){return ac.CLOCKWISE},Pf.NONE.get=function(){return ac.COLLINEAR},Object.defineProperties(Mf,Pf);var If=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new vf,this._seg1=new vf,this._offset0=new vf,this._offset1=new vf,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new rc,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Sf.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Lf={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};If.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=ac.computeOrientation(this._s0,this._s1,this._s2),r=n===ac.CLOCKWISE&&this._side===Cl.LEFT||n===ac.COUNTERCLOCKWISE&&this._side===Cl.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},If.prototype.addLineEndCap=function(t,e){var n=new vf(t,e),r=new vf;this.computeOffsetSegment(n,Cl.LEFT,this._distance,r);var i=new vf;this.computeOffsetSegment(n,Cl.RIGHT,this._distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case Sf.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,ac.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Sf.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Sf.CAP_SQUARE:var u=new Eu;u.x=Math.abs(this._distance)*Math.cos(s),u.y=Math.abs(this._distance)*Math.sin(s);var c=new Eu(r.p1.x+u.x,r.p1.y+u.y),l=new Eu(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(c),this._segList.addPt(l)}},If.prototype.getCoordinates=function(){return this._segList.getCoordinates()},If.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Gu.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof Vu))throw t;o=new Eu(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},If.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),u=n.x-t.x,c=n.y-t.y,l=Math.atan2(c,u);r===ac.CLOCKWISE?s<=l&&(s+=2*Math.PI):s>=l&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,l,r,i),this._segList.addPt(n)},If.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*If.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Sf.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Sf.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},If.prototype.createSquare=function(t){this._segList.addPt(new Eu(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new Eu(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new Eu(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new Eu(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},If.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},If.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},If.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},If.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},If.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Mf.angle(i,this._seg0.p0),a=Mf.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=Mf.normalize(o+a),u=Mf.normalize(s+Math.PI),c=r*n,l=n-c*Math.abs(Math.sin(a)),f=i.x+c*Math.cos(u),p=i.y+c*Math.sin(u),h=new Eu(f,p),d=new vf(i,h),v=d.pointAlongOffset(1,l),m=d.pointAlongOffset(1,-l);this._side===Cl.LEFT?(this._segList.addPt(v),this._segList.addPt(m)):(this._segList.addPt(m),this._segList.addPt(v))},If.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Cl.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),u=i*n*o/s,c=i*n*a/s;r.p0.x=t.p0.x-c,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-c,r.p1.y=t.p1.y+u},If.prototype.addFilletArc=function(t,e,n,r,i){var o=r===ac.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var u=a/s,c=0,l=new Eu;c<a;){var f=e+o*c;l.x=t.x+i*Math.cos(f),l.y=t.y+i*Math.sin(f),this._segList.addPt(l),c+=u}},If.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*If.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new Eu((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new Eu((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},If.prototype.createCircle=function(t){var e=new Eu(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},If.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},If.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Af,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*If.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},If.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Sf.JOIN_BEVEL||this._bufParams.getJoinStyle()===Sf.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,ac.CLOCKWISE,this._distance))},If.prototype.closeRing=function(){this._segList.closeRing()},If.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},If.prototype.interfaces_=function(){return[]},If.prototype.getClass=function(){return If},Lf.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Lf.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Lf.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Lf.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(If,Lf);var Rf=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Rf.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Tc.reverse(o),o},Rf.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Tf.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Cl.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=Tf.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Cl.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(s[c],!0)}n.addLastSegment(),n.closeRing()},Rf.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Cl.RIGHT&&(r=-r);var i=Tf.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},Rf.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Tf.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Cl.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=Tf.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],Cl.LEFT);for(var u=s-2;u>=0;u--)e.addNextSegment(a[u],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},Rf.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Sf.CAP_ROUND:e.createCircle(t);break;case Sf.CAP_SQUARE:e.createSquare(t)}},Rf.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Rf.prototype.getBufferParameters=function(){return this._bufParams},Rf.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Rf.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Rf.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Rf.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Tf.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Cl.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var s=Tf.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Cl.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(s[c],!0)}n.addLastSegment()},Rf.prototype.getSegGen=function(t){return new If(this._precisionModel,this._bufParams,t)},Rf.prototype.interfaces_=function(){return[]},Rf.prototype.getClass=function(){return Rf},Rf.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new Eu(t[n]);return e};var Df=function(){this._subgraphs=null,this._seg=new vf,this._cga=new ac;var t=arguments[0];this._subgraphs=t},Nf={DepthSegment:{configurable:!0}};Df.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new Ec,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(ku(arguments[2],wc)&&arguments[0]instanceof Eu&&arguments[1]instanceof Vl){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=a.getEdge().getCoordinates(),c=0;c<u.length-1;c++)if(this._seg.p0=u[c],this._seg.p1=u[c+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x)&&!(this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||ac.computeOrientation(this._seg.p0,this._seg.p1,o)===ac.RIGHT)){var l=a.getDepth(Cl.LEFT);this._seg.p0.equals(u[c])||(l=a.getDepth(Cl.RIGHT));var f=new jf(this._seg,l);s.add(f)}}else if(ku(arguments[2],wc)&&arguments[0]instanceof Eu&&ku(arguments[1],wc))for(var p=arguments[0],h=arguments[1],d=arguments[2],v=h.iterator();v.hasNext();){var m=v.next();m.isForward()&&this.findStabbedSegments(p,m,d)}},Df.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:$l.min(e)._leftDepth},Df.prototype.interfaces_=function(){return[]},Df.prototype.getClass=function(){return Df},Nf.DepthSegment.get=function(){return jf},Object.defineProperties(Df,Nf);var jf=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new vf(t),this._leftDepth=e};jf.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},jf.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},jf.prototype.toString=function(){return this._upwardSeg.toString()},jf.prototype.interfaces_=function(){return[_u]},jf.prototype.getClass=function(){return jf};var Ff=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Ff.prototype.area=function(){return Ff.area(this.p0,this.p1,this.p2)},Ff.prototype.signedArea=function(){return Ff.signedArea(this.p0,this.p1,this.p2)},Ff.prototype.interpolateZ=function(t){if(null===t)throw new gu("Supplied point is null.");return Ff.interpolateZ(t,this.p0,this.p1,this.p2)},Ff.prototype.longestSideLength=function(){return Ff.longestSideLength(this.p0,this.p1,this.p2)},Ff.prototype.isAcute=function(){return Ff.isAcute(this.p0,this.p1,this.p2)},Ff.prototype.circumcentre=function(){return Ff.circumcentre(this.p0,this.p1,this.p2)},Ff.prototype.area3D=function(){return Ff.area3D(this.p0,this.p1,this.p2)},Ff.prototype.centroid=function(){return Ff.centroid(this.p0,this.p1,this.p2)},Ff.prototype.inCentre=function(){return Ff.inCentre(this.p0,this.p1,this.p2)},Ff.prototype.interfaces_=function(){return[]},Ff.prototype.getClass=function(){return Ff},Ff.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Ff.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Ff.det=function(t,e,n,r){return t*r-e*n},Ff.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,u=n.y-o,c=r.y-o,l=a*c-s*u,f=t.x-i,p=t.y-o,h=(c*f-s*p)/l,d=(-u*f+a*p)/l;return e.z+h*(n.z-e.z)+d*(r.z-e.z)},Ff.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return i>a&&(a=i),o>a&&(a=o),a},Ff.isAcute=function(t,e,n){return!!Mf.isAcute(t,e,n)&&!!Mf.isAcute(e,n,t)&&!!Mf.isAcute(n,t,e)},Ff.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,u=e.y-i,c=2*Ff.det(o,a,s,u),l=Ff.det(a,o*o+a*a,u,s*s+u*u),f=Ff.det(o,o*o+a*a,s,s*s+u*u);return new Eu(r-l/c,i+f/c)},Ff.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Gu(t.x+n/2,t.y+r/2,1),o=new Gu(t.x-r+n/2,t.y+n+r/2,1);return new Gu(i,o)},Ff.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new Eu(t.x+i*o,t.y+i*a)},Ff.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,u=n.z-t.z,c=i*u-o*s,l=o*a-r*u,f=r*s-i*a,p=c*c+l*l+f*f,h=Math.sqrt(p)/2;return h},Ff.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new Eu(r,i)},Ff.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o,s=(r*t.x+i*e.x+o*n.x)/a,u=(r*t.y+i*e.y+o*n.y)/a;return new Eu(s,u)};var zf=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Ec;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};zf.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Ou.EXTERIOR,Ou.INTERIOR)},zf.prototype.addPolygon=function(t){var e=this._distance,n=Cl.LEFT;this._distance<0&&(e=-this._distance,n=Cl.RIGHT);var r=t.getExteriorRing(),i=Tc.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,Ou.EXTERIOR,Ou.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=Tc.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,Cl.opposite(n),Ou.INTERIOR,Ou.EXTERIOR)}},zf.prototype.isTriangleErodedCompletely=function(t,e){var n=new Ff(t[0],t[1],t[2]),r=n.inCentre();return ac.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},zf.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Tc.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Ou.EXTERIOR,Ou.INTERIOR)},zf.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new df(t,new Il(0,Ou.BOUNDARY,e,n));this._curveList.add(r)},zf.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},zf.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<el.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=el.MINIMUM_VALID_SIZE&&ac.isCCW(t)&&(o=i,a=r,n=Cl.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},zf.prototype.add=function(t){if(t.isEmpty())return null;t instanceof $c?this.addPolygon(t):t instanceof Yc?this.addLineString(t):t instanceof Jc?this.addPoint(t):(t instanceof tl||t instanceof qc||t instanceof nl||t instanceof Vc)&&this.addCollection(t)},zf.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},zf.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},zf.prototype.interfaces_=function(){return[]},zf.prototype.getClass=function(){return zf};var Bf=function(){};Bf.prototype.locate=function(t){},Bf.prototype.interfaces_=function(){return[]},Bf.prototype.getClass=function(){return Bf};var Uf=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Uf.prototype.next=function(){if(this._atStart)return this._atStart=!1,Uf.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Mi;var t=this._parent.getGeometryN(this._index++);return t instanceof Vc?(this._subcollectionIterator=new Uf(t),this._subcollectionIterator.next()):t},Uf.prototype.remove=function(){throw new Error(this.getClass().getName())},Uf.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Uf.prototype.interfaces_=function(){return[xc]},Uf.prototype.getClass=function(){return Uf},Uf.isAtomic=function(t){return!(t instanceof Vc)};var Vf=function(){this._geom=null;var t=arguments[0];this._geom=t};Vf.prototype.locate=function(t){return Vf.locate(t,this._geom)},Vf.prototype.interfaces_=function(){return[Bf]},Vf.prototype.getClass=function(){return Vf},Vf.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&ac.isPointInRing(t,e.getCoordinates())},Vf.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Vf.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(Vf.isPointInRing(t,i))return!1}return!0},Vf.containsPoint=function(t,e){if(e instanceof $c)return Vf.containsPointInPolygon(t,e);if(e instanceof Vc)for(var n=new Uf(e);n.hasNext();){var r=n.next();if(r!==e&&Vf.containsPoint(t,r))return!0}return!1},Vf.locate=function(t,e){return e.isEmpty()?Ou.EXTERIOR:Vf.containsPoint(t,e)?Ou.INTERIOR:Ou.EXTERIOR};var qf=function(){this._edgeMap=new Fi,this._edgeList=null,this._ptInAreaLocation=[Ou.NONE,Ou.NONE]};qf.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},qf.prototype.propagateSideLabels=function(t){for(var e=Ou.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Cl.LEFT)!==Ou.NONE&&(e=r.getLocation(t,Cl.LEFT))}if(e===Ou.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Cl.ON)===Ou.NONE&&s.setLocation(t,Cl.ON,i),s.isArea(t)){var u=s.getLocation(t,Cl.LEFT),c=s.getLocation(t,Cl.RIGHT);if(c!==Ou.NONE){if(c!==i)throw new Al("side location conflict",a.getCoordinate());u===Ou.NONE&&tc.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=u}else tc.isTrue(s.getLocation(t,Cl.LEFT)===Ou.NONE,"found single null side"),s.setLocation(t,Cl.RIGHT,i),s.setLocation(t,Cl.LEFT,i)}}},qf.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},qf.prototype.print=function(t){qu.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},qf.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},qf.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Cl.LEFT);tc.isTrue(r!==Ou.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();tc.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Cl.LEFT),u=a.getLocation(t,Cl.RIGHT);if(s===u)return!1;if(u!==i)return!1;i=s}return!0},qf.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},qf.prototype.iterator=function(){return this.getEdges().iterator()},qf.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Ec(this._edgeMap.values())),this._edgeList},qf.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===Ou.NONE&&(this._ptInAreaLocation[t]=Vf.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},qf.prototype.toString=function(){var t=new Iu;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},qf.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},qf.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===Ou.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),u=0;u<2;u++)if(s.isAnyNull(u)){var c=Ou.NONE;if(e[u])c=Ou.EXTERIOR;else{var l=a.getCoordinate();c=this.getLocation(u,l,t)}s.setAllLocationsIfNull(u,c)}},qf.prototype.getDegree=function(){return this._edgeMap.size()},qf.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},qf.prototype.interfaces_=function(){return[]},qf.prototype.getClass=function(){return qf};var Gf=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Al("no outgoing dirEdge found",this.getCoordinate());tc.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return zl.isNorthern(i)&&zl.isNorthern(o)?n:zl.isNorthern(i)||zl.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(tc.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){qu.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Ec;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Cl.LEFT),r=t.getDepth(Cl.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Al("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=o;u<a;u++){var c=this._edgeList.get(u);c.setEdgeDepths(Cl.RIGHT,s),s=c.getDepth(Cl.LEFT)}return s}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(tc.isTrue(null!==e,"found null for first outgoing dirEdge"),tc.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=Ou.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=Ou.INTERIOR;break}if(r.isInResult()){t=Ou.EXTERIOR;break}}}if(t===Ou.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===Ou.INTERIOR):(a.isInResult()&&(i=Ou.EXTERIOR),s.isInResult()&&(i=Ou.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Il(Ou.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==Ou.INTERIOR&&o!==Ou.BOUNDARY||this._label.setLocation(i,Ou.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qf),Hf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new jl(t,new Gf)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ql),Wf=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Wf.prototype.compareTo=function(t){var e=t;return Wf.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Wf.prototype.interfaces_=function(){return[_u]},Wf.prototype.getClass=function(){return Wf},Wf.orientation=function(t){return 1===Tc.increasingDirection(t)},Wf.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,u=e?0:t.length-1,c=r?0:n.length-1;;){var l=t[u].compareTo(n[c]);if(0!==l)return l;var f=(u+=i)===a,p=(c+=o)===s;if(f&&!p)return-1;if(!f&&p)return 1;if(f&&p)return 0}};var Xf=function(){this._edges=new Ec,this._ocaMap=new Fi};Xf.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Xf.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Xf.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Xf.prototype.iterator=function(){return this._edges.iterator()},Xf.prototype.getEdges=function(){return this._edges},Xf.prototype.get=function(t){return this._edges.get(t)},Xf.prototype.findEqualEdge=function(t){var e=new Wf(t.getCoordinates());return this._ocaMap.get(e)},Xf.prototype.add=function(t){this._edges.add(t);var e=new Wf(t.getCoordinates());this._ocaMap.put(e,t)},Xf.prototype.interfaces_=function(){return[]},Xf.prototype.getClass=function(){return Xf};var Zf=function(){};Zf.prototype.processIntersections=function(t,e,n,r){},Zf.prototype.isDone=function(){},Zf.prototype.interfaces_=function(){return[]},Zf.prototype.getClass=function(){return Zf};var Yf=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Yf.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Yf.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Yf.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Yf.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Yf.prototype.getLineIntersector=function(){return this._li},Yf.prototype.hasProperIntersection=function(){return this._hasProper},Yf.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Yf.prototype.hasIntersection=function(){return this._hasIntersection},Yf.prototype.isDone=function(){return!1},Yf.prototype.hasInteriorIntersection=function(){return this._hasInterior},Yf.prototype.interfaces_=function(){return[Zf]},Yf.prototype.getClass=function(){return Yf},Yf.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Kf=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new Eu(t),this.segmentIndex=e,this.dist=n};Kf.prototype.getSegmentIndex=function(){return this.segmentIndex},Kf.prototype.getCoordinate=function(){return this.coord},Kf.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Kf.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Kf.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Kf.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Kf.prototype.getDistance=function(){return this.dist},Kf.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Kf.prototype.interfaces_=function(){return[_u]},Kf.prototype.getClass=function(){return Kf};var Jf=function(){this._nodeMap=new Fi,this.edge=null;var t=arguments[0];this.edge=t};Jf.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Jf.prototype.iterator=function(){return this._nodeMap.values().iterator()},Jf.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Jf.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Jf.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new Eu(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new np(o,new Il(this.edge._label))},Jf.prototype.add=function(t,e,n){var r=new Kf(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Jf.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Jf.prototype.interfaces_=function(){return[]},Jf.prototype.getClass=function(){return Jf};var Qf=function(){};Qf.prototype.getChainStartIndices=function(t){var e=0,n=new Ec;n.add(new Lu(e));do{var r=this.findChainEnd(t,e);n.add(new Lu(r)),e=r}while(e<t.length-1);return Qf.toIntArray(n)},Qf.prototype.findChainEnd=function(t,e){for(var n=zl.quadrant(t[e],t[e+1]),r=e+1;r<t.length;){if(zl.quadrant(t[r-1],t[r])!==n)break;r++}return r-1},Qf.prototype.interfaces_=function(){return[]},Qf.prototype.getClass=function(){return Qf},Qf.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var $f=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Hu,this.env2=new Hu;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Qf;this.startIndex=e.getChainStartIndices(this.pts)};$f.prototype.getCoordinates=function(){return this.pts},$f.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},$f.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},$f.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4],c=arguments[5],l=this.pts[i],f=this.pts[o],p=a.pts[s],h=a.pts[u];if(o-i==1&&u-s==1)return c.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(l,f),this.env2.init(p,h),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),v=Math.trunc((s+u)/2);i<d&&(s<v&&this.computeIntersectsForChain(i,d,a,s,v,c),v<u&&this.computeIntersectsForChain(i,d,a,v,u,c)),d<o&&(s<v&&this.computeIntersectsForChain(d,o,a,s,v,c),v<u&&this.computeIntersectsForChain(d,o,a,v,u,c))}},$f.prototype.getStartIndexes=function(){return this.startIndex},$f.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},$f.prototype.interfaces_=function(){return[]},$f.prototype.getClass=function(){return $f};var tp=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},ep={NULL_VALUE:{configurable:!0}};tp.prototype.getDepth=function(t,e){return this._depth[t][e]},tp.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},tp.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==tp.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===tp.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===tp.NULL_VALUE}},tp.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},tp.prototype.getDelta=function(t){return this._depth[t][Cl.RIGHT]-this._depth[t][Cl.LEFT]},tp.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?Ou.EXTERIOR:Ou.INTERIOR},tp.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},tp.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==Ou.EXTERIOR&&r!==Ou.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=tp.depthAtLocation(r):this._depth[e][n]+=tp.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===Ou.INTERIOR&&this._depth[i][o]++}},tp.prototype.interfaces_=function(){return[]},tp.prototype.getClass=function(){return tp},tp.depthAtLocation=function(t){return t===Ou.EXTERIOR?0:t===Ou.INTERIOR?1:tp.NULL_VALUE},ep.NULL_VALUE.get=function(){return-1},Object.defineProperties(tp,ep);var np=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Jf(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new tp,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Il.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(r=!1),this.pts[a].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new $f(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Hu;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new Eu(t.getIntersection(r)),o=e,a=t.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var u=this.pts[s];i.equals2D(u)&&(o=s,a=0)}this.eiList.add(i,o,a)},e.prototype.toString=function(){var t=new Iu;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Cl.ON),e.getLocation(1,Cl.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Cl.LEFT),e.getLocation(1,Cl.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Cl.RIGHT),e.getLocation(1,Cl.RIGHT),2))},e}(Nl),rp=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Xf,this._bufParams=t||null};rp.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},rp.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Il(t.getLabel())).flip(),n.merge(r);var i=rp.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(rp.depthDelta(t.getLabel()))},rp.prototype.buildSubgraphs=function(t,e){for(var n=new Ec,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new Df(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},rp.prototype.createSubgraphs=function(t){for(var e=new Ec,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Ml;i.create(r),e.add(i)}}return $l.sort(e,$l.reverseOrder()),e},rp.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},rp.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new wf,n=new rc;return n.setPrecisionModel(t),e.setSegmentIntersector(new Yf(n)),e},rp.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Rf(n,this._bufParams),i=new zf(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new Gl(new Hf),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new Hl(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},rp.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new np(i.getCoordinates(),new Il(a));this.insertUniqueEdge(s)}}},rp.prototype.setNoder=function(t){this._workingNoder=t},rp.prototype.interfaces_=function(){return[]},rp.prototype.getClass=function(){return rp},rp.depthDelta=function(t){var e=t.getLocation(0,Cl.LEFT),n=t.getLocation(0,Cl.RIGHT);return e===Ou.INTERIOR&&n===Ou.EXTERIOR?1:e===Ou.EXTERIOR&&n===Ou.INTERIOR?-1:0},rp.convertSegStrings=function(t){for(var e=new gl,n=new Ec;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var ip=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ip.prototype.rescale=function(){if(ku(arguments[0],bc))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&qu.out.println(n)}},ip.prototype.scale=function(){if(ku(arguments[0],bc)){for(var t=arguments[0],e=new Ec,n=t.iterator();n.hasNext();){var r=n.next();e.add(new df(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),a=0;a<i.length;a++)o[a]=new Eu(Math.round((i[a].x-this._offsetX)*this._scaleFactor),Math.round((i[a].y-this._offsetY)*this._scaleFactor),i[a].z);return Tc.removeRepeatedPoints(o)}},ip.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ip.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ip.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ip.prototype.interfaces_=function(){return[_f]},ip.prototype.getClass=function(){return ip};var op=function(){this._li=new rc,this._segStrings=null;var t=arguments[0];this._segStrings=t},ap={fact:{configurable:!0}};op.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new Qu("found endpt/interior pt intersection at index "+o+" :pt "+n)},op.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),u=0;u<a.length-1;u++)for(var c=0;c<s.length-1;c++)this.checkInteriorIntersections(i,u,o,c);else if(4===arguments.length){var l=arguments[0],f=arguments[1],p=arguments[2],h=arguments[3];if(l===p&&f===h)return null;var d=l.getCoordinates()[f],v=l.getCoordinates()[f+1],m=p.getCoordinates()[h],g=p.getCoordinates()[h+1];if(this._li.computeIntersection(d,v,m,g),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,v)||this.hasInteriorIntersection(this._li,m,g)))throw new Qu("found non-noded intersection at "+d+"-"+v+" and "+m+"-"+g)}},op.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},op.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},op.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},op.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Qu("found non-noded collapse at "+op.fact.createLineString([t,e,n]))},op.prototype.interfaces_=function(){return[]},op.prototype.getClass=function(){return op},ap.fact.get=function(){return new gl},Object.defineProperties(op,ap);var sp=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new gu("Scale factor must be non-zero");1!==e&&(this._pt=new Eu(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new Eu,this._p1Scaled=new Eu),this.initCorners(this._pt)},up={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};sp.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return tc.isTrue(!(a&&s),"Found bad envelope test"),s},sp.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new Eu(this._maxx,this._maxy),this._corner[1]=new Eu(this._minx,this._maxy),this._corner[2]=new Eu(this._minx,this._miny),this._corner[3]=new Eu(this._maxx,this._miny)},sp.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},sp.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},sp.prototype.getCoordinate=function(){return this._originalPt},sp.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},sp.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=sp.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Hu(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},sp.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},sp.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!n||!r)||!!t.equals(this._pt)||!!e.equals(this._pt))))},sp.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},sp.prototype.interfaces_=function(){return[]},sp.prototype.getClass=function(){return sp},up.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(sp,up);var cp=function(){this.tempEnv1=new Hu,this.selectedSegment=new vf};cp.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},cp.prototype.interfaces_=function(){return[]},cp.prototype.getClass=function(){return cp};var lp=function(){this._index=null;var t=arguments[0];this._index=t},fp={HotPixelSnapAction:{configurable:!0}};lp.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new pp(e,n,r);return this._index.query(i,{interfaces_:function(){return[Yl]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},lp.prototype.interfaces_=function(){return[]},lp.prototype.getClass=function(){return lp},fp.HotPixelSnapAction.get=function(){return pp},Object.defineProperties(lp,fp);var pp=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],n=arguments[1],r=e.getContext();if(null!==this._parentEdge&&r===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(r,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(cp),hp=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new Ec};hp.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},hp.prototype.isDone=function(){return!1},hp.prototype.getInteriorIntersections=function(){return this._interiorIntersections},hp.prototype.interfaces_=function(){return[Zf]},hp.prototype.getClass=function(){return hp};var dp=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new rc,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};dp.prototype.checkCorrectness=function(t){var e=df.getNodedSubstrings(t),n=new op(e);try{n.checkValid()}catch(t){if(!(t instanceof Uu))throw t;t.printStackTrace()}},dp.prototype.getNodedSubstrings=function(){return df.getNodedSubstrings(this._nodedSegStrings)},dp.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},dp.prototype.findInteriorIntersections=function(t,e){var n=new hp(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},dp.prototype.computeVertexSnaps=function(){if(ku(arguments[0],bc))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof df)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new sp(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},dp.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new wf,this._pointSnapper=new lp(this._noder.getIndex()),this.snapRound(t,this._li)},dp.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new sp(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},dp.prototype.interfaces_=function(){return[_f]},dp.prototype.getClass=function(){return dp};var vp=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Sf,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},mp={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};vp.prototype.bufferFixedPrecision=function(t){var e=new ip(new dp(new hl(1)),t.getScale()),n=new rp(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},vp.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=vp.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Al))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=vp.precisionScaleFactor(this._argGeom,this._distance,n),i=new hl(r);this.bufferFixedPrecision(i)}},vp.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===hl.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},vp.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},vp.prototype.bufferOriginalPrecision=function(){try{var t=new rp(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Qu))throw t;this._saveException=t}},vp.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},vp.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},vp.prototype.interfaces_=function(){return[]},vp.prototype.getClass=function(){return vp},vp.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new vp(t).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof cc&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1],i=arguments[2],o=new vp(n);return o.setQuadrantSegments(i),o.getResultGeometry(r)}if(arguments[2]instanceof Sf&&arguments[0]instanceof cc&&"number"==typeof arguments[1]){var a=arguments[0],s=arguments[1],u=arguments[2];return new vp(a,u).getResultGeometry(s)}}else if(4===arguments.length){var c=arguments[0],l=arguments[1],f=arguments[2],p=arguments[3],h=new vp(c);return h.setQuadrantSegments(f),h.setEndCapStyle(p),h.getResultGeometry(l)}},vp.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=Mu.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},mp.CAP_ROUND.get=function(){return Sf.CAP_ROUND},mp.CAP_BUTT.get=function(){return Sf.CAP_FLAT},mp.CAP_FLAT.get=function(){return Sf.CAP_FLAT},mp.CAP_SQUARE.get=function(){return Sf.CAP_SQUARE},mp.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(vp,mp);var gp=function(){this._pt=[new Eu,new Eu],this._distance=yu.NaN,this._isNull=!0};gp.prototype.getCoordinates=function(){return this._pt},gp.prototype.getCoordinate=function(t){return this._pt[t]},gp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},gp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},gp.prototype.getDistance=function(){return this._distance},gp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},gp.prototype.interfaces_=function(){return[]},gp.prototype.getClass=function(){return gp};var yp=function(){};yp.prototype.interfaces_=function(){return[]},yp.prototype.getClass=function(){return yp},yp.computeDistance=function(){if(arguments[2]instanceof gp&&arguments[0]instanceof Yc&&arguments[1]instanceof Eu)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=t.getCoordinates(),i=new vf,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var a=i.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof gp&&arguments[0]instanceof $c&&arguments[1]instanceof Eu){var s=arguments[0],u=arguments[1],c=arguments[2];yp.computeDistance(s.getExteriorRing(),u,c);for(var l=0;l<s.getNumInteriorRing();l++)yp.computeDistance(s.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof gp&&arguments[0]instanceof cc&&arguments[1]instanceof Eu){var f=arguments[0],p=arguments[1],h=arguments[2];if(f instanceof Yc)yp.computeDistance(f,p,h);else if(f instanceof $c)yp.computeDistance(f,p,h);else if(f instanceof Vc)for(var d=f,v=0;v<d.getNumGeometries();v++){var m=d.getGeometryN(v);yp.computeDistance(m,p,h)}else h.setMinimum(f.getCoordinate(),p)}else if(arguments[2]instanceof gp&&arguments[0]instanceof vf&&arguments[1]instanceof Eu){var g=arguments[0],y=arguments[1],b=arguments[2],_=g.closestPoint(y);b.setMinimum(_,y)}};var bp=function(t){this._maxPtDist=new gp,this._inputGeom=t||null},_p={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};bp.prototype.computeMaxMidpointDistance=function(t){var e=new wp(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},bp.prototype.computeMaxVertexDistance=function(t){var e=new xp(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},bp.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},bp.prototype.getDistancePoints=function(){return this._maxPtDist},bp.prototype.interfaces_=function(){return[]},bp.prototype.getClass=function(){return bp},_p.MaxPointDistanceFilter.get=function(){return xp},_p.MaxMidpointDistanceFilter.get=function(){return wp},Object.defineProperties(bp,_p);var xp=function(t){this._maxPtDist=new gp,this._minPtDist=new gp,this._geom=t||null};xp.prototype.filter=function(t){this._minPtDist.initialize(),yp.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},xp.prototype.getMaxPointDistance=function(){return this._maxPtDist},xp.prototype.interfaces_=function(){return[pc]},xp.prototype.getClass=function(){return xp};var wp=function(t){this._maxPtDist=new gp,this._minPtDist=new gp,this._geom=t||null};wp.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new Eu((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),yp.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},wp.prototype.isDone=function(){return!1},wp.prototype.isGeometryChanged=function(){return!1},wp.prototype.getMaxPointDistance=function(){return this._maxPtDist},wp.prototype.interfaces_=function(){return[Uc]},wp.prototype.getClass=function(){return wp};var Ep=function(t){this._comps=t||null};Ep.prototype.filter=function(t){t instanceof $c&&this._comps.add(t)},Ep.prototype.interfaces_=function(){return[Bc]},Ep.prototype.getClass=function(){return Ep},Ep.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Ep.getPolygons(t,new Ec)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof $c?n.add(e):e instanceof Vc&&e.apply(new Ep(n)),n}};var Sp=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Sp.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof el){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Yc&&this._lines.add(t)},Sp.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Sp.prototype.interfaces_=function(){return[uc]},Sp.prototype.getClass=function(){return Sp},Sp.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Sp.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Sp.getLines(e,n))}},Sp.getLines=function(){if(1===arguments.length){var t=arguments[0];return Sp.getLines(t,!1)}if(2===arguments.length){if(ku(arguments[0],bc)&&ku(arguments[1],bc)){for(var e=arguments[0],n=arguments[1],r=e.iterator();r.hasNext();){var i=r.next();Sp.getLines(i,n)}return n}if(arguments[0]instanceof cc&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1],s=new Ec;return o.apply(new Sp(s,a)),s}if(arguments[0]instanceof cc&&ku(arguments[1],bc)){var u=arguments[0],c=arguments[1];return u instanceof Yc?c.add(u):u.apply(new Sp(c)),c}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&ku(arguments[0],bc)&&ku(arguments[1],bc)){for(var l=arguments[0],f=arguments[1],p=arguments[2],h=l.iterator();h.hasNext();){var d=h.next();Sp.getLines(d,f,p)}return f}if("boolean"==typeof arguments[2]&&arguments[0]instanceof cc&&ku(arguments[1],bc)){var v=arguments[0],m=arguments[1],g=arguments[2];return v.apply(new Sp(m,g)),m}}};var Cp=function(){if(this._boundaryRule=hc.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new gu("Rule must be non-null");this._boundaryRule=t}};Cp.prototype.locateInternal=function(){if(arguments[0]instanceof Eu&&arguments[1]instanceof $c){var t=arguments[0],e=arguments[1];if(e.isEmpty())return Ou.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===Ou.EXTERIOR)return Ou.EXTERIOR;if(r===Ou.BOUNDARY)return Ou.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=this.locateInPolygonRing(t,o);if(a===Ou.INTERIOR)return Ou.EXTERIOR;if(a===Ou.BOUNDARY)return Ou.BOUNDARY}return Ou.INTERIOR}if(arguments[0]instanceof Eu&&arguments[1]instanceof Yc){var s=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(s))return Ou.EXTERIOR;var c=u.getCoordinates();return u.isClosed()||!s.equals(c[0])&&!s.equals(c[c.length-1])?ac.isOnLine(s,c)?Ou.INTERIOR:Ou.EXTERIOR:Ou.BOUNDARY}if(arguments[0]instanceof Eu&&arguments[1]instanceof Jc){var l=arguments[0];return arguments[1].getCoordinate().equals2D(l)?Ou.INTERIOR:Ou.EXTERIOR}},Cp.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?ac.locatePointInRing(t,e.getCoordinates()):Ou.EXTERIOR},Cp.prototype.intersects=function(t,e){return this.locate(t,e)!==Ou.EXTERIOR},Cp.prototype.updateLocationInfo=function(t){t===Ou.INTERIOR&&(this._isIn=!0),t===Ou.BOUNDARY&&this._numBoundaries++},Cp.prototype.computeLocation=function(t,e){if(e instanceof Jc&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Yc)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof $c)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof qc)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof nl)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof Vc)for(var u=new Uf(e);u.hasNext();){var c=u.next();c!==e&&this.computeLocation(t,c)}},Cp.prototype.locate=function(t,e){return e.isEmpty()?Ou.EXTERIOR:e instanceof Yc||e instanceof $c?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?Ou.BOUNDARY:this._numBoundaries>0||this._isIn?Ou.INTERIOR:Ou.EXTERIOR)},Cp.prototype.interfaces_=function(){return[]},Cp.prototype.getClass=function(){return Cp};var Tp=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},Op={INSIDE_AREA:{configurable:!0}};Tp.prototype.isInsideArea=function(){return this._segIndex===Tp.INSIDE_AREA},Tp.prototype.getCoordinate=function(){return this._pt},Tp.prototype.getGeometryComponent=function(){return this._component},Tp.prototype.getSegmentIndex=function(){return this._segIndex},Tp.prototype.interfaces_=function(){return[]},Tp.prototype.getClass=function(){return Tp},Op.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Tp,Op);var Ap=function(t){this._pts=t||null};Ap.prototype.filter=function(t){t instanceof Jc&&this._pts.add(t)},Ap.prototype.interfaces_=function(){return[Bc]},Ap.prototype.getClass=function(){return Ap},Ap.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Jc?$l.singletonList(t):Ap.getPoints(t,new Ec)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Jc?n.add(e):e instanceof Vc&&e.apply(new Ap(n)),n}};var kp=function(){this._locations=null;var t=arguments[0];this._locations=t};kp.prototype.filter=function(t){(t instanceof Jc||t instanceof Yc||t instanceof $c)&&this._locations.add(new Tp(t,0,t.getCoordinate()))},kp.prototype.interfaces_=function(){return[Bc]},kp.prototype.getClass=function(){return kp},kp.getLocations=function(t){var e=new Ec;return t.apply(new kp(e)),e};var Mp=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Cp,this._minDistanceLocation=null,this._minDistance=yu.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Mp.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=Ep.getPolygons(this._geom[e]);if(i.size()>0){var o=kp.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&ku(arguments[0],wc)&&ku(arguments[1],wc)){for(var a=arguments[0],s=arguments[1],u=arguments[2],c=0;c<a.size();c++)for(var l=a.get(c),f=0;f<s.size();f++)if(this.computeContainmentDistance(l,s.get(f),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Tp&&arguments[1]instanceof $c){var p=arguments[0],h=arguments[1],d=arguments[2],v=p.getCoordinate();if(Ou.EXTERIOR!==this._ptLocator.locate(v,h))return this._minDistance=0,d[0]=p,d[1]=new Tp(h,v),null}},Mp.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Mp.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Sp.getLines(this._geom[0]),n=Sp.getLines(this._geom[1]),r=Ap.getPoints(this._geom[0]),i=Ap.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Mp.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Mp.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Mp.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Mp.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Yc&&arguments[1]instanceof Jc){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var a=ac.distancePointLine(i,r[o],r[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new vf(r[o],r[o+1]).closestPoint(i);n[0]=new Tp(t,o,s),n[1]=new Tp(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Yc&&arguments[1]instanceof Yc){var u=arguments[0],c=arguments[1],l=arguments[2];if(u.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(var f=u.getCoordinates(),p=c.getCoordinates(),h=0;h<f.length-1;h++)for(var d=0;d<p.length-1;d++){var v=ac.distanceLineLine(f[h],f[h+1],p[d],p[d+1]);if(v<this._minDistance){this._minDistance=v;var m=new vf(f[h],f[h+1]),g=new vf(p[d],p[d+1]),y=m.closestPoints(g);l[0]=new Tp(u,h,y[0]),l[1]=new Tp(c,d,y[1])}if(this._minDistance<=this._terminateDistance)return null}}},Mp.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o),s=i.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new Tp(i,0,i.getCoordinate()),n[1]=new Tp(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Mp.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new gu("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Mp.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Mp.prototype.interfaces_=function(){return[]},Mp.prototype.getClass=function(){return Mp},Mp.distance=function(t,e){return new Mp(t,e).distance()},Mp.isWithinDistance=function(t,e,n){return new Mp(t,e,n).distance()<=n},Mp.nearestPoints=function(t,e){return new Mp(t,e).nearestPoints()};var Pp=function(){this._pt=[new Eu,new Eu],this._distance=yu.NaN,this._isNull=!0};Pp.prototype.getCoordinates=function(){return this._pt},Pp.prototype.getCoordinate=function(t){return this._pt[t]},Pp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Pp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Pp.prototype.toString=function(){return Ju.toLineString(this._pt[0],this._pt[1])},Pp.prototype.getDistance=function(){return this._distance},Pp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Pp.prototype.interfaces_=function(){return[]},Pp.prototype.getClass=function(){return Pp};var Ip=function(){};Ip.prototype.interfaces_=function(){return[]},Ip.prototype.getClass=function(){return Ip},Ip.computeDistance=function(){if(arguments[2]instanceof Pp&&arguments[0]instanceof Yc&&arguments[1]instanceof Eu)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new vf,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof Pp&&arguments[0]instanceof $c&&arguments[1]instanceof Eu){var s=arguments[0],u=arguments[1],c=arguments[2];Ip.computeDistance(s.getExteriorRing(),u,c);for(var l=0;l<s.getNumInteriorRing();l++)Ip.computeDistance(s.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof Pp&&arguments[0]instanceof cc&&arguments[1]instanceof Eu){var f=arguments[0],p=arguments[1],h=arguments[2];if(f instanceof Yc)Ip.computeDistance(f,p,h);else if(f instanceof $c)Ip.computeDistance(f,p,h);else if(f instanceof Vc)for(var d=f,v=0;v<d.getNumGeometries();v++){var m=d.getGeometryN(v);Ip.computeDistance(m,p,h)}else h.setMinimum(f.getCoordinate(),p)}else if(arguments[2]instanceof Pp&&arguments[0]instanceof vf&&arguments[1]instanceof Eu){var g=arguments[0],y=arguments[1],b=arguments[2],_=g.closestPoint(y);b.setMinimum(_,y)}};var Lp=function(){this._g0=null,this._g1=null,this._ptDist=new Pp,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Rp={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Lp.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Lp.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new gu("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Lp.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Lp.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Lp.prototype.computeOrientedDistance=function(t,e,n){var r=new Dp(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new Np(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Lp.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Lp.prototype.interfaces_=function(){return[]},Lp.prototype.getClass=function(){return Lp},Lp.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Lp(t,e).distance()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new Lp(n,r);return o.setDensifyFraction(i),o.distance()}},Rp.MaxPointDistanceFilter.get=function(){return Dp},Rp.MaxDensifiedByFractionDistanceFilter.get=function(){return Np},Object.defineProperties(Lp,Rp);var Dp=function(){this._maxPtDist=new Pp,this._minPtDist=new Pp,this._euclideanDist=new Ip,this._geom=null;var t=arguments[0];this._geom=t};Dp.prototype.filter=function(t){this._minPtDist.initialize(),Ip.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Dp.prototype.getMaxPointDistance=function(){return this._maxPtDist},Dp.prototype.interfaces_=function(){return[pc]},Dp.prototype.getClass=function(){return Dp};var Np=function(){this._maxPtDist=new Pp,this._minPtDist=new Pp,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Np.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=n.x+a*i,u=n.y+a*o,c=new Eu(s,u);this._minPtDist.initialize(),Ip.computeDistance(this._geom,c,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Np.prototype.isDone=function(){return!1},Np.prototype.isGeometryChanged=function(){return!1},Np.prototype.getMaxPointDistance=function(){return this._maxPtDist},Np.prototype.interfaces_=function(){return[Uc]},Np.prototype.getClass=function(){return Np};var jp=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Fp={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};jp.prototype.checkMaximumDistance=function(t,e,n){var r=new Lp(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Ju.toLineString(i[0],i[1])+")"}},jp.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=jp.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),jp.VERBOSE&&qu.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},jp.prototype.checkNegativeValid=function(){if(!(this._input instanceof $c||this._input instanceof nl||this._input instanceof Vc))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},jp.prototype.getErrorIndicator=function(){return this._errorIndicator},jp.prototype.checkMinimumDistance=function(t,e,n){var r=new Mp(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Ju.toLineString(i[0],i[1])+" )"}},jp.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},jp.prototype.getErrorLocation=function(){return this._errorLocation},jp.prototype.getPolygonLines=function(t){for(var e=new Ec,n=new Sp(e),r=Ep.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},jp.prototype.getErrorMessage=function(){return this._errMsg},jp.prototype.interfaces_=function(){return[]},jp.prototype.getClass=function(){return jp},Fp.VERBOSE.get=function(){return!1},Fp.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(jp,Fp);var zp=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Bp={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};zp.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},zp.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*zp.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Hu(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new Hu(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},zp.prototype.checkDistance=function(){var t=new jp(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},zp.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},zp.prototype.checkPolygonal=function(){this._result instanceof $c||this._result instanceof nl||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},zp.prototype.getErrorIndicator=function(){return this._errorIndicator},zp.prototype.getErrorLocation=function(){return this._errorLocation},zp.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},zp.prototype.report=function(t){if(!zp.VERBOSE)return null;qu.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},zp.prototype.getErrorMessage=function(){return this._errorMsg},zp.prototype.interfaces_=function(){return[]},zp.prototype.getClass=function(){return zp},zp.isValidMsg=function(t,e,n){var r=new zp(t,e,n);return r.isValid()?null:r.getErrorMessage()},zp.isValid=function(t,e,n){return!!new zp(t,e,n).isValid()},Bp.VERBOSE.get=function(){return!1},Bp.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(zp,Bp);var Up=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Up.prototype.getCoordinates=function(){return this._pts},Up.prototype.size=function(){return this._pts.length},Up.prototype.getCoordinate=function(t){return this._pts[t]},Up.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Up.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:ff.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Up.prototype.setData=function(t){this._data=t},Up.prototype.getData=function(){return this._data},Up.prototype.toString=function(){return Ju.toLineString(new ul(this._pts))},Up.prototype.interfaces_=function(){return[pf]},Up.prototype.getClass=function(){return Up};var Vp=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Ec,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Vp.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Vp.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Vp.prototype.getIntersectionSegments=function(){return this._intSegments},Vp.prototype.count=function(){return this._intersectionCount},Vp.prototype.getIntersections=function(){return this._intersections},Vp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Vp.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Vp.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Vp.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Vp.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Vp.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Vp.prototype.interfaces_=function(){return[Zf]},Vp.prototype.getClass=function(){return Vp},Vp.createAllIntersectionsFinder=function(t){var e=new Vp(t);return e.setFindAllIntersections(!0),e},Vp.createAnyIntersectionFinder=function(t){return new Vp(t)},Vp.createIntersectionCounter=function(t){var e=new Vp(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var qp=function(){this._li=new rc,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};qp.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},qp.prototype.getIntersections=function(){return this._segInt.getIntersections()},qp.prototype.isValid=function(){return this.execute(),this._isValid},qp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},qp.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Vp(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new wf;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},qp.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Al(this.getErrorMessage(),this._segInt.getInteriorIntersection())},qp.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Ju.toLineString(t[0],t[1])+" and "+Ju.toLineString(t[2],t[3])},qp.prototype.interfaces_=function(){return[]},qp.prototype.getClass=function(){return qp},qp.computeIntersections=function(t){var e=new qp(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Gp=function t(){this._nv=null;var e=arguments[0];this._nv=new qp(t.toSegmentStrings(e))};Gp.prototype.checkValid=function(){this._nv.checkValid()},Gp.prototype.interfaces_=function(){return[]},Gp.prototype.getClass=function(){return Gp},Gp.toSegmentStrings=function(t){for(var e=new Ec,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Up(r.getCoordinates(),r))}return e},Gp.checkValid=function(t){new Gp(t).checkValid()};var Hp=function(t){this._mapOp=t};Hp.prototype.map=function(t){for(var e=new Ec,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(gl.toGeometryArray(e))},Hp.prototype.interfaces_=function(){return[]},Hp.prototype.getClass=function(){return Hp},Hp.map=function(t,e){return new Hp(e).map(t)};var Wp=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Ec,this._resultLineList=new Ec;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Wp.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Wp.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Wp.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Wp.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Th.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Wp.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Wp.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Wp.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Wp.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(tc.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Th.isResultOfOp(r,e)&&e===Th.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Wp.prototype.interfaces_=function(){return[]},Wp.prototype.getClass=function(){return Wp};var Xp=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Ec;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Xp.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Xp.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!n.isInResult()&&!n.isIncidentEdgeInResult()&&(0===n.getEdges().getDegree()||t===Th.INTERSECTION)){var r=n.getLabel();Th.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Xp.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Xp.prototype.interfaces_=function(){return[]},Xp.prototype.getClass=function(){return Xp};var Zp=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Zp.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Zp.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof el&&!r.isEmpty()||(n=!1);for(var i=new Ec,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof el||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new Ec;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},Zp.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Zp.prototype.getInputGeometry=function(){return this._inputGeom},Zp.prototype.transformMultiLineString=function(t,e){for(var n=new Ec,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Zp.prototype.transformCoordinates=function(t,e){return this.copy(t)},Zp.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Zp.prototype.transformMultiPoint=function(t,e){for(var n=new Ec,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Zp.prototype.transformMultiPolygon=function(t,e){for(var n=new Ec,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Zp.prototype.copy=function(t){return t.copy()},Zp.prototype.transformGeometryCollection=function(t,e){for(var n=new Ec,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(gl.toGeometryArray(n)):this._factory.buildGeometry(n)},Zp.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Jc)return this.transformPoint(t,null);if(t instanceof tl)return this.transformMultiPoint(t,null);if(t instanceof el)return this.transformLinearRing(t,null);if(t instanceof Yc)return this.transformLineString(t,null);if(t instanceof qc)return this.transformMultiLineString(t,null);if(t instanceof $c)return this.transformPolygon(t,null);if(t instanceof nl)return this.transformMultiPolygon(t,null);if(t instanceof Vc)return this.transformGeometryCollection(t,null);throw new gu("Unknown Geometry subtype: "+t.getClass().getName())},Zp.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Zp.prototype.interfaces_=function(){return[]},Zp.prototype.getClass=function(){return Zp};var Yp=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new vf,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Yc&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=t.isClosed(r),this._snapTolerance=i}};Yp.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new Eu(o)),0===r&&this._isClosed&&t.set(t.size()-1,new Eu(o)))}},Yp.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Yp.prototype.snapTo=function(t){var e=new Cc(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Yp.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new Eu(i),!1)}},Yp.prototype.findSegmentIndexToSnap=function(t,e){for(var n=yu.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},Yp.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Yp.prototype.interfaces_=function(){return[]},Yp.prototype.getClass=function(){return Yp},Yp.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Kp=function(t){this._srcGeom=t||null},Jp={SNAP_PRECISION_FACTOR:{configurable:!0}};Kp.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Qp(e,n).transform(this._srcGeom)},Kp.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Qp(t,n,!0).transform(this._srcGeom),i=r;return e&&ku(i,Qc)&&(i=r.buffer(0)),i},Kp.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Kp.prototype.extractTargetCoordinates=function(t){for(var e=new Bi,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Kp.prototype.computeMinimumSegmentLength=function(t){for(var e=yu.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Kp.prototype.interfaces_=function(){return[]},Kp.prototype.getClass=function(){return Kp},Kp.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Kp(t);r[0]=i.snapTo(e,n);var o=new Kp(e);return r[1]=o.snapTo(r[0],n),r},Kp.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Kp.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===hl.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Kp.computeOverlaySnapTolerance(i),Kp.computeOverlaySnapTolerance(o))}},Kp.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Kp.SNAP_PRECISION_FACTOR},Kp.snapToSelf=function(t,e,n){return new Kp(t).snapToSelf(e,n)},Jp.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Kp,Jp);var Qp=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Yp(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Zp),$p=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};$p.prototype.getCommon=function(){return yu.longBitsToDouble(this._commonBits)},$p.prototype.add=function(t){var e=yu.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=$p.signExpBits(this._commonBits),this._isFirst=!1,null):$p.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=$p.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=$p.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},$p.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=yu.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+yu.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},$p.prototype.interfaces_=function(){return[]},$p.prototype.getClass=function(){return $p},$p.getBit=function(t,e){return 0!=(t&1<<e)?1:0},$p.signExpBits=function(t){return t>>52},$p.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},$p.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if($p.getBit(t,r)!==$p.getBit(e,r))return n;n++}return 52};var th=function(){this._commonCoord=null,this._ccFilter=new nh},eh={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};th.prototype.addCommonBits=function(t){var e=new rh(this._commonCoord);t.apply(e),t.geometryChanged()},th.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new Eu(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new rh(e);return t.apply(n),t.geometryChanged(),t},th.prototype.getCommonCoordinate=function(){return this._commonCoord},th.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},th.prototype.interfaces_=function(){return[]},th.prototype.getClass=function(){return th},eh.CommonCoordinateFilter.get=function(){return nh},eh.Translater.get=function(){return rh},Object.defineProperties(th,eh);var nh=function(){this._commonBitsX=new $p,this._commonBitsY=new $p};nh.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},nh.prototype.getCommonCoordinate=function(){return new Eu(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},nh.prototype.interfaces_=function(){return[pc]},nh.prototype.getClass=function(){return nh};var rh=function(){this.trans=null;var t=arguments[0];this.trans=t};rh.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},rh.prototype.isDone=function(){return!1},rh.prototype.isGeometryChanged=function(){return!0},rh.prototype.interfaces_=function(){return[Uc]},rh.prototype.getClass=function(){return rh};var ih=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ih.prototype.selfSnap=function(t){return new Kp(t).snapTo(t,this._snapTolerance)},ih.prototype.removeCommonBits=function(t){this._cbr=new th,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ih.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ih.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Th.overlayOp(e[0],e[1],t);return this.prepareResult(n)},ih.prototype.checkValid=function(t){t.isValid()||qu.out.println("Snapped geometry is invalid")},ih.prototype.computeSnapTolerance=function(){this._snapTolerance=Kp.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ih.prototype.snap=function(t){var e=this.removeCommonBits(t);return Kp.snap(e[0],e[1],this._snapTolerance)},ih.prototype.interfaces_=function(){return[]},ih.prototype.getClass=function(){return ih},ih.overlayOp=function(t,e,n){return new ih(t,e).getResultGeometry(n)},ih.union=function(t,e){return ih.overlayOp(t,e,Th.UNION)},ih.intersection=function(t,e){return ih.overlayOp(t,e,Th.INTERSECTION)},ih.symDifference=function(t,e){return ih.overlayOp(t,e,Th.SYMDIFFERENCE)},ih.difference=function(t,e){return ih.overlayOp(t,e,Th.DIFFERENCE)};var oh=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};oh.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Th.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Qu))throw t;r=t}if(!n)try{e=ih.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Qu?r:t}return e},oh.prototype.interfaces_=function(){return[]},oh.prototype.getClass=function(){return oh},oh.overlayOp=function(t,e,n){return new oh(t,e).getResultGeometry(n)},oh.union=function(t,e){return oh.overlayOp(t,e,Th.UNION)},oh.intersection=function(t,e){return oh.overlayOp(t,e,Th.INTERSECTION)},oh.symDifference=function(t,e){return oh.overlayOp(t,e,Th.SYMDIFFERENCE)},oh.difference=function(t,e){return oh.overlayOp(t,e,Th.DIFFERENCE)};var ah=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};ah.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},ah.prototype.interfaces_=function(){return[]},ah.prototype.getClass=function(){return ah};var sh=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},uh={INSERT:{configurable:!0},DELETE:{configurable:!0}};sh.prototype.isDelete=function(){return this._eventType===sh.DELETE},sh.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},sh.prototype.getObject=function(){return this._obj},sh.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},sh.prototype.getInsertEvent=function(){return this._insertEvent},sh.prototype.isInsert=function(){return this._eventType===sh.INSERT},sh.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},sh.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},sh.prototype.interfaces_=function(){return[_u]},sh.prototype.getClass=function(){return sh},uh.INSERT.get=function(){return 1},uh.DELETE.get=function(){return 2},Object.defineProperties(sh,uh);var ch=function(){};ch.prototype.interfaces_=function(){return[]},ch.prototype.getClass=function(){return ch};var lh=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};lh.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(lh.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},lh.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},lh.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},lh.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},lh.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},lh.prototype.hasProperIntersection=function(){return this._hasProper},lh.prototype.hasIntersection=function(){return this._hasIntersection},lh.prototype.isDone=function(){return this._isDone},lh.prototype.isBoundaryPoint=function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},lh.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},lh.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},lh.prototype.interfaces_=function(){return[]},lh.prototype.getClass=function(){return lh},lh.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var fh=function(t){function e(){t.call(this),this.events=new Ec,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){$l.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof lh&&ku(arguments[0],wc)&&ku(arguments[1],wc)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&ku(arguments[0],wc)&&arguments[1]instanceof lh){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new ah(n,i),a=new sh(e,n.getMinX(i),o);this.events.add(a),this.events.add(new sh(n.getMaxX(i),a))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();this.addEdge(o,r)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ch),ph=function(){this._min=yu.POSITIVE_INFINITY,this._max=yu.NEGATIVE_INFINITY},hh={NodeComparator:{configurable:!0}};ph.prototype.getMin=function(){return this._min},ph.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},ph.prototype.getMax=function(){return this._max},ph.prototype.toString=function(){return Ju.toLineString(new Eu(this._min,0),new Eu(this._max,0))},ph.prototype.interfaces_=function(){return[]},ph.prototype.getClass=function(){return ph},hh.NodeComparator.get=function(){return dh},Object.defineProperties(ph,hh);var dh=function(){};dh.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},dh.prototype.interfaces_=function(){return[wu]},dh.prototype.getClass=function(){return dh};var vh=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ph),mh=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ph),gh=function(){this._leaves=new Ec,this._root=null,this._level=0};gh.prototype.buildTree=function(){$l.sort(this._leaves,new ph.NodeComparator);for(var t=this._leaves,e=null,n=new Ec;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},gh.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new vh(t,e,n))},gh.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},gh.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},gh.prototype.printNode=function(t){qu.out.println(Ju.toLineString(new Eu(t._min,this._level),new Eu(t._max,this._level)))},gh.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},gh.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new mh(t.get(n),t.get(n+1));e.add(i)}}},gh.prototype.interfaces_=function(){return[]},gh.prototype.getClass=function(){return gh};var yh=function(){this._items=new Ec};yh.prototype.visitItem=function(t){this._items.add(t)},yh.prototype.getItems=function(){return this._items},yh.prototype.interfaces_=function(){return[Yl]},yh.prototype.getClass=function(){return yh};var bh=function(){this._index=null;var t=arguments[0];if(!ku(t,Qc))throw new gu("Argument must be Polygonal");this._index=new wh(t)},_h={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};bh.prototype.locate=function(t){var e=new oc(t),n=new xh(e);return this._index.query(t.y,t.y,n),e.getLocation()},bh.prototype.interfaces_=function(){return[Bf]},bh.prototype.getClass=function(){return bh},_h.SegmentVisitor.get=function(){return xh},_h.IntervalIndexedGeometry.get=function(){return wh},Object.defineProperties(bh,_h);var xh=function(){this._counter=null;var t=arguments[0];this._counter=t};xh.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},xh.prototype.interfaces_=function(){return[Yl]},xh.prototype.getClass=function(){return xh};var wh=function(){this._index=new gh;var t=arguments[0];this.init(t)};wh.prototype.init=function(t){for(var e=Sp.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},wh.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new vf(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},wh.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new yh;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},wh.prototype.interfaces_=function(){return[]},wh.prototype.getClass=function(){return wh};var Eh=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new pl,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Cp,2===arguments.length){var e=arguments[0],n=arguments[1],r=hc.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;Ou.NONE,r.getLocation(t,Cl.ON)===Ou.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new lh(n,!0,!1);o.setIsDoneIfProperInt(i);var a=this.createEdgeSetIntersector(),s=this._parentGeom instanceof el||this._parentGeom instanceof $c||this._parentGeom instanceof nl,u=r||!s;return a.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new lh(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Jc){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,Ou.INTERIOR)}else if(arguments[0]instanceof Eu){var e=arguments[0];this.insertPoint(this._argIndex,e,Ou.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),Ou.EXTERIOR,Ou.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,Ou.INTERIOR,Ou.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],Ou.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],Ou.BOUNDARY)},e.prototype.addLineString=function(t){var e=Tc.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new np(e,new Il(this._argIndex,Ou.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),tc.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===Ou.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=Tc.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;ac.isCCW(r)&&(i=n,o=e);var a=new np(r,new Il(this._argIndex,Ou.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],Ou.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Il(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new fh},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof nl&&(this._useBoundaryDeterminationRule=!1),e instanceof $c)this.addPolygon(e);else if(e instanceof Yc)this.addLineString(e);else if(e instanceof Jc)this.addPoint(e);else if(e instanceof tl)this.addCollection(e);else if(e instanceof qc)this.addCollection(e);else if(e instanceof nl)this.addCollection(e);else{if(!(e instanceof Vc))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return ku(this._parentGeom,Qc)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new bh(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?Ou.BOUNDARY:Ou.INTERIOR},e}(Gl),Sh=function(){if(this._li=new rc,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Eh(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=hc.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Eh(0,e,r),this._arg[1]=new Eh(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Eh(0,i,a),this._arg[1]=new Eh(1,o,a)}};Sh.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Sh.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Sh.prototype.interfaces_=function(){return[]},Sh.prototype.getClass=function(){return Sh};var Ch=function(){};Ch.prototype.interfaces_=function(){return[]},Ch.prototype.getClass=function(){return Ch},Ch.map=function(){if(arguments[0]instanceof cc&&ku(arguments[1],Ch.MapOp)){for(var t=arguments[0],e=arguments[1],n=new Ec,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(ku(arguments[0],bc)&&ku(arguments[1],Ch.MapOp)){for(var o=arguments[0],a=arguments[1],s=new Ec,u=o.iterator();u.hasNext();){var c=u.next(),l=a.map(c);null!==l&&s.add(l)}return s}},Ch.MapOp=function(){};var Th=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Cp,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Xf,this._resultPolyList=new Ec,this._resultLineList=new Ec,this._resultPointList=new Ec,this._graph=new Gl(new Hf),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Il(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new Ec;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==Ou.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new Ec,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Ec;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Gp.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Hl(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Wp(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Xp(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Cl.RIGHT),i.getLocation(1,Cl.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(tc.isTrue(!r.isNull(i,Cl.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Cl.LEFT,r.getLocation(i,Cl.LEFT)),tc.isTrue(!r.isNull(i,Cl.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Cl.RIGHT,r.getLocation(i,Cl.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Sh);Th.overlayOp=function(t,e,n){return new Th(t,e).getResultGeometry(n)},Th.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Th.createEmptyResult(Th.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Hp.map(t,{interfaces_:function(){return[Ch.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oh.overlayOp(t,e,Th.INTERSECTION)},Th.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Th.createEmptyResult(Th.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oh.overlayOp(t,e,Th.SYMDIFFERENCE)},Th.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Th.INTERSECTION:o=Math.min(r,i);break;case Th.UNION:o=Math.max(r,i);break;case Th.DIFFERENCE:o=r;break;case Th.SYMDIFFERENCE:o=Math.max(r,i)}return o},Th.createEmptyResult=function(t,e,n,r){var i=null;switch(Th.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Th.difference=function(t,e){return t.isEmpty()?Th.createEmptyResult(Th.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oh.overlayOp(t,e,Th.DIFFERENCE))},Th.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Th.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===Ou.BOUNDARY&&(i=Ou.INTERIOR),o===Ou.BOUNDARY&&(o=Ou.INTERIOR),a){case Th.INTERSECTION:return i===Ou.INTERIOR&&o===Ou.INTERIOR;case Th.UNION:return i===Ou.INTERIOR||o===Ou.INTERIOR;case Th.DIFFERENCE:return i===Ou.INTERIOR&&o!==Ou.INTERIOR;case Th.SYMDIFFERENCE:return i===Ou.INTERIOR&&o!==Ou.INTERIOR||i!==Ou.INTERIOR&&o===Ou.INTERIOR}return!1}},Th.INTERSECTION=1,Th.UNION=2,Th.DIFFERENCE=3,Th.SYMDIFFERENCE=4;var Oh=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Cp,this._seg=new vf;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Oh.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Oh.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?Ou.BOUNDARY:this._ptLocator.locate(t,this._g)},Oh.prototype.extractLinework=function(t){var e=new Ah;t.apply(e);var n=e.getLinework(),r=gl.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Oh.prototype.interfaces_=function(){return[]},Oh.prototype.getClass=function(){return Oh};var Ah=function(){this._linework=null,this._linework=new Ec};Ah.prototype.getLinework=function(){return this._linework},Ah.prototype.filter=function(t){if(t instanceof $c){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Ah.prototype.interfaces_=function(){return[Bc]},Ah.prototype.getClass=function(){return Ah};var kh=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};kh.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},kh.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},kh.prototype.getPoints=function(t){for(var e=new Ec,n=Sp.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},kh.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o),s=n*i/a,u=n*o/a,c=(e.x+t.x)/2,l=(e.y+t.y)/2;if(this._doLeft){var f=new Eu(c-u,l+s);r.add(f)}if(this._doRight){var p=new Eu(c+u,l-s);r.add(p)}},kh.prototype.interfaces_=function(){return[]},kh.prototype.getClass=function(){return kh};var Mh=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Ec;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Oh(this._geom[0],this._boundaryDistanceTolerance),new Oh(this._geom[1],this._boundaryDistanceTolerance),new Oh(this._geom[2],this._boundaryDistanceTolerance)]},Ph={TOLERANCE:{configurable:!0}};Mh.prototype.reportResult=function(t,e,n){qu.out.println("Overlay result invalid - A:"+Ou.toLocationSymbol(e[0])+" B:"+Ou.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+Ou.toLocationSymbol(e[2]))},Mh.prototype.isValid=function(t){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var e=this.checkValid(t);return e},Mh.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Mh.hasLocation(this._location,Ou.BOUNDARY)||this.isValidResult(r,this._location)}},Mh.prototype.addTestPts=function(t){var e=new kh(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Mh.prototype.isValidResult=function(t,e){var n=Th.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===Ou.INTERIOR);return r||this.reportResult(t,e,n),r},Mh.prototype.getInvalidLocation=function(){return this._invalidLocation},Mh.prototype.interfaces_=function(){return[]},Mh.prototype.getClass=function(){return Mh},Mh.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Mh.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Kp.computeSizeBasedSnapTolerance(t),Kp.computeSizeBasedSnapTolerance(e))},Mh.isValid=function(t,e,n,r){return new Mh(t,e,r).isValid(n)},Ph.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Mh,Ph);var Ih=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Ih.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Ih.prototype.combine=function(){for(var t=new Ec,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Ih.prototype.interfaces_=function(){return[]},Ih.prototype.getClass=function(){return Ih},Ih.combine=function(){if(1===arguments.length){var t=arguments[0];return new Ih(t).combine()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new Ih(Ih.createList(e,n)).combine()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];return new Ih(Ih.createList(r,i,o)).combine()}},Ih.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Ih.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Ec;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new Ec;return a.add(r),a.add(i),a.add(o),a}};var Lh=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new Ec)},Rh={STRTREE_NODE_CAPACITY:{configurable:!0}};Lh.prototype.reduceToGeometries=function(t){for(var e=new Ec,n=t.iterator();n.hasNext();){var r=n.next(),i=null;ku(r,wc)?i=this.unionTree(r):r instanceof cc&&(i=r),e.add(i)}return e},Lh.prototype.extractByEnvelope=function(t,e,n){for(var r=new Ec,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Lh.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Ih.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Lh.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new af(Lh.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Lh.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Lh.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Lh.getGeometry(e,n),Lh.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,r);return this.unionSafe(a,s)}},Lh.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Lh.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Lh.prototype.unionActual=function(t,e){return Lh.restrictToPolygons(t.union(e))},Lh.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Lh.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new Ec,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),a=this.unionActual(i,o);return r.add(a),Ih.combine(r)},Lh.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Lh.prototype.interfaces_=function(){return[]},Lh.prototype.getClass=function(){return Lh},Lh.restrictToPolygons=function(t){if(ku(t,Qc))return t;var e=Ep.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(gl.toPolygonArray(e))},Lh.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Lh.union=function(t){return new Lh(t).union()},Rh.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Lh,Rh);var Dh=function(){};Dh.prototype.interfaces_=function(){return[]},Dh.prototype.getClass=function(){return Dh},Dh.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Th.createEmptyResult(Th.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oh.overlayOp(t,e,Th.UNION)};var Nh=function(){return new Hi};Hi.prototype={constructor:Hi,reset:function(){this.s=this.t=0},add:function(t){Wi(jh,t,this.t),Wi(this,jh.s,this.s),this.s?this.t+=jh.t:this.s=jh.t},valueOf:function(){return this.s}};var jh=new Hi,Fh=1e-6,zh=Math.PI,Bh=zh/2,Uh=zh/4,Vh=2*zh,qh=180/zh,Gh=zh/180,Hh=Math.abs,Wh=Math.atan,Xh=Math.atan2,Zh=Math.cos,Yh=Math.exp,Kh=Math.log,Jh=Math.sin,Qh=Math.sqrt,$h=Math.tan,td={Feature:function(t,e){Yi(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Yi(n[r].geometry,e)}},ed={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Ki(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Ki(n[r],e,0)},Polygon:function(t,e){Ji(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Ji(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Yi(n[r],e)}},nd=function(t,e){t&&td.hasOwnProperty(t.type)?td[t.type](t,e):Yi(t,e)},rd=(Nh(),Nh(),Nh(),function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n});oo.invert=oo;var id=function(t){function e(e){return e=t(e[0]*Gh,e[1]*Gh),e[0]*=qh,e[1]*=qh,e}return t=ao(t[0]*Gh,t[1]*Gh,t.length>2?t[2]*Gh:0),e.invert=function(e){return e=t.invert(e[0]*Gh,e[1]*Gh),e[0]*=qh,e[1]*=qh,e},e},od=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Zi,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},ad=function(t,e,n,r,i,o){var a,s=t[0],u=t[1],c=0,l=1,f=e[0]-s,p=e[1]-u;if(a=n-s,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<l&&(l=a)}else if(f>0){if(a>l)return;a>c&&(c=a)}if(a=i-s,f||!(a<0)){if(a/=f,f<0){if(a>l)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<l&&(l=a)}if(a=r-u,p||!(a>0)){if(a/=p,p<0){if(a<c)return;a<l&&(l=a)}else if(p>0){if(a>l)return;a>c&&(c=a)}if(a=o-u,p||!(a<0)){if(a/=p,p<0){if(a>l)return;a>c&&(c=a)}else if(p>0){if(a<c)return;a<l&&(l=a)}return c>0&&(t[0]=s+c*f,t[1]=u+c*p),l<1&&(e[0]=s+l*f,e[1]=u+l*p),!0}}}}},sd=function(t,e){return Hh(t[0]-e[0])<Fh&&Hh(t[1]-e[1])<Fh},ud=function(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(sd(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else s.push(n=new fo(r,t,null,!0)),u.push(n.o=new fo(r,null,n,!1)),s.push(n=new fo(a,t,null,!1)),u.push(n.o=new fo(a,null,n,!0))}})),s.length){for(u.sort(e),po(s),po(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var c,l,f=s[0];;){for(var p=f,h=!0;p.v;)if((p=p.n)===f)return;c=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(h)for(o=0,a=c.length;o<a;++o)i.point((l=c[o])[0],l[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(h)for(c=p.p.z,o=c.length-1;o>=0;--o)i.point((l=c[o])[0],l[1]);else r(p.x,p.p.x,-1,i);p=p.p}c=(p=p.o).z,h=!h}while(!p.v);i.lineEnd()}}},cd=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},ld=(function(t){1===t.length&&(t=function(t){return function(e,n){return cd(t(e),n)}}(t))}(cd),function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n}),fd=1e9,pd=-fd,hd=Nh(),dd=(Nh(),function(t){return t}),vd=(Nh(),Nh(),1/0),md=vd,gd=-vd,yd=gd,bd={point:function(t,e){t<vd&&(vd=t),t>gd&&(gd=t),e<md&&(md=e),e>yd&&(yd=e)},lineStart:Zi,lineEnd:Zi,polygonStart:Zi,polygonEnd:Zi,result:function(){var t=[[vd,md],[gd,yd]];return gd=yd=-(md=vd=1/0),t}},_d=(Nh(),function(t,e,n,r){return function(i,o){function a(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function s(t,e){var n=i(t,e);m.point(n[0],n[1])}function u(){x.point=s,m.lineStart()}function c(){x.point=a,m.lineEnd()}function l(t,e){v.push([t,e]);var n=i(t,e);b.point(n[0],n[1])}function f(){b.lineStart(),v=[]}function p(){l(v[0][0],v[0][1]),b.lineEnd();var t,e,n,r,i=b.clean(),a=y.result(),s=a.length;if(v.pop(),h.push(v),v=null,s)if(1&i){if(n=a[0],(e=n.length-1)>0){for(_||(o.polygonStart(),_=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else s>1&&2&i&&a.push(a.pop().concat(a.shift())),d.push(a.filter(vo))}var h,d,v,m=e(o),g=i.invert(r[0],r[1]),y=od(),b=e(y),_=!1,x={point:a,lineStart:u,lineEnd:c,polygonStart:function(){x.point=l,x.lineStart=f,x.lineEnd=p,d=[],h=[]},polygonEnd:function(){x.point=a,x.lineStart=u,x.lineEnd=c,d=ld(d);var t=function(t,e){var n=e[0],r=e[1],i=[Jh(n),-Zh(n),0],o=0,a=0;hd.reset();for(var s=0,u=t.length;s<u;++s)if(l=(c=t[s]).length)for(var c,l,f=c[l-1],p=f[0],h=f[1]/2+Uh,d=Jh(h),v=Zh(h),m=0;m<l;++m,p=y,d=_,v=x,f=g){var g=c[m],y=g[0],b=g[1]/2+Uh,_=Jh(b),x=Zh(b),w=y-p,E=w>=0?1:-1,S=E*w,C=S>zh,T=d*_;if(hd.add(Xh(T*E*Jh(S),v*x+T*Zh(S))),o+=C?w+E*Vh:w,C^p>=n^y>=n){var O=eo($i(f),$i(g));io(O);var A=eo(i,O);io(A);var k=(C^w>=0?-1:1)*Xi(A[2]);(r>k||r===k&&(O[0]||O[1]))&&(a+=C^w>=0?1:-1)}}return(o<-Fh||o<Fh&&hd<-Fh)^1&a}(h,g);d.length?(_||(o.polygonStart(),_=!0),ud(d,mo,t,n,o)):t&&(_||(o.polygonStart(),_=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),_&&(o.polygonEnd(),_=!1),d=h=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return x}}),xd=_d((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?zh:-zh,u=Hh(o-n);Hh(u-zh)<Fh?(t.point(n,r=(r+a)/2>0?Bh:-Bh),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=zh&&(Hh(n-i)<Fh&&(n-=i*Fh),Hh(o-s)<Fh&&(o-=s*Fh),r=function(t,e,n,r){var i,o,a=Jh(t-n);return Hh(a)>Fh?Wh((Jh(e)*(o=Zh(r))*Jh(n)-Jh(r)*(i=Zh(e))*Jh(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*Bh,r.point(-zh,i),r.point(0,i),r.point(zh,i),r.point(zh,0),r.point(zh,-i),r.point(0,-i),r.point(-zh,-i),r.point(-zh,0),r.point(-zh,i);else if(Hh(t[0]-e[0])>Fh){var o=t[0]<e[0]?zh:-zh;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-zh,-Bh]),wd=function(t,e){function n(t,e){return Zh(t)*Zh(e)>o}function r(t,e,n){var r=[1,0,0],i=eo($i(t),$i(e)),a=to(i,i),s=i[0],u=a-s*s;if(!u)return!n&&t;var c=o*a/u,l=-o*s/u,f=eo(r,i),p=ro(r,c);no(p,ro(i,l));var h=f,d=to(p,h),v=to(h,h),m=d*d-v*(to(p,p)-1);if(!(m<0)){var g=Qh(m),y=ro(h,(-d-g)/v);if(no(y,p),y=Qi(y),!n)return y;var b,_=t[0],x=e[0],w=t[1],E=e[1];x<_&&(b=_,_=x,x=b);var S=x-_,C=Hh(S-zh)<Fh;if(!C&&E<w&&(b=w,w=E,E=b),C||S<Fh?C?w+E>0^y[1]<(Hh(y[0]-_)<Fh?w:E):w<=y[1]&&y[1]<=E:S>zh^(_<=y[0]&&y[0]<=x)){var T=ro(h,(-d+g)/v);return no(T,p),[y,Qi(T)]}}}function i(e,n){var r=a?t:zh-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var o=Zh(t),a=o>0,s=Hh(o)>Fh;return _d(n,(function(t){var e,o,u,c,l;return{lineStart:function(){c=u=!1,l=1},point:function(f,p){var h,d=[f,p],v=n(f,p),m=a?v?0:i(f,p):v?i(f+(f<0?zh:-zh),p):0;if(!e&&(c=u=v)&&t.lineStart(),v!==u&&(!(h=r(e,d))||sd(e,h)||sd(d,h))&&(d[0]+=Fh,d[1]+=Fh,v=n(d[0],d[1])),v!==u)l=0,v?(t.lineStart(),h=r(d,e),t.point(h[0],h[1])):(h=r(e,d),t.point(h[0],h[1]),t.lineEnd()),e=h;else if(s&&e&&a^v){var g;m&o||!(g=r(d,e,!0))||(l=0,a?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1])))}!v||e&&sd(e,d)||t.point(d[0],d[1]),e=d,u=v,o=m},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return l|(c&&u)<<1}}}),(function(n,r,i,o){!function(t,e,n,r,i,o){if(n){var a=Zh(e),s=Jh(e),u=r*n;null==i?(i=e+r*Vh,o=e-u/2):(i=lo(a,i),o=lo(a,o),(r>0?i<o:i>o)&&(i+=r*Vh));for(var c,l=i;r>0?l>o:l<o;l-=u)c=Qi([a,-s*Zh(l),-s*Jh(l)]),t.point(c[0],c[1])}}(o,t,e,i,n,r)}),a?[0,-t]:[-zh,t-zh])};yo.prototype={constructor:yo,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Ed=16,Sd=Zh(30*Gh),Cd=function(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,c,l,f,p,h,d,v,m){var g=c-r,y=l-i,b=g*g+y*y;if(b>4*e&&v--){var _=a+p,x=s+h,w=u+d,E=Qh(_*_+x*x+w*w),S=Xi(w/=E),C=Hh(Hh(w)-1)<Fh||Hh(o-f)<Fh?(o+f)/2:Xh(x,_),T=t(C,S),O=T[0],A=T[1],k=O-r,M=A-i,P=y*k-g*M;(P*P/b>e||Hh((g*k+y*M)/b-.5)>.3||a*p+s*h+u*d<Sd)&&(n(r,i,o,a,s,u,O,A,C,_/=E,x/=E,w,v,m),m.point(O,A),n(O,A,C,_,x,w,c,l,f,p,h,d,v,m))}}return function(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function i(){g=NaN,w.point=o,e.lineStart()}function o(r,i){var o=$i([r,i]),a=t(r,i);n(g,y,m,b,_,x,g=a[0],y=a[1],m=r,b=o[0],_=o[1],x=o[2],Ed,e),e.point(g,y)}function a(){w.point=r,e.lineEnd()}function s(){i(),w.point=u,w.lineEnd=c}function u(t,e){o(l=t,e),f=g,p=y,h=b,d=_,v=x,w.point=o}function c(){n(g,y,m,b,_,x,f,p,l,h,d,v,Ed,e),w.lineEnd=a,a()}var l,f,p,h,d,v,m,g,y,b,_,x,w={point:r,lineStart:i,lineEnd:a,polygonStart:function(){e.polygonStart(),w.lineStart=s},polygonEnd:function(){e.polygonEnd(),w.lineStart=i}};return w}}(t,e):function(t){return go({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)},Td=go({point:function(t,e){this.stream.point(t*Gh,e*Gh)}});xo.invert=function(t,e){return[t,2*Wh(Yh(e))-Bh]},wo.invert=function(t,e){return[-e,2*Wh(Yh(t))-Bh]};var Od=function(){var t=function(t){function e(){var e=zh*s(),a=o(id(o.rotate()).invert([0,0]));return c(null==l?[[a[0]-e,a[1]-e],[a[0]+e,a[1]+e]]:t===xo?[[Math.max(a[0]-e,l),n],[Math.min(a[0]+e,r),i]]:[[l,Math.max(a[1]-e,n)],[r,Math.min(a[1]+e,i)]])}var n,r,i,o=_o(t),a=o.center,s=o.scale,u=o.translate,c=o.clipExtent,l=null;return o.scale=function(t){return arguments.length?(s(t),e()):s()},o.translate=function(t){return arguments.length?(u(t),e()):u()},o.center=function(t){return arguments.length?(a(t),e()):a()},o.clipExtent=function(t){return arguments.length?(null==t?l=n=r=i=null:(l=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),e()):null==l?null:[[l,n],[r,i]]},e()}(wo),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)};t.projection=Ta,t.random=du,t.clusters=vu,t.helpers=Bo,t.invariant=Vo,t.meta=Uo,t.isolines=function(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(Z(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!S(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var a=rt(t,{zProperty:r,flip:!0});return c(function(t,e,n){var r=V(n),i=r[2]-r[0],o=r[3]-r[1],a=r[0],s=r[1],u=e[0].length-1,c=e.length-1,l=i/u,f=o/c,p=function(t){t[0]=t[0]*l+a,t[1]=t[1]*f+s};return t.forEach((function(t){O(t,p)})),t}(function(t,e,n,r,i){for(var o=[],a=1;a<e.length;a++){var s=+e[a],u=Object.assign({},r,i[a]);u[n]=s;var c=l(Q(t,s),u);o.push(c)}return o}(a,e,r,i,o),a,t))},t.convex=kt,t.pointsWithinPolygon=It,t.concave=function(t,n){if(n=n||{},!S(n))throw new Error("options is invalid");if(!t)throw new Error("points is required");var r=n.maxEdge||1/0;if(!E(r))throw new Error("maxEdge is invalid");var i=Lt(function(t){var e=[],n={};return P(t,(function(t){if(t.geometry){var r=t.geometry.coordinates.join("-");n.hasOwnProperty(r)||(e.push(t),n[r]=!0)}})),c(e)}(t));if(i.features=i.features.filter((function(t){var e=t.geometry.coordinates[0][0],i=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],a=jt(e,i,n),s=jt(i,o,n),u=jt(e,o,n);return a<=r&&s<=r&&u<=r})),i.features.length<1)return null;var o=$t(i,n);return 1===o.coordinates.length&&(o.coordinates=o.coordinates[0],o.type="Polygon"),e(o)},t.collect=function(t,e,n,r){var i=Wo(6),o=e.features.map((function(t){return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:t.properties[n]}}));return i.load(o),t.features.forEach((function(t){t.properties||(t.properties={});var e=V(t),n=[];i.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}).forEach((function(e){Mt([e.minX,e.minY],t)&&n.push(e.property)})),t.properties[r]=n})),t},t.flip=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=Ft(t)),O(t,(function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e})),t},t.simplify=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,r=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==i&&(t=Ft(t)),R(t,(function(t){!function(t,e,n){var r=t.type;if("Point"===r||"MultiPoint"===r)return t;te(t,!0);var i=t.coordinates;switch(r){case"LineString":t.coordinates=ae(i,e,n);break;case"MultiLineString":t.coordinates=i.map((function(t){return ae(t,e,n)}));break;case"Polygon":t.coordinates=se(i,e,n);break;case"MultiPolygon":t.coordinates=i.map((function(t){return se(t,e,n)}))}}(t,n,r)})),t},t.bezierSpline=ue,t.tag=function(t,e,n,r){return t=Ft(t),e=Ft(e),P(t,(function(t){t.properties||(t.properties={}),P(e,(function(e){void 0===t.properties[r]&&Mt(t,e)&&(t.properties[r]=e.properties[n])}))})),t},t.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null===e||void 0===e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return c(function(t,e){for(var n,r,i=t.slice(0),o=t.length,a=o-e;o-- >a;)r=Math.floor((o+1)*Math.random()),n=i[r],i[r]=i[o],i[o]=n;return i.slice(a)}(t.features,e))},t.envelope=le,t.square=fe,t.circle=he,t.midpoint=function(t,e){return pe(t,jt(t,e)/2,de(t,e))},t.center=ve,t.centerOfMass=ge,t.centroid=me,t.combine=function(t){function n(t,e,n){n?r[e].coordinates=r[e].coordinates.concat(t.geometry.coordinates):r[e].coordinates.push(t.geometry.coordinates),r[e].properties.push(t.properties)}var r={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},i=Object.keys(r).reduce((function(t,e){return t[e.replace("Multi","")]=e,t}),{});return P(t,(function(t){t.geometry&&(r[t.geometry.type]?n(t,t.geometry.type,!0):i[t.geometry.type]&&n(t,i[t.geometry.type],!1))})),c(Object.keys(r).filter((function(t){return r[t].coordinates.length})).sort().map((function(t){return e({type:t,coordinates:r[t].coordinates},{collectedProperties:r[t].properties})})))},t.distance=jt,t.explode=ye,t.bbox=V,t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=De(t.geometry.coordinates):t.geometry.coordinates.forEach((function(t){e.features=e.features.concat(De(t))})),e},t.bboxPolygon=ce,t.booleanPointInPolygon=Mt,t.nearestPoint=Ne,t.nearestPointOnLine=on,t.nearestPointToLine=function(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.units,i=n.properties||{};if(!t)throw new Error("points is required");if(!(t=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return R(t,(function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})})),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter((function(t){return"Point"===t.geometry.type})),t;default:throw new Error("points must be a Point Collection")}}(t)).features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==J(e))throw new Error("line must be a LineString");var o=1/0,a=null;return P(t,(function(t){var n=dn(t,e,{units:r});n<o&&(o=n,a=t)})),a&&(a.properties=Object.assign({dist:o},a.properties,i)),a},t.planepoint=function(t,e){var n=q(t),r=Y(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=e.properties||{},o=i.a,a=i.b,s=i.c,u=n[0],c=n[1],l=r[0][0],f=r[0][1],p=void 0!==o?o:r[0][2],h=r[1][0],d=r[1][1],v=void 0!==a?a:r[1][2],m=r[2][0],g=r[2][1],y=void 0!==s?s:r[2][2];return(y*(u-l)*(c-d)+p*(u-h)*(c-g)+v*(u-m)*(c-f)-v*(u-l)*(c-g)-y*(u-h)*(c-f)-p*(u-m)*(c-d))/((u-l)*(c-d)+(u-h)*(c-g)+(u-m)*(c-f)-(u-l)*(c-g)-(u-h)*(c-f)-(u-m)*(c-d))},t.tin=Lt,t.bearing=de,t.destination=pe,t.kinks=function(t){var e,n,i={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach((function(t){e.forEach((function(e){for(var n=0;n<t.length-1;n++)for(var o=n;o<e.length-1;o++){if(t===e){if(1===Math.abs(n-o))continue;if(0===n&&o===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var a=function(t,e,n,r,i,o,a,s){var u,c,l,f,p,h={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(u=(s-o)*(n-t)-(a-i)*(r-e))?null!==h.x&&null!==h.y&&h:(c=e-o,l=t-i,f=(a-i)*c-(s-o)*l,p=(n-t)*c-(r-e)*l,c=f/u,l=p/u,h.x=t+c*(n-t),h.y=e+c*(r-e),c>=0&&c<=1&&(h.onLine1=!0),l>=0&&l<=1&&(h.onLine2=!0),!(!h.onLine1||!h.onLine2)&&[h.x,h.y])}(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[o][0],e[o][1],e[o+1][0],e[o+1][1]);a&&i.features.push(r([a[0],a[1]]))}}))})),i},t.pointOnFeature=mn,t.area=yn,t.along=function(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i;if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}if(!E(e))throw new Error("distance must be a number");for(var o=0,a=0;a<i.length&&!(e>=o&&a===i.length-1);a++){if(o>=e){var s=e-o;if(s){var u=de(i[a],i[a-1])-180;return pe(i[a],s,u,n)}return r(i[a])}o+=jt(i[a],i[a+1],n)}return r(i[i.length-1])},t.length=En,t.lineSlice=function(t,e,n){var r=G(n);if("LineString"!==J(n))throw new Error("line must be a LineString");for(var i,o=on(n,t),a=on(n,e),u=[(i=o.properties.index<=a.properties.index?[o,a]:[a,o])[0].geometry.coordinates],c=i[0].properties.index+1;c<i[1].properties.index+1;c++)u.push(r[c]);return u.push(i[1].geometry.coordinates),s(u,n.properties)},t.lineSliceAlong=Sn,t.pointGrid=kn,t.truncate=Mn,t.flatten=function(t){if(!t)throw new Error("geojson is required");var e=[];return N(t,(function(t){e.push(t)})),c(e)},t.lineIntersect=nn,t.lineChunk=function(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return N(t,(function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,r){var i=En(t,{units:n});if(i<=e)return r(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var a=0;a<o;a++){var s=Sn(t,e*a,e*(a+1),{units:n});r(s,a)}}(t,e,r,(function(t){o.push(t)}))})),c(o)},t.unkinkPolygon=function(t){var e=[];return N(t,(function(t){"Polygon"===t.geometry.type&&P(ka(t),(function(n){e.push(o(n.geometry.coordinates,t.properties))}))})),c(e)},t.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;return t=q(t),e=q(e),r=r||{},i=i||100,o=o||10,new ja({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(i,{offset:o}).json()},t.lineSegment=en,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=J(t),r=J(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=Mn(e,{precision:7});switch(r){case"Point":return Dn(t,i);case"MultiPoint":return Rn(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Rn(t,nn(t,i))}},t.lineArc=Fn,t.polygonToLine=Bn,t.lineToPolygon=Vn,t.bboxClip=function(t,e){var n=function(t){return t.geometry?t.geometry.type:t.type}(t),r=G(t),i=t.properties;switch(n){case"LineString":case"MultiLineString":var a=[];return"LineString"===n&&(r=[r]),r.forEach((function(t){Fa(t,e,a)})),1===a.length?s(a[0],i):l(a,i);case"Polygon":return o(Zn(r,e),i);case"MultiPolygon":return p(r.map((function(t){return Zn(t,e)})),i);default:throw new Error("geometry "+n+" not supported")}},t.lineOverlap=$n,t.sector=function(t,e,n,r,i){if(i=i||{},!S(i))throw new Error("options is invalid");if(!t)throw new Error("center is required");if(void 0===n||null===n)throw new Error("bearing1 is required");if(void 0===r||null===r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(er(n)===er(r))return he(t,e,i);var a=G(t),s=[[a]];return O(Fn(t,e,n,r,i),(function(t){s[0].push(t)})),s[0].push(a),o(s)},t.rhumbBearing=an,t.rhumbDistance=un,t.rhumbDestination=nr,t.polygonTangents=function(t,e){var n,i,o,a=G(t),s=G(e);switch(J(e)){case"Polygon":n=s[0][0],i=s[0][0],o=ir(s[0][0],s[0][s[0].length-1],a);var u=rr(s[0],a,o,void 0,n,i);n=u[0],i=u[1];break;case"MultiPolygon":n=s[0][0][0],i=s[0][0][0],o=ir(s[0][0][0],s[0][0][s[0][0].length-1],a),s.forEach((function(t){var e=rr(t[0],a,o,void 0,n,i);n=e[0],i=e[1]}))}return c([r(n),r(i)])},t.rewind=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=Ft(t));var i=[];switch(t.type){case"GeometryCollection":return R(t,(function(t){ar(t,n)})),t;case"FeatureCollection":return P(t,(function(t){P(ar(t,n),(function(t){i.push(t)}))})),c(i)}return ar(t,n)},t.isobands=function(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},a=n.breaksProperties||[];if(Z(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!S(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(a))throw new Error("breaksProperties is not an Array");var s=cr(t,{zProperty:r,flip:!0}),u=function(t,e,n){for(var r=[],i=1;i<e.length;i++){var a=+e[i-1],s=+e[i],u=lr(t,a,s-a),c=function(t){var e=[],n=[];t.forEach((function(t){var r=yn(o([t]));n.push(r),e.push({ring:t,area:r})})),n.sort((function(t,e){return e-t}));var r=[];return n.forEach((function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){r.push(e[n].ring),e.splice(n,1);break}})),r}(u),l=function(t){for(var e=t.map((function(t){return{lrCoordinates:t,grouped:!1}})),n=[];!function(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var i=[];i.push(e[r].lrCoordinates),e[r].grouped=!0;for(var a=o([e[r].lrCoordinates]),s=r+1;s<e.length;s++)if(!e[s].grouped){var u=o([e[s].lrCoordinates]);(function(t,e){for(var n=ye(t),r=0;r<n.features.length;r++)if(!Mt(n.features[r],e))return!1;return!0})(u,a)&&(i.push(e[s].lrCoordinates),e[s].grouped=!0)}n.push(i)}return n}(c),f={};f.groupedRings=l,f[n]=a+"-"+s,r.push(f)}return r}(s,e,r);return c((u=function(t,e,n){var r=V(n),i=r[2]-r[0],o=r[3]-r[1],a=r[0],s=r[1],u=e[0].length-1,c=e.length-1,l=i/u,f=o/c,p=function(t){t[0]=t[0]*l+a,t[1]=t[1]*f+s};return t.forEach((function(t){t.groupedRings.forEach((function(t){t.forEach((function(t){t.forEach(p)}))}))})),t}(u,s,t)).map((function(t,e){if(a[e]&&!S(a[e]))throw new Error("Each mappedProperty is required to be an Object");var n=Object.assign({},i,a[e]);return n[r]=t[r],p(t.groupedRings,n)})))},t.transformRotate=hr,t.transformScale=dr,t.transformTranslate=function(t,e,n,r){if(r=r||{},!S(r))throw new Error("options is invalid");var i=r.units,o=r.zTranslation,a=r.mutate;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(void 0===n||null===n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n=-n),!1!==a&&void 0!==a||(t=Ft(t)),O(t,(function(t){var r=G(nr(t,e,n,{units:i}));t[0]=r[0],t[1]=r[1],o&&3===t.length&&(t[2]+=o)})),t},t.lineOffset=function(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("distance is required");var i=J(t),o=t.properties;switch(i){case"LineString":return br(t,e,r);case"MultiLineString":var a=[];return N(t,(function(t){a.push(br(t,e,r).geometry.coordinates)})),l(a,o);default:throw new Error("geometry "+i+" is not supported")}},t.polygonize=function(t){var e=js.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter((function(t){return t.isValid()})).forEach((function(t){t.isHole()?n.push(t):r.push(t)})),n.forEach((function(t){Ds.findEdgeRingContaining(t,r)&&r.push(t)})),c(r.map((function(t){return t.toPolygon()})))},t.booleanDisjoint=function(t,e){var n;return N(t,(function(t){N(e,(function(e){if(!1===n)return!1;n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t.coordinates,e.coordinates);case"LineString":return!wr(e,t);case"Polygon":return!Mt(t,e)}break;case"LineString":switch(e.type){case"Point":return!wr(t,e);case"LineString":return!function(t,e){return nn(t,e).features.length>0}(t,e);case"Polygon":return!Er(e,t)}break;case"Polygon":switch(e.type){case"Point":return!Mt(e,t);case"LineString":return!Er(t,e);case"Polygon":return!function(t,e){for(var n=0;n<t.coordinates[0].length;n++)if(Mt(t.coordinates[0][n],e))return!0;for(var r=0;r<e.coordinates[0].length;r++)if(Mt(e.coordinates[0][r],t))return!0;return!1}(e,t)}}}(t.geometry,e.geometry)}))})),n},t.booleanContains=function(t,e){var n=J(t),r=J(e),i=Y(t),o=Y(e),a=G(t),s=G(e);switch(n){case"Point":switch(r){case"Point":return Cr(a,s);default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"Point":return function(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(Cr(t.coordinates[n],e.coordinates)){r=!0;break}return r}(i,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++){for(var r=!1,i=0;i<t.coordinates.length;i++)if(Cr(e.coordinates[n],t.coordinates[i])){r=!0;break}if(!r)return!1}return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"Point":return Cn(o,i,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(Cn({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!0})&&(n=!0),!Cn({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!1}))return!1;return n}(i,o);case"MultiPoint":return function(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(Cn(e.coordinates[r],t,{ignoreEndVertices:!0})&&(n=!0),!Cn(e.coordinates[r],t))return!1;return!!n}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Point":return Mt(o,i,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,r=0,i=V(t),o=V(e);if(!Sr(i,o))return!1;for(;r<e.coordinates.length-1;r++){var a=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(e.coordinates[r],e.coordinates[r+1]);if(Mt({type:"Point",coordinates:a},t,{ignoreBoundary:!0})){n=!0;break}}return n}(i,o);case"Polygon":return function(t,e){var n=V(t),r=V(e);if(!Sr(n,r))return!1;for(var i=0;i<e.coordinates[0].length;i++)if(!Mt(e.coordinates[0][i],t))return!1;return!0}(i,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++)if(!Mt(e.coordinates[n],t,{ignoreBoundary:!0}))return!1;return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanCrosses=function(t,e){var n=J(t),r=J(e),i=Y(t),o=Y(e);switch(n){case"MultiPoint":switch(r){case"LineString":return Tr(i,o);case"Polygon":return Ar(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"MultiPoint":return Tr(o,i);case"LineString":return function(t,e){if(nn(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var r=0;r<e.coordinates.length-1;r++){var i=!0;if(0!==r&&r!==e.coordinates.length-2||(i=!1),kr(t.coordinates[n],t.coordinates[n+1],e.coordinates[r],i))return!0}return!1}(i,o);case"Polygon":return Or(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"MultiPoint":return Ar(o,i);case"LineString":return Or(o,i);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanClockwise=or,t.booleanOverlap=Lr,t.booleanPointOnLine=Cn,t.booleanEqual=function(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");return J(t)===J(e)&&new Vs({precision:6}).compare(te(t),te(e))},t.booleanWithin=Tn,t.clone=Ft,t.cleanCoords=te,t.clustersDbscan=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.minPoints,i=n.units;if(Z(t,"Point","Input must contain Points"),null===e||void 0===e)throw new Error("maxDistance is required");if(!(Math.sign(e)>0))throw new Error("Invalid maxDistance");if(!(void 0===r||null===r||Math.sign(r)>0))throw new Error("Invalid minPoints");t=Ft(t),r=r||3;var o=new Xs.DBSCAN,a=-1;return o.run(L(t),x(e,i),r,jt).forEach((function(e){a++,e.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=a,n.properties.dbscan="core"}))})),o.noise.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster?n.properties.dbscan="edge":n.properties.dbscan="noise"})),t},t.clustersKmeans=function(t,e){if("object"!=typeof(e=e||{}))throw new Error("options is invalid");var n=e.numberOfClusters,r=e.mutate;Z(t,"Point","Input must contain Points");var i=t.features.length;(n=n||Math.round(Math.sqrt(i/2)))>i&&(n=i),!1!==r&&void 0!==r||(t=Ft(t));var o=L(t),a=o.slice(0,n),s=eu(o,n,a),u={};return s.centroids.forEach((function(t,e){u[e]=t})),P(t,(function(t,e){var n=s.idxs[e];t.properties.cluster=n,t.properties.centroid=u[n]})),t},t.pointToLineDistance=dn,t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==Dr(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==Dr(e,"line2"))throw new Error("line2 must be a LineString");for(var n=en(te(t)).features,r=en(te(e)).features,i=0;i<n.length;i++){var o=n[i].geometry.coordinates;if(!r[i])break;if(!function(t,e){var n=y(an(t[0],t[1])),r=y(an(e[0],e[1]));return n===r}(o,r[i].geometry.coordinates))return!1}return!0},t.shortestPath=function(t,n,i){if(i=i||{},!S(i))throw new Error("options is invalid");var o=i.resolution,a=i.minDistance,u=i.obstacles||c([]);if(!t)throw new Error("start is required");if(!n)throw new Error("end is required");if(o&&!E(o)||o<=0)throw new Error("options.resolution must be a number, greater than 0");if(a)throw new Error("options.minDistance is not yet implemented");var l=q(t),f=q(n);switch(t=r(l),n=r(f),J(u)){case"FeatureCollection":if(0===u.features.length)return s([l,f]);break;case"Polygon":u=c([e(Y(u))]);break;default:throw new Error("invalid obstacles")}var p=u;p.features.push(t),p.features.push(n);var h=V(dr(ce(V(p)),1.15));o||(o=jt([h[0],h[1]],[h[2],h[1]],i)/100),p.features.pop(),p.features.pop();for(var d=h[0],v=h[1],m=h[2],g=h[3],y=o/jt([d,v],[m,v],i)*(m-d),b=o/jt([d,v],[d,g],i)*(g-v),_=m-d,x=g-v,w=(_-Math.floor(_/y)*y)/2,C=[],T=[],O=[],A=[],k=1/0,M=1/0,P=g-(x-Math.floor(x/b)*b)/2,I=0;P>=v;){for(var L=[],R=[],D=d+w,N=0;D<=m;){var j=r([D,P]),F=function(t,e){for(var n=0;n<e.features.length;n++)if(Mt(t,e.features[n]))return!0;return!1}(j,u);L.push(F?0:1),R.push(D+"|"+P);var z=jt(j,t);!F&&z<k&&(k=z,O={x:N,y:I});var B=jt(j,n);!F&&B<M&&(M=B,A={x:N,y:I}),D+=y,N++}T.push(L),C.push(R),P-=b,I++}var U=new jr(T,{diagonal:!0}),G=U.grid[O.y][O.x],H=U.grid[A.y][A.x],W=[l];return nu.search(U,G,H).forEach((function(t){var e=C[t.x][t.y].split("|");W.push([+e[0],+e[1]])})),W.push(f),te(s(W))},t.voronoi=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return Z(t,"Point","points"),c(hu().x((function(t){return t.geometry.coordinates[0]})).y((function(t){return t.geometry.coordinates[1]})).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(fi))},t.ellipse=pi,t.centerMean=di,t.centerMedian=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.counter||10;if(!E(n))throw new Error("counter must be a number");var r=e.weight,i=di(t,{weight:e.weight}),o=c([]);return P(t,(function(t){o.features.push(me(t,{weight:t.properties[r]}))})),o.properties={tolerance:e.tolerance,medianCandidates:[]},vi(i.geometry.coordinates,[0,0],o,n)},t.standardDeviationalEllipse=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.steps||64,r=e.weight,i=e.properties||{};if(!E(n))throw new Error("steps must be a number");if(!S(i))throw new Error("properties must be a number");var o=L(t).length,a=di(t,{weight:r}),s=0,u=0,l=0;P(t,(function(t){var e=t.properties[r]||1,n=mi(G(t),G(a));s+=Math.pow(n.x,2)*e,u+=Math.pow(n.y,2)*e,l+=n.x*n.y*e}));var f=s-u,p=Math.sqrt(Math.pow(f,2)+4*Math.pow(l,2)),h=2*l,d=Math.atan((f+p)/h),v=180*d/Math.PI,m=0,g=0,y=0;P(t,(function(t){var e=t.properties[r]||1,n=mi(G(t),G(a));m+=Math.pow(n.x*Math.cos(d)-n.y*Math.sin(d),2)*e,g+=Math.pow(n.x*Math.sin(d)+n.y*Math.cos(d),2)*e,y+=e}));var b=Math.sqrt(2*m/y),_=Math.sqrt(2*g/y),x=pi(a,b,_,{units:"degrees",angle:v,steps:n,properties:i}),w=It(t,c([x])),C={meanCenterCoordinates:G(a),semiMajorAxis:b,semiMinorAxis:_,numberOfFeatures:o,angle:v,percentageWithinEllipse:100*L(w).length/o};return x.properties.standardDeviationalEllipse=C,x},t.difference=function(t,n){var r=Y(t),i=Y(n),o=t.properties||{};if(r=Gi(r),i=Gi(i),!r)return null;if(!i)return e(r,o);var a=new El,s=a.read(r),u=a.read(i),c=Th.difference(s,u);return c.isEmpty()?null:e((new Sl).write(c),o)},t.buffer=function(t,e,n){var r=(n=n||{}).units,i=n.steps||64;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");i=i||64,r=r||"kilometers";var o=[];switch(t.type){case"GeometryCollection":return R(t,(function(t){var n=Eo(t,e,r,i);n&&o.push(n)})),c(o);case"FeatureCollection":return P(t,(function(t){var n=Eo(t,e,r,i);n&&P(n,(function(t){t&&o.push(t)}))})),c(o)}return Eo(t,e,r,i)},t.union=Ao,t.intersect=ko,t.dissolve=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.propertyName;Z(t,"Polygon","dissolve");var r=Ft(t),i=r.features,o=[];i.forEach((function(t,e){t.properties.origIndexPosition=e}));var a=Qe();for(var u in a.load(r),i){var c=i[u],l=!1;if(a.search(c).features.forEach((function(t){c=i[u];var e=t.properties.origIndexPosition;if(o.length>0&&0!==e)if(e>o[o.length-1])e-=o.length;else{var r=Mo(e,o);0!==r&&(e-=r)}if(e!==+u){var f=i[e];f&&c&&(void 0!==n&&f.properties[n]!==c.properties[n]||Lr(c,f)&&function(t,e){var n=s(L(t)),r=s(L(e));return nn(n,r).features.length>0}(c,f)&&(i[u]=Ao(c,f),o.push(t.properties.origIndexPosition),o.sort((function(t,e){return t-e})),a.remove(t),i.splice(e,1),c.properties.origIndexPosition=u,a.remove(c,(function(t,e){return t.properties.origIndexPosition===e.properties.origIndexPosition})),l=!0))}})),l){if(!c)continue;c.properties.origIndexPosition=u,a.insert(c),u--}}return i.forEach((function(t){delete t.properties.origIndexPosition,delete t.bbox})),r},t.hexGrid=Po,t.mask=function(t,e){var n=function(t){return o(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}(e),r=function(t){var e=[],n=[];return N(t,(function(t){var r=t.geometry.coordinates,i=r[0],a=r.slice(1);e.push(o([i])),a.forEach((function(t){n.push(o([t]))}))})),[c(e),c(n)]}(t),i=r[0],a=r[1];return function(t,e,n){var r=[];return r.push(t.geometry.coordinates[0]),N(e,(function(t){r.push(t.geometry.coordinates[0])})),N(n,(function(t){r.push(t.geometry.coordinates[0])})),o(r)}(n,i=Io(i),a=Io(a))},t.squareGrid=Ro,t.triangleGrid=Do,t.interpolate=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.gridType,i=n.property,o=n.weight;if(!t)throw new Error("points is required");if(Z(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");i=i||"elevation",r=r||"square",o=o||1;var a,s=V(t);switch(r){case"point":case"points":a=kn(s,e,n);break;case"square":case"squares":a=Ro(s,e,n);break;case"hex":case"hexes":a=Po(s,e,n);break;case"triangle":case"triangles":a=Do(s,e,n);break;default:throw new Error("invalid gridType")}var u=[];return P(a,(function(e){var a=0,s=0;P(t,(function(t){var u,c=jt("point"===r?e:me(e),t,n);if(void 0!==i&&(u=t.properties[i]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===c&&(a=u);var l=1/Math.pow(c,o);s+=l,a+=l*u}));var c=Ft(e);c.properties[i]=a/s,u.push(c)})),c(u)},t.pointOnSurface=mn,t.polygonToLineString=Bn,t.lineStringToPolygon=Vn,t.inside=Mt,t.within=It,t.bezier=ue,t.nearest=Ne,t.pointOnLine=on,t.lineDistance=En,t.radians2degrees=b,t.degrees2radians=_,t.distanceToDegrees=g,t.distanceToRadians=m,t.radiansToDistance=v,t.bearingToAngle=y,t.convertDistance=x,t.toMercator=cn,t.toWgs84=ln,t.randomPosition=gi,t.randomPoint=yi,t.randomPolygon=bi,t.randomLineString=_i,t.getCluster=wi,t.clusterEach=Ei,t.clusterReduce=Si,t.createBins=Ci,t.applyFilter=Ti,t.propertiesContainsFilter=Oi,t.filterProperties=Ai,t.earthRadius=No,t.factors=jo,t.unitsFactors=Fo,t.areaFactors=zo,t.feature=e,t.geometry=n,t.point=r,t.points=i,t.polygon=o,t.polygons=a,t.lineString=s,t.lineStrings=u,t.featureCollection=c,t.multiLineString=l,t.multiPoint=f,t.multiPolygon=p,t.geometryCollection=h,t.round=d,t.radiansToLength=v,t.lengthToRadians=m,t.lengthToDegrees=g,t.bearingToAzimuth=y,t.radiansToDegrees=b,t.degreesToRadians=_,t.convertLength=x,t.convertArea=w,t.isNumber=E,t.isObject=S,t.validateBBox=C,t.validateId=T,t.getCoord=q,t.getCoords=G,t.containsNumber=H,t.geojsonType=W,t.featureOf=X,t.collectionOf=Z,t.getGeom=Y,t.getGeomType=K,t.getType=J,t.coordEach=O,t.coordReduce=A,t.propEach=k,t.propReduce=M,t.featureEach=P,t.featureReduce=I,t.coordAll=L,t.geomEach=R,t.geomReduce=D,t.flattenEach=N,t.flattenReduce=j,t.segmentEach=F,t.segmentReduce=z,t.lineEach=B,t.lineReduce=U,Object.defineProperty(t,"__esModule",{value:!0})}))},Xk3x:function(t,e,n){var r=n("HIsA"),i=n("5AZ8");r({target:"WeakMap",stat:!0},{from:i})},Xoou:function(t,e,n){var r=n("3Jv6"),i=n("mjh8"),o=n("2Swa"),a="[object Arguments]",s="[object Array]",u="[object Boolean]",c="[object Date]",l="[object Error]",f="[object Function]",p="[object Map]",h="[object Number]",d="[object Object]",v="[object RegExp]",m="[object Set]",g="[object String]",y="[object WeakMap]",b="[object ArrayBuffer]",_="[object DataView]",x="[object Float32Array]",w="[object Float64Array]",E="[object Int8Array]",S="[object Int16Array]",C="[object Int32Array]",T="[object Uint8Array]",O="[object Uint8ClampedArray]",A="[object Uint16Array]",k="[object Uint32Array]",M={};function P(t){return o(t)&&i(t.length)&&!!M[r(t)]}M[x]=M[w]=M[E]=M[S]=M[C]=M[T]=M[O]=M[A]=M[k]=!0,M[a]=M[s]=M[b]=M[u]=M[_]=M[c]=M[l]=M[f]=M[p]=M[h]=M[d]=M[v]=M[m]=M[g]=M[y]=!1,t.exports=P},Xp9m:function(t,e,n){"use strict";var r=n("sqIH"),i=n("hXyk"),o=n("NVMI"),a=n("2I03"),s=n("PaPB"),u=n("JzK+"),c=n("OOuR"),l=n("WdrS"),f=Math.max,p=Math.min,h=Math.floor,d=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g,m=function(t){return void 0===t?t:String(t)};r("replace",2,(function(t,e,n,r){var g=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,y=r.REPLACE_KEEPS_$0,b=g?"$":"$0";return[function(n,r){var i=u(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,i,r):e.call(String(i),n,r)},function(t,r){if(!g&&y||"string"===typeof r&&-1===r.indexOf(b)){var o=n(e,t,this,r);if(o.done)return o.value}var u=i(t),h=String(this),d="function"===typeof r;d||(r=String(r));var v=u.global;if(v){var x=u.unicode;u.lastIndex=0}var w=[];while(1){var E=l(u,h);if(null===E)break;if(w.push(E),!v)break;var S=String(E[0]);""===S&&(u.lastIndex=c(h,a(u.lastIndex),x))}for(var C="",T=0,O=0;O<w.length;O++){E=w[O];for(var A=String(E[0]),k=f(p(s(E.index),h.length),0),M=[],P=1;P<E.length;P++)M.push(m(E[P]));var I=E.groups;if(d){var L=[A].concat(M,k,h);void 0!==I&&L.push(I);var R=String(r.apply(void 0,L))}else R=_(A,h,k,M,I,r);k>=T&&(C+=h.slice(T,k)+R,T=k+A.length)}return C+h.slice(T)}];function _(t,n,r,i,a,s){var u=r+t.length,c=i.length,l=v;return void 0!==a&&(a=o(a),l=d),e.call(s,l,(function(e,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,r);case"'":return n.slice(u);case"<":s=a[o.slice(1,-1)];break;default:var l=+o;if(0===l)return e;if(l>c){var f=h(l/10);return 0===f?e:f<=c?void 0===i[f-1]?o.charAt(1):i[f-1]+o.charAt(1):e}s=i[l-1]}return void 0===s?"":s}))}}))},Xrqc:function(t,e){function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},"Xv/6":function(t,e,n){var r=n("sVUS"),i=n("xi+f"),o=n("+Gi7"),a=n("0Zv/"),s=1/0,u=r?r.prototype:void 0,c=u?u.toString:void 0;function l(t){if("string"==typeof t)return t;if(o(t))return i(t,l)+"";if(a(t))return c?c.call(t):"";var e=t+"";return"0"==e&&1/t==-s?"-0":e}t.exports=l},XwWN:function(t,e,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(e,"a",(function(){return r}))},Xwir:function(t,e,n){var r=n("HIsA");r({target:"Math",stat:!0},{imulh:function(t,e){var n=65535,r=+t,i=+e,o=r&n,a=i&n,s=r>>16,u=i>>16,c=(s*a>>>0)+(o*a>>>16);return s*u+(c>>16)+((o*u>>>0)+(c&n)>>16)}})},XxnP:function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("bXon"),a=n("hXyk"),s=n("DDwO"),u=n("70zE"),c=n("Ji6T");r({target:"Set",proto:!0,real:!0,forced:i},{union:function(t){var e=a(this),n=new(u(e,o("Set")))(e);return c(t,s(n.add),n),n}})},Y0Ny:function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("hXyk"),a=n("DDwO"),s=n("YjHi"),u=n("Ji6T");r({target:"Map",proto:!0,real:!0,forced:i},{reduce:function(t){var e=o(this),n=s(e),r=arguments.length<2,i=r?void 0:arguments[1];if(a(t),u(n,(function(n,o){r?(r=!1,i=o):i=t(i,o,n,e)}),void 0,!0,!0),r)throw TypeError("Reduce of empty map with no initial value");return i}})},Y22F:function(t,e,n){var r=n("HIsA"),i=n("5AZ8");r({target:"Map",stat:!0},{from:i})},Y26w:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Target=void 0;var r=n("9L8m"),i=n("qSJf"),o=n("rMkn"),a=n("3RHZ"),s=function(){function t(t,e,n,s){this.id=i.id(),this.type=t,this.serviceIdentifier=n,this.name=new a.QueryableString(e||""),this.metadata=new Array;var u=null;"string"===typeof s?u=new o.Metadata(r.NAMED_TAG,s):s instanceof o.Metadata&&(u=s),null!==u&&this.metadata.push(u)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){var r=n[e];if(r.key===t)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(r.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(t){return this.matchesTag(r.MULTI_INJECT_TAG)(t)},t.prototype.isNamed=function(){return this.hasTag(r.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some((function(t){return r.NON_CUSTOM_TAG_KEYS.every((function(e){return t.key!==e}))}))},t.prototype.isOptional=function(){return this.matchesTag(r.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(t){return t.key===r.NAMED_TAG}))[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(t){return r.NON_CUSTOM_TAG_KEYS.every((function(e){return t.key!==e}))})):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(r.NAMED_TAG)(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var r=0,i=e.metadata;r<i.length;r++){var o=i[r];if(o.key===t&&o.value===n)return!0}return!1}},t}();e.Target=s},Y3bS:function(t,e,n){"use strict";n.r(e);var r=n("xwgP"),i=n.n(r),o=n("OS9G"),a=n("oSqR"),s=n("Rsk4"),u=i.a.memo(s["default"]["docs-ruler"].component),c=i.a.memo(s["default"]["\u6d4b\u8ddd\u5de5\u5177-demo"].component);e["default"]=t=>(i.a.useEffect((()=>{var e;null!==t&&void 0!==t&&null!==(e=t.location)&&void 0!==e&&e.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(t.location.hash.slice(1)))}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"markdown"},i.a.createElement("h3",{id:"\u6d4b\u8ddd\u5de5\u5177"},i.a.createElement(o["AnchorLink"],{to:"#\u6d4b\u8ddd\u5de5\u5177","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u6d4b\u8ddd\u5de5\u5177"),i.a.createElement("h3",{id:"\u901a\u8fc7-ui-\u7ec4\u4ef6\u521d\u59cb\u5316"},i.a.createElement(o["AnchorLink"],{to:"#\u901a\u8fc7-ui-\u7ec4\u4ef6\u521d\u59cb\u5316","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u901a\u8fc7 UI \u7ec4\u4ef6\u521d\u59cb\u5316")),i.a.createElement(a["default"],s["default"]["docs-ruler"].previewerProps,i.a.createElement(u,null)),i.a.createElement("div",{className:"markdown"},i.a.createElement("h3",{id:"\u7ed8\u5236\u7ec4\u4ef6\u521d\u59cb\u5316"},i.a.createElement(o["AnchorLink"],{to:"#\u7ed8\u5236\u7ec4\u4ef6\u521d\u59cb\u5316","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u7ed8\u5236\u7ec4\u4ef6\u521d\u59cb\u5316")),i.a.createElement(a["default"],s["default"]["\u6d4b\u8ddd\u5de5\u5177-demo"].previewerProps,i.a.createElement(c,null)))))},YAei:function(t,e,n){var r=n("bVFb");r("patternMatch")},"YE/S":function(t,e,n){var r=n("2JD6"),i=n("ECWN"),o=r.WeakMap;t.exports="function"===typeof o&&/native code/.test(i(o))},YHGW:function(t,e){t.exports.RADIUS=6378137,t.exports.FLATTENING=1/298.257223563,t.exports.POLAR_RADIUS=6356752.3142},YNYt:function(t,e,n){var r=n("76Vx");function i(e,n,o){return"undefined"!==typeof Reflect&&Reflect.get?(t.exports=i=Reflect.get,t.exports["default"]=t.exports,t.exports.__esModule=!0):(t.exports=i=function(t,e,n){var i=r(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}},t.exports["default"]=t.exports,t.exports.__esModule=!0),i(e,n,o||e)}t.exports=i,t.exports["default"]=t.exports,t.exports.__esModule=!0},"YQ/P":function(t,e){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},YTZi:function(t,e,n){var r=n("wmqP"),i=n("quZW"),o=n("E5vS"),a=n("Bx3/"),s=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,f=c.toString,p=l.hasOwnProperty,h=RegExp("^"+f.call(p).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(t){if(!o(t)||i(t))return!1;var e=r(t)?h:u;return e.test(a(t))}t.exports=d},YXa4:function(t,e,n){var r=n("PaPB");t.exports=function(t){var e=r(t);if(e<0)throw RangeError("The argument can't be less than 0");return e}},YcyD:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=e.getServiceIdentifierAsString=e.typeConstraint=e.namedConstraint=e.taggedConstraint=e.traverseAncerstors=e.decorate=e.id=e.MetadataReader=e.postConstruct=e.targetName=e.multiInject=e.unmanaged=e.optional=e.LazyServiceIdentifer=e.inject=e.named=e.tagged=e.injectable=e.ContainerModule=e.AsyncContainerModule=e.TargetTypeEnum=e.BindingTypeEnum=e.BindingScopeEnum=e.Container=e.METADATA_KEY=void 0;var r=n("9L8m");e.METADATA_KEY=r;var i=n("9u1Y");Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return i.Container}});var o=n("2+60");Object.defineProperty(e,"BindingScopeEnum",{enumerable:!0,get:function(){return o.BindingScopeEnum}}),Object.defineProperty(e,"BindingTypeEnum",{enumerable:!0,get:function(){return o.BindingTypeEnum}}),Object.defineProperty(e,"TargetTypeEnum",{enumerable:!0,get:function(){return o.TargetTypeEnum}});var a=n("Q8h2");Object.defineProperty(e,"AsyncContainerModule",{enumerable:!0,get:function(){return a.AsyncContainerModule}}),Object.defineProperty(e,"ContainerModule",{enumerable:!0,get:function(){return a.ContainerModule}});var s=n("koGu");Object.defineProperty(e,"injectable",{enumerable:!0,get:function(){return s.injectable}});var u=n("Itlo");Object.defineProperty(e,"tagged",{enumerable:!0,get:function(){return u.tagged}});var c=n("u6QS");Object.defineProperty(e,"named",{enumerable:!0,get:function(){return c.named}});var l=n("tjpL");Object.defineProperty(e,"inject",{enumerable:!0,get:function(){return l.inject}}),Object.defineProperty(e,"LazyServiceIdentifer",{enumerable:!0,get:function(){return l.LazyServiceIdentifer}});var f=n("WemT");Object.defineProperty(e,"optional",{enumerable:!0,get:function(){return f.optional}});var p=n("Mz7Q");Object.defineProperty(e,"unmanaged",{enumerable:!0,get:function(){return p.unmanaged}});var h=n("HWsn");Object.defineProperty(e,"multiInject",{enumerable:!0,get:function(){return h.multiInject}});var d=n("Ca6f");Object.defineProperty(e,"targetName",{enumerable:!0,get:function(){return d.targetName}});var v=n("CdXo");Object.defineProperty(e,"postConstruct",{enumerable:!0,get:function(){return v.postConstruct}});var m=n("/dUy");Object.defineProperty(e,"MetadataReader",{enumerable:!0,get:function(){return m.MetadataReader}});var g=n("qSJf");Object.defineProperty(e,"id",{enumerable:!0,get:function(){return g.id}});var y=n("ZLnY");Object.defineProperty(e,"decorate",{enumerable:!0,get:function(){return y.decorate}});var b=n("09fY");Object.defineProperty(e,"traverseAncerstors",{enumerable:!0,get:function(){return b.traverseAncerstors}}),Object.defineProperty(e,"taggedConstraint",{enumerable:!0,get:function(){return b.taggedConstraint}}),Object.defineProperty(e,"namedConstraint",{enumerable:!0,get:function(){return b.namedConstraint}}),Object.defineProperty(e,"typeConstraint",{enumerable:!0,get:function(){return b.typeConstraint}});var _=n("Rph/");Object.defineProperty(e,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return _.getServiceIdentifierAsString}});var x=n("Zub2");Object.defineProperty(e,"multiBindToService",{enumerable:!0,get:function(){return x.multiBindToService}})},YjHi:function(t,e,n){var r=n("m52V"),i=n("0Ccx");t.exports=r?i:function(t){return Map.prototype.entries.call(t)}},YmYf:function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t){"string"!==typeof t&&(t+="");var e,n=0,r=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){n=e+1;break}}else-1===r&&(i=!1,r=e+1);return-1===r?"":t.slice(n,r)}function i(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!==typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,r="/"===a.charAt(0))}return e=n(i(e.split("/"),(function(t){return!!t})),!r).join("/"),(r?"/":"")+e||"."},e.normalize=function(t){var r=e.isAbsolute(t),a="/"===o(t,-1);return t=n(i(t.split("/"),(function(t){return!!t})),!r).join("/"),t||r||(t="."),t&&a&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(i(t,(function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length;e++)if(""!==t[e])break;for(var n=t.length-1;n>=0;n--)if(""!==t[n])break;return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}var c=[];for(u=s;u<i.length;u++)c.push("..");return c=c.concat(o.slice(s)),c.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!==typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,o=t.length-1;o>=1;--o)if(e=t.charCodeAt(o),47===e){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=r(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!==typeof t&&(t+="");for(var e=-1,n=0,r=-1,i=!0,o=0,a=t.length-1;a>=0;--a){var s=t.charCodeAt(a);if(47!==s)-1===r&&(i=!1,r=a+1),46===s?-1===e?e=a:1!==o&&(o=1):-1!==e&&(o=-1);else if(!i){n=a+1;break}}return-1===e||-1===r||0===o||1===o&&e===r-1&&e===n+1?"":t.slice(e,r)};var o="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n("7vYp"))},YtKl:function(t,e,n){var r=n("m9sd"),i=n("rGlR");function o(t,e){return t&&r(e,i(e),t)}t.exports=o},"Z+Xa":function(t,e,n){var r="function"===typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=r&&i&&"function"===typeof i.get?i.get:null,a=r&&Map.prototype.forEach,s="function"===typeof Set&&Set.prototype,u=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=s&&u&&"function"===typeof u.get?u.get:null,l=s&&Set.prototype.forEach,f="function"===typeof WeakMap&&WeakMap.prototype,p=f?WeakMap.prototype.has:null,h="function"===typeof WeakSet&&WeakSet.prototype,d=h?WeakSet.prototype.has:null,v="function"===typeof WeakRef&&WeakRef.prototype,m=v?WeakRef.prototype.deref:null,g=Boolean.prototype.valueOf,y=Object.prototype.toString,b=Function.prototype.toString,_=String.prototype.match,x="function"===typeof BigInt?BigInt.prototype.valueOf:null,w=Object.getOwnPropertySymbols,E="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?Symbol.prototype.toString:null,S="function"===typeof Symbol&&"object"===typeof Symbol.iterator,C=Object.prototype.propertyIsEnumerable,T=("function"===typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null),O=n(1).custom,A=O&&z(O)?O:null,k="function"===typeof Symbol&&"undefined"!==typeof Symbol.toStringTag?Symbol.toStringTag:null;function M(t,e,n){var r="double"===(n.quoteStyle||e)?'"':"'";return r+t+r}function P(t){return String(t).replace(/"/g,"&quot;")}function I(t){return"[object Array]"===q(t)&&(!k||!("object"===typeof t&&k in t))}function L(t){return"[object Date]"===q(t)&&(!k||!("object"===typeof t&&k in t))}function R(t){return"[object RegExp]"===q(t)&&(!k||!("object"===typeof t&&k in t))}function D(t){return"[object Error]"===q(t)&&(!k||!("object"===typeof t&&k in t))}function N(t){return"[object String]"===q(t)&&(!k||!("object"===typeof t&&k in t))}function j(t){return"[object Number]"===q(t)&&(!k||!("object"===typeof t&&k in t))}function F(t){return"[object Boolean]"===q(t)&&(!k||!("object"===typeof t&&k in t))}function z(t){if(S)return t&&"object"===typeof t&&t instanceof Symbol;if("symbol"===typeof t)return!0;if(!t||"object"!==typeof t||!E)return!1;try{return E.call(t),!0}catch(e){}return!1}function B(t){if(!t||"object"!==typeof t||!x)return!1;try{return x.call(t),!0}catch(e){}return!1}t.exports=function t(e,n,r,i){var s=n||{};if(V(s,"quoteStyle")&&"single"!==s.quoteStyle&&"double"!==s.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(V(s,"maxStringLength")&&("number"===typeof s.maxStringLength?s.maxStringLength<0&&s.maxStringLength!==1/0:null!==s.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var u=!V(s,"customInspect")||s.customInspect;if("boolean"!==typeof u&&"symbol"!==u)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(V(s,"indent")&&null!==s.indent&&"\t"!==s.indent&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if("undefined"===typeof e)return"undefined";if(null===e)return"null";if("boolean"===typeof e)return e?"true":"false";if("string"===typeof e)return Q(e,s);if("number"===typeof e)return 0===e?1/0/e>0?"0":"-0":String(e);if("bigint"===typeof e)return String(e)+"n";var f="undefined"===typeof s.depth?5:s.depth;if("undefined"===typeof r&&(r=0),r>=f&&f>0&&"object"===typeof e)return I(e)?"[Array]":"[Object]";var p=it(s,r);if("undefined"===typeof i)i=[];else if(H(i,e)>=0)return"[Circular]";function h(e,n,o){if(n&&(i=i.slice(),i.push(n)),o){var a={depth:s.depth};return V(s,"quoteStyle")&&(a.quoteStyle=s.quoteStyle),t(e,a,r+1,i)}return t(e,s,r+1,i)}if("function"===typeof e){var d=G(e),v=at(e,h);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(v.length>0?" { "+v.join(", ")+" }":"")}if(z(e)){var m=S?String(e).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):E.call(e);return"object"!==typeof e||S?m:tt(m)}if(J(e)){for(var y="<"+String(e.nodeName).toLowerCase(),b=e.attributes||[],_=0;_<b.length;_++)y+=" "+b[_].name+"="+M(P(b[_].value),"double",s);return y+=">",e.childNodes&&e.childNodes.length&&(y+="..."),y+="</"+String(e.nodeName).toLowerCase()+">",y}if(I(e)){if(0===e.length)return"[]";var w=at(e,h);return p&&!rt(w)?"["+ot(w,p)+"]":"[ "+w.join(", ")+" ]"}if(D(e)){var C=at(e,h);return 0===C.length?"["+String(e)+"]":"{ ["+String(e)+"] "+C.join(", ")+" }"}if("object"===typeof e&&u){if(A&&"function"===typeof e[A])return e[A]();if("symbol"!==u&&"function"===typeof e.inspect)return e.inspect()}if(W(e)){var O=[];return a.call(e,(function(t,n){O.push(h(n,e,!0)+" => "+h(t,e))})),nt("Map",o.call(e),O,p)}if(Y(e)){var U=[];return l.call(e,(function(t){U.push(h(t,e))})),nt("Set",c.call(e),U,p)}if(X(e))return et("WeakMap");if(K(e))return et("WeakSet");if(Z(e))return et("WeakRef");if(j(e))return tt(h(Number(e)));if(B(e))return tt(h(x.call(e)));if(F(e))return tt(g.call(e));if(N(e))return tt(h(String(e)));if(!L(e)&&!R(e)){var $=at(e,h),st=T?T(e)===Object.prototype:e instanceof Object||e.constructor===Object,ut=e instanceof Object?"":"null prototype",ct=!st&&k&&Object(e)===e&&k in e?q(e).slice(8,-1):ut?"Object":"",lt=st||"function"!==typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"",ft=lt+(ct||ut?"["+[].concat(ct||[],ut||[]).join(": ")+"] ":"");return 0===$.length?ft+"{}":p?ft+"{"+ot($,p)+"}":ft+"{ "+$.join(", ")+" }"}return String(e)};var U=Object.prototype.hasOwnProperty||function(t){return t in this};function V(t,e){return U.call(t,e)}function q(t){return y.call(t)}function G(t){if(t.name)return t.name;var e=_.call(b.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function H(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function W(t){if(!o||!t||"object"!==typeof t)return!1;try{o.call(t);try{c.call(t)}catch(e){return!0}return t instanceof Map}catch(n){}return!1}function X(t){if(!p||!t||"object"!==typeof t)return!1;try{p.call(t,p);try{d.call(t,d)}catch(e){return!0}return t instanceof WeakMap}catch(n){}return!1}function Z(t){if(!m||!t||"object"!==typeof t)return!1;try{return m.call(t),!0}catch(e){}return!1}function Y(t){if(!c||!t||"object"!==typeof t)return!1;try{c.call(t);try{o.call(t)}catch(e){return!0}return t instanceof Set}catch(n){}return!1}function K(t){if(!d||!t||"object"!==typeof t)return!1;try{d.call(t,d);try{p.call(t,p)}catch(e){return!0}return t instanceof WeakSet}catch(n){}return!1}function J(t){return!(!t||"object"!==typeof t)&&("undefined"!==typeof HTMLElement&&t instanceof HTMLElement||"string"===typeof t.nodeName&&"function"===typeof t.getAttribute)}function Q(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return Q(t.slice(0,e.maxStringLength),e)+r}var i=t.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,$);return M(i,"single",e)}function $(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+e.toString(16).toUpperCase()}function tt(t){return"Object("+t+")"}function et(t){return t+" { ? }"}function nt(t,e,n,r){var i=r?ot(n,r):n.join(", ");return t+" ("+e+") {"+i+"}"}function rt(t){for(var e=0;e<t.length;e++)if(H(t[e],"\n")>=0)return!1;return!0}function it(t,e){var n;if("\t"===t.indent)n="\t";else{if(!("number"===typeof t.indent&&t.indent>0))return null;n=Array(t.indent+1).join(" ")}return{base:n,prev:Array(e+1).join(n)}}function ot(t,e){if(0===t.length)return"";var n="\n"+e.prev+e.base;return n+t.join(","+n)+"\n"+e.prev}function at(t,e){var n=I(t),r=[];if(n){r.length=t.length;for(var i=0;i<t.length;i++)r[i]=V(t,i)?e(t[i],t):""}var o,a="function"===typeof w?w(t):[];if(S){o={};for(var s=0;s<a.length;s++)o["$"+a[s]]=a[s]}for(var u in t)V(t,u)&&(n&&String(Number(u))===u&&u<t.length||S&&o["$"+u]instanceof Symbol||(/[^\w$]/.test(u)?r.push(e(u,t)+": "+e(t[u],t)):r.push(u+": "+e(t[u],t))));if("function"===typeof w)for(var c=0;c<a.length;c++)C.call(t,a[c])&&r.push("["+e(a[c])+"]: "+e(t[a[c]],t));return r}},ZJ87:function(t,e){function n(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}t.exports=n,n.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},n.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},n.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},n.prototype.solveCurveX=function(t,e){var n,r,i,o,a;for("undefined"===typeof e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if(n=0,r=1,i=t,i<n)return n;if(i>r)return r;while(n<r){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},n.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}},"ZL/h":function(t,e,n){var r=n("7+LC");t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},ZLnY:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagProperty=e.tagParameter=e.decorate=void 0;var r=n("196R"),i=n("9L8m");function o(t,e,n,r){var o=i.TAGGED;s(o,t,e,r,n)}function a(t,e,n){var r=i.TAGGED_PROP;s(r,t.constructor,e,n)}function s(t,e,n,i,o){var a={},s="number"===typeof o,u=void 0!==o&&s?o.toString():n;if(s&&void 0!==n)throw new Error(r.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,e)&&(a=Reflect.getMetadata(t,e));var c=a[u];if(Array.isArray(c))for(var l=0,f=c;l<f.length;l++){var p=f[l];if(p.key===i.key)throw new Error(r.DUPLICATED_METADATA+" "+p.key.toString())}else c=[];c.push(i),a[u]=c,Reflect.defineMetadata(t,a,e)}function u(t,e){Reflect.decorate(t,e)}function c(t,e){return function(n,r){e(n,r,t)}}function l(t,e,n){"number"===typeof n?u([c(n,t)],e):"string"===typeof n?Reflect.decorate([t],e,n):u([t],e)}e.tagParameter=o,e.tagProperty=a,e.decorate=l},ZOCG:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=function(t){return+setTimeout(t,16)},i=function(t){return clearTimeout(t)};"undefined"!==typeof window&&"requestAnimationFrame"in window&&(r=function(t){return window.requestAnimationFrame(t)},i=function(t){return window.cancelAnimationFrame(t)});var o=0,a=new Map;function s(t){a["delete"](t)}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;o+=1;var n=o;function i(e){if(0===e)s(n),t();else{var o=r((function(){i(e-1)}));a.set(n,o)}}return i(e),n}u.cancel=function(t){var e=a.get(t);return s(e),i(e)}},ZPal:function(t,e,n){"use strict";var r=n("HIsA"),i=n("wQ+q").end,o=n("8iHL"),a=o("trimEnd"),s=a?function(){return i(this)}:"".trimEnd;r({target:"String",proto:!0,forced:a},{trimEnd:s,trimRight:s})},ZU2r:function(t,e,n){(function(t){var r=n("gsbv"),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a?r.Buffer:void 0,u=s?s.allocUnsafe:void 0;function c(t,e){if(e)return t.slice();var n=t.length,r=u?u(n):new t.constructor(n);return t.copy(r),r}t.exports=c}).call(this,n("7y0d")(t))},ZcxN:function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("bXon"),a=n("hXyk"),s=n("DDwO"),u=n("40mc"),c=n("70zE"),l=n("wKMT"),f=n("Ji6T");r({target:"Set",proto:!0,real:!0,forced:i},{map:function(t){var e=a(this),n=l(e),r=u(t,arguments.length>1?arguments[1]:void 0,3),i=new(c(e,o("Set"))),p=s(i.add);return f(n,(function(t){p.call(i,r(t,t,e))}),void 0,!1,!0),i}})},ZljA:function(t,e,n){"use strict";n.r(e);var r=n("xwgP"),i=n.n(r),o=n("OS9G"),a=n("oSqR"),s=n("Rsk4"),u=i.a.memo(s["default"]["docs-draw_control"].component);e["default"]=t=>(i.a.useEffect((()=>{var e;null!==t&&void 0!==t&&null!==(e=t.location)&&void 0!==e&&e.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(t.location.hash.slice(1)))}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"markdown"}),i.a.createElement(a["default"],s["default"]["docs-draw_control"].previewerProps,i.a.createElement(u,null)))))},Zub2:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=void 0;var r=function(t){return function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach((function(n){return t.bind(n).toService(e)}))}}};e.multiBindToService=r},ZvDv:function(t,e,n){var r=n("2vMh");function i(t,e){var n=null==t?0:t.length;return!!n&&r(t,e,0)>-1}t.exports=i},Zwxo:function(t,e,n){"use strict";t.exports=function(t,e){if("string"!==typeof t||"string"!==typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];var n=t.indexOf(e);return-1===n?[t]:[t.slice(0,n),t.slice(n+e.length)]}},Zx9X:function(t,e,n){var r=n("0JYp");function i(t,e){return r(t,e)}t.exports=i},"a/iU":function(t,e,n){var r=n("fI5W"),i=n("1EVt"),o=n("I77w"),a=n("GFj5");function s(e){var n="function"===typeof Map?new Map:void 0;return t.exports=s=function(t){if(null===t||!o(t))return t;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return a(t,arguments,r(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i(e,t)},t.exports["default"]=t.exports,t.exports.__esModule=!0,s(e)}t.exports=s,t.exports["default"]=t.exports,t.exports.__esModule=!0},a1Mx:function(t,e){var n="__lodash_hash_undefined__";function r(t){return this.__data__.set(t,n),this}t.exports=r},aDRW:function(t,e){function n(t,e,n,r){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},aK5P:function(t,e,n){var r=n("bVFb");r("dispose")},aNCL:function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("bXon"),a=n("hXyk"),s=n("DDwO"),u=n("40mc"),c=n("70zE"),l=n("YjHi"),f=n("Ji6T");r({target:"Map",proto:!0,real:!0,forced:i},{mapKeys:function(t){var e=a(this),n=l(e),r=u(t,arguments.length>1?arguments[1]:void 0,3),i=new(c(e,o("Map"))),p=s(i.set);return f(n,(function(t,n){p.call(i,r(n,t,e),n)}),void 0,!0,!0),i}})},aNuW:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInSyntax=void 0;var r=n("2+60"),i=n("uh8N"),o=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=r.BindingScopeEnum.Request,new i.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=r.BindingScopeEnum.Singleton,new i.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=r.BindingScopeEnum.Transient,new i.BindingWhenOnSyntax(this._binding)},t}();e.BindingInSyntax=o},aS93:function(t,e,n){var r=n("7+LC"),i=n("IRht"),o="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},abI8:function(t,e,n){var r=n("e+VF"),i=n("Q47P"),o=n("KmIr");function a(t){return r(t,o,i)}t.exports=a},acWz:function(t,e,n){var r=n("hXyk");t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(a){var o=t["return"];throw void 0!==o&&r(o.call(t)),a}}},afop:function(t,e,n){"use strict";var r=n("Krz3").IteratorPrototype,i=n("bWCM"),o=n("OLna"),a=n("J7X1"),s=n("mAbK"),u=function(){return this};t.exports=function(t,e,n){var c=e+" Iterator";return t.prototype=i(r,{next:o(1,n)}),a(t,c,!1,!0),s[c]=u,t}},"ar+g":function(t,e,n){var r=n("qgzk"),i=n("8ifL"),o=n("Q47P"),a=n("Jibm"),s=Object.getOwnPropertySymbols,u=s?function(t){var e=[];while(t)r(e,o(t)),t=i(t);return e}:a;t.exports=u},auPx:function(t,e,n){var r=n("HIsA"),i=n("jXsC");r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},b4JQ:function(t,e,n){var r=n("NVMI"),i=n("2I03"),o=n("tg/3"),a=n("mKn/"),s=n("40mc"),u=n("Wp5u").aTypedArrayConstructor;t.exports=function(t){var e,n,c,l,f,p,h=r(t),d=arguments.length,v=d>1?arguments[1]:void 0,m=void 0!==v,g=o(h);if(void 0!=g&&!a(g)){f=g.call(h),p=f.next,h=[];while(!(l=p.call(f)).done)h.push(l.value)}for(m&&d>2&&(v=s(v,arguments[2],2)),n=i(h.length),c=new(u(this))(n),e=0;n>e;e++)c[e]=m?v(h[e],e):h[e];return c}},"b9+m":function(t,e,n){var r=n("bXon");t.exports=r("document","documentElement")},bCY9:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("OFkz"),i=new r["Plugin"]({validKeys:["modifyClientRenderOpts","patchRoutes","rootContainer","render","onRouteChange","__mfsu","getInitialState","initialStateConfig","request"]})},bG4S:function(t,e,n){var r=n("HIsA"),i=n("VeQJ");r({target:"WeakSet",stat:!0},{of:i})},bL85:function(t,e,n){var r=n("HIsA"),i=n("icJ8"),o=n("hXyk"),a=i.get,s=i.toKey;r({target:"Reflect",stat:!0},{getOwnMetadata:function(t,e){var n=arguments.length<3?void 0:s(arguments[2]);return a(t,o(e),n)}})},bShA:function(t,e,n){var r=n("m52V"),i=n("Ogjs");(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:r?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},bVFb:function(t,e,n){var r=n("G5kI"),i=n("+qhb"),o=n("Q1Da"),a=n("2RC6").f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||a(e,t,{value:o.f(t)})}},bWCM:function(t,e,n){var r,i=n("hXyk"),o=n("2+gS"),a=n("GPbW"),s=n("1agv"),u=n("b9+m"),c=n("riWr"),l=n("fbKl"),f=">",p="<",h="prototype",d="script",v=l("IE_PROTO"),m=function(){},g=function(t){return p+d+f+t+p+"/"+d+f},y=function(t){t.write(g("")),t.close();var e=t.parentWindow.Object;return t=null,e},b=function(){var t,e=c("iframe"),n="java"+d+":";return e.style.display="none",u.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(g("document.F=Object")),t.close(),t.F},_=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}_=r?y(r):b();var t=a.length;while(t--)delete _[h][a[t]];return _()};s[v]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(m[h]=i(t),n=new m,m[h]=null,n[v]=t):n=_(),void 0===e?n:o(n,e)}},bXon:function(t,e,n){var r=n("G5kI"),i=n("2JD6"),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t])||o(i[t]):r[t]&&r[t][e]||i[t]&&i[t][e]}},bZ26:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",(function(){return r}))},bZcm:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var r=o(n("xwgP")),i=n("OFkz");function o(t){return t&&t.__esModule?t:{default:t}}function a(){return a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a.apply(this,arguments)}function s(t){return t.offsetTop+(t.offsetParent?s(t.offsetParent):0)}var u=function t(e){var n,o=(null===(n=e.to.match(/(#.+)$/))||void 0===n?void 0:n[1])||"";return r["default"].createElement(i.NavLink,a({},e,{onClick:function(){return t.scrollToAnchor(o.substring(1))},isActive:function(t,e){return o&&decodeURIComponent(e.hash)===o}}))};u.scrollToAnchor=function(t){window.requestAnimationFrame((function(){var e=document.getElementById(decodeURIComponent(t));e&&window.scrollTo(0,s(e)-100)}))};var c=u;e["default"]=c},bbTr:function(t,e,n){"use strict";var r=n("HIsA"),i=n("wQ+q").trim,o=n("8iHL");r({target:"String",proto:!0,forced:o("trim")},{trim:function(){return i(this)}})},bewy:function(t,e){function n(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}t.exports=n},br1d:function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("7SXh");r({target:"Set",proto:!0,real:!0,forced:i},{addAll:function(){return o.apply(this,arguments)}})},br1w:function(t,e){function n(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}t.exports=n},c2jp:function(t,e,n){var r=n("HIsA"),i=n("VeQJ");r({target:"Map",stat:!0},{of:i})},c8OV:function(t,e,n){var r=n("T9r4");t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},cA8S:function(t,e,n){var r=n("Xv/6");function i(t){return null==t?"":r(t)}t.exports=i},cCpg:function(t,e,n){var r=n("HIsA");r({target:"Math",stat:!0},{umulh:function(t,e){var n=65535,r=+t,i=+e,o=r&n,a=i&n,s=r>>>16,u=i>>>16,c=(s*a>>>0)+(o*a>>>16);return s*u+(c>>>16)+((o*u>>>0)+(c&n)>>>16)}})},cEHS:function(t,e,n){var r=n("TJOf"),i=n("TpDJ"),o=Object.prototype,a=o.hasOwnProperty;function s(t,e,n){var o=t[e];a.call(t,e)&&i(o,n)&&(void 0!==n||e in t)||r(t,e,n)}t.exports=s},cGOV:function(t,e,n){var r=n("pxmn"),i=n("UPu9");t.exports=function(t,e,n){var o,a;return i&&"function"==typeof(o=e.constructor)&&o!==n&&r(a=o.prototype)&&a!==n.prototype&&i(t,a),t}},cKxZ:function(t,e,n){var r=n("B0cc");function i(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}t.exports=i,t.exports["default"]=t.exports,t.exports.__esModule=!0},cZYw:function(t,e){function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},cvn4:function(t,e){function n(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}t.exports=n},"d/dq":function(t,e,n){"use strict";n.r(e),n.d(e,"create",(function(){return i})),n.d(e,"clone",(function(){return o})),n.d(e,"fromValues",(function(){return a})),n.d(e,"copy",(function(){return s})),n.d(e,"set",(function(){return u})),n.d(e,"add",(function(){return c})),n.d(e,"subtract",(function(){return l})),n.d(e,"multiply",(function(){return f})),n.d(e,"divide",(function(){return p})),n.d(e,"ceil",(function(){return h})),n.d(e,"floor",(function(){return d})),n.d(e,"min",(function(){return v})),n.d(e,"max",(function(){return m})),n.d(e,"round",(function(){return g})),n.d(e,"scale",(function(){return y})),n.d(e,"scaleAndAdd",(function(){return b})),n.d(e,"distance",(function(){return _})),n.d(e,"squaredDistance",(function(){return x})),n.d(e,"length",(function(){return w})),n.d(e,"squaredLength",(function(){return E})),n.d(e,"negate",(function(){return S})),n.d(e,"inverse",(function(){return C})),n.d(e,"normalize",(function(){return T})),n.d(e,"dot",(function(){return O})),n.d(e,"cross",(function(){return A})),n.d(e,"lerp",(function(){return k})),n.d(e,"random",(function(){return M})),n.d(e,"transformMat2",(function(){return P})),n.d(e,"transformMat2d",(function(){return I})),n.d(e,"transformMat3",(function(){return L})),n.d(e,"transformMat4",(function(){return R})),n.d(e,"rotate",(function(){return D})),n.d(e,"angle",(function(){return N})),n.d(e,"zero",(function(){return j})),n.d(e,"str",(function(){return F})),n.d(e,"exactEquals",(function(){return z})),n.d(e,"equals",(function(){return B})),n.d(e,"len",(function(){return U})),n.d(e,"sub",(function(){return V})),n.d(e,"mul",(function(){return q})),n.d(e,"div",(function(){return G})),n.d(e,"dist",(function(){return H})),n.d(e,"sqrDist",(function(){return W})),n.d(e,"sqrLen",(function(){return X})),n.d(e,"forEach",(function(){return Z}));var r=n("TaHB");function i(){var t=new r["a"](2);return r["a"]!=Float32Array&&(t[0]=0,t[1]=0),t}function o(t){var e=new r["a"](2);return e[0]=t[0],e[1]=t[1],e}function a(t,e){var n=new r["a"](2);return n[0]=t,n[1]=e,n}function s(t,e){return t[0]=e[0],t[1]=e[1],t}function u(t,e,n){return t[0]=e,t[1]=n,t}function c(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function l(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function f(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function p(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function h(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function d(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function v(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function m(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function g(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function y(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function b(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function _(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function x(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function w(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function E(t){var e=t[0],n=t[1];return e*e+n*n}function S(t,e){return t[0]=-e[0],t[1]=-e[1],t}function C(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function T(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function O(t,e){return t[0]*e[0]+t[1]*e[1]}function A(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function k(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}function M(t,e){e=e||1;var n=2*r["c"]()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function P(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function I(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function L(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function R(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function D(t,e,n,r){var i=e[0]-n[0],o=e[1]-n[1],a=Math.sin(r),s=Math.cos(r);return t[0]=i*s-o*a+n[0],t[1]=i*a+o*s+n[1],t}function N(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+o*o),s=a&&(n*i+r*o)/a;return Math.acos(Math.min(Math.max(s,-1),1))}function j(t){return t[0]=0,t[1]=0,t}function F(t){return"vec2("+t[0]+", "+t[1]+")"}function z(t,e){return t[0]===e[0]&&t[1]===e[1]}function B(t,e){var n=t[0],i=t[1],o=e[0],a=e[1];return Math.abs(n-o)<=r["b"]*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-a)<=r["b"]*Math.max(1,Math.abs(i),Math.abs(a))}var U=w,V=l,q=f,G=p,H=_,W=x,X=E,Z=function(){var t=i();return function(e,n,r,i,o,a){var s,u;for(n||(n=2),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],o(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}()},d62z:function(t,e,n){"use strict";var r=n("HIsA"),i=n("pxmn"),o=n("dOdC"),a=n("4dbd"),s=n("2I03"),u=n("2hCa"),c=n("G70G"),l=n("kPvK"),f=n("HqdE"),p=n("/5yA"),h=f("slice"),d=p("slice",{ACCESSORS:!0,0:0,1:2}),v=l("species"),m=[].slice,g=Math.max;r({target:"Array",proto:!0,forced:!h||!d},{slice:function(t,e){var n,r,l,f=u(this),p=s(f.length),h=a(t,p),d=a(void 0===e?p:e,p);if(o(f)&&(n=f.constructor,"function"!=typeof n||n!==Array&&!o(n.prototype)?i(n)&&(n=n[v],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return m.call(f,h,d);for(r=new(void 0===n?Array:n)(g(d-h,0)),l=0;h<d;h++,l++)h in f&&c(r,l,f[h]);return r.length=l,r}})},dF3I:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var r,i,o,a=n("aDRW"),s=n.n(a),u=n("txMq"),c=n.n(u),l=n("RgF4"),f=n.n(l),p=n("Xrqc"),h=n.n(p),d=n("+ti2"),v=n.n(d),m=(n("+ynn"),n("/LZe"));function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){h()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var b=(r=Object(m["s"])(m["n"].IGlobalConfigService),i=function(){function t(e){c()(this,t),s()(this,"configService",o,this),h()(this,"config",void 0),this.config=e}return f()(t,[{key:"setContainer",value:function(t,e){t.bind(m["n"].MapConfig).toConstantValue(y(y({},this.config),{},{id:e})),t.bind(m["n"].IMapService).to(this.getServiceConstructor()).inSingletonScope()}},{key:"getServiceConstructor",value:function(){throw new Error("Method not implemented.")}}]),t}(),o=v()(i.prototype,"configService",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i)},dMsU:function(t,e,n){var r=n("xUti");t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},dOdC:function(t,e,n){var r=n("IRht");t.exports=Array.isArray||function(t){return"Array"==r(t)}},dVlX:function(t,e,n){var r=n("E5vS"),i=n("/g2i"),o=n("ANK/"),a=Object.prototype,s=a.hasOwnProperty;function u(t){if(!r(t))return o(t);var e=i(t),n=[];for(var a in t)("constructor"!=a||!e&&s.call(t,a))&&n.push(a);return n}t.exports=u},dXt2:function(t,e,n){"use strict";var r=n("Hiyu"),i=n("JY8B"),o=n("NVMI"),a=n("2I03"),s=n("2RC6").f;r&&!("lastIndex"in[])&&(s(Array.prototype,"lastIndex",{configurable:!0,get:function(){var t=o(this),e=a(t.length);return 0==e?0:e-1}}),i("lastIndex"))},dZOt:function(t,e,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function s(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map((function(t){return e[t]}));if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(o){return!1}}t.exports=s()?Object.assign:function(t,e){for(var n,s,u=a(t),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]),n)i.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var f=0;f<s.length;f++)o.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},dhT6:function(t,e,n){var r=n("ADQb"),i=n("gsbv"),o=r(i,"Map");t.exports=o},dhpO:function(t,e,n){},dhvM:function(t,e,n){var r=n("WeNx"),i=n("MbSy"),o=n("qXgj");function a(t,e){return o(i(t,e,r),t+"")}t.exports=a},dpzy:function(t,e,n){var r=n("T9r4");t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},dske:function(t,e,n){"use strict";t.exports=n("fIC7")},dxsU:function(t,e,n){"use strict";n.r(e);var r=n("xwgP"),i=n.n(r),o=n("+RP0"),a=n("Ct92"),s=n("/7QA");e["default"]=()=>(i.a.useEffect((()=>{var t=new o["Scene"]({id:"map",map:new a["a"]({pitch:0,style:"light",center:[116.30470275878906,39.88352811449648],zoom:10})});t.on("loaded",(()=>{var e=new s["DrawControl"](t,{position:"topright",layout:"horizontal",controls:{boxSelect:!0}});t.addControl(e),e.on("draw.boxselect",(t=>{console.log("update",t)}))}))}),[]),i.a.createElement("div",{style:{height:"400px",position:"relative"},id:"map"}))},"e+VF":function(t,e,n){var r=n("qgzk"),i=n("+Gi7");function o(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}t.exports=o},"e/ze":function(t,e,n){"use strict";n.r(e),n.d(e,"Headers",(function(){return f})),n.d(e,"Request",(function(){return x})),n.d(e,"Response",(function(){return S})),n.d(e,"DOMException",(function(){return T})),n.d(e,"fetch",(function(){return O}));var r="undefined"!==typeof globalThis&&globalThis||"undefined"!==typeof self&&self||"undefined"!==typeof r&&r,i={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};function o(t){return t&&DataView.prototype.isPrototypeOf(t)}if(i.arrayBuffer)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};function u(t){if("string"!==typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function c(t){return"string"!==typeof t&&(t=String(t)),t}function l(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return i.iterable&&(e[Symbol.iterator]=function(){return e}),e}function f(t){this.map={},t instanceof f?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function p(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function h(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function d(t){var e=new FileReader,n=h(e);return e.readAsArrayBuffer(t),n}function v(t){var e=new FileReader,n=h(e);return e.readAsText(t),n}function m(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function g(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(t){this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"===typeof t?this._bodyText=t:i.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:i.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:i.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():i.arrayBuffer&&i.blob&&o(t)?(this._bodyArrayBuffer=g(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||s(t))?this._bodyArrayBuffer=g(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"===typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i.blob&&(this.blob=function(){var t=p(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=p(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(d)}),this.text=function(){var t=p(this);if(t)return t;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(m(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i.formData&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(t,e){t=u(t),e=c(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},f.prototype["delete"]=function(t){delete this.map[u(t)]},f.prototype.get=function(t){return t=u(t),this.has(t)?this.map[t]:null},f.prototype.has=function(t){return this.map.hasOwnProperty(u(t))},f.prototype.set=function(t,e){this.map[u(t)]=c(e)},f.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},f.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),l(t)},f.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),l(t)},f.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),l(t)},i.iterable&&(f.prototype[Symbol.iterator]=f.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function _(t){var e=t.toUpperCase();return b.indexOf(e)>-1?e:t}function x(t,e){if(!(this instanceof x))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e=e||{};var n=e.body;if(t instanceof x){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new f(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new f(e.headers)),this.method=_(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),("GET"===this.method||"HEAD"===this.method)&&("no-store"===e.cache||"no-cache"===e.cache)){var r=/([?&])_=[^&]*/;if(r.test(this.url))this.url=this.url.replace(r,"$1_="+(new Date).getTime());else{var i=/\?/;this.url+=(i.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function w(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}})),e}function E(t){var e=new f,n=t.replace(/\r?\n[\t ]+/g," ");return n.split("\r").map((function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t})).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}})),e}function S(t,e){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===e.statusText?"":""+e.statusText,this.headers=new f(e.headers),this.url=e.url||"",this._initBody(t)}x.prototype.clone=function(){return new x(this,{body:this._bodyInit})},y.call(x.prototype),y.call(S.prototype),S.prototype.clone=function(){return new S(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},S.error=function(){var t=new S(null,{status:0,statusText:""});return t.type="error",t};var C=[301,302,303,307,308];S.redirect=function(t,e){if(-1===C.indexOf(e))throw new RangeError("Invalid status code");return new S(null,{status:e,headers:{location:t}})};var T=r.DOMException;try{new T}catch(A){T=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},T.prototype=Object.create(Error.prototype),T.prototype.constructor=T}function O(t,e){return new Promise((function(n,o){var a=new x(t,e);if(a.signal&&a.signal.aborted)return o(new T("Aborted","AbortError"));var s=new XMLHttpRequest;function u(){s.abort()}function l(t){try{return""===t&&r.location.href?r.location.href:t}catch(e){return t}}s.onload=function(){var t={status:s.status,statusText:s.statusText,headers:E(s.getAllResponseHeaders()||"")};t.url="responseURL"in s?s.responseURL:t.headers.get("X-Request-URL");var e="response"in s?s.response:s.responseText;setTimeout((function(){n(new S(e,t))}),0)},s.onerror=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},s.ontimeout=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},s.onabort=function(){setTimeout((function(){o(new T("Aborted","AbortError"))}),0)},s.open(a.method,l(a.url),!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&(i.blob?s.responseType="blob":i.arrayBuffer&&a.headers.get("Content-Type")&&-1!==a.headers.get("Content-Type").indexOf("application/octet-stream")&&(s.responseType="arraybuffer")),!e||"object"!==typeof e.headers||e.headers instanceof f?a.headers.forEach((function(t,e){s.setRequestHeader(e,t)})):Object.getOwnPropertyNames(e.headers).forEach((function(t){s.setRequestHeader(t,c(e.headers[t]))})),a.signal&&(a.signal.addEventListener("abort",u),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",u)}),s.send("undefined"===typeof a._bodyInit?null:a._bodyInit)}))}O.polyfill=!0,r.fetch||(r.fetch=O,r.Headers=f,r.Request=x,r.Response=S)},e22m:function(t,e,n){"use strict";var r=n("TWOK"),i=n("xwgP"),o={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},a=o,s=n("XUFm"),u=function(t,e){return i["createElement"](s["a"],Object(r["a"])(Object(r["a"])({},t),{},{ref:e,icon:a}))};u.displayName="LoadingOutlined";e["a"]=i["forwardRef"](u)},e9UT:function(t,e){function n(){this.__data__=[],this.size=0}t.exports=n},eAvs:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return at}));var r=n("fHjG");n("00jJ");function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}function h(t,e){return h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},h(t,e)}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function v(t,e,n){return v=d()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=Function.bind.apply(t,r),o=new i;return n&&h(o,n.prototype),o},v.apply(null,arguments)}function m(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function g(t){var e="function"===typeof Map?new Map:void 0;return g=function(t){if(null===t||!m(t))return t;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return v(t,arguments,p(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),h(n,t)},g(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t,e){return!e||"object"!==typeof e&&"function"!==typeof e?y(t):e}function _(t){var e=d();return function(){var n,r=p(t);if(e){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b(this,n)}}function x(t){return w(t)||E(t)||S(t)||T()}function w(t){if(Array.isArray(t))return C(t)}function E(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function S(t,e){if(t){if("string"===typeof t)return C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(t,e):void 0}}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function T(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function O(t){if(!Array.isArray(t))throw new TypeError("Middlewares must be an array!");for(var e=t.length,n=0;n<e;n++)if("function"!==typeof t[n])throw new TypeError("Middleware must be componsed of function");return function(e,n){var r=-1;function i(o){if(o<=r)return Promise.reject(new Error("next() should not be called multiple times in one middleware!"));r=o;var a=t[o]||n;if(!a)return Promise.resolve();try{return Promise.resolve(a(e,(function(){return i(o+1)})))}catch(s){return Promise.reject(s)}}return i(0)}}var A=function(){function e(t){if(s(this,e),!Array.isArray(t))throw new TypeError("Default middlewares must be an array!");this.defaultMiddlewares=x(t),this.middlewares=[]}return c(e,[{key:"use",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{global:!1,core:!1,defaultInstance:!1},i=!1,o=!1,s=!1;"number"===typeof r?(t&&Object({NODE_ENV:"production"}),i=!0,o=!1):"object"===a(r)&&r&&(o=r.global||!1,i=r.core||!1,s=r.defaultInstance||!1),o?e.globalMiddlewares.splice(e.globalMiddlewares.length-e.defaultGlobalMiddlewaresLength,0,n):i?e.coreMiddlewares.splice(e.coreMiddlewares.length-e.defaultCoreMiddlewaresLength,0,n):s?this.defaultMiddlewares.push(n):this.middlewares.push(n)}},{key:"execute",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=O([].concat(x(this.middlewares),x(this.defaultMiddlewares),x(e.globalMiddlewares),x(e.coreMiddlewares)));return n(t)}}]),e}();A.globalMiddlewares=[],A.defaultGlobalMiddlewaresLength=0,A.coreMiddlewares=[],A.defaultCoreMiddlewaresLength=0;var k=function(){function t(e){s(this,t),this.cache=new Map,this.timer={},this.extendOptions(e)}return c(t,[{key:"extendOptions",value:function(t){this.maxCache=t.maxCache||0}},{key:"get",value:function(t){return this.cache.get(JSON.stringify(t))}},{key:"set",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6e4;if(this.maxCache>0&&this.cache.size>=this.maxCache){var i=x(this.cache.keys())[0];this.cache["delete"](i),this.timer[i]&&clearTimeout(this.timer[i])}var o=JSON.stringify(t);this.cache.set(o,e),r>0&&(this.timer[o]=setTimeout((function(){n.cache["delete"](o),delete n.timer[o]}),r))}},{key:"delete",value:function(t){var e=JSON.stringify(t);return delete this.timer[e],this.cache["delete"](e)}},{key:"clear",value:function(){return this.timer={},this.cache.clear()}}]),t}(),M=function(t){f(n,t);var e=_(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RequestError";return s(this,n),i=e.call(this,t),i.name="RequestError",i.request=r,i.type=o,i}return n}(g(Error)),P=function(t){f(n,t);var e=_(n);function n(t,r,i,o){var a,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"ResponseError";return s(this,n),a=e.call(this,r||t.statusText),a.name="ResponseError",a.data=i,a.response=t,a.request=o,a.type=u,a}return n}(g(Error));function I(t){return new Promise((function(e,n){var r=new FileReader;r.onload=function(){e(r.result)},r.onerror=n,r.readAsText(t,"GBK")}))}function L(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{return JSON.parse(t)}catch(i){if(e)throw new P(n,"JSON.parse fail",t,r,"ParseError")}return t}function R(t,e){return new Promise((function(n,r){setTimeout((function(){r(new M("timeout of ".concat(t,"ms exceeded"),e,"Timeout"))}),t)}))}function D(t){return new Promise((function(e,n){t.cancelToken&&t.cancelToken.promise.then((function(t){n(t)}))}))}var N=Object.prototype.toString;function j(){var e;return"undefined"!==typeof t&&"[object process]"===N.call(t)&&(e="NODE"),"undefined"!==typeof XMLHttpRequest&&(e="BROWSER"),e}function F(t){return"object"===a(t)&&"[object Array]"===Object.prototype.toString.call(t)}function z(t){return"undefined"!==typeof URLSearchParams&&t instanceof URLSearchParams}function B(t){return"object"===a(t)&&"[object Date]"===Object.prototype.toString.call(t)}function U(t){return null!==t&&"object"===a(t)}function V(t,e){if(t)if("object"!==a(t)&&(t=[t]),F(t))for(var n=0;n<t.length;n++)e.call(null,t[n],n,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}function q(t){return z(t)?Object(r["parse"])(t.toString(),{strictNullHandling:!0}):"string"===typeof t?[t]:t}function G(t){return Object(r["stringify"])(t,{arrayFormat:"repeat",strictNullHandling:!0})}function H(t,e){return o(o(o({},t),e),{},{headers:o(o({},t.headers),e.headers),params:o(o({},q(t.params)),q(e.params)),method:(e.method||t.method||"get").toLowerCase()})}var W=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.prefix,r=e.suffix;return n&&(t="".concat(n).concat(t)),r&&(t="".concat(t).concat(r)),{url:t,options:e}};function X(t,e){var n=e.method,r=void 0===n?"get":n;return"get"===r.toLowerCase()}function Z(e,n){if(!e)return n();var r=e.req;r=void 0===r?{}:r;var i=r.options,o=void 0===i?{}:i,a=r.url,s=void 0===a?"":a,u=e.cache,c=e.responseInterceptors,l=o.timeout,f=void 0===l?0:l,p=o.__umiRequestCoreType__,h=void 0===p?"normal":p,d=o.useCache,v=void 0!==d&&d,m=o.method,g=void 0===m?"get":m,y=o.params,b=o.ttl,_=o.validateCache,x=void 0===_?X:_;if("normal"!==h)return t&&Object({NODE_ENV:"production"}),n();var w=fetch;if(!w)throw new Error("Global fetch not exist!");var E,S="BROWSER"===j(),C=x(s,o)&&v&&S;if(C){var T=u.get({url:s,params:y,method:g});if(T)return T=T.clone(),T.useCache=!0,e.res=T,n()}return E=f>0?Promise.race([D(o),w(s,o),R(f,e.req)]):Promise.race([D(o),w(s,o)]),c.forEach((function(t){E=E.then((function(e){var n="function"===typeof e.clone?e.clone():e;return t(n,o)}))})),E.then((function(t){if(C&&200===t.status){var r=t.clone();r.useCache=!0,u.set({url:s,params:y,method:g},r,b)}return e.res=t,n()}))}function Y(t,e){var n;return e().then((function(){if(t){var e=t.res,r=void 0===e?{}:e,i=t.req,o=void 0===i?{}:i,a=o||{},s=a.options;s=void 0===s?{}:s;var u=s.responseType,c=void 0===u?"json":u,l=s.charset,f=void 0===l?"utf8":l,p=(s.getResponse,s.throwErrIfParseFail),h=void 0!==p&&p,d=s.parseResponse,v=void 0===d||d;if(v&&r&&r.clone){if(n="BROWSER"===j()?r.clone():r,n.useCache=r.useCache||!1,"gbk"===f)try{return r.blob().then(I).then((function(t){return L(t,!1,n,o)}))}catch(m){throw new P(n,m.message,null,o,"ParseError")}else if("json"===c)return r.text().then((function(t){return L(t,h,n,o)}));try{return r[c]()}catch(m){throw new P(n,"responseType not support",null,o,"ParseError")}}}})).then((function(e){if(t){t.res;var r=t.req,i=void 0===r?{}:r,o=i||{},a=o.options;a=void 0===a?{}:a;var s=a.getResponse,u=void 0!==s&&s;if(n){if(n.status>=200&&n.status<300)return u?void(t.res={data:e,response:n}):void(t.res=e);throw new P(n,"http error",e,i,"HttpError")}}}))["catch"]((function(e){if(e instanceof M||e instanceof P)throw e;var n=t.req,r=t.res;throw e.request=e.request||n,e.response=e.response||r,e.type=e.type||e.name,e.data=e.data||void 0,e}))}function K(t,e){if(!t)return e();var n=t.req;n=void 0===n?{}:n;var r=n.options,i=void 0===r?{}:r,a=i.method,s=void 0===a?"get":a;if(-1===["post","put","patch","delete"].indexOf(s.toLowerCase()))return e();var u=i.requestType,c=void 0===u?"json":u,l=i.data;if(l){var f=Object.prototype.toString.call(l);"[object Object]"===f||"[object Array]"===f?"json"===c?(i.headers=o({Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},i.headers),i.body=JSON.stringify(l)):"form"===c&&(i.headers=o({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},i.headers),i.body=G(l)):(i.headers=o({Accept:"application/json"},i.headers),i.body=l)}return t.req.options=i,e()}function J(t,e){var n,r;if(t)if(e)n=e(t);else if(z(t))n=t.toString();else if(F(t))r=[],V(t,(function(t){null===t||"undefined"===typeof t?r.push(t):r.push(U(t)?JSON.stringify(t):t)})),n=G(r);else{r={},V(t,(function(t,e){var n=t;null===t||"undefined"===typeof t?r[e]=t:B(t)?n=t.toISOString():F(t)?n=t:U(t)&&(n=JSON.stringify(t)),r[e]=n}));var i=G(r);n=i}return n}function Q(t,e){if(!t)return e();var n=t.req;n=void 0===n?{}:n;var r=n.options,i=void 0===r?{}:r,o=i.paramsSerializer,a=i.params,s=t.req;s=void 0===s?{}:s;var u=s.url,c=void 0===u?"":u;i.method=i.method?i.method.toUpperCase():"GET",i.credentials=i.credentials||"same-origin";var l=J(a,o);if(t.req.originUrl=c,l){var f=-1!==c.indexOf("?")?"&":"?";t.req.url="".concat(c).concat(f).concat(l)}return t.req.options=i,e()}var $=[K,Q,Y],tt=[Z];A.globalMiddlewares=$,A.defaultGlobalMiddlewaresLength=$.length,A.coreMiddlewares=tt,A.defaultCoreMiddlewaresLength=tt.length;var et=function(){function t(e){s(this,t),this.onion=new A([]),this.fetchIndex=0,this.mapCache=new k(e),this.initOptions=e,this.instanceRequestInterceptors=[],this.instanceResponseInterceptors=[]}return c(t,[{key:"use",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{global:!1,core:!1};return this.onion.use(t,e),this}},{key:"extendOptions",value:function(t){this.initOptions=H(this.initOptions,t),this.mapCache.extendOptions(t)}},{key:"dealRequestInterceptors",value:function(e){var n=function(t,n){return t.then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.req.url=t.url||e.req.url,e.req.options=t.options||e.req.options,n(e.req.url,e.req.options)}))},r=[].concat(x(t.requestInterceptors),x(this.instanceRequestInterceptors));return r.reduce(n,Promise.resolve()).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.req.url=t.url||e.req.url,e.req.options=t.options||e.req.options,Promise.resolve()}))}},{key:"request",value:function(e,n){var r=this,i=this.onion,a={req:{url:e,options:o(o({},n),{},{url:e})},res:null,cache:this.mapCache,responseInterceptors:[].concat(x(t.responseInterceptors),x(this.instanceResponseInterceptors))};if("string"!==typeof e)throw new Error("url MUST be a string");return new Promise((function(t,e){r.dealRequestInterceptors(a).then((function(){return i.execute(a)})).then((function(){t(a.res)}))["catch"]((function(n){var r=a.req.options.errorHandler;if(r)try{var i=r(n);t(i)}catch(o){e(o)}else e(n)}))}))}}],[{key:"requestUse",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{global:!0};if("function"!==typeof e)throw new TypeError("Interceptor must be function!");n.global?t.requestInterceptors.push(e):this.instanceRequestInterceptors.push(e)}},{key:"responseUse",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{global:!0};if("function"!==typeof e)throw new TypeError("Interceptor must be function!");n.global?t.responseInterceptors.push(e):this.instanceResponseInterceptors.push(e)}}]),t}();function nt(t){this.message=t}function rt(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;t((function(t){n.reason||(n.reason=new nt(t),e(n.reason))}))}function it(t){return!(!t||!t.__CANCEL__)}et.requestInterceptors=[W],et.responseInterceptors=[],nt.prototype.toString=function(){return this.message?"Cancel: ".concat(this.message):"Cancel"},nt.prototype.__CANCEL__=!0,rt.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},rt.source=function(){var t,e=new rt((function(e){t=e}));return{token:e,cancel:t}};var ot=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new et(t),n=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=H(e.initOptions,n);return e.request(t,r)};n.use=e.use.bind(e),n.fetchIndex=e.fetchIndex,n.interceptors={request:{use:et.requestUse.bind(e)},response:{use:et.responseUse.bind(e)}};var r=["get","post","delete","put","patch","head","options","rpc"];return r.forEach((function(t){n[t]=function(e,r){return n(e,o(o({},r),{},{method:t}))}})),n.Cancel=nt,n.CancelToken=rt,n.isCancel=it,n.extendOptions=e.extendOptions.bind(e),n.middlewares={instance:e.onion.middlewares,defaultInstance:e.onion.defaultMiddlewares,global:A.globalMiddlewares,core:A.coreMiddlewares},n},at=function(t){return ot(t)};ot({parseResponse:!1}),ot({})}).call(this,n("7vYp"))},eD14:function(t,e,n){var r=n("kPvK"),i=r("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[i]=!1,"/./"[t](e)}catch(r){}}return!1}},eI1U:function(t,e,n){"use strict";n.r(e);var r=n("xwgP"),i=n.n(r),o=n("OS9G"),a=n("oSqR"),s=n("Rsk4"),u=i.a.memo(s["default"]["docs-multi_select"].component),c=i.a.memo(s["default"]["\u6846\u9009\u5de5\u5177-demo"].component);e["default"]=t=>(i.a.useEffect((()=>{var e;null!==t&&void 0!==t&&null!==(e=t.location)&&void 0!==e&&e.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(t.location.hash.slice(1)))}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"markdown"},i.a.createElement("h2",{id:"\u6846\u9009\u5de5\u5177"},i.a.createElement(o["AnchorLink"],{to:"#\u6846\u9009\u5de5\u5177","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u6846\u9009\u5de5\u5177"),i.a.createElement("p",null,"\u6846\u9009\u5de5\u5177\u76ee\u524d\u53ea\u662f\u8f93\u51fa\u8d77\u59cb\u70b9\u548c\u7ec8\u6b62\u70b9\uff0c\u9009\u62e9\u54ea\u4e9b feature \u5c06\u7559\u7ed9\u4e1a\u52a1\u4fa7\u5b9e\u73b0"),i.a.createElement("h3",{id:"\u901a\u8fc7-ui-\u7ec4\u4ef6\u521d\u59cb\u5316"},i.a.createElement(o["AnchorLink"],{to:"#\u901a\u8fc7-ui-\u7ec4\u4ef6\u521d\u59cb\u5316","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u901a\u8fc7 UI \u7ec4\u4ef6\u521d\u59cb\u5316")),i.a.createElement(a["default"],s["default"]["docs-multi_select"].previewerProps,i.a.createElement(u,null)),i.a.createElement("div",{className:"markdown"},i.a.createElement("h3",{id:"\u7ed8\u5236\u7ec4\u4ef6\u521d\u59cb\u5316"},i.a.createElement(o["AnchorLink"],{to:"#\u7ed8\u5236\u7ec4\u4ef6\u521d\u59cb\u5316","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u7ed8\u5236\u7ec4\u4ef6\u521d\u59cb\u5316")),i.a.createElement(a["default"],s["default"]["\u6846\u9009\u5de5\u5177-demo"].previewerProps,i.a.createElement(c,null)))))},ebXT:function(t,e,n){var r=n("qFee"),i=n("LP2i"),o=n("mRf6"),a=n("7n4P"),s=n("5MHJ"),u=n("+Gi7"),c=n("lDzS"),l=n("lOrw"),f=1,p="[object Arguments]",h="[object Array]",d="[object Object]",v=Object.prototype,m=v.hasOwnProperty;function g(t,e,n,v,g,y){var b=u(t),_=u(e),x=b?h:s(t),w=_?h:s(e);x=x==p?d:x,w=w==p?d:w;var E=x==d,S=w==d,C=x==w;if(C&&c(t)){if(!c(e))return!1;b=!0,E=!1}if(C&&!E)return y||(y=new r),b||l(t)?i(t,e,n,v,g,y):o(t,e,x,n,v,g,y);if(!(n&f)){var T=E&&m.call(t,"__wrapped__"),O=S&&m.call(e,"__wrapped__");if(T||O){var A=T?t.value():t,k=O?e.value():e;return y||(y=new r),g(A,k,n,v,y)}}return!!C&&(y||(y=new r),a(t,e,n,v,g,y))}t.exports=g},ecNs:function(t,e,n){},eoOI:function(t,e,n){var r=n("bewy");function i(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}t.exports=i},esEm:function(t,e,n){var r=n("2JD6"),i=n("J7X1");i(r.JSON,"JSON",!0)},eusP:function(t,e,n){var r=n("YXa4");t.exports=function(t,e){var n=r(t);if(n%e)throw RangeError("Wrong offset");return n}},f5kL:function(t,e,n){"use strict";t.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"===typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;var r=42;for(e in t[e]=r,t)return!1;if("function"===typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var i=Object.getOwnPropertySymbols(t);if(1!==i.length||i[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(o.value!==r||!0!==o.enumerable)return!1}return!0}},fHjG:function(t,e,n){"use strict";var r=n("LlNi"),i=n("L44n"),o=n("gUnd");t.exports={formats:o,parse:i,stringify:r}},fI5W:function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports["default"]=t.exports,t.exports.__esModule=!0,n(e)}t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},fIC7:function(t,e,n){"use strict";var r,i,o,a,s;if("undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,c=null,l=function t(){if(null!==u)try{var n=e.unstable_now();u(!0,n),u=null}catch(r){throw setTimeout(t,0),r}},f=Date.now();e.unstable_now=function(){return Date.now()-f},r=function(t){null!==u?setTimeout(r,0,t):(u=t,setTimeout(l,0))},i=function(t,e){c=setTimeout(t,e)},o=function(){clearTimeout(c)},a=function(){return!1},s=e.unstable_forceFrameRate=function(){}}else{var p=window.performance,h=window.Date,d=window.setTimeout,v=window.clearTimeout;if("undefined"!==typeof console){var m=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof p&&"function"===typeof p.now)e.unstable_now=function(){return p.now()};else{var g=h.now();e.unstable_now=function(){return h.now()-g}}var y=!1,b=null,_=-1,x=5,w=0;a=function(){return e.unstable_now()>=w},s=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):x=0<t?Math.floor(1e3/t):5};var E=new MessageChannel,S=E.port2;E.port1.onmessage=function(){if(null!==b){var t=e.unstable_now();w=t+x;try{b(!0,t)?S.postMessage(null):(y=!1,b=null)}catch(n){throw S.postMessage(null),n}}else y=!1},r=function(t){b=t,y||(y=!0,S.postMessage(null))},i=function(t,n){_=d((function(){t(e.unstable_now())}),n)},o=function(){v(_),_=-1}}function C(t,e){var n=t.length;t.push(e);t:for(;;){var r=n-1>>>1,i=t[r];if(!(void 0!==i&&0<A(i,e)))break t;t[r]=e,t[n]=i,n=r}}function T(t){return t=t[0],void 0===t?null:t}function O(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length;r<i;){var o=2*(r+1)-1,a=t[o],s=o+1,u=t[s];if(void 0!==a&&0>A(a,n))void 0!==u&&0>A(u,a)?(t[r]=u,t[s]=n,r=s):(t[r]=a,t[o]=n,r=o);else{if(!(void 0!==u&&0>A(u,n)))break t;t[r]=u,t[s]=n,r=s}}}return e}return null}function A(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var k=[],M=[],P=1,I=null,L=3,R=!1,D=!1,N=!1;function j(t){for(var e=T(M);null!==e;){if(null===e.callback)O(M);else{if(!(e.startTime<=t))break;O(M),e.sortIndex=e.expirationTime,C(k,e)}e=T(M)}}function F(t){if(N=!1,j(t),!D)if(null!==T(k))D=!0,r(z);else{var e=T(M);null!==e&&i(F,e.startTime-t)}}function z(t,n){D=!1,N&&(N=!1,o()),R=!0;var r=L;try{for(j(n),I=T(k);null!==I&&(!(I.expirationTime>n)||t&&!a());){var s=I.callback;if(null!==s){I.callback=null,L=I.priorityLevel;var u=s(I.expirationTime<=n);n=e.unstable_now(),"function"===typeof u?I.callback=u:I===T(k)&&O(k),j(n)}else O(k);I=T(k)}if(null!==I)var c=!0;else{var l=T(M);null!==l&&i(F,l.startTime-n),c=!1}return c}finally{I=null,L=r,R=!1}}function B(t){switch(t){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var U=s;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){D||R||(D=!0,r(z))},e.unstable_getCurrentPriorityLevel=function(){return L},e.unstable_getFirstCallbackNode=function(){return T(k)},e.unstable_next=function(t){switch(L){case 1:case 2:case 3:var e=3;break;default:e=L}var n=L;L=e;try{return t()}finally{L=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=U,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=L;L=t;try{return e()}finally{L=n}},e.unstable_scheduleCallback=function(t,n,a){var s=e.unstable_now();if("object"===typeof a&&null!==a){var u=a.delay;u="number"===typeof u&&0<u?s+u:s,a="number"===typeof a.timeout?a.timeout:B(t)}else a=B(t),u=s;return a=u+a,t={id:P++,callback:n,priorityLevel:t,startTime:u,expirationTime:a,sortIndex:-1},u>s?(t.sortIndex=u,C(M,t),null===T(k)&&t===T(M)&&(N?o():N=!0,i(F,u-s))):(t.sortIndex=a,C(k,t),D||R||(D=!0,r(z))),t},e.unstable_shouldYield=function(){var t=e.unstable_now();j(t);var n=T(k);return n!==I&&null!==I&&null!==n&&null!==n.callback&&n.startTime<=t&&n.expirationTime<I.expirationTime||a()},e.unstable_wrapCallback=function(t){var e=L;return function(){var n=L;L=e;try{return t.apply(this,arguments)}finally{L=n}}}},"fK+4":function(t,e,n){"use strict";function r(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}}r(),t.exports=n("ochL")},fQKG:function(t,e,n){var r=n("qFee"),i=n("3FqU"),o=n("mXku"),a=n("Npd2"),s=n("E5vS"),u=n("rGlR"),c=n("TKkZ");function l(t,e,n,f,p){t!==e&&o(e,(function(o,u){if(p||(p=new r),s(o))a(t,e,u,n,l,f,p);else{var h=f?f(c(t,u),o,u+"",t,e,p):void 0;void 0===h&&(h=o),i(t,u,h)}}),u)}t.exports=l},fUu9:function(t,e,n){var r=n("tmP0"),i=n("ZvDv"),o=n("uSfk"),a=n("oX5j"),s=n("HR5z"),u=n("br1w"),c=200;function l(t,e,n){var l=-1,f=i,p=t.length,h=!0,d=[],v=d;if(n)h=!1,f=o;else if(p>=c){var m=e?null:s(t);if(m)return u(m);h=!1,f=a,v=new r}else v=e?[]:d;t:while(++l<p){var g=t[l],y=e?e(g):g;if(g=n||0!==g?g:0,h&&y===y){var b=v.length;while(b--)if(v[b]===y)continue t;e&&v.push(y),d.push(g)}else f(v,y,n)||(v!==d&&v.push(y),d.push(g))}return d}t.exports=l},fbKl:function(t,e,n){var r=n("bShA"),i=n("fotI"),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},fc2F:function(t,e,n){},fls1:function(t,e){function n(){return!1}t.exports=n},fotI:function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},fqR9:function(t,e,n){var r=n("Go1P");function i(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}t.exports=i},fqg0:function(t,e,n){var r=n("yBoc"),i=n("E5vS"),o="Expected a function";function a(t,e,n){var a=!0,s=!0;if("function"!=typeof t)throw new TypeError(o);return i(n)&&(a="leading"in n?!!n.leading:a,s="trailing"in n?!!n.trailing:s),r(t,e,{leading:a,maxWait:e,trailing:s})}t.exports=a},"g+uz":function(t,e,n){var r=n("HIsA"),i=n("VeQJ");r({target:"WeakMap",stat:!0},{of:i})},"g5+9":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolve=void 0;var r=n("196R"),i=n("2+60"),o=n("AUMs"),a=n("Rph/"),s=n("wfm+"),u=function(t,e,n){try{return n()}catch(i){throw o.isStackOverflowExeption(i)?new Error(r.CIRCULAR_DEPENDENCY_IN_FACTORY(t,e.toString())):i}},c=function t(e){return function(n){n.parentContext.setCurrentRequest(n);var o=n.bindings,c=n.childRequests,l=n.target&&n.target.isArray(),f=!n.parentRequest||!n.parentRequest.target||!n.target||!n.parentRequest.target.matchesArray(n.target.serviceIdentifier);if(l&&f)return c.map((function(n){var r=t(e);return r(n)}));var p=null;if(!n.target.isOptional()||0!==o.length){var h=o[0],d=h.scope===i.BindingScopeEnum.Singleton,v=h.scope===i.BindingScopeEnum.Request;if(d&&h.activated)return h.cache;if(v&&null!==e&&e.has(h.id))return e.get(h.id);if(h.type===i.BindingTypeEnum.ConstantValue)p=h.cache,h.activated=!0;else if(h.type===i.BindingTypeEnum.Function)p=h.cache,h.activated=!0;else if(h.type===i.BindingTypeEnum.Constructor)p=h.implementationType;else if(h.type===i.BindingTypeEnum.DynamicValue&&null!==h.dynamicValue)p=u("toDynamicValue",h.serviceIdentifier,(function(){return h.dynamicValue(n.parentContext)}));else if(h.type===i.BindingTypeEnum.Factory&&null!==h.factory)p=u("toFactory",h.serviceIdentifier,(function(){return h.factory(n.parentContext)}));else if(h.type===i.BindingTypeEnum.Provider&&null!==h.provider)p=u("toProvider",h.serviceIdentifier,(function(){return h.provider(n.parentContext)}));else{if(h.type!==i.BindingTypeEnum.Instance||null===h.implementationType){var m=a.getServiceIdentifierAsString(n.serviceIdentifier);throw new Error(r.INVALID_BINDING_TYPE+" "+m)}p=s.resolveInstance(h.implementationType,c,t(e))}return"function"===typeof h.onActivation&&(p=h.onActivation(n.parentContext,p)),d&&(h.cache=p,h.activated=!0),v&&null!==e&&!e.has(h.id)&&e.set(h.id,p),p}}};function l(t){var e=c(t.plan.rootRequest.requestScope);return e(t.plan.rootRequest)}e.resolve=l},gCNn:function(t,e,n){"use strict";n.r(e),n.d(e,"create",(function(){return i})),n.d(e,"clone",(function(){return o})),n.d(e,"length",(function(){return a})),n.d(e,"fromValues",(function(){return s})),n.d(e,"copy",(function(){return u})),n.d(e,"set",(function(){return c})),n.d(e,"add",(function(){return l})),n.d(e,"subtract",(function(){return f})),n.d(e,"multiply",(function(){return p})),n.d(e,"divide",(function(){return h})),n.d(e,"ceil",(function(){return d})),n.d(e,"floor",(function(){return v})),n.d(e,"min",(function(){return m})),n.d(e,"max",(function(){return g})),n.d(e,"round",(function(){return y})),n.d(e,"scale",(function(){return b})),n.d(e,"scaleAndAdd",(function(){return _})),n.d(e,"distance",(function(){return x})),n.d(e,"squaredDistance",(function(){return w})),n.d(e,"squaredLength",(function(){return E})),n.d(e,"negate",(function(){return S})),n.d(e,"inverse",(function(){return C})),n.d(e,"normalize",(function(){return T})),n.d(e,"dot",(function(){return O})),n.d(e,"cross",(function(){return A})),n.d(e,"lerp",(function(){return k})),n.d(e,"hermite",(function(){return M})),n.d(e,"bezier",(function(){return P})),n.d(e,"random",(function(){return I})),n.d(e,"transformMat4",(function(){return L})),n.d(e,"transformMat3",(function(){return R})),n.d(e,"transformQuat",(function(){return D})),n.d(e,"rotateX",(function(){return N})),n.d(e,"rotateY",(function(){return j})),n.d(e,"rotateZ",(function(){return F})),n.d(e,"angle",(function(){return z})),n.d(e,"zero",(function(){return B})),n.d(e,"str",(function(){return U})),n.d(e,"exactEquals",(function(){return V})),n.d(e,"equals",(function(){return q})),n.d(e,"sub",(function(){return G})),n.d(e,"mul",(function(){return H})),n.d(e,"div",(function(){return W})),n.d(e,"dist",(function(){return X})),n.d(e,"sqrDist",(function(){return Z})),n.d(e,"len",(function(){return Y})),n.d(e,"sqrLen",(function(){return K})),n.d(e,"forEach",(function(){return J}));var r=n("TaHB");function i(){var t=new r["a"](3);return r["a"]!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function o(t){var e=new r["a"](3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function a(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function s(t,e,n){var i=new r["a"](3);return i[0]=t,i[1]=e,i[2]=n,i}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function c(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function l(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function f(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function p(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function h(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function d(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function v(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function m(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function g(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function y(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function b(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function _(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function x(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function w(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function E(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function S(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function C(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function T(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function O(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function A(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}function k(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}function M(t,e,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,c=a*(o-1),l=a*(3-2*o);return t[0]=e[0]*s+n[0]*u+r[0]*c+i[0]*l,t[1]=e[1]*s+n[1]*u+r[1]*c+i[1]*l,t[2]=e[2]*s+n[2]*u+r[2]*c+i[2]*l,t}function P(t,e,n,r,i,o){var a=1-o,s=a*a,u=o*o,c=s*a,l=3*o*s,f=3*u*a,p=u*o;return t[0]=e[0]*c+n[0]*l+r[0]*f+i[0]*p,t[1]=e[1]*c+n[1]*l+r[1]*f+i[1]*p,t[2]=e[2]*c+n[2]*l+r[2]*f+i[2]*p,t}function I(t,e){e=e||1;var n=2*r["c"]()*Math.PI,i=2*r["c"]()-1,o=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=i*e,t}function L(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function R(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function D(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],l=i*c-o*u,f=o*s-r*c,p=r*u-i*s,h=i*p-o*f,d=o*l-r*p,v=r*f-i*l,m=2*a;return l*=m,f*=m,p*=m,h*=2,d*=2,v*=2,t[0]=s+l+h,t[1]=u+f+d,t[2]=c+p+v,t}function N(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function j(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function F(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function z(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2],u=Math.sqrt(n*n+r*r+i*i),c=Math.sqrt(o*o+a*a+s*s),l=u*c,f=l&&O(t,e)/l;return Math.acos(Math.min(Math.max(f,-1),1))}function B(t){return t[0]=0,t[1]=0,t[2]=0,t}function U(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function V(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function q(t,e){var n=t[0],i=t[1],o=t[2],a=e[0],s=e[1],u=e[2];return Math.abs(n-a)<=r["b"]*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=r["b"]*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-u)<=r["b"]*Math.max(1,Math.abs(o),Math.abs(u))}var G=f,H=p,W=h,X=x,Z=w,Y=a,K=E,J=function(){var t=i();return function(e,n,r,i,o,a){var s,u;for(n||(n=3),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}()},gFQz:function(t,e,n){"use strict";t.exports=i,t.exports["default"]=i;var r=1e20;function i(t,e,n,r,i,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer,s=a+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function o(t,e,n,i,o,a,s){a.fill(r,0,e*n),s.fill(0,0,e*n);for(var u=(e-i)/2,c=0;c<o;c++)for(var l=0;l<i;l++){var f=(c+u)*e+l+u,p=t.data[4*(c*i+l)+3]/255;if(1===p)a[f]=0,s[f]=r;else if(0===p)a[f]=r,s[f]=0;else{var h=Math.max(0,.5-p),d=Math.max(0,p-.5);a[f]=h*h,s[f]=d*d}}}function a(t,e,n,r,i,o,a){for(var s=0;s<e*n;s++){var u=Math.sqrt(r[s])-Math.sqrt(i[s]);t[s]=Math.round(255-255*(u/o+a))}}function s(t,e,n,r,i,o){for(var a=0;a<e;a++)u(t,a,e,n,r,i,o);for(var s=0;s<n;s++)u(t,s*e,1,e,r,i,o)}function u(t,e,n,i,o,a,s){var u,c,l,f;for(a[0]=0,s[0]=-r,s[1]=r,u=0;u<i;u++)o[u]=t[e+u*n];for(u=1,c=0,l=0;u<i;u++){do{f=a[c],l=(o[u]-o[f]+u*u-f*f)/(u-f)/2}while(l<=s[c]&&--c>-1);c++,a[c]=u,s[c]=l,s[c+1]=r}for(u=0,c=0;u<i;u++){while(s[c+1]<u)c++;f=a[c],t[e+u*n]=o[f]+(u-f)*(u-f)}}i.prototype._draw=function(t,e){var n,r,i,u,c,l,f,p,h,d=this.ctx.measureText(t),v=d.width,m=2*this.buffer;e&&this.useMetrics?(c=Math.floor(d.actualBoundingBoxAscent),p=this.buffer+Math.ceil(d.actualBoundingBoxAscent),l=this.buffer,f=this.buffer,r=Math.min(this.size,Math.ceil(d.actualBoundingBoxRight-d.actualBoundingBoxLeft)),u=Math.min(this.size-l,Math.ceil(d.actualBoundingBoxAscent+d.actualBoundingBoxDescent)),n=r+m,i=u+m,this.ctx.textBaseline="alphabetic"):(n=r=this.size,i=u=this.size,c=19*this.fontSize/24,l=f=0,p=this.middle,this.ctx.textBaseline="middle"),r&&u&&(this.ctx.clearRect(f,l,r,u),this.ctx.fillText(t,this.buffer,p),h=this.ctx.getImageData(f,l,r,u));var g=new Uint8ClampedArray(n*i);return o(h,n,i,r,u,this.gridOuter,this.gridInner),s(this.gridOuter,n,i,this.f,this.v,this.z),s(this.gridInner,n,i,this.f,this.v,this.z),a(g,n,i,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:g,metrics:{width:r,height:u,sdfWidth:n,sdfHeight:i,top:c,left:0,advance:v}}},i.prototype.draw=function(t){return this._draw(t,!1).data},i.prototype.drawWithMetrics=function(t){return this._draw(t,!0)}},gS7u:function(t,e,n){"use strict";var r=n("HIsA"),i=n("Hiyu"),o=n("kI7s"),a=n("UPu9"),s=n("bWCM"),u=n("2RC6"),c=n("OLna"),l=n("Ji6T"),f=n("D8FR"),p=n("twJ5"),h=p.set,d=p.getterFor("AggregateError"),v=function(t,e){var n=this;if(!(n instanceof v))return new v(t,e);a&&(n=a(new Error(e),o(n)));var r=[];return l(t,r.push,r),i?h(n,{errors:r,type:"AggregateError"}):n.errors=r,void 0!==e&&f(n,"message",String(e)),n};v.prototype=s(Error.prototype,{constructor:c(5,v),message:c(5,""),name:c(5,"AggregateError")}),i&&u.f(v.prototype,"errors",{get:function(){return d(this).errors},configurable:!0}),r({global:!0},{AggregateError:v})},gUF3:function(t,e,n){"use strict";n.r(e);var r=n("xwgP"),i=n.n(r),o=n("OS9G"),a=n("oSqR"),s=n("Rsk4"),u=i.a.memo(s["default"]["\u5706\u5f62\u5de5\u5177-demo"].component),c=i.a.memo(s["default"]["\u5706\u5f62\u5de5\u5177-demo-1"].component);e["default"]=t=>(i.a.useEffect((()=>{var e;null!==t&&void 0!==t&&null!==(e=t.location)&&void 0!==e&&e.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(t.location.hash.slice(1)))}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"markdown"},i.a.createElement("h3",{id:"\u5706\u5f62\u5de5\u5177"},i.a.createElement(o["AnchorLink"],{to:"#\u5706\u5f62\u5de5\u5177","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u5706\u5f62\u5de5\u5177"),i.a.createElement("h3",{id:"\u901a\u8fc7-ui-\u7ec4\u4ef6\u521d\u59cb\u5316"},i.a.createElement(o["AnchorLink"],{to:"#\u901a\u8fc7-ui-\u7ec4\u4ef6\u521d\u59cb\u5316","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u901a\u8fc7 UI \u7ec4\u4ef6\u521d\u59cb\u5316")),i.a.createElement(a["default"],s["default"]["\u5706\u5f62\u5de5\u5177-demo"].previewerProps,i.a.createElement(u,null)),i.a.createElement("div",{className:"markdown"},i.a.createElement("h3",{id:"\u7ed8\u5236\u7ec4\u4ef6\u521d\u59cb\u5316"},i.a.createElement(o["AnchorLink"],{to:"#\u7ed8\u5236\u7ec4\u4ef6\u521d\u59cb\u5316","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u7ed8\u5236\u7ec4\u4ef6\u521d\u59cb\u5316")),i.a.createElement(a["default"],s["default"]["\u5706\u5f62\u5de5\u5177-demo-1"].previewerProps,i.a.createElement(c,null)))))},gUnd:function(t,e,n){"use strict";var r=String.prototype.replace,i=/%20/g,o={RFC1738:"RFC1738",RFC3986:"RFC3986"};t.exports={default:o.RFC3986,formatters:{RFC1738:function(t){return r.call(t,i,"+")},RFC3986:function(t){return String(t)}},RFC1738:o.RFC1738,RFC3986:o.RFC3986}},gd5S:function(t,e,n){"use strict";var r=n("m5Te"),i=n("Oowp"),o=n("5EKB"),a=n("SrKn"),s=n("Rx/k"),u=n("Zwxo"),c=n("LXEX"),l=function(t){return null===t||void 0===t};function f(t){switch(t.arrayFormat){case"index":return function(e){return function(n,r){var i=n.length;return void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:[].concat(o(n),null===r?[[d(e,t),"[",i,"]"].join("")]:[[d(e,t),"[",d(i,t),"]=",d(r,t)].join("")])}};case"bracket":return function(e){return function(n,r){return void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:[].concat(o(n),null===r?[[d(e,t),"[]"].join("")]:[[d(e,t),"[]=",d(r,t)].join("")])}};case"comma":case"separator":return function(e){return function(n,r){return null===r||void 0===r||0===r.length?n:0===n.length?[[d(e,t),"=",d(r,t)].join("")]:[[n,d(r,t)].join(t.arrayFormatSeparator)]}};default:return function(e){return function(n,r){return void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:[].concat(o(n),null===r?[d(e,t)]:[[d(e,t),"=",d(r,t)].join("")])}}}}function p(t){var e;switch(t.arrayFormat){case"index":return function(t,n,r){e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===r[t]&&(r[t]={}),r[t][e[1]]=n):r[t]=n};case"bracket":return function(t,n,r){e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==r[t]?r[t]=[].concat(r[t],n):r[t]=[n]:r[t]=n};case"comma":case"separator":return function(e,n,r){var i="string"===typeof n&&n.includes(t.arrayFormatSeparator),o="string"===typeof n&&!i&&v(n,t).includes(t.arrayFormatSeparator);n=o?v(n,t):n;var a=i||o?n.split(t.arrayFormatSeparator).map((function(e){return v(e,t)})):null===n?n:v(n,t);r[e]=a};default:return function(t,e,n){void 0!==n[t]?n[t]=[].concat(n[t],e):n[t]=e}}}function h(t){if("string"!==typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function d(t,e){return e.encode?e.strict?a(t):encodeURIComponent(t):t}function v(t,e){return e.decode?s(t):t}function m(t){return Array.isArray(t)?t.sort():"object"===typeof t?m(Object.keys(t)).sort((function(t,e){return Number(t)-Number(e)})).map((function(e){return t[e]})):t}function g(t){var e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function y(t){var e="",n=t.indexOf("#");return-1!==n&&(e=t.slice(n)),e}function b(t){t=g(t);var e=t.indexOf("?");return-1===e?"":t.slice(e+1)}function _(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"===typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function x(t,e){e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e),h(e.arrayFormatSeparator);var n=p(e),o=Object.create(null);if("string"!==typeof t)return o;if(t=t.trim().replace(/^[?#&]/,""),!t)return o;var a,s=i(t.split("&"));try{for(s.s();!(a=s.n()).done;){var c=a.value;if(""!==c){var l=u(e.decode?c.replace(/\+/g," "):c,"="),f=r(l,2),d=f[0],g=f[1];g=void 0===g?null:["comma","separator"].includes(e.arrayFormat)?g:v(g,e),n(v(d,e),g,o)}}}catch(T){s.e(T)}finally{s.f()}for(var y=0,b=Object.keys(o);y<b.length;y++){var x=b[y],w=o[x];if("object"===typeof w&&null!==w)for(var E=0,S=Object.keys(w);E<S.length;E++){var C=S[E];w[C]=_(w[C],e)}else o[x]=_(w,e)}return!1===e.sort?o:(!0===e.sort?Object.keys(o).sort():Object.keys(o).sort(e.sort)).reduce((function(t,e){var n=o[e];return Boolean(n)&&"object"===typeof n&&!Array.isArray(n)?t[e]=m(n):t[e]=n,t}),Object.create(null))}e.extract=b,e.parse=x,e.stringify=function(t,e){if(!t)return"";e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e),h(e.arrayFormatSeparator);for(var n=function(n){return e.skipNull&&l(t[n])||e.skipEmptyString&&""===t[n]},r=f(e),i={},o=0,a=Object.keys(t);o<a.length;o++){var s=a[o];n(s)||(i[s]=t[s])}var u=Object.keys(i);return!1!==e.sort&&u.sort(e.sort),u.map((function(n){var i=t[n];return void 0===i?"":null===i?d(n,e):Array.isArray(i)?i.reduce(r(n),[]).join("&"):d(n,e)+"="+d(i,e)})).filter((function(t){return t.length>0})).join("&")},e.parseUrl=function(t,e){e=Object.assign({decode:!0},e);var n=u(t,"#"),i=r(n,2),o=i[0],a=i[1];return Object.assign({url:o.split("?")[0]||"",query:x(b(t),e)},e&&e.parseFragmentIdentifier&&a?{fragmentIdentifier:v(a,e)}:{})},e.stringifyUrl=function(t,n){n=Object.assign({encode:!0,strict:!0},n);var r=g(t.url).split("?")[0]||"",i=e.extract(t.url),o=e.parse(i,{sort:!1}),a=Object.assign(o,t.query),s=e.stringify(a,n);s&&(s="?".concat(s));var u=y(t.url);return t.fragmentIdentifier&&(u="#".concat(d(t.fragmentIdentifier,n))),"".concat(r).concat(s).concat(u)},e.pick=function(t,n,r){r=Object.assign({parseFragmentIdentifier:!0},r);var i=e.parseUrl(t,r),o=i.url,a=i.query,s=i.fragmentIdentifier;return e.stringifyUrl({url:o,query:c(a,n),fragmentIdentifier:s},r)},e.exclude=function(t,n,r){var i=Array.isArray(n)?function(t){return!n.includes(t)}:function(t,e){return!n(t,e)};return e.pick(t,i,r)}},ghbW:function(t,e,n){"use strict";var r=n("HIsA"),i=n("2JD6"),o=n("6Nbm"),a=n("GUTS"),s=n("qDpf"),u=n("Ji6T"),c=n("xOST"),l=n("pxmn"),f=n("7+LC"),p=n("9HG5"),h=n("J7X1"),d=n("cGOV");t.exports=function(t,e,n){var v=-1!==t.indexOf("Map"),m=-1!==t.indexOf("Weak"),g=v?"set":"add",y=i[t],b=y&&y.prototype,_=y,x={},w=function(t){var e=b[t];a(b,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(m&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return m&&!l(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(m&&!l(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(o(t,"function"!=typeof y||!(m||b.forEach&&!f((function(){(new y).entries().next()})))))_=n.getConstructor(e,t,v,g),s.REQUIRED=!0;else if(o(t,!0)){var E=new _,S=E[g](m?{}:-0,1)!=E,C=f((function(){E.has(1)})),T=p((function(t){new y(t)})),O=!m&&f((function(){var t=new y,e=5;while(e--)t[g](e,e);return!t.has(-0)}));T||(_=e((function(e,n){c(e,_,t);var r=d(new y,e,_);return void 0!=n&&u(n,r[g],r,v),r})),_.prototype=b,b.constructor=_),(C||O)&&(w("delete"),w("has"),v&&w("get")),(O||S)&&w(g),m&&b.clear&&delete b.clear}return x[t]=_,r({global:!0,forced:_!=y},x),h(_,t),m||n.setStrong(_,t,v),_}},gla0:function(t,e,n){var r=n("JqKL");r("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},gql7:function(t,e,n){"use strict";n.r(e);var r=n("xwgP"),i=n.n(r),o=n("OS9G"),a=n("W+6v");n("Rsk4");e["default"]=t=>(i.a.useEffect((()=>{var e;null!==t&&void 0!==t&&null!==(e=t.location)&&void 0!==e&&e.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(t.location.hash.slice(1)))}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"markdown"},i.a.createElement("h1",{id:"draw"},i.a.createElement(o["AnchorLink"],{to:"#draw","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"draw"),i.a.createElement("h1",{id:"api"},i.a.createElement(o["AnchorLink"],{to:"#api","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"API"),i.a.createElement("p",null,i.a.createElement(o["Link"],{to:"./api"},"API \u6587\u6863")),i.a.createElement("h2",{id:"getting-started"},i.a.createElement(o["AnchorLink"],{to:"#getting-started","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"Getting Started"),i.a.createElement("p",null,"Install dependencies,"),i.a.createElement(a["a"],{code:"$ npm i",lang:"bash"}),i.a.createElement("p",null,"Start the dev server,"),i.a.createElement(a["a"],{code:"$ npm start",lang:"bash"}),i.a.createElement("p",null,"Build documentation,"),i.a.createElement(a["a"],{code:"$ npm run docs:build",lang:"bash"}),i.a.createElement("p",null,"Build library via ",i.a.createElement("code",null,"father-build"),","),i.a.createElement(a["a"],{code:"$ npm run build",lang:"bash"}))))},gsbv:function(t,e,n){var r=n("HLqh"),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},h6PP:function(t,e,n){var r=n("HIsA"),i=180/Math.PI;r({target:"Math",stat:!0},{degrees:function(t){return t*i}})},hIhI:function(t,e,n){"use strict";var r=n("HIsA"),i=n("wQ+q").start,o=n("8iHL"),a=o("trimStart"),s=a?function(){return i(this)}:"".trimStart;r({target:"String",proto:!0,forced:a},{trimStart:s,trimLeft:s})},hK8i:function(t,e,n){"use strict";function r(){var t=n("xwgP");return r=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=e.getDemoUrl=e.getDemoRouteName=void 0;var i=o(n("+pX7"));function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){return f(t)||l(t,e)||u(t,e)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,e){if(t){if("string"===typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function f(t){if(Array.isArray(t))return t}function p(){return"BASEMENT"===Object({NODE_ENV:"production"}).PLATFORM_TYPE}var h=function(){return p()?"_demos":"~demos"};e.getDemoRouteName=h;var d=function(t,e){var n,r=window,i=r.location,o=i.href,s=i.origin,u=o.split(/#\//),c=a(u,2),l=c[0],f=c[1],d="string"===typeof f;return[d?"".concat(l,"#"):s,"".concat((null===(n=window)||void 0===n?void 0:n.routerBase)||"","/").replace(/\/\/$/,"/"),h(),"/",t,p()?"/index.html":"".concat(e?".html":"")].join("")};e.getDemoUrl=d;var v=function(t){var e=(0,r().useContext)(i["default"]),n=e.config,o=(0,r().useState)(""),s=a(o,2),u=s[0],c=s[1];return(0,r().useEffect)((function(){c(d(t,n.exportStatic&&n.exportStatic.htmlSuffix))}),[t,n]),u};e["default"]=v},hLNC:function(t,e,n){var r=n("2JD6"),i=n("wQ+q").trim,o=n("/Izz"),a=r.parseFloat,s=1/a(o+"-0")!==-1/0;t.exports=s?function(t){var e=i(String(t)),n=a(e);return 0===n&&"-"==e.charAt(0)?-0:n}:a},hMKI:function(t,e,n){var r=n("Hiyu"),i=n("2JD6"),o=n("6Nbm"),a=n("cGOV"),s=n("2RC6").f,u=n("szjD").f,c=n("ihzt"),l=n("ma2j"),f=n("Iu9s"),p=n("GUTS"),h=n("7+LC"),d=n("twJ5").set,v=n("QD/U"),m=n("kPvK"),g=m("match"),y=i.RegExp,b=y.prototype,_=/a/g,x=/a/g,w=new y(_)!==_,E=f.UNSUPPORTED_Y,S=r&&o("RegExp",!w||E||h((function(){return x[g]=!1,y(_)!=_||y(x)==x||"/a/i"!=y(_,"i")})));if(S){var C=function(t,e){var n,r=this instanceof C,i=c(t),o=void 0===e;if(!r&&i&&t.constructor===C&&o)return t;w?i&&!o&&(t=t.source):t instanceof C&&(o&&(e=l.call(t)),t=t.source),E&&(n=!!e&&e.indexOf("y")>-1,n&&(e=e.replace(/y/g,"")));var s=a(w?new y(t,e):y(t,e),r?this:b,C);return E&&n&&d(s,{sticky:n}),s},T=function(t){t in C||s(C,t,{configurable:!0,get:function(){return y[t]},set:function(e){y[t]=e}})},O=u(y),A=0;while(O.length>A)T(O[A++]);b.constructor=C,C.prototype=b,p(i,"RegExp",C)}v("RegExp")},"hQ/c":function(t,e){function n(t){return this.__data__.has(t)}t.exports=n},hQlM:function(t,e){function n(t){return function(e){return t(e)}}t.exports=n},hTab:function(t,e,n){var r;(function(i,o,a,s){"use strict";var u,c=["","webkit","Moz","MS","ms","o"],l=o.createElement("div"),f="function",p=Math.round,h=Math.abs,d=Date.now;function v(t,e,n){return setTimeout(w(t,n),e)}function m(t,e,n){return!!Array.isArray(t)&&(g(t,n[e],n),!0)}function g(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==s){r=0;while(r<t.length)e.call(n,t[r],r,t),r++}else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function y(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}u="function"!==typeof Object.assign?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var b=y((function(t,e,n){var r=Object.keys(e),i=0;while(i<r.length)(!n||n&&t[r[i]]===s)&&(t[r[i]]=e[r[i]]),i++;return t}),"extend","Use `assign`."),_=y((function(t,e){return b(t,e,!0)}),"merge","Use `assign`.");function x(t,e,n){var r,i=e.prototype;r=t.prototype=Object.create(i),r.constructor=t,r._super=i,n&&u(r,n)}function w(t,e){return function(){return t.apply(e,arguments)}}function E(t,e){return typeof t==f?t.apply(e&&e[0]||s,e):t}function S(t,e){return t===s?e:t}function C(t,e,n){g(k(e),(function(e){t.addEventListener(e,n,!1)}))}function T(t,e,n){g(k(e),(function(e){t.removeEventListener(e,n,!1)}))}function O(t,e){while(t){if(t==e)return!0;t=t.parentNode}return!1}function A(t,e){return t.indexOf(e)>-1}function k(t){return t.trim().split(/\s+/g)}function M(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);var r=0;while(r<t.length){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function P(t){return Array.prototype.slice.call(t,0)}function I(t,e,n){var r=[],i=[],o=0;while(o<t.length){var a=e?t[o][e]:t[o];M(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r}function L(t,e){var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;while(o<c.length){if(n=c[o],r=n?n+i:e,r in t)return r;o++}return s}var R=1;function D(){return R++}function N(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}var j=/mobile|tablet|ip(ad|hone|od)|android/i,F="ontouchstart"in i,z=L(i,"PointerEvent")!==s,B=F&&j.test(navigator.userAgent),U="touch",V="pen",q="mouse",G="kinect",H=25,W=1,X=2,Z=4,Y=8,K=1,J=2,Q=4,$=8,tt=16,et=J|Q,nt=$|tt,rt=et|nt,it=["x","y"],ot=["clientX","clientY"];function at(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){E(t.options.enable,[t])&&n.handler(e)},this.init()}function st(t){var e,n=t.options.inputClass;return e=n||(z?At:B?Nt:F?Bt:Et),new e(t,ut)}function ut(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=e&W&&r-i===0,a=e&(Z|Y)&&r-i===0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,ct(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function ct(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=pt(e)),i>1&&!n.firstMultiple?n.firstMultiple=pt(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,u=e.center=ht(r);e.timeStamp=d(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=gt(s,u),e.distance=mt(s,u),lt(n,e),e.offsetDirection=vt(e.deltaX,e.deltaY);var c=dt(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=h(c.x)>h(c.y)?c.x:c.y,e.scale=a?bt(a.pointers,r):1,e.rotation=a?yt(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,ft(n,e);var l=t.element;O(e.srcEvent.target,l)&&(l=e.srcEvent.target),e.target=l}function lt(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==W&&o.eventType!==Z||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}function ft(t,e){var n,r,i,o,a=t.lastInterval||e,u=e.timeStamp-a.timeStamp;if(e.eventType!=Y&&(u>H||a.velocity===s)){var c=e.deltaX-a.deltaX,l=e.deltaY-a.deltaY,f=dt(u,c,l);r=f.x,i=f.y,n=h(f.x)>h(f.y)?f.x:f.y,o=vt(c,l),t.lastInterval=e}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}function pt(t){var e=[],n=0;while(n<t.pointers.length)e[n]={clientX:p(t.pointers[n].clientX),clientY:p(t.pointers[n].clientY)},n++;return{timeStamp:d(),pointers:e,center:ht(e),deltaX:t.deltaX,deltaY:t.deltaY}}function ht(t){var e=t.length;if(1===e)return{x:p(t[0].clientX),y:p(t[0].clientY)};var n=0,r=0,i=0;while(i<e)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:p(n/e),y:p(r/e)}}function dt(t,e,n){return{x:e/t||0,y:n/t||0}}function vt(t,e){return t===e?K:h(t)>=h(e)?t<0?J:Q:e<0?$:tt}function mt(t,e,n){n||(n=it);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function gt(t,e,n){n||(n=it);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}function yt(t,e){return gt(e[1],e[0],ot)+gt(t[1],t[0],ot)}function bt(t,e){return mt(e[0],e[1],ot)/mt(t[0],t[1],ot)}at.prototype={handler:function(){},init:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(N(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(N(this.element),this.evWin,this.domHandler)}};var _t={mousedown:W,mousemove:X,mouseup:Z},xt="mousedown",wt="mousemove mouseup";function Et(){this.evEl=xt,this.evWin=wt,this.pressed=!1,at.apply(this,arguments)}x(Et,at,{handler:function(t){var e=_t[t.type];e&W&&0===t.button&&(this.pressed=!0),e&X&&1!==t.which&&(e=Z),this.pressed&&(e&Z&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:q,srcEvent:t}))}});var St={pointerdown:W,pointermove:X,pointerup:Z,pointercancel:Y,pointerout:Y},Ct={2:U,3:V,4:q,5:G},Tt="pointerdown",Ot="pointermove pointerup pointercancel";function At(){this.evEl=Tt,this.evWin=Ot,at.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(Tt="MSPointerDown",Ot="MSPointerMove MSPointerUp MSPointerCancel"),x(At,at,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=St[r],o=Ct[t.pointerType]||t.pointerType,a=o==U,s=M(e,t.pointerId,"pointerId");i&W&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):i&(Z|Y)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var kt={touchstart:W,touchmove:X,touchend:Z,touchcancel:Y},Mt="touchstart",Pt="touchstart touchmove touchend touchcancel";function It(){this.evTarget=Mt,this.evWin=Pt,this.started=!1,at.apply(this,arguments)}function Lt(t,e){var n=P(t.touches),r=P(t.changedTouches);return e&(Z|Y)&&(n=I(n.concat(r),"identifier",!0)),[n,r]}x(It,at,{handler:function(t){var e=kt[t.type];if(e===W&&(this.started=!0),this.started){var n=Lt.call(this,t,e);e&(Z|Y)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:U,srcEvent:t})}}});var Rt={touchstart:W,touchmove:X,touchend:Z,touchcancel:Y},Dt="touchstart touchmove touchend touchcancel";function Nt(){this.evTarget=Dt,this.targetIds={},at.apply(this,arguments)}function jt(t,e){var n=P(t.touches),r=this.targetIds;if(e&(W|X)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=P(t.changedTouches),s=[],u=this.target;if(o=n.filter((function(t){return O(t.target,u)})),e===W){i=0;while(i<o.length)r[o[i].identifier]=!0,i++}i=0;while(i<a.length)r[a[i].identifier]&&s.push(a[i]),e&(Z|Y)&&delete r[a[i].identifier],i++;return s.length?[I(o.concat(s),"identifier",!0),s]:void 0}x(Nt,at,{handler:function(t){var e=Rt[t.type],n=jt.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:U,srcEvent:t})}});var Ft=2500,zt=25;function Bt(){at.apply(this,arguments);var t=w(this.handler,this);this.touch=new Nt(this.manager,t),this.mouse=new Et(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Ut(t,e){t&W?(this.primaryTouch=e.changedPointers[0].identifier,Vt.call(this,e)):t&(Z|Y)&&Vt.call(this,e)}function Vt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches,i=function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)};setTimeout(i,Ft)}}function qt(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),a=Math.abs(n-i.y);if(o<=zt&&a<=zt)return!0}return!1}x(Bt,at,{handler:function(t,e,n){var r=n.pointerType==U,i=n.pointerType==q;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)Ut.call(this,e,n);else if(i&&qt.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Gt=L(l.style,"touchAction"),Ht=Gt!==s,Wt="compute",Xt="auto",Zt="manipulation",Yt="none",Kt="pan-x",Jt="pan-y",Qt=ee();function $t(t,e){this.manager=t,this.set(e)}function te(t){if(A(t,Yt))return Yt;var e=A(t,Kt),n=A(t,Jt);return e&&n?Yt:e||n?e?Kt:Jt:A(t,Zt)?Zt:Xt}function ee(){if(!Ht)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!e||i.CSS.supports("touch-action",n)})),t}$t.prototype={set:function(t){t==Wt&&(t=this.compute()),Ht&&this.manager.element.style&&Qt[t]&&(this.manager.element.style[Gt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return g(this.manager.recognizers,(function(e){E(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),te(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=A(r,Yt)&&!Qt[Yt],o=A(r,Jt)&&!Qt[Jt],a=A(r,Kt)&&!Qt[Kt];if(i){var s=1===t.pointers.length,u=t.distance<2,c=t.deltaTime<250;if(s&&u&&c)return}if(!a||!o)return i||o&&n&et||a&&n&nt?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var ne=1,re=2,ie=4,oe=8,ae=oe,se=16,ue=32;function ce(t){this.options=u({},this.defaults,t||{}),this.id=D(),this.manager=null,this.options.enable=S(this.options.enable,!0),this.state=ne,this.simultaneous={},this.requireFail=[]}function le(t){return t&se?"cancel":t&oe?"end":t&ie?"move":t&re?"start":""}function fe(t){return t==tt?"down":t==$?"up":t==J?"left":t==Q?"right":""}function pe(t,e){var n=e.manager;return n?n.get(t):t}function he(){ce.apply(this,arguments)}function de(){he.apply(this,arguments),this.pX=null,this.pY=null}function ve(){he.apply(this,arguments)}function me(){ce.apply(this,arguments),this._timer=null,this._input=null}function ge(){he.apply(this,arguments)}function ye(){he.apply(this,arguments)}function be(){ce.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function _e(t,e){return e=e||{},e.recognizers=S(e.recognizers,_e.defaults.preset),new Ee(t,e)}ce.prototype={defaults:{},set:function(t){return u(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(m(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=pe(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return m(t,"dropRecognizeWith",this)||(t=pe(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(m(t,"requireFailure",this))return this;var e=this.requireFail;return t=pe(t,this),-1===M(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(m(t,"dropRequireFailure",this))return this;t=pe(t,this);var e=M(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<oe&&r(e.options.event+le(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=oe&&r(e.options.event+le(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=ue},canEmit:function(){var t=0;while(t<this.requireFail.length){if(!(this.requireFail[t].state&(ue|ne)))return!1;t++}return!0},recognize:function(t){var e=u({},t);if(!E(this.options.enable,[this,e]))return this.reset(),void(this.state=ue);this.state&(ae|se|ue)&&(this.state=ne),this.state=this.process(e),this.state&(re|ie|oe|se)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},x(he,ce,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=e&(re|ie),i=this.attrTest(t);return r&&(n&Y||!i)?e|se:r||i?n&Z?e|oe:e&re?e|ie:re:ue}}),x(de,he,{defaults:{event:"pan",threshold:10,pointers:1,direction:rt},getTouchAction:function(){var t=this.options.direction,e=[];return t&et&&e.push(Jt),t&nt&&e.push(Kt),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(e.direction&et?(i=0===o?K:o<0?J:Q,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?K:a<0?$:tt,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return he.prototype.attrTest.call(this,t)&&(this.state&re||!(this.state&re)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=fe(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),x(ve,he,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Yt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&re)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),x(me,ce,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Xt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(Z|Y)&&!i)this.reset();else if(t.eventType&W)this.reset(),this._timer=v((function(){this.state=ae,this.tryEmit()}),e.time,this);else if(t.eventType&Z)return ae;return ue},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===ae&&(t&&t.eventType&Z?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}}),x(ge,he,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Yt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&re)}}),x(ye,he,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:et|nt,pointers:1},getTouchAction:function(){return de.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(et|nt)?e=t.overallVelocity:n&et?e=t.overallVelocityX:n&nt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&h(e)>this.options.velocity&&t.eventType&Z},emit:function(t){var e=fe(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),x(be,ce,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Zt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&W&&0===this.count)return this.failTimeout();if(r&&i&&n){if(t.eventType!=Z)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||mt(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t;var s=this.count%e.taps;if(0===s)return this.hasRequireFailures()?(this._timer=v((function(){this.state=ae,this.tryEmit()}),e.interval,this),re):ae}return ue},failTimeout:function(){return this._timer=v((function(){this.state=ue}),this.options.interval,this),ue},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ae&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),_e.VERSION="2.0.7",_e.defaults={domEvents:!1,touchAction:Wt,enable:!0,inputTarget:null,inputClass:null,preset:[[ge,{enable:!1}],[ve,{enable:!1},["rotate"]],[ye,{direction:et}],[de,{direction:et},["swipe"]],[be],[be,{event:"doubletap",taps:2},["tap"]],[me]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var xe=1,we=2;function Ee(t,e){this.options=u({},_e.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=st(this),this.touchAction=new $t(this,this.options.touchAction),Se(this,!0),g(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Se(t,e){var n,r=t.element;r.style&&(g(t.options.cssProps,(function(i,o){n=L(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}function Ce(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}Ee.prototype={set:function(t){return u(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?we:xe},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&i.state&ae)&&(i=e.curRecognizer=null);var o=0;while(o<r.length)n=r[o],e.stopped===we||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&n.state&(re|ie|oe)&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof ce)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(m(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(m(t,"remove",this))return this;if(t=this.get(t),t){var e=this.recognizers,n=M(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==s&&e!==s){var n=this.handlers;return g(k(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==s){var n=this.handlers;return g(k(t),(function(t){e?n[t]&&n[t].splice(M(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&Ce(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};var r=0;while(r<n.length)n[r](e),r++}},destroy:function(){this.element&&Se(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(_e,{INPUT_START:W,INPUT_MOVE:X,INPUT_END:Z,INPUT_CANCEL:Y,STATE_POSSIBLE:ne,STATE_BEGAN:re,STATE_CHANGED:ie,STATE_ENDED:oe,STATE_RECOGNIZED:ae,STATE_CANCELLED:se,STATE_FAILED:ue,DIRECTION_NONE:K,DIRECTION_LEFT:J,DIRECTION_RIGHT:Q,DIRECTION_UP:$,DIRECTION_DOWN:tt,DIRECTION_HORIZONTAL:et,DIRECTION_VERTICAL:nt,DIRECTION_ALL:rt,Manager:Ee,Input:at,TouchAction:$t,TouchInput:Nt,MouseInput:Et,PointerEventInput:At,TouchMouseInput:Bt,SingleTouchInput:It,Recognizer:ce,AttrRecognizer:he,Tap:be,Pan:de,Swipe:ye,Pinch:ve,Rotate:ge,Press:me,on:C,off:T,each:g,merge:_,extend:b,assign:u,inherit:x,bindFn:w,prefixed:L});var Te="undefined"!==typeof i?i:"undefined"!==typeof self?self:{};Te.Hammer=_e,r=function(){return _e}.call(e,n,e,t),r===s||(t.exports=r)})(window,document)},hToq:function(t,e,n){var r=n("l6nO"),i=n("4jjE"),o=n("nRm0"),a=n("4A8a"),s=n("sCLo"),u="[object Boolean]",c="[object Date]",l="[object Map]",f="[object Number]",p="[object RegExp]",h="[object Set]",d="[object String]",v="[object Symbol]",m="[object ArrayBuffer]",g="[object DataView]",y="[object Float32Array]",b="[object Float64Array]",_="[object Int8Array]",x="[object Int16Array]",w="[object Int32Array]",E="[object Uint8Array]",S="[object Uint8ClampedArray]",C="[object Uint16Array]",T="[object Uint32Array]";function O(t,e,n){var O=t.constructor;switch(e){case m:return r(t);case u:case c:return new O(+t);case g:return i(t,n);case y:case b:case _:case x:case w:case E:case S:case C:case T:return s(t,n);case l:return new O;case f:case d:return new O(t);case p:return o(t);case h:return new O;case v:return a(t)}}t.exports=O},hVxs:function(t,e,n){"use strict";var r="undefined"!==typeof Symbol&&Symbol,i=n("f5kL");t.exports=function(){return"function"===typeof r&&("function"===typeof Symbol&&("symbol"===typeof r("foo")&&("symbol"===typeof Symbol("bar")&&i())))}},hXyk:function(t,e,n){var r=n("pxmn");t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},hbjN:function(t,e,n){var r=n("6aLv")["default"],i=n("cZYw");function o(t,e){if(e&&("object"===r(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return i(t)}t.exports=o,t.exports["default"]=t.exports,t.exports.__esModule=!0},hjyS:function(t,e){function n(t){if(Array.isArray(t))return t}t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},hkks:function(t,e,n){"use strict";var r=n("HWpy");e["a"]=function(t,e,n){Object(r["a"])(t,"[antd: ".concat(e,"] ").concat(n))}},horb:function(t,e,n){"use strict";var r=n("HIsA"),i=n("O4tt"),o=n("NVMI"),a=n("2I03"),s=n("DDwO"),u=n("HKEF");r({target:"Array",proto:!0},{flatMap:function(t){var e,n=o(this),r=a(n.length);return s(t),e=u(n,0),e.length=i(e,n,n,r,0,1,t,arguments.length>1?arguments[1]:void 0),e}})},"hv/N":function(t,e,n){var r=n("JY8B");r("flatMap")},iKoX:function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("hXyk"),a=n("DDwO"),s=n("wKMT"),u=n("Ji6T");r({target:"Set",proto:!0,real:!0,forced:i},{reduce:function(t){var e=o(this),n=s(e),r=arguments.length<2,i=r?void 0:arguments[1];if(a(t),u(n,(function(n){r?(r=!1,i=n):i=t(i,n,n,e)}),void 0,!1,!0),r)throw TypeError("Reduce of empty set with no initial value");return i}})},iY6v:function(t,e,n){"use strict";var r=n("HIsA"),i=n("iYBb").start,o=n("c8OV");r({target:"String",proto:!0,forced:o},{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},iYBb:function(t,e,n){var r=n("2I03"),i=n("x+a2"),o=n("JzK+"),a=Math.ceil,s=function(t){return function(e,n,s){var u,c,l=String(o(e)),f=l.length,p=void 0===s?" ":String(s),h=r(n);return h<=f||""==p?l:(u=h-f,c=i.call(p,a(u/p.length)),c.length>u&&(c=c.slice(0,u)),t?l+c:c+l)}};t.exports={start:s(!1),end:s(!0)}},icJ8:function(t,e,n){var r=n("G4R5"),i=n("stff"),o=n("bShA"),a=o("metadata"),s=a.store||(a.store=new i),u=function(t,e,n){var i=s.get(t);if(!i){if(!n)return;s.set(t,i=new r)}var o=i.get(e);if(!o){if(!n)return;i.set(e,o=new r)}return o},c=function(t,e,n){var r=u(e,n,!1);return void 0!==r&&r.has(t)},l=function(t,e,n){var r=u(e,n,!1);return void 0===r?void 0:r.get(t)},f=function(t,e,n,r){u(n,r,!0).set(t,e)},p=function(t,e){var n=u(t,e,!1),r=[];return n&&n.forEach((function(t,e){r.push(e)})),r},h=function(t){return void 0===t||"symbol"==typeof t?t:String(t)};t.exports={store:s,getMap:u,has:c,get:l,set:f,keys:p,toKey:h}},idQS:function(t,e,n){var r=n("bVFb");r("toStringTag")},ihzt:function(t,e,n){var r=n("pxmn"),i=n("IRht"),o=n("kPvK"),a=o("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==i(t))}},iqln:function(t,e,n){var r=n("HIsA"),i=n("q0Qw"),o=n("bXon"),a=n("bWCM"),s=function(){var t=o("Object","freeze");return t?t(a(null)):a(null)};r({global:!0},{compositeKey:function(){return i.apply(Object,arguments).get("object",s)}})},jAXh:function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("hXyk"),a=n("40mc"),s=n("YjHi"),u=n("Ji6T");r({target:"Map",proto:!0,real:!0,forced:i},{findKey:function(t){var e=o(this),n=s(e),r=a(t,arguments.length>1?arguments[1]:void 0,3);return u(n,(function(t,n){if(r(n,t,e))return u.stop(t)}),void 0,!0,!0).result}})},jCe1:function(t,e,n){var r=n("7vUd");function i(t,e){if(null==t)return{};var n,i,o=r(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}t.exports=i,t.exports["default"]=t.exports,t.exports.__esModule=!0},jJQI:function(t,e,n){"use strict";n.r(e),n.d(e,"create",(function(){return i})),n.d(e,"clone",(function(){return o})),n.d(e,"copy",(function(){return a})),n.d(e,"fromValues",(function(){return s})),n.d(e,"set",(function(){return u})),n.d(e,"identity",(function(){return c})),n.d(e,"transpose",(function(){return l})),n.d(e,"invert",(function(){return f})),n.d(e,"adjoint",(function(){return p})),n.d(e,"determinant",(function(){return h})),n.d(e,"multiply",(function(){return d})),n.d(e,"translate",(function(){return v})),n.d(e,"scale",(function(){return m})),n.d(e,"rotate",(function(){return g})),n.d(e,"rotateX",(function(){return y})),n.d(e,"rotateY",(function(){return b})),n.d(e,"rotateZ",(function(){return _})),n.d(e,"fromTranslation",(function(){return x})),n.d(e,"fromScaling",(function(){return w})),n.d(e,"fromRotation",(function(){return E})),n.d(e,"fromXRotation",(function(){return S})),n.d(e,"fromYRotation",(function(){return C})),n.d(e,"fromZRotation",(function(){return T})),n.d(e,"fromRotationTranslation",(function(){return O})),n.d(e,"fromQuat2",(function(){return A})),n.d(e,"getTranslation",(function(){return k})),n.d(e,"getScaling",(function(){return M})),n.d(e,"getRotation",(function(){return P})),n.d(e,"fromRotationTranslationScale",(function(){return I})),n.d(e,"fromRotationTranslationScaleOrigin",(function(){return L})),n.d(e,"fromQuat",(function(){return R})),n.d(e,"frustum",(function(){return D})),n.d(e,"perspective",(function(){return N})),n.d(e,"perspectiveFromFieldOfView",(function(){return j})),n.d(e,"ortho",(function(){return F})),n.d(e,"lookAt",(function(){return z})),n.d(e,"targetTo",(function(){return B})),n.d(e,"str",(function(){return U})),n.d(e,"frob",(function(){return V})),n.d(e,"add",(function(){return q})),n.d(e,"subtract",(function(){return G})),n.d(e,"multiplyScalar",(function(){return H})),n.d(e,"multiplyScalarAndAdd",(function(){return W})),n.d(e,"exactEquals",(function(){return X})),n.d(e,"equals",(function(){return Z})),n.d(e,"mul",(function(){return Y})),n.d(e,"sub",(function(){return K}));var r=n("TaHB");function i(){var t=new r["a"](16);return r["a"]!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function o(t){var e=new r["a"](16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function s(t,e,n,i,o,a,s,u,c,l,f,p,h,d,v,m){var g=new r["a"](16);return g[0]=t,g[1]=e,g[2]=n,g[3]=i,g[4]=o,g[5]=a,g[6]=s,g[7]=u,g[8]=c,g[9]=l,g[10]=f,g[11]=p,g[12]=h,g[13]=d,g[14]=v,g[15]=m,g}function u(t,e,n,r,i,o,a,s,u,c,l,f,p,h,d,v,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t[9]=l,t[10]=f,t[11]=p,t[12]=h,t[13]=d,t[14]=v,t[15]=m,t}function c(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function l(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function f(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],p=e[10],h=e[11],d=e[12],v=e[13],m=e[14],g=e[15],y=n*s-r*a,b=n*u-i*a,_=n*c-o*a,x=r*u-i*s,w=r*c-o*s,E=i*c-o*u,S=l*v-f*d,C=l*m-p*d,T=l*g-h*d,O=f*m-p*v,A=f*g-h*v,k=p*g-h*m,M=y*k-b*A+_*O+x*T-w*C+E*S;return M?(M=1/M,t[0]=(s*k-u*A+c*O)*M,t[1]=(i*A-r*k-o*O)*M,t[2]=(v*E-m*w+g*x)*M,t[3]=(p*w-f*E-h*x)*M,t[4]=(u*T-a*k-c*C)*M,t[5]=(n*k-i*T+o*C)*M,t[6]=(m*_-d*E-g*b)*M,t[7]=(l*E-p*_+h*b)*M,t[8]=(a*A-s*T+c*S)*M,t[9]=(r*T-n*A-o*S)*M,t[10]=(d*w-v*_+g*y)*M,t[11]=(f*_-l*w-h*y)*M,t[12]=(s*C-a*O-u*S)*M,t[13]=(n*O-r*C+i*S)*M,t[14]=(v*b-d*x-m*y)*M,t[15]=(l*x-f*b+p*y)*M,t):null}function p(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],p=e[10],h=e[11],d=e[12],v=e[13],m=e[14],g=e[15];return t[0]=s*(p*g-h*m)-f*(u*g-c*m)+v*(u*h-c*p),t[1]=-(r*(p*g-h*m)-f*(i*g-o*m)+v*(i*h-o*p)),t[2]=r*(u*g-c*m)-s*(i*g-o*m)+v*(i*c-o*u),t[3]=-(r*(u*h-c*p)-s*(i*h-o*p)+f*(i*c-o*u)),t[4]=-(a*(p*g-h*m)-l*(u*g-c*m)+d*(u*h-c*p)),t[5]=n*(p*g-h*m)-l*(i*g-o*m)+d*(i*h-o*p),t[6]=-(n*(u*g-c*m)-a*(i*g-o*m)+d*(i*c-o*u)),t[7]=n*(u*h-c*p)-a*(i*h-o*p)+l*(i*c-o*u),t[8]=a*(f*g-h*v)-l*(s*g-c*v)+d*(s*h-c*f),t[9]=-(n*(f*g-h*v)-l*(r*g-o*v)+d*(r*h-o*f)),t[10]=n*(s*g-c*v)-a*(r*g-o*v)+d*(r*c-o*s),t[11]=-(n*(s*h-c*f)-a*(r*h-o*f)+l*(r*c-o*s)),t[12]=-(a*(f*m-p*v)-l*(s*m-u*v)+d*(s*p-u*f)),t[13]=n*(f*m-p*v)-l*(r*m-i*v)+d*(r*p-i*f),t[14]=-(n*(s*m-u*v)-a*(r*m-i*v)+d*(r*u-i*s)),t[15]=n*(s*p-u*f)-a*(r*p-i*f)+l*(r*u-i*s),t}function h(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],p=t[11],h=t[12],d=t[13],v=t[14],m=t[15],g=e*a-n*o,y=e*s-r*o,b=e*u-i*o,_=n*s-r*a,x=n*u-i*a,w=r*u-i*s,E=c*d-l*h,S=c*v-f*h,C=c*m-p*h,T=l*v-f*d,O=l*m-p*d,A=f*m-p*v;return g*A-y*O+b*T+_*C-x*S+w*E}function d(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],p=e[9],h=e[10],d=e[11],v=e[12],m=e[13],g=e[14],y=e[15],b=n[0],_=n[1],x=n[2],w=n[3];return t[0]=b*r+_*s+x*f+w*v,t[1]=b*i+_*u+x*p+w*m,t[2]=b*o+_*c+x*h+w*g,t[3]=b*a+_*l+x*d+w*y,b=n[4],_=n[5],x=n[6],w=n[7],t[4]=b*r+_*s+x*f+w*v,t[5]=b*i+_*u+x*p+w*m,t[6]=b*o+_*c+x*h+w*g,t[7]=b*a+_*l+x*d+w*y,b=n[8],_=n[9],x=n[10],w=n[11],t[8]=b*r+_*s+x*f+w*v,t[9]=b*i+_*u+x*p+w*m,t[10]=b*o+_*c+x*h+w*g,t[11]=b*a+_*l+x*d+w*y,b=n[12],_=n[13],x=n[14],w=n[15],t[12]=b*r+_*s+x*f+w*v,t[13]=b*i+_*u+x*p+w*m,t[14]=b*o+_*c+x*h+w*g,t[15]=b*a+_*l+x*d+w*y,t}function v(t,e,n){var r,i,o,a,s,u,c,l,f,p,h,d,v=n[0],m=n[1],g=n[2];return e===t?(t[12]=e[0]*v+e[4]*m+e[8]*g+e[12],t[13]=e[1]*v+e[5]*m+e[9]*g+e[13],t[14]=e[2]*v+e[6]*m+e[10]*g+e[14],t[15]=e[3]*v+e[7]*m+e[11]*g+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],p=e[9],h=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t[9]=p,t[10]=h,t[11]=d,t[12]=r*v+s*m+f*g+e[12],t[13]=i*v+u*m+p*g+e[13],t[14]=o*v+c*m+h*g+e[14],t[15]=a*v+l*m+d*g+e[15]),t}function m(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function g(t,e,n,i){var o,a,s,u,c,l,f,p,h,d,v,m,g,y,b,_,x,w,E,S,C,T,O,A,k=i[0],M=i[1],P=i[2],I=Math.hypot(k,M,P);return I<r["b"]?null:(I=1/I,k*=I,M*=I,P*=I,o=Math.sin(n),a=Math.cos(n),s=1-a,u=e[0],c=e[1],l=e[2],f=e[3],p=e[4],h=e[5],d=e[6],v=e[7],m=e[8],g=e[9],y=e[10],b=e[11],_=k*k*s+a,x=M*k*s+P*o,w=P*k*s-M*o,E=k*M*s-P*o,S=M*M*s+a,C=P*M*s+k*o,T=k*P*s+M*o,O=M*P*s-k*o,A=P*P*s+a,t[0]=u*_+p*x+m*w,t[1]=c*_+h*x+g*w,t[2]=l*_+d*x+y*w,t[3]=f*_+v*x+b*w,t[4]=u*E+p*S+m*C,t[5]=c*E+h*S+g*C,t[6]=l*E+d*S+y*C,t[7]=f*E+v*S+b*C,t[8]=u*T+p*O+m*A,t[9]=c*T+h*O+g*A,t[10]=l*T+d*O+y*A,t[11]=f*T+v*O+b*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function y(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+l*r,t[6]=s*i+f*r,t[7]=u*i+p*r,t[8]=c*i-o*r,t[9]=l*i-a*r,t[10]=f*i-s*r,t[11]=p*i-u*r,t}function b(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[8],l=e[9],f=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=a*i-l*r,t[2]=s*i-f*r,t[3]=u*i-p*r,t[8]=o*r+c*i,t[9]=a*r+l*i,t[10]=s*r+f*i,t[11]=u*r+p*i,t}function _(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],l=e[5],f=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+l*r,t[2]=s*i+f*r,t[3]=u*i+p*r,t[4]=c*i-o*r,t[5]=l*i-a*r,t[6]=f*i-s*r,t[7]=p*i-u*r,t}function x(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function w(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function E(t,e,n){var i,o,a,s=n[0],u=n[1],c=n[2],l=Math.hypot(s,u,c);return l<r["b"]?null:(l=1/l,s*=l,u*=l,c*=l,i=Math.sin(e),o=Math.cos(e),a=1-o,t[0]=s*s*a+o,t[1]=u*s*a+c*i,t[2]=c*s*a-u*i,t[3]=0,t[4]=s*u*a-c*i,t[5]=u*u*a+o,t[6]=c*u*a+s*i,t[7]=0,t[8]=s*c*a+u*i,t[9]=u*c*a-s*i,t[10]=c*c*a+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function S(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function C(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function T(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function O(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,u=i+i,c=o+o,l=r*s,f=r*u,p=r*c,h=i*u,d=i*c,v=o*c,m=a*s,g=a*u,y=a*c;return t[0]=1-(h+v),t[1]=f+y,t[2]=p-g,t[3]=0,t[4]=f-y,t[5]=1-(l+v),t[6]=d+m,t[7]=0,t[8]=p+g,t[9]=d-m,t[10]=1-(l+h),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function A(t,e){var n=new r["a"](3),i=-e[0],o=-e[1],a=-e[2],s=e[3],u=e[4],c=e[5],l=e[6],f=e[7],p=i*i+o*o+a*a+s*s;return p>0?(n[0]=2*(u*s+f*i+c*a-l*o)/p,n[1]=2*(c*s+f*o+l*i-u*a)/p,n[2]=2*(l*s+f*a+u*o-c*i)/p):(n[0]=2*(u*s+f*i+c*a-l*o),n[1]=2*(c*s+f*o+l*i-u*a),n[2]=2*(l*s+f*a+u*o-c*i)),O(t,e,n),t}function k(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function M(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(o,a,s),t[2]=Math.hypot(u,c,l),t}function P(t,e){var n=new r["a"](3);M(n,e);var i=1/n[0],o=1/n[1],a=1/n[2],s=e[0]*i,u=e[1]*o,c=e[2]*a,l=e[4]*i,f=e[5]*o,p=e[6]*a,h=e[8]*i,d=e[9]*o,v=e[10]*a,m=s+f+v,g=0;return m>0?(g=2*Math.sqrt(m+1),t[3]=.25*g,t[0]=(p-d)/g,t[1]=(h-c)/g,t[2]=(u-l)/g):s>f&&s>v?(g=2*Math.sqrt(1+s-f-v),t[3]=(p-d)/g,t[0]=.25*g,t[1]=(u+l)/g,t[2]=(h+c)/g):f>v?(g=2*Math.sqrt(1+f-s-v),t[3]=(h-c)/g,t[0]=(u+l)/g,t[1]=.25*g,t[2]=(p+d)/g):(g=2*Math.sqrt(1+v-s-f),t[3]=(u-l)/g,t[0]=(h+c)/g,t[1]=(p+d)/g,t[2]=.25*g),t}function I(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,c=o+o,l=a+a,f=i*u,p=i*c,h=i*l,d=o*c,v=o*l,m=a*l,g=s*u,y=s*c,b=s*l,_=r[0],x=r[1],w=r[2];return t[0]=(1-(d+m))*_,t[1]=(p+b)*_,t[2]=(h-y)*_,t[3]=0,t[4]=(p-b)*x,t[5]=(1-(f+m))*x,t[6]=(v+g)*x,t[7]=0,t[8]=(h+y)*w,t[9]=(v-g)*w,t[10]=(1-(f+d))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function L(t,e,n,r,i){var o=e[0],a=e[1],s=e[2],u=e[3],c=o+o,l=a+a,f=s+s,p=o*c,h=o*l,d=o*f,v=a*l,m=a*f,g=s*f,y=u*c,b=u*l,_=u*f,x=r[0],w=r[1],E=r[2],S=i[0],C=i[1],T=i[2],O=(1-(v+g))*x,A=(h+_)*x,k=(d-b)*x,M=(h-_)*w,P=(1-(p+g))*w,I=(m+y)*w,L=(d+b)*E,R=(m-y)*E,D=(1-(p+v))*E;return t[0]=O,t[1]=A,t[2]=k,t[3]=0,t[4]=M,t[5]=P,t[6]=I,t[7]=0,t[8]=L,t[9]=R,t[10]=D,t[11]=0,t[12]=n[0]+S-(O*S+M*C+L*T),t[13]=n[1]+C-(A*S+P*C+R*T),t[14]=n[2]+T-(k*S+I*C+D*T),t[15]=1,t}function R(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,f=r*s,p=i*a,h=i*s,d=i*u,v=o*a,m=o*s,g=o*u;return t[0]=1-f-d,t[1]=l+g,t[2]=p-m,t[3]=0,t[4]=l-g,t[5]=1-c-d,t[6]=h+v,t[7]=0,t[8]=p+m,t[9]=h-v,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function D(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t}function N(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}function j(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function F(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t}function z(t,e,n,i){var o,a,s,u,l,f,p,h,d,v,m=e[0],g=e[1],y=e[2],b=i[0],_=i[1],x=i[2],w=n[0],E=n[1],S=n[2];return Math.abs(m-w)<r["b"]&&Math.abs(g-E)<r["b"]&&Math.abs(y-S)<r["b"]?c(t):(p=m-w,h=g-E,d=y-S,v=1/Math.hypot(p,h,d),p*=v,h*=v,d*=v,o=_*d-x*h,a=x*p-b*d,s=b*h-_*p,v=Math.hypot(o,a,s),v?(v=1/v,o*=v,a*=v,s*=v):(o=0,a=0,s=0),u=h*s-d*a,l=d*o-p*s,f=p*a-h*o,v=Math.hypot(u,l,f),v?(v=1/v,u*=v,l*=v,f*=v):(u=0,l=0,f=0),t[0]=o,t[1]=u,t[2]=p,t[3]=0,t[4]=a,t[5]=l,t[6]=h,t[7]=0,t[8]=s,t[9]=f,t[10]=d,t[11]=0,t[12]=-(o*m+a*g+s*y),t[13]=-(u*m+l*g+f*y),t[14]=-(p*m+h*g+d*y),t[15]=1,t)}function B(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=r[0],u=r[1],c=r[2],l=i-n[0],f=o-n[1],p=a-n[2],h=l*l+f*f+p*p;h>0&&(h=1/Math.sqrt(h),l*=h,f*=h,p*=h);var d=u*p-c*f,v=c*l-s*p,m=s*f-u*l;return h=d*d+v*v+m*m,h>0&&(h=1/Math.sqrt(h),d*=h,v*=h,m*=h),t[0]=d,t[1]=v,t[2]=m,t[3]=0,t[4]=f*m-p*v,t[5]=p*d-l*m,t[6]=l*v-f*d,t[7]=0,t[8]=l,t[9]=f,t[10]=p,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t}function U(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function V(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function q(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function G(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function H(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function W(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function X(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Z(t,e){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],p=t[9],h=t[10],d=t[11],v=t[12],m=t[13],g=t[14],y=t[15],b=e[0],_=e[1],x=e[2],w=e[3],E=e[4],S=e[5],C=e[6],T=e[7],O=e[8],A=e[9],k=e[10],M=e[11],P=e[12],I=e[13],L=e[14],R=e[15];return Math.abs(n-b)<=r["b"]*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(i-_)<=r["b"]*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(o-x)<=r["b"]*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-w)<=r["b"]*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-E)<=r["b"]*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(u-S)<=r["b"]*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(c-C)<=r["b"]*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(l-T)<=r["b"]*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(f-O)<=r["b"]*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(p-A)<=r["b"]*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(h-k)<=r["b"]*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(d-M)<=r["b"]*Math.max(1,Math.abs(d),Math.abs(M))&&Math.abs(v-P)<=r["b"]*Math.max(1,Math.abs(v),Math.abs(P))&&Math.abs(m-I)<=r["b"]*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(g-L)<=r["b"]*Math.max(1,Math.abs(g),Math.abs(L))&&Math.abs(y-R)<=r["b"]*Math.max(1,Math.abs(y),Math.abs(R))}var Y=d,K=G},"jK+o":function(t,e,n){var r,i;(function(){"use strict";var n={}.hasOwnProperty;function o(){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];if(r){var i=typeof r;if("string"===i||"number"===i)t.push(r);else if(Array.isArray(r)){if(r.length){var a=o.apply(null,r);a&&t.push(a)}}else if("object"===i)if(r.toString===Object.prototype.toString)for(var s in r)n.call(r,s)&&r[s]&&t.push(s);else t.push(r.toString())}}return t.join(" ")}t.exports?(o["default"]=o,t.exports=o):(r=[],i=function(){return o}.apply(e,r),void 0===i||(t.exports=i))})()},jQ8X:function(t,e,n){"use strict";n.r(e);var r=n("xwgP"),i=n.n(r),o=n("OS9G"),a=n("9kvl"),s=(n("E7r7"),function(t){var e=t.location,n=Object(r["useContext"])(o["context"]),s=n.base,u=n.locale,c=n.config.locales,l=c.find((function(t){var e=t.name;return e!==u}));function f(t){var n=s.replace("/".concat(u),""),r=e.pathname.replace(s,n)||"/";if(t!==c[0].name){var i="".concat(n,"/").concat(t).replace(/\/\//,"/"),o=e.pathname.replace(s.replace(/^\/$/,"//"),"");return"".concat(i).concat(o).replace(/\/$/,"")}return r}return l?i.a.createElement("div",{className:"__dumi-default-locale-select","data-locale-count":c.length},c.length>2?i.a.createElement("select",{value:u,onChange:function(t){return a["a"].push(f(t.target.value))}},c.map((function(t){return i.a.createElement("option",{value:t.name,key:t.name},t.label)}))):i.a.createElement(o["Link"],{to:f(l.name)},l.label)):null}),u=s,c=(n("I9cW"),function(t){var e=t.onMobileMenuClick,n=t.navPrefix,a=t.location,s=t.darkPrefix,c=Object(r["useContext"])(o["context"]),l=c.base,f=c.config,p=f.mode,h=f.title,d=f.logo,v=c.nav;return i.a.createElement("div",{className:"__dumi-default-navbar","data-mode":p},i.a.createElement("button",{className:"__dumi-default-navbar-toggle",onClick:e}),i.a.createElement(o["Link"],{className:"__dumi-default-navbar-logo",style:{backgroundImage:d&&"url('".concat(d,"')")},to:l,"data-plaintext":!1===d||void 0},h),i.a.createElement("nav",null,n,v.map((function(t){var e,n=Boolean(null===(e=t.children)||void 0===e?void 0:e.length)&&i.a.createElement("ul",null,t.children.map((function(t){return i.a.createElement("li",{key:t.path},i.a.createElement(o["NavLink"],{to:t.path},t.title))})));return i.a.createElement("span",{key:t.title||t.path},t.path?i.a.createElement(o["NavLink"],{to:t.path,key:t.path},t.title):t.title,n)})),i.a.createElement("div",{className:"__dumi-default-navbar-tool"},i.a.createElement(u,{location:a}),s)))}),l=c,f=(n("32kc"),["slugs"]);function p(){return p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p.apply(this,arguments)}function h(t,e){if(null==t)return{};var n,r,i=d(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function d(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}var v=function(t){var e=t.slugs,n=h(t,f);return i.a.createElement("ul",p({role:"slug-list"},n),e.filter((function(t){var e=t.depth;return e>1&&e<4})).map((function(t){return i.a.createElement("li",{key:t.heading,title:t.value,"data-depth":t.depth},i.a.createElement(o["AnchorLink"],{to:"#".concat(t.heading)},i.a.createElement("span",null,t.value)))})))},m=v,g=(n("xoxd"),function(t){var e=t.mobileMenuCollapsed,n=t.location,a=t.darkPrefix,s=Object(r["useContext"])(o["context"]),c=s.config,l=c.logo,f=c.title,p=c.description,h=c.mode,d=c.repository.url,v=s.menu,g=s.nav,y=s.base,b=s.meta,_=Boolean((b.hero||b.features||b.gapless)&&"site"===h)||!1===b.sidemenu||void 0;return i.a.createElement("div",{className:"__dumi-default-menu","data-mode":h,"data-hidden":_,"data-mobile-show":!e||void 0},i.a.createElement("div",{className:"__dumi-default-menu-inner"},i.a.createElement("div",{className:"__dumi-default-menu-header"},i.a.createElement(o["Link"],{to:y,className:"__dumi-default-menu-logo",style:{backgroundImage:l&&"url('".concat(l,"')")}}),i.a.createElement("h1",null,f),i.a.createElement("p",null,p),/github\.com/.test(d)&&"doc"===h&&i.a.createElement("p",null,i.a.createElement("object",{type:"image/svg+xml",data:"https://img.shields.io/github/stars".concat(d.match(/((\/[^\/]+){2})$/)[1],"?style=social")}))),i.a.createElement("div",{className:"__dumi-default-menu-mobile-area"},!!g.length&&i.a.createElement("ul",{className:"__dumi-default-menu-nav-list"},g.map((function(t){var e,n=Boolean(null===(e=t.children)||void 0===e?void 0:e.length)&&i.a.createElement("ul",null,t.children.map((function(t){return i.a.createElement("li",{key:t.path||t.title},i.a.createElement(o["NavLink"],{to:t.path},t.title))})));return i.a.createElement("li",{key:t.path||t.title},t.path?i.a.createElement(o["NavLink"],{to:t.path},t.title):t.title,n)}))),i.a.createElement(u,{location:n}),a),i.a.createElement("ul",{className:"__dumi-default-menu-list"},!_&&v.map((function(t){var e,r=Boolean(null===(e=b.slugs)||void 0===e?void 0:e.length),a=t.children&&Boolean(t.children.length),s="menu"===b.toc&&!a&&r&&t.path===n.pathname.replace(/([^^])\/$/,"$1");return i.a.createElement("li",{key:t.path||t.title},i.a.createElement(o["NavLink"],{to:t.path,exact:!(t.children&&t.children.length)},t.title),Boolean(t.children&&t.children.length)&&i.a.createElement("ul",null,t.children.map((function(t){return i.a.createElement("li",{key:t.path},i.a.createElement(o["NavLink"],{to:t.path,exact:!0},i.a.createElement("span",null,t.title)),Boolean("menu"===b.toc&&"undefined"!==typeof window&&t.path===n.pathname&&r)&&i.a.createElement(m,{slugs:b.slugs}))}))),s&&i.a.createElement(m,{slugs:b.slugs}))})))))}),y=g;n("IQzM");function b(){return b=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b.apply(this,arguments)}function _(t,e){return C(t)||S(t,e)||w(t,e)||x()}function x(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(t,e){if(t){if("string"===typeof t)return E(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(t,e):void 0}}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function S(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function C(t){if(Array.isArray(t))return t}var T=function(){var t=Object(r["useState"])(""),e=_(t,2),n=e[0],a=e[1],s=Object(r["useState"])([]),u=_(s,2),c=u[0],l=u[1],f=Object(r["useRef"])(),p=Object(o["useSearch"])(n),h=i.a.createElement("svg",{className:"__dumi-default-search-empty",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2347",width:"32",height:"32"},i.a.createElement("path",{d:"M855.6 427.2H168.5c-12.7 0-24.4 6.9-30.6 18L4.4 684.7C1.5 689.9 0 695.8 0 701.8v287.1c0 19.4 15.7 35.1 35.1 35.1H989c19.4 0 35.1-15.7 35.1-35.1V701.8c0-6-1.5-11.8-4.4-17.1L886.2 445.2c-6.2-11.1-17.9-18-30.6-18zM673.4 695.6c-16.5 0-30.8 11.5-34.3 27.7-12.7 58.5-64.8 102.3-127.2 102.3s-114.5-43.8-127.2-102.3c-3.5-16.1-17.8-27.7-34.3-27.7H119c-26.4 0-43.3-28-31.1-51.4l81.7-155.8c6.1-11.6 18-18.8 31.1-18.8h622.4c13 0 25 7.2 31.1 18.8l81.7 155.8c12.2 23.4-4.7 51.4-31.1 51.4H673.4zM819.9 209.5c-1-1.8-2.1-3.7-3.2-5.5-9.8-16.6-31.1-22.2-47.8-12.6L648.5 261c-17 9.8-22.7 31.6-12.6 48.4 0.9 1.4 1.7 2.9 2.5 4.4 9.5 17 31.2 22.8 48 13L807 257.3c16.7-9.7 22.4-31 12.9-47.8zM375.4 261.1L255 191.6c-16.7-9.6-38-4-47.8 12.6-1.1 1.8-2.1 3.6-3.2 5.5-9.5 16.8-3.8 38.1 12.9 47.8L337.3 327c16.9 9.7 38.6 4 48-13.1 0.8-1.5 1.7-2.9 2.5-4.4 10.2-16.8 4.5-38.6-12.4-48.4zM512 239.3h2.5c19.5 0.3 35.5-15.5 35.5-35.1v-139c0-19.3-15.6-34.9-34.8-35.1h-6.4C489.6 30.3 474 46 474 65.2v139c0 19.5 15.9 35.4 35.5 35.1h2.5z"}));return Object(r["useEffect"])((function(){Array.isArray(p)?l(p):"function"===typeof p&&p(".".concat(f.current.className))}),[p]),i.a.createElement("div",{className:"__dumi-default-search"},i.a.createElement("input",b({className:"__dumi-default-search-input",type:"search",ref:f},Array.isArray(p)?{value:n,onChange:function(t){return a(t.target.value)}}:{})),i.a.createElement("ul",null,c.length>0&&c.map((function(t){var e;return i.a.createElement("li",{key:t.path,onClick:function(){return a("")}},i.a.createElement(o["AnchorLink"],{to:t.path},(null===(e=t.parent)||void 0===e?void 0:e.title)&&i.a.createElement("span",null,t.parent.title),t.title))})),0==c.length&&n&&i.a.createElement("li",{style:{textAlign:"center"}},h)))};n("fc2F");function O(t,e){return I(t)||P(t,e)||k(t,e)||A()}function A(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(t,e){if(t){if("string"===typeof t)return M(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(t,e):void 0}}function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function P(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function I(t){if(Array.isArray(t))return t}var L=function(t){var e=t.darkSwitch,n=t.onDarkSwitchClick,r=t.isSideMenu,a=["dark","light","auto"],s=Object(o["usePrefersColor"])(),u=O(s,2),c=u[0],l=u[1],f=c,p=i.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4026",width:"22",height:"22"},i.a.createElement("path",{d:"M915.2 476.16h-43.968c-24.704 0-44.736 16-44.736 35.84s20.032 35.904 44.736 35.904H915.2c24.768 0 44.8-16.064 44.8-35.904s-20.032-35.84-44.8-35.84zM512 265.6c-136.704 0-246.464 109.824-246.464 246.4 0 136.704 109.76 246.464 246.464 246.464S758.4 648.704 758.4 512c0-136.576-109.696-246.4-246.4-246.4z m0 425.6c-99.008 0-179.2-80.128-179.2-179.2 0-98.944 80.192-179.2 179.2-179.2S691.2 413.056 691.2 512c0 99.072-80.192 179.2-179.2 179.2zM197.44 512c0-19.84-19.136-35.84-43.904-35.84H108.8c-24.768 0-44.8 16-44.8 35.84s20.032 35.904 44.8 35.904h44.736c24.768 0 43.904-16.064 43.904-35.904zM512 198.464c19.776 0 35.84-20.032 35.84-44.8v-44.8C547.84 84.032 531.84 64 512 64s-35.904 20.032-35.904 44.8v44.8c0 24.768 16.128 44.864 35.904 44.864z m0 627.136c-19.776 0-35.904 20.032-35.904 44.8v44.736C476.096 940.032 492.16 960 512 960s35.84-20.032 35.84-44.8v-44.736c0-24.768-16.064-44.864-35.84-44.864z m329.92-592.832c17.472-17.536 20.288-43.072 6.4-57.024-14.016-14.016-39.488-11.2-57.024 6.336-4.736 4.864-26.496 26.496-31.36 31.36-17.472 17.472-20.288 43.008-6.336 57.024 13.952 14.016 39.488 11.2 57.024-6.336 4.8-4.864 26.496-26.56 31.296-31.36zM213.376 759.936c-4.864 4.8-26.56 26.624-31.36 31.36-17.472 17.472-20.288 42.944-6.4 56.96 14.016 13.952 39.552 11.2 57.024-6.336 4.8-4.736 26.56-26.496 31.36-31.36 17.472-17.472 20.288-43.008 6.336-56.96-14.016-13.952-39.552-11.072-56.96 6.336z m19.328-577.92c-17.536-17.536-43.008-20.352-57.024-6.336-14.08 14.016-11.136 39.488 6.336 57.024 4.864 4.864 26.496 26.56 31.36 31.424 17.536 17.408 43.008 20.288 56.96 6.336 14.016-14.016 11.264-39.488-6.336-57.024-4.736-4.864-26.496-26.56-31.296-31.424z m527.168 628.608c4.864 4.864 26.624 26.624 31.36 31.424 17.536 17.408 43.072 20.224 57.088 6.336 13.952-14.016 11.072-39.552-6.4-57.024-4.864-4.8-26.56-26.496-31.36-31.36-17.472-17.408-43.072-20.288-57.024-6.336-13.952 14.016-11.008 39.488 6.336 56.96z","p-id":"4027"})),h=i.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3854",width:"22",height:"22"},i.a.createElement("path",{d:"M991.816611 674.909091a69.166545 69.166545 0 0 0-51.665455-23.272727 70.795636 70.795636 0 0 0-27.438545 5.585454A415.674182 415.674182 0 0 1 754.993338 698.181818c-209.594182 0-393.472-184.785455-393.472-395.636363 0-52.363636 38.539636-119.621818 69.515637-173.614546 4.887273-8.610909 9.634909-16.756364 14.103272-24.901818A69.818182 69.818182 0 0 0 384.631156 0a70.842182 70.842182 0 0 0-27.438545 5.585455C161.678429 90.298182 14.362065 307.898182 14.362065 512c0 282.298182 238.824727 512 532.38691 512a522.286545 522.286545 0 0 0 453.957818-268.334545A69.818182 69.818182 0 0 0 991.816611 674.909091zM546.679156 954.181818c-248.785455 0-462.941091-192-462.941091-442.181818 0-186.647273 140.637091-372.829091 300.939637-442.181818-36.817455 65.629091-92.578909 151.970909-92.578909 232.727273 0 250.181818 214.109091 465.454545 462.917818 465.454545a488.331636 488.331636 0 0 0 185.181091-46.545455 453.003636 453.003636 0 0 1-393.565091 232.727273z m103.656728-669.323636l-14.266182 83.781818a34.909091 34.909091 0 0 0 50.362182 36.770909l74.775272-39.563636 74.752 39.563636a36.142545 36.142545 0 0 0 16.174546 3.956364 34.909091 34.909091 0 0 0 34.210909-40.727273l-14.289455-83.781818 60.509091-59.345455a35.025455 35.025455 0 0 0-19.223272-59.578182l-83.61891-12.101818-37.376-76.101818a34.56 34.56 0 0 0-62.254545 0l-37.376 76.101818-83.618909 12.101818a34.909091 34.909091 0 0 0-19.246546 59.578182z m70.423272-64.698182a34.280727 34.280727 0 0 0 26.135273-19.083636l14.312727-29.090909 14.336 29.090909a34.257455 34.257455 0 0 0 26.135273 19.083636l32.046546 4.887273-23.272728 22.574545a35.234909 35.234909 0 0 0-10.007272 30.952727l5.46909 32.116364-28.625454-15.127273a34.490182 34.490182 0 0 0-32.302546 0l-28.695272 15.127273 5.469091-32.116364a35.141818 35.141818 0 0 0-9.984-30.952727l-23.272728-22.574545z","p-id":"3855"})),d=i.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"11002",width:"22",height:"22"},i.a.createElement("path",{d:"M127.658667 492.885333c0-51.882667 10.24-101.717333 30.378666-149.162666s47.786667-88.064 81.92-122.538667 75.093333-61.781333 122.538667-81.92 96.938667-30.378667 149.162667-30.378667 101.717333 10.24 149.162666 30.378667 88.405333 47.786667 122.88 81.92 61.781333 75.093333 81.92 122.538667 30.378667 96.938667 30.378667 149.162666-10.24 101.717333-30.378667 149.162667-47.786667 88.405333-81.92 122.88-75.093333 61.781333-122.88 81.92-97.28 30.378667-149.162666 30.378667-101.717333-10.24-149.162667-30.378667-88.064-47.786667-122.538667-81.92-61.781333-75.093333-81.92-122.88-30.378667-96.938667-30.378666-149.162667z m329.045333 0c0 130.048 13.994667 244.394667 41.984 343.381334h12.970667c46.762667 0 91.136-9.216 133.461333-27.306667s78.848-42.666667 109.568-73.386667 54.954667-67.242667 73.386667-109.568 27.306667-86.698667 27.306666-133.461333c0-46.421333-9.216-90.794667-27.306666-133.12s-42.666667-78.848-73.386667-109.568-67.242667-54.954667-109.568-73.386667-86.698667-27.306667-133.461333-27.306666h-11.605334c-28.672 123.562667-43.349333 237.909333-43.349333 343.722666z","p-id":"11003"})),v=a.filter((function(t){return t!==f})),m=function(t,e){!r&&n&&n(t),e!==f&&l(e)},g=function(t){switch(t){case"dark":return i.a.createElement("button",{key:"dumi-dark-btn-moon",title:"Dark theme",onClick:function(e){return m(e,t)},className:"__dumi-default-dark-moon ".concat(t===f?"__dumi-default-dark-switch-active":"")},h);case"light":return i.a.createElement("button",{key:"dumi-dark-btn-sun",title:"Light theme",onClick:function(e){return m(e,t)},className:"__dumi-default-dark-sun ".concat(t===f?"__dumi-default-dark-switch-active":"")},p);case"auto":return i.a.createElement("button",{key:"dumi-dark-btn-auto",title:"Default to system",onClick:function(e){return m(e,t)},className:"__dumi-default-dark-auto ".concat(t===f?"__dumi-default-dark-switch-active":"")},d);default:}};return i.a.createElement("div",{className:"__dumi-default-dark"},i.a.createElement("div",{className:"__dumi-default-dark-switch ".concat(!r&&e?"__dumi-default-dark-switch-open":"")},r?a.map((function(t){return g(t)})):g(f)),!r&&e&&i.a.createElement("div",{className:"__dumi-default-dark-switch-list"},v.map((function(t){return g(t)}))))},R=L;n("dhpO");function D(t,e){return B(t)||z(t,e)||j(t,e)||N()}function N(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function j(t,e){if(t){if("string"===typeof t)return F(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(t,e):void 0}}function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function z(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function B(t){if(Array.isArray(t))return t}var U=function(t){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"__dumi-default-layout-hero"},t.image&&i.a.createElement("img",{src:t.image}),i.a.createElement("h1",null,t.title),i.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.desc}}),t.actions&&t.actions.map((function(t){return i.a.createElement(o["Link"],{to:t.link,key:t.text},i.a.createElement("button",{type:"button"},t.text))}))))},V=function(t){return i.a.createElement("div",{className:"__dumi-default-layout-features"},t.map((function(t){return i.a.createElement("dl",{key:t.title,style:{backgroundImage:t.icon?"url(".concat(t.icon,")"):void 0}},t.link?i.a.createElement(o["Link"],{to:t.link},i.a.createElement("dt",null,t.title)):i.a.createElement("dt",null,t.title),i.a.createElement("dd",{dangerouslySetInnerHTML:{__html:t.desc}}))})))},q=function(t){var e,n,a=t.children,s=t.location,u=Object(r["useContext"])(o["context"]),c=u.config,f=c.mode,p=c.repository,h=(u.nav,u.meta),d=u.locale,v=p.url,g=p.branch,b=p.platform,_=Object(r["useState"])(!0),x=D(_,2),w=x[0],E=x[1],S=Object(r["useState"])(!1),C=D(S,2),O=C[0],A=C[1],k="site"===f,M=k&&h.hero,P=k&&h.features,I=!1!==h.sidemenu&&!M&&!P&&!h.gapless,L=!M&&!P&&Boolean(null===(e=h.slugs)||void 0===e?void 0:e.length)&&("content"===h.toc||void 0===h.toc)&&!h.gapless,N=/^zh|cn$/i.test(d),j=new Date(h.updatedTime),F="".concat(j.toLocaleDateString([],{hour12:!1})," ").concat(j.toLocaleTimeString([],{hour12:!1})),z={github:"GitHub",gitlab:"GitLab"}[(null===(n=(v||"").match(/(github|gitlab)/))||void 0===n?void 0:n[1])||"nothing"]||b;return i.a.createElement("div",{className:"__dumi-default-layout","data-route":s.pathname,"data-show-sidemenu":String(I),"data-show-slugs":String(L),"data-site-mode":k,"data-gapless":String(!!h.gapless),onClick:function(){A(!1),w||E(!0)}},i.a.createElement(l,{location:s,navPrefix:i.a.createElement(T,null),darkPrefix:i.a.createElement(R,{darkSwitch:O,onDarkSwitchClick:function(t){A((function(t){return!t})),t.stopPropagation()},isSideMenu:!1}),onMobileMenuClick:function(t){E((function(t){return!t})),t.stopPropagation()}}),i.a.createElement(y,{darkPrefix:i.a.createElement(R,{darkSwitch:O,isSideMenu:!0}),mobileMenuCollapsed:w,location:s}),L&&i.a.createElement(m,{slugs:h.slugs,className:"__dumi-default-layout-toc"}),M&&U(h.hero),P&&V(h.features),i.a.createElement("div",{className:"__dumi-default-layout-content"},a,!M&&!P&&h.filePath&&!h.gapless&&i.a.createElement("div",{className:"__dumi-default-layout-footer-meta"},z&&i.a.createElement(o["Link"],{to:"".concat(v,"/edit/").concat(g,"/").concat(h.filePath)},N?"\u5728 ".concat(z," \u4e0a\u7f16\u8f91\u6b64\u9875"):"Edit this doc on ".concat(z)),i.a.createElement("span",{"data-updated-text":N?"\u6700\u540e\u66f4\u65b0\u65f6\u95f4\uff1a":"Last update: "},F)),(M||P)&&h.footer&&i.a.createElement("div",{className:"__dumi-default-layout-footer",dangerouslySetInnerHTML:{__html:h.footer}})))};e["default"]=q},jUTB:function(t,e,n){var r=n("bXon"),i=n("szjD"),o=n("CmBG"),a=n("hXyk");t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(a(t)),n=o.f;return n?e.concat(n(t)):e}},jXsC:function(t,e,n){"use strict";var r=n("2hCa"),i=n("PaPB"),o=n("2I03"),a=n("1+Eb"),s=n("/5yA"),u=Math.min,c=[].lastIndexOf,l=!!c&&1/[1].lastIndexOf(1,-0)<0,f=a("lastIndexOf"),p=s("indexOf",{ACCESSORS:!0,1:0}),h=l||!f||!p;t.exports=h?function(t){if(l)return c.apply(this,arguments)||0;var e=r(this),n=o(e.length),a=n-1;for(arguments.length>1&&(a=u(a,i(arguments[1]))),a<0&&(a=n+a);a>=0;a--)if(a in e&&e[a]===t)return a||0;return-1}:c},jd72:function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},jiNi:function(t,e,n){var r=n("HIsA"),i=n("q0Qw"),o=n("bXon");r({global:!0},{compositeSymbol:function(){return 1===arguments.length&&"string"===typeof arguments[0]?o("Symbol")["for"](arguments[0]):i.apply(null,arguments).get("symbol",o("Symbol"))}})},jrRE:function(t,e,n){var r=n("gsbv"),i=r.Uint8Array;t.exports=i},k5S6:function(t,e,n){var r=n("eoOI");function i(t){return r(this,t).has(t)}t.exports=i},k77j:function(t,e){function n(t,e){var n=-1,r=null==t?0:t.length;while(++n<r)if(e(t[n],n,t))return!0;return!1}t.exports=n},k7N2:function(t,e,n){var r=n("m9sd"),i=n("rGlR");function o(t){return r(t,i(t))}t.exports=o},kI7s:function(t,e,n){var r=n("+qhb"),i=n("NVMI"),o=n("fbKl"),a=n("7saB"),s=o("IE_PROTO"),u=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=i(t),r(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},kKrw:function(t,e,n){"use strict";var r=n("HIsA"),i=n("B6LR"),o=n("JzK+"),a=n("eD14");r({target:"String",proto:!0,forced:!a("includes")},{includes:function(t){return!!~String(o(this)).indexOf(i(t),arguments.length>1?arguments[1]:void 0)}})},kPvK:function(t,e,n){var r=n("2JD6"),i=n("bShA"),o=n("+qhb"),a=n("fotI"),s=n("xUti"),u=n("dMsU"),c=i("wks"),l=r.Symbol,f=u?l:l&&l.withoutSetter||a;t.exports=function(t){return o(c,t)||(s&&o(l,t)?c[t]=l[t]:c[t]=f("Symbol."+t)),c[t]}},kRmj:function(t,e,n){var r=n("JqKL");r("Uint16",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},kUw8:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},kWwM:function(t,e,n){var r=n("5MHJ"),i=n("2Swa"),o="[object Map]";function a(t){return i(t)&&r(t)==o}t.exports=a},keKz:function(t,e,n){var r=n("2JD6");t.exports=r.Promise},kes9:function(t,e,n){var r=n("Oaiz"),i=Math.abs,o=Math.pow,a=o(2,-52),s=o(2,-23),u=o(2,127)*(2-s),c=o(2,-126),l=function(t){return t+1/a-1/a};t.exports=Math.fround||function(t){var e,n,o=i(t),f=r(t);return o<c?f*l(o/c/s)*c*s:(e=(1+s/a)*o,n=e-(e-o),n>u||n!=n?f*(1/0):f*n)}},kh0G:function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("hXyk"),a=n("40mc"),s=n("wKMT"),u=n("Ji6T");r({target:"Set",proto:!0,real:!0,forced:i},{find:function(t){var e=o(this),n=s(e),r=a(t,arguments.length>1?arguments[1]:void 0,3);return u(n,(function(t){if(r(t,t,e))return u.stop(t)}),void 0,!1,!0).result}})},kmCa:function(t,e){var n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function r(t){return t.match(n)||[]}t.exports=r},knnx:function(t,e,n){"use strict";var r=n("HIsA"),i=n("iYBb").end,o=n("c8OV");r({target:"String",proto:!0,forced:o},{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},koGu:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.injectable=void 0;var r=n("196R"),i=n("9L8m");function o(){return function(t){if(Reflect.hasOwnMetadata(i.PARAM_TYPES,t))throw new Error(r.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(i.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(i.PARAM_TYPES,e,t),t}}e.injectable=o},kulY:function(t,e,n){"use strict";n.r(e);n("xmvT"),n("ecNs");var r=n("M2Sr"),i=n("FpZt"),o=n("rRIJ"),a=n("uMeh"),s=n("xwgP"),u=n.n(s),c=n("jK+o"),l=n.n(c),f=n("/sZi"),p=n("vAUc"),h=n("kUw8"),d=function t(e){return Object(h["a"])(this,t),new Error("unreachable case: ".concat(JSON.stringify(e)))},v=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},m=function(t){return s["createElement"](p["a"],null,(function(e){var n,o=e.getPrefixCls,a=e.direction,u=t.prefixCls,c=t.size,f=t.className,p=v(t,["prefixCls","size","className"]),h=o("btn-group",u),m="";switch(c){case"large":m="lg";break;case"small":m="sm";break;case"middle":case void 0:break;default:console.warn(new d(c))}var g=l()(h,(n={},Object(i["a"])(n,"".concat(h,"-").concat(m),m),Object(i["a"])(n,"".concat(h,"-rtl"),"rtl"===a),n),f);return s["createElement"]("div",Object(r["a"])({},p,{className:g}))}))},g=m,y=n("nKrB"),b=n("IzJh"),_=n("XF5O"),x=n("tST3"),w=n("nKQv"),E=n("67H3"),S=n("ZOCG"),C=0,T={};function O(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=C++,r=e;function i(){r-=1,r<=0?(t(),delete T[n]):T[n]=Object(S["a"])(i)}return T[n]=Object(S["a"])(i),n}O.cancel=function(t){void 0!==t&&(S["a"].cancel(T[t]),delete T[t])},O.ids=T;var A,k=s["isValidElement"];function M(t,e,n){return k(t)?s["cloneElement"](t,"function"===typeof n?n(t.props||{}):n):e}function P(t,e){return M(t,t,e)}function I(t){return!t||null===t.offsetParent||t.hidden}function L(t){var e=(t||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return!(e&&e[1]&&e[2]&&e[3])||!(e[1]===e[2]&&e[2]===e[3])}var R=function(t){Object(_["a"])(n,t);var e=Object(x["a"])(n);function n(){var t;return Object(h["a"])(this,n),t=e.apply(this,arguments),t.containerRef=s["createRef"](),t.animationStart=!1,t.destroyed=!1,t.onClick=function(e,n){var r,i;if(!(!e||I(e)||e.className.indexOf("-leave")>=0)){var o=t.props.insertExtraNode;t.extraNode=document.createElement("div");var a=Object(b["a"])(t),s=a.extraNode,u=t.context.getPrefixCls;s.className="".concat(u(""),"-click-animating-node");var c=t.getAttributeName();if(e.setAttribute(c,"true"),n&&"#ffffff"!==n&&"rgb(255, 255, 255)"!==n&&L(n)&&!/rgba\((?:\d*, ){3}0\)/.test(n)&&"transparent"!==n){s.style.borderColor=n;var l=(null===(r=e.getRootNode)||void 0===r?void 0:r.call(e))||e.ownerDocument,f=l instanceof Document?l.body:null!==(i=l.firstChild)&&void 0!==i?i:l;A=Object(w["a"])("\n      [".concat(u(""),"-click-animating-without-extra-node='true']::after, .").concat(u(""),"-click-animating-node {\n        --antd-wave-shadow-color: ").concat(n,";\n      }"),"antd-wave",{csp:t.csp,attachTo:f})}o&&e.appendChild(s),["transition","animation"].forEach((function(n){e.addEventListener("".concat(n,"start"),t.onTransitionStart),e.addEventListener("".concat(n,"end"),t.onTransitionEnd)}))}},t.onTransitionStart=function(e){if(!t.destroyed){var n=t.containerRef.current;e&&e.target===n&&!t.animationStart&&t.resetEffect(n)}},t.onTransitionEnd=function(e){e&&"fadeEffect"===e.animationName&&t.resetEffect(e.target)},t.bindAnimationEvent=function(e){if(e&&e.getAttribute&&!e.getAttribute("disabled")&&!(e.className.indexOf("disabled")>=0)){var n=function(n){if("INPUT"!==n.target.tagName&&!I(n.target)){t.resetEffect(e);var r=getComputedStyle(e).getPropertyValue("border-top-color")||getComputedStyle(e).getPropertyValue("border-color")||getComputedStyle(e).getPropertyValue("background-color");t.clickWaveTimeoutId=window.setTimeout((function(){return t.onClick(e,r)}),0),O.cancel(t.animationStartId),t.animationStart=!0,t.animationStartId=O((function(){t.animationStart=!1}),10)}};return e.addEventListener("click",n,!0),{cancel:function(){e.removeEventListener("click",n,!0)}}}},t.renderWave=function(e){var n=e.csp,r=t.props.children;if(t.csp=n,!s["isValidElement"](r))return r;var i=t.containerRef;return Object(E["c"])(r)&&(i=Object(E["a"])(r.ref,t.containerRef)),P(r,{ref:i})},t}return Object(y["a"])(n,[{key:"componentDidMount",value:function(){var t=this.containerRef.current;t&&1===t.nodeType&&(this.instance=this.bindAnimationEvent(t))}},{key:"componentWillUnmount",value:function(){this.instance&&this.instance.cancel(),this.clickWaveTimeoutId&&clearTimeout(this.clickWaveTimeoutId),this.destroyed=!0}},{key:"getAttributeName",value:function(){var t=this.context.getPrefixCls,e=this.props.insertExtraNode;return"".concat(t(""),e?"-click-animating":"-click-animating-without-extra-node")}},{key:"resetEffect",value:function(t){var e=this;if(t&&t!==this.extraNode&&t instanceof Element){var n=this.props.insertExtraNode,r=this.getAttributeName();t.setAttribute(r,"false"),A&&(A.innerHTML=""),n&&this.extraNode&&t.contains(this.extraNode)&&t.removeChild(this.extraNode),["transition","animation"].forEach((function(n){t.removeEventListener("".concat(n,"start"),e.onTransitionStart),t.removeEventListener("".concat(n,"end"),e.onTransitionEnd)}))}}},{key:"render",value:function(){return s["createElement"](p["a"],null,this.renderWave)}}]),n}(s["Component"]);R.contextType=p["b"];var D=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e},N=n("hkks"),j=n("TlJp"),F=n("JuV/"),z=n("e22m"),B=function(){return{width:0,opacity:0,transform:"scale(0)"}},U=function(t){return{width:t.scrollWidth,opacity:1,transform:"scale(1)"}},V=function(t){var e=t.prefixCls,n=t.loading,r=t.existIcon,i=!!n;return r?u.a.createElement("span",{className:"".concat(e,"-loading-icon")},u.a.createElement(z["a"],null)):u.a.createElement(F["b"],{visible:i,motionName:"".concat(e,"-loading-icon-motion"),removeOnLeave:!0,onAppearStart:B,onAppearActive:U,onEnterStart:B,onEnterActive:U,onLeaveStart:U,onLeaveActive:B},(function(t,n){var r=t.className,i=t.style;return u.a.createElement("span",{className:"".concat(e,"-loading-icon"),style:i,ref:n},u.a.createElement(z["a"],{className:r}))}))},q=V,G=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},H=/^[\u4e00-\u9fa5]{2}$/,W=H.test.bind(H);function X(t){return"string"===typeof t}function Z(t){return"text"===t||"link"===t}function Y(t){return s["isValidElement"](t)&&t.type===s["Fragment"]}function K(t,e){if(null!=t){var n=e?" ":"";return"string"!==typeof t&&"number"!==typeof t&&X(t.type)&&W(t.props.children)?P(t,{children:t.props.children.split("").join(n)}):"string"===typeof t?W(t)?s["createElement"]("span",null,t.split("").join(n)):s["createElement"]("span",null,t):Y(t)?s["createElement"]("span",null,t):t}}function J(t,e){var n=!1,r=[];return s["Children"].forEach(t,(function(t){var e=Object(a["a"])(t),i="string"===e||"number"===e;if(n&&i){var o=r.length-1,s=r[o];r[o]="".concat(s).concat(t)}else r.push(t);n=i})),s["Children"].map(r,(function(t){return K(t,e)}))}D("default","primary","ghost","dashed","link","text"),D("circle","round"),D("submit","button","reset");var Q=function(t,e){var n,u,c=t.loading,h=void 0!==c&&c,d=t.prefixCls,v=t.type,m=t.danger,g=t.shape,y=t.size,b=t.className,_=t.children,x=t.icon,w=t.ghost,E=void 0!==w&&w,S=t.block,C=void 0!==S&&S,T=t.htmlType,O=void 0===T?"button":T,A=G(t,["loading","prefixCls","type","danger","shape","size","className","children","icon","ghost","block","htmlType"]),k=s["useContext"](j["b"]),M=s["useState"](!!h),P=Object(o["a"])(M,2),I=P[0],L=P[1],D=s["useState"](!1),F=Object(o["a"])(D,2),z=F[0],B=F[1],U=s["useContext"](p["b"]),V=U.getPrefixCls,H=U.autoInsertSpaceInButton,X=U.direction,Y=e||s["createRef"](),K=s["useRef"](),Q=function(){return 1===s["Children"].count(_)&&!x&&!Z(v)},$=function(){if(Y&&Y.current&&!1!==H){var t=Y.current.textContent;Q()&&W(t)?z||B(!0):z&&B(!1)}};u="object"===Object(a["a"])(h)&&h.delay?h.delay||!0:!!h,s["useEffect"]((function(){clearTimeout(K.current),"number"===typeof u?K.current=window.setTimeout((function(){L(u)}),u):L(u)}),[u]),s["useEffect"]($,[Y]);var tt=function(e){var n,r=t.onClick,i=t.disabled;I||i?e.preventDefault():null===(n=r)||void 0===n||n(e)};Object(N["a"])(!("string"===typeof x&&x.length>2),"Button","`icon` is using ReactNode instead of string naming in v4. Please check `".concat(x,"` at https://ant.design/components/icon")),Object(N["a"])(!(E&&Z(v)),"Button","`link` or `text` button can't be a `ghost` button.");var et=V("btn",d),nt=!1!==H,rt="";switch(y||k){case"large":rt="lg";break;case"small":rt="sm";break;default:break}var it=I?"loading":x,ot=l()(et,(n={},Object(i["a"])(n,"".concat(et,"-").concat(v),v),Object(i["a"])(n,"".concat(et,"-").concat(g),g),Object(i["a"])(n,"".concat(et,"-").concat(rt),rt),Object(i["a"])(n,"".concat(et,"-icon-only"),!_&&0!==_&&!!it),Object(i["a"])(n,"".concat(et,"-background-ghost"),E&&!Z(v)),Object(i["a"])(n,"".concat(et,"-loading"),I),Object(i["a"])(n,"".concat(et,"-two-chinese-chars"),z&&nt),Object(i["a"])(n,"".concat(et,"-block"),C),Object(i["a"])(n,"".concat(et,"-dangerous"),!!m),Object(i["a"])(n,"".concat(et,"-rtl"),"rtl"===X),n),b),at=x&&!I?x:s["createElement"](q,{existIcon:!!x,prefixCls:et,loading:!!I}),st=_||0===_?J(_,Q()&&nt):null,ut=Object(f["a"])(A,["navigate"]);if(void 0!==ut.href)return s["createElement"]("a",Object(r["a"])({},ut,{className:ot,onClick:tt,ref:Y}),at,st);var ct=s["createElement"]("button",Object(r["a"])({},A,{type:O,className:ot,onClick:tt,ref:Y}),at,st);return Z(v)?ct:s["createElement"](R,null,ct)},$=s["forwardRef"](Q);$.displayName="Button",$.Group=g,$.__ANT_BUTTON=!0;var tt=$,et=tt,nt=n("nWs5"),rt=n("TFir"),it=n.n(rt),ot=n("+RP0"),at=n("/7QA"),st=n("Ct92");e["default"]=()=>{var t=Object(s["useState"])(void 0),e=Object(o["a"])(t,2),n=e[0],r=e[1],i=()=>{n.resetDraw()},a=()=>{"Drawing"===n.drawStatus&&n.removeLatestVertex()},c=()=>{n.enable()};return u.a.useEffect((()=>{var t=new ot["Scene"]({id:"map",map:new st["a"]({pitch:0,style:"light",center:[116.30470275878906,39.88352811449648],zoom:20})});t.on("loaded",(()=>{var e=new at["DrawLine"](t,{enableCustomDraw:!0,customDraw:function(){var t=Object(nt["a"])(it.a.mark((function t(e,n){return it.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",[]);case 1:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),rewriteCursor:{crosshair:"wait"},checkDrawable:(t,e)=>{var n=t.lng;t.lat;return n>116.304907}});e.on("draw.create",(t=>{console.log("draw.create",t)})),e.on("draw.update",(t=>{console.log("update",t)})),e.on("draw.modechange",(t=>{console.log("draw.modechange",t)})),e.on("draw.addpoint",((t,e)=>{console.log("draw.addpoint",t,e)})),r(e)}))}),[]),u.a.createElement("div",null,u.a.createElement("div",{style:{marginBottom:"20px"}},u.a.createElement(et,{type:"Default",onClick:c},"\u5f00\u59cb\u7ed8\u5236"),u.a.createElement(et,{type:"Default",onClick:i},"\u6e05\u9664"),u.a.createElement(et,{type:"Default",onClick:a},"\u64a4\u9500")),u.a.createElement("div",{style:{height:"400px",position:"relative"},id:"map"}))}},l5Zz:function(t,e){function n(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}t.exports=n},l6nO:function(t,e,n){var r=n("jrRE");function i(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}t.exports=i},lBFn:function(t,e,n){"use strict";var r=n("HIsA"),i=n("afop"),o=n("JzK+"),a=n("twJ5"),s=n("9izy"),u=s.codeAt,c=s.charAt,l="String Iterator",f=a.set,p=a.getterFor(l),h=i((function(t){f(this,{type:l,string:t,index:0})}),"String",(function(){var t,e=p(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=c(n,r),e.index+=t.length,{value:{codePoint:u(t,0),position:r},done:!1})}));r({target:"String",proto:!0},{codePoints:function(){return new h(String(o(this)))}})},lD53:function(t,e,n){"use strict";n.r(e),n.d(e,"getKeyThenIncreaseKey",(function(){return q})),n.d(e,"attachTypeApi",(function(){return J})),n.d(e,"getInstance",(function(){return Q}));var r=n("M2Sr"),i=n("FpZt"),o=n("xwgP"),a=n("jK+o"),s=n.n(a),u=n("Uvt4"),c=n("e22m"),l=n("TWOK"),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},p=f,h=n("XUFm"),d=function(t,e){return o["createElement"](h["a"],Object(l["a"])(Object(l["a"])({},t),{},{ref:e,icon:p}))};d.displayName="ExclamationCircleFilled";var v=o["forwardRef"](d),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"},g=m,y=function(t,e){return o["createElement"](h["a"],Object(l["a"])(Object(l["a"])({},t),{},{ref:e,icon:g}))};y.displayName="CloseCircleFilled";var b=o["forwardRef"](y),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"},x=_,w=function(t,e){return o["createElement"](h["a"],Object(l["a"])(Object(l["a"])({},t),{},{ref:e,icon:x}))};w.displayName="CheckCircleFilled";var E=o["forwardRef"](w),S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},C=S,T=function(t,e){return o["createElement"](h["a"],Object(l["a"])(Object(l["a"])({},t),{},{ref:e,icon:C}))};T.displayName="InfoCircleFilled";var O=o["forwardRef"](T),A=n("rRIJ"),k=n("OTP3"),M=n("vAUc");function P(t,e){var n=function(){var n,i=null,a={add:function(t,e){null===i||void 0===i||i.component.add(t,e)}},s=Object(k["a"])(a),u=Object(A["a"])(s,2),c=u[0],l=u[1];function f(o){var a=o.prefixCls,s=n("message",a),u=n(),l=o.key||q(),f=new Promise((function(n){var a=function(){return"function"===typeof o.onClose&&o.onClose(),n(!0)};t(Object(r["a"])(Object(r["a"])({},o),{prefixCls:s,rootPrefixCls:u}),(function(t){var n=t.prefixCls,s=t.instance;i=s,c(e(Object(r["a"])(Object(r["a"])({},o),{key:l,onClose:a}),n))}))})),p=function(){i&&i.removeNotice(l)};return p.then=function(t,e){return f.then(t,e)},p.promise=f,p}var p=o["useRef"]({});return p.current.open=f,["success","info","warning","error","loading"].forEach((function(t){return J(p.current,t)})),[p.current,o["createElement"](M["a"],{key:"holder"},(function(t){return n=t.getPrefixCls,l}))]};return n}var I,L,R,D,N=n("mYUn"),j=3,F=1,z="",B="move-up",U=!1,V=!1;function q(){return F++}function G(t){void 0!==t.top&&(L=t.top,I=null),void 0!==t.duration&&(j=t.duration),void 0!==t.prefixCls&&(z=t.prefixCls),void 0!==t.getContainer&&(R=t.getContainer),void 0!==t.transitionName&&(B=t.transitionName,I=null,U=!0),void 0!==t.maxCount&&(D=t.maxCount,I=null),void 0!==t.rtl&&(V=t.rtl)}function H(t,e){var n=t.prefixCls,r=Object(N["a"])(),i=r.getPrefixCls,o=r.getRootPrefixCls,a=i("message",n||z),s=o(t.rootPrefixCls,a);if(I)e({prefixCls:a,rootPrefixCls:s,instance:I});else{var c={prefixCls:a,transitionName:U?B:"".concat(s,"-").concat(B),style:{top:L},getContainer:R,maxCount:D};u["a"].newInstance(c,(function(t){I?e({prefixCls:a,rootPrefixCls:s,instance:I}):(I=t,e({prefixCls:a,rootPrefixCls:s,instance:t}))}))}}var W={info:O,success:E,error:b,warning:v,loading:c["a"]};function X(t,e){var n,r=void 0!==t.duration?t.duration:j,a=W[t.type],u=s()("".concat(e,"-custom-content"),(n={},Object(i["a"])(n,"".concat(e,"-").concat(t.type),t.type),Object(i["a"])(n,"".concat(e,"-rtl"),!0===V),n));return{key:t.key,duration:r,style:t.style||{},className:t.className,content:o["createElement"]("div",{className:u},t.icon||a&&o["createElement"](a,null),o["createElement"]("span",null,t.content)),onClose:t.onClose,onClick:t.onClick}}function Z(t){var e=t.key||F++,n=new Promise((function(n){var i=function(){return"function"===typeof t.onClose&&t.onClose(),n(!0)};H(t,(function(n){var o=n.prefixCls,a=n.instance;a.notice(X(Object(r["a"])(Object(r["a"])({},t),{key:e,onClose:i}),o))}))})),i=function(){I&&I.removeNotice(e)};return i.then=function(t,e){return n.then(t,e)},i.promise=n,i}function Y(t){return"[object Object]"===Object.prototype.toString.call(t)&&!!t.content}var K={open:Z,config:G,destroy:function(t){if(I)if(t){var e=I,n=e.removeNotice;n(t)}else{var r=I,i=r.destroy;i(),I=null}}};function J(t,e){t[e]=function(n,i,o){return Y(n)?t.open(Object(r["a"])(Object(r["a"])({},n),{type:e})):("function"===typeof i&&(o=i,i=void 0),t.open({content:n,duration:i,type:e,onClose:o}))}}["success","info","warning","error","loading"].forEach((function(t){return J(K,t)})),K.warn=K.warning,K.useMessage=P(H,X);var Q=function(){return null};e["default"]=K},lDzS:function(t,e,n){(function(t){var r=n("gsbv"),i=n("fls1"),o=e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o,u=s?r.Buffer:void 0,c=u?u.isBuffer:void 0,l=c||i;t.exports=l}).call(this,n("7y0d")(t))},lOrw:function(t,e,n){var r=n("Xoou"),i=n("hQlM"),o=n("Lsfr"),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},lVYH:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInWhenOnSyntax=void 0;var r=n("aNuW"),i=n("zN6Y"),o=n("ITfU"),a=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding),this._bindingInSyntax=new r.BindingInSyntax(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingInWhenOnSyntax=a},liI8:function(t,e,n){var r=n("2JD6");t.exports=function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},lkpF:function(t,e,n){"use strict";function r(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}n.d(e,"a",(function(){return r}))},lqff:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"h",(function(){return a})),n.d(e,"i",(function(){return s})),n.d(e,"g",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"k",(function(){return l})),n.d(e,"f",(function(){return f})),n.d(e,"j",(function(){return p})),n.d(e,"a",(function(){return h})),n.d(e,"d",(function(){return d})),n.d(e,"e",(function(){return v}));var r=6371008.8,i={centimeters:100*r,centimetres:100*r,degrees:r/111325,feet:3.28084*r,inches:39.37*r,kilometers:r/1e3,kilometres:r/1e3,meters:r,metres:r,miles:r/1609.344,millimeters:1e3*r,millimetres:1e3*r,nauticalmiles:r/1852,radians:1,yards:1.0936*r};function o(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function a(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!d(t[0])||!d(t[1]))throw new Error("coordinates must contain numbers");var r={type:"Point",coordinates:t};return o(r,e,n)}function s(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var a=i[r];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}var u={type:"Polygon",coordinates:t};return o(u,e,n)}function u(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");var r={type:"LineString",coordinates:t};return o(r,e,n)}function c(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function l(t,e){void 0===e&&(e="kilometers");var n=i[e];if(!n)throw new Error(e+" units is invalid");return t*n}function f(t,e){void 0===e&&(e="kilometers");var n=i[e];if(!n)throw new Error(e+" units is invalid");return t/n}function p(t){var e=t%(2*Math.PI);return 180*e/Math.PI}function h(t){var e=t%360;return e*Math.PI/180}function d(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function v(t){return!!t&&t.constructor===Object}},lrSR:function(t,e){function n(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n}t.exports=n},lttk:function(t,e,n){"use strict";var r=n("9izy").charAt,i=n("twJ5"),o=n("me7Q"),a="String Iterator",s=i.set,u=i.getterFor(a);o(String,"String",(function(t){s(this,{type:a,string:String(t),index:0})}),(function(){var t,e=u(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=r(n,i),e.index+=t.length,{value:t,done:!1})}))},m52V:function(t,e){t.exports=!1},m5Te:function(t,e,n){var r=n("hjyS"),i=n("Hf9d"),o=n("cKxZ"),a=n("/6M7");function s(t,e){return r(t)||i(t,e)||o(t,e)||a()}t.exports=s,t.exports["default"]=t.exports,t.exports.__esModule=!0},m5dl:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("6aLv"),i=n.n(r),o=n("IzJh");function a(t,e){if(e&&("object"===i()(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Object(o["a"])(t)}},m9sd:function(t,e,n){var r=n("cEHS"),i=n("TJOf");function o(t,e,n,o){var a=!n;n||(n={});var s=-1,u=e.length;while(++s<u){var c=e[s],l=o?o(n[c],t[c],c,n,t):void 0;void 0===l&&(l=t[c]),a?i(n,c,l):r(n,c,l)}return n}t.exports=o},mAbK:function(t,e){t.exports={}},"mKn/":function(t,e,n){var r=n("kPvK"),i=n("mAbK"),o=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[o]===t)}},mODz:function(t,e,n){var r=n("HIsA"),i=n("5isN"),o=n("9HG5"),a=!o((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:a},{from:i})},mRf6:function(t,e,n){var r=n("sVUS"),i=n("jrRE"),o=n("TpDJ"),a=n("LP2i"),s=n("nW1o"),u=n("br1w"),c=1,l=2,f="[object Boolean]",p="[object Date]",h="[object Error]",d="[object Map]",v="[object Number]",m="[object RegExp]",g="[object Set]",y="[object String]",b="[object Symbol]",_="[object ArrayBuffer]",x="[object DataView]",w=r?r.prototype:void 0,E=w?w.valueOf:void 0;function S(t,e,n,r,w,S,C){switch(n){case x:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case _:return!(t.byteLength!=e.byteLength||!S(new i(t),new i(e)));case f:case p:case v:return o(+t,+e);case h:return t.name==e.name&&t.message==e.message;case m:case y:return t==e+"";case d:var T=s;case g:var O=r&c;if(T||(T=u),t.size!=e.size&&!O)return!1;var A=C.get(t);if(A)return A==e;r|=l,C.set(t,e);var k=a(T(t),T(e),r,w,S,C);return C["delete"](t),k;case b:if(E)return E.call(t)==E.call(e)}return!1}t.exports=S},mTN9:function(t,e,n){"use strict";n.r(e);var r=n("xwgP"),i=n.n(r),o=n("OS9G"),a=n("W+6v");n("Rsk4");e["default"]=t=>(i.a.useEffect((()=>{var e;null!==t&&void 0!==t&&null!==(e=t.location)&&void 0!==e&&e.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(t.location.hash.slice(1)))}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"markdown"},i.a.createElement("p",null,"\u5730\u56fe\u7ed8\u5236\u7ec4\u4ef6\uff0c\u652f\u6301\u70b9\u3001\u7ebf\u3001\u9762\uff0c \u5706\u3001\u77e9\u5f62\u3001\u7684\u7ed8\u5236\u7f16\u8f91\u3002"),i.a.createElement("h1",{id:"\u4f7f\u7528"},i.a.createElement(o["AnchorLink"],{to:"#\u4f7f\u7528","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u4f7f\u7528"),i.a.createElement("p",null,i.a.createElement("strong",null,"using modules")),i.a.createElement(a["a"],{code:"import { DrawControl } from '@antv/l7-draw';",lang:"javascript"}),i.a.createElement("p",null,i.a.createElement("strong",null,"CDN \u7248\u672c\u5f15\u7528")),i.a.createElement(a["a"],{code:'<head>\n  <! --\u5f15\u5165\u6700\u65b0\u7248\u7684L7-Draw --\x3e\n  <script src="https://unpkg.com/@antv/l7-draw"><\/script>\n</head>',lang:"html"}),i.a.createElement("h2",{id:"\u5b9e\u4f8b\u5316"},i.a.createElement(o["AnchorLink"],{to:"#\u5b9e\u4f8b\u5316","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u5b9e\u4f8b\u5316"),i.a.createElement(a["a"],{code:"const control = new DrawControl(scene, option);\nscene.addControl(control);",lang:"javascript"}),i.a.createElement(a["a"],{code:"// CDN \u5f15\u7528\nconst control = new L7.Draw.DrawControl(scene, option);\nscene.addControl(control);",lang:"javascript"}))))},mTX6:function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("hXyk"),a=n("DDwO"),s=n("Ji6T");r({target:"Set",proto:!0,real:!0,forced:i},{isDisjointFrom:function(t){var e=o(this),n=a(e.has);return!s(t,(function(t){if(!0===n.call(e,t))return s.stop()})).stopped}})},mXku:function(t,e,n){var r=n("Ma/q"),i=r();t.exports=i},mYUn:function(t,e,n){"use strict";n.d(e,"a",(function(){return Ht}));var r=n("M2Sr"),i=n("xwgP"),o=n("vdin"),a=n("8tFq"),s=n("FpZt"),u=n("TWOK"),c=n("8rYJ"),l=n("kUw8"),f=n("nKrB"),p=n("IzJh"),h=n("XF5O"),d=n("tST3"),v=n("shUE"),m=n("HWpy"),g="RC_FORM_INTERNAL_HOOKS",y=function(){Object(m["a"])(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},b=i["createContext"]({getFieldValue:y,getFieldsValue:y,getFieldError:y,getFieldsError:y,isFieldsTouched:y,isFieldTouched:y,isFieldValidating:y,isFieldsValidating:y,resetFields:y,setFields:y,setFieldsValue:y,validateFields:y,submit:y,getInternalHooks:function(){return y(),{dispatch:y,initEntityValue:y,registerField:y,useSubscribe:y,setInitialValues:y,setCallbacks:y,getFields:y,setValidateMessages:y,setPreserve:y}}}),_=b;function x(t){return void 0===t||null===t?[]:Array.isArray(t)?t:[t]}var w=n("TFir"),E=n.n(w),S=n("nWs5"),C=n("uMeh"),T=n("Rtde");function O(t,e){for(var n=t,r=0;r<e.length;r+=1){if(null===n||void 0===n)return;n=n[e[r]]}return n}var A=n("Kjl2"),k=n("HrP/"),M=n("EMO4"),P=n("XwWN");function I(t){return Object(A["a"])(t)||Object(k["a"])(t)||Object(M["a"])(t)||Object(P["a"])()}function L(t,e,n,r){if(!e.length)return n;var i,o=I(e),a=o[0],s=o.slice(1);return i=t||"number"!==typeof a?Array.isArray(t)?Object(c["a"])(t):Object(u["a"])({},t):[],r&&void 0===n&&1===s.length?delete i[a][s[0]]:i[a]=L(i[a],s,n,r),i}function R(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.length&&r&&void 0===n&&!O(t,e.slice(0,-1))?t:L(t,e,n,r)}function D(t){return x(t)}function N(t,e){var n=O(t,e);return n}function j(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=R(t,e,n,r);return i}function F(t,e){var n={};return e.forEach((function(e){var r=N(t,e);n=j(n,e,r)})),n}function z(t,e){return t&&t.some((function(t){return q(t,e)}))}function B(t){return"object"===Object(C["a"])(t)&&null!==t&&Object.getPrototypeOf(t)===Object.prototype}function U(t,e){var n=Array.isArray(t)?Object(c["a"])(t):Object(u["a"])({},t);return e?(Object.keys(e).forEach((function(t){var r=n[t],i=e[t],o=B(r)&&B(i);n[t]=o?U(r,i||{}):i})),n):n}function V(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce((function(t,e){return U(t,e)}),t)}function q(t,e){return!(!t||!e||t.length!==e.length)&&t.every((function(t,n){return e[n]===t}))}function G(t,e){if(t===e)return!0;if(!t&&e||t&&!e)return!1;if(!t||!e||"object"!==Object(C["a"])(t)||"object"!==Object(C["a"])(e))return!1;var n=Object.keys(t),r=Object.keys(e),i=new Set([].concat(Object(c["a"])(n),Object(c["a"])(r)));return Object(c["a"])(i).every((function(n){var r=t[n],i=e[n];return"function"===typeof r&&"function"===typeof i||r===i}))}function H(t){var e=arguments.length<=1?void 0:arguments[1];return e&&e.target&&t in e.target?e.target[t]:e}function W(t,e,n){var r=t.length;if(e<0||e>=r||n<0||n>=r)return t;var i=t[e],o=e-n;return o>0?[].concat(Object(c["a"])(t.slice(0,n)),[i],Object(c["a"])(t.slice(n,e)),Object(c["a"])(t.slice(e+1,r))):o<0?[].concat(Object(c["a"])(t.slice(0,e)),Object(c["a"])(t.slice(e+1,n+1)),[i],Object(c["a"])(t.slice(n+1,r))):t}var X="'${name}' is not a valid ${type}",Z={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:X,method:X,array:X,object:X,number:X,date:X,boolean:X,integer:X,float:X,regexp:X,email:X,url:X,hex:X},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},Y=T["a"];function K(t,e){return t.replace(/\$\{\w+\}/g,(function(t){var n=t.slice(2,-1);return e[n]}))}function J(t,e,n,r){var i=Object(u["a"])(Object(u["a"])({},n),{},{name:e,enum:(n["enum"]||[]).join(", ")}),o=function(t,e){return function(){return K(t,Object(u["a"])(Object(u["a"])({},i),e))}};function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).forEach((function(n){var i=t[n];"string"===typeof i?e[n]=o(i,r):i&&"object"===Object(C["a"])(i)?(e[n]={},a(i,e[n])):e[n]=i})),e}return a(V({},Z,t))}function Q(t,e,n,r,i){return $.apply(this,arguments)}function $(){return $=Object(S["a"])(E.a.mark((function t(e,n,r,o,a){var l,f,p,h,d,v;return E.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return l=Object(u["a"])({},r),f=null,l&&"array"===l.type&&l.defaultField&&(f=l.defaultField,delete l.defaultField),p=new Y(Object(s["a"])({},e,[l])),h=J(o.validateMessages,e,l,a),p.messages(h),d=[],t.prev=7,t.next=10,Promise.resolve(p.validate(Object(s["a"])({},e,n),Object(u["a"])({},o)));case 10:t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](7),t.t0.errors?d=t.t0.errors.map((function(t,e){var n=t.message;return i["isValidElement"](n)?i["cloneElement"](n,{key:"error_".concat(e)}):n})):(console.error(t.t0),d=[h["default"]()]);case 15:if(d.length||!f){t.next=20;break}return t.next=18,Promise.all(n.map((function(t,n){return Q("".concat(e,".").concat(n),t,f,o,a)})));case 18:return v=t.sent,t.abrupt("return",v.reduce((function(t,e){return[].concat(Object(c["a"])(t),Object(c["a"])(e))}),[]));case 20:return t.abrupt("return",d);case 21:case"end":return t.stop()}}),t,null,[[7,12]])}))),$.apply(this,arguments)}function tt(t,e,n,r,i,o){var a,s=t.join("."),c=n.map((function(t){var e=t.validator;return e?Object(u["a"])(Object(u["a"])({},t),{},{validator:function(t,n,r){var i=!1,o=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Promise.resolve().then((function(){Object(m["a"])(!i,"Your validator function has already return a promise. `callback` will be ignored."),i||r.apply(void 0,e)}))},a=e(t,n,o);i=a&&"function"===typeof a.then&&"function"===typeof a["catch"],Object(m["a"])(i,"`callback` is deprecated. Please return a promise instead."),i&&a.then((function(){r()}))["catch"]((function(t){r(t||" ")}))}}):t}));if(!0===i)a=new Promise(function(){var t=Object(S["a"])(E.a.mark((function t(n,i){var a,u;return E.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=0;case 1:if(!(a<c.length)){t.next=11;break}return t.next=4,Q(s,e,c[a],r,o);case 4:if(u=t.sent,!u.length){t.next=8;break}return i(u),t.abrupt("return");case 8:a+=1,t.next=1;break;case 11:n([]);case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());else{var l=c.map((function(t){return Q(s,e,t,r,o)}));a=(i?rt(l):et(l)).then((function(t){return t.length?Promise.reject(t):[]}))}return a["catch"]((function(t){return t})),a}function et(t){return nt.apply(this,arguments)}function nt(){return nt=Object(S["a"])(E.a.mark((function t(e){return E.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.all(e).then((function(t){var e,n=(e=[]).concat.apply(e,Object(c["a"])(t));return n})));case 1:case"end":return t.stop()}}),t)}))),nt.apply(this,arguments)}function rt(t){return it.apply(this,arguments)}function it(){return it=Object(S["a"])(E.a.mark((function t(e){var n;return E.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=0,t.abrupt("return",new Promise((function(t){e.forEach((function(r){r.then((function(r){r.length&&t(r),n+=1,n===e.length&&t([])}))}))})));case 2:case"end":return t.stop()}}),t)}))),it.apply(this,arguments)}function ot(t,e,n,r,i,o){return"function"===typeof t?t(e,n,"source"in o?{source:o.source}:{}):r!==i}var at=function(t){Object(h["a"])(n,t);var e=Object(d["a"])(n);function n(t){var r;if(Object(l["a"])(this,n),r=e.call(this,t),r.state={resetCount:0},r.cancelRegisterFunc=null,r.mounted=!1,r.touched=!1,r.dirty=!1,r.validatePromise=null,r.errors=[],r.cancelRegister=function(){var t=r.props,e=t.preserve,n=t.isListField,i=t.name;r.cancelRegisterFunc&&r.cancelRegisterFunc(n,e,D(i)),r.cancelRegisterFunc=null},r.getNamePath=function(){var t=r.props,e=t.name,n=t.fieldContext,i=n.prefixName,o=void 0===i?[]:i;return void 0!==e?[].concat(Object(c["a"])(o),Object(c["a"])(e)):[]},r.getRules=function(){var t=r.props,e=t.rules,n=void 0===e?[]:e,i=t.fieldContext;return n.map((function(t){return"function"===typeof t?t(i):t}))},r.refresh=function(){r.mounted&&r.setState((function(t){var e=t.resetCount;return{resetCount:e+1}}))},r.onStoreChange=function(t,e,n){var i=r.props,o=i.shouldUpdate,a=i.dependencies,s=void 0===a?[]:a,u=i.onReset,c=n.store,l=r.getNamePath(),f=r.getValue(t),p=r.getValue(c),h=e&&z(e,l);switch("valueUpdate"===n.type&&"external"===n.source&&f!==p&&(r.touched=!0,r.dirty=!0,r.validatePromise=null,r.errors=[]),n.type){case"reset":if(!e||h)return r.touched=!1,r.dirty=!1,r.validatePromise=null,r.errors=[],u&&u(),void r.refresh();break;case"setField":if(h){var d=n.data;return"touched"in d&&(r.touched=d.touched),"validating"in d&&!("originRCField"in d)&&(r.validatePromise=d.validating?Promise.resolve([]):null),"errors"in d&&(r.errors=d.errors||[]),r.dirty=!0,void r.reRender()}if(o&&!l.length&&ot(o,t,c,f,p,n))return void r.reRender();break;case"dependenciesUpdate":var v=s.map(D);if(v.some((function(t){return z(n.relatedFields,t)})))return void r.reRender();break;default:if(h||(!s.length||l.length||o)&&ot(o,t,c,f,p,n))return void r.reRender();break}!0===o&&r.reRender()},r.validateRules=function(t){var e=r.getNamePath(),n=r.getValue(),i=Promise.resolve().then((function(){if(!r.mounted)return[];var o=r.props,a=o.validateFirst,s=void 0!==a&&a,u=o.messageVariables,c=t||{},l=c.triggerName,f=r.getRules();l&&(f=f.filter((function(t){var e=t.validateTrigger;if(!e)return!0;var n=x(e);return n.includes(l)})));var p=tt(e,n,f,t,s,u);return p["catch"]((function(t){return t})).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];r.validatePromise===i&&(r.validatePromise=null,r.errors=t,r.reRender())})),p}));return r.validatePromise=i,r.dirty=!0,r.errors=[],r.reRender(),i},r.isFieldValidating=function(){return!!r.validatePromise},r.isFieldTouched=function(){return r.touched},r.isFieldDirty=function(){return r.dirty},r.getErrors=function(){return r.errors},r.isListField=function(){return r.props.isListField},r.isList=function(){return r.props.isList},r.isPreserve=function(){return r.props.preserve},r.getMeta=function(){r.prevValidating=r.isFieldValidating();var t={touched:r.isFieldTouched(),validating:r.prevValidating,errors:r.errors,name:r.getNamePath()};return t},r.getOnlyChild=function(t){if("function"===typeof t){var e=r.getMeta();return Object(u["a"])(Object(u["a"])({},r.getOnlyChild(t(r.getControlled(),e,r.props.fieldContext))),{},{isFunction:!0})}var n=Object(v["a"])(t);return 1===n.length&&i["isValidElement"](n[0])?{child:n[0],isFunction:!1}:{child:n,isFunction:!1}},r.getValue=function(t){var e=r.props.fieldContext.getFieldsValue,n=r.getNamePath();return N(t||e(!0),n)},r.getControlled=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=r.props,n=e.trigger,i=e.validateTrigger,o=e.getValueFromEvent,a=e.normalize,c=e.valuePropName,l=e.getValueProps,f=e.fieldContext,p=void 0!==i?i:f.validateTrigger,h=r.getNamePath(),d=f.getInternalHooks,v=f.getFieldsValue,m=d(g),y=m.dispatch,b=r.getValue(),_=l||function(t){return Object(s["a"])({},c,t)},w=t[n],E=Object(u["a"])(Object(u["a"])({},t),_(b));E[n]=function(){var t;r.touched=!0,r.dirty=!0;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t=o?o.apply(void 0,n):H.apply(void 0,[c].concat(n)),a&&(t=a(t,b,v(!0))),y({type:"updateValue",namePath:h,value:t}),w&&w.apply(void 0,n)};var S=x(p||[]);return S.forEach((function(t){var e=E[t];E[t]=function(){e&&e.apply(void 0,arguments);var n=r.props.rules;n&&n.length&&y({type:"validateField",namePath:h,triggerName:t})}})),E},t.fieldContext){var o=t.fieldContext.getInternalHooks,a=o(g),f=a.initEntityValue;f(Object(p["a"])(r))}return r}return Object(f["a"])(n,[{key:"componentDidMount",value:function(){var t=this.props,e=t.shouldUpdate,n=t.fieldContext;if(this.mounted=!0,n){var r=n.getInternalHooks,i=r(g),o=i.registerField;this.cancelRegisterFunc=o(this)}!0===e&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var t,e=this.state.resetCount,n=this.props.children,r=this.getOnlyChild(n),o=r.child,a=r.isFunction;return a?t=o:i["isValidElement"](o)?t=i["cloneElement"](o,this.getControlled(o.props)):(Object(m["a"])(!o,"`children` of Field is not validate ReactElement."),t=o),i["createElement"](i["Fragment"],{key:e},t)}}]),n}(i["Component"]);function st(t){var e=t.name,n=Object(a["a"])(t,["name"]),o=i["useContext"](_),s=void 0!==e?D(e):void 0,u="keep";return n.isListField||(u="_".concat((s||[]).join("_"))),i["createElement"](at,Object(r["a"])({key:u,name:s},n,{fieldContext:o}))}at.contextType=_,at.defaultProps={trigger:"onChange",valuePropName:"value"};var ut=st,ct=function(t){var e=t.name,n=t.initialValue,r=t.children,o=t.rules,a=t.validateTrigger,s=i["useContext"](_),l=i["useRef"]({keys:[],id:0}),f=l.current;if("function"!==typeof r)return Object(m["a"])(!1,"Form.List only accepts function as children."),null;var p=D(s.prefixName)||[],h=[].concat(Object(c["a"])(p),Object(c["a"])(D(e))),d=function(t,e,n){var r=n.source;return"internal"!==r&&t!==e};return i["createElement"](_.Provider,{value:Object(u["a"])(Object(u["a"])({},s),{},{prefixName:h})},i["createElement"](ut,{name:[],shouldUpdate:d,rules:o,validateTrigger:a,initialValue:n,isList:!0},(function(t,e){var n=t.value,i=void 0===n?[]:n,o=t.onChange,a=s.getFieldValue,u=function(){var t=a(h||[]);return t||[]},l={add:function(t,e){var n=u();e>=0&&e<=n.length?(f.keys=[].concat(Object(c["a"])(f.keys.slice(0,e)),[f.id],Object(c["a"])(f.keys.slice(e))),o([].concat(Object(c["a"])(n.slice(0,e)),[t],Object(c["a"])(n.slice(e))))):(f.keys=[].concat(Object(c["a"])(f.keys),[f.id]),o([].concat(Object(c["a"])(n),[t]))),f.id+=1},remove:function(t){var e=u(),n=new Set(Array.isArray(t)?t:[t]);n.size<=0||(f.keys=f.keys.filter((function(t,e){return!n.has(e)})),o(e.filter((function(t,e){return!n.has(e)}))))},move:function(t,e){if(t!==e){var n=u();t<0||t>=n.length||e<0||e>=n.length||(f.keys=W(f.keys,t,e),o(W(n,t,e)))}}},p=i||[];return Array.isArray(p)||(p=[]),r(p.map((function(t,e){var n=f.keys[e];return void 0===n&&(f.keys[e]=f.id,n=f.keys[e],f.id+=1),{name:e,key:n,isListField:!0}})),l,e)})))},lt=ct,ft=n("rRIJ");function pt(t){var e=!1,n=t.length,r=[];return t.length?new Promise((function(i,o){t.forEach((function(t,a){t["catch"]((function(t){return e=!0,t})).then((function(t){n-=1,r[a]=t,n>0||(e&&o(r),i(r))}))}))})):Promise.resolve([])}var ht="__@field_split__";function dt(t){return t.map((function(t){return"".concat(Object(C["a"])(t),":").concat(t)})).join(ht)}var vt=function(){function t(){Object(l["a"])(this,t),this.kvs=new Map}return Object(f["a"])(t,[{key:"set",value:function(t,e){this.kvs.set(dt(t),e)}},{key:"get",value:function(t){return this.kvs.get(dt(t))}},{key:"update",value:function(t,e){var n=this.get(t),r=e(n);r?this.set(t,r):this["delete"](t)}},{key:"delete",value:function(t){this.kvs["delete"](dt(t))}},{key:"map",value:function(t){return Object(c["a"])(this.kvs.entries()).map((function(e){var n=Object(ft["a"])(e,2),r=n[0],i=n[1],o=r.split(ht);return t({key:o.map((function(t){var e=t.match(/^([^:]*):(.*)$/),n=Object(ft["a"])(e,3),r=n[1],i=n[2];return"number"===r?Number(i):i})),value:i})}))}},{key:"toJSON",value:function(){var t={};return this.map((function(e){var n=e.key,r=e.value;return t[n.join(".")]=r,null})),t}}]),t}(),mt=vt,gt=function t(e){var n=this;Object(l["a"])(this,t),this.formHooked=!1,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,getInternalHooks:n.getInternalHooks}},this.getInternalHooks=function(t){return t===g?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve}):(Object(m["a"])(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(t){n.subscribable=t},this.setInitialValues=function(t,e){n.initialValues=t||{},e&&(n.store=V({},t,n.store))},this.getInitialValue=function(t){return N(n.initialValues,t)},this.setCallbacks=function(t){n.callbacks=t},this.setValidateMessages=function(t){n.validateMessages=t},this.setPreserve=function(t){n.preserve=t},this.timeoutId=null,this.warningUnhooked=function(){0},this.getFieldEntities=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t?n.fieldEntities.filter((function(t){return t.getNamePath().length})):n.fieldEntities},this.getFieldsMap=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=new mt;return n.getFieldEntities(t).forEach((function(t){var n=t.getNamePath();e.set(n,t)})),e},this.getFieldEntitiesForNamePathList=function(t){if(!t)return n.getFieldEntities(!0);var e=n.getFieldsMap(!0);return t.map((function(t){var n=D(t);return e.get(n)||{INVALIDATE_NAME_PATH:D(t)}}))},this.getFieldsValue=function(t,e){if(n.warningUnhooked(),!0===t&&!e)return n.store;var r=n.getFieldEntitiesForNamePathList(Array.isArray(t)?t:null),i=[];return r.forEach((function(n){var r,o="INVALIDATE_NAME_PATH"in n?n.INVALIDATE_NAME_PATH:n.getNamePath();if(t||!(null===(r=n.isListField)||void 0===r?void 0:r.call(n)))if(e){var a="getMeta"in n?n.getMeta():null;e(a)&&i.push(o)}else i.push(o)})),F(n.store,i.map(D))},this.getFieldValue=function(t){n.warningUnhooked();var e=D(t);return N(n.store,e)},this.getFieldsError=function(t){n.warningUnhooked();var e=n.getFieldEntitiesForNamePathList(t);return e.map((function(e,n){return e&&!("INVALIDATE_NAME_PATH"in e)?{name:e.getNamePath(),errors:e.getErrors()}:{name:D(t[n]),errors:[]}}))},this.getFieldError=function(t){n.warningUnhooked();var e=D(t),r=n.getFieldsError([e])[0];return r.errors},this.isFieldsTouched=function(){n.warningUnhooked();for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i,o=e[0],a=e[1],s=!1;0===e.length?i=null:1===e.length?Array.isArray(o)?(i=o.map(D),s=!1):(i=null,s=o):(i=o.map(D),s=a);var u=n.getFieldEntities(!0),l=function(t){return t.isFieldTouched()};if(!i)return s?u.every(l):u.some(l);var f=new mt;i.forEach((function(t){f.set(t,[])})),u.forEach((function(t){var e=t.getNamePath();i.forEach((function(n){n.every((function(t,n){return e[n]===t}))&&f.update(n,(function(e){return[].concat(Object(c["a"])(e),[t])}))}))}));var p=function(t){return t.some(l)},h=f.map((function(t){var e=t.value;return e}));return s?h.every(p):h.some(p)},this.isFieldTouched=function(t){return n.warningUnhooked(),n.isFieldsTouched([t])},this.isFieldsValidating=function(t){n.warningUnhooked();var e=n.getFieldEntities();if(!t)return e.some((function(t){return t.isFieldValidating()}));var r=t.map(D);return e.some((function(t){var e=t.getNamePath();return z(r,e)&&t.isFieldValidating()}))},this.isFieldValidating=function(t){return n.warningUnhooked(),n.isFieldsValidating([t])},this.resetWithFieldInitialValue=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new mt,r=n.getFieldEntities(!0);r.forEach((function(t){var n=t.props.initialValue,r=t.getNamePath();if(void 0!==n){var i=e.get(r)||new Set;i.add({entity:t,value:n}),e.set(r,i)}}));var i,o=function(r){r.forEach((function(r){var i=r.props.initialValue;if(void 0!==i){var o=r.getNamePath(),a=n.getInitialValue(o);if(void 0!==a)Object(m["a"])(!1,"Form already set 'initialValues' with path '".concat(o.join("."),"'. Field can not overwrite it."));else{var s=e.get(o);if(s&&s.size>1)Object(m["a"])(!1,"Multiple Field with path '".concat(o.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(s){var u=n.getFieldValue(o);t.skipExist&&void 0!==u||(n.store=j(n.store,o,Object(c["a"])(s)[0].value))}}}}))};t.entities?i=t.entities:t.namePathList?(i=[],t.namePathList.forEach((function(t){var n,r=e.get(t);r&&(n=i).push.apply(n,Object(c["a"])(Object(c["a"])(r).map((function(t){return t.entity}))))}))):i=r,o(i)},this.resetFields=function(t){n.warningUnhooked();var e=n.store;if(!t)return n.store=V({},n.initialValues),n.resetWithFieldInitialValue(),void n.notifyObservers(e,null,{type:"reset"});var r=t.map(D);r.forEach((function(t){var e=n.getInitialValue(t);n.store=j(n.store,t,e)})),n.resetWithFieldInitialValue({namePathList:r}),n.notifyObservers(e,r,{type:"reset"})},this.setFields=function(t){n.warningUnhooked();var e=n.store;t.forEach((function(t){var r=t.name,i=(t.errors,Object(a["a"])(t,["name","errors"])),o=D(r);"value"in i&&(n.store=j(n.store,o,i.value)),n.notifyObservers(e,[o],{type:"setField",data:t})}))},this.getFields=function(){var t=n.getFieldEntities(!0),e=t.map((function(t){var e=t.getNamePath(),r=t.getMeta(),i=Object(u["a"])(Object(u["a"])({},r),{},{name:e,value:n.getFieldValue(e)});return Object.defineProperty(i,"originRCField",{value:!0}),i}));return e},this.initEntityValue=function(t){var e=t.props.initialValue;if(void 0!==e){var r=t.getNamePath(),i=N(n.store,r);void 0===i&&(n.store=j(n.store,r,e))}},this.registerField=function(t){if(n.fieldEntities.push(t),void 0!==t.props.initialValue){var e=n.store;n.resetWithFieldInitialValue({entities:[t],skipExist:!0}),n.notifyObservers(e,[t.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];n.fieldEntities=n.fieldEntities.filter((function(e){return e!==t}));var o=void 0!==r?r:n.preserve;if(!1===o&&(!e||i.length>1)){var a=t.getNamePath(),s=e?void 0:N(n.initialValues,a);a.length&&n.getFieldValue(a)!==s&&n.fieldEntities.every((function(t){return!q(t.getNamePath(),a)}))&&(n.store=j(n.store,a,s,!0))}}},this.dispatch=function(t){switch(t.type){case"updateValue":var e=t.namePath,r=t.value;n.updateValue(e,r);break;case"validateField":var i=t.namePath,o=t.triggerName;n.validateFields([i],{triggerName:o});break;default:}},this.notifyObservers=function(t,e,r){if(n.subscribable){var i=Object(u["a"])(Object(u["a"])({},r),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach((function(n){var r=n.onStoreChange;r(t,e,i)}))}else n.forceRootUpdate()},this.updateValue=function(t,e){var r=D(t),i=n.store;n.store=j(n.store,r,e),n.notifyObservers(i,[r],{type:"valueUpdate",source:"internal"});var o=n.getDependencyChildrenFields(r);o.length&&n.validateFields(o),n.notifyObservers(i,o,{type:"dependenciesUpdate",relatedFields:[r].concat(Object(c["a"])(o))});var a=n.callbacks.onValuesChange;if(a){var s=F(n.store,[r]);a(s,n.getFieldsValue())}n.triggerOnFieldsChange([r].concat(Object(c["a"])(o)))},this.setFieldsValue=function(t){n.warningUnhooked();var e=n.store;t&&(n.store=V(n.store,t)),n.notifyObservers(e,null,{type:"valueUpdate",source:"external"})},this.getDependencyChildrenFields=function(t){var e=new Set,r=[],i=new mt;n.getFieldEntities().forEach((function(t){var e=t.props.dependencies;(e||[]).forEach((function(e){var n=D(e);i.update(n,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return e.add(t),e}))}))}));var o=function t(n){var o=i.get(n)||new Set;o.forEach((function(n){if(!e.has(n)){e.add(n);var i=n.getNamePath();n.isFieldDirty()&&i.length&&(r.push(i),t(i))}}))};return o(t),r},this.triggerOnFieldsChange=function(t,e){var r=n.callbacks.onFieldsChange;if(r){var i=n.getFields();if(e){var o=new mt;e.forEach((function(t){var e=t.name,n=t.errors;o.set(e,n)})),i.forEach((function(t){t.errors=o.get(t.name)||t.errors}))}var a=i.filter((function(e){var n=e.name;return z(t,n)}));r(a,i)}},this.validateFields=function(t,e){n.warningUnhooked();var r=!!t,i=r?t.map(D):[],o=[];n.getFieldEntities(!0).forEach((function(a){if(r||i.push(a.getNamePath()),(null===e||void 0===e?void 0:e.recursive)&&r){var s=a.getNamePath();s.every((function(e,n){return t[n]===e||void 0===t[n]}))&&i.push(s)}if(a.props.rules&&a.props.rules.length){var c=a.getNamePath();if(!r||z(i,c)){var l=a.validateRules(Object(u["a"])({validateMessages:Object(u["a"])(Object(u["a"])({},Z),n.validateMessages)},e));o.push(l.then((function(){return{name:c,errors:[]}}))["catch"]((function(t){return Promise.reject({name:c,errors:t})})))}}}));var a=pt(o);n.lastValidatePromise=a,a["catch"]((function(t){return t})).then((function(t){var e=t.map((function(t){var e=t.name;return e}));n.notifyObservers(n.store,e,{type:"validateFinish"}),n.triggerOnFieldsChange(e,t)}));var s=a.then((function(){return n.lastValidatePromise===a?Promise.resolve(n.getFieldsValue(i)):Promise.reject([])}))["catch"]((function(t){var e=t.filter((function(t){return t&&t.errors.length}));return Promise.reject({values:n.getFieldsValue(i),errorFields:e,outOfDate:n.lastValidatePromise!==a})}));return s["catch"]((function(t){return t})),s},this.submit=function(){n.warningUnhooked(),n.validateFields().then((function(t){var e=n.callbacks.onFinish;if(e)try{e(t)}catch(r){console.error(r)}}))["catch"]((function(t){var e=n.callbacks.onFinishFailed;e&&e(t)}))},this.forceRootUpdate=e};function yt(t){var e=i["useRef"](),n=i["useState"]({}),r=Object(ft["a"])(n,2),o=r[1];if(!e.current)if(t)e.current=t;else{var a=function(){o({})},s=new gt(a);e.current=s.getForm()}return[e.current]}var bt=yt,_t=i["createContext"]({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),xt=function(t){var e=t.validateMessages,n=t.onFormChange,r=t.onFormFinish,o=t.children,a=i["useContext"](_t),c=i["useRef"]({});return i["createElement"](_t.Provider,{value:Object(u["a"])(Object(u["a"])({},a),{},{validateMessages:Object(u["a"])(Object(u["a"])({},a.validateMessages),e),triggerFormChange:function(t,e){n&&n(t,{changedFields:e,forms:c.current}),a.triggerFormChange(t,e)},triggerFormFinish:function(t,e){r&&r(t,{values:e,forms:c.current}),a.triggerFormFinish(t,e)},registerForm:function(t,e){t&&(c.current=Object(u["a"])(Object(u["a"])({},c.current),{},Object(s["a"])({},t,e))),a.registerForm(t,e)},unregisterForm:function(t){var e=Object(u["a"])({},c.current);delete e[t],c.current=e,a.unregisterForm(t)}})},o)},wt=_t,Et=function(t,e){var n=t.name,o=t.initialValues,s=t.fields,c=t.form,l=t.preserve,f=t.children,p=t.component,h=void 0===p?"form":p,d=t.validateMessages,v=t.validateTrigger,m=void 0===v?"onChange":v,y=t.onValuesChange,b=t.onFieldsChange,x=t.onFinish,w=t.onFinishFailed,E=Object(a["a"])(t,["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"]),S=i["useContext"](wt),C=bt(c),T=Object(ft["a"])(C,1),O=T[0],A=O.getInternalHooks(g),k=A.useSubscribe,M=A.setInitialValues,P=A.setCallbacks,I=A.setValidateMessages,L=A.setPreserve;i["useImperativeHandle"](e,(function(){return O})),i["useEffect"]((function(){return S.registerForm(n,O),function(){S.unregisterForm(n)}}),[S,O,n]),I(Object(u["a"])(Object(u["a"])({},S.validateMessages),d)),P({onValuesChange:y,onFieldsChange:function(t){if(S.triggerFormChange(n,t),b){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];b.apply(void 0,[t].concat(r))}},onFinish:function(t){S.triggerFormFinish(n,t),x&&x(t)},onFinishFailed:w}),L(l);var R=i["useRef"](null);M(o,!R.current),R.current||(R.current=!0);var D=f,N="function"===typeof f;if(N){var j=O.getFieldsValue(!0);D=f(j,O)}k(!N);var F=i["useRef"]();i["useEffect"]((function(){G(F.current||[],s||[])||O.setFields(s||[]),F.current=s}),[s,O]);var z=i["useMemo"]((function(){return Object(u["a"])(Object(u["a"])({},O),{},{validateTrigger:m})}),[O,m]),B=i["createElement"](_.Provider,{value:z},D);return!1===h?B:i["createElement"](h,Object(r["a"])({},E,{onSubmit:function(t){t.preventDefault(),t.stopPropagation(),O.submit()},onReset:function(t){var e;t.preventDefault(),O.resetFields(),null===(e=E.onReset)||void 0===e||e.call(E,t)}}),B)},St=Et,Ct=i["forwardRef"](St),Tt=Ct;Tt.FormProvider=xt,Tt.Field=ut,Tt.List=lt,Tt.useForm=bt;var Ot=n("mcYp"),At=n("hkks"),kt=n("+hmf"),Mt=Object(r["a"])({},kt["a"].Modal);function Pt(t){Mt=t?Object(r["a"])(Object(r["a"])({},Mt),t):Object(r["a"])({},kt["a"].Modal)}var It=n("zJnk"),Lt="internalMark",Rt=function(t){Object(h["a"])(n,t);var e=Object(d["a"])(n);function n(t){var r;return Object(l["a"])(this,n),r=e.call(this,t),Pt(t.locale&&t.locale.Modal),Object(At["a"])(t._ANT_MARK__===Lt,"LocaleProvider","`LocaleProvider` is deprecated. Please use `locale` with `ConfigProvider` instead: http://u.ant.design/locale"),r}return Object(f["a"])(n,[{key:"componentDidMount",value:function(){Pt(this.props.locale&&this.props.locale.Modal)}},{key:"componentDidUpdate",value:function(t){var e=this.props.locale;t.locale!==e&&Pt(e&&e.Modal)}},{key:"componentWillUnmount",value:function(){Pt()}},{key:"render",value:function(){var t=this.props,e=t.locale,n=t.children;return i["createElement"](It["a"].Provider,{value:Object(r["a"])(Object(r["a"])({},e),{exist:!0})},n)}}]),n}(i["Component"]);Rt.defaultProps={locale:{}};var Dt,Nt=n("VaST"),jt=n("vAUc"),Ft=n("TlJp"),zt=n("lD53"),Bt=n("y5iR"),Ut=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","form"],Vt="ant",qt=function(t){void 0!==t.prefixCls&&(Dt=t.prefixCls)};function Gt(){return Dt||Vt}var Ht=function(){return{getPrefixCls:function(t,e){return e||(t?"".concat(Gt(),"-").concat(t):Gt())},getRootPrefixCls:function(t,e){return t||(Dt||(e&&e.includes("-")?e.replace(/^(.*)-[^-]*$/,"$1"):Gt()))}}},Wt=function(t){var e,n,a=t.children,s=t.csp,u=t.autoInsertSpaceInButton,c=t.form,l=t.locale,f=t.componentSize,p=t.direction,h=t.space,d=t.virtual,v=t.dropdownMatchSelectWidth,m=t.legacyLocale,g=t.parentContext,y=t.iconPrefixCls,b=i["useCallback"]((function(e,n){var r=t.prefixCls;if(n)return n;var i=r||g.getPrefixCls("");return e?"".concat(i,"-").concat(e):i}),[g.getPrefixCls,t.prefixCls]),_=Object(r["a"])(Object(r["a"])({},g),{csp:s,autoInsertSpaceInButton:u,locale:l||m,direction:p,space:h,virtual:d,dropdownMatchSelectWidth:v,getPrefixCls:b});Ut.forEach((function(e){var n=t[e];n&&(_[e]=n)}));var x=Object(Ot["a"])((function(){return _}),_,(function(t,e){var n=Object.keys(t),r=Object.keys(e);return n.length!==r.length||n.some((function(n){return t[n]!==e[n]}))})),w=i["useMemo"]((function(){return{prefixCls:y,csp:s}}),[y]),E=a,S={};return l&&(S=(null===(e=l.Form)||void 0===e?void 0:e.defaultValidateMessages)||(null===(n=kt["a"].Form)||void 0===n?void 0:n.defaultValidateMessages)||{}),c&&c.validateMessages&&(S=Object(r["a"])(Object(r["a"])({},S),c.validateMessages)),Object.keys(S).length>0&&(E=i["createElement"](xt,{validateMessages:S},a)),l&&(E=i["createElement"](Rt,{locale:l,_ANT_MARK__:Lt},E)),y&&(E=i["createElement"](o["a"].Provider,{value:w},E)),f&&(E=i["createElement"](Ft["a"],{size:f},E)),i["createElement"](jt["b"].Provider,{value:x},E)},Xt=function(t){return i["useEffect"]((function(){t.direction&&(zt["default"].config({rtl:"rtl"===t.direction}),Bt["default"].config({rtl:"rtl"===t.direction}))}),[t.direction]),i["createElement"](Nt["a"],null,(function(e,n,o){return i["createElement"](jt["a"],null,(function(e){return i["createElement"](Wt,Object(r["a"])({parentContext:e,legacyLocale:o},t))}))}))};Xt.ConfigContext=jt["b"],Xt.SizeContext=Ft["b"],Xt.config=qt},ma2j:function(t,e,n){"use strict";var r=n("hXyk");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},masK:function(t,e,n){var r=n("GUTS");t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},mcYp:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("xwgP");function i(t,e,n){var i=r["useRef"]({});return"value"in i.current&&!n(i.current.condition,e)||(i.current.value=t(),i.current.condition=e),i.current.value}},me7Q:function(t,e,n){"use strict";var r=n("HIsA"),i=n("afop"),o=n("kI7s"),a=n("UPu9"),s=n("J7X1"),u=n("D8FR"),c=n("GUTS"),l=n("kPvK"),f=n("m52V"),p=n("mAbK"),h=n("Krz3"),d=h.IteratorPrototype,v=h.BUGGY_SAFARI_ITERATORS,m=l("iterator"),g="keys",y="values",b="entries",_=function(){return this};t.exports=function(t,e,n,l,h,x,w){i(n,e,l);var E,S,C,T=function(t){if(t===h&&P)return P;if(!v&&t in k)return k[t];switch(t){case g:return function(){return new n(this,t)};case y:return function(){return new n(this,t)};case b:return function(){return new n(this,t)}}return function(){return new n(this)}},O=e+" Iterator",A=!1,k=t.prototype,M=k[m]||k["@@iterator"]||h&&k[h],P=!v&&M||T(h),I="Array"==e&&k.entries||M;if(I&&(E=o(I.call(new t)),d!==Object.prototype&&E.next&&(f||o(E)===d||(a?a(E,d):"function"!=typeof E[m]&&u(E,m,_)),s(E,O,!0,!0),f&&(p[O]=_))),h==y&&M&&M.name!==y&&(A=!0,P=function(){return M.call(this)}),f&&!w||k[m]===P||u(k,m,P),p[e]=P,h)if(S={values:T(y),keys:x?P:T(g),entries:T(b)},w)for(C in S)(v||A||!(C in k))&&c(k,C,S[C]);else r({target:e,proto:!0,forced:v||A},S);return S}},mjh8:function(t,e){var n=9007199254740991;function r(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}t.exports=r},mlmj:function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("bXon"),a=n("hXyk"),s=n("DDwO"),u=n("70zE"),c=n("Ji6T");r({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:function(t){var e=a(this),n=new(u(e,o("Set")))(e),r=s(n["delete"]),i=s(n.add);return c(t,(function(t){r.call(n,t)||i.call(n,t)})),n}})},"n+WB":function(t,e,n){var r=n("hXyk"),i=n("pxmn"),o=n("0MLT");t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t),a=n.resolve;return a(e),n.promise}},n2ef:function(t,e,n){var r=n("pxmn");t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},n2r9:function(t,e,n){"use strict";var r=n("HIsA"),i=n("afop"),o=n("JzK+"),a=n("2I03"),s=n("DDwO"),u=n("hXyk"),c=n("IRht"),l=n("ihzt"),f=n("ma2j"),p=n("D8FR"),h=n("7+LC"),d=n("kPvK"),v=n("70zE"),m=n("OOuR"),g=n("twJ5"),y=n("m52V"),b=d("matchAll"),_="RegExp String",x=_+" Iterator",w=g.set,E=g.getterFor(x),S=RegExp.prototype,C=S.exec,T="".matchAll,O=!!T&&!h((function(){"a".matchAll(/./)})),A=function(t,e){var n,r=t.exec;if("function"==typeof r){if(n=r.call(t,e),"object"!=typeof n)throw TypeError("Incorrect exec result");return n}return C.call(t,e)},k=i((function(t,e,n,r){w(this,{type:x,regexp:t,string:e,global:n,unicode:r,done:!1})}),_,(function(){var t=E(this);if(t.done)return{value:void 0,done:!0};var e=t.regexp,n=t.string,r=A(e,n);return null===r?{value:void 0,done:t.done=!0}:t.global?(""==String(r[0])&&(e.lastIndex=m(n,a(e.lastIndex),t.unicode)),{value:r,done:!1}):(t.done=!0,{value:r,done:!1})})),M=function(t){var e,n,r,i,o,s,c=u(this),l=String(t);return e=v(c,RegExp),n=c.flags,void 0===n&&c instanceof RegExp&&!("flags"in S)&&(n=f.call(c)),r=void 0===n?"":String(n),i=new e(e===RegExp?c.source:c,r),o=!!~r.indexOf("g"),s=!!~r.indexOf("u"),i.lastIndex=a(c.lastIndex),new k(i,l,o,s)};r({target:"String",proto:!0,forced:O},{matchAll:function(t){var e,n,r,i,a=o(this);if(null!=t){if(l(t)&&(e=String(o("flags"in S?t.flags:f.call(t))),!~e.indexOf("g")))throw TypeError("`.matchAll` does not allow non-global regexes");if(O)return T.apply(a,arguments);if(r=t[b],void 0===r&&y&&"RegExp"==c(t)&&(r=M),null!=r)return s(r).call(t,a)}else if(O)return T.apply(a,arguments);return n=String(a),i=new RegExp(t,"g"),y?M.call(i,n):i[b](n)}}),y||b in S||p(S,b,M)},nKQv:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("SUfK"),i="rc-util-key";function o(t){if(t.attachTo)return t.attachTo;var e=document.querySelector("head");return e||document.body}function a(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Object(r["a"])())return null;var i,a=document.createElement("style");(null===(e=n.csp)||void 0===e?void 0:e.nonce)&&(a.nonce=null===(i=n.csp)||void 0===i?void 0:i.nonce);a.innerHTML=t;var s=o(n),u=s.firstChild;return n.prepend&&s.prepend?s.prepend(a):n.prepend&&u?s.insertBefore(a,u):s.appendChild(a),a}var s=new Map;function u(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=o(n);if(!s.has(r)){var u=a("",n),c=u.parentNode;s.set(r,c),c.removeChild(u)}var l=Array.from(s.get(r).children).find((function(t){return"STYLE"===t.tagName&&t[i]===e}));if(l){var f,p,h;if((null===(f=n.csp)||void 0===f?void 0:f.nonce)&&l.nonce!==(null===(p=n.csp)||void 0===p?void 0:p.nonce))l.nonce=null===(h=n.csp)||void 0===h?void 0:h.nonce;return l.innerHTML!==t&&(l.innerHTML=t),l}var d=a(t,n);return d[i]=e,d}},nKrB:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return i}))},nMhH:function(t,e,n){var r=n("HIsA"),i=n("Ji6T"),o=n("G70G");r({target:"Object",stat:!0},{fromEntries:function(t){var e={};return i(t,(function(t,n){o(e,t,n)}),void 0,!0),e}})},"nPP+":function(t,e,n){"use strict";var r=n("sqIH"),i=n("hXyk"),o=n("JzK+"),a=n("nVx8"),s=n("WdrS");r("search",1,(function(t,e,n){return[function(e){var n=o(this),r=void 0==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var o=i(t),u=String(this),c=o.lastIndex;a(c,0)||(o.lastIndex=0);var l=s(o,u);return a(o.lastIndex,c)||(o.lastIndex=c),null===l?-1:l.index}]}))},nRm0:function(t,e){var n=/\w*$/;function r(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}t.exports=r},nTTP:function(t,e,n){var r=n("KRrj");function i(t,e,n){var i=t.length;return n=void 0===n?i:n,!e&&n>=i?t:r(t,e,n)}t.exports=i},nVx8:function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},nW1o:function(t,e){function n(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}t.exports=n},nWs5:function(t,e,n){"use strict";function r(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,u,"next",t)}function u(t){r(a,i,o,s,u,"throw",t)}s(void 0)}))}}n.d(e,"a",(function(){return i}))},nXFK:function(t,e,n){var r=n("7+LC"),i=n("kPvK"),o=n("m52V"),a=i("iterator");t.exports=!r((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,r){e["delete"]("b"),n+=r+t})),o&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},nsiD:function(t,e,n){"use strict";var r=n("HIsA"),i=n("Hiyu"),o=n("12fA"),a=n("NVMI"),s=n("DDwO"),u=n("2RC6");i&&r({target:"Object",proto:!0,forced:o},{__defineSetter__:function(t,e){u.f(a(this),t,{set:s(e),enumerable:!0,configurable:!0})}})},nufT:function(t,e,n){var r=n("HIsA"),i=n("icJ8"),o=n("hXyk"),a=i.keys,s=i.toKey;r({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(t){var e=arguments.length<2?void 0:s(arguments[1]);return a(o(t),e)}})},o0xK:function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("hXyk"),a=n("40mc"),s=n("YjHi"),u=n("Ji6T");r({target:"Map",proto:!0,real:!0,forced:i},{every:function(t){var e=o(this),n=s(e),r=a(t,arguments.length>1?arguments[1]:void 0,3);return!u(n,(function(t,n){if(!r(n,t,e))return u.stop()}),void 0,!0,!0).stopped}})},o1AR:function(t,e,n){"use strict";var r=n("HIsA"),i=n("Hiyu"),o=n("12fA"),a=n("NVMI"),s=n("n2ef"),u=n("kI7s"),c=n("qmtO").f;i&&r({target:"Object",proto:!0,forced:o},{__lookupGetter__:function(t){var e,n=a(this),r=s(t,!0);do{if(e=c(n,r))return e.get}while(n=u(n))}})},o6tZ:function(t,e,n){"use strict";function r(){var t=n("xwgP");return r=function(){return t},t}function i(){var t=o(n("rXtS"));return i=function(){return t},t}function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){return f(t)||l(t,e)||u(t,e)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,e){if(t){if("string"===typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function f(t){if(Array.isArray(t))return t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var p=function(){var t=(0,r().useState)(),e=a(t,2),n=e[0],o=e[1],s=(0,r().useState)("ready"),u=a(s,2),c=u[0],l=u[1],f=(0,r().useCallback)((function(t){(0,i()["default"])(t),l("copied"),clearTimeout(n),o(setTimeout((function(){l("ready")}),2e3))}),[]);return[f,c]};e["default"]=p},o9qH:function(t,e,n){"use strict";var r=n("pxmn"),i=n("2RC6"),o=n("kI7s"),a=n("kPvK"),s=a("hasInstance"),u=Function.prototype;s in u||i.f(u,s,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;while(t=o(t))if(this.prototype===t)return!0;return!1}})},oDub:function(t,e,n){var r=n("bVFb");r("asyncIterator")},oFyO:function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("bXon"),a=n("hXyk"),s=n("DDwO"),u=n("70zE"),c=n("Ji6T");r({target:"Set",proto:!0,real:!0,forced:i},{difference:function(t){var e=a(this),n=new(u(e,o("Set")))(e),r=s(n["delete"]);return c(t,(function(t){r.call(n,t)})),n}})},oN6F:function(t,e){(function(e){t.exports=function(){var t={873:function(t){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(n){"object"===typeof window&&(e=window)}t.exports=e}},n={};function r(e){if(n[e])return n[e].exports;var i=n[e]={exports:{}},o=!0;try{t[e](i,i.exports,r),o=!1}finally{o&&delete n[e]}return i.exports}return r.ab=e+"/",r(873)}()}).call(this,"/")},oSqR:function(t,e,n){"use strict";n.r(e);var r=n("xwgP"),i=n.n(r),o=n("M2Sr"),a=n("FpZt"),s=n("rRIJ"),u=n("uMeh"),c=n("8tFq"),l=n("TWOK"),f=n("jK+o"),p=n.n(f),h=n("shUE"),d=function(){if("undefined"===typeof navigator||"undefined"===typeof window)return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null===t||void 0===t?void 0:t.substr(0,4)))};function v(t,e){var n=e||{},i=n.defaultValue,o=n.value,a=n.onChange,u=n.postState,c=r["useState"]((function(){return void 0!==o?o:void 0!==i?"function"===typeof i?i():i:"function"===typeof t?t():t})),l=Object(s["a"])(c,2),f=l[0],p=l[1],h=void 0!==o?o:f;function d(t){p(t),h!==t&&a&&a(t,h)}u&&(h=u(h));var v=r["useRef"](!0);return r["useEffect"]((function(){v.current?v.current=!1:void 0===o&&p(o)}),[o]),[h,d]}var m=n("8rYJ"),g=n("ZOCG"),y=n("kUw8"),b=n("nKrB"),_=n("XF5O"),x=n("tST3"),w=n("30a0"),E=n("HWpy"),S=n("67H3"),C=n("BlUI"),T="rc-observer-key",O=function(t){Object(_["a"])(n,t);var e=Object(x["a"])(n);function n(){var t;return Object(y["a"])(this,n),t=e.apply(this,arguments),t.resizeObserver=null,t.childNode=null,t.currentElement=null,t.state={width:0,height:0,offsetHeight:0,offsetWidth:0},t.onResize=function(e){var n=t.props.onResize,r=e[0].target,i=r.getBoundingClientRect(),o=i.width,a=i.height,s=r.offsetWidth,u=r.offsetHeight,c=Math.floor(o),f=Math.floor(a);if(t.state.width!==c||t.state.height!==f||t.state.offsetWidth!==s||t.state.offsetHeight!==u){var p={width:c,height:f,offsetWidth:s,offsetHeight:u};t.setState(p),n&&Promise.resolve().then((function(){n(Object(l["a"])(Object(l["a"])({},p),{},{offsetWidth:s,offsetHeight:u}),r)}))}},t.setChildNode=function(e){t.childNode=e},t}return Object(b["a"])(n,[{key:"componentDidMount",value:function(){this.onComponentUpdated()}},{key:"componentDidUpdate",value:function(){this.onComponentUpdated()}},{key:"componentWillUnmount",value:function(){this.destroyObserver()}},{key:"onComponentUpdated",value:function(){var t=this.props.disabled;if(t)this.destroyObserver();else{var e=Object(w["a"])(this.childNode||this),n=e!==this.currentElement;n&&(this.destroyObserver(),this.currentElement=e),!this.resizeObserver&&e&&(this.resizeObserver=new C["a"](this.onResize),this.resizeObserver.observe(e))}}},{key:"destroyObserver",value:function(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}},{key:"render",value:function(){var t=this.props.children,e=Object(h["a"])(t);if(e.length>1)Object(E["a"])(!1,"Find more than one child node with `children` in ResizeObserver. Will only observe first one.");else if(0===e.length)return Object(E["a"])(!1,"`children` of ResizeObserver is empty. Nothing is in observe."),null;var n=e[0];if(r["isValidElement"](n)&&Object(S["c"])(n)){var i=n.ref;e[0]=r["cloneElement"](n,{ref:Object(S["a"])(i,this.setChildNode)})}return 1===e.length?e[0]:e.map((function(t,e){return!r["isValidElement"](t)||"key"in t&&null!==t.key?t:r["cloneElement"](t,{key:"".concat(T,"-").concat(e)})}))}}]),n}(r["Component"]);O.displayName="ResizeObserver";var A=O;function k(t){var e=Object(r["useRef"])(),n=Object(r["useRef"])(!1);function i(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];n.current||(g["a"].cancel(e.current),e.current=Object(g["a"])((function(){t.apply(void 0,i)})))}return Object(r["useEffect"])((function(){return function(){n.current=!0,g["a"].cancel(e.current)}}),[]),i}function M(t){var e=Object(r["useRef"])([]),n=Object(r["useState"])({}),i=Object(s["a"])(n,2),o=i[1],a=Object(r["useRef"])("function"===typeof t?t():t),u=k((function(){var t=a.current;e.current.forEach((function(e){t=e(t)})),e.current=[],a.current=t,o({})}));function c(t){e.current.push(t),u()}return[a.current,c]}var P={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var e=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||e>=P.F1&&e<=P.F12)return!1;switch(e){case P.ALT:case P.CAPS_LOCK:case P.CONTEXT_MENU:case P.CTRL:case P.DOWN:case P.END:case P.ESC:case P.HOME:case P.INSERT:case P.LEFT:case P.MAC_FF_META:case P.META:case P.NUMLOCK:case P.NUM_CENTER:case P.PAGE_DOWN:case P.PAGE_UP:case P.PAUSE:case P.PRINT_SCREEN:case P.RIGHT:case P.SHIFT:case P.UP:case P.WIN_KEY:case P.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=P.ZERO&&t<=P.NINE)return!0;if(t>=P.NUM_ZERO&&t<=P.NUM_MULTIPLY)return!0;if(t>=P.A&&t<=P.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===t)return!0;switch(t){case P.SPACE:case P.QUESTION_MARK:case P.NUM_PLUS:case P.NUM_MINUS:case P.NUM_PERIOD:case P.NUM_DIVISION:case P.SEMICOLON:case P.DASH:case P.EQUALS:case P.COMMA:case P.PERIOD:case P.SLASH:case P.APOSTROPHE:case P.SINGLE_QUOTE:case P.OPEN_SQUARE_BRACKET:case P.BACKSLASH:case P.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},I=P;function L(t,e){var n,i=t.prefixCls,o=t.id,s=t.active,u=t.tab,c=u.key,l=u.tab,f=u.disabled,h=u.closeIcon,d=t.closable,v=t.renderWrapper,m=t.removeAriaLabel,g=t.editable,y=t.onClick,b=t.onRemove,_=t.onFocus,x=t.style,w="".concat(i,"-tab");r["useEffect"]((function(){return b}),[]);var E=g&&!1!==d&&!f;function S(t){f||y(t)}function C(t){t.preventDefault(),t.stopPropagation(),g.onEdit("remove",{key:c,event:t})}var T=r["createElement"]("div",{key:c,ref:e,className:p()(w,(n={},Object(a["a"])(n,"".concat(w,"-with-remove"),E),Object(a["a"])(n,"".concat(w,"-active"),s),Object(a["a"])(n,"".concat(w,"-disabled"),f),n)),style:x,onClick:S},r["createElement"]("div",{role:"tab","aria-selected":s,id:o&&"".concat(o,"-tab-").concat(c),className:"".concat(w,"-btn"),"aria-controls":o&&"".concat(o,"-panel-").concat(c),"aria-disabled":f,tabIndex:f?null:0,onClick:function(t){t.stopPropagation(),S(t)},onKeyDown:function(t){[I.SPACE,I.ENTER].includes(t.which)&&(t.preventDefault(),S(t))},onFocus:_},l),E&&r["createElement"]("button",{type:"button","aria-label":m||"remove",tabIndex:0,className:"".concat(w,"-remove"),onClick:function(t){t.stopPropagation(),C(t)}},h||g.removeIcon||"\xd7"));return v?v(T):T}var R=r["forwardRef"](L),D={width:0,height:0,left:0,top:0};function N(t,e,n){return Object(r["useMemo"])((function(){for(var n,r=new Map,i=e.get(null===(n=t[0])||void 0===n?void 0:n.key)||D,o=i.left+i.width,a=0;a<t.length;a+=1){var s,u=t[a].key,c=e.get(u);if(!c)c=e.get(null===(s=t[a-1])||void 0===s?void 0:s.key)||D;var f=r.get(u)||Object(l["a"])({},c);f.right=o-f.left-f.width,r.set(u,f)}return r}),[t.map((function(t){return t.key})).join("_"),e,n])}var j={width:0,height:0,left:0,top:0,right:0};function F(t,e,n,i,o){var a,s,u,c=o.tabs,l=o.tabPosition,f=o.rtl;["top","bottom"].includes(l)?(a="width",s=f?"right":"left",u=Math.abs(e.left)):(a="height",s="top",u=-e.top);var p=e[a],h=n[a],d=i[a],v=p;return h+d>p&&(v=p-d),Object(r["useMemo"])((function(){if(!c.length)return[0,0];for(var e=c.length,n=e,r=0;r<e;r+=1){var i=t.get(c[r].key)||j;if(i[s]+i[a]>u+v){n=r-1;break}}for(var o=0,l=e-1;l>=0;l-=1){var f=t.get(c[l].key)||j;if(f[s]<u){o=l+1;break}}return[o,n]}),[t,u,v,l,c.map((function(t){return t.key})).join("_"),f])}var z=n("8CG2"),B=n.n(z),U=void 0;function V(t,e){var n=t.prefixCls,i=t.invalidate,a=t.item,s=t.renderItem,u=t.responsive,f=t.registerSize,h=t.itemKey,d=t.className,v=t.style,m=t.children,g=t.display,y=t.order,b=t.component,_=void 0===b?"div":b,x=Object(c["a"])(t,["prefixCls","invalidate","item","renderItem","responsive","registerSize","itemKey","className","style","children","display","order","component"]),w=u&&!g;function E(t){f(h,t)}r["useEffect"]((function(){return function(){E(null)}}),[]);var S,C=s&&a!==U?s(a):m;i||(S={opacity:w?0:1,height:w?0:U,overflowY:w?"hidden":U,order:u?y:U,pointerEvents:w?"none":U,position:w?"absolute":U});var T={};w&&(T["aria-hidden"]=!0);var O=r["createElement"](_,Object(o["a"])({className:p()(!i&&n,d),style:Object(l["a"])(Object(l["a"])({},S),v)},T,x,{ref:e}),C);return u&&(O=r["createElement"](A,{onResize:function(t){var e=t.offsetWidth;E(e)}},O)),O}var q=r["forwardRef"](V);q.displayName="Item";var G=q;function H(){var t=Object(r["useState"])({}),e=Object(s["a"])(t,2),n=e[1],i=Object(r["useRef"])([]),o=Object(r["useRef"])(!1),a=0,u=0;function c(t){var e=a;a+=1,i.current.length<e+1&&(i.current[e]=t);var r=i.current[e];function s(t){i.current[e]="function"===typeof t?t(i.current[e]):t,g["a"].cancel(u),u=Object(g["a"])((function(){o.current||n({})}))}return[r,s]}return Object(r["useEffect"])((function(){return function(){o.current=!0}}),[]),c}var W=function(t,e){var n=r["useContext"](Y);if(!n){var i=t.component,a=void 0===i?"div":i,s=Object(c["a"])(t,["component"]);return r["createElement"](a,Object(o["a"])({},s,{ref:e}))}var u=n.className,l=Object(c["a"])(n,["className"]),f=t.className,h=Object(c["a"])(t,["className"]);return r["createElement"](Y.Provider,{value:null},r["createElement"](G,Object(o["a"])({ref:e,className:p()(u,f)},l,h)))},X=r["forwardRef"](W);X.displayName="RawItem";var Z=X,Y=r["createContext"](null),K="responsive",J="invalidate";function Q(t){return"+ ".concat(t.length," ...")}function $(t,e){var n=t.prefixCls,i=void 0===n?"rc-overflow":n,a=t.data,u=void 0===a?[]:a,f=t.renderItem,h=t.renderRawItem,d=t.itemKey,v=t.itemWidth,m=void 0===v?10:v,g=t.ssr,y=t.style,b=t.className,_=t.maxCount,x=t.renderRest,w=t.renderRawRest,E=t.suffix,S=t.component,C=void 0===S?"div":S,T=t.itemComponent,O=t.onVisibleChange,k=Object(c["a"])(t,["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"]),M=H(),P="full"===g,I=M(null),L=Object(s["a"])(I,2),R=L[0],D=L[1],N=R||0,j=M(new Map),F=Object(s["a"])(j,2),z=F[0],B=F[1],U=M(0),V=Object(s["a"])(U,2),q=V[0],W=V[1],X=M(0),Z=Object(s["a"])(X,2),$=Z[0],tt=Z[1],et=M(0),nt=Object(s["a"])(et,2),rt=nt[0],it=nt[1],ot=Object(r["useState"])(null),at=Object(s["a"])(ot,2),st=at[0],ut=at[1],ct=Object(r["useState"])(null),lt=Object(s["a"])(ct,2),ft=lt[0],pt=lt[1],ht=r["useMemo"]((function(){return null===ft&&P?Number.MAX_SAFE_INTEGER:ft||0}),[ft,R]),dt=Object(r["useState"])(!1),vt=Object(s["a"])(dt,2),mt=vt[0],gt=vt[1],yt="".concat(i,"-item"),bt=Math.max(q,$),_t=u.length&&_===K,xt=_===J,wt=_t||"number"===typeof _&&u.length>_,Et=Object(r["useMemo"])((function(){var t=u;return _t?t=null===R&&P?u:u.slice(0,Math.min(u.length,N/m)):"number"===typeof _&&(t=u.slice(0,_)),t}),[u,m,R,_,_t]),St=Object(r["useMemo"])((function(){return _t?u.slice(ht+1):u.slice(Et.length)}),[u,Et,_t,ht]),Ct=Object(r["useCallback"])((function(t,e){var n;return"function"===typeof d?d(t):null!==(n=d&&(null===t||void 0===t?void 0:t[d]))&&void 0!==n?n:e}),[d]),Tt=Object(r["useCallback"])(f||function(t){return t},[f]);function Ot(t,e){pt(t),e||(gt(t<u.length-1),null===O||void 0===O||O(t))}function At(t,e){D(e.clientWidth)}function kt(t,e){B((function(n){var r=new Map(n);return null===e?r["delete"](t):r.set(t,e),r}))}function Mt(t,e){tt(e),W($)}function Pt(t,e){it(e)}function It(t){return z.get(Ct(Et[t],t))}r["useLayoutEffect"]((function(){if(N&&bt&&Et){var t=rt,e=Et.length,n=e-1;if(!e)return Ot(0),void ut(null);for(var r=0;r<e;r+=1){var i=It(r);if(void 0===i){Ot(r-1,!0);break}if(t+=i,0===n&&t<=N||r===n-1&&t+It(n)<=N){Ot(n),ut(null);break}if(t+bt>N){Ot(r-1),ut(t-i-rt+$);break}}E&&It(0)+rt>N&&ut(null)}}),[N,z,$,rt,Ct,Et]);var Lt=mt&&!!St.length,Rt={};null!==st&&_t&&(Rt={position:"absolute",left:st,top:0});var Dt,Nt={prefixCls:yt,responsive:_t,component:T,invalidate:xt},jt=h?function(t,e){var n=Ct(t,e);return r["createElement"](Y.Provider,{key:n,value:Object(l["a"])(Object(l["a"])({},Nt),{},{order:e,item:t,itemKey:n,registerSize:kt,display:e<=ht})},h(t,e))}:function(t,e){var n=Ct(t,e);return r["createElement"](G,Object(o["a"])({},Nt,{order:e,key:n,item:t,renderItem:Tt,itemKey:n,registerSize:kt,display:e<=ht}))},Ft={order:Lt?ht:Number.MAX_SAFE_INTEGER,className:"".concat(yt,"-rest"),registerSize:Mt,display:Lt};if(w)w&&(Dt=r["createElement"](Y.Provider,{value:Object(l["a"])(Object(l["a"])({},Nt),Ft)},w(St)));else{var zt=x||Q;Dt=r["createElement"](G,Object(o["a"])({},Nt,Ft),"function"===typeof zt?zt(St):zt)}var Bt=r["createElement"](C,Object(o["a"])({className:p()(!xt&&i,b),style:y,ref:e},k),Et.map(jt),wt?Dt:null,E&&r["createElement"](G,Object(o["a"])({},Nt,{order:ht,className:"".concat(yt,"-suffix"),registerSize:Pt,display:!0,style:Rt}),E));return _t&&(Bt=r["createElement"](A,{onResize:At},Bt)),Bt}var tt=r["forwardRef"]($);tt.displayName="Overflow",tt.Item=Z,tt.RESPONSIVE=K,tt.INVALIDATE=J;var et=tt,nt=et,rt=n("/sZi"),it=n("mcYp"),ot=r["createContext"](null);function at(t,e){var n=Object(l["a"])({},t);return Object.keys(e).forEach((function(t){var r=e[t];void 0!==r&&(n[t]=r)})),n}function st(t){var e=t.children,n=t.locked,i=Object(c["a"])(t,["children","locked"]),o=r["useContext"](ot),a=Object(it["a"])((function(){return at(o,i)}),[o,i],(function(t,e){return!n&&(t[0]!==e[0]||!B()(t[1],e[1]))}));return r["createElement"](ot.Provider,{value:a},e)}function ut(t,e,n,i){var o=r["useContext"](ot),a=o.activeKey,s=o.onActive,u=o.onInactive,c={active:a===t};return e||(c.onMouseEnter=function(e){null===n||void 0===n||n({key:t,domEvent:e}),s(t)},c.onMouseLeave=function(e){null===i||void 0===i||i({key:t,domEvent:e}),u(t)}),c}function ct(t){var e=t.item,n=Object(c["a"])(t,["item"]);return Object.defineProperty(n,"item",{get:function(){return Object(E["a"])(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),e}}),n}function lt(t){var e,n=t.icon,i=t.props,o=t.children;return e="function"===typeof n?r["createElement"](n,Object(l["a"])({},i)):n,e||o||null}function ft(t){var e=r["useContext"](ot),n=e.mode,i=e.rtl,o=e.inlineIndent;if("inline"!==n)return null;var a=t;return i?{paddingRight:a*o}:{paddingLeft:a*o}}var pt=[],ht=r["createContext"](null);function dt(){return r["useContext"](ht)}var vt=r["createContext"](pt);function mt(t){var e=r["useContext"](vt);return r["useMemo"]((function(){return void 0!==t?[].concat(Object(m["a"])(e),[t]):e}),[e,t])}var gt=r["createContext"](null),yt=r["createContext"](null);function bt(t,e){return void 0===t?null:"".concat(t,"-").concat(e)}function _t(t){var e=r["useContext"](yt);return bt(e,t)}var xt=function(t){Object(_["a"])(n,t);var e=Object(x["a"])(n);function n(){return Object(y["a"])(this,n),e.apply(this,arguments)}return Object(b["a"])(n,[{key:"render",value:function(){var t=this.props,e=t.title,n=t.attribute,i=t.elementRef,a=Object(c["a"])(t,["title","attribute","elementRef"]),s=Object(rt["a"])(a,["eventKey"]);return Object(E["a"])(!n,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),r["createElement"](nt.Item,Object(o["a"])({},n,{title:"string"===typeof e?e:void 0},s,{ref:i}))}}]),n}(r["Component"]),wt=function(t){var e,n=t.style,i=t.className,s=t.eventKey,u=(t.warnKey,t.disabled),f=t.itemIcon,h=t.children,d=t.role,v=t.onMouseEnter,g=t.onMouseLeave,y=t.onClick,b=t.onKeyDown,_=t.onFocus,x=Object(c["a"])(t,["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"]),w=_t(s),E=r["useContext"](ot),S=E.prefixCls,C=E.onItemClick,T=E.disabled,O=E.overflowDisabled,A=E.itemIcon,k=E.selectedKeys,M=E.onActive,P="".concat(S,"-item"),L=r["useRef"](),R=r["useRef"](),D=T||u,N=mt(s);var j=function(t){return{key:s,keyPath:Object(m["a"])(N).reverse(),item:L.current,domEvent:t}},F=f||A,z=ut(s,D,v,g),B=z.active,U=Object(c["a"])(z,["active"]),V=k.includes(s),q=ft(N.length),G=function(t){if(!D){var e=j(t);null===y||void 0===y||y(ct(e)),C(e)}},H=function(t){if(null===b||void 0===b||b(t),t.which===I.ENTER){var e=j(t);null===y||void 0===y||y(ct(e)),C(e)}},W=function(t){M(s),null===_||void 0===_||_(t)},X={};return"option"===t.role&&(X["aria-selected"]=V),r["createElement"](xt,Object(o["a"])({ref:L,elementRef:R,role:null===d?"none":d||"menuitem",tabIndex:u?null:-1,"data-menu-id":O&&w?null:w},x,U,X,{component:"li","aria-disabled":u,style:Object(l["a"])(Object(l["a"])({},q),n),className:p()(P,(e={},Object(a["a"])(e,"".concat(P,"-active"),B),Object(a["a"])(e,"".concat(P,"-selected"),V),Object(a["a"])(e,"".concat(P,"-disabled"),D),e),i),onClick:G,onKeyDown:H,onFocus:W}),h,r["createElement"](lt,{props:Object(l["a"])(Object(l["a"])({},t),{},{isSelected:V}),icon:F}))};function Et(t){var e=t.eventKey,n=dt(),i=mt(e);return r["useEffect"]((function(){if(n)return n.registerPath(e,i),function(){n.unregisterPath(e,i)}}),[i]),n?null:r["createElement"](wt,t)}var St=Et;function Ct(t,e){return Object(h["a"])(t).map((function(t,n){if(r["isValidElement"](t)){var i,o,a=t.key,s=null!==(i=null===(o=t.props)||void 0===o?void 0:o.eventKey)&&void 0!==i?i:a,u=null===s||void 0===s;u&&(s="tmp_key-".concat([].concat(Object(m["a"])(e),[n]).join("-")));var c={key:s,eventKey:s};return r["cloneElement"](t,c)}return t}))}function Tt(t){var e=r["useRef"](t);e.current=t;var n=r["useCallback"]((function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return null===(t=e.current)||void 0===t?void 0:t.call.apply(t,[e].concat(r))}),[]);return t?n:void 0}var Ot=function(t,e){var n=t.className,i=t.children,a=Object(c["a"])(t,["className","children"]),s=r["useContext"](ot),u=s.prefixCls,l=s.mode;return r["createElement"]("ul",Object(o["a"])({className:p()(u,"".concat(u,"-sub"),"".concat(u,"-").concat("inline"===l?"inline":"vertical"),n)},a,{"data-menu-list":!0,ref:e}),i)},At=r["forwardRef"](Ot);At.displayName="SubMenuList";var kt=At,Mt=n("IzJh"),Pt=n("fK+4"),It=n.n(Pt);function Lt(t,e){return!!t&&t.contains(e)}function Rt(t,e,n,r){var i=It.a.unstable_batchedUpdates?function(t){It.a.unstable_batchedUpdates(n,t)}:n;return t.addEventListener&&t.addEventListener(e,i,r),{remove:function(){t.removeEventListener&&t.removeEventListener(e,i)}}}var Dt=n("SUfK"),Nt=Object(r["forwardRef"])((function(t,e){var n=t.didUpdate,i=t.getContainer,o=t.children,a=Object(r["useRef"])();Object(r["useImperativeHandle"])(e,(function(){return{}}));var s=Object(r["useRef"])(!1);return!s.current&&Object(Dt["a"])()&&(a.current=i(),s.current=!0),Object(r["useEffect"])((function(){null===n||void 0===n||n(t)})),Object(r["useEffect"])((function(){return function(){var t,e;null===(t=a.current)||void 0===t||null===(e=t.parentNode)||void 0===e||e.removeChild(a.current)}}),[]),a.current?It.a.createPortal(o,a.current):null})),jt=Nt;function Ft(t,e,n){return n?t[0]===e[0]:t[0]===e[0]&&t[1]===e[1]}function zt(t,e,n){var r=t[e]||{};return Object(l["a"])(Object(l["a"])({},r),n)}function Bt(t,e,n,r){for(var i=n.points,o=Object.keys(t),a=0;a<o.length;a+=1){var s=o[a];if(Ft(t[s].points,i,r))return"".concat(e,"-placement-").concat(s)}return""}var Ut=n("JuV/");function Vt(t){var e=t.prefixCls,n=t.motion,r=t.animation,i=t.transitionName;return n||(r?{motionName:"".concat(e,"-").concat(r)}:i?{motionName:i}:null)}function qt(t){var e=t.prefixCls,n=t.visible,i=t.zIndex,a=t.mask,s=t.maskMotion,u=t.maskAnimation,c=t.maskTransitionName;if(!a)return null;var f={};return(s||c||u)&&(f=Object(l["a"])({motionAppear:!0},Vt({motion:s,prefixCls:e,transitionName:c,animation:u}))),r["createElement"](Ut["b"],Object(o["a"])({},f,{visible:n,removeOnLeave:!0}),(function(t){var n=t.className;return r["createElement"]("div",{style:{zIndex:i},className:p()("".concat(e,"-mask"),n)})}))}var Gt,Ht=function(t){if(!t)return!1;if(t.offsetParent)return!0;if(t.getBBox){var e=t.getBBox();if(e.width||e.height)return!0}if(t.getBoundingClientRect){var n=t.getBoundingClientRect();if(n.width||n.height)return!0}return!1};function Wt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Xt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Wt(Object(n),!0).forEach((function(e){Yt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Zt(t){return Zt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zt(t)}function Yt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Kt={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function Jt(){if(void 0!==Gt)return Gt;Gt="";var t=document.createElement("p").style,e="Transform";for(var n in Kt)n+e in t&&(Gt=n);return Gt}function Qt(){return Jt()?"".concat(Jt(),"TransitionProperty"):"transitionProperty"}function $t(){return Jt()?"".concat(Jt(),"Transform"):"transform"}function te(t,e){var n=Qt();n&&(t.style[n]=e,"transitionProperty"!==n&&(t.style.transitionProperty=e))}function ee(t,e){var n=$t();n&&(t.style[n]=e,"transform"!==n&&(t.style.transform=e))}function ne(t){return t.style.transitionProperty||t.style[Qt()]}function re(t){var e=window.getComputedStyle(t,null),n=e.getPropertyValue("transform")||e.getPropertyValue($t());if(n&&"none"!==n){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}var ie=/matrix\((.*)\)/,oe=/matrix3d\((.*)\)/;function ae(t,e){var n=window.getComputedStyle(t,null),r=n.getPropertyValue("transform")||n.getPropertyValue($t());if(r&&"none"!==r){var i,o=r.match(ie);if(o)o=o[1],i=o.split(",").map((function(t){return parseFloat(t,10)})),i[4]=e.x,i[5]=e.y,ee(t,"matrix(".concat(i.join(","),")"));else{var a=r.match(oe)[1];i=a.split(",").map((function(t){return parseFloat(t,10)})),i[12]=e.x,i[13]=e.y,ee(t,"matrix3d(".concat(i.join(","),")"))}}else ee(t,"translateX(".concat(e.x,"px) translateY(").concat(e.y,"px) translateZ(0)"))}var se,ue=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source;function ce(t){var e=t.style.display;t.style.display="none",t.offsetHeight,t.style.display=e}function le(t,e,n){var r=n;if("object"!==Zt(e))return"undefined"!==typeof r?("number"===typeof r&&(r="".concat(r,"px")),void(t.style[e]=r)):se(t,e);for(var i in e)e.hasOwnProperty(i)&&le(t,i,e[i])}function fe(t){var e,n,r,i=t.ownerDocument,o=i.body,a=i&&i.documentElement;return e=t.getBoundingClientRect(),n=e.left,r=e.top,n-=a.clientLeft||o.clientLeft||0,r-=a.clientTop||o.clientTop||0,{left:n,top:r}}function pe(t,e){var n=t["page".concat(e?"Y":"X","Offset")],r="scroll".concat(e?"Top":"Left");if("number"!==typeof n){var i=t.document;n=i.documentElement[r],"number"!==typeof n&&(n=i.body[r])}return n}function he(t){return pe(t)}function de(t){return pe(t,!0)}function ve(t){var e=fe(t),n=t.ownerDocument,r=n.defaultView||n.parentWindow;return e.left+=he(r),e.top+=de(r),e}function me(t){return null!==t&&void 0!==t&&t==t.window}function ge(t){return me(t)?t.document:9===t.nodeType?t:t.ownerDocument}function ye(t,e,n){var r=n,i="",o=ge(t);return r=r||o.defaultView.getComputedStyle(t,null),r&&(i=r.getPropertyValue(e)||r[e]),i}var be=new RegExp("^(".concat(ue,")(?!px)[a-z%]+$"),"i"),_e=/^(top|right|bottom|left)$/,xe="currentStyle",we="runtimeStyle",Ee="left",Se="px";function Ce(t,e){var n=t[xe]&&t[xe][e];if(be.test(n)&&!_e.test(e)){var r=t.style,i=r[Ee],o=t[we][Ee];t[we][Ee]=t[xe][Ee],r[Ee]="fontSize"===e?"1em":n||0,n=r.pixelLeft+Se,r[Ee]=i,t[we][Ee]=o}return""===n?"auto":n}function Te(t,e){return"left"===t?e.useCssRight?"right":t:e.useCssBottom?"bottom":t}function Oe(t){return"left"===t?"right":"right"===t?"left":"top"===t?"bottom":"bottom"===t?"top":void 0}function Ae(t,e,n){"static"===le(t,"position")&&(t.style.position="relative");var r=-999,i=-999,o=Te("left",n),a=Te("top",n),s=Oe(o),u=Oe(a);"left"!==o&&(r=999),"top"!==a&&(i=999);var c="",l=ve(t);("left"in e||"top"in e)&&(c=ne(t)||"",te(t,"none")),"left"in e&&(t.style[s]="",t.style[o]="".concat(r,"px")),"top"in e&&(t.style[u]="",t.style[a]="".concat(i,"px")),ce(t);var f=ve(t),p={};for(var h in e)if(e.hasOwnProperty(h)){var d=Te(h,n),v="left"===h?r:i,m=l[h]-f[h];p[d]=d===h?v+m:v-m}le(t,p),ce(t),("left"in e||"top"in e)&&te(t,c);var g={};for(var y in e)if(e.hasOwnProperty(y)){var b=Te(y,n),_=e[y]-l[y];g[b]=y===b?p[b]+_:p[b]-_}le(t,g)}function ke(t,e){var n=ve(t),r=re(t),i={x:r.x,y:r.y};"left"in e&&(i.x=r.x+e.left-n.left),"top"in e&&(i.y=r.y+e.top-n.top),ae(t,i)}function Me(t,e,n){if(n.ignoreShake){var r=ve(t),i=r.left.toFixed(0),o=r.top.toFixed(0),a=e.left.toFixed(0),s=e.top.toFixed(0);if(i===a&&o===s)return}n.useCssRight||n.useCssBottom?Ae(t,e,n):n.useCssTransform&&$t()in document.body.style?ke(t,e):Ae(t,e,n)}function Pe(t,e){for(var n=0;n<t.length;n++)e(t[n])}function Ie(t){return"border-box"===se(t,"boxSizing")}"undefined"!==typeof window&&(se=window.getComputedStyle?ye:Ce);var Le=["margin","border","padding"],Re=-1,De=2,Ne=1,je=0;function Fe(t,e,n){var r,i={},o=t.style;for(r in e)e.hasOwnProperty(r)&&(i[r]=o[r],o[r]=e[r]);for(r in n.call(t),e)e.hasOwnProperty(r)&&(o[r]=i[r])}function ze(t,e,n){var r,i,o,a=0;for(i=0;i<e.length;i++)if(r=e[i],r)for(o=0;o<n.length;o++){var s=void 0;s="border"===r?"".concat(r).concat(n[o],"Width"):r+n[o],a+=parseFloat(se(t,s))||0}return a}var Be={getParent:function(t){var e=t;do{e=11===e.nodeType&&e.host?e.host:e.parentNode}while(e&&1!==e.nodeType&&9!==e.nodeType);return e}};function Ue(t,e,n){var r=n;if(me(t))return"width"===e?Be.viewportWidth(t):Be.viewportHeight(t);if(9===t.nodeType)return"width"===e?Be.docWidth(t):Be.docHeight(t);var i="width"===e?["Left","Right"]:["Top","Bottom"],o="width"===e?t.getBoundingClientRect().width:t.getBoundingClientRect().height,a=Ie(t),s=0;(null===o||void 0===o||o<=0)&&(o=void 0,s=se(t,e),(null===s||void 0===s||Number(s)<0)&&(s=t.style[e]||0),s=parseFloat(s)||0),void 0===r&&(r=a?Ne:Re);var u=void 0!==o||a,c=o||s;return r===Re?u?c-ze(t,["border","padding"],i):s:u?r===Ne?c:c+(r===De?-ze(t,["border"],i):ze(t,["margin"],i)):s+ze(t,Le.slice(r),i)}Pe(["Width","Height"],(function(t){Be["doc".concat(t)]=function(e){var n=e.document;return Math.max(n.documentElement["scroll".concat(t)],n.body["scroll".concat(t)],Be["viewport".concat(t)](n))},Be["viewport".concat(t)]=function(e){var n="client".concat(t),r=e.document,i=r.body,o=r.documentElement,a=o[n];return"CSS1Compat"===r.compatMode&&a||i&&i[n]||a}}));var Ve={position:"absolute",visibility:"hidden",display:"block"};function qe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=e[0];return 0!==i.offsetWidth?r=Ue.apply(void 0,e):Fe(i,Ve,(function(){r=Ue.apply(void 0,e)})),r}function Ge(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}Pe(["width","height"],(function(t){var e=t.charAt(0).toUpperCase()+t.slice(1);Be["outer".concat(e)]=function(e,n){return e&&qe(e,t,n?je:Ne)};var n="width"===t?["Left","Right"]:["Top","Bottom"];Be[t]=function(e,r){var i=r;if(void 0===i)return e&&qe(e,t,Re);if(e){var o=Ie(e);return o&&(i+=ze(e,["padding","border"],n)),le(e,t,i)}}}));var He={getWindow:function(t){if(t&&t.document&&t.setTimeout)return t;var e=t.ownerDocument||t;return e.defaultView||e.parentWindow},getDocument:ge,offset:function(t,e,n){if("undefined"===typeof e)return ve(t);Me(t,e,n||{})},isWindow:me,each:Pe,css:le,clone:function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);var r=t.overflow;if(r)for(e in t)t.hasOwnProperty(e)&&(n.overflow[e]=t.overflow[e]);return n},mix:Ge,getWindowScrollLeft:function(t){return he(t)},getWindowScrollTop:function(t){return de(t)},merge:function(){for(var t={},e=0;e<arguments.length;e++)He.mix(t,e<0||arguments.length<=e?void 0:arguments[e]);return t},viewportWidth:0,viewportHeight:0};Ge(He,Be);var We=He.getParent;function Xe(t){if(He.isWindow(t)||9===t.nodeType)return null;var e,n=He.getDocument(t),r=n.body,i=He.css(t,"position"),o="fixed"===i||"absolute"===i;if(!o)return"html"===t.nodeName.toLowerCase()?null:We(t);for(e=We(t);e&&e!==r&&9!==e.nodeType;e=We(e))if(i=He.css(e,"position"),"static"!==i)return e;return null}var Ze=He.getParent;function Ye(t){if(He.isWindow(t)||9===t.nodeType)return!1;var e=He.getDocument(t),n=e.body,r=null;for(r=Ze(t);r&&r!==n&&r!==e;r=Ze(r)){var i=He.css(r,"position");if("fixed"===i)return!0}return!1}function Ke(t,e){var n={left:0,right:1/0,top:0,bottom:1/0},r=Xe(t),i=He.getDocument(t),o=i.defaultView||i.parentWindow,a=i.body,s=i.documentElement;while(r){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===r.clientWidth||r===a||r===s||"visible"===He.css(r,"overflow")){if(r===a||r===s)break}else{var u=He.offset(r);u.left+=r.clientLeft,u.top+=r.clientTop,n.top=Math.max(n.top,u.top),n.right=Math.min(n.right,u.left+r.clientWidth),n.bottom=Math.min(n.bottom,u.top+r.clientHeight),n.left=Math.max(n.left,u.left)}r=Xe(r)}var c=null;if(!He.isWindow(t)&&9!==t.nodeType){c=t.style.position;var l=He.css(t,"position");"absolute"===l&&(t.style.position="fixed")}var f=He.getWindowScrollLeft(o),p=He.getWindowScrollTop(o),h=He.viewportWidth(o),d=He.viewportHeight(o),v=s.scrollWidth,m=s.scrollHeight,g=window.getComputedStyle(a);if("hidden"===g.overflowX&&(v=o.innerWidth),"hidden"===g.overflowY&&(m=o.innerHeight),t.style&&(t.style.position=c),e||Ye(t))n.left=Math.max(n.left,f),n.top=Math.max(n.top,p),n.right=Math.min(n.right,f+h),n.bottom=Math.min(n.bottom,p+d);else{var y=Math.max(v,f+h);n.right=Math.min(n.right,y);var b=Math.max(m,p+d);n.bottom=Math.min(n.bottom,b)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function Je(t,e,n,r){var i=He.clone(t),o={width:e.width,height:e.height};return r.adjustX&&i.left<n.left&&(i.left=n.left),r.resizeWidth&&i.left>=n.left&&i.left+o.width>n.right&&(o.width-=i.left+o.width-n.right),r.adjustX&&i.left+o.width>n.right&&(i.left=Math.max(n.right-o.width,n.left)),r.adjustY&&i.top<n.top&&(i.top=n.top),r.resizeHeight&&i.top>=n.top&&i.top+o.height>n.bottom&&(o.height-=i.top+o.height-n.bottom),r.adjustY&&i.top+o.height>n.bottom&&(i.top=Math.max(n.bottom-o.height,n.top)),He.mix(i,o)}function Qe(t){var e,n,r;if(He.isWindow(t)||9===t.nodeType){var i=He.getWindow(t);e={left:He.getWindowScrollLeft(i),top:He.getWindowScrollTop(i)},n=He.viewportWidth(i),r=He.viewportHeight(i)}else e=He.offset(t),n=He.outerWidth(t),r=He.outerHeight(t);return e.width=n,e.height=r,e}function $e(t,e){var n=e.charAt(0),r=e.charAt(1),i=t.width,o=t.height,a=t.left,s=t.top;return"c"===n?s+=o/2:"b"===n&&(s+=o),"c"===r?a+=i/2:"r"===r&&(a+=i),{left:a,top:s}}function tn(t,e,n,r,i){var o=$e(e,n[1]),a=$e(t,n[0]),s=[a.left-o.left,a.top-o.top];return{left:Math.round(t.left-s[0]+r[0]-i[0]),top:Math.round(t.top-s[1]+r[1]-i[1])}}function en(t,e,n){return t.left<n.left||t.left+e.width>n.right}function nn(t,e,n){return t.top<n.top||t.top+e.height>n.bottom}function rn(t,e,n){return t.left>n.right||t.left+e.width<n.left}function on(t,e,n){return t.top>n.bottom||t.top+e.height<n.top}function an(t,e,n){var r=[];return He.each(t,(function(t){r.push(t.replace(e,(function(t){return n[t]})))})),r}function sn(t,e){return t[e]=-t[e],t}function un(t,e){var n;return n=/%$/.test(t)?parseInt(t.substring(0,t.length-1),10)/100*e:parseInt(t,10),n||0}function cn(t,e){t[0]=un(t[0],e.width),t[1]=un(t[1],e.height)}function ln(t,e,n,r){var i=n.points,o=n.offset||[0,0],a=n.targetOffset||[0,0],s=n.overflow,u=n.source||t;o=[].concat(o),a=[].concat(a),s=s||{};var c={},l=0,f=!(!s||!s.alwaysByViewport),p=Ke(u,f),h=Qe(u);cn(o,h),cn(a,e);var d=tn(h,e,i,o,a),v=He.merge(h,d);if(p&&(s.adjustX||s.adjustY)&&r){if(s.adjustX&&en(d,h,p)){var m=an(i,/[lr]/gi,{l:"r",r:"l"}),g=sn(o,0),y=sn(a,0),b=tn(h,e,m,g,y);rn(b,h,p)||(l=1,i=m,o=g,a=y)}if(s.adjustY&&nn(d,h,p)){var _=an(i,/[tb]/gi,{t:"b",b:"t"}),x=sn(o,1),w=sn(a,1),E=tn(h,e,_,x,w);on(E,h,p)||(l=1,i=_,o=x,a=w)}l&&(d=tn(h,e,i,o,a),He.mix(v,d));var S=en(d,h,p),C=nn(d,h,p);if(S||C){var T=i;S&&(T=an(i,/[lr]/gi,{l:"r",r:"l"})),C&&(T=an(i,/[tb]/gi,{t:"b",b:"t"})),i=T,o=n.offset||[0,0],a=n.targetOffset||[0,0]}c.adjustX=s.adjustX&&S,c.adjustY=s.adjustY&&C,(c.adjustX||c.adjustY)&&(v=Je(d,h,p,c))}return v.width!==h.width&&He.css(u,"width",He.width(u)+v.width-h.width),v.height!==h.height&&He.css(u,"height",He.height(u)+v.height-h.height),He.offset(u,{left:v.left,top:v.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:i,offset:o,targetOffset:a,overflow:c}}function fn(t,e){var n=Ke(t,e),r=Qe(t);return!n||r.left+r.width<=n.left||r.top+r.height<=n.top||r.left>=n.right||r.top>=n.bottom}function pn(t,e,n){var r=n.target||e,i=Qe(r),o=!fn(r,n.overflow&&n.overflow.alwaysByViewport);return ln(t,i,n,o)}function hn(t,e,n){var r,i,o=He.getDocument(t),a=o.defaultView||o.parentWindow,s=He.getWindowScrollLeft(a),u=He.getWindowScrollTop(a),c=He.viewportWidth(a),l=He.viewportHeight(a);r="pageX"in e?e.pageX:s+e.clientX,i="pageY"in e?e.pageY:u+e.clientY;var f={left:r,top:i,width:0,height:0},p=r>=0&&r<=s+c&&i>=0&&i<=u+l,h=[n.points[0],"cc"];return ln(t,f,Xt(Xt({},n),{},{points:h}),p)}pn.__getOffsetParent=Xe,pn.__getVisibleRectForElement=Ke;var dn=n("Zx9X"),vn=n.n(dn);function mn(t,e){return t===e||!(!t||!e)&&("pageX"in e&&"pageY"in e?t.pageX===e.pageX&&t.pageY===e.pageY:"clientX"in e&&"clientY"in e&&(t.clientX===e.clientX&&t.clientY===e.clientY))}function gn(t,e){t!==document.activeElement&&Lt(e,t)&&"function"===typeof t.focus&&t.focus()}function yn(t,e){var n=null,r=null;function i(t){var i=Object(s["a"])(t,1),o=i[0].target;if(document.documentElement.contains(o)){var a=o.getBoundingClientRect(),u=a.width,c=a.height,l=Math.floor(u),f=Math.floor(c);n===l&&r===f||Promise.resolve().then((function(){e({width:l,height:f})})),n=l,r=f}}var o=new C["a"](i);return t&&o.observe(t),function(){o.disconnect()}}var bn=function(t,e){var n=i.a.useRef(!1),r=i.a.useRef(null);function o(){window.clearTimeout(r.current)}function a(i){if(n.current&&!0!==i)o(),r.current=window.setTimeout((function(){n.current=!1,a()}),e);else{if(!1===t())return;n.current=!0,o(),r.current=window.setTimeout((function(){n.current=!1}),e)}}return[a,function(){n.current=!1,o()}]};function _n(t){return"function"!==typeof t?null:t()}function xn(t){return"object"===Object(u["a"])(t)&&t?t:null}var wn=function(t,e){var n=t.children,r=t.disabled,o=t.target,a=t.align,u=t.onAlign,c=t.monitorWindowResize,l=t.monitorBufferTime,f=void 0===l?0:l,p=i.a.useRef({}),h=i.a.useRef(),d=i.a.Children.only(n),v=i.a.useRef({});v.current.disabled=r,v.current.target=o,v.current.align=a,v.current.onAlign=u;var m=bn((function(){var t=v.current,e=t.disabled,n=t.target,r=t.align,i=t.onAlign;if(!e&&n){var o,a=h.current,s=_n(n),u=xn(n);p.current.element=s,p.current.point=u,p.current.align=r;var c=document,l=c.activeElement;return s&&Ht(s)?o=pn(a,s,r):u&&(o=hn(a,u,r)),gn(l,a),i&&o&&i(a,o),!0}return!1}),f),g=Object(s["a"])(m,2),y=g[0],b=g[1],_=i.a.useRef({cancel:function(){}}),x=i.a.useRef({cancel:function(){}});i.a.useEffect((function(){var t=_n(o),e=xn(o);h.current!==x.current.element&&(x.current.cancel(),x.current.element=h.current,x.current.cancel=yn(h.current,y)),p.current.element===t&&mn(p.current.point,e)&&vn()(p.current.align,a)||(y(),_.current.element!==t&&(_.current.cancel(),_.current.element=t,_.current.cancel=yn(t,y)))})),i.a.useEffect((function(){r?b():y()}),[r]);var w=i.a.useRef(null);return i.a.useEffect((function(){c?w.current||(w.current=Rt(window,"resize",y)):w.current&&(w.current.remove(),w.current=null)}),[c]),i.a.useEffect((function(){return function(){_.current.cancel(),x.current.cancel(),w.current&&w.current.remove(),b()}}),[]),i.a.useImperativeHandle(e,(function(){return{forceAlign:function(){return y(!0)}}})),i.a.isValidElement(d)&&(d=i.a.cloneElement(d,{ref:Object(S["a"])(d.ref,h)})),d},En=i.a.forwardRef(wn);En.displayName="Align";var Sn=En,Cn=Sn,Tn=n("TFir"),On=n.n(Tn),An=n("nWs5"),kn=["measure","align",null,"motion"],Mn=function(t,e){var n=Object(r["useState"])(null),i=Object(s["a"])(n,2),o=i[0],a=i[1],u=Object(r["useRef"])(),c=Object(r["useRef"])(!1);function l(t){c.current||a(t)}function f(){g["a"].cancel(u.current)}function p(t){f(),u.current=Object(g["a"])((function(){l((function(t){switch(o){case"align":return"motion";case"motion":return"stable";default:}return t})),null===t||void 0===t||t()}))}return Object(r["useEffect"])((function(){l("measure")}),[t]),Object(r["useEffect"])((function(){switch(o){case"measure":e();break;default:}o&&(u.current=Object(g["a"])(Object(An["a"])(On.a.mark((function t(){var e,n;return On.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=kn.indexOf(o),n=kn[e+1],n&&-1!==e&&l(n);case 3:case"end":return t.stop()}}),t)})))))}),[o]),Object(r["useEffect"])((function(){return function(){c.current=!0,f()}}),[]),[o,p]},Pn=function(t){var e=r["useState"]({width:0,height:0}),n=Object(s["a"])(e,2),i=n[0],o=n[1];function a(t){o({width:t.offsetWidth,height:t.offsetHeight})}var u=r["useMemo"]((function(){var e={};if(t){var n=i.width,r=i.height;-1!==t.indexOf("height")&&r?e.height=r:-1!==t.indexOf("minHeight")&&r&&(e.minHeight=r),-1!==t.indexOf("width")&&n?e.width=n:-1!==t.indexOf("minWidth")&&n&&(e.minWidth=n)}return e}),[t,i]);return[u,a]},In=r["forwardRef"]((function(t,e){var n=t.visible,i=t.prefixCls,a=t.className,u=t.style,c=t.children,f=t.zIndex,h=t.stretch,d=t.destroyPopupOnHide,v=t.forceRender,m=t.align,g=t.point,y=t.getRootDomNode,b=t.getClassNameFromAlign,_=t.onAlign,x=t.onMouseEnter,w=t.onMouseLeave,E=t.onMouseDown,S=t.onTouchStart,C=Object(r["useRef"])(),T=Object(r["useRef"])(),O=Object(r["useState"])(),A=Object(s["a"])(O,2),k=A[0],M=A[1],P=Pn(h),I=Object(s["a"])(P,2),L=I[0],R=I[1];function D(){h&&R(y())}var N=Mn(n,D),j=Object(s["a"])(N,2),F=j[0],z=j[1],B=Object(r["useRef"])();function U(){return g||y}function V(){var t;null===(t=C.current)||void 0===t||t.forceAlign()}function q(t,e){var n=b(e);k!==n&&M(n),"align"===F&&(k!==n?Promise.resolve().then((function(){V()})):z((function(){var t;null===(t=B.current)||void 0===t||t.call(B)})),null===_||void 0===_||_(t,e))}var G=Object(l["a"])({},Vt(t));function H(){return new Promise((function(t){B.current=t}))}["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach((function(t){var e=G[t];G[t]=function(t,n){return z(),null===e||void 0===e?void 0:e(t,n)}})),r["useEffect"]((function(){G.motionName||"motion"!==F||z()}),[G.motionName,F]),r["useImperativeHandle"](e,(function(){return{forceAlign:V,getElement:function(){return T.current}}}));var W=Object(l["a"])(Object(l["a"])({},L),{},{zIndex:f,opacity:"motion"!==F&&"stable"!==F&&n?0:void 0,pointerEvents:"stable"===F?void 0:"none"},u),X=!0;!(null===m||void 0===m?void 0:m.points)||"align"!==F&&"stable"!==F||(X=!1);var Z=c;return r["Children"].count(c)>1&&(Z=r["createElement"]("div",{className:"".concat(i,"-content")},c)),r["createElement"](Ut["b"],Object(o["a"])({visible:n,ref:T,leavedClassName:"".concat(i,"-hidden")},G,{onAppearPrepare:H,onEnterPrepare:H,removeOnLeave:d,forceRender:v}),(function(t,e){var n=t.className,o=t.style,s=p()(i,a,k,n);return r["createElement"](Cn,{target:U(),key:"popup",ref:C,monitorWindowResize:!0,disabled:X,align:m,onAlign:q},r["createElement"]("div",{ref:e,className:s,onMouseEnter:x,onMouseLeave:w,onMouseDownCapture:E,onTouchStartCapture:S,style:Object(l["a"])(Object(l["a"])({},o),W)},Z))}))}));In.displayName="PopupInner";var Ln=In,Rn=r["forwardRef"]((function(t,e){var n=t.prefixCls,i=t.visible,a=t.zIndex,s=t.children,u=t.mobile;u=void 0===u?{}:u;var c=u.popupClassName,f=u.popupStyle,h=u.popupMotion,d=void 0===h?{}:h,v=u.popupRender,m=r["useRef"]();r["useImperativeHandle"](e,(function(){return{forceAlign:function(){},getElement:function(){return m.current}}}));var g=Object(l["a"])({zIndex:a},f),y=s;return r["Children"].count(s)>1&&(y=r["createElement"]("div",{className:"".concat(n,"-content")},s)),v&&(y=v(y)),r["createElement"](Ut["b"],Object(o["a"])({visible:i,ref:m,removeOnLeave:!0},d),(function(t,e){var i=t.className,o=t.style,a=p()(n,c,i);return r["createElement"]("div",{ref:e,className:a,style:Object(l["a"])(Object(l["a"])({},o),g)},y)}))}));Rn.displayName="MobilePopupInner";var Dn=Rn,Nn=["visible","mobile"],jn=r["forwardRef"]((function(t,e){var n=t.visible,i=t.mobile,a=Object(c["a"])(t,Nn),u=Object(r["useState"])(n),f=Object(s["a"])(u,2),p=f[0],h=f[1],v=Object(r["useState"])(!1),m=Object(s["a"])(v,2),g=m[0],y=m[1],b=Object(l["a"])(Object(l["a"])({},a),{},{visible:p});Object(r["useEffect"])((function(){h(n),n&&i&&y(d())}),[n,i]);var _=g?r["createElement"](Dn,Object(o["a"])({},b,{mobile:i,ref:e})):r["createElement"](Ln,Object(o["a"])({},b,{ref:e}));return r["createElement"]("div",null,r["createElement"](qt,b),_)}));jn.displayName="Popup";var Fn=jn,zn=r["createContext"](null),Bn=zn;function Un(){}function Vn(){return""}function qn(t){return t?t.ownerDocument:window.document}var Gn=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function Hn(t){var e=function(e){Object(_["a"])(i,e);var n=Object(x["a"])(i);function i(t){var e,a;return Object(y["a"])(this,i),e=n.call(this,t),e.popupRef=r["createRef"](),e.triggerRef=r["createRef"](),e.attachId=void 0,e.clickOutsideHandler=void 0,e.touchOutsideHandler=void 0,e.contextMenuOutsideHandler1=void 0,e.contextMenuOutsideHandler2=void 0,e.mouseDownTimeout=void 0,e.focusTime=void 0,e.preClickTime=void 0,e.preTouchTime=void 0,e.delayTimer=void 0,e.hasPopupMouseDown=void 0,e.onMouseEnter=function(t){var n=e.props.mouseEnterDelay;e.fireEvents("onMouseEnter",t),e.delaySetPopupVisible(!0,n,n?null:t)},e.onMouseMove=function(t){e.fireEvents("onMouseMove",t),e.setPoint(t)},e.onMouseLeave=function(t){e.fireEvents("onMouseLeave",t),e.delaySetPopupVisible(!1,e.props.mouseLeaveDelay)},e.onPopupMouseEnter=function(){e.clearDelayTimer()},e.onPopupMouseLeave=function(t){var n;t.relatedTarget&&!t.relatedTarget.setTimeout&&Lt(null===(n=e.popupRef.current)||void 0===n?void 0:n.getElement(),t.relatedTarget)||e.delaySetPopupVisible(!1,e.props.mouseLeaveDelay)},e.onFocus=function(t){e.fireEvents("onFocus",t),e.clearDelayTimer(),e.isFocusToShow()&&(e.focusTime=Date.now(),e.delaySetPopupVisible(!0,e.props.focusDelay))},e.onMouseDown=function(t){e.fireEvents("onMouseDown",t),e.preClickTime=Date.now()},e.onTouchStart=function(t){e.fireEvents("onTouchStart",t),e.preTouchTime=Date.now()},e.onBlur=function(t){e.fireEvents("onBlur",t),e.clearDelayTimer(),e.isBlurToHide()&&e.delaySetPopupVisible(!1,e.props.blurDelay)},e.onContextMenu=function(t){t.preventDefault(),e.fireEvents("onContextMenu",t),e.setPopupVisible(!0,t)},e.onContextMenuClose=function(){e.isContextMenuToShow()&&e.close()},e.onClick=function(t){if(e.fireEvents("onClick",t),e.focusTime){var n;if(e.preClickTime&&e.preTouchTime?n=Math.min(e.preClickTime,e.preTouchTime):e.preClickTime?n=e.preClickTime:e.preTouchTime&&(n=e.preTouchTime),Math.abs(n-e.focusTime)<20)return;e.focusTime=0}e.preClickTime=0,e.preTouchTime=0,e.isClickToShow()&&(e.isClickToHide()||e.isBlurToHide())&&t&&t.preventDefault&&t.preventDefault();var r=!e.state.popupVisible;(e.isClickToHide()&&!r||r&&e.isClickToShow())&&e.setPopupVisible(!e.state.popupVisible,t)},e.onPopupMouseDown=function(){var t;(e.hasPopupMouseDown=!0,clearTimeout(e.mouseDownTimeout),e.mouseDownTimeout=window.setTimeout((function(){e.hasPopupMouseDown=!1}),0),e.context)&&(t=e.context).onPopupMouseDown.apply(t,arguments)},e.onDocumentClick=function(t){if(!e.props.mask||e.props.maskClosable){var n=t.target,r=e.getRootDomNode(),i=e.getPopupDomNode();Lt(r,n)&&!e.isContextMenuOnly()||Lt(i,n)||e.hasPopupMouseDown||e.close()}},e.getRootDomNode=function(){var t=e.props.getTriggerDOMNode;if(t)return t(e.triggerRef.current);try{var n=Object(w["a"])(e.triggerRef.current);if(n)return n}catch(r){}return It.a.findDOMNode(Object(Mt["a"])(e))},e.getPopupClassNameFromAlign=function(t){var n=[],r=e.props,i=r.popupPlacement,o=r.builtinPlacements,a=r.prefixCls,s=r.alignPoint,u=r.getPopupClassNameFromAlign;return i&&o&&n.push(Bt(o,a,t,s)),u&&n.push(u(t)),n.join(" ")},e.getComponent=function(){var t=e.props,n=t.prefixCls,i=t.destroyPopupOnHide,a=t.popupClassName,s=t.onPopupAlign,u=t.popupMotion,c=t.popupAnimation,l=t.popupTransitionName,f=t.popupStyle,p=t.mask,h=t.maskAnimation,d=t.maskTransitionName,v=t.maskMotion,m=t.zIndex,g=t.popup,y=t.stretch,b=t.alignPoint,_=t.mobile,x=t.forceRender,w=e.state,E=w.popupVisible,S=w.point,C=e.getPopupAlign(),T={};return e.isMouseEnterToShow()&&(T.onMouseEnter=e.onPopupMouseEnter),e.isMouseLeaveToHide()&&(T.onMouseLeave=e.onPopupMouseLeave),T.onMouseDown=e.onPopupMouseDown,T.onTouchStart=e.onPopupMouseDown,r["createElement"](Fn,Object(o["a"])({prefixCls:n,destroyPopupOnHide:i,visible:E,point:b&&S,className:a,align:C,onAlign:s,animation:c,getClassNameFromAlign:e.getPopupClassNameFromAlign},T,{stretch:y,getRootDomNode:e.getRootDomNode,style:f,mask:p,zIndex:m,transitionName:l,maskAnimation:h,maskTransitionName:d,maskMotion:v,ref:e.popupRef,motion:u,mobile:_,forceRender:x}),"function"===typeof g?g():g)},e.attachParent=function(t){g["a"].cancel(e.attachId);var n,r=e.props,i=r.getPopupContainer,o=r.getDocument,a=e.getRootDomNode();i?(a||0===i.length)&&(n=i(a)):n=o(e.getRootDomNode()).body,n?n.appendChild(t):e.attachId=Object(g["a"])((function(){e.attachParent(t)}))},e.getContainer=function(){var t=e.props.getDocument,n=t(e.getRootDomNode()).createElement("div");return n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.width="100%",e.attachParent(n),n},e.setPoint=function(t){var n=e.props.alignPoint;n&&t&&e.setState({point:{pageX:t.pageX,pageY:t.pageY}})},e.handlePortalUpdate=function(){e.state.prevPopupVisible!==e.state.popupVisible&&e.props.afterPopupVisibleChange(e.state.popupVisible)},e.triggerContextValue={onPopupMouseDown:e.onPopupMouseDown},a="popupVisible"in t?!!t.popupVisible:!!t.defaultPopupVisible,e.state={prevPopupVisible:a,popupVisible:a},Gn.forEach((function(t){e["fire".concat(t)]=function(n){e.fireEvents(t,n)}})),e}return Object(b["a"])(i,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var t,e=this.props,n=this.state;if(n.popupVisible)return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(t=e.getDocument(this.getRootDomNode()),this.clickOutsideHandler=Rt(t,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(t=t||e.getDocument(this.getRootDomNode()),this.touchOutsideHandler=Rt(t,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(t=t||e.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=Rt(t,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=Rt(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),g["a"].cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var t;return(null===(t=this.popupRef.current)||void 0===t?void 0:t.getElement())||null}},{key:"getPopupAlign",value:function(){var t=this.props,e=t.popupPlacement,n=t.popupAlign,r=t.builtinPlacements;return e&&r?zt(r,e,n):n}},{key:"setPopupVisible",value:function(t,e){var n=this.props.alignPoint,r=this.state.popupVisible;this.clearDelayTimer(),r!==t&&("popupVisible"in this.props||this.setState({popupVisible:t,prevPopupVisible:r}),this.props.onPopupVisibleChange(t)),n&&e&&t&&this.setPoint(e)}},{key:"delaySetPopupVisible",value:function(t,e,n){var r=this,i=1e3*e;if(this.clearDelayTimer(),i){var o=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=window.setTimeout((function(){r.setPopupVisible(t,o),r.clearDelayTimer()}),i)}else this.setPopupVisible(t,n)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(t){var e=this.props.children.props,n=this.props;return e[t]&&n[t]?this["fire".concat(t)]:e[t]||n[t]}},{key:"isClickToShow",value:function(){var t=this.props,e=t.action,n=t.showAction;return-1!==e.indexOf("click")||-1!==n.indexOf("click")}},{key:"isContextMenuOnly",value:function(){var t=this.props.action;return"contextMenu"===t||1===t.length&&"contextMenu"===t[0]}},{key:"isContextMenuToShow",value:function(){var t=this.props,e=t.action,n=t.showAction;return-1!==e.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var t=this.props,e=t.action,n=t.hideAction;return-1!==e.indexOf("click")||-1!==n.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var t=this.props,e=t.action,n=t.showAction;return-1!==e.indexOf("hover")||-1!==n.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var t=this.props,e=t.action,n=t.hideAction;return-1!==e.indexOf("hover")||-1!==n.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var t=this.props,e=t.action,n=t.showAction;return-1!==e.indexOf("focus")||-1!==n.indexOf("focus")}},{key:"isBlurToHide",value:function(){var t=this.props,e=t.action,n=t.hideAction;return-1!==e.indexOf("focus")||-1!==n.indexOf("blur")}},{key:"forcePopupAlign",value:function(){var t;this.state.popupVisible&&(null===(t=this.popupRef.current)||void 0===t||t.forceAlign())}},{key:"fireEvents",value:function(t,e){var n=this.props.children.props[t];n&&n(e);var r=this.props[t];r&&r(e)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var e=this.state.popupVisible,n=this.props,i=n.children,o=n.forceRender,a=n.alignPoint,s=n.className,u=n.autoDestroy,c=r["Children"].only(i),f={key:"trigger"};this.isContextMenuToShow()?f.onContextMenu=this.onContextMenu:f.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(f.onClick=this.onClick,f.onMouseDown=this.onMouseDown,f.onTouchStart=this.onTouchStart):(f.onClick=this.createTwoChains("onClick"),f.onMouseDown=this.createTwoChains("onMouseDown"),f.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(f.onMouseEnter=this.onMouseEnter,a&&(f.onMouseMove=this.onMouseMove)):f.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?f.onMouseLeave=this.onMouseLeave:f.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(f.onFocus=this.onFocus,f.onBlur=this.onBlur):(f.onFocus=this.createTwoChains("onFocus"),f.onBlur=this.createTwoChains("onBlur"));var h=p()(c&&c.props&&c.props.className,s);h&&(f.className=h);var d=Object(l["a"])({},f);Object(S["c"])(c)&&(d.ref=Object(S["a"])(this.triggerRef,c.ref));var v,m=r["cloneElement"](c,d);return(e||this.popupRef.current||o)&&(v=r["createElement"](t,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!e&&u&&(v=null),r["createElement"](Bn.Provider,{value:this.triggerContextValue},m,v)}}],[{key:"getDerivedStateFromProps",value:function(t,e){var n=t.popupVisible,r={};return void 0!==n&&e.popupVisible!==n&&(r.popupVisible=n,r.prevPopupVisible=e.popupVisible),r}}]),i}(r["Component"]);return e.contextType=Bn,e.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:Vn,getDocument:qn,onPopupVisibleChange:Un,afterPopupVisibleChange:Un,onPopupAlign:Un,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1},e}var Wn=Hn(jt),Xn={adjustX:1,adjustY:1},Zn={topLeft:{points:["bl","tl"],overflow:Xn,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:Xn,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:Xn,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:Xn,offset:[4,0]}},Yn={topLeft:{points:["bl","tl"],overflow:Xn,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:Xn,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:Xn,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:Xn,offset:[4,0]}};function Kn(t,e,n){return e||(n?n[t]||n.other:void 0)}var Jn={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function Qn(t){var e=t.prefixCls,n=t.visible,i=t.children,o=t.popup,u=t.popupClassName,c=t.popupOffset,f=t.disabled,h=t.mode,d=t.onVisibleChange,v=r["useContext"](ot),m=v.getPopupContainer,y=v.rtl,b=v.subMenuOpenDelay,_=v.subMenuCloseDelay,x=v.builtinPlacements,w=v.triggerSubMenuAction,E=v.forceSubMenuRender,S=v.motion,C=v.defaultMotions,T=r["useState"](!1),O=Object(s["a"])(T,2),A=O[0],k=O[1],M=y?Object(l["a"])(Object(l["a"])({},Yn),x):Object(l["a"])(Object(l["a"])({},Zn),x),P=Jn[h],I=Kn(h,S,C),L=Object(l["a"])(Object(l["a"])({},I),{},{leavedClassName:"".concat(e,"-hidden"),removeOnLeave:!1,motionAppear:!0}),R=r["useRef"]();return r["useEffect"]((function(){return R.current=Object(g["a"])((function(){k(n)})),function(){g["a"].cancel(R.current)}}),[n]),r["createElement"](Wn,{prefixCls:e,popupClassName:p()("".concat(e,"-popup"),Object(a["a"])({},"".concat(e,"-rtl"),y),u),stretch:"horizontal"===h?"minWidth":null,getPopupContainer:m,builtinPlacements:M,popupPlacement:P,popupVisible:A,popup:o,popupAlign:c&&{offset:c},action:f?[]:[w],mouseEnterDelay:b,mouseLeaveDelay:_,onPopupVisibleChange:d,forceRender:E,popupMotion:L},i)}function $n(t){var e=t.id,n=t.open,i=t.keyPath,a=t.children,u="inline",c=r["useContext"](ot),f=c.prefixCls,p=c.forceSubMenuRender,h=c.motion,d=c.defaultMotions,v=c.mode,m=r["useRef"](!1);m.current=v===u;var g=r["useState"](!m.current),y=Object(s["a"])(g,2),b=y[0],_=y[1],x=!!m.current&&n;r["useEffect"]((function(){m.current&&_(!1)}),[v]);var w=Object(l["a"])({},Kn(u,h,d));i.length>1&&(w.motionAppear=!1);var E=w.onVisibleChanged;return w.onVisibleChanged=function(t){return m.current||t||_(!0),null===E||void 0===E?void 0:E(t)},b?null:r["createElement"](st,{mode:u,locked:!m.current},r["createElement"](Ut["b"],Object(o["a"])({visible:x},w,{forceRender:p,removeOnLeave:!1,leavedClassName:"".concat(f,"-hidden")}),(function(t){var n=t.className,i=t.style;return r["createElement"](kt,{id:e,className:n,style:i},a)})))}var tr=function(t){var e,n=t.style,i=t.className,u=t.title,f=t.eventKey,h=(t.warnKey,t.disabled),d=t.internalPopupClose,v=t.children,m=t.itemIcon,g=t.expandIcon,y=t.popupClassName,b=t.popupOffset,_=t.onClick,x=t.onMouseEnter,w=t.onMouseLeave,E=t.onTitleClick,S=t.onTitleMouseEnter,C=t.onTitleMouseLeave,T=Object(c["a"])(t,["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"]),O=_t(f),A=r["useContext"](ot),k=A.prefixCls,M=A.mode,P=A.openKeys,I=A.disabled,L=A.overflowDisabled,R=A.activeKey,D=A.selectedKeys,N=A.itemIcon,j=A.expandIcon,F=A.onItemClick,z=A.onOpenChange,B=A.onActive,U=r["useContext"](gt),V=U.isSubPathKey,q=mt(),G="".concat(k,"-submenu"),H=I||h,W=r["useRef"](),X=r["useRef"]();var Z=m||N,Y=g||j,K=P.includes(f),J=!L&&K,Q=V(D,f),$=ut(f,H,S,C),tt=$.active,et=Object(c["a"])($,["active"]),rt=r["useState"](!1),it=Object(s["a"])(rt,2),at=it[0],pt=it[1],ht=function(t){H||pt(t)},dt=function(t){ht(!0),null===x||void 0===x||x({key:f,domEvent:t})},vt=function(t){ht(!1),null===w||void 0===w||w({key:f,domEvent:t})},yt=r["useMemo"]((function(){return tt||"inline"!==M&&(at||V([R],f))}),[M,tt,R,at,f,V]),bt=ft(q.length),xt=function(t){H||(null===E||void 0===E||E({key:f,domEvent:t}),"inline"===M&&z(f,!K))},wt=Tt((function(t){null===_||void 0===_||_(ct(t)),F(t)})),Et=function(t){"inline"!==M&&z(f,t)},St=function(){B(f)},Ct=O&&"".concat(O,"-popup"),Ot=r["createElement"]("div",Object(o["a"])({role:"menuitem",style:bt,className:"".concat(G,"-title"),tabIndex:H?null:-1,ref:W,title:"string"===typeof u?u:null,"data-menu-id":L&&O?null:O,"aria-expanded":J,"aria-haspopup":!0,"aria-controls":Ct,"aria-disabled":H,onClick:xt,onFocus:St},et),u,r["createElement"](lt,{icon:"horizontal"!==M?Y:null,props:Object(l["a"])(Object(l["a"])({},t),{},{isOpen:J,isSubMenu:!0})},r["createElement"]("i",{className:"".concat(G,"-arrow")}))),At=r["useRef"](M);if("inline"!==M&&(At.current=q.length>1?"vertical":M),!L){var Mt=At.current;Ot=r["createElement"](Qn,{mode:Mt,prefixCls:G,visible:!d&&J&&"inline"!==M,popupClassName:y,popupOffset:b,popup:r["createElement"](st,{mode:"horizontal"===Mt?"vertical":Mt},r["createElement"](kt,{id:Ct,ref:X},v)),disabled:H,onVisibleChange:Et},Ot)}return r["createElement"](st,{onItemClick:wt,mode:"horizontal"===M?"vertical":M,itemIcon:Z,expandIcon:Y},r["createElement"](nt.Item,Object(o["a"])({role:"none"},T,{component:"li",style:n,className:p()(G,"".concat(G,"-").concat(M),i,(e={},Object(a["a"])(e,"".concat(G,"-open"),J),Object(a["a"])(e,"".concat(G,"-active"),yt),Object(a["a"])(e,"".concat(G,"-selected"),Q),Object(a["a"])(e,"".concat(G,"-disabled"),H),e)),onMouseEnter:dt,onMouseLeave:vt}),Ot,!L&&r["createElement"]($n,{id:Ct,open:J,keyPath:q},v)))};function er(t){var e,n=t.eventKey,i=t.children,o=mt(n),a=Ct(i,o),s=dt();return r["useEffect"]((function(){if(s)return s.registerPath(n,o),function(){s.unregisterPath(n,o)}}),[o]),e=s?a:r["createElement"](tr,t,a),r["createElement"](vt.Provider,{value:o},e)}function nr(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Ht(t)){var n=t.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||t.isContentEditable||"a"===n&&!!t.getAttribute("href"),i=t.getAttribute("tabindex"),o=Number(i),a=null;return i&&!Number.isNaN(o)?a=o:r&&null===a&&(a=0),r&&t.disabled&&(a=null),null!==a&&(a>=0||e&&a<0)}return!1}function rr(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(m["a"])(t.querySelectorAll("*")).filter((function(t){return nr(t,e)}));return nr(t,e)&&n.unshift(t),n}var ir=I.LEFT,or=I.RIGHT,ar=I.UP,sr=I.DOWN,ur=I.ENTER,cr=I.ESC,lr=[ar,sr,ir,or];function fr(t,e,n,r){var i,o,s,u,c="prev",l="next",f="children",p="parent";if("inline"===t&&r===ur)return{inlineTrigger:!0};var h=(i={},Object(a["a"])(i,ar,c),Object(a["a"])(i,sr,l),i),d=(o={},Object(a["a"])(o,ir,n?l:c),Object(a["a"])(o,or,n?c:l),Object(a["a"])(o,sr,f),Object(a["a"])(o,ur,f),o),v=(s={},Object(a["a"])(s,ar,c),Object(a["a"])(s,sr,l),Object(a["a"])(s,ur,f),Object(a["a"])(s,cr,p),Object(a["a"])(s,ir,n?f:p),Object(a["a"])(s,or,n?p:f),s),m={inline:h,horizontal:d,vertical:v,inlineSub:h,horizontalSub:v,verticalSub:v},g=null===(u=m["".concat(t).concat(e?"":"Sub")])||void 0===u?void 0:u[r];switch(g){case c:return{offset:-1,sibling:!0};case l:return{offset:1,sibling:!0};case p:return{offset:-1,sibling:!1};case f:return{offset:1,sibling:!1};default:return null}}function pr(t){var e=t;while(e){if(e.getAttribute("data-menu-list"))return e;e=e.parentElement}return null}function hr(t,e){var n=t||document.activeElement;while(n){if(e.has(n))return n;n=n.parentElement}return null}function dr(t,e){var n=rr(t,!0);return n.filter((function(t){return e.has(t)}))}function vr(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!t)return null;var i=dr(t,e),o=i.length,a=i.findIndex((function(t){return n===t}));return r<0?-1===a?a=o-1:a-=1:r>0&&(a+=1),a=(a+o)%o,i[a]}function mr(t,e,n,i,o,a,s,u,c,l){var f=r["useRef"](),p=r["useRef"]();p.current=e;var h=function(){g["a"].cancel(f.current)};return r["useEffect"]((function(){return function(){h()}}),[]),function(r){var d=r.which;if([].concat(lr,[ur,cr]).includes(d)){var v,m,y,b=function(){v=new Set,m=new Map,y=new Map;var t=a();return t.forEach((function(t){var e=document.querySelector("[data-menu-id='".concat(bt(i,t),"']"));e&&(v.add(e),y.set(e,t),m.set(t,e))})),v};b();var _=m.get(e),x=hr(_,v),w=y.get(x),E=fr(t,1===s(w,!0).length,n,d);if(!E)return;lr.includes(d)&&r.preventDefault();var S=function(t){if(t){var e=t,n=t.querySelector("a");(null===n||void 0===n?void 0:n.getAttribute("href"))&&(e=n);var r=y.get(t);u(r),h(),f.current=Object(g["a"])((function(){p.current===r&&e.focus()}))}};if(E.sibling||!x){var C;C=x&&"inline"!==t?pr(x):o.current;var T=vr(C,v,x,E.offset);S(T)}else if(E.inlineTrigger)c(w);else if(E.offset>0)c(w,!0),h(),f.current=Object(g["a"])((function(){b();var t=x.getAttribute("aria-controls"),e=document.getElementById(t),n=vr(e,v);S(n)}),5);else if(E.offset<0){var O=s(w,!0),A=O[O.length-2],k=m.get(A);c(A,!1),S(k)}}null===l||void 0===l||l(r)}}var gr=Math.random().toFixed(5).toString().slice(2),yr=0;function br(t){var e=v(t,{value:t}),n=Object(s["a"])(e,2),i=n[0],o=n[1];return r["useEffect"]((function(){yr+=1;var t="".concat(gr,"-").concat(yr);o("rc-menu-uuid-".concat(t))}),[]),i}function _r(t){Promise.resolve().then(t)}var xr="__RC_UTIL_PATH_SPLIT__",wr=function(t){return t.join(xr)},Er=function(t){return t.split(xr)},Sr="rc-menu-more";function Cr(){var t=r["useState"]({}),e=Object(s["a"])(t,2),n=e[1],i=Object(r["useRef"])(new Map),o=Object(r["useRef"])(new Map),a=r["useState"]([]),u=Object(s["a"])(a,2),c=u[0],l=u[1],f=Object(r["useRef"])(0),p=Object(r["useRef"])(!1),h=function(){p.current||n({})},d=Object(r["useCallback"])((function(t,e){var n=wr(e);o.current.set(n,t),i.current.set(t,n),f.current+=1;var r=f.current;_r((function(){r===f.current&&h()}))}),[]),v=Object(r["useCallback"])((function(t,e){var n=wr(e);o.current["delete"](n),i.current["delete"](t)}),[]),g=Object(r["useCallback"])((function(t){l(t)}),[]),y=Object(r["useCallback"])((function(t,e){var n=i.current.get(t)||"",r=Er(n);return e&&c.includes(r[0])&&r.unshift(Sr),r}),[c]),b=Object(r["useCallback"])((function(t,e){return t.some((function(t){var n=y(t,!0);return n.includes(e)}))}),[y]),_=function(){var t=Object(m["a"])(i.current.keys());return c.length&&t.push(Sr),t},x=Object(r["useCallback"])((function(t){var e="".concat(i.current.get(t)).concat(xr),n=new Set;return Object(m["a"])(o.current.keys()).forEach((function(t){t.startsWith(e)&&n.add(o.current.get(t))})),n}),[]);return r["useEffect"]((function(){return function(){p.current=!0}}),[]),{registerPath:d,unregisterPath:v,refreshOverflowKeys:g,isSubPathKey:b,getKeyPath:y,getKeys:_,getSubPathKeys:x}}var Tr=[],Or=function(t){var e,n,i=t.prefixCls,u=void 0===i?"rc-menu":i,f=t.style,h=t.className,d=t.tabIndex,g=void 0===d?0:d,y=t.children,b=t.direction,_=t.id,x=t.mode,w=void 0===x?"vertical":x,E=t.inlineCollapsed,S=t.disabled,C=t.disabledOverflow,T=t.subMenuOpenDelay,O=void 0===T?.1:T,A=t.subMenuCloseDelay,k=void 0===A?.1:A,M=t.forceSubMenuRender,P=t.defaultOpenKeys,I=t.openKeys,L=t.activeKey,R=t.defaultActiveFirst,D=t.selectable,N=void 0===D||D,j=t.multiple,F=void 0!==j&&j,z=t.defaultSelectedKeys,U=t.selectedKeys,V=t.onSelect,q=t.onDeselect,G=t.inlineIndent,H=void 0===G?24:G,W=t.motion,X=t.defaultMotions,Z=t.triggerSubMenuAction,Y=void 0===Z?"hover":Z,K=t.builtinPlacements,J=t.itemIcon,Q=t.expandIcon,$=t.overflowedIndicator,tt=void 0===$?"...":$,et=t.overflowedIndicatorPopupClassName,rt=t.getPopupContainer,it=t.onClick,ot=t.onOpenChange,at=t.onKeyDown,ut=(t.openAnimation,t.openTransitionName,Object(c["a"])(t,["prefixCls","style","className","tabIndex","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName"])),lt=Ct(y,Tr),ft=r["useState"](!1),pt=Object(s["a"])(ft,2),dt=pt[0],vt=pt[1],mt=r["useRef"](),bt=br(_),_t="rtl"===b;var xt=r["useMemo"]((function(){return"inline"!==w&&"vertical"!==w||!E?[w,!1]:["vertical",E]}),[w,E]),wt=Object(s["a"])(xt,2),Et=wt[0],Ot=wt[1],At=r["useState"](0),kt=Object(s["a"])(At,2),Mt=kt[0],Pt=kt[1],It=Mt>=lt.length-1||"horizontal"!==Et||C,Lt=v(P,{value:I,postState:function(t){return t||Tr}}),Rt=Object(s["a"])(Lt,2),Dt=Rt[0],Nt=Rt[1],jt=function(t){Nt(t),null===ot||void 0===ot||ot(t)},Ft=r["useState"](Dt),zt=Object(s["a"])(Ft,2),Bt=zt[0],Ut=zt[1],Vt="inline"===Et,qt=r["useRef"](!1);r["useEffect"]((function(){Vt&&Ut(Dt)}),[Dt]),r["useEffect"]((function(){qt.current?Vt?Nt(Bt):jt(Tr):qt.current=!0}),[Vt]);var Gt=Cr(),Ht=Gt.registerPath,Wt=Gt.unregisterPath,Xt=Gt.refreshOverflowKeys,Zt=Gt.isSubPathKey,Yt=Gt.getKeyPath,Kt=Gt.getKeys,Jt=Gt.getSubPathKeys,Qt=r["useMemo"]((function(){return{registerPath:Ht,unregisterPath:Wt}}),[Ht,Wt]),$t=r["useMemo"]((function(){return{isSubPathKey:Zt}}),[Zt]);r["useEffect"]((function(){Xt(It?Tr:lt.slice(Mt+1).map((function(t){return t.key})))}),[Mt,It]);var te=v(L||R&&(null===(e=lt[0])||void 0===e?void 0:e.key),{value:L}),ee=Object(s["a"])(te,2),ne=ee[0],re=ee[1],ie=Tt((function(t){re(t)})),oe=Tt((function(){re(void 0)})),ae=v(z||[],{value:U,postState:function(t){return Array.isArray(t)?t:null===t||void 0===t?Tr:[t]}}),se=Object(s["a"])(ae,2),ue=se[0],ce=se[1],le=function(t){if(N){var e,n=t.key,r=ue.includes(n);e=F?r?ue.filter((function(t){return t!==n})):[].concat(Object(m["a"])(ue),[n]):[n],ce(e);var i=Object(l["a"])(Object(l["a"])({},t),{},{selectedKeys:e});r?null===q||void 0===q||q(i):null===V||void 0===V||V(i)}!F&&Dt.length&&"inline"!==Et&&jt(Tr)},fe=Tt((function(t){null===it||void 0===it||it(ct(t)),le(t)})),pe=Tt((function(t,e){var n=Dt.filter((function(e){return e!==t}));if(e)n.push(t);else if("inline"!==Et){var r=Jt(t);n=n.filter((function(t){return!r.has(t)}))}B()(Dt,n)||jt(n)})),he=Tt(rt),de=function(t,e){var n=null!==e&&void 0!==e?e:!Dt.includes(t);pe(t,n)},ve=mr(Et,ne,_t,bt,mt,Kt,Yt,re,de,at);r["useEffect"]((function(){vt(!0)}),[]);var me="horizontal"!==Et||C?lt:lt.map((function(t,e){return r["createElement"](st,{key:t.key,overflowDisabled:e>Mt},t)})),ge=r["createElement"](nt,Object(o["a"])({id:_,ref:mt,prefixCls:"".concat(u,"-overflow"),component:"ul",itemComponent:St,className:p()(u,"".concat(u,"-root"),"".concat(u,"-").concat(Et),h,(n={},Object(a["a"])(n,"".concat(u,"-inline-collapsed"),Ot),Object(a["a"])(n,"".concat(u,"-rtl"),_t),n)),dir:b,style:f,role:"menu",tabIndex:g,data:me,renderRawItem:function(t){return t},renderRawRest:function(t){var e=t.length,n=e?lt.slice(-e):null;return r["createElement"](er,{eventKey:Sr,title:tt,disabled:It,internalPopupClose:0===e,popupClassName:et},n)},maxCount:"horizontal"!==Et||C?nt.INVALIDATE:nt.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(t){Pt(t)},onKeyDown:ve},ut));return r["createElement"](yt.Provider,{value:bt},r["createElement"](st,{prefixCls:u,mode:Et,openKeys:Dt,rtl:_t,disabled:S,motion:dt?W:null,defaultMotions:dt?X:null,activeKey:ne,onActive:ie,onInactive:oe,selectedKeys:ue,inlineIndent:H,subMenuOpenDelay:O,subMenuCloseDelay:k,forceSubMenuRender:M,builtinPlacements:K,triggerSubMenuAction:Y,getPopupContainer:he,itemIcon:J,expandIcon:Q,onItemClick:fe,onOpenChange:pe},r["createElement"](gt.Provider,{value:$t},ge),r["createElement"]("div",{style:{display:"none"},"aria-hidden":!0},r["createElement"](ht.Provider,{value:Qt},lt))))},Ar=Or,kr=function(t){var e=t.className,n=t.title,i=(t.eventKey,t.children),a=Object(c["a"])(t,["className","title","eventKey","children"]),s=r["useContext"](ot),u=s.prefixCls,l="".concat(u,"-item-group");return r["createElement"]("li",Object(o["a"])({},a,{onClick:function(t){return t.stopPropagation()},className:p()(l,e)}),r["createElement"]("div",{className:"".concat(l,"-title"),title:"string"===typeof n?n:void 0},n),r["createElement"]("ul",{className:"".concat(l,"-list")},i))};function Mr(t){var e=t.children,n=Object(c["a"])(t,["children"]),i=mt(n.eventKey),o=Ct(e,i),a=dt();return a?o:r["createElement"](kr,Object(rt["a"])(n,["warnKey"]),o)}function Pr(t){var e=t.className,n=t.style,i=r["useContext"](ot),o=i.prefixCls,a=dt();return a?null:r["createElement"]("li",{className:p()("".concat(o,"-item-divider"),e),style:n})}var Ir=Ar;Ir.Item=St,Ir.SubMenu=er,Ir.ItemGroup=Mr,Ir.Divider=Pr;var Lr=Ir,Rr={adjustX:1,adjustY:1},Dr=[0,0],Nr={topLeft:{points:["bl","tl"],overflow:Rr,offset:[0,-4],targetOffset:Dr},topCenter:{points:["bc","tc"],overflow:Rr,offset:[0,-4],targetOffset:Dr},topRight:{points:["br","tr"],overflow:Rr,offset:[0,-4],targetOffset:Dr},bottomLeft:{points:["tl","bl"],overflow:Rr,offset:[0,4],targetOffset:Dr},bottomCenter:{points:["tc","bc"],overflow:Rr,offset:[0,4],targetOffset:Dr},bottomRight:{points:["tr","br"],overflow:Rr,offset:[0,4],targetOffset:Dr}},jr=Nr;function Fr(t,e){var n=t.arrow,i=void 0!==n&&n,o=t.prefixCls,u=void 0===o?"rc-dropdown":o,l=t.transitionName,f=t.animation,h=t.align,d=t.placement,v=void 0===d?"bottomLeft":d,m=t.placements,g=void 0===m?jr:m,y=t.getPopupContainer,b=t.showAction,_=t.hideAction,x=t.overlayClassName,w=t.overlayStyle,E=t.visible,S=t.trigger,C=void 0===S?["hover"]:S,T=Object(c["a"])(t,["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger"]),O=r["useState"](),A=Object(s["a"])(O,2),k=A[0],M=A[1],P="visible"in t?E:k,I=r["useRef"](null);r["useImperativeHandle"](e,(function(){return I.current}));var L=function(){var e,n=t.overlay;return e="function"===typeof n?n():n,e},R=function(e){var n=t.onOverlayClick,r=L().props;M(!1),n&&n(e),r.onClick&&r.onClick(e)},D=function(e){var n=t.onVisibleChange;M(e),"function"===typeof n&&n(e)},N=function(){var t=L(),e={prefixCls:"".concat(u,"-menu"),onClick:R};return"string"===typeof t.type&&delete e.prefixCls,r["createElement"](r["Fragment"],null,i&&r["createElement"]("div",{className:"".concat(u,"-arrow")}),r["cloneElement"](t,e))},j=function(){var e=t.overlay;return"function"===typeof e?N:N()},F=function(){var e=t.minOverlayWidthMatchTrigger,n=t.alignPoint;return"minOverlayWidthMatchTrigger"in t?e:!n},z=function(){var e=t.openClassName;return void 0!==e?e:"".concat(u,"-open")},B=function(){var e=t.children,n=e.props?e.props:{},i=p()(n.className,z());return k&&e?r["cloneElement"](e,{className:i}):e},U=_;return U||-1===C.indexOf("contextMenu")||(U=["click"]),r["createElement"](Wn,Object.assign({},T,{prefixCls:u,ref:I,popupClassName:p()(x,Object(a["a"])({},"".concat(u,"-show-arrow"),i)),popupStyle:w,builtinPlacements:g,action:C,showAction:b,hideAction:U||[],popupPlacement:v,popupAlign:h,popupTransitionName:l,popupAnimation:f,popupVisible:P,stretch:F()?"minWidth":"",popup:j(),onPopupVisibleChange:D,getPopupContainer:y}),B())}var zr=r["forwardRef"](Fr),Br=zr;function Ur(t,e){var n=t.prefixCls,i=t.editable,o=t.locale,a=t.style;return i&&!1!==i.showAdd?r["createElement"]("button",{ref:e,type:"button",className:"".concat(n,"-nav-add"),style:a,"aria-label":(null===o||void 0===o?void 0:o.addAriaLabel)||"Add tab",onClick:function(t){i.onEdit("add",{event:t})}},i.addIcon||"+"):null}var Vr=r["forwardRef"](Ur);function qr(t,e){var n=t.prefixCls,i=t.id,o=t.tabs,u=t.locale,c=t.mobile,l=t.moreIcon,f=void 0===l?"More":l,h=t.moreTransitionName,d=t.style,v=t.className,m=t.editable,g=t.tabBarGutter,y=t.rtl,b=t.onTabClick,_=Object(r["useState"])(!1),x=Object(s["a"])(_,2),w=x[0],E=x[1],S=Object(r["useState"])(null),C=Object(s["a"])(S,2),T=C[0],O=C[1],A="".concat(i,"-more-popup"),k="".concat(n,"-dropdown"),M=null!==T?"".concat(A,"-").concat(T):null,P=null===u||void 0===u?void 0:u.dropdownAriaLabel,L=r["createElement"](Lr,{onClick:function(t){var e=t.key,n=t.domEvent;b(e,n),E(!1)},id:A,tabIndex:-1,role:"listbox","aria-activedescendant":M,selectedKeys:[T],"aria-label":void 0!==P?P:"expanded dropdown"},o.map((function(t){return r["createElement"](St,{key:t.key,id:"".concat(A,"-").concat(t.key),role:"option","aria-controls":i&&"".concat(i,"-panel-").concat(t.key),disabled:t.disabled},t.tab)})));function R(t){for(var e=o.filter((function(t){return!t.disabled})),n=e.findIndex((function(t){return t.key===T}))||0,r=e.length,i=0;i<r;i+=1){n=(n+t+r)%r;var a=e[n];if(!a.disabled)return void O(a.key)}}function D(t){var e=t.which;if(w)switch(e){case I.UP:R(-1),t.preventDefault();break;case I.DOWN:R(1),t.preventDefault();break;case I.ESC:E(!1);break;case I.SPACE:case I.ENTER:null!==T&&b(T,t);break}else[I.DOWN,I.SPACE,I.ENTER].includes(e)&&(E(!0),t.preventDefault())}Object(r["useEffect"])((function(){var t=document.getElementById(M);t&&t.scrollIntoView&&t.scrollIntoView(!1)}),[T]),Object(r["useEffect"])((function(){w||O(null)}),[w]);var N=Object(a["a"])({},y?"marginRight":"marginLeft",g);o.length||(N.visibility="hidden",N.order=1);var j=p()(Object(a["a"])({},"".concat(k,"-rtl"),y)),F=c?null:r["createElement"](Br,{prefixCls:k,overlay:L,trigger:["hover"],visible:w,transitionName:h,onVisibleChange:E,overlayClassName:j,mouseEnterDelay:.1,mouseLeaveDelay:.1},r["createElement"]("button",{type:"button",className:"".concat(n,"-nav-more"),style:N,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":A,id:"".concat(i,"-more"),"aria-expanded":w,onKeyDown:D},f));return r["createElement"]("div",{className:p()("".concat(n,"-nav-operations"),v),style:d,ref:e},F,r["createElement"](Vr,{prefixCls:n,locale:u,editable:m}))}var Gr=r["forwardRef"](qr),Hr=Object(r["createContext"])(null),Wr=.1,Xr=.01,Zr=20,Yr=Math.pow(.995,Zr);function Kr(t,e){var n=Object(r["useState"])(),i=Object(s["a"])(n,2),o=i[0],a=i[1],u=Object(r["useState"])(0),c=Object(s["a"])(u,2),l=c[0],f=c[1],p=Object(r["useState"])(0),h=Object(s["a"])(p,2),d=h[0],v=h[1],m=Object(r["useState"])(),g=Object(s["a"])(m,2),y=g[0],b=g[1],_=Object(r["useRef"])();function x(t){var e=t.touches[0],n=e.screenX,r=e.screenY;a({x:n,y:r}),window.clearInterval(_.current)}function w(t){if(o){t.preventDefault();var n=t.touches[0],r=n.screenX,i=n.screenY;a({x:r,y:i});var s=r-o.x,u=i-o.y;e(s,u);var c=Date.now();f(c),v(c-l),b({x:s,y:u})}}function E(){if(o&&(a(null),b(null),y)){var t=y.x/d,n=y.y/d,r=Math.abs(t),i=Math.abs(n);if(Math.max(r,i)<Wr)return;var s=t,u=n;_.current=window.setInterval((function(){Math.abs(s)<Xr&&Math.abs(u)<Xr?window.clearInterval(_.current):(s*=Yr,u*=Yr,e(s*Zr,u*Zr))}),Zr)}}var S=Object(r["useRef"])();function C(t){var n=t.deltaX,r=t.deltaY,i=0,o=Math.abs(n),a=Math.abs(r);o===a?i="x"===S.current?n:r:o>a?(i=n,S.current="x"):(i=r,S.current="y"),e(-i,-i)&&t.preventDefault()}var T=Object(r["useRef"])(null);T.current={onTouchStart:x,onTouchMove:w,onTouchEnd:E,onWheel:C},r["useEffect"]((function(){function e(t){T.current.onTouchStart(t)}function n(t){T.current.onTouchMove(t)}function r(t){T.current.onTouchEnd(t)}function i(t){T.current.onWheel(t)}return document.addEventListener("touchmove",n,{passive:!1}),document.addEventListener("touchend",r,{passive:!1}),t.current.addEventListener("touchstart",e,{passive:!1}),t.current.addEventListener("wheel",i),function(){document.removeEventListener("touchmove",n),document.removeEventListener("touchend",r)}}),[])}function Jr(){var t=Object(r["useRef"])(new Map);function e(e){return t.current.has(e)||t.current.set(e,r["createRef"]()),t.current.get(e)}function n(e){t.current["delete"](e)}return[e,n]}function Qr(t,e){var n=r["useRef"](t),i=r["useState"]({}),o=Object(s["a"])(i,2),a=o[1];function u(t){var r="function"===typeof t?t(n.current):t;r!==n.current&&e(r,n.current),n.current=r,a({})}return[n.current,u]}var $r=function(t){var e,n=t.position,i=t.prefixCls,o=t.extra;if(!o)return null;var a={};return o&&"object"===Object(u["a"])(o)&&!r["isValidElement"](o)?a=o:a.right=o,"right"===n&&(e=a.right),"left"===n&&(e=a.left),e?r["createElement"]("div",{className:"".concat(i,"-extra-content")},e):null};function ti(t,e){var n,i=r["useContext"](Hr),u=i.prefixCls,c=i.tabs,f=t.className,h=t.style,d=t.id,v=t.animated,y=t.activeKey,b=t.rtl,_=t.extra,x=t.editable,w=t.locale,E=t.tabPosition,S=t.tabBarGutter,C=t.children,T=t.onTabClick,O=t.onTabScroll,P=Object(r["useRef"])(),I=Object(r["useRef"])(),L=Object(r["useRef"])(),D=Object(r["useRef"])(),j=Jr(),z=Object(s["a"])(j,2),B=z[0],U=z[1],V="top"===E||"bottom"===E,q=Qr(0,(function(t,e){V&&O&&O({direction:t>e?"left":"right"})})),G=Object(s["a"])(q,2),H=G[0],W=G[1],X=Qr(0,(function(t,e){!V&&O&&O({direction:t>e?"top":"bottom"})})),Z=Object(s["a"])(X,2),Y=Z[0],K=Z[1],J=Object(r["useState"])(0),Q=Object(s["a"])(J,2),$=Q[0],tt=Q[1],et=Object(r["useState"])(0),nt=Object(s["a"])(et,2),rt=nt[0],it=nt[1],ot=Object(r["useState"])(0),at=Object(s["a"])(ot,2),st=at[0],ut=at[1],ct=Object(r["useState"])(0),lt=Object(s["a"])(ct,2),ft=lt[0],pt=lt[1],ht=Object(r["useState"])(null),dt=Object(s["a"])(ht,2),vt=dt[0],mt=dt[1],gt=Object(r["useState"])(null),yt=Object(s["a"])(gt,2),bt=yt[0],_t=yt[1],xt=Object(r["useState"])(0),wt=Object(s["a"])(xt,2),Et=wt[0],St=wt[1],Ct=Object(r["useState"])(0),Tt=Object(s["a"])(Ct,2),Ot=Tt[0],At=Tt[1],kt=M(new Map),Mt=Object(s["a"])(kt,2),Pt=Mt[0],It=Mt[1],Lt=N(c,Pt,$),Rt="".concat(u,"-nav-operations-hidden"),Dt=0,Nt=0;function jt(t){return t<Dt?Dt:t>Nt?Nt:t}V?b?(Dt=0,Nt=Math.max(0,$-vt)):(Dt=Math.min(0,vt-$),Nt=0):(Dt=Math.min(0,bt-rt),Nt=0);var Ft=Object(r["useRef"])(),zt=Object(r["useState"])(),Bt=Object(s["a"])(zt,2),Ut=Bt[0],Vt=Bt[1];function qt(){Vt(Date.now())}function Gt(){window.clearTimeout(Ft.current)}function Ht(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,e=Lt.get(t)||{width:0,height:0,left:0,right:0,top:0};if(V){var n=H;b?e.right<H?n=e.right:e.right+e.width>H+vt&&(n=e.right+e.width-vt):e.left<-H?n=-e.left:e.left+e.width>-H+vt&&(n=-(e.left+e.width-vt)),K(0),W(jt(n))}else{var r=Y;e.top<-Y?r=-e.top:e.top+e.height>-Y+bt&&(r=-(e.top+e.height-bt)),W(0),K(jt(r))}}Kr(P,(function(t,e){function n(t,e){t((function(t){var n=jt(t+e);return n}))}if(V){if(vt>=$)return!1;n(W,t)}else{if(bt>=rt)return!1;n(K,e)}return Gt(),qt(),!0})),Object(r["useEffect"])((function(){return Gt(),Ut&&(Ft.current=window.setTimeout((function(){Vt(0)}),100)),Gt}),[Ut]);var Wt=F(Lt,{width:vt,height:bt,left:H,top:Y},{width:st,height:ft},{width:Et,height:Ot},Object(l["a"])(Object(l["a"])({},t),{},{tabs:c})),Xt=Object(s["a"])(Wt,2),Zt=Xt[0],Yt=Xt[1],Kt={};"top"===E||"bottom"===E?Kt[b?"marginRight":"marginLeft"]=S:Kt.marginTop=S;var Jt=c.map((function(t,e){var n=t.key;return r["createElement"](R,{id:d,prefixCls:u,key:n,tab:t,style:0===e?void 0:Kt,closable:t.closable,editable:x,active:n===y,renderWrapper:C,removeAriaLabel:null===w||void 0===w?void 0:w.removeAriaLabel,ref:B(n),onClick:function(t){T(n,t)},onRemove:function(){U(n)},onFocus:function(){Ht(n),qt(),P.current&&(b||(P.current.scrollLeft=0),P.current.scrollTop=0)}})})),Qt=k((function(){var t,e,n,r,i,o,a,s,u,l=(null===(t=P.current)||void 0===t?void 0:t.offsetWidth)||0,f=(null===(e=P.current)||void 0===e?void 0:e.offsetHeight)||0,p=(null===(n=D.current)||void 0===n?void 0:n.offsetWidth)||0,h=(null===(r=D.current)||void 0===r?void 0:r.offsetHeight)||0,d=(null===(i=L.current)||void 0===i?void 0:i.offsetWidth)||0,v=(null===(o=L.current)||void 0===o?void 0:o.offsetHeight)||0;mt(l),_t(f),St(p),At(h);var m=((null===(a=I.current)||void 0===a?void 0:a.offsetWidth)||0)-p,g=((null===(s=I.current)||void 0===s?void 0:s.offsetHeight)||0)-h;tt(m),it(g);var y=null===(u=L.current)||void 0===u?void 0:u.className.includes(Rt);ut(m-(y?0:d)),pt(g-(y?0:v)),It((function(){var t=new Map;return c.forEach((function(e){var n=e.key,r=B(n).current;r&&t.set(n,{width:r.offsetWidth,height:r.offsetHeight,left:r.offsetLeft,top:r.offsetTop})})),t}))})),$t=c.slice(0,Zt),te=c.slice(Yt+1),ee=[].concat(Object(m["a"])($t),Object(m["a"])(te)),ne=Object(r["useState"])(),re=Object(s["a"])(ne,2),ie=re[0],oe=re[1],ae=Lt.get(y),se=Object(r["useRef"])();function ue(){g["a"].cancel(se.current)}Object(r["useEffect"])((function(){var t={};return ae&&(V?(b?t.right=ae.right:t.left=ae.left,t.width=ae.width):(t.top=ae.top,t.height=ae.height)),ue(),se.current=Object(g["a"])((function(){oe(t)})),ue}),[ae,V,b]),Object(r["useEffect"])((function(){Ht()}),[y,ae,Lt,V]),Object(r["useEffect"])((function(){Qt()}),[b,S,y,c.map((function(t){return t.key})).join("_")]);var ce,le,fe,pe,he=!!ee.length,de="".concat(u,"-nav-wrap");return V?b?(le=H>0,ce=H+vt<$):(ce=H<0,le=-H+vt<$):(fe=Y<0,pe=-Y+bt<rt),r["createElement"]("div",{ref:e,role:"tablist",className:p()("".concat(u,"-nav"),f),style:h,onKeyDown:function(){qt()}},r["createElement"]($r,{position:"left",extra:_,prefixCls:u}),r["createElement"](A,{onResize:Qt},r["createElement"]("div",{className:p()(de,(n={},Object(a["a"])(n,"".concat(de,"-ping-left"),ce),Object(a["a"])(n,"".concat(de,"-ping-right"),le),Object(a["a"])(n,"".concat(de,"-ping-top"),fe),Object(a["a"])(n,"".concat(de,"-ping-bottom"),pe),n)),ref:P},r["createElement"](A,{onResize:Qt},r["createElement"]("div",{ref:I,className:"".concat(u,"-nav-list"),style:{transform:"translate(".concat(H,"px, ").concat(Y,"px)"),transition:Ut?"none":void 0}},Jt,r["createElement"](Vr,{ref:D,prefixCls:u,locale:w,editable:x,style:Object(l["a"])(Object(l["a"])({},0===Jt.length?void 0:Kt),{},{visibility:he?"hidden":null})}),r["createElement"]("div",{className:p()("".concat(u,"-ink-bar"),Object(a["a"])({},"".concat(u,"-ink-bar-animated"),v.inkBar)),style:ie}))))),r["createElement"](Gr,Object(o["a"])({},t,{ref:L,prefixCls:u,tabs:ee,className:!he&&Rt})),r["createElement"]($r,{position:"right",extra:_,prefixCls:u}))}var ei=r["forwardRef"](ti);function ni(t){var e=t.id,n=t.activeKey,i=t.animated,o=t.tabPosition,s=t.rtl,u=t.destroyInactiveTabPane,c=r["useContext"](Hr),l=c.prefixCls,f=c.tabs,h=i.tabPane,d=f.findIndex((function(t){return t.key===n}));return r["createElement"]("div",{className:p()("".concat(l,"-content-holder"))},r["createElement"]("div",{className:p()("".concat(l,"-content"),"".concat(l,"-content-").concat(o),Object(a["a"])({},"".concat(l,"-content-animated"),h)),style:d&&h?Object(a["a"])({},s?"marginRight":"marginLeft","-".concat(d,"00%")):null},f.map((function(t){return r["cloneElement"](t.node,{key:t.key,prefixCls:l,tabKey:t.key,id:e,animated:h,active:t.key===n,destroyInactiveTabPane:u})}))))}function ri(t){var e=t.prefixCls,n=t.forceRender,i=t.className,o=t.style,a=t.id,u=t.active,c=t.animated,f=t.destroyInactiveTabPane,h=t.tabKey,d=t.children,v=r["useState"](n),m=Object(s["a"])(v,2),g=m[0],y=m[1];r["useEffect"]((function(){u?y(!0):f&&y(!1)}),[u,f]);var b={};return u||(c?(b.visibility="hidden",b.height=0,b.overflowY="hidden"):b.display="none"),r["createElement"]("div",{id:a&&"".concat(a,"-panel-").concat(h),role:"tabpanel",tabIndex:u?0:-1,"aria-labelledby":a&&"".concat(a,"-tab-").concat(h),"aria-hidden":!u,style:Object(l["a"])(Object(l["a"])({},b),o),className:p()("".concat(e,"-tabpane"),u&&"".concat(e,"-tabpane-active"),i)},(u||g||n)&&d)}var ii=["id","prefixCls","className","children","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll"],oi=0;function ai(t){return Object(h["a"])(t).map((function(t){if(r["isValidElement"](t)){var e=void 0!==t.key?String(t.key):void 0;return Object(l["a"])(Object(l["a"])({key:e},t.props),{},{node:t})}return null})).filter((function(t){return t}))}function si(t,e){var n,i,f=t.id,h=t.prefixCls,m=void 0===h?"rc-tabs":h,g=t.className,y=t.children,b=t.direction,_=t.activeKey,x=t.defaultActiveKey,w=t.editable,E=t.animated,S=void 0===E?{inkBar:!0,tabPane:!1}:E,C=t.tabPosition,T=void 0===C?"top":C,O=t.tabBarGutter,A=t.tabBarStyle,k=t.tabBarExtraContent,M=t.locale,P=t.moreIcon,I=t.moreTransitionName,L=t.destroyInactiveTabPane,R=t.renderTabBar,D=t.onChange,N=t.onTabClick,j=t.onTabScroll,F=Object(c["a"])(t,ii),z=ai(y),B="rtl"===b;i=!1===S?{inkBar:!1,tabPane:!1}:!0===S?{inkBar:!0,tabPane:!0}:Object(l["a"])({inkBar:!0,tabPane:!1},"object"===Object(u["a"])(S)?S:{});var U=Object(r["useState"])(!1),V=Object(s["a"])(U,2),q=V[0],G=V[1];Object(r["useEffect"])((function(){G(d())}),[]);var H=v((function(){var t;return null===(t=z[0])||void 0===t?void 0:t.key}),{value:_,defaultValue:x}),W=Object(s["a"])(H,2),X=W[0],Z=W[1],Y=Object(r["useState"])((function(){return z.findIndex((function(t){return t.key===X}))})),K=Object(s["a"])(Y,2),J=K[0],Q=K[1];Object(r["useEffect"])((function(){var t,e=z.findIndex((function(t){return t.key===X}));-1===e&&(e=Math.max(0,Math.min(J,z.length-1)),Z(null===(t=z[e])||void 0===t?void 0:t.key));Q(e)}),[z.map((function(t){return t.key})).join("_"),X,J]);var $=v(null,{value:f}),tt=Object(s["a"])($,2),et=tt[0],nt=tt[1],rt=T;function it(t,e){null===N||void 0===N||N(t,e),Z(t),null===D||void 0===D||D(t)}q&&!["left","right"].includes(T)&&(rt="top"),Object(r["useEffect"])((function(){f||(nt("rc-tabs-".concat(oi)),oi+=1)}),[]);var ot,at={id:et,activeKey:X,animated:i,tabPosition:rt,rtl:B,mobile:q},st=Object(l["a"])(Object(l["a"])({},at),{},{editable:w,locale:M,moreIcon:P,moreTransitionName:I,tabBarGutter:O,onTabClick:it,onTabScroll:j,extra:k,style:A,panes:y});return ot=R?R(st,ei):r["createElement"](ei,st),r["createElement"](Hr.Provider,{value:{tabs:z,prefixCls:m}},r["createElement"]("div",Object(o["a"])({ref:e,id:f,className:p()(m,"".concat(m,"-").concat(rt),(n={},Object(a["a"])(n,"".concat(m,"-mobile"),q),Object(a["a"])(n,"".concat(m,"-editable"),w),Object(a["a"])(n,"".concat(m,"-rtl"),B),n),g)},F),ot,r["createElement"](ni,Object(o["a"])({destroyInactiveTabPane:L},at,{animated:i}))))}var ui=r["forwardRef"](si);ui.TabPane=ri;var ci=ui,li=ci,fi=n("9kvl"),pi=n("OS9G"),hi=n("W+6v");n("PcCu");function di(t,e){return bi(t)||yi(t,e)||mi(t,e)||vi()}function vi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function mi(t,e){if(t){if("string"===typeof t)return gi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gi(t,e):void 0}}function gi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yi(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function bi(t){if(Array.isArray(t))return t}function _i(t,e){var n,r=null===(n=t.match(/\.(\w+)$/))||void 0===n?void 0:n[1];return r||(r=e.tsx?"tsx":"jsx"),r}var xi=function(t){var e,n,o,a=Object(r["useRef"])(),s=Object(r["useContext"])(pi["context"]),u=s.locale,c=Object(pi["useLocaleProps"])(u,t),l=Object(pi["useDemoUrl"])(c.identifier),f=c.demoUrl||l,p=(null===fi["a"]||void 0===fi["a"]?void 0:fi["a"].location.hash)==="#".concat(c.identifier),h=1===Object.keys(c.sources).length,d=Object(pi["useCodeSandbox"])((null===(e=c.hideActions)||void 0===e?void 0:e.includes("CSB"))?null:c),v=Object(pi["useRiddle"])((null===(n=c.hideActions)||void 0===n?void 0:n.includes("RIDDLE"))?null:c),m=Object(pi["useMotions"])(c.motions||[],a.current),g=di(m,2),y=g[0],b=g[1],_=Object(pi["useCopy"])(),x=di(_,2),w=x[0],E=x[1],S=Object(r["useState"])("_"),C=di(S,2),T=C[0],O=C[1],A=Object(r["useState"])(_i(T,c.sources[T])),k=di(A,2),M=k[0],P=k[1],I=Object(r["useState"])(Boolean(c.defaultShowCode)),L=di(I,2),R=L[0],D=L[1],N=Object(r["useState"])(Math.random()),j=di(N,2),F=j[0],z=j[1],B=c.sources[T][M]||c.sources[T].content,U=Object(pi["useTSPlaygroundUrl"])(u,B),V=Object(r["useRef"])(),q=Object(pi["usePrefersColor"])(),G=di(q,1),H=G[0];function W(t){O(t),P(_i(t,c.sources[t]))}return Object(r["useEffect"])((function(){z(Math.random())}),[H]),i.a.createElement("div",{style:c.style,className:[c.className,"__dumi-default-previewer",p?"__dumi-default-previewer-target":""].filter(Boolean).join(" "),id:c.identifier,"data-debug":c.debug||void 0,"data-iframe":c.iframe||void 0},c.iframe&&i.a.createElement("div",{className:"__dumi-default-previewer-browser-nav"}),i.a.createElement("div",{ref:a,className:"__dumi-default-previewer-demo",style:{transform:c.transform?"translate(0, 0)":void 0,padding:c.compact||c.iframe&&!1!==c.compact?"0":void 0,background:c.background}},c.iframe?i.a.createElement("iframe",{title:"dumi-previewer",style:{height:String(c.iframe).replace(/(\d)$/,"$1px")},key:F,src:f,ref:V}):c.children),i.a.createElement("div",{className:"__dumi-default-previewer-desc","data-title":c.title},c.title&&i.a.createElement(pi["AnchorLink"],{to:"#".concat(c.identifier)},c.title),c.description&&i.a.createElement("div",{dangerouslySetInnerHTML:{__html:c.description}})),i.a.createElement("div",{className:"__dumi-default-previewer-actions"},d&&i.a.createElement("button",{title:"Open demo on CodeSandbox.io",className:"__dumi-default-icon",role:"codesandbox",onClick:d}),v&&i.a.createElement("button",{title:"Open demo on Riddle",className:"__dumi-default-icon",role:"riddle",onClick:v}),c.motions&&i.a.createElement("button",{title:"Execute motions",className:"__dumi-default-icon",role:"motions",disabled:b,onClick:function(){return y()}}),c.iframe&&i.a.createElement("button",{title:"Reload demo iframe page",className:"__dumi-default-icon",role:"refresh",onClick:function(){return z(Math.random())}}),!(null===(o=c.hideActions)||void 0===o?void 0:o.includes("EXTERNAL"))&&i.a.createElement(pi["Link"],{target:"_blank",to:f},i.a.createElement("button",{title:"Open demo in new tab",className:"__dumi-default-icon",role:"open-demo",type:"button"})),i.a.createElement("span",null),i.a.createElement("button",{title:"Copy source code",className:"__dumi-default-icon",role:"copy","data-status":E,onClick:function(){return w(B)}}),"tsx"===M&&R&&i.a.createElement(pi["Link"],{target:"_blank",to:U},i.a.createElement("button",{title:"Get JSX via TypeScript Playground",className:"__dumi-default-icon",role:"change-tsx",type:"button"})),i.a.createElement("button",{title:"Toggle source code panel",className:"__dumi-default-icon".concat(R?" __dumi-default-btn-expand":""),role:"source",type:"button",onClick:function(){return D(!R)}})),R&&i.a.createElement("div",{className:"__dumi-default-previewer-source-wrapper"},!h&&i.a.createElement(li,{className:"__dumi-default-previewer-source-tab",prefixCls:"__dumi-default-tabs",moreIcon:"\xb7\xb7\xb7",defaultActiveKey:T,onChange:W},Object.keys(c.sources).map((function(t){return i.a.createElement(ri,{tab:"_"===t?"index.".concat(_i(t,c.sources[t])):t,key:t})}))),i.a.createElement("div",{className:"__dumi-default-previewer-source"},i.a.createElement(hi["a"],{code:B,lang:M,showCopy:!1}))))};e["default"]=xi},oTOb:function(t,e,n){"use strict";var r=n("2hCa"),i=n("JY8B"),o=n("mAbK"),a=n("twJ5"),s=n("me7Q"),u="Array Iterator",c=a.set,l=a.getterFor(u);t.exports=s(Array,"Array",(function(t,e){c(this,{type:u,target:r(t),index:0,kind:e})}),(function(){var t=l(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},oX5j:function(t,e){function n(t,e){return t.has(e)}t.exports=n},oYBD:function(t,e,n){"use strict";n.r(e);var r=n("xwgP"),i=n.n(r),o=n("+RP0"),a=n("/7QA"),s=n("Ct92");e["default"]=()=>(i.a.useEffect((()=>{var t=new o["Scene"]({id:"map",map:new s["a"]({pitch:0,style:"light",center:[116.30470275878906,39.88352811449648],zoom:10})});t.on("loaded",(()=>{var e=new a["DrawCircle"](t,{showDistance:!0,showArea:!0});e.enable(),e.on("draw.create",(t=>{console.log(t)})),e.on("draw.update",(t=>{console.log("update",t)}))}))}),[]),i.a.createElement("div",{style:{height:"400px",position:"relative"},id:"map"}))},ochL:function(t,e,n){"use strict";var r=n("xwgP"),i=n("dZOt"),o=n("dske");function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));function s(t,e,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(l){this.onError(l)}}var u=!1,c=null,l=!1,f=null,p={onError:function(t){u=!0,c=t}};function h(t,e,n,r,i,o,a,l,f){u=!1,c=null,s.apply(p,arguments)}function d(t,e,n,r,i,o,s,p,d){if(h.apply(this,arguments),u){if(!u)throw Error(a(198));var v=c;u=!1,c=null,l||(l=!0,f=v)}}var v=null,m=null,g=null;function y(t,e,n){var r=t.type||"unknown-event";t.currentTarget=g(n),d(r,e,void 0,t),t.currentTarget=null}var b=null,_={};function x(){if(b)for(var t in _){var e=_[t],n=b.indexOf(t);if(!(-1<n))throw Error(a(96,t));if(!E[n]){if(!e.extractEvents)throw Error(a(97,t));for(var r in E[n]=e,n=e.eventTypes,n){var i=void 0,o=n[r],s=e,u=r;if(S.hasOwnProperty(u))throw Error(a(99,u));S[u]=o;var c=o.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&w(c[i],s,u);i=!0}else o.registrationName?(w(o.registrationName,s,u),i=!0):i=!1;if(!i)throw Error(a(98,r,t))}}}}function w(t,e,n){if(C[t])throw Error(a(100,t));C[t]=e,T[t]=e.eventTypes[n].dependencies}var E=[],S={},C={},T={};function O(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];if(!_.hasOwnProperty(e)||_[e]!==r){if(_[e])throw Error(a(102,e));_[e]=r,n=!0}}n&&x()}var A=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),k=null,M=null,P=null;function I(t){if(t=m(t)){if("function"!==typeof k)throw Error(a(280));var e=t.stateNode;e&&(e=v(e),k(t.stateNode,t.type,e))}}function L(t){M?P?P.push(t):P=[t]:M=t}function R(){if(M){var t=M,e=P;if(P=M=null,I(t),e)for(t=0;t<e.length;t++)I(e[t])}}function D(t,e){return t(e)}function N(t,e,n,r,i){return t(e,n,r,i)}function j(){}var F=D,z=!1,B=!1;function U(){null===M&&null===P||(j(),R())}function V(t,e,n){if(B)return t(e,n);B=!0;try{return F(t,e,n)}finally{B=!1,U()}}var q=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,G=Object.prototype.hasOwnProperty,H={},W={};function X(t){return!!G.call(W,t)||!G.call(H,t)&&(q.test(t)?W[t]=!0:(H[t]=!0,!1))}function Z(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),"data-"!==t&&"aria-"!==t));default:return!1}}function Y(t,e,n,r){if(null===e||"undefined"===typeof e||Z(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function K(t,e,n,r,i,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o}var J={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){J[t]=new K(t,0,!1,t,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];J[e]=new K(e,1,!1,t[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){J[t]=new K(t,2,!1,t.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){J[t]=new K(t,2,!1,t,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){J[t]=new K(t,3,!1,t.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(t){J[t]=new K(t,3,!0,t,null,!1)})),["capture","download"].forEach((function(t){J[t]=new K(t,4,!1,t,null,!1)})),["cols","rows","size","span"].forEach((function(t){J[t]=new K(t,6,!1,t,null,!1)})),["rowSpan","start"].forEach((function(t){J[t]=new K(t,5,!1,t.toLowerCase(),null,!1)}));var Q=/[\-:]([a-z])/g;function $(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(Q,$);J[e]=new K(e,1,!1,t,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(Q,$);J[e]=new K(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(Q,$);J[e]=new K(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(t){J[t]=new K(t,1,!1,t.toLowerCase(),null,!1)})),J.xlinkHref=new K("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(t){J[t]=new K(t,1,!1,t.toLowerCase(),null,!0)}));var tt=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function et(t,e,n,r){var i=J.hasOwnProperty(e)?J[e]:null,o=null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1]));o||(Y(e,n,i,r)&&(n=null),r||null===i?X(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(i=i.type,n=3===i||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}tt.hasOwnProperty("ReactCurrentDispatcher")||(tt.ReactCurrentDispatcher={current:null}),tt.hasOwnProperty("ReactCurrentBatchConfig")||(tt.ReactCurrentBatchConfig={suspense:null});var nt=/^(.*)[\\\/]/,rt="function"===typeof Symbol&&Symbol.for,it=rt?Symbol.for("react.element"):60103,ot=rt?Symbol.for("react.portal"):60106,at=rt?Symbol.for("react.fragment"):60107,st=rt?Symbol.for("react.strict_mode"):60108,ut=rt?Symbol.for("react.profiler"):60114,ct=rt?Symbol.for("react.provider"):60109,lt=rt?Symbol.for("react.context"):60110,ft=rt?Symbol.for("react.concurrent_mode"):60111,pt=rt?Symbol.for("react.forward_ref"):60112,ht=rt?Symbol.for("react.suspense"):60113,dt=rt?Symbol.for("react.suspense_list"):60120,vt=rt?Symbol.for("react.memo"):60115,mt=rt?Symbol.for("react.lazy"):60116,gt=rt?Symbol.for("react.block"):60121,yt="function"===typeof Symbol&&Symbol.iterator;function bt(t){return null===t||"object"!==typeof t?null:(t=yt&&t[yt]||t["@@iterator"],"function"===typeof t?t:null)}function _t(t){if(-1===t._status){t._status=0;var e=t._ctor;e=e(),t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}}function xt(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case at:return"Fragment";case ot:return"Portal";case ut:return"Profiler";case st:return"StrictMode";case ht:return"Suspense";case dt:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case lt:return"Context.Consumer";case ct:return"Context.Provider";case pt:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case vt:return xt(t.type);case gt:return xt(t.render);case mt:if(t=1===t._status?t._result:null)return xt(t)}return null}function wt(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break t;default:var r=t._debugOwner,i=t._debugSource,o=xt(t.type);n=null,r&&(n=xt(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(nt,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}e+=n,t=t.return}while(t);return e}function Et(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function St(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Ct(t){var e=St(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Tt(t){t._valueTracker||(t._valueTracker=Ct(t))}function Ot(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=St(t)?t.checked?"true":"false":t.value),t=r,t!==n&&(e.setValue(t),!0)}function At(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function kt(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=Et(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Mt(t,e){e=e.checked,null!=e&&et(t,"checked",e,!1)}function Pt(t,e){Mt(t,e);var n=Et(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?Lt(t,e.type,n):e.hasOwnProperty("defaultValue")&&Lt(t,e.type,Et(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function It(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,""!==n&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function Lt(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function Rt(t){var e="";return r.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}function Dt(t,e){return t=i({children:void 0},e),(e=Rt(e.children))&&(t.children=e),t}function Nt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Et(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function jt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(a(91));return i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ft(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:Et(n)}}function zt(t,e){var n=Et(e.value),r=Et(e.defaultValue);null!=n&&(n=""+n,n!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function Bt(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var Ut={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Vt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?Vt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var Gt,Ht=function(t){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction((function(){return t(e,n,r,i)}))}:t}((function(t,e){if(t.namespaceURI!==Ut.svg||"innerHTML"in t)t.innerHTML=e;else{for(Gt=Gt||document.createElement("div"),Gt.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}));function Wt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}function Xt(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zt={animationend:Xt("Animation","AnimationEnd"),animationiteration:Xt("Animation","AnimationIteration"),animationstart:Xt("Animation","AnimationStart"),transitionend:Xt("Transition","TransitionEnd")},Yt={},Kt={};function Jt(t){if(Yt[t])return Yt[t];if(!Zt[t])return t;var e,n=Zt[t];for(e in n)if(n.hasOwnProperty(e)&&e in Kt)return Yt[t]=n[e];return t}A&&(Kt=document.createElement("div").style,"AnimationEvent"in window||(delete Zt.animationend.animation,delete Zt.animationiteration.animation,delete Zt.animationstart.animation),"TransitionEvent"in window||delete Zt.transitionend.transition);var Qt=Jt("animationend"),$t=Jt("animationiteration"),te=Jt("animationstart"),ee=Jt("transitionend"),ne="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),re=new("function"===typeof WeakMap?WeakMap:Map);function ie(t){var e=re.get(t);return void 0===e&&(e=new Map,re.set(t,e)),e}function oe(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{e=t,0!==(1026&e.effectTag)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function ae(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(t=t.alternate,null!==t&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function se(t){if(oe(t)!==t)throw Error(a(188))}function ue(t){var e=t.alternate;if(!e){if(e=oe(t),null===e)throw Error(a(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(r=i.return,null!==r){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return se(i),t;if(o===r)return se(i),e;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?t:e}function ce(t){if(t=ue(t),!t)return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function le(t,e){if(null==e)throw Error(a(30));return null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function fe(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var pe=null;function he(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var r=0;r<e.length&&!t.isPropagationStopped();r++)y(t,e[r],n[r]);else e&&y(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function de(t){if(null!==t&&(pe=le(pe,t)),t=pe,pe=null,t){if(fe(t,he),pe)throw Error(a(95));if(l)throw t=f,l=!1,f=null,t}}function ve(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function me(t){if(!A)return!1;t="on"+t;var e=t in document;return e||(e=document.createElement("div"),e.setAttribute(t,"return;"),e="function"===typeof e[t]),e}var ge=[];function ye(t){t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>ge.length&&ge.push(t)}function be(t,e,n,r){if(ge.length){var i=ge.pop();return i.topLevelType=t,i.eventSystemFlags=r,i.nativeEvent=e,i.targetInst=n,i}return{topLevelType:t,eventSystemFlags:r,nativeEvent:e,targetInst:n,ancestors:[]}}function _e(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;e=n.tag,5!==e&&6!==e||t.ancestors.push(n),n=Un(r)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var i=ve(t.nativeEvent);r=t.topLevelType;var o=t.nativeEvent,a=t.eventSystemFlags;0===n&&(a|=64);for(var s=null,u=0;u<E.length;u++){var c=E[u];c&&(c=c.extractEvents(r,e,o,i,a))&&(s=le(s,c))}de(s)}}function xe(t,e,n){if(!n.has(t)){switch(t){case"scroll":rn(e,"scroll",!0);break;case"focus":case"blur":rn(e,"focus",!0),rn(e,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":me(t)&&rn(e,t,!0);break;case"invalid":case"submit":case"reset":break;default:-1===ne.indexOf(t)&&nn(t,e)}n.set(t,null)}}var we,Ee,Se,Ce=!1,Te=[],Oe=null,Ae=null,ke=null,Me=new Map,Pe=new Map,Ie=[],Le="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Re="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function De(t,e){var n=ie(e);Le.forEach((function(t){xe(t,e,n)})),Re.forEach((function(t){xe(t,e,n)}))}function Ne(t,e,n,r,i){return{blockedOn:t,topLevelType:e,eventSystemFlags:32|n,nativeEvent:i,container:r}}function je(t,e){switch(t){case"focus":case"blur":Oe=null;break;case"dragenter":case"dragleave":Ae=null;break;case"mouseover":case"mouseout":ke=null;break;case"pointerover":case"pointerout":Me.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pe.delete(e.pointerId)}}function Fe(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t=Ne(e,n,r,i,o),null!==e&&(e=Vn(e),null!==e&&Ee(e)),t):(t.eventSystemFlags|=r,t)}function ze(t,e,n,r,i){switch(e){case"focus":return Oe=Fe(Oe,t,e,n,r,i),!0;case"dragenter":return Ae=Fe(Ae,t,e,n,r,i),!0;case"mouseover":return ke=Fe(ke,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Me.set(o,Fe(Me.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Pe.set(o,Fe(Pe.get(o)||null,t,e,n,r,i)),!0}return!1}function Be(t){var e=Un(t.target);if(null!==e){var n=oe(e);if(null!==n)if(e=n.tag,13===e){if(e=ae(n),null!==e)return t.blockedOn=e,void o.unstable_runWithPriority(t.priority,(function(){Se(n)}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Ue(t){if(null!==t.blockedOn)return!1;var e=un(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);if(null!==e){var n=Vn(e);return null!==n&&Ee(n),t.blockedOn=e,!1}return!0}function Ve(t,e,n){Ue(t)&&n.delete(e)}function qe(){for(Ce=!1;0<Te.length;){var t=Te[0];if(null!==t.blockedOn){t=Vn(t.blockedOn),null!==t&&we(t);break}var e=un(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);null!==e?t.blockedOn=e:Te.shift()}null!==Oe&&Ue(Oe)&&(Oe=null),null!==Ae&&Ue(Ae)&&(Ae=null),null!==ke&&Ue(ke)&&(ke=null),Me.forEach(Ve),Pe.forEach(Ve)}function Ge(t,e){t.blockedOn===e&&(t.blockedOn=null,Ce||(Ce=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,qe)))}function He(t){function e(e){return Ge(e,t)}if(0<Te.length){Ge(Te[0],t);for(var n=1;n<Te.length;n++){var r=Te[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Oe&&Ge(Oe,t),null!==Ae&&Ge(Ae,t),null!==ke&&Ge(ke,t),Me.forEach(e),Pe.forEach(e),n=0;n<Ie.length;n++)r=Ie[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ie.length&&(n=Ie[0],null===n.blockedOn);)Be(n),null===n.blockedOn&&Ie.shift()}var We={},Xe=new Map,Ze=new Map,Ye=["abort","abort",Qt,"animationEnd",$t,"animationIteration",te,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",ee,"transitionEnd","waiting","waiting"];function Ke(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:e},Ze.set(r,e),Xe.set(r,o),We[i]=o}}Ke("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ke("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ke(Ye,2);for(var Je="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Qe=0;Qe<Je.length;Qe++)Ze.set(Je[Qe],0);var $e=o.unstable_UserBlockingPriority,tn=o.unstable_runWithPriority,en=!0;function nn(t,e){rn(e,t,!1)}function rn(t,e,n){var r=Ze.get(e);switch(void 0===r?2:r){case 0:r=on.bind(null,e,1,t);break;case 1:r=an.bind(null,e,1,t);break;default:r=sn.bind(null,e,1,t)}n?t.addEventListener(e,r,!0):t.addEventListener(e,r,!1)}function on(t,e,n,r){z||j();var i=sn,o=z;z=!0;try{N(i,t,e,n,r)}finally{(z=o)||U()}}function an(t,e,n,r){tn($e,sn.bind(null,t,e,n,r))}function sn(t,e,n,r){if(en)if(0<Te.length&&-1<Le.indexOf(t))t=Ne(null,t,e,n,r),Te.push(t);else{var i=un(t,e,n,r);if(null===i)je(t,r);else if(-1<Le.indexOf(t))t=Ne(i,t,e,n,r),Te.push(t);else if(!ze(i,t,e,n,r)){je(t,r),t=be(t,r,null,e);try{V(_e,t)}finally{ye(t)}}}}function un(t,e,n,r){if(n=ve(r),n=Un(n),null!==n){var i=oe(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(n=ae(i),null!==n)return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}t=be(t,r,n,e);try{V(_e,t)}finally{ye(t)}return null}var cn={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ln=["Webkit","ms","Moz","O"];function fn(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||cn.hasOwnProperty(t)&&cn[t]?(""+e).trim():e+"px"}function pn(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=fn(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(cn).forEach((function(t){ln.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),cn[e]=cn[t]}))}));var hn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dn(t,e){if(e){if(hn[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(a(137,t,""));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(a(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(a(62,""))}}function vn(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mn=Ut.html;function gn(t,e){t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument;var n=ie(t);e=T[e];for(var r=0;r<e.length;r++)xe(e[r],t,n)}function yn(){}function bn(t){if(t=t||("undefined"!==typeof document?document:void 0),"undefined"===typeof t)return null;try{return t.activeElement||t.body}catch(e){return t.body}}function _n(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xn(t,e){var n,r=_n(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=_n(r)}}function wn(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?wn(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function En(){for(var t=window,e=bn();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=e.contentWindow,e=bn(t.document)}return e}function Sn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var Cn="$",Tn="/$",On="$?",An="$!",kn=null,Mn=null;function Pn(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function In(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var Ln="function"===typeof setTimeout?setTimeout:void 0,Rn="function"===typeof clearTimeout?clearTimeout:void 0;function Dn(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function Nn(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if(n===Cn||n===An||n===On){if(0===e)return t;e--}else n===Tn&&e++}t=t.previousSibling}return null}var jn=Math.random().toString(36).slice(2),Fn="__reactInternalInstance$"+jn,zn="__reactEventHandlers$"+jn,Bn="__reactContainere$"+jn;function Un(t){var e=t[Fn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Bn]||n[Fn]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=Nn(t);null!==t;){if(n=t[Fn])return n;t=Nn(t)}return e}t=n,n=t.parentNode}return null}function Vn(t){return t=t[Fn]||t[Bn],!t||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function qn(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(a(33))}function Gn(t){return t[zn]||null}function Hn(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function Wn(t,e){var n=t.stateNode;if(!n)return null;var r=v(n);if(!r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!("button"===t||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(a(231,e,typeof n));return n}function Xn(t,e,n){(e=Wn(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=le(n._dispatchListeners,e),n._dispatchInstances=le(n._dispatchInstances,t))}function Zn(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=Hn(e);for(e=n.length;0<e--;)Xn(n[e],"captured",t);for(e=0;e<n.length;e++)Xn(n[e],"bubbled",t)}}function Yn(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=Wn(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=le(n._dispatchListeners,e),n._dispatchInstances=le(n._dispatchInstances,t))}function Kn(t){t&&t.dispatchConfig.registrationName&&Yn(t._targetInst,null,t)}function Jn(t){fe(t,Zn)}var Qn=null,$n=null,tr=null;function er(){if(tr)return tr;var t,e,n=$n,r=n.length,i="value"in Qn?Qn.value:Qn.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return tr=i.slice(t,1<e?1-e:void 0)}function nr(){return!0}function rr(){return!1}function ir(t,e,n,r){for(var i in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface,t)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?nr:rr,this.isPropagationStopped=rr,this}function or(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function ar(t){if(!(t instanceof this))throw Error(a(279));t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function sr(t){t.eventPool=[],t.getPooled=or,t.release=ar}i(ir.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nr)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nr)},persist:function(){this.isPersistent=nr},isPersistent:rr,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=rr,this._dispatchInstances=this._dispatchListeners=null}}),ir.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},ir.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var o=new e;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,t),n.extend=r.extend,sr(n),n},sr(ir);var ur=ir.extend({data:null}),cr=ir.extend({data:null}),lr=[9,13,27,32],fr=A&&"CompositionEvent"in window,pr=null;A&&"documentMode"in document&&(pr=document.documentMode);var hr=A&&"TextEvent"in window&&!pr,dr=A&&(!fr||pr&&8<pr&&11>=pr),vr=String.fromCharCode(32),mr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},gr=!1;function yr(t,e){switch(t){case"keyup":return-1!==lr.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function br(t){return t=t.detail,"object"===typeof t&&"data"in t?t.data:null}var _r=!1;function xr(t,e){switch(t){case"compositionend":return br(e);case"keypress":return 32!==e.which?null:(gr=!0,vr);case"textInput":return t=e.data,t===vr&&gr?null:t;default:return null}}function wr(t,e){if(_r)return"compositionend"===t||!fr&&yr(t,e)?(t=er(),tr=$n=Qn=null,_r=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return dr&&"ko"!==e.locale?null:e.data;default:return null}}var Er={eventTypes:mr,extractEvents:function(t,e,n,r){var i;if(fr)t:{switch(t){case"compositionstart":var o=mr.compositionStart;break t;case"compositionend":o=mr.compositionEnd;break t;case"compositionupdate":o=mr.compositionUpdate;break t}o=void 0}else _r?yr(t,n)&&(o=mr.compositionEnd):"keydown"===t&&229===n.keyCode&&(o=mr.compositionStart);return o?(dr&&"ko"!==n.locale&&(_r||o!==mr.compositionStart?o===mr.compositionEnd&&_r&&(i=er()):(Qn=r,$n="value"in Qn?Qn.value:Qn.textContent,_r=!0)),o=ur.getPooled(o,e,n,r),i?o.data=i:(i=br(n),null!==i&&(o.data=i)),Jn(o),i=o):i=null,(t=hr?xr(t,n):wr(t,n))?(e=cr.getPooled(mr.beforeInput,e,n,r),e.data=t,Jn(e)):e=null,null===i?e:null===e?i:[i,e]}},Sr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Sr[t.type]:"textarea"===e}var Tr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Or(t,e,n){return t=ir.getPooled(Tr.change,t,e,n),t.type="change",L(n),Jn(t),t}var Ar=null,kr=null;function Mr(t){de(t)}function Pr(t){var e=qn(t);if(Ot(e))return t}function Ir(t,e){if("change"===t)return e}var Lr=!1;function Rr(){Ar&&(Ar.detachEvent("onpropertychange",Dr),kr=Ar=null)}function Dr(t){if("value"===t.propertyName&&Pr(kr))if(t=Or(kr,t,ve(t)),z)de(t);else{z=!0;try{D(Mr,t)}finally{z=!1,U()}}}function Nr(t,e,n){"focus"===t?(Rr(),Ar=e,kr=n,Ar.attachEvent("onpropertychange",Dr)):"blur"===t&&Rr()}function jr(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Pr(kr)}function Fr(t,e){if("click"===t)return Pr(e)}function zr(t,e){if("input"===t||"change"===t)return Pr(e)}A&&(Lr=me("input")&&(!document.documentMode||9<document.documentMode));var Br={eventTypes:Tr,_isInputEventSupported:Lr,extractEvents:function(t,e,n,r){var i=e?qn(e):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=Ir;else if(Cr(i))if(Lr)a=zr;else{a=jr;var s=Nr}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=Fr);if(a&&(a=a(t,e)))return Or(a,n,r);s&&s(t,i,e),"blur"===t&&(t=i._wrapperState)&&t.controlled&&"number"===i.type&&Lt(i,"number",i.value)}},Ur=ir.extend({view:null,detail:null}),Vr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qr(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Vr[t])&&!!e[t]}function Gr(){return qr}var Hr=0,Wr=0,Xr=!1,Zr=!1,Yr=Ur.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Gr,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=Hr;return Hr=t.screenX,Xr?"mousemove"===t.type?t.screenX-e:0:(Xr=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=Wr;return Wr=t.screenY,Zr?"mousemove"===t.type?t.screenY-e:0:(Zr=!0,0)}}),Kr=Yr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Jr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Qr={eventTypes:Jr,extractEvents:function(t,e,n,r,i){var o="mouseover"===t||"pointerover"===t,a="mouseout"===t||"pointerout"===t;if(o&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;if(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,a){if(a=e,e=(e=n.relatedTarget||n.toElement)?Un(e):null,null!==e){var s=oe(e);(e!==s||5!==e.tag&&6!==e.tag)&&(e=null)}}else a=null;if(a===e)return null;if("mouseout"===t||"mouseover"===t)var u=Yr,c=Jr.mouseLeave,l=Jr.mouseEnter,f="mouse";else"pointerout"!==t&&"pointerover"!==t||(u=Kr,c=Jr.pointerLeave,l=Jr.pointerEnter,f="pointer");if(t=null==a?o:qn(a),o=null==e?o:qn(e),c=u.getPooled(c,a,n,r),c.type=f+"leave",c.target=t,c.relatedTarget=o,n=u.getPooled(l,e,n,r),n.type=f+"enter",n.target=o,n.relatedTarget=t,r=a,f=e,r&&f)t:{for(u=r,l=f,a=0,t=u;t;t=Hn(t))a++;for(t=0,e=l;e;e=Hn(e))t++;for(;0<a-t;)u=Hn(u),a--;for(;0<t-a;)l=Hn(l),t--;for(;a--;){if(u===l||u===l.alternate)break t;u=Hn(u),l=Hn(l)}u=null}else u=null;for(l=u,u=[];r&&r!==l;){if(a=r.alternate,null!==a&&a===l)break;u.push(r),r=Hn(r)}for(r=[];f&&f!==l;){if(a=f.alternate,null!==a&&a===l)break;r.push(f),f=Hn(f)}for(f=0;f<u.length;f++)Yn(u[f],"bubbled",c);for(f=r.length;0<f--;)Yn(r[f],"captured",n);return 0===(64&i)?[c]:[c,n]}};function $r(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e}var ti="function"===typeof Object.is?Object.is:$r,ei=Object.prototype.hasOwnProperty;function ni(t,e){if(ti(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ei.call(e,n[r])||!ti(t[n[r]],e[n[r]]))return!1;return!0}var ri=A&&"documentMode"in document&&11>=document.documentMode,ii={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},oi=null,ai=null,si=null,ui=!1;function ci(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return ui||null==oi||oi!==bn(n)?null:(n=oi,"selectionStart"in n&&Sn(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),si&&ni(si,n)?null:(si=n,t=ir.getPooled(ii.select,ai,t,e),t.type="select",t.target=oi,Jn(t),t))}var li={eventTypes:ii,extractEvents:function(t,e,n,r,i,o){if(i=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument),!(o=!i)){t:{i=ie(i),o=T.onSelect;for(var a=0;a<o.length;a++)if(!i.has(o[a])){i=!1;break t}i=!0}o=!i}if(o)return null;switch(i=e?qn(e):window,t){case"focus":(Cr(i)||"true"===i.contentEditable)&&(oi=i,ai=e,si=null);break;case"blur":si=ai=oi=null;break;case"mousedown":ui=!0;break;case"contextmenu":case"mouseup":case"dragend":return ui=!1,ci(n,r);case"selectionchange":if(ri)break;case"keydown":case"keyup":return ci(n,r)}return null}},fi=ir.extend({animationName:null,elapsedTime:null,pseudoElement:null}),pi=ir.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hi=Ur.extend({relatedTarget:null});function di(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,0===t&&13===e&&(t=13)):t=e,10===t&&(t=13),32<=t||13===t?t:0}var vi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gi=Ur.extend({key:function(t){if(t.key){var e=vi[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?(t=di(t),13===t?"Enter":String.fromCharCode(t)):"keydown"===t.type||"keyup"===t.type?mi[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Gr,charCode:function(t){return"keypress"===t.type?di(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?di(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),yi=Yr.extend({dataTransfer:null}),bi=Ur.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Gr}),_i=ir.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),xi=Yr.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),wi={eventTypes:We,extractEvents:function(t,e,n,r){var i=Xe.get(t);if(!i)return null;switch(t){case"keypress":if(0===di(n))return null;case"keydown":case"keyup":t=gi;break;case"blur":case"focus":t=hi;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=Yr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=yi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=bi;break;case Qt:case $t:case te:t=fi;break;case ee:t=_i;break;case"scroll":t=Ur;break;case"wheel":t=xi;break;case"copy":case"cut":case"paste":t=pi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=Kr;break;default:t=ir}return e=t.getPooled(i,e,n,r),Jn(e),e}};if(b)throw Error(a(101));b=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),x();var Ei=Vn;v=Gn,m=Ei,g=qn,O({SimpleEventPlugin:wi,EnterLeaveEventPlugin:Qr,ChangeEventPlugin:Br,SelectEventPlugin:li,BeforeInputEventPlugin:Er});var Si=[],Ci=-1;function Ti(t){0>Ci||(t.current=Si[Ci],Si[Ci]=null,Ci--)}function Oi(t,e){Ci++,Si[Ci]=t.current,t.current=e}var Ai={},ki={current:Ai},Mi={current:!1},Pi=Ai;function Ii(t,e){var n=t.type.contextTypes;if(!n)return Ai;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Li(t){return t=t.childContextTypes,null!==t&&void 0!==t}function Ri(){Ti(Mi),Ti(ki)}function Di(t,e,n){if(ki.current!==Ai)throw Error(a(168));Oi(ki,e),Oi(Mi,n)}function Ni(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext(),r)if(!(o in t))throw Error(a(108,xt(e)||"Unknown",o));return i({},n,{},r)}function ji(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ai,Pi=ki.current,Oi(ki,t),Oi(Mi,Mi.current),!0}function Fi(t,e,n){var r=t.stateNode;if(!r)throw Error(a(169));n?(t=Ni(t,e,Pi),r.__reactInternalMemoizedMergedChildContext=t,Ti(Mi),Ti(ki),Oi(ki,t)):Ti(Mi),Oi(Mi,n)}var zi=o.unstable_runWithPriority,Bi=o.unstable_scheduleCallback,Ui=o.unstable_cancelCallback,Vi=o.unstable_requestPaint,qi=o.unstable_now,Gi=o.unstable_getCurrentPriorityLevel,Hi=o.unstable_ImmediatePriority,Wi=o.unstable_UserBlockingPriority,Xi=o.unstable_NormalPriority,Zi=o.unstable_LowPriority,Yi=o.unstable_IdlePriority,Ki={},Ji=o.unstable_shouldYield,Qi=void 0!==Vi?Vi:function(){},$i=null,to=null,eo=!1,no=qi(),ro=1e4>no?qi:function(){return qi()-no};function io(){switch(Gi()){case Hi:return 99;case Wi:return 98;case Xi:return 97;case Zi:return 96;case Yi:return 95;default:throw Error(a(332))}}function oo(t){switch(t){case 99:return Hi;case 98:return Wi;case 97:return Xi;case 96:return Zi;case 95:return Yi;default:throw Error(a(332))}}function ao(t,e){return t=oo(t),zi(t,e)}function so(t,e,n){return t=oo(t),Bi(t,e,n)}function uo(t){return null===$i?($i=[t],to=Bi(Hi,lo)):$i.push(t),Ki}function co(){if(null!==to){var t=to;to=null,Ui(t)}lo()}function lo(){if(!eo&&null!==$i){eo=!0;var t=0;try{var e=$i;ao(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),$i=null}catch(n){throw null!==$i&&($i=$i.slice(t+1)),Bi(Hi,co),n}finally{eo=!1}}}function fo(t,e,n){return n/=10,1073741821-(1+((1073741821-t+e/10)/n|0))*n}function po(t,e){if(t&&t.defaultProps)for(var n in e=i({},e),t=t.defaultProps,t)void 0===e[n]&&(e[n]=t[n]);return e}var ho={current:null},vo=null,mo=null,go=null;function yo(){go=mo=vo=null}function bo(t){var e=ho.current;Ti(ho),t.type._context._currentValue=e}function _o(t,e){for(;null!==t;){var n=t.alternate;if(t.childExpirationTime<e)t.childExpirationTime=e,null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e);else{if(!(null!==n&&n.childExpirationTime<e))break;n.childExpirationTime=e}t=t.return}}function xo(t,e){vo=t,go=mo=null,t=t.dependencies,null!==t&&null!==t.firstContext&&(t.expirationTime>=e&&(Za=!0),t.firstContext=null)}function wo(t,e){if(go!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(go=t,e=1073741823),e={context:t,observedBits:e,next:null},null===mo){if(null===vo)throw Error(a(308));mo=e,vo.dependencies={expirationTime:0,firstContext:e,responders:null}}else mo=mo.next=e;return t._currentValue}var Eo=!1;function So(t){t.updateQueue={baseState:t.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function Co(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,baseQueue:t.baseQueue,shared:t.shared,effects:t.effects})}function To(t,e){return t={expirationTime:t,suspenseConfig:e,tag:0,payload:null,callback:null,next:null},t.next=t}function Oo(t,e){if(t=t.updateQueue,null!==t){t=t.shared;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function Ao(t,e){var n=t.alternate;null!==n&&Co(n,t),t=t.updateQueue,n=t.baseQueue,null===n?(t.baseQueue=e.next=e,e.next=e):(e.next=n.next,n.next=e)}function ko(t,e,n,r){var o=t.updateQueue;Eo=!1;var a=o.baseQueue,s=o.shared.pending;if(null!==s){if(null!==a){var u=a.next;a.next=s.next,s.next=u}a=s,o.shared.pending=null,u=t.alternate,null!==u&&(u=u.updateQueue,null!==u&&(u.baseQueue=s))}if(null!==a){u=a.next;var c=o.baseState,l=0,f=null,p=null,h=null;if(null!==u){var d=u;do{if(s=d.expirationTime,s<r){var v={expirationTime:d.expirationTime,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null};null===h?(p=h=v,f=c):h=h.next=v,s>l&&(l=s)}else{null!==h&&(h=h.next={expirationTime:1073741823,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null}),Nu(s,d.suspenseConfig);t:{var m=t,g=d;switch(s=e,v=n,g.tag){case 1:if(m=g.payload,"function"===typeof m){c=m.call(v,c,s);break t}c=m;break t;case 3:m.effectTag=-4097&m.effectTag|64;case 0:if(m=g.payload,s="function"===typeof m?m.call(v,c,s):m,null===s||void 0===s)break t;c=i({},c,s);break t;case 2:Eo=!0}}null!==d.callback&&(t.effectTag|=32,s=o.effects,null===s?o.effects=[d]:s.push(d))}if(d=d.next,null===d||d===u){if(s=o.shared.pending,null===s)break;d=a.next=s.next,s.next=u,o.baseQueue=a=s,o.shared.pending=null}}while(1)}null===h?f=c:h.next=p,o.baseState=f,o.baseQueue=h,ju(l),t.expirationTime=l,t.memoizedState=c}}function Mo(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(a(191,r));r.call(i)}}}var Po=tt.ReactCurrentBatchConfig,Io=(new r.Component).refs;function Lo(t,e,n,r){e=t.memoizedState,n=n(r,e),n=null===n||void 0===n?e:i({},e,n),t.memoizedState=n,0===t.expirationTime&&(t.updateQueue.baseState=n)}var Ro={isMounted:function(t){return!!(t=t._reactInternalFiber)&&oe(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var r=wu(),i=Po.suspense;r=Eu(r,t,i),i=To(r,i),i.payload=e,void 0!==n&&null!==n&&(i.callback=n),Oo(t,i),Su(t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var r=wu(),i=Po.suspense;r=Eu(r,t,i),i=To(r,i),i.tag=1,i.payload=e,void 0!==n&&null!==n&&(i.callback=n),Oo(t,i),Su(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=wu(),r=Po.suspense;n=Eu(n,t,r),r=To(n,r),r.tag=2,void 0!==e&&null!==e&&(r.callback=e),Oo(t,r),Su(t,n)}};function Do(t,e,n,r,i,o,a){return t=t.stateNode,"function"===typeof t.shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!ni(n,r)||!ni(i,o))}function No(t,e,n){var r=!1,i=Ai,o=e.contextType;return"object"===typeof o&&null!==o?o=wo(o):(i=Li(e)?Pi:ki.current,r=e.contextTypes,o=(r=null!==r&&void 0!==r)?Ii(t,i):Ai),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Ro,t.stateNode=e,e._reactInternalFiber=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function jo(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ro.enqueueReplaceState(e,e.state,null)}function Fo(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Io,So(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=wo(o):(o=Li(e)?Pi:ki.current,i.context=Ii(t,o)),ko(t,n,i,r),i.state=t.memoizedState,o=e.getDerivedStateFromProps,"function"===typeof o&&(Lo(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&Ro.enqueueReplaceState(i,i.state,null),ko(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.effectTag|=4)}var zo=Array.isArray;function Bo(t,e,n){if(t=n.ref,null!==t&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner,n){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===i?e.ref:(e=function(t){var e=r.refs;e===Io&&(e=r.refs={}),null===t?delete e[i]:e[i]=t},e._stringRef=i,e)}if("string"!==typeof t)throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function Uo(t,e){if("textarea"!==t.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,""))}function Vo(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return t=oc(t,e),t.index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?(r=e.alternate,null!==r?(r=r.index,r<n?(e.effectTag=2,n):r):(e.effectTag=2,n)):n}function s(e){return t&&null===e.alternate&&(e.effectTag=2),e}function u(t,e,n,r){return null===e||6!==e.tag?(e=uc(n,t.mode,r),e.return=t,e):(e=i(e,n),e.return=t,e)}function c(t,e,n,r){return null!==e&&e.elementType===n.type?(r=i(e,n.props),r.ref=Bo(t,e,n),r.return=t,r):(r=ac(n.type,n.key,n.props,null,t.mode,r),r.ref=Bo(t,e,n),r.return=t,r)}function l(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?(e=cc(n,t.mode,r),e.return=t,e):(e=i(e,n.children||[]),e.return=t,e)}function f(t,e,n,r,o){return null===e||7!==e.tag?(e=sc(n,t.mode,r,o),e.return=t,e):(e=i(e,n),e.return=t,e)}function p(t,e,n){if("string"===typeof e||"number"===typeof e)return e=uc(""+e,t.mode,n),e.return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case it:return n=ac(e.type,e.key,e.props,null,t.mode,n),n.ref=Bo(t,null,e),n.return=t,n;case ot:return e=cc(e,t.mode,n),e.return=t,e}if(zo(e)||bt(e))return e=sc(e,t.mode,n,null),e.return=t,e;Uo(t,e)}return null}function h(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case it:return n.key===i?n.type===at?f(t,e,n.props.children,r,i):c(t,e,n,r):null;case ot:return n.key===i?l(t,e,n,r):null}if(zo(n)||bt(n))return null!==i?null:f(t,e,n,r,null);Uo(t,n)}return null}function d(t,e,n,r,i){if("string"===typeof r||"number"===typeof r)return t=t.get(n)||null,u(e,t,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case it:return t=t.get(null===r.key?n:r.key)||null,r.type===at?f(e,t,r.props.children,i,r.key):c(e,t,r,i);case ot:return t=t.get(null===r.key?n:r.key)||null,l(e,t,r,i)}if(zo(r)||bt(r))return t=t.get(n)||null,f(e,t,r,i,null);Uo(e,r)}return null}function v(i,a,s,u){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<s.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var g=h(i,f,s[v],u);if(null===g){null===f&&(f=m);break}t&&f&&null===g.alternate&&e(i,f),a=o(g,a,v),null===l?c=g:l.sibling=g,l=g,f=m}if(v===s.length)return n(i,f),c;if(null===f){for(;v<s.length;v++)f=p(i,s[v],u),null!==f&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<s.length;v++)m=d(f,i,v,s[v],u),null!==m&&(t&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return t&&f.forEach((function(t){return e(i,t)})),c}function m(i,s,u,c){var l=bt(u);if("function"!==typeof l)throw Error(a(150));if(u=l.call(u),null==u)throw Error(a(151));for(var f=l=null,v=s,m=s=0,g=null,y=u.next();null!==v&&!y.done;m++,y=u.next()){v.index>m?(g=v,v=null):g=v.sibling;var b=h(i,v,y.value,c);if(null===b){null===v&&(v=g);break}t&&v&&null===b.alternate&&e(i,v),s=o(b,s,m),null===f?l=b:f.sibling=b,f=b,v=g}if(y.done)return n(i,v),l;if(null===v){for(;!y.done;m++,y=u.next())y=p(i,y.value,c),null!==y&&(s=o(y,s,m),null===f?l=y:f.sibling=y,f=y);return l}for(v=r(i,v);!y.done;m++,y=u.next())y=d(v,i,m,y.value,c),null!==y&&(t&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=o(y,s,m),null===f?l=y:f.sibling=y,f=y);return t&&v.forEach((function(t){return e(i,t)})),l}return function(t,r,o,u){var c="object"===typeof o&&null!==o&&o.type===at&&null===o.key;c&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case it:t:{for(l=o.key,c=r;null!==c;){if(c.key===l){switch(c.tag){case 7:if(o.type===at){n(t,c.sibling),r=i(c,o.props.children),r.return=t,t=r;break t}break;default:if(c.elementType===o.type){n(t,c.sibling),r=i(c,o.props),r.ref=Bo(t,c,o),r.return=t,t=r;break t}}n(t,c);break}e(t,c),c=c.sibling}o.type===at?(r=sc(o.props.children,t.mode,u,o.key),r.return=t,t=r):(u=ac(o.type,o.key,o.props,null,t.mode,u),u.ref=Bo(t,r,o),u.return=t,t=u)}return s(t);case ot:t:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(t,r.sibling),r=i(r,o.children||[]),r.return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}r=cc(o,t.mode,u),r.return=t,t=r}return s(t)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(t,r.sibling),r=i(r,o),r.return=t,t=r):(n(t,r),r=uc(o,t.mode,u),r.return=t,t=r),s(t);if(zo(o))return v(t,r,o,u);if(bt(o))return m(t,r,o,u);if(l&&Uo(t,o),"undefined"===typeof o&&!c)switch(t.tag){case 1:case 0:throw t=t.type,Error(a(152,t.displayName||t.name||"Component"))}return n(t,r)}}var qo=Vo(!0),Go=Vo(!1),Ho={},Wo={current:Ho},Xo={current:Ho},Zo={current:Ho};function Yo(t){if(t===Ho)throw Error(a(174));return t}function Ko(t,e){switch(Oi(Zo,e),Oi(Xo,t),Oi(Wo,Ho),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qt(null,"");break;default:t=8===t?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qt(e,t)}Ti(Wo),Oi(Wo,e)}function Jo(){Ti(Wo),Ti(Xo),Ti(Zo)}function Qo(t){Yo(Zo.current);var e=Yo(Wo.current),n=qt(e,t.type);e!==n&&(Oi(Xo,t),Oi(Wo,n))}function $o(t){Xo.current===t&&(Ti(Wo),Ti(Xo))}var ta={current:0};function ea(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(n=n.dehydrated,null===n||n.data===On||n.data===An))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.effectTag))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function na(t,e){return{responder:t,props:e}}var ra=tt.ReactCurrentDispatcher,ia=tt.ReactCurrentBatchConfig,oa=0,aa=null,sa=null,ua=null,ca=!1;function la(){throw Error(a(321))}function fa(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ti(t[n],e[n]))return!1;return!0}function pa(t,e,n,r,i,o){if(oa=o,aa=e,e.memoizedState=null,e.updateQueue=null,e.expirationTime=0,ra.current=null===t||null===t.memoizedState?Da:Na,t=n(r,i),e.expirationTime===oa){o=0;do{if(e.expirationTime=0,!(25>o))throw Error(a(301));o+=1,ua=sa=null,e.updateQueue=null,ra.current=ja,t=n(r,i)}while(e.expirationTime===oa)}if(ra.current=Ra,e=null!==sa&&null!==sa.next,oa=0,ua=sa=aa=null,ca=!1,e)throw Error(a(300));return t}function ha(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ua?aa.memoizedState=ua=t:ua=ua.next=t,ua}function da(){if(null===sa){var t=aa.alternate;t=null!==t?t.memoizedState:null}else t=sa.next;var e=null===ua?aa.memoizedState:ua.next;if(null!==e)ua=e,sa=t;else{if(null===t)throw Error(a(310));sa=t,t={memoizedState:sa.memoizedState,baseState:sa.baseState,baseQueue:sa.baseQueue,queue:sa.queue,next:null},null===ua?aa.memoizedState=ua=t:ua=ua.next=t}return ua}function va(t,e){return"function"===typeof e?e(t):e}function ma(t){var e=da(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=sa,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=o=null,c=i;do{var l=c.expirationTime;if(l<oa){var f={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=f,o=r):u=u.next=f,l>aa.expirationTime&&(aa.expirationTime=l,ju(l))}else null!==u&&(u=u.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),Nu(l,c.suspenseConfig),r=c.eagerReducer===t?c.eagerState:t(r,c.action);c=c.next}while(null!==c&&c!==i);null===u?o=r:u.next=s,ti(r,e.memoizedState)||(Za=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function ga(t){var e=da(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=t(o,s.action),s=s.next}while(s!==i);ti(o,e.memoizedState)||(Za=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function ya(t){var e=ha();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=e.queue={pending:null,dispatch:null,lastRenderedReducer:va,lastRenderedState:t},t=t.dispatch=La.bind(null,aa,t),[e.memoizedState,t]}function ba(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=aa.updateQueue,null===e?(e={lastEffect:null},aa.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,null===n?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function _a(){return da().memoizedState}function xa(t,e,n,r){var i=ha();aa.effectTag|=t,i.memoizedState=ba(1|e,n,void 0,void 0===r?null:r)}function wa(t,e,n,r){var i=da();r=void 0===r?null:r;var o=void 0;if(null!==sa){var a=sa.memoizedState;if(o=a.destroy,null!==r&&fa(r,a.deps))return void ba(e,n,o,r)}aa.effectTag|=t,i.memoizedState=ba(1|e,n,o,r)}function Ea(t,e){return xa(516,4,t,e)}function Sa(t,e){return wa(516,4,t,e)}function Ca(t,e){return wa(4,2,t,e)}function Ta(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Oa(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,wa(4,2,Ta.bind(null,e,t),n)}function Aa(){}function ka(t,e){return ha().memoizedState=[t,void 0===e?null:e],t}function Ma(t,e){var n=da();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&fa(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Pa(t,e){var n=da();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&fa(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ia(t,e,n){var r=io();ao(98>r?98:r,(function(){t(!0)})),ao(97<r?97:r,(function(){var r=ia.suspense;ia.suspense=void 0===e?null:e;try{t(!1),n()}finally{ia.suspense=r}}))}function La(t,e,n){var r=wu(),i=Po.suspense;r=Eu(r,t,i),i={expirationTime:r,suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=e.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),e.pending=i,o=t.alternate,t===aa||null!==o&&o===aa)ca=!0,i.expirationTime=oa,aa.expirationTime=oa;else{if(0===t.expirationTime&&(null===o||0===o.expirationTime)&&(o=e.lastRenderedReducer,null!==o))try{var a=e.lastRenderedState,s=o(a,n);if(i.eagerReducer=o,i.eagerState=s,ti(s,a))return}catch(u){}Su(t,r)}}var Ra={readContext:wo,useCallback:la,useContext:la,useEffect:la,useImperativeHandle:la,useLayoutEffect:la,useMemo:la,useReducer:la,useRef:la,useState:la,useDebugValue:la,useResponder:la,useDeferredValue:la,useTransition:la},Da={readContext:wo,useCallback:ka,useContext:wo,useEffect:Ea,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,xa(4,2,Ta.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xa(4,2,t,e)},useMemo:function(t,e){var n=ha();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ha();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},t=t.dispatch=La.bind(null,aa,t),[r.memoizedState,t]},useRef:function(t){var e=ha();return t={current:t},e.memoizedState=t},useState:ya,useDebugValue:Aa,useResponder:na,useDeferredValue:function(t,e){var n=ya(t),r=n[0],i=n[1];return Ea((function(){var n=ia.suspense;ia.suspense=void 0===e?null:e;try{i(t)}finally{ia.suspense=n}}),[t,e]),r},useTransition:function(t){var e=ya(!1),n=e[0];return e=e[1],[ka(Ia.bind(null,e,t),[e,t]),n]}},Na={readContext:wo,useCallback:Ma,useContext:wo,useEffect:Sa,useImperativeHandle:Oa,useLayoutEffect:Ca,useMemo:Pa,useReducer:ma,useRef:_a,useState:function(){return ma(va)},useDebugValue:Aa,useResponder:na,useDeferredValue:function(t,e){var n=ma(va),r=n[0],i=n[1];return Sa((function(){var n=ia.suspense;ia.suspense=void 0===e?null:e;try{i(t)}finally{ia.suspense=n}}),[t,e]),r},useTransition:function(t){var e=ma(va),n=e[0];return e=e[1],[Ma(Ia.bind(null,e,t),[e,t]),n]}},ja={readContext:wo,useCallback:Ma,useContext:wo,useEffect:Sa,useImperativeHandle:Oa,useLayoutEffect:Ca,useMemo:Pa,useReducer:ga,useRef:_a,useState:function(){return ga(va)},useDebugValue:Aa,useResponder:na,useDeferredValue:function(t,e){var n=ga(va),r=n[0],i=n[1];return Sa((function(){var n=ia.suspense;ia.suspense=void 0===e?null:e;try{i(t)}finally{ia.suspense=n}}),[t,e]),r},useTransition:function(t){var e=ga(va),n=e[0];return e=e[1],[Ma(Ia.bind(null,e,t),[e,t]),n]}},Fa=null,za=null,Ba=!1;function Ua(t,e){var n=nc(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function Va(t,e){switch(t.tag){case 5:var n=t.type;return e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,null!==e&&(t.stateNode=e,!0);case 6:return e=""===t.pendingProps||3!==e.nodeType?null:e,null!==e&&(t.stateNode=e,!0);case 13:return!1;default:return!1}}function qa(t){if(Ba){var e=za;if(e){var n=e;if(!Va(t,e)){if(e=Dn(n.nextSibling),!e||!Va(t,e))return t.effectTag=-1025&t.effectTag|2,Ba=!1,void(Fa=t);Ua(Fa,n)}Fa=t,za=Dn(e.firstChild)}else t.effectTag=-1025&t.effectTag|2,Ba=!1,Fa=t}}function Ga(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Fa=t}function Ha(t){if(t!==Fa)return!1;if(!Ba)return Ga(t),Ba=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!In(e,t.memoizedProps))for(e=za;e;)Ua(t,e),e=Dn(e.nextSibling);if(Ga(t),13===t.tag){if(t=t.memoizedState,t=null!==t?t.dehydrated:null,!t)throw Error(a(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if(n===Tn){if(0===e){za=Dn(t.nextSibling);break t}e--}else n!==Cn&&n!==An&&n!==On||e++}t=t.nextSibling}za=null}}else za=Fa?Dn(t.stateNode.nextSibling):null;return!0}function Wa(){za=Fa=null,Ba=!1}var Xa=tt.ReactCurrentOwner,Za=!1;function Ya(t,e,n,r){e.child=null===t?Go(e,null,n,r):qo(e,t.child,n,r)}function Ka(t,e,n,r,i){n=n.render;var o=e.ref;return xo(e,i),r=pa(t,e,n,r,o,i),null===t||Za?(e.effectTag|=1,Ya(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),hs(t,e,i))}function Ja(t,e,n,r,i,o){if(null===t){var a=n.type;return"function"!==typeof a||rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?(t=ac(n.type,null,r,null,e.mode,o),t.ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,Qa(t,e,a,r,i,o))}return a=t.child,i<o&&(i=a.memoizedProps,n=n.compare,n=null!==n?n:ni,n(i,r)&&t.ref===e.ref)?hs(t,e,o):(e.effectTag|=1,t=oc(a,r),t.ref=e.ref,t.return=e,e.child=t)}function Qa(t,e,n,r,i,o){return null!==t&&ni(t.memoizedProps,r)&&t.ref===e.ref&&(Za=!1,i<o)?(e.expirationTime=t.expirationTime,hs(t,e,o)):ts(t,e,n,r,o)}function $a(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function ts(t,e,n,r,i){var o=Li(n)?Pi:ki.current;return o=Ii(e,o),xo(e,i),n=pa(t,e,n,r,o,i),null===t||Za?(e.effectTag|=1,Ya(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),hs(t,e,i))}function es(t,e,n,r,i){if(Li(n)){var o=!0;ji(e)}else o=!1;if(xo(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),No(e,n,r),Fo(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=wo(c):(c=Li(n)?Pi:ki.current,c=Ii(e,c));var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;f||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&jo(e,a,r,c),Eo=!1;var p=e.memoizedState;a.state=p,ko(e,r,a,i),u=e.memoizedState,s!==r||p!==u||Mi.current||Eo?("function"===typeof l&&(Lo(e,n,l,r),u=e.memoizedState),(s=Eo||Do(e,n,s,r,p,u,c))?(f||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.effectTag|=4)):("function"===typeof a.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(e.effectTag|=4),r=!1)}else a=e.stateNode,Co(t,e),s=e.memoizedProps,a.props=e.type===e.elementType?s:po(e.type,s),u=a.context,c=n.contextType,"object"===typeof c&&null!==c?c=wo(c):(c=Li(n)?Pi:ki.current,c=Ii(e,c)),l=n.getDerivedStateFromProps,(f="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&jo(e,a,r,c),Eo=!1,u=e.memoizedState,a.state=u,ko(e,r,a,i),p=e.memoizedState,s!==r||u!==p||Mi.current||Eo?("function"===typeof l&&(Lo(e,n,l,r),p=e.memoizedState),(l=Eo||Do(e,n,s,r,u,p,c))?(f||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof a.componentDidUpdate&&(e.effectTag|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=p),a.props=r,a.state=p,a.context=c,r=l):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),r=!1);return ns(t,e,n,r,o,i)}function ns(t,e,n,r,i,o){$a(t,e);var a=0!==(64&e.effectTag);if(!r&&!a)return i&&Fi(e,n,!1),hs(t,e,o);r=e.stateNode,Xa.current=e;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.effectTag|=1,null!==t&&a?(e.child=qo(e,t.child,null,o),e.child=qo(e,null,s,o)):Ya(t,e,s,o),e.memoizedState=r.state,i&&Fi(e,n,!0),e.child}function rs(t){var e=t.stateNode;e.pendingContext?Di(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Di(t,e.context,!1),Ko(t,e.containerInfo)}var is,os,as,ss,us={dehydrated:null,retryTime:0};function cs(t,e,n){var r,i=e.mode,o=e.pendingProps,a=ta.current,s=!1;if((r=0!==(64&e.effectTag))||(r=0!==(2&a)&&(null===t||null!==t.memoizedState)),r?(s=!0,e.effectTag&=-65):null!==t&&null===t.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),Oi(ta,1&a),null===t){if(void 0!==o.fallback&&qa(e),s){if(s=o.fallback,o=sc(null,i,0,null),o.return=e,0===(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return n=sc(s,i,n,null),n.return=e,o.sibling=n,e.memoizedState=us,e.child=o,n}return i=o.children,e.memoizedState=null,e.child=Go(e,null,i,n)}if(null!==t.memoizedState){if(t=t.child,i=t.sibling,s){if(o=o.fallback,n=oc(t,t.pendingProps),n.return=e,0===(2&e.mode)&&(s=null!==e.memoizedState?e.child.child:e.child,s!==t.child))for(n.child=s;null!==s;)s.return=n,s=s.sibling;return i=oc(i,o),i.return=e,n.sibling=i,n.childExpirationTime=0,e.memoizedState=us,e.child=n,i}return n=qo(e,t.child,o.children,n),e.memoizedState=null,e.child=n}if(t=t.child,s){if(s=o.fallback,o=sc(null,i,0,null),o.return=e,o.child=t,null!==t&&(t.return=o),0===(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return n=sc(s,i,n,null),n.return=e,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,e.memoizedState=us,e.child=o,n}return e.memoizedState=null,e.child=qo(e,t,o.children,n)}function ls(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e),_o(t.return,e)}function fs(t,e,n,r,i,o){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function ps(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Ya(t,e,r.children,n),r=ta.current,0!==(2&r))r=1&r|2,e.effectTag|=64;else{if(null!==t&&0!==(64&t.effectTag))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&ls(t,n);else if(19===t.tag)ls(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Oi(ta,r),0===(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)t=n.alternate,null!==t&&null===ea(t)&&(i=n),n=n.sibling;n=i,null===n?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),fs(e,!1,i,n,o,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(t=i.alternate,null!==t&&null===ea(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}fs(e,!0,n,null,o,e.lastEffect);break;case"together":fs(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function hs(t,e,n){null!==t&&(e.dependencies=t.dependencies);var r=e.expirationTime;if(0!==r&&ju(r),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child)throw Error(a(153));if(null!==e.child){for(t=e.child,n=oc(t,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,n=n.sibling=oc(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ds(t,e){switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function vs(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Li(e.type)&&Ri(),null;case 3:return Jo(),Ti(Mi),Ti(ki),n=e.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==t&&null!==t.child||!Ha(e)||(e.effectTag|=4),os(e),null;case 5:$o(e),n=Yo(Zo.current);var o=e.type;if(null!==t&&null!=e.stateNode)as(t,e,o,r,n),t.ref!==e.ref&&(e.effectTag|=128);else{if(!r){if(null===e.stateNode)throw Error(a(166));return null}if(t=Yo(Wo.current),Ha(e)){r=e.stateNode,o=e.type;var s=e.memoizedProps;switch(r[Fn]=e,r[zn]=s,o){case"iframe":case"object":case"embed":nn("load",r);break;case"video":case"audio":for(t=0;t<ne.length;t++)nn(ne[t],r);break;case"source":nn("error",r);break;case"img":case"image":case"link":nn("error",r),nn("load",r);break;case"form":nn("reset",r),nn("submit",r);break;case"details":nn("toggle",r);break;case"input":kt(r,s),nn("invalid",r),gn(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!s.multiple},nn("invalid",r),gn(n,"onChange");break;case"textarea":Ft(r,s),nn("invalid",r),gn(n,"onChange")}for(var u in dn(o,s),t=null,s)if(s.hasOwnProperty(u)){var c=s[u];"children"===u?"string"===typeof c?r.textContent!==c&&(t=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(t=["children",""+c]):C.hasOwnProperty(u)&&null!=c&&gn(n,u)}switch(o){case"input":Tt(r),It(r,s,!0);break;case"textarea":Tt(r),Bt(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=yn)}n=t,e.updateQueue=n,null!==n&&(e.effectTag|=4)}else{switch(u=9===n.nodeType?n:n.ownerDocument,t===mn&&(t=Vt(o)),t===mn?"script"===o?(t=u.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=u.createElement(o,{is:r.is}):(t=u.createElement(o),"select"===o&&(u=t,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):t=u.createElementNS(t,o),t[Fn]=e,t[zn]=r,is(t,e,!1,!1),e.stateNode=t,u=vn(o,r),o){case"iframe":case"object":case"embed":nn("load",t),c=r;break;case"video":case"audio":for(c=0;c<ne.length;c++)nn(ne[c],t);c=r;break;case"source":nn("error",t),c=r;break;case"img":case"image":case"link":nn("error",t),nn("load",t),c=r;break;case"form":nn("reset",t),nn("submit",t),c=r;break;case"details":nn("toggle",t),c=r;break;case"input":kt(t,r),c=At(t,r),nn("invalid",t),gn(n,"onChange");break;case"option":c=Dt(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},c=i({},r,{value:void 0}),nn("invalid",t),gn(n,"onChange");break;case"textarea":Ft(t,r),c=jt(t,r),nn("invalid",t),gn(n,"onChange");break;default:c=r}dn(o,c);var l=c;for(s in l)if(l.hasOwnProperty(s)){var f=l[s];"style"===s?pn(t,f):"dangerouslySetInnerHTML"===s?(f=f?f.__html:void 0,null!=f&&Ht(t,f)):"children"===s?"string"===typeof f?("textarea"!==o||""!==f)&&Wt(t,f):"number"===typeof f&&Wt(t,""+f):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(C.hasOwnProperty(s)?null!=f&&gn(n,s):null!=f&&et(t,s,f,u))}switch(o){case"input":Tt(t),It(t,r,!1);break;case"textarea":Tt(t),Bt(t);break;case"option":null!=r.value&&t.setAttribute("value",""+Et(r.value));break;case"select":t.multiple=!!r.multiple,n=r.value,null!=n?Nt(t,!!r.multiple,n,!1):null!=r.defaultValue&&Nt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof c.onClick&&(t.onclick=yn)}Pn(o,r)&&(e.effectTag|=4)}null!==e.ref&&(e.effectTag|=128)}return null;case 6:if(t&&null!=e.stateNode)ss(t,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(a(166));n=Yo(Zo.current),Yo(Wo.current),Ha(e)?(n=e.stateNode,r=e.memoizedProps,n[Fn]=e,n.nodeValue!==r&&(e.effectTag|=4)):(n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r),n[Fn]=e,e.stateNode=n)}return null;case 13:return Ti(ta),r=e.memoizedState,0!==(64&e.effectTag)?(e.expirationTime=n,e):(n=null!==r,r=!1,null===t?void 0!==e.memoizedProps.fallback&&Ha(e):(o=t.memoizedState,r=null!==o,n||null===o||(o=t.child.sibling,null!==o&&(s=e.firstEffect,null!==s?(e.firstEffect=o,o.nextEffect=s):(e.firstEffect=e.lastEffect=o,o.nextEffect=null),o.effectTag=8))),n&&!r&&0!==(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&ta.current)?nu===Ws&&(nu=Ys):(nu!==Ws&&nu!==Ys||(nu=Ks),0!==su&&null!==$s&&(pc($s,eu),hc($s,su)))),(n||r)&&(e.effectTag|=4),null);case 4:return Jo(),os(e),null;case 10:return bo(e),null;case 17:return Li(e.type)&&Ri(),null;case 19:if(Ti(ta),r=e.memoizedState,null===r)return null;if(o=0!==(64&e.effectTag),s=r.rendering,null===s){if(o)ds(r,!1);else if(nu!==Ws||null!==t&&0!==(64&t.effectTag))for(s=e.child;null!==s;){if(t=ea(s),null!==t){for(e.effectTag|=64,ds(r,!1),o=t.updateQueue,null!==o&&(e.updateQueue=o,e.effectTag|=4),null===r.lastEffect&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=e.child;null!==r;)o=r,s=n,o.effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,t=o.alternate,null===t?(o.childExpirationTime=0,o.expirationTime=s,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=t.childExpirationTime,o.expirationTime=t.expirationTime,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,s=t.dependencies,o.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),r=r.sibling;return Oi(ta,1&ta.current|2),e.child}s=s.sibling}}else{if(!o)if(t=ea(s),null!==t){if(e.effectTag|=64,o=!0,n=t.updateQueue,null!==n&&(e.updateQueue=n,e.effectTag|=4),ds(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate)return e=e.lastEffect=r.lastEffect,null!==e&&(e.nextEffect=null),null}else 2*ro()-r.renderingStartTime>r.tailExpiration&&1<n&&(e.effectTag|=64,o=!0,ds(r,!1),e.expirationTime=e.childExpirationTime=n-1);r.isBackwards?(s.sibling=e.child,e.child=s):(n=r.last,null!==n?n.sibling=s:e.child=s,r.last=s)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=ro()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=ro(),n.sibling=null,e=ta.current,Oi(ta,o?1&e|2:1&e),n):null}throw Error(a(156,e.tag))}function ms(t){switch(t.tag){case 1:Li(t.type)&&Ri();var e=t.effectTag;return 4096&e?(t.effectTag=-4097&e|64,t):null;case 3:if(Jo(),Ti(Mi),Ti(ki),e=t.effectTag,0!==(64&e))throw Error(a(285));return t.effectTag=-4097&e|64,t;case 5:return $o(t),null;case 13:return Ti(ta),e=t.effectTag,4096&e?(t.effectTag=-4097&e|64,t):null;case 19:return Ti(ta),null;case 4:return Jo(),null;case 10:return bo(t),null;default:return null}}function gs(t,e){return{value:t,source:e,stack:wt(e)}}is=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},os=function(){},as=function(t,e,n,r,o){var a=t.memoizedProps;if(a!==r){var s,u,c=e.stateNode;switch(Yo(Wo.current),t=null,n){case"input":a=At(c,a),r=At(c,r),t=[];break;case"option":a=Dt(c,a),r=Dt(c,r),t=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),t=[];break;case"textarea":a=jt(c,a),r=jt(c,r),t=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(c.onclick=yn)}for(s in dn(n,r),n=null,a)if(!r.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(u in c=a[s],c)c.hasOwnProperty(u)&&(n||(n={}),n[u]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(C.hasOwnProperty(s)?t||(t=[]):(t=t||[]).push(s,null));for(s in r){var l=r[s];if(c=null!=a?a[s]:void 0,r.hasOwnProperty(s)&&l!==c&&(null!=l||null!=c))if("style"===s)if(c){for(u in c)!c.hasOwnProperty(u)||l&&l.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in l)l.hasOwnProperty(u)&&c[u]!==l[u]&&(n||(n={}),n[u]=l[u])}else n||(t||(t=[]),t.push(s,n)),n=l;else"dangerouslySetInnerHTML"===s?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(t=t||[]).push(s,l)):"children"===s?c===l||"string"!==typeof l&&"number"!==typeof l||(t=t||[]).push(s,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(C.hasOwnProperty(s)?(null!=l&&gn(o,s),t||c===l||(t=[])):(t=t||[]).push(s,l))}n&&(t=t||[]).push("style",n),o=t,(e.updateQueue=o)&&(e.effectTag|=4)}},ss=function(t,e,n,r){n!==r&&(e.effectTag|=4)};var ys="function"===typeof WeakSet?WeakSet:Set;function bs(t,e){var n=e.source,r=e.stack;null===r&&null!==n&&(r=wt(n)),null!==n&&xt(n.type),e=e.value,null!==t&&1===t.tag&&xt(t.type);try{console.error(e)}catch(i){setTimeout((function(){throw i}))}}function _s(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(n){Yu(t,n)}}function xs(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(n){Yu(t,n)}else e.current=null}function ws(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&e.effectTag&&null!==t){var n=t.memoizedProps,r=t.memoizedState;t=e.stateNode,e=t.getSnapshotBeforeUpdate(e.elementType===e.type?n:po(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(a(163))}function Es(t,e){if(e=e.updateQueue,e=null!==e?e.lastEffect:null,null!==e){var n=e=e.next;do{if((n.tag&t)===t){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==e)}}function Ss(t,e){if(e=e.updateQueue,e=null!==e?e.lastEffect:null,null!==e){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Cs(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:return void Ss(3,n);case 1:if(t=n.stateNode,4&n.effectTag)if(null===e)t.componentDidMount();else{var r=n.elementType===n.type?e.memoizedProps:po(n.type,e.memoizedProps);t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate)}return e=n.updateQueue,void(null!==e&&Mo(n,e,t));case 3:if(e=n.updateQueue,null!==e){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}Mo(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.effectTag&&Pn(n.type,n.memoizedProps)&&t.focus());case 6:return;case 4:return;case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&He(n)))));case 19:case 17:case 20:case 21:return}throw Error(a(163))}function Ts(t,e,n){switch("function"===typeof $u&&$u(e),e.tag){case 0:case 11:case 14:case 15:case 22:if(t=e.updateQueue,null!==t&&(t=t.lastEffect,null!==t)){var r=t.next;ao(97<n?97:n,(function(){var t=r;do{var n=t.destroy;if(void 0!==n){var i=e;try{n()}catch(o){Yu(i,o)}}t=t.next}while(t!==r)}))}break;case 1:xs(e),n=e.stateNode,"function"===typeof n.componentWillUnmount&&_s(e,n);break;case 5:xs(e);break;case 4:Is(t,e,n)}}function Os(t){var e=t.alternate;t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.alternate=null,t.firstEffect=null,t.lastEffect=null,t.pendingProps=null,t.memoizedProps=null,t.stateNode=null,null!==e&&Os(e)}function As(t){return 5===t.tag||3===t.tag||4===t.tag}function ks(t){t:{for(var e=t.return;null!==e;){if(As(e)){var n=e;break t}e=e.return}throw Error(a(160))}switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:e=e.containerInfo,r=!0;break;case 4:e=e.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.effectTag&&(Wt(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||As(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}r?Ms(t,n,e):Ps(t,n,e)}function Ms(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,null!==n&&void 0!==n||null!==e.onclick||(e.onclick=yn));else if(4!==r&&(t=t.child,null!==t))for(Ms(t,e,n),t=t.sibling;null!==t;)Ms(t,e,n),t=t.sibling}function Ps(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&(t=t.child,null!==t))for(Ps(t,e,n),t=t.sibling;null!==t;)Ps(t,e,n),t=t.sibling}function Is(t,e,n){for(var r,i,o=e,s=!1;;){if(!s){s=o.return;t:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break t;case 3:r=r.containerInfo,i=!0;break t;case 4:r=r.containerInfo,i=!0;break t}s=s.return}s=!0}if(5===o.tag||6===o.tag){t:for(var u=t,c=o,l=n,f=c;;)if(Ts(u,f,l),null!==f.child&&4!==f.tag)f.child.return=f,f=f.child;else{if(f===c)break t;for(;null===f.sibling;){if(null===f.return||f.return===c)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}i?(u=r,c=o.stateNode,8===u.nodeType?u.parentNode.removeChild(c):u.removeChild(c)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(Ts(t,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;o=o.return,4===o.tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function Ls(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:return void Es(3,e);case 1:return;case 5:var n=e.stateNode;if(null!=n){var r=e.memoizedProps,i=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[zn]=r,"input"===t&&"radio"===r.type&&null!=r.name&&Mt(n,r),vn(t,i),e=vn(t,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?pn(n,u):"dangerouslySetInnerHTML"===s?Ht(n,u):"children"===s?Wt(n,u):et(n,s,u,e)}switch(t){case"input":Pt(n,r);break;case"textarea":zt(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,t=r.value,null!=t?Nt(n,!!r.multiple,t,!1):e!==!!r.multiple&&(null!=r.defaultValue?Nt(n,!!r.multiple,r.defaultValue,!0):Nt(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(a(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return e=e.stateNode,void(e.hydrate&&(e.hydrate=!1,He(e.containerInfo)));case 12:return;case 13:if(n=e,null===e.memoizedState?r=!1:(r=!0,n=e.child,cu=ro()),null!==n)t:for(t=n;;){if(5===t.tag)o=t.stateNode,r?(o=o.style,"function"===typeof o.setProperty?o.setProperty("display","none","important"):o.display="none"):(o=t.stateNode,i=t.memoizedProps.style,i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,o.style.display=fn("display",i));else if(6===t.tag)t.stateNode.nodeValue=r?"":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState&&null===t.memoizedState.dehydrated){o=t.child.sibling,o.return=t,t=o;continue}if(null!==t.child){t.child.return=t,t=t.child;continue}}if(t===n)break;for(;null===t.sibling;){if(null===t.return||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}return void Rs(e);case 19:return void Rs(e);case 17:return}throw Error(a(163))}function Rs(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new ys),e.forEach((function(e){var r=Ju.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}var Ds="function"===typeof WeakMap?WeakMap:Map;function Ns(t,e,n){n=To(n,null),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){pu||(pu=!0,hu=r),bs(t,e)},n}function js(t,e,n){n=To(n,null),n.tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return bs(t,e),r(i)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===du?du=new Set([this]):du.add(this),bs(t,e));var n=e.stack;this.componentDidCatch(e.value,{componentStack:null!==n?n:""})}),n}var Fs,zs=Math.ceil,Bs=tt.ReactCurrentDispatcher,Us=tt.ReactCurrentOwner,Vs=0,qs=8,Gs=16,Hs=32,Ws=0,Xs=1,Zs=2,Ys=3,Ks=4,Js=5,Qs=Vs,$s=null,tu=null,eu=0,nu=Ws,ru=null,iu=1073741823,ou=1073741823,au=null,su=0,uu=!1,cu=0,lu=500,fu=null,pu=!1,hu=null,du=null,vu=!1,mu=null,gu=90,yu=null,bu=0,_u=null,xu=0;function wu(){return(Qs&(Gs|Hs))!==Vs?1073741821-(ro()/10|0):0!==xu?xu:xu=1073741821-(ro()/10|0)}function Eu(t,e,n){if(e=e.mode,0===(2&e))return 1073741823;var r=io();if(0===(4&e))return 99===r?1073741823:1073741822;if((Qs&Gs)!==Vs)return eu;if(null!==n)t=fo(t,0|n.timeoutMs||5e3,250);else switch(r){case 99:t=1073741823;break;case 98:t=fo(t,150,100);break;case 97:case 96:t=fo(t,5e3,250);break;case 95:t=2;break;default:throw Error(a(326))}return null!==$s&&t===eu&&--t,t}function Su(t,e){if(50<bu)throw bu=0,_u=null,Error(a(185));if(t=Cu(t,e),null!==t){var n=io();1073741823===e?(Qs&qs)!==Vs&&(Qs&(Gs|Hs))===Vs?ku(t):(Ou(t),Qs===Vs&&co()):Ou(t),(4&Qs)===Vs||98!==n&&99!==n||(null===yu?yu=new Map([[t,e]]):(n=yu.get(t),(void 0===n||n>e)&&yu.set(t,e)))}}function Cu(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var r=t.return,i=null;if(null===r&&3===t.tag)i=t.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<e&&(r.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&($s===i&&(ju(e),nu===Ks&&pc(i,eu)),hc(i,e)),i}function Tu(t){var e=t.lastExpiredTime;if(0!==e)return e;if(e=t.firstPendingTime,!fc(t,e))return e;var n=t.lastPingedTime;return t=t.nextKnownPendingLevel,t=n>t?n:t,2>=t&&e!==t?0:t}function Ou(t){if(0!==t.lastExpiredTime)t.callbackExpirationTime=1073741823,t.callbackPriority=99,t.callbackNode=uo(ku.bind(null,t));else{var e=Tu(t),n=t.callbackNode;if(0===e)null!==n&&(t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90);else{var r=wu();if(1073741823===e?r=99:1===e||2===e?r=95:(r=10*(1073741821-e)-10*(1073741821-r),r=0>=r?99:250>=r?98:5250>=r?97:95),null!==n){var i=t.callbackPriority;if(t.callbackExpirationTime===e&&i>=r)return;n!==Ki&&Ui(n)}t.callbackExpirationTime=e,t.callbackPriority=r,e=1073741823===e?uo(ku.bind(null,t)):so(r,Au.bind(null,t),{timeout:10*(1073741821-e)-ro()}),t.callbackNode=e}}}function Au(t,e){if(xu=0,e)return e=wu(),dc(t,e),Ou(t),null;var n=Tu(t);if(0!==n){if(e=t.callbackNode,(Qs&(Gs|Hs))!==Vs)throw Error(a(327));if(Wu(),t===$s&&n===eu||Lu(t,n),null!==tu){var r=Qs;Qs|=Gs;var i=Du();do{try{zu();break}catch(u){Ru(t,u)}}while(1);if(yo(),Qs=r,Bs.current=i,nu===Xs)throw e=ru,Lu(t,n),pc(t,n),Ou(t),e;if(null===tu)switch(i=t.finishedWork=t.current.alternate,t.finishedExpirationTime=n,r=nu,$s=null,r){case Ws:case Xs:throw Error(a(345));case Zs:dc(t,2<n?2:n);break;case Ys:if(pc(t,n),r=t.lastSuspendedTime,n===r&&(t.nextKnownPendingLevel=Vu(i)),1073741823===iu&&(i=cu+lu-ro(),10<i)){if(uu){var o=t.lastPingedTime;if(0===o||o>=n){t.lastPingedTime=n,Lu(t,n);break}}if(o=Tu(t),0!==o&&o!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}t.timeoutHandle=Ln(qu.bind(null,t),i);break}qu(t);break;case Ks:if(pc(t,n),r=t.lastSuspendedTime,n===r&&(t.nextKnownPendingLevel=Vu(i)),uu&&(i=t.lastPingedTime,0===i||i>=n)){t.lastPingedTime=n,Lu(t,n);break}if(i=Tu(t),0!==i&&i!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}if(1073741823!==ou?r=10*(1073741821-ou)-ro():1073741823===iu?r=0:(r=10*(1073741821-iu)-5e3,i=ro(),n=10*(1073741821-n)-i,r=i-r,0>r&&(r=0),r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zs(r/1960))-r,n<r&&(r=n)),10<r){t.timeoutHandle=Ln(qu.bind(null,t),r);break}qu(t);break;case Js:if(1073741823!==iu&&null!==au){o=iu;var s=au;if(r=0|s.busyMinDurationMs,0>=r?r=0:(i=0|s.busyDelayMs,o=ro()-(10*(1073741821-o)-(0|s.timeoutMs||5e3)),r=o<=i?0:i+r-o),10<r){pc(t,n),t.timeoutHandle=Ln(qu.bind(null,t),r);break}}qu(t);break;default:throw Error(a(329))}if(Ou(t),t.callbackNode===e)return Au.bind(null,t)}}return null}function ku(t){var e=t.lastExpiredTime;if(e=0!==e?e:1073741823,(Qs&(Gs|Hs))!==Vs)throw Error(a(327));if(Wu(),t===$s&&e===eu||Lu(t,e),null!==tu){var n=Qs;Qs|=Gs;var r=Du();do{try{Fu();break}catch(i){Ru(t,i)}}while(1);if(yo(),Qs=n,Bs.current=r,nu===Xs)throw n=ru,Lu(t,e),pc(t,e),Ou(t),n;if(null!==tu)throw Error(a(261));t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,$s=null,qu(t),Ou(t)}return null}function Mu(){if(null!==yu){var t=yu;yu=null,t.forEach((function(t,e){dc(e,t),Ou(e)})),co()}}function Pu(t,e){var n=Qs;Qs|=1;try{return t(e)}finally{Qs=n,Qs===Vs&&co()}}function Iu(t,e){var n=Qs;Qs&=-2,Qs|=qs;try{return t(e)}finally{Qs=n,Qs===Vs&&co()}}function Lu(t,e){t.finishedWork=null,t.finishedExpirationTime=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,Rn(n)),null!==tu)for(n=tu.return;null!==n;){var r=n;switch(r.tag){case 1:r=r.type.childContextTypes,null!==r&&void 0!==r&&Ri();break;case 3:Jo(),Ti(Mi),Ti(ki);break;case 5:$o(r);break;case 4:Jo();break;case 13:Ti(ta);break;case 19:Ti(ta);break;case 10:bo(r)}n=n.return}$s=t,tu=oc(t.current,null),eu=e,nu=Ws,ru=null,ou=iu=1073741823,au=null,su=0,uu=!1}function Ru(t,e){do{try{if(yo(),ra.current=Ra,ca)for(var n=aa.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(oa=0,ua=sa=aa=null,ca=!1,null===tu||null===tu.return)return nu=Xs,ru=e,tu=null;t:{var i=t,o=tu.return,a=tu,s=e;if(e=eu,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var u=s;if(0===(2&a.mode)){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.expirationTime=c.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var l=0!==(1&ta.current),f=o;do{var p;if(p=13===f.tag){var h=f.memoizedState;if(null!==h)p=null!==h.dehydrated;else{var d=f.memoizedProps;p=void 0!==d.fallback&&(!0!==d.unstable_avoidThisFallback||!l)}}if(p){var v=f.updateQueue;if(null===v){var m=new Set;m.add(u),f.updateQueue=m}else v.add(u);if(0===(2&f.mode)){if(f.effectTag|=64,a.effectTag&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var g=To(1073741823,null);g.tag=2,Oo(a,g)}a.expirationTime=1073741823;break t}s=void 0,a=e;var y=i.pingCache;if(null===y?(y=i.pingCache=new Ds,s=new Set,y.set(u,s)):(s=y.get(u),void 0===s&&(s=new Set,y.set(u,s))),!s.has(a)){s.add(a);var b=Ku.bind(null,i,u,a);u.then(b,b)}f.effectTag|=4096,f.expirationTime=e;break t}f=f.return}while(null!==f);s=Error((xt(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+wt(a))}nu!==Js&&(nu=Zs),s=gs(s,a),f=o;do{switch(f.tag){case 3:u=s,f.effectTag|=4096,f.expirationTime=e;var _=Ns(f,u,e);Ao(f,_);break t;case 1:u=s;var x=f.type,w=f.stateNode;if(0===(64&f.effectTag)&&("function"===typeof x.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===du||!du.has(w)))){f.effectTag|=4096,f.expirationTime=e;var E=js(f,u,e);Ao(f,E);break t}}f=f.return}while(null!==f)}tu=Uu(tu)}catch(S){e=S;continue}break}while(1)}function Du(){var t=Bs.current;return Bs.current=Ra,null===t?Ra:t}function Nu(t,e){t<iu&&2<t&&(iu=t),null!==e&&t<ou&&2<t&&(ou=t,au=e)}function ju(t){t>su&&(su=t)}function Fu(){for(;null!==tu;)tu=Bu(tu)}function zu(){for(;null!==tu&&!Ji();)tu=Bu(tu)}function Bu(t){var e=Fs(t.alternate,t,eu);return t.memoizedProps=t.pendingProps,null===e&&(e=Uu(t)),Us.current=null,e}function Uu(t){tu=t;do{var e=tu.alternate;if(t=tu.return,0===(2048&tu.effectTag)){if(e=vs(e,tu,eu),1===eu||1!==tu.childExpirationTime){for(var n=0,r=tu.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}tu.childExpirationTime=n}if(null!==e)return e;null!==t&&0===(2048&t.effectTag)&&(null===t.firstEffect&&(t.firstEffect=tu.firstEffect),null!==tu.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=tu.firstEffect),t.lastEffect=tu.lastEffect),1<tu.effectTag&&(null!==t.lastEffect?t.lastEffect.nextEffect=tu:t.firstEffect=tu,t.lastEffect=tu))}else{if(e=ms(tu),null!==e)return e.effectTag&=2047,e;null!==t&&(t.firstEffect=t.lastEffect=null,t.effectTag|=2048)}if(e=tu.sibling,null!==e)return e;tu=t}while(null!==tu);return nu===Ws&&(nu=Js),null}function Vu(t){var e=t.expirationTime;return t=t.childExpirationTime,e>t?e:t}function qu(t){var e=io();return ao(99,Gu.bind(null,t,e)),null}function Gu(t,e){do{Wu()}while(null!==mu);if((Qs&(Gs|Hs))!==Vs)throw Error(a(327));var n=t.finishedWork,r=t.finishedExpirationTime;if(null===n)return null;if(t.finishedWork=null,t.finishedExpirationTime=0,n===t.current)throw Error(a(177));t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90,t.nextKnownPendingLevel=0;var i=Vu(n);if(t.firstPendingTime=i,r<=t.lastSuspendedTime?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:r<=t.firstSuspendedTime&&(t.firstSuspendedTime=r-1),r<=t.lastPingedTime&&(t.lastPingedTime=0),r<=t.lastExpiredTime&&(t.lastExpiredTime=0),t===$s&&(tu=$s=null,eu=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Qs;Qs|=Hs,Us.current=null,kn=en;var s=En();if(Sn(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else t:{u=(u=s.ownerDocument)&&u.defaultView||window;var c=u.getSelection&&u.getSelection();if(c&&0!==c.rangeCount){u=c.anchorNode;var l=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{u.nodeType,f.nodeType}catch(T){u=null;break t}var p=0,h=-1,d=-1,v=0,m=0,g=s,y=null;e:for(;;){for(var b;;){if(g!==u||0!==l&&3!==g.nodeType||(h=p+l),g!==f||0!==c&&3!==g.nodeType||(d=p+c),3===g.nodeType&&(p+=g.nodeValue.length),null===(b=g.firstChild))break;y=g,g=b}for(;;){if(g===s)break e;if(y===u&&++v===l&&(h=p),y===f&&++m===c&&(d=p),null!==(b=g.nextSibling))break;g=y,y=g.parentNode}g=b}u=-1===h||-1===d?null:{start:h,end:d}}else u=null}u=u||{start:0,end:0}}else u=null;Mn={activeElementDetached:null,focusedElem:s,selectionRange:u},en=!1,fu=i;do{try{Hu()}catch(T){if(null===fu)throw Error(a(330));Yu(fu,T),fu=fu.nextEffect}}while(null!==fu);fu=i;do{try{for(s=t,u=e;null!==fu;){var _=fu.effectTag;if(16&_&&Wt(fu.stateNode,""),128&_){var x=fu.alternate;if(null!==x){var w=x.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&_){case 2:ks(fu),fu.effectTag&=-3;break;case 6:ks(fu),fu.effectTag&=-3,Ls(fu.alternate,fu);break;case 1024:fu.effectTag&=-1025;break;case 1028:fu.effectTag&=-1025,Ls(fu.alternate,fu);break;case 4:Ls(fu.alternate,fu);break;case 8:l=fu,Is(s,l,u),Os(l)}fu=fu.nextEffect}}catch(T){if(null===fu)throw Error(a(330));Yu(fu,T),fu=fu.nextEffect}}while(null!==fu);if(w=Mn,x=En(),_=w.focusedElem,u=w.selectionRange,x!==_&&_&&_.ownerDocument&&wn(_.ownerDocument.documentElement,_)){null!==u&&Sn(_)&&(x=u.start,w=u.end,void 0===w&&(w=x),"selectionStart"in _?(_.selectionStart=x,_.selectionEnd=Math.min(w,_.value.length)):(w=(x=_.ownerDocument||document)&&x.defaultView||window,w.getSelection&&(w=w.getSelection(),l=_.textContent.length,s=Math.min(u.start,l),u=void 0===u.end?s:Math.min(u.end,l),!w.extend&&s>u&&(l=u,u=s,s=l),l=xn(_,s),f=xn(_,u),l&&f&&(1!==w.rangeCount||w.anchorNode!==l.node||w.anchorOffset!==l.offset||w.focusNode!==f.node||w.focusOffset!==f.offset)&&(x=x.createRange(),x.setStart(l.node,l.offset),w.removeAllRanges(),s>u?(w.addRange(x),w.extend(f.node,f.offset)):(x.setEnd(f.node,f.offset),w.addRange(x)))))),x=[];for(w=_;w=w.parentNode;)1===w.nodeType&&x.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof _.focus&&_.focus(),_=0;_<x.length;_++)w=x[_],w.element.scrollLeft=w.left,w.element.scrollTop=w.top}en=!!kn,Mn=kn=null,t.current=n,fu=i;do{try{for(_=t;null!==fu;){var E=fu.effectTag;if(36&E&&Cs(_,fu.alternate,fu),128&E){x=void 0;var S=fu.ref;if(null!==S){var C=fu.stateNode;switch(fu.tag){case 5:x=C;break;default:x=C}"function"===typeof S?S(x):S.current=x}}fu=fu.nextEffect}}catch(T){if(null===fu)throw Error(a(330));Yu(fu,T),fu=fu.nextEffect}}while(null!==fu);fu=null,Qi(),Qs=o}else t.current=n;if(vu)vu=!1,mu=t,gu=e;else for(fu=i;null!==fu;)e=fu.nextEffect,fu.nextEffect=null,fu=e;if(e=t.firstPendingTime,0===e&&(du=null),1073741823===e?t===_u?bu++:(bu=0,_u=t):bu=0,"function"===typeof Qu&&Qu(n.stateNode,r),Ou(t),pu)throw pu=!1,t=hu,hu=null,t;return(Qs&qs)!==Vs||co(),null}function Hu(){for(;null!==fu;){var t=fu.effectTag;0!==(256&t)&&ws(fu.alternate,fu),0===(512&t)||vu||(vu=!0,so(97,(function(){return Wu(),null}))),fu=fu.nextEffect}}function Wu(){if(90!==gu){var t=97<gu?97:gu;return gu=90,ao(t,Xu)}}function Xu(){if(null===mu)return!1;var t=mu;if(mu=null,(Qs&(Gs|Hs))!==Vs)throw Error(a(331));var e=Qs;for(Qs|=Hs,t=t.current.firstEffect;null!==t;){try{var n=t;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:Es(5,n),Ss(5,n)}}catch(r){if(null===t)throw Error(a(330));Yu(t,r)}n=t.nextEffect,t.nextEffect=null,t=n}return Qs=e,co(),!0}function Zu(t,e,n){e=gs(n,e),e=Ns(t,e,1073741823),Oo(t,e),t=Cu(t,1073741823),null!==t&&Ou(t)}function Yu(t,e){if(3===t.tag)Zu(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){Zu(n,t,e);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===du||!du.has(r))){t=gs(e,t),t=js(n,t,1073741823),Oo(n,t),n=Cu(n,1073741823),null!==n&&Ou(n);break}}n=n.return}}function Ku(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),$s===t&&eu===n?nu===Ks||nu===Ys&&1073741823===iu&&ro()-cu<lu?Lu(t,eu):uu=!0:fc(t,n)&&(e=t.lastPingedTime,0!==e&&e<n||(t.lastPingedTime=n,Ou(t)))}function Ju(t,e){var n=t.stateNode;null!==n&&n.delete(e),e=0,0===e&&(e=wu(),e=Eu(e,t,null)),t=Cu(t,e),null!==t&&Ou(t)}Fs=function(t,e,n){var r=e.expirationTime;if(null!==t){var i=e.pendingProps;if(t.memoizedProps!==i||Mi.current)Za=!0;else{if(r<n){switch(Za=!1,e.tag){case 3:rs(e),Wa();break;case 5:if(Qo(e),4&e.mode&&1!==n&&i.hidden)return e.expirationTime=e.childExpirationTime=1,null;break;case 1:Li(e.type)&&ji(e);break;case 4:Ko(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value,i=e.type._context,Oi(ho,i._currentValue),i._currentValue=r;break;case 13:if(null!==e.memoizedState)return r=e.child.childExpirationTime,0!==r&&r>=n?cs(t,e,n):(Oi(ta,1&ta.current),e=hs(t,e,n),null!==e?e.sibling:null);Oi(ta,1&ta.current);break;case 19:if(r=e.childExpirationTime>=n,0!==(64&t.effectTag)){if(r)return ps(t,e,n);e.effectTag|=64}if(i=e.memoizedState,null!==i&&(i.rendering=null,i.tail=null),Oi(ta,ta.current),!r)return null}return hs(t,e,n)}Za=!1}}else Za=!1;switch(e.expirationTime=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,i=Ii(e,ki.current),xo(e,n),i=pa(null,e,r,t,i,n),e.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,Li(r)){var o=!0;ji(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,So(e);var s=r.getDerivedStateFromProps;"function"===typeof s&&Lo(e,r,s,t),i.updater=Ro,e.stateNode=i,i._reactInternalFiber=e,Fo(e,r,t,n),e=ns(null,e,r,!0,o,n)}else e.tag=0,Ya(null,e,i,n),e=e.child;return e;case 16:t:{if(i=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,_t(i),1!==i._status)throw i._result;switch(i=i._result,e.type=i,o=e.tag=ic(i),t=po(i,t),o){case 0:e=ts(null,e,i,t,n);break t;case 1:e=es(null,e,i,t,n);break t;case 11:e=Ka(null,e,i,t,n);break t;case 14:e=Ja(null,e,i,po(i.type,t),r,n);break t}throw Error(a(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:po(r,i),ts(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:po(r,i),es(t,e,r,i,n);case 3:if(rs(e),r=e.updateQueue,null===t||null===r)throw Error(a(282));if(r=e.pendingProps,i=e.memoizedState,i=null!==i?i.element:null,Co(t,e),ko(e,r,null,n),r=e.memoizedState.element,r===i)Wa(),e=hs(t,e,n);else{if((i=e.stateNode.hydrate)&&(za=Dn(e.stateNode.containerInfo.firstChild),Fa=e,i=Ba=!0),i)for(n=Go(e,null,r,n),e.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Ya(t,e,r,n),Wa();e=e.child}return e;case 5:return Qo(e),null===t&&qa(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,s=i.children,In(r,i)?s=null:null!==o&&In(r,o)&&(e.effectTag|=16),$a(t,e),4&e.mode&&1!==n&&i.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(Ya(t,e,s,n),e=e.child),e;case 6:return null===t&&qa(e),null;case 13:return cs(t,e,n);case 4:return Ko(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=qo(e,null,r,n):Ya(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:po(r,i),Ka(t,e,r,i,n);case 7:return Ya(t,e,e.pendingProps,n),e.child;case 8:return Ya(t,e,e.pendingProps.children,n),e.child;case 12:return Ya(t,e,e.pendingProps.children,n),e.child;case 10:t:{r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value;var u=e.type._context;if(Oi(ho,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,o=ti(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823),0===o){if(s.children===i.children&&!Mi.current){e=hs(t,e,n);break t}}else for(u=e.child,null!==u&&(u.return=e);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===u.tag&&(l=To(n,null),l.tag=2,Oo(u,l)),u.expirationTime<n&&(u.expirationTime=n),l=u.alternate,null!==l&&l.expirationTime<n&&(l.expirationTime=n),_o(u.return,n),c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else s=10===u.tag&&u.type===e.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===e){s=null;break}if(u=s.sibling,null!==u){u.return=s.return,s=u;break}s=s.return}u=s}Ya(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,o=e.pendingProps,r=o.children,xo(e,n),i=wo(i,o.unstable_observedBits),r=r(i),e.effectTag|=1,Ya(t,e,r,n),e.child;case 14:return i=e.type,o=po(i,e.pendingProps),o=po(i.type,o),Ja(t,e,i,o,r,n);case 15:return Qa(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:po(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,Li(r)?(t=!0,ji(e)):t=!1,xo(e,n),No(e,r,i),Fo(e,r,i,n),ns(null,e,r,!0,t,n);case 19:return ps(t,e,n)}throw Error(a(156,e.tag))};var Qu=null,$u=null;function tc(t){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);Qu=function(t){try{e.onCommitFiberRoot(n,t,void 0,64===(64&t.current.effectTag))}catch(r){}},$u=function(t){try{e.onCommitFiberUnmount(n,t)}catch(r){}}}catch(r){}return!0}function ec(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function nc(t,e,n,r){return new ec(t,e,n,r)}function rc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ic(t){if("function"===typeof t)return rc(t)?1:0;if(void 0!==t&&null!==t){if(t=t.$$typeof,t===pt)return 11;if(t===vt)return 14}return 2}function oc(t,e){var n=t.alternate;return null===n?(n=nc(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{expirationTime:e.expirationTime,firstContext:e.firstContext,responders:e.responders},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ac(t,e,n,r,i,o){var s=2;if(r=t,"function"===typeof t)rc(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case at:return sc(n.children,i,o,e);case ft:s=8,i|=7;break;case st:s=8,i|=1;break;case ut:return t=nc(12,n,e,8|i),t.elementType=ut,t.type=ut,t.expirationTime=o,t;case ht:return t=nc(13,n,e,i),t.type=ht,t.elementType=ht,t.expirationTime=o,t;case dt:return t=nc(19,n,e,i),t.elementType=dt,t.expirationTime=o,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case ct:s=10;break t;case lt:s=9;break t;case pt:s=11;break t;case vt:s=14;break t;case mt:s=16,r=null;break t;case gt:s=22;break t}throw Error(a(130,null==t?t:typeof t,""))}return e=nc(s,n,e,i),e.elementType=t,e.type=r,e.expirationTime=o,e}function sc(t,e,n,r){return t=nc(7,t,r,e),t.expirationTime=n,t}function uc(t,e,n){return t=nc(6,t,null,e),t.expirationTime=n,t}function cc(t,e,n){return e=nc(4,null!==t.children?t.children:[],t.key,e),e.expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function lc(t,e,n){this.tag=e,this.current=null,this.containerInfo=t,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function fc(t,e){var n=t.firstSuspendedTime;return t=t.lastSuspendedTime,0!==n&&n>=e&&t<=e}function pc(t,e){var n=t.firstSuspendedTime,r=t.lastSuspendedTime;n<e&&(t.firstSuspendedTime=e),(r>e||0===n)&&(t.lastSuspendedTime=e),e<=t.lastPingedTime&&(t.lastPingedTime=0),e<=t.lastExpiredTime&&(t.lastExpiredTime=0)}function hc(t,e){e>t.firstPendingTime&&(t.firstPendingTime=e);var n=t.firstSuspendedTime;0!==n&&(e>=n?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:e>=t.lastSuspendedTime&&(t.lastSuspendedTime=e+1),e>t.nextKnownPendingLevel&&(t.nextKnownPendingLevel=e))}function dc(t,e){var n=t.lastExpiredTime;(0===n||n>e)&&(t.lastExpiredTime=e)}function vc(t,e,n,r){var i=e.current,o=wu(),s=Po.suspense;o=Eu(o,i,s);t:if(n){n=n._reactInternalFiber;e:{if(oe(n)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Li(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var c=n.type;if(Li(c)){n=Ni(n,c,u);break t}}n=u}else n=Ai;return null===e.context?e.context=n:e.pendingContext=n,e=To(o,s),e.payload={element:t},r=void 0===r?null:r,null!==r&&(e.callback=r),Oo(i,e),Su(i,o),o}function mc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function gc(t,e){t=t.memoizedState,null!==t&&null!==t.dehydrated&&t.retryTime<e&&(t.retryTime=e)}function yc(t,e){gc(t,e),(t=t.alternate)&&gc(t,e)}function bc(t,e,n){n=null!=n&&!0===n.hydrate;var r=new lc(t,e,n),i=nc(3,null,null,2===e?7:1===e?3:0);r.current=i,i.stateNode=r,So(i),t[Bn]=r.current,n&&0!==e&&De(t,9===t.nodeType?t:t.ownerDocument),this._internalRoot=r}function _c(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function xc(t,e){if(e||(e=t?9===t.nodeType?t.documentElement:t.firstChild:null,e=!(!e||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new bc(t,0,e?{hydrate:!0}:void 0)}function wc(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var t=mc(a);s.call(t)}}vc(e,a,t,i)}else{if(o=n._reactRootContainer=xc(n,r),a=o._internalRoot,"function"===typeof i){var u=i;i=function(){var t=mc(a);u.call(t)}}Iu((function(){vc(e,a,t,i)}))}return mc(a)}function Ec(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ot,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function Sc(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!_c(e))throw Error(a(200));return Ec(t,e,null,n)}bc.prototype.render=function(t){vc(t,this._internalRoot,null,null)},bc.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;vc(null,t,null,(function(){e[Bn]=null}))},we=function(t){if(13===t.tag){var e=fo(wu(),150,100);Su(t,e),yc(t,e)}},Ee=function(t){13===t.tag&&(Su(t,3),yc(t,3))},Se=function(t){if(13===t.tag){var e=wu();e=Eu(e,t,null),Su(t,e),yc(t,e)}},k=function(t,e,n){switch(e){case"input":if(Pt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Gn(r);if(!i)throw Error(a(90));Ot(r),Pt(r,i)}}}break;case"textarea":zt(t,n);break;case"select":e=n.value,null!=e&&Nt(t,!!n.multiple,e,!1)}},D=Pu,N=function(t,e,n,r,i){var o=Qs;Qs|=4;try{return ao(98,t.bind(null,e,n,r,i))}finally{Qs=o,Qs===Vs&&co()}},j=function(){(Qs&(1|Gs|Hs))===Vs&&(Mu(),Wu())},F=function(t,e){var n=Qs;Qs|=2;try{return t(e)}finally{Qs=n,Qs===Vs&&co()}};var Cc={Events:[Vn,qn,Gn,O,S,Jn,function(t){fe(t,Kn)},L,R,sn,de,Wu,{current:!1}]};(function(t){var e=t.findFiberByHostInstance;tc(i({},t,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ce(t),null===t?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:Un,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cc,e.createPortal=Sc,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;if(void 0===e){if("function"===typeof t.render)throw Error(a(188));throw Error(a(268,Object.keys(t)))}return t=ce(e),t=null===t?null:t.stateNode,t},e.flushSync=function(t,e){if((Qs&(Gs|Hs))!==Vs)throw Error(a(187));var n=Qs;Qs|=1;try{return ao(99,t.bind(null,e))}finally{Qs=n,co()}},e.hydrate=function(t,e,n){if(!_c(e))throw Error(a(200));return wc(null,t,e,!0,n)},e.render=function(t,e,n){if(!_c(e))throw Error(a(200));return wc(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!_c(t))throw Error(a(40));return!!t._reactRootContainer&&(Iu((function(){wc(null,null,t,!1,(function(){t._reactRootContainer=null,t[Bn]=null}))})),!0)},e.unstable_batchedUpdates=Pu,e.unstable_createPortal=function(t,e){return Sc(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!_c(n))throw Error(a(200));if(null==t||void 0===t._reactInternalFiber)throw Error(a(38));return wc(t,e,n,!1,r)},e.version="16.14.0"},"pMf/":function(t,e,n){var r=n("2JD6"),i=n("7+LC"),o=n("9HG5"),a=n("Wp5u").NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,u=r.Int8Array;t.exports=!a||!i((function(){u(1)}))||!i((function(){new u(-1)}))||!o((function(t){new u,new u(null),new u(1.5),new u(t)}),!0)||i((function(){return 1!==new u(new s(2),1,void 0).length}))},pYMF:function(t,e,n){"use strict";n.r(e);var r=n("xwgP"),i=n.n(r),o=n("OS9G"),a=n("oSqR"),s=n("Rsk4"),u=i.a.memo(s["default"]["docs-draw_circle"].component);e["default"]=t=>(i.a.useEffect((()=>{var e;null!==t&&void 0!==t&&null!==(e=t.location)&&void 0!==e&&e.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(t.location.hash.slice(1)))}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"markdown"},i.a.createElement("h2",{id:"\u7ed8\u5236\u5706"},i.a.createElement(o["AnchorLink"],{to:"#\u7ed8\u5236\u5706","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"\u7ed8\u5236\u5706")),i.a.createElement(a["default"],s["default"]["docs-draw_circle"].previewerProps,i.a.createElement(u,null)))))},pYsg:function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("hXyk"),a=n("40mc"),s=n("YjHi"),u=n("Ji6T");r({target:"Map",proto:!0,real:!0,forced:i},{some:function(t){var e=o(this),n=s(e),r=a(t,arguments.length>1?arguments[1]:void 0,3);return u(n,(function(t,n){if(r(n,t,e))return u.stop()}),void 0,!0,!0).stopped}})},plIA:function(t,e,n){var r=n("cA8S"),i=n("ETkz");function o(t){return i(r(t).toLowerCase())}t.exports=o},plly:function(t,e,n){"use strict";var r=n("Hiyu"),i=n("JY8B"),o=n("NVMI"),a=n("2I03"),s=n("2RC6").f;r&&!("lastItem"in[])&&(s(Array.prototype,"lastItem",{configurable:!0,get:function(){var t=o(this),e=a(t.length);return 0==e?void 0:t[e-1]},set:function(t){var e=o(this),n=a(e.length);return e[0==n?0:n-1]=t}}),i("lastItem"))},prX3:function(t,e,n){var r=n("e+VF"),i=n("ar+g"),o=n("rGlR");function a(t){return r(t,o,i)}t.exports=a},pthC:function(t,e,n){"use strict";var r=n("HIsA"),i=n("0MLT"),o=n("uCRN");r({target:"Promise",stat:!0},{try:function(t){var e=i.f(this),n=o(t);return(n.error?e.reject:e.resolve)(n.value),e.promise}})},pxmn:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},q0Qw:function(t,e,n){var r=n("G4R5"),i=n("stff"),o=n("bWCM"),a=n("pxmn"),s=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=o(null)};s.prototype.get=function(t,e){return this[t]||(this[t]=e())},s.prototype.next=function(t,e,n){var o=n?this.objectsByIndex[t]||(this.objectsByIndex[t]=new i):this.primitives||(this.primitives=new r),a=o.get(e);return a||o.set(e,a=new s),a};var u=new s;t.exports=function(){var t,e,n=u,r=arguments.length;for(t=0;t<r;t++)a(e=arguments[t])&&(n=n.next(t,e,!0));if(this===Object&&n===u)throw TypeError("Composite keys must contain a non-primitive component");for(t=0;t<r;t++)a(e=arguments[t])||(n=n.next(t,e,!1));return n}},q3Pu:function(t,e,n){var r=n("HIsA"),i=n("icJ8"),o=n("hXyk"),a=i.toKey,s=i.set;r({target:"Reflect",stat:!0},{metadata:function(t,e){return function(n,r){s(t,e,o(n),a(r))}}})},q3YX:function(t){t.exports=JSON.parse('{"menus":{"en-US":{"*":[{"path":"/","title":"draw","meta":{"order":null}},{"path":"/start","title":"\u5feb\u901f\u4f7f\u7528","meta":{"order":1}},{"path":"/draw_control","title":"\u7ed8\u5236 UI \u7ec4\u4ef6","meta":{"order":2}},{"path":"/api","title":"\u7ed8\u5236\u5de5\u5177\u5b9e\u4f8b","meta":{"order":3}},{"title":"Demo","path":"/demo","meta":{},"children":[{"path":"/demo/draw_circle","title":"\u7ed8\u5236\u5706\u5f62","meta":{"order":3}},{"path":"/demo/draw_line","title":"\u7ed8\u5236\u6298\u7ebf\u56fe","meta":{"order":3}},{"path":"/demo/draw_polygon","title":"\u7ed8\u5236\u591a\u8fb9\u5f62","meta":{"order":3}},{"path":"/demo/edit_polygon","title":"\u591a\u8fb9\u5f62\u7f16\u8f91","meta":{"order":3}},{"path":"/demo/uicontrol","title":"\u4f7f\u7528UI\u7ed8\u5236\u7ec4\u4ef6","meta":{"order":5}},{"path":"/demo/control","title":"Control","meta":{}},{"path":"/demo/\u5706\u5f62\u5de5\u5177","title":"\u5706\u5f62\u5de5\u5177","meta":{}},{"path":"/demo/\u6846\u9009\u5de5\u5177","title":"\u6846\u9009\u5de5\u5177","meta":{}},{"path":"/demo/\u6d4b\u8ddd\u5de5\u5177","title":"\u6d4b\u8ddd\u5de5\u5177","meta":{}},{"path":"/demo/\u77e9\u5f62\u5de5\u5177","title":"\u77e9\u5f62\u5de5\u5177","meta":{}}]}]}},"locales":[{"name":"en-US","label":"English"}],"navs":{},"title":"L7Draw","logo":"https://gw.alipayobjects.com/mdn/rms_23a451/afts/img/A*GANRQqq6r2EAAAAAAAAAAAAAARQnAQ","mode":"doc","repository":{"url":"","branch":"master"},"theme":{}}')},q3Yw:function(t,e,n){(function(e){var n="Expected a function",r=NaN,i="[object Symbol]",o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt,l="object"==typeof e&&e&&e.Object===Object&&e,f="object"==typeof self&&self&&self.Object===Object&&self,p=l||f||Function("return this")(),h=Object.prototype,d=h.toString,v=Math.max,m=Math.min,g=function(){return p.Date.now()};function y(t,e,r){var i,o,a,s,u,c,l=0,f=!1,p=!1,h=!0;if("function"!=typeof t)throw new TypeError(n);function d(e){var n=i,r=o;return i=o=void 0,l=e,s=t.apply(r,n),s}function y(t){return l=t,u=setTimeout(w,e),f?d(t):s}function b(t){var n=t-c,r=t-l,i=e-n;return p?m(i,a-r):i}function x(t){var n=t-c,r=t-l;return void 0===c||n>=e||n<0||p&&r>=a}function w(){var t=g();if(x(t))return S(t);u=setTimeout(w,b(t))}function S(t){return u=void 0,h&&i?d(t):(i=o=void 0,s)}function C(){void 0!==u&&clearTimeout(u),l=0,i=c=o=u=void 0}function T(){return void 0===u?s:S(g())}function O(){var t=g(),n=x(t);if(i=arguments,o=this,c=t,n){if(void 0===u)return y(c);if(p)return u=setTimeout(w,e),d(c)}return void 0===u&&(u=setTimeout(w,e)),s}return e=E(e)||0,_(r)&&(f=!!r.leading,p="maxWait"in r,a=p?v(E(r.maxWait)||0,e):a,h="trailing"in r?!!r.trailing:h),O.cancel=C,O.flush=T,O}function b(t,e,r){var i=!0,o=!0;if("function"!=typeof t)throw new TypeError(n);return _(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),y(t,e,{leading:i,maxWait:e,trailing:o})}function _(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function x(t){return!!t&&"object"==typeof t}function w(t){return"symbol"==typeof t||x(t)&&d.call(t)==i}function E(t){if("number"==typeof t)return t;if(w(t))return r;if(_(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=_(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=s.test(t);return n||u.test(t)?c(t.slice(2),n?2:8):a.test(t)?r:+t}t.exports=b}).call(this,n("oN6F"))},"q5+0":function(t,e,n){"use strict";n.d(e,"a",(function(){return _})),n.d(e,"b",(function(){return w})),n.d(e,"c",(function(){return A})),n.d(e,"d",(function(){return R})),n.d(e,"e",(function(){return b})),n.d(e,"f",(function(){return U})),n.d(e,"g",(function(){return V})),n.d(e,"h",(function(){return y})),n.d(e,"i",(function(){return L})),n.d(e,"j",(function(){return H})),n.d(e,"k",(function(){return W})),n.d(e,"l",(function(){return X})),n.d(e,"m",(function(){return Z})),n.d(e,"n",(function(){return q}));var r=n("zUoc"),i=n("xwgP"),o=n.n(i),a=(n("EH+i"),n("HFu6")),s=n("9A8K"),u=n("AKk7"),c=n("M2Sr"),l=n("8idk"),f=n.n(l),p=(n("2kiq"),n("lkpF")),h=n("QIG3"),d=n.n(h),v=function(t){var e=Object(s["a"])();return e.displayName=t,e},m=v("Router-History"),g=function(t){var e=Object(s["a"])();return e.displayName=t,e},y=g("Router"),b=function(t){function e(e){var n;return n=t.call(this,e)||this,n.state={location:e.history.location},n._isMounted=!1,n._pendingLocation=null,e.staticContext||(n.unlisten=e.history.listen((function(t){n._isMounted?n.setState({location:t}):n._pendingLocation=t}))),n}Object(r["a"])(e,t),e.computeRootMatch=function(t){return{path:"/",url:"/",params:{},isExact:"/"===t}};var n=e.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.render=function(){return o.a.createElement(y.Provider,{value:{history:this.props.history,location:this.state.location,match:e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},o.a.createElement(m.Provider,{children:this.props.children||null,value:this.props.history}))},e}(o.a.Component);var _=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r))||this,e.history=Object(a["d"])(e.props),e}Object(r["a"])(e,t);var n=e.prototype;return n.render=function(){return o.a.createElement(b,{history:this.history,children:this.props.children})},e}(o.a.Component);var x=function(t){function e(){return t.apply(this,arguments)||this}Object(r["a"])(e,t);var n=e.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(t){this.props.onUpdate&&this.props.onUpdate.call(this,this,t)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},e}(o.a.Component);function w(t){var e=t.message,n=t.when,r=void 0===n||n;return o.a.createElement(y.Consumer,null,(function(t){if(t||Object(u["a"])(!1),!r||t.staticContext)return null;var n=t.history.block;return o.a.createElement(x,{onMount:function(t){t.release=n(e)},onUpdate:function(t,r){r.message!==e&&(t.release(),t.release=n(e))},onUnmount:function(t){t.release()},message:e})}))}var E={},S=1e4,C=0;function T(t){if(E[t])return E[t];var e=f.a.compile(t);return C<S&&(E[t]=e,C++),e}function O(t,e){return void 0===t&&(t="/"),void 0===e&&(e={}),"/"===t?t:T(t)(e,{pretty:!0})}function A(t){var e=t.computedMatch,n=t.to,r=t.push,i=void 0!==r&&r;return o.a.createElement(y.Consumer,null,(function(t){t||Object(u["a"])(!1);var r=t.history,s=t.staticContext,l=i?r.push:r.replace,f=Object(a["c"])(e?"string"===typeof n?O(n,e.params):Object(c["a"])({},n,{pathname:O(n.pathname,e.params)}):n);return s?(l(f),null):o.a.createElement(x,{onMount:function(){l(f)},onUpdate:function(t,e){var n=Object(a["c"])(e.to);Object(a["f"])(n,Object(c["a"])({},f,{key:n.key}))||l(f)},to:n})}))}var k={},M=1e4,P=0;function I(t,e){var n=""+e.end+e.strict+e.sensitive,r=k[n]||(k[n]={});if(r[t])return r[t];var i=[],o=f()(t,i,e),a={regexp:o,keys:i};return P<M&&(r[t]=a,P++),a}function L(t,e){void 0===e&&(e={}),("string"===typeof e||Array.isArray(e))&&(e={path:e});var n=e,r=n.path,i=n.exact,o=void 0!==i&&i,a=n.strict,s=void 0!==a&&a,u=n.sensitive,c=void 0!==u&&u,l=[].concat(r);return l.reduce((function(e,n){if(!n&&""!==n)return null;if(e)return e;var r=I(n,{end:o,strict:s,sensitive:c}),i=r.regexp,a=r.keys,u=i.exec(t);if(!u)return null;var l=u[0],f=u.slice(1),p=t===l;return o&&!p?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:p,params:a.reduce((function(t,e,n){return t[e.name]=f[n],t}),{})}}),null)}var R=function(t){function e(){return t.apply(this,arguments)||this}Object(r["a"])(e,t);var n=e.prototype;return n.render=function(){var t=this;return o.a.createElement(y.Consumer,null,(function(e){e||Object(u["a"])(!1);var n=t.props.location||e.location,r=t.props.computedMatch?t.props.computedMatch:t.props.path?L(n.pathname,t.props):e.match,i=Object(c["a"])({},e,{location:n,match:r}),a=t.props,s=a.children,l=a.component,f=a.render;return Array.isArray(s)&&0===s.length&&(s=null),o.a.createElement(y.Provider,{value:i},i.match?s?"function"===typeof s?s(i):s:l?o.a.createElement(l,i):f?f(i):null:"function"===typeof s?s(i):null)}))},e}(o.a.Component);function D(t){return"/"===t.charAt(0)?t:"/"+t}function N(t,e){return t?Object(c["a"])({},e,{pathname:D(t)+e.pathname}):e}function j(t,e){if(!t)return e;var n=D(t);return 0!==e.pathname.indexOf(n)?e:Object(c["a"])({},e,{pathname:e.pathname.substr(n.length)})}function F(t){return"string"===typeof t?t:Object(a["e"])(t)}function z(t){return function(){Object(u["a"])(!1)}}function B(){}var U=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r))||this,e.handlePush=function(t){return e.navigateTo(t,"PUSH")},e.handleReplace=function(t){return e.navigateTo(t,"REPLACE")},e.handleListen=function(){return B},e.handleBlock=function(){return B},e}Object(r["a"])(e,t);var n=e.prototype;return n.navigateTo=function(t,e){var n=this.props,r=n.basename,i=void 0===r?"":r,o=n.context,s=void 0===o?{}:o;s.action=e,s.location=N(i,Object(a["c"])(t)),s.url=F(s.location)},n.render=function(){var t=this.props,e=t.basename,n=void 0===e?"":e,r=t.context,i=void 0===r?{}:r,s=t.location,u=void 0===s?"/":s,l=Object(p["a"])(t,["basename","context","location"]),f={createHref:function(t){return D(n+F(t))},action:"POP",location:j(n,Object(a["c"])(u)),push:this.handlePush,replace:this.handleReplace,go:z("go"),goBack:z("goBack"),goForward:z("goForward"),listen:this.handleListen,block:this.handleBlock};return o.a.createElement(b,Object(c["a"])({},l,{history:f,staticContext:i}))},e}(o.a.Component);var V=function(t){function e(){return t.apply(this,arguments)||this}Object(r["a"])(e,t);var n=e.prototype;return n.render=function(){var t=this;return o.a.createElement(y.Consumer,null,(function(e){e||Object(u["a"])(!1);var n,r,i=t.props.location||e.location;return o.a.Children.forEach(t.props.children,(function(t){if(null==r&&o.a.isValidElement(t)){n=t;var a=t.props.path||t.props.from;r=a?L(i.pathname,Object(c["a"])({},t.props,{path:a})):e.match}})),r?o.a.cloneElement(n,{location:i,computedMatch:r}):null}))},e}(o.a.Component);function q(t){var e="withRouter("+(t.displayName||t.name)+")",n=function(e){var n=e.wrappedComponentRef,r=Object(p["a"])(e,["wrappedComponentRef"]);return o.a.createElement(y.Consumer,null,(function(e){return e||Object(u["a"])(!1),o.a.createElement(t,Object(c["a"])({},r,e,{ref:n}))}))};return n.displayName=e,n.WrappedComponent=t,d()(n,t)}var G=o.a.useContext;function H(){return G(m)}function W(){return G(y).location}function X(){var t=G(y).match;return t?t.params:{}}function Z(t){var e=W(),n=G(y).match;return t?L(e.pathname,t):n}},qDpf:function(t,e,n){var r=n("1agv"),i=n("pxmn"),o=n("+qhb"),a=n("2RC6").f,s=n("fotI"),u=n("ZL/h"),c=s("meta"),l=0,f=Object.isExtensible||function(){return!0},p=function(t){a(t,c,{value:{objectID:"O"+ ++l,weakData:{}}})},h=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,c)){if(!f(t))return"F";if(!e)return"E";p(t)}return t[c].objectID},d=function(t,e){if(!o(t,c)){if(!f(t))return!0;if(!e)return!1;p(t)}return t[c].weakData},v=function(t){return u&&m.REQUIRED&&f(t)&&!o(t,c)&&p(t),t},m=t.exports={REQUIRED:!1,fastKey:h,getWeakData:d,onFreeze:v};r[c]=!0},qFee:function(t,e,n){var r=n("QSfS"),i=n("JsUm"),o=n("lrSR"),a=n("+65X"),s=n("hQ/c"),u=n("DFjx");function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=i,c.prototype["delete"]=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=u,t.exports=c},qSJf:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.id=void 0;var r=0;function i(){return r++}e.id=i},qTrL:function(t,e){var n=800,r=16,i=Date.now;function o(t){var e=0,o=0;return function(){var a=i(),s=r-(a-o);if(o=a,s>0){if(++e>=n)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}t.exports=o},qTvU:function(t,e,n){var r=n("2PUN");function i(t){var e=null==t?0:t.length;return e?r(t,1):[]}t.exports=i},qV8l:function(t,e,n){"use strict";var r="Function.prototype.bind called on incompatible ",i=Array.prototype.slice,o=Object.prototype.toString,a="[object Function]";t.exports=function(t){var e=this;if("function"!==typeof e||o.call(e)!==a)throw new TypeError(r+e);for(var n,s=i.call(arguments,1),u=function(){if(this instanceof n){var r=e.apply(this,s.concat(i.call(arguments)));return Object(r)===r?r:this}return e.apply(t,s.concat(i.call(arguments)))},c=Math.max(0,e.length-s.length),l=[],f=0;f<c;f++)l.push("$"+f);if(n=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(u),e.prototype){var p=function(){};p.prototype=e.prototype,n.prototype=new p,p.prototype=null}return n}},qXgj:function(t,e,n){var r=n("IZ4i"),i=n("qTrL"),o=i(r);t.exports=o},qXph:function(t,e){function n(t,e){var n=-1,r=t.length;e||(e=Array(r));while(++n<r)e[n]=t[n];return e}t.exports=n},"qa/l":function(t,e,n){"use strict";var r=n("HIsA");r({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},qesp:function(t,e,n){"use strict";var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";t.exports=r},qgzk:function(t,e){function n(t,e){var n=-1,r=e.length,i=t.length;while(++n<r)t[i+n]=e[n];return t}t.exports=n},qhWv:function(t,e,n){var r=n("DFgS"),i=n("E5vS"),o=n("0Zv/"),a=NaN,s=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;function f(t){if("number"==typeof t)return t;if(o(t))return a;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=u.test(t);return n||c.test(t)?l(t.slice(2),n?2:8):s.test(t)?a:+t}t.exports=f},qmtO:function(t,e,n){var r=n("Hiyu"),i=n("73Ew"),o=n("OLna"),a=n("2hCa"),s=n("n2ef"),u=n("+qhb"),c=n("IDl8"),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=a(t),e=s(e,!0),c)try{return l(t,e)}catch(n){}if(u(t,e))return o(!i.f.call(t,e),t[e])}},qoFA:function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("hXyk"),a=n("40mc"),s=n("wKMT"),u=n("Ji6T");r({target:"Set",proto:!0,real:!0,forced:i},{every:function(t){var e=o(this),n=s(e),r=a(t,arguments.length>1?arguments[1]:void 0,3);return!u(n,(function(t){if(!r(t,t,e))return u.stop()}),void 0,!1,!0).stopped}})},qsB9:function(t,e,n){var r=n("HIsA"),i=Math.PI/180;r({target:"Math",stat:!0},{radians:function(t){return t*i}})},quZW:function(t,e,n){var r=n("wc5F"),i=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function o(t){return!!i&&i in t}t.exports=o},qwGt:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("xwgP"),i=n.n(r),o=i.a.createContext({})},qwYJ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Request=void 0;var r=n("qSJf"),i=function(){function t(t,e,n,i,o){this.id=r.id(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,r){var i=new t(e,this.parentContext,this,n,r);return this.childRequests.push(i),i},t}();e.Request=i},qya5:function(t,e,n){var r=n("QD/U");r("Array")},r4Zb:function(t,e,n){var r=n("2JD6"),i=n("Bktt"),o=n("oTOb"),a=n("D8FR"),s=n("kPvK"),u=s("iterator"),c=s("toStringTag"),l=o.values;for(var f in i){var p=r[f],h=p&&p.prototype;if(h){if(h[u]!==l)try{a(h,u,l)}catch(v){h[u]=l}if(h[c]||a(h,c,f),i[f])for(var d in o)if(h[d]!==o[d])try{a(h,d,o[d])}catch(v){h[d]=o[d]}}}},r5jq:function(t,e,n){"use strict";function r(){var t=n("xwgP");return r=function(){return t},t}function i(t,e){return c(t)||u(t,e)||a(t,e)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(t,e){if(t){if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function c(t){if(Array.isArray(t))return t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var l=function(t,e){var n=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r={};return Object.keys(e[1]).forEach((function(t){var n=(t.match(/^(.+)\.([^_]+)$/)||[]).slice(1),o=i(n,2),a=o[0],s=o[1];s&&s!==e[0]||(r[a||t]=e[1][t])})),r},o=(0,r().useState)(n(t,e)),a=i(o,2),s=a[0],u=a[1];return(0,r().useEffect)((function(){u(n(t,e))}),[t,e]),s};e["default"]=l},r73t:function(t,e,n){"use strict";var r=n("masK"),i=n("qDpf").getWeakData,o=n("hXyk"),a=n("pxmn"),s=n("xOST"),u=n("Ji6T"),c=n("Xf1w"),l=n("+qhb"),f=n("twJ5"),p=f.set,h=f.getterFor,d=c.find,v=c.findIndex,m=0,g=function(t){return t.frozen||(t.frozen=new y)},y=function(){this.entries=[]},b=function(t,e){return d(t.entries,(function(t){return t[0]===e}))};y.prototype={get:function(t){var e=b(this,t);if(e)return e[1]},has:function(t){return!!b(this,t)},set:function(t,e){var n=b(this,t);n?n[1]=e:this.entries.push([t,e])},delete:function(t){var e=v(this.entries,(function(e){return e[0]===t}));return~e&&this.entries.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,c){var f=t((function(t,r){s(t,f,e),p(t,{type:e,id:m++,frozen:void 0}),void 0!=r&&u(r,t[c],t,n)})),d=h(e),v=function(t,e,n){var r=d(t),a=i(o(e),!0);return!0===a?g(r).set(e,n):a[r.id]=n,t};return r(f.prototype,{delete:function(t){var e=d(this);if(!a(t))return!1;var n=i(t);return!0===n?g(e)["delete"](t):n&&l(n,e.id)&&delete n[e.id]},has:function(t){var e=d(this);if(!a(t))return!1;var n=i(t);return!0===n?g(e).has(t):n&&l(n,e.id)}}),r(f.prototype,n?{get:function(t){var e=d(this);if(a(t)){var n=i(t);return!0===n?g(e).get(t):n?n[e.id]:void 0}},set:function(t,e){return v(this,t,e)}}:{add:function(t){return v(this,t,!0)}}),f}}},"r9+l":function(t,e,n){var r=n("1EVt");function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}t.exports=i,t.exports["default"]=t.exports,t.exports.__esModule=!0},rGlR:function(t,e,n){var r=n("AZAf"),i=n("dVlX"),o=n("TIpG");function a(t){return o(t)?r(t,!0):i(t)}t.exports=a},rKDr:function(t,e,n){var r=n("HIsA"),i=n("NNlX"),o=n("icJ8"),a=n("hXyk"),s=n("kI7s"),u=n("Ji6T"),c=o.keys,l=o.toKey,f=function(t){var e=[];return u(t,e.push,e),e},p=function(t,e){var n=c(t,e),r=s(t);if(null===r)return n;var o=p(r,e);return o.length?n.length?f(new i(n.concat(o))):o:n};r({target:"Reflect",stat:!0},{getMetadataKeys:function(t){var e=arguments.length<2?void 0:l(arguments[1]);return p(a(t),e)}})},rLG7:function(t,e,n){"use strict";var r=n("HIsA"),i=n("Hiyu"),o=n("12fA"),a=n("NVMI"),s=n("n2ef"),u=n("kI7s"),c=n("qmtO").f;i&&r({target:"Object",proto:!0,forced:o},{__lookupSetter__:function(t){var e,n=a(this),r=s(t,!0);do{if(e=c(n,r))return e.set}while(n=u(n))}})},rMkn:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var r=n("9L8m"),i=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===r.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},t}();e.Metadata=i},rRIJ:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("Kjl2");function i(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}var o=n("EMO4"),a=n("XwWN");function s(t,e){return Object(r["a"])(t)||i(t,e)||Object(o["a"])(t,e)||Object(a["a"])()}},rUnK:function(t,e){function n(t){return this.__data__.has(t)}t.exports=n},rXtS:function(t,e,n){"use strict";var r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.target,r=void 0===n?document.body:n,i=document.createElement("textarea"),o=document.activeElement;i.value=t,i.setAttribute("readonly",""),i.style.contain="strict",i.style.position="absolute",i.style.left="-9999px",i.style.fontSize="12pt";var a=document.getSelection(),s=!1;a.rangeCount>0&&(s=a.getRangeAt(0)),r.append(i),i.select(),i.selectionStart=0,i.selectionEnd=t.length;var u=!1;try{u=document.execCommand("copy")}catch(c){}return i.remove(),s&&(a.removeAllRanges(),a.addRange(s)),o&&o.focus(),u};t.exports=r,t.exports["default"]=r},rZnw:function(t,e,n){"use strict";var r=n("5SLN"),i=n("KZbS"),o=n("Z+Xa"),a=r("%TypeError%"),s=r("%WeakMap%",!0),u=r("%Map%",!0),c=i("WeakMap.prototype.get",!0),l=i("WeakMap.prototype.set",!0),f=i("WeakMap.prototype.has",!0),p=i("Map.prototype.get",!0),h=i("Map.prototype.set",!0),d=i("Map.prototype.has",!0),v=function(t,e){for(var n,r=t;null!==(n=r.next);r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},m=function(t,e){var n=v(t,e);return n&&n.value},g=function(t,e,n){var r=v(t,e);r?r.value=n:t.next={key:e,next:t.next,value:n}},y=function(t,e){return!!v(t,e)};t.exports=function(){var t,e,n,r={assert:function(t){if(!r.has(t))throw new a("Side channel does not contain "+o(t))},get:function(r){if(s&&r&&("object"===typeof r||"function"===typeof r)){if(t)return c(t,r)}else if(u){if(e)return p(e,r)}else if(n)return m(n,r)},has:function(r){if(s&&r&&("object"===typeof r||"function"===typeof r)){if(t)return f(t,r)}else if(u){if(e)return d(e,r)}else if(n)return y(n,r);return!1},set:function(r,i){s&&r&&("object"===typeof r||"function"===typeof r)?(t||(t=new s),l(t,r,i)):u?(e||(e=new u),h(e,r,i)):(n||(n={key:{},next:null}),g(n,r,i))}};return r}},rcF6:function(t,e,n){var r=n("HIsA");r({target:"Math",stat:!0},{signbit:function(t){return(t=+t)==t&&0==t?1/t==-1/0:t<0}})},riWr:function(t,e,n){var r=n("2JD6"),i=n("pxmn"),o=r.document,a=i(o)&&i(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},sCLo:function(t,e,n){var r=n("l6nO");function i(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}t.exports=i},sDKr:function(t,e,n){var r=n("HIsA"),i=n("2JD6"),o=n("vYQ8"),a=!i.setImmediate||!i.clearImmediate;r({global:!0,bind:!0,enumerable:!0,forced:a},{setImmediate:o.set,clearImmediate:o.clear})},sMrD:function(t,e,n){var r=n("bVFb");r("replace")},sMtq:function(t,e,n){var r=n("3Jv6"),i=n("2Swa"),o="[object Arguments]";function a(t){return i(t)&&r(t)==o}t.exports=a},sTDl:function(t,e,n){"use strict";var r=n("HIsA"),i=n("Ra/9").includes,o=n("JY8B"),a=n("/5yA"),s=a("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:!s},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},sVUS:function(t,e,n){var r=n("gsbv"),i=r.Symbol;t.exports=i},shUE:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("xwgP"),i=n.n(r),o=n("2kiq");function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return i.a.Children.forEach(t,(function(t){(void 0!==t&&null!==t||e.keepEmpty)&&(Array.isArray(t)?n=n.concat(a(t)):Object(o["isFragment"])(t)&&t.props?n=n.concat(a(t.props.children,e)):n.push(t))})),n}},spfM:function(t,e){function n(t,e){var n=-1,r=null==t?0:t.length;while(++n<r)if(!1===e(t[n],n,t))break;return t}t.exports=n},sqIH:function(t,e,n){"use strict";n("41ra");var r=n("GUTS"),i=n("7+LC"),o=n("kPvK"),a=n("UTnC"),s=n("D8FR"),u=o("species"),c=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),l=function(){return"$0"==="a".replace(/./,"$0")}(),f=o("replace"),p=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),h=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,f){var d=o(t),v=!i((function(){var e={};return e[d]=function(){return 7},7!=""[t](e)})),m=v&&!i((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[u]=function(){return n},n.flags="",n[d]=/./[d]),n.exec=function(){return e=!0,null},n[d](""),!e}));if(!v||!m||"replace"===t&&(!c||!l||p)||"split"===t&&!h){var g=/./[d],y=n(d,""[t],(function(t,e,n,r,i){return e.exec===a?v&&!i?{done:!0,value:g.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}),b=y[0],_=y[1];r(String.prototype,t,b),r(RegExp.prototype,d,2==e?function(t,e){return _.call(t,this,e)}:function(t){return _.call(t,this)})}f&&s(RegExp.prototype[d],"sham",!0)}},stff:function(t,e,n){"use strict";var r,i=n("2JD6"),o=n("masK"),a=n("qDpf"),s=n("ghbW"),u=n("r73t"),c=n("pxmn"),l=n("twJ5").enforce,f=n("YE/S"),p=!i.ActiveXObject&&"ActiveXObject"in i,h=Object.isExtensible,d=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},v=t.exports=s("WeakMap",d,u);if(f&&p){r=u.getConstructor(d,"WeakMap",!0),a.REQUIRED=!0;var m=v.prototype,g=m["delete"],y=m.has,b=m.get,_=m.set;o(m,{delete:function(t){if(c(t)&&!h(t)){var e=l(this);return e.frozen||(e.frozen=new r),g.call(this,t)||e.frozen["delete"](t)}return g.call(this,t)},has:function(t){if(c(t)&&!h(t)){var e=l(this);return e.frozen||(e.frozen=new r),y.call(this,t)||e.frozen.has(t)}return y.call(this,t)},get:function(t){if(c(t)&&!h(t)){var e=l(this);return e.frozen||(e.frozen=new r),y.call(this,t)?b.call(this,t):e.frozen.get(t)}return b.call(this,t)},set:function(t,e){if(c(t)&&!h(t)){var n=l(this);n.frozen||(n.frozen=new r),y.call(this,t)?_.call(this,t,e):n.frozen.set(t,e)}else _.call(this,t,e);return this}})}},swOU:function(t,e,n){var r=n("sVUS"),i=n("VL8K"),o=n("+Gi7"),a=r?r.isConcatSpreadable:void 0;function s(t){return o(t)||i(t)||!!(a&&t&&t[a])}t.exports=s},szLl:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingToSyntax=void 0;var r=n("196R"),i=n("2+60"),o=n("lVYH"),a=n("uh8N"),s=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=i.BindingTypeEnum.Instance,this._binding.implementationType=t,new o.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if("function"!==typeof this._binding.serviceIdentifier)throw new Error(""+r.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=i.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=i.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new o.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=i.BindingTypeEnum.Constructor,this._binding.implementationType=t,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=t,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(t){if("function"!==typeof t)throw new Error(r.INVALID_FUNCTION_BINDING);var e=this.toConstantValue(t);return this._binding.type=i.BindingTypeEnum.Function,this._binding.scope=i.BindingScopeEnum.Singleton,e},t.prototype.toAutoFactory=function(t){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=function(e){var n=function(){return e.container.get(t)};return n},this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=i.BindingTypeEnum.Provider,this._binding.provider=t,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(t){this.toDynamicValue((function(e){return e.container.get(t)}))},t}();e.BindingToSyntax=s},szjD:function(t,e,n){var r=n("6tTE"),i=n("GPbW"),o=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},"t/TA":function(t,e){var n=Object.prototype,r=n.toString;function i(t){return r.call(t)}t.exports=i},t0cd:function(t,e,n){var r=n("2JD6"),i=n("wQ+q").trim,o=n("/Izz"),a=r.parseInt,s=/^[+-]?0[Xx]/,u=8!==a(o+"08")||22!==a(o+"0x16");t.exports=u?function(t,e){var n=i(String(t));return a(n,e>>>0||(s.test(n)?16:10))}:a},tB8F:function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"rootContainer",(function(){return p}));var i={};n.r(i),n.d(i,"rootContainer",(function(){return w}));n("892e"),n("ClHO"),n("oDub"),n("8rjF"),n("W6v+"),n("FLIr"),n("sMrD"),n("MOrU"),n("B7jn"),n("J6EZ"),n("tgv4"),n("idQS"),n("tPuD"),n("27OL"),n("I5Nx"),n("horb"),n("mODz"),n("sTDl"),n("7LRl"),n("oTOb"),n("auPx"),n("LuuT"),n("F4Qn"),n("8g5g"),n("CG2G"),n("d62z"),n("CNWJ"),n("qya5"),n("6mmk"),n("DnHg"),n("hv/N"),n("tyLZ"),n("PlQJ"),n("He07"),n("o9qH"),n("esEm"),n("G4R5"),n("Uadk"),n("9Vf9"),n("FT/y"),n("tpE2"),n("IKXP"),n("8Jzd"),n("/P+o"),n("nsiD"),n("wdlL"),n("nMhH"),n("v4S0"),n("o1AR"),n("rLG7"),n("4YzK"),n("1XUj"),n("7Q2v"),n("4Rd9"),n("+eKy"),n("OXHO"),n("xlmz"),n("hMKI"),n("NA9k"),n("HC6C"),n("NNlX"),n("FFjv"),n("kKrw"),n("9OO5"),n("knnx"),n("iY6v"),n("Xp9m"),n("nPP+"),n("DXpG"),n("uyFV"),n("bbTr"),n("ZPal"),n("hIhI"),n("trzq"),n("+4Yi"),n("H++4"),n("0Brq"),n("Qf+e"),n("gla0"),n("PR8p"),n("kRmj"),n("2Dhz"),n("zZgq"),n("8wsV"),n("GboX"),n("G7GF"),n("w7rW"),n("stff"),n("Gcgh"),n("gS7u"),n("dXt2"),n("plly"),n("iqln"),n("jiNi"),n("+noq"),n("S6jd"),n("o0xK"),n("V8i+"),n("5Au7"),n("jAXh"),n("Y22F"),n("Hx2v"),n("CWx7"),n("Tphk"),n("GP7J"),n("aNCL"),n("EC/F"),n("Hr9Q"),n("c2jp"),n("Y0Ny"),n("pYsg"),n("/p+0"),n("X260"),n("+3Ak"),n("h6PP"),n("PF9H"),n("D2hf"),n("Xwir"),n("L1c7"),n("Mi4E"),n("qsB9"),n("0Uim"),n("IU95"),n("rcF6"),n("cCpg"),n("+3y3"),n("+7Kl"),n("4e8G"),n("xUzk"),n("pthC"),n("SCzs"),n("UqPo"),n("2x2d"),n("rKDr"),n("bL85"),n("nufT"),n("H7G2"),n("DeDD"),n("q3Pu"),n("br1d"),n("9Ywa"),n("oFyO"),n("qoFA"),n("waKi"),n("kh0G"),n("zcJV"),n("vn/D"),n("mTX6"),n("3i2j"),n("7Kf9"),n("zM5O"),n("ZcxN"),n("IXhw"),n("iKoX"),n("R6vp"),n("mlmj"),n("XxnP"),n("FmLo"),n("lBFn"),n("+G+T"),n("HQcF"),n("aK5P"),n("Pj+0"),n("YAei"),n("v8az"),n("Xk3x"),n("g+uz"),n("EMzR"),n("3fYz"),n("JENe"),n("bG4S"),n("CLo7"),n("r4Zb"),n("sDKr"),n("u2e+"),n("8al2"),n("qa/l"),n("w3Dd"),n("tEmt");var o=n("bCY9"),a=n("xwgP"),s=n.n(a),u=n("9kvl"),c=n("OFkz"),l=n("I5X1");if("function"!==typeof l["a"])throw new Error("[plugin-initial-state]: useModel is not a function, @umijs/plugin-model is required.");var f=t=>{var e=t.children,n=Object(a["useRef"])(!1),r=u["b"].applyPlugins({key:"initialStateConfig",type:c["ApplyPluginsType"].modify,initialValue:{}})||{},i=Object(l["a"])("@@initialState")||{},o=i.loading,s=void 0!==o&&o;return Object(a["useEffect"])((()=>{s||(n.current=!0)}),[s]),s&&!n.current?r.loading||null:e};function p(t){return s.a.createElement(f,null,t)}var h=n("rRIJ"),d=()=>({loading:!1,refresh:()=>{}});class v{constructor(){this.callbacks={},this.data={},this.update=t=>{(this.callbacks[t]||[]).forEach((e=>{try{var n=this.data[t];e(n)}catch(r){e(void 0)}}))}}}var m=t=>{var e=t.hook,n=t.onUpdate,r=t.namespace,i=Object(a["useRef"])(n);i.current=n;var o,u=Object(a["useRef"])(!1);try{o=e()}catch(c){console.error("plugin-model: Invoking '".concat(r||"unknown","' model failed:"),c)}return Object(a["useMemo"])((()=>{i.current(o),u.current=!1}),[]),Object(a["useEffect"])((()=>{u.current?i.current(o):u.current=!0})),s.a.createElement(s.a.Fragment,null)},g=n("qwGt"),y={"@@initialState":d},b=new v,_=m,x=t=>{var e=t.children;return s.a.createElement(g["a"].Provider,{value:b},Object.entries(y).map((t=>s.a.createElement(_,{key:t[0],namespace:t[0],hook:t[1],onUpdate:e=>{var n=t,r=Object(h["a"])(n,1),i=r[0];b.data[i]=e,b.update(i)}}))),e)};function w(t){return s.a.createElement(x,null,t)}o["a"].register({apply:r,path:"../plugin-initial-state/runtime"}),o["a"].register({apply:i,path:"../plugin-model/runtime"});var E=n("FfOG"),S=n("TFir"),C=n.n(S),T=n("q5+0"),O=n("fK+4");n("M2Sr");function A(t,e,n){return void 0===n&&(n=[]),t.some((function(t){var r=t.path?Object(T["i"])(e,t):n.length?n[n.length-1].match:T["e"].computeRootMatch(e);return r&&(n.push({route:t,match:r}),t.routes&&A(t.routes,e,n)),r})),n}function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function P(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function I(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){P(o,r,i,a,s,"next",t)}function s(t){P(o,r,i,a,s,"throw",t)}a(void 0)}))}}function L(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R(){return R=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},R.apply(this,arguments)}function D(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function N(t,e){if(null==t)return{};var n,r,i=D(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function j(t,e){return F(t)||z(t,e)||B(t,e)||V()}function F(t){if(Array.isArray(t))return t}function z(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function B(t,e){if(t){if("string"===typeof t)return U(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(t,e):void 0}}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function V(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function q(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=B(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function G(t){return s.a.createElement(T["h"].Consumer,null,(function(e){var n=t.location||e.location,r=t.computedMatch,i=M(M({},e),{},{location:n,match:r}),o=t.render;return s.a.createElement(T["h"].Provider,{value:i},i.match?o(M(M({},t.layoutProps),i)):null)}))}var H=["children"];function W(t){return s.a.createElement(T["h"].Consumer,null,(function(e){var n,r=t.children,i=N(t,H),o=t.location||e.location,s=null;return a["Children"].forEach(r,(function(t){if(null===s&&Object(a["isValidElement"])(t)){n=t;var r=t.props.path||t.props.from;s=r?Object(T["i"])(o.pathname,M(M({},t.props),{},{path:r})):e.match}})),s?Object(a["cloneElement"])(n,{location:o,computedMatch:s,layoutProps:i}):null}))}var X=["component"];function Z(t,e){t.component;var n=N(t,X),r=t.component;function i(i){var o=Object(a["useState"])((function(){return window.g_initialProps})),u=j(o,2),l=u[0],f=u[1];return Object(a["useEffect"])((function(){var o=function(){var o=I(C.a.mark((function o(){var a,s,u,l,p;return C.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(s=r,!r.preload){o.next=6;break}return o.next=4,r.preload();case 4:s=o.sent,s=s["default"]||s;case 6:if(u=M(M({isServer:!1,match:null===i||void 0===i?void 0:i.match,history:null===i||void 0===i?void 0:i.history,route:t},e.getInitialPropsCtx||{}),n),!(null===(a=s)||void 0===a?void 0:a.getInitialProps)){o.next=15;break}return o.next=10,e.plugin.applyPlugins({key:"ssr.modifyGetInitialPropsCtx",type:c["ApplyPluginsType"].modify,initialValue:u,async:!0});case 10:return l=o.sent,o.next=13,s.getInitialProps(l||u);case 13:p=o.sent,f(p);case 15:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}();window.g_initialProps||o()}),[window.location.pathname,window.location.search]),s.a.createElement(r,R({},i,l))}return i.wrapInitialPropsLoaded=!0,i.displayName="ComponentWithInitialPropsFetch",i}function Y(t){var e=t.route,n=t.opts,r=t.props,i=J(M(M({},n),{},{routes:e.routes||[],rootRoutes:n.rootRoutes}),{location:r.location}),o=e.component,u=e.wrappers;if(o){var c=n.isServer?{}:window.g_initialProps,l=M(M(M(M({},r),n.extraProps),n.pageInitialProps||c),{},{route:e,routes:n.rootRoutes}),f=s.a.createElement(o,l,i);if(u){var p=u.length-1;while(p>=0)f=Object(a["createElement"])(u[p],l,f),p-=1}return f}return i}function K(t){var e,n,r,i=t.route,o=t.index,a=t.opts,u={key:i.key||o,exact:i.exact,strict:i.strict,sensitive:i.sensitive,path:i.path};return i.redirect?s.a.createElement(T["c"],R({},u,{from:i.path,to:i.redirect})):(!a.ssrProps||a.isServer||(null===(e=i.component)||void 0===e?void 0:e.wrapInitialPropsLoaded)||!(null===(n=i.component)||void 0===n?void 0:n.getInitialProps)&&!(null===(r=i.component)||void 0===r?void 0:r.preload)||(i.component=Z(i,a)),s.a.createElement(G,R({},u,{render:function(t){return Y({route:i,opts:a,props:t})}})))}function J(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.routes?s.a.createElement(W,e,t.routes.map((function(e,n){return K({route:e,index:n,opts:M(M({},t),{},{rootRoutes:t.rootRoutes||t.routes})})}))):null}var Q=["history"];function $(t){var e=t.history,n=N(t,Q);return Object(a["useEffect"])((function(){function r(e,r){var i=A(t.routes,e.pathname);"undefined"!==typeof document&&void 0!==n.defaultTitle&&(document.title=i.length&&i[i.length-1].route.title||n.defaultTitle||""),t.plugin.applyPlugins({key:"onRouteChange",type:c["ApplyPluginsType"].event,args:{routes:t.routes,matchedRoutes:i,location:e,action:r}})}return window.g_useSSR&&(window.g_initialProps=null),r(e.location,"POP"),e.listen(r)}),[e]),s.a.createElement(T["e"],{history:e},J(n))}function tt(t){return et.apply(this,arguments)}function et(){return et=I(C.a.mark((function t(e){var n,r,i,o,a,s,u,c,l=arguments;return C.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=l.length>1&&void 0!==l[1]?l[1]:window.location.pathname,r=A(e,n),i=q(r),t.prev=3,i.s();case 5:if((o=i.n()).done){t.next=19;break}if(s=o.value,u=s.route,"string"===typeof u.component||!(null===(a=u.component)||void 0===a?void 0:a.preload)){t.next=13;break}return t.next=11,u.component.preload();case 11:c=t.sent,u.component=c["default"]||c;case 13:if(!u.routes){t.next=17;break}return t.next=16,tt(u.routes,n);case 16:u.routes=t.sent;case 17:t.next=5;break;case 19:t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](3),i.e(t.t0);case 24:return t.prev=24,i.f(),t.finish(24);case 27:return t.abrupt("return",e);case 28:case"end":return t.stop()}}),t,null,[[3,21,24,27]])}))),et.apply(this,arguments)}function nt(t){var e=t.plugin.applyPlugins({type:c["ApplyPluginsType"].modify,key:"rootContainer",initialValue:s.a.createElement($,{history:t.history,routes:t.routes,plugin:t.plugin,ssrProps:t.ssrProps,defaultTitle:t.defaultTitle}),args:{history:t.history,routes:t.routes,plugin:t.plugin}});if(!t.rootElement)return e;var n="string"===typeof t.rootElement?document.getElementById(t.rootElement):t.rootElement,r=t.callback||function(){};window.g_useSSR?t.dynamicImport?tt(t.routes).then((function(){Object(O["hydrate"])(e,n,r)})):Object(O["hydrate"])(e,n,r):Object(O["render"])(e,n,r)}function rt(){var t=[{path:"/~demos/:uuid",layout:!1,wrappers:[n("HZYV").default],component:t=>{var e=n("JuhJ"),r=e.default,i=n("oSqR"),o=i.default,a=n("Rsk4"),u=a.default,c=n("OS9G"),l=c.usePrefersColor,f=r(t,u);switch(l(),f.length){case 1:return f[0];case 2:return s.a.createElement(o,f[0],f[1]);default:return"Demo ".concat(t.match.params.uuid," not found :(")}}},{path:"/_demos/:uuid",redirect:"/~demos/:uuid"},{__dumiRoot:!0,layout:!1,path:"/",wrappers:[n("HZYV").default,n("jQ8X").default],routes:[{path:"/",component:n("gql7").default,exact:!0,meta:{locale:"en-US",order:null,filePath:"README.md",updatedTime:1637057057e3,componentName:"L7-draw",slugs:[{depth:1,value:"draw",heading:"draw"},{depth:1,value:"API",heading:"api"},{depth:2,value:"Getting Started",heading:"getting-started"}],title:"draw"},title:"draw"},{path:"/api",component:n("Biry").default,exact:!0,meta:{filePath:"docs/api.zh.md",updatedTime:1637057057e3,title:"\u7ed8\u5236\u5de5\u5177\u5b9e\u4f8b",order:3,slugs:[{depth:3,value:"Draw Type",heading:"draw-type"},{depth:4,value:"DrawCircle",heading:"drawcircle"},{depth:4,value:"DrawRect",heading:"drawrect"},{depth:4,value:"DrawLine",heading:"drawline"},{depth:4,value:"DrawPoint",heading:"drawpoint"},{depth:4,value:"DrawPolygon",heading:"drawpolygon"},{depth:4,value:"DrawRuler",heading:"drawruler"},{depth:3,value:"DrawBoxSelect \u6846\u9009\u5de5\u5177",heading:"drawboxselect-\u6846\u9009\u5de5\u5177"},{depth:3,value:"\u914d\u7f6e\u9879 DrawOption",heading:"\u914d\u7f6e\u9879-drawoption"},{depth:3,value:"\u5c5e\u6027",heading:"\u5c5e\u6027"},{depth:4,value:"drawStatus",heading:"drawstatus"},{depth:3,value:"\u65b9\u6cd5",heading:"\u65b9\u6cd5"},{depth:4,value:"enable",heading:"enable"},{depth:4,value:"disable",heading:"disable"},{depth:4,value:"removeLatestVertex",heading:"removelatestvertex"},{depth:3,value:"restData",heading:"restdata"},{depth:4,value:"resetDraw",heading:"resetdraw"},{depth:3,value:"\u4e8b\u4ef6",heading:"\u4e8b\u4ef6"},{depth:3,value:"draw.modechange",heading:"drawmodechange"},{depth:4,value:"draw.create",heading:"drawcreate"},{depth:4,value:"draw.delete",heading:"drawdelete"},{depth:4,value:"draw.update",heading:"drawupdate"},{depth:4,value:"draw.boxselect",heading:"drawboxselect"}]},title:"\u7ed8\u5236\u5de5\u5177\u5b9e\u4f8b"},{path:"/draw_control",component:n("F73V").default,exact:!0,meta:{filePath:"docs/draw_control.zh.md",updatedTime:1636622585e3,title:"\u7ed8\u5236 UI \u7ec4\u4ef6",order:2,slugs:[{depth:3,value:"\u53c2\u6570",heading:"\u53c2\u6570"},{depth:4,value:"scene",heading:"scene"},{depth:4,value:"options",heading:"options"},{depth:3,value:"\u6dfb\u52a0\u5230\u5730\u56fe",heading:"\u6dfb\u52a0\u5230\u5730\u56fe"},{depth:3,value:"\u4ece\u5730\u56fe\u4e2d\u79fb\u9664",heading:"\u4ece\u5730\u56fe\u4e2d\u79fb\u9664"},{depth:2,value:"\u65b9\u6cd5",heading:"\u65b9\u6cd5"},{depth:3,value:"getDraw(type)",heading:"getdrawtype"},{depth:3,value:"getAllData()",heading:"getalldata"},{depth:3,value:"removeAllData()",heading:"removealldata"},{depth:3,value:"\u4e8b\u4ef6",heading:"\u4e8b\u4ef6"},{depth:4,value:"draw.create",heading:"drawcreate"},{depth:4,value:"draw.delete",heading:"drawdelete"},{depth:4,value:"draw.update",heading:"drawupdate"},{depth:4,value:"draw.boxselect",heading:"drawboxselect"},{depth:3,value:"style",heading:"style"},{depth:2,value:"demo",heading:"demo"}]},title:"\u7ed8\u5236 UI \u7ec4\u4ef6"},{path:"/start",component:n("K6Lp").default,exact:!0,meta:{filePath:"docs/start.en.md",updatedTime:1629359826e3,title:"QuickStart",order:1,slugs:[{depth:1,value:"\u4f7f\u7528",heading:"\u4f7f\u7528"},{depth:2,value:"\u5b9e\u4f8b\u5316",heading:"\u5b9e\u4f8b\u5316"}]},title:"QuickStart"},{path:"/start",component:n("mTN9").default,exact:!0,meta:{filePath:"docs/start.zh.md",updatedTime:1599738307e3,title:"\u5feb\u901f\u4f7f\u7528",order:1,slugs:[{depth:1,value:"\u4f7f\u7528",heading:"\u4f7f\u7528"},{depth:2,value:"\u5b9e\u4f8b\u5316",heading:"\u5b9e\u4f8b\u5316"}]},title:"\u5feb\u901f\u4f7f\u7528"},{path:"/demo/control",component:n("4OQw").default,exact:!0,meta:{filePath:"docs/demo/control.md",updatedTime:1606726687e3,slugs:[],group:{path:"/demo",title:"Demo"},title:"Control"},title:"Control"},{path:"/demo/draw_circle",component:n("pYMF").default,exact:!0,meta:{filePath:"docs/demo/draw_circle.md",updatedTime:1627277495e3,title:"\u7ed8\u5236\u5706\u5f62",order:3,slugs:[{depth:2,value:"\u7ed8\u5236\u5706",heading:"\u7ed8\u5236\u5706"}],group:{path:"/demo",title:"Demo"}},title:"\u7ed8\u5236\u5706\u5f62"},{path:"/demo/draw_line",component:n("KM8y").default,exact:!0,meta:{filePath:"docs/demo/draw_line.md",updatedTime:1627277495e3,title:"\u7ed8\u5236\u6298\u7ebf\u56fe",order:3,slugs:[{depth:2,value:"\u6298\u7ebf\u56fe",heading:"\u6298\u7ebf\u56fe"}],group:{path:"/demo",title:"Demo"}},title:"\u7ed8\u5236\u6298\u7ebf\u56fe"},{path:"/demo/draw_polygon",component:n("VGuf").default,exact:!0,meta:{filePath:"docs/demo/draw_polygon.md",updatedTime:1637057057e3,title:"\u7ed8\u5236\u591a\u8fb9\u5f62",order:3,slugs:[{depth:2,value:"\u7ed8\u5236\u9762",heading:"\u7ed8\u5236\u9762"}],group:{path:"/demo",title:"Demo"}},title:"\u7ed8\u5236\u591a\u8fb9\u5f62"},{path:"/demo/edit_polygon",component:n("T12o").default,exact:!0,meta:{filePath:"docs/demo/edit_polygon.md",updatedTime:1637057057e3,title:"\u591a\u8fb9\u5f62\u7f16\u8f91",order:3,slugs:[],group:{path:"/demo",title:"Demo"}},title:"\u591a\u8fb9\u5f62\u7f16\u8f91"},{path:"/demo/uicontrol",component:n("ZljA").default,exact:!0,meta:{filePath:"docs/demo/uicontrol.md",updatedTime:1637057057e3,title:"\u4f7f\u7528UI\u7ed8\u5236\u7ec4\u4ef6",order:5,slugs:[],group:{path:"/demo",title:"Demo"}},title:"\u4f7f\u7528UI\u7ed8\u5236\u7ec4\u4ef6"},{path:"/demo/\u5706\u5f62\u5de5\u5177",component:n("gUF3").default,exact:!0,meta:{filePath:"docs/demo/\u5706\u5f62\u5de5\u5177.md",updatedTime:1636684245e3,slugs:[{depth:3,value:"\u5706\u5f62\u5de5\u5177",heading:"\u5706\u5f62\u5de5\u5177"},{depth:3,value:"\u901a\u8fc7 UI \u7ec4\u4ef6\u521d\u59cb\u5316",heading:"\u901a\u8fc7-ui-\u7ec4\u4ef6\u521d\u59cb\u5316"},{depth:3,value:"\u7ed8\u5236\u7ec4\u4ef6\u521d\u59cb\u5316",heading:"\u7ed8\u5236\u7ec4\u4ef6\u521d\u59cb\u5316"}],title:"\u5706\u5f62\u5de5\u5177",group:{path:"/demo",title:"Demo"}},title:"\u5706\u5f62\u5de5\u5177"},{path:"/demo/\u6846\u9009\u5de5\u5177",component:n("eI1U").default,exact:!0,meta:{filePath:"docs/demo/\u6846\u9009\u5de5\u5177.md",updatedTime:1636684245e3,slugs:[{depth:2,value:"\u6846\u9009\u5de5\u5177",heading:"\u6846\u9009\u5de5\u5177"},{depth:3,value:"\u901a\u8fc7 UI \u7ec4\u4ef6\u521d\u59cb\u5316",heading:"\u901a\u8fc7-ui-\u7ec4\u4ef6\u521d\u59cb\u5316"},{depth:3,value:"\u7ed8\u5236\u7ec4\u4ef6\u521d\u59cb\u5316",heading:"\u7ed8\u5236\u7ec4\u4ef6\u521d\u59cb\u5316"}],title:"\u6846\u9009\u5de5\u5177",group:{path:"/demo",title:"Demo"}},title:"\u6846\u9009\u5de5\u5177"},{path:"/demo/\u6d4b\u8ddd\u5de5\u5177",component:n("Y3bS").default,exact:!0,meta:{filePath:"docs/demo/\u6d4b\u8ddd\u5de5\u5177.md",updatedTime:1636684245e3,slugs:[{depth:3,value:"\u6d4b\u8ddd\u5de5\u5177",heading:"\u6d4b\u8ddd\u5de5\u5177"},{depth:3,value:"\u901a\u8fc7 UI \u7ec4\u4ef6\u521d\u59cb\u5316",heading:"\u901a\u8fc7-ui-\u7ec4\u4ef6\u521d\u59cb\u5316"},{depth:3,value:"\u7ed8\u5236\u7ec4\u4ef6\u521d\u59cb\u5316",heading:"\u7ed8\u5236\u7ec4\u4ef6\u521d\u59cb\u5316"}],title:"\u6d4b\u8ddd\u5de5\u5177",group:{path:"/demo",title:"Demo"}},title:"\u6d4b\u8ddd\u5de5\u5177"},{path:"/demo/\u77e9\u5f62\u5de5\u5177",component:n("FHK7").default,exact:!0,meta:{filePath:"docs/demo/\u77e9\u5f62\u5de5\u5177.md",updatedTime:1637057188e3,slugs:[{depth:3,value:"\u77e9\u5f62\u5de5\u5177",heading:"\u77e9\u5f62\u5de5\u5177"},{depth:3,value:"\u901a\u8fc7 UI \u7ec4\u4ef6\u521d\u59cb\u5316",heading:"\u901a\u8fc7-ui-\u7ec4\u4ef6\u521d\u59cb\u5316"},{depth:3,value:"\u7ed8\u5236\u7ec4\u4ef6\u521d\u59cb\u5316",heading:"\u7ed8\u5236\u7ec4\u4ef6\u521d\u59cb\u5316"}],title:"\u77e9\u5f62\u5de5\u5177",group:{path:"/demo",title:"Demo"}},title:"\u77e9\u5f62\u5de5\u5177"},{path:"/demo",meta:{},exact:!0,redirect:"/demo/draw_circle"}],title:"L7Draw",component:t=>t.children}];return o["a"].applyPlugins({key:"patchRoutes",type:c["ApplyPluginsType"].event,args:{routes:t}}),t}var it=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].applyPlugins({key:"render",type:c["ApplyPluginsType"].compose,initialValue:()=>{var e=o["a"].applyPlugins({key:"modifyClientRenderOpts",type:c["ApplyPluginsType"].modify,initialValue:{routes:t.routes||rt(),plugin:o["a"],history:Object(E["a"])(t.hot),isServer:Object({NODE_ENV:"production"}).__IS_SERVER,rootElement:"root",defaultTitle:"L7Draw"}});return nt(e)},args:t})},ot=it();e["default"]=ot();window.g_umi={version:"3.5.17"}},tEmt:function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n,r){var i=e&&e.prototype instanceof v?e:v,o=Object.create(i.prototype),a=new A(r||[]);return o._invoke=S(t,n,a),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}t.wrap=u;var l="suspendedStart",f="suspendedYield",p="executing",h="completed",d={};function v(){}function m(){}function g(){}var y={};y[o]=function(){return this};var b=Object.getPrototypeOf,_=b&&b(b(k([])));_&&_!==n&&r.call(_,o)&&(y=_);var x=g.prototype=v.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function E(t,e){function n(i,o,a,s){var u=c(t[i],t,o);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"===typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;function o(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}this._invoke=o}function S(t,e,n){var r=l;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw o;return M()}n.method=i,n.arg=o;while(1){var a=n.delegate;if(a){var s=C(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=c(t,e,n);if("normal"===u.type){if(r=n.done?h:f,u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=h,n.method="throw",n.arg=u.arg)}}}function C(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator["return"]&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method))return d;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=c(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,d;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,d):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function k(t){if(t){var n=t[o];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){while(++i<t.length)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:M}}function M(){return{value:e,done:!0}}return m.prototype=x.constructor=g,g.constructor=m,g[s]=m.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},w(E.prototype),E.prototype[a]=function(){return this},t.AsyncIterator=E,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new E(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(x),x[s]="Generator",x[o]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=k,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),d}},t}(t.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},tGsd:function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},tIv8:function(t,e,n){var r=n("ADQb"),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=i},tMVM:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingCount=void 0;var r={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};e.BindingCount=r},tPuD:function(t,e,n){"use strict";var r=n("HIsA"),i=n("7+LC"),o=n("dOdC"),a=n("pxmn"),s=n("NVMI"),u=n("2I03"),c=n("G70G"),l=n("HKEF"),f=n("HqdE"),p=n("kPvK"),h=n("9ZTU"),d=p("isConcatSpreadable"),v=9007199254740991,m="Maximum allowed index exceeded",g=h>=51||!i((function(){var t=[];return t[d]=!1,t.concat()[0]!==t})),y=f("concat"),b=function(t){if(!a(t))return!1;var e=t[d];return void 0!==e?!!e:o(t)},_=!g||!y;r({target:"Array",proto:!0,forced:_},{concat:function(t){var e,n,r,i,o,a=s(this),f=l(a,0),p=0;for(e=-1,r=arguments.length;e<r;e++)if(o=-1===e?a:arguments[e],b(o)){if(i=u(o.length),p+i>v)throw TypeError(m);for(n=0;n<i;n++,p++)n in o&&c(f,p,o[n])}else{if(p>=v)throw TypeError(m);c(f,p++,o)}return f.length=p,f}})},tST3:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("0aPf");function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var o=n("m5dl");function a(t){var e=i();return function(){var n,i=Object(r["a"])(t);if(e){var a=Object(r["a"])(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return Object(o["a"])(this,n)}}},tWq2:function(t,e,n){var r=n("eoOI");function i(t){var e=r(this,t)["delete"](t);return this.size-=e?1:0,e}t.exports=i},"tg/3":function(t,e,n){var r=n("KpHK"),i=n("mAbK"),o=n("kPvK"),a=o("iterator");t.exports=function(t){if(void 0!=t)return t[a]||t["@@iterator"]||i[r(t)]}},tgv4:function(t,e,n){var r=n("bVFb");r("toPrimitive")},tijT:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("Xrqc"),i=n.n(r);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={top:0,right:0,bottom:0,left:0};if("number"===typeof t)return{top:t,right:t,bottom:t,left:t};if(Array.isArray(t)){if(4===t.length)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(2===t.length)return{top:t[0],right:t[1],bottom:t[0],left:t[1]}}return a(a({},e),t)}},tjpL:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.inject=e.LazyServiceIdentifer=void 0;var r=n("196R"),i=n("9L8m"),o=n("rMkn"),a=n("ZLnY"),s=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}();function u(t){return function(e,n,s){if(void 0===t)throw new Error(r.UNDEFINED_INJECT_ANNOTATION(e.name));var u=new o.Metadata(i.INJECT_TAG,t);"number"===typeof s?a.tagParameter(e,n,s,u):a.tagProperty(e,n,u)}}e.LazyServiceIdentifer=s,e.inject=u},tmP0:function(t,e,n){var r=n("9sv9"),i=n("a1Mx"),o=n("rUnK");function a(t){var e=-1,n=null==t?0:t.length;this.__data__=new r;while(++e<n)this.add(t[e])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,t.exports=a},tpE2:function(t,e,n){var r=n("HIsA"),i=n("hLNC");r({target:"Number",stat:!0,forced:Number.parseFloat!=i},{parseFloat:i})},tqfL:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Plan=void 0;var r=function(){function t(t,e){this.parentContext=t,this.rootRequest=e}return t}();e.Plan=r},tqoU:function(t,e){function n(t,e,n){var r=n-1,i=t.length;while(++r<i)if(t[r]===e)return r;return-1}t.exports=n},trzq:function(t,e,n){var r=n("JqKL");r("Float32",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},twJ5:function(t,e,n){var r,i,o,a=n("YE/S"),s=n("2JD6"),u=n("pxmn"),c=n("D8FR"),l=n("+qhb"),f=n("fbKl"),p=n("1agv"),h=s.WeakMap,d=function(t){return o(t)?i(t):r(t,{})},v=function(t){return function(e){var n;if(!u(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}};if(a){var m=new h,g=m.get,y=m.has,b=m.set;r=function(t,e){return b.call(m,t,e),e},i=function(t){return g.call(m,t)||{}},o=function(t){return y.call(m,t)}}else{var _=f("state");p[_]=!0,r=function(t,e){return c(t,_,e),e},i=function(t){return l(t,_)?t[_]:{}},o=function(t){return l(t,_)}}t.exports={set:r,get:i,has:o,enforce:d,getterFor:v}},txMq:function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},tyLZ:function(t,e,n){"use strict";var r=n("HIsA"),i=n("2JD6"),o=n("HC6f"),a=n("QD/U"),s="ArrayBuffer",u=o[s],c=i[s];r({global:!0,forced:c!==u},{ArrayBuffer:u}),a(s)},"u2e+":function(t,e,n){var r=n("HIsA"),i=n("2JD6"),o=n("I67C"),a=n("IRht"),s=i.process,u="process"==a(s);r({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(t){var e=u&&s.domain;o(e?e.bind(t):t)}})},u6QS:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.named=void 0;var r=n("9L8m"),i=n("rMkn"),o=n("ZLnY");function a(t){return function(e,n,a){var s=new i.Metadata(r.NAMED_TAG,t);"number"===typeof a?o.tagParameter(e,n,a,s):o.tagProperty(e,n,s)}}e.named=a},uCRN:function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}},uMeh:function(t,e,n){"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}n.d(e,"a",(function(){return r}))},uSfk:function(t,e){function n(t,e,n){var r=-1,i=null==t?0:t.length;while(++r<i)if(n(e,t[r]))return!0;return!1}t.exports=n},uT4L:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=e.LinkWrapper=void 0;var r=a(n("xwgP")),i=n("OFkz"),o=["to"];function a(t){return t&&t.__esModule?t:{default:t}}function s(){return s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s.apply(this,arguments)}function u(t,e){if(null==t)return{};var n,r,i=c(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function c(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}var l=function(t){return function(e){var n=e.to,i=u(e,o),a=/^(\w+:)?\/\//.test(n)||!n,c=r["default"].isValidElement(i.children);return r["default"].createElement(t,s({to:n||"",component:a?function(){return r["default"].createElement("a",{target:"_blank",rel:"noopener noreferrer",href:n},i.children,n&&!c&&r["default"].createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15",className:"__dumi-default-external-link-icon"},r["default"].createElement("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),r["default"].createElement("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})))}:void 0},i,a?{}:{onClick:function(){var t;window.scrollTo({top:0});for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];null===(t=i.onClick)||void 0===t||t.apply(this,n)}}))}};e.LinkWrapper=l;var f=l(i.Link);e["default"]=f},"ubI+":function(t,e){var n="\\ud800-\\udfff",r="\\u0300-\\u036f",i="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",a=r+i+o,s="\\ufe0e\\ufe0f",u="["+n+"]",c="["+a+"]",l="\\ud83c[\\udffb-\\udfff]",f="(?:"+c+"|"+l+")",p="[^"+n+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",v="\\u200d",m=f+"?",g="["+s+"]?",y="(?:"+v+"(?:"+[p,h,d].join("|")+")"+g+m+")*",b=g+m+y,_="(?:"+[p+c+"?",c,h,d,u].join("|")+")",x=RegExp(l+"(?="+l+")|"+_+b,"g");function w(t){return t.match(x)||[]}t.exports=w},uh8N:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenOnSyntax=void 0;var r=n("zN6Y"),i=n("ITfU"),o=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingWhenOnSyntax=o},uyFV:function(t,e,n){"use strict";var r=n("HIsA"),i=n("qmtO").f,o=n("2I03"),a=n("B6LR"),s=n("JzK+"),u=n("eD14"),c=n("m52V"),l="".startsWith,f=Math.min,p=u("startsWith"),h=!c&&!p&&!!function(){var t=i(String.prototype,"startsWith");return t&&!t.writable}();r({target:"String",proto:!0,forced:!h&&!p},{startsWith:function(t){var e=String(s(this));a(t);var n=o(f(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return l?l.call(e,r,n):e.slice(n,n+r.length)===r}})},v4S0:function(t,e,n){var r=n("HIsA"),i=n("Hiyu"),o=n("jUTB"),a=n("2hCa"),s=n("qmtO"),u=n("G70G");r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){var e,n,r=a(t),i=s.f,c=o(r),l={},f=0;while(c.length>f)n=i(r,e=c[f++]),void 0!==n&&u(l,e,n);return l}})},v8az:function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("LTDN");r({target:"WeakMap",proto:!0,real:!0,forced:i},{deleteAll:function(){return o.apply(this,arguments)}})},vAUc:function(t,e,n){"use strict";n.d(e,"b",(function(){return x})),n.d(e,"a",(function(){return w}));var r=n("M2Sr"),i=n("xwgP"),o=n("FpZt"),a=n("jK+o"),s=n.n(a),u=n("VaST"),c=function(){var t=i["useContext"](x),e=t.getPrefixCls,n=e("empty-img-default");return i["createElement"]("svg",{className:n,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},i["createElement"]("g",{fill:"none",fillRule:"evenodd"},i["createElement"]("g",{transform:"translate(24 31.67)"},i["createElement"]("ellipse",{className:"".concat(n,"-ellipse"),cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),i["createElement"]("path",{className:"".concat(n,"-path-1"),d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),i["createElement"]("path",{className:"".concat(n,"-path-2"),d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",transform:"translate(13.56)"}),i["createElement"]("path",{className:"".concat(n,"-path-3"),d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),i["createElement"]("path",{className:"".concat(n,"-path-4"),d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})),i["createElement"]("path",{className:"".concat(n,"-path-5"),d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),i["createElement"]("g",{className:"".concat(n,"-g"),transform:"translate(149.65 15.383)"},i["createElement"]("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),i["createElement"]("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},l=c,f=function(){var t=i["useContext"](x),e=t.getPrefixCls,n=e("empty-img-simple");return i["createElement"]("svg",{className:n,width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},i["createElement"]("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},i["createElement"]("ellipse",{className:"".concat(n,"-ellipse"),cx:"32",cy:"33",rx:"32",ry:"7"}),i["createElement"]("g",{className:"".concat(n,"-g"),fillRule:"nonzero"},i["createElement"]("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),i["createElement"]("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",className:"".concat(n,"-path")}))))},p=f,h=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},d=i["createElement"](l,null),v=i["createElement"](p,null),m=function(t){var e=t.className,n=t.prefixCls,a=t.image,c=void 0===a?d:a,l=t.description,f=t.children,p=t.imageStyle,m=h(t,["className","prefixCls","image","description","children","imageStyle"]),g=i["useContext"](x),y=g.getPrefixCls,b=g.direction;return i["createElement"](u["a"],{componentName:"Empty"},(function(t){var a,u=y("empty",n),h="undefined"!==typeof l?l:t.description,d="string"===typeof h?h:"empty",g=null;return g="string"===typeof c?i["createElement"]("img",{alt:d,src:c}):c,i["createElement"]("div",Object(r["a"])({className:s()(u,(a={},Object(o["a"])(a,"".concat(u,"-normal"),c===v),Object(o["a"])(a,"".concat(u,"-rtl"),"rtl"===b),a),e)},m),i["createElement"]("div",{className:"".concat(u,"-image"),style:p},g),h&&i["createElement"]("div",{className:"".concat(u,"-description")},h),f&&i["createElement"]("div",{className:"".concat(u,"-footer")},f))}))};m.PRESENTED_IMAGE_DEFAULT=d,m.PRESENTED_IMAGE_SIMPLE=v;var g=m,y=function(t){return i["createElement"](w,null,(function(e){var n=e.getPrefixCls,r=n("empty");switch(t){case"Table":case"List":return i["createElement"](g,{image:g.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return i["createElement"](g,{image:g.PRESENTED_IMAGE_SIMPLE,className:"".concat(r,"-small")});default:return i["createElement"](g,null)}}))},b=y,_=function(t,e){return e||(t?"ant-".concat(t):"ant")},x=i["createContext"]({getPrefixCls:_,renderEmpty:b}),w=x.Consumer},vTej:function(t,e,n){"use strict";n.r(e),n.d(e,"GaodeMap",(function(){return d["a"]})),n.d(e,"GaodeMapV2",(function(){return pt})),n.d(e,"Mapbox",(function(){return so})),n.d(e,"Map",(function(){return Gi}));var r,i,o,a,s,u,c,l,f,p,h,d=n("Ct92"),v=n("txMq"),m=n.n(v),g=n("RgF4"),y=n.n(g),b=n("r9+l"),_=n.n(b),x=n("hbjN"),w=n.n(x),E=n("fI5W"),S=n.n(E),C=n("dF3I"),T=n("jCe1"),O=n.n(T),A=n("/2LT"),k=n.n(A),M=n("m5Te"),P=n.n(M),I=n("5EKB"),L=n.n(I),R=n("aDRW"),D=n.n(R),N=n("Xrqc"),j=n.n(N),F=n("+ti2"),z=n.n(F),B=(n("+ynn"),n("TFir")),U=n.n(B),V=n("9GRW"),q=n.n(V),G=n("/LZe"),H=n("IyCX"),W=n("99LQ"),X=n("YcyD"),Z=(n("BLox"),n("tijT")),Y=n("RH+t"),K={dark:"amap://styles/dark",light:"amap://styles/light",normal:"amap://styles/normal",blank:"amap://styles/1a91e7ec761981d85b35f3099ff781a3"},J=function(){function t(){m()(this,t),j()(this,"projectionMatrix",W["b"].create()),j()(this,"viewMatrix",W["b"].create()),j()(this,"viewProjectionMatrix",W["b"].create()),j()(this,"ViewProjectionMatrixUncentered",W["b"].create()),j()(this,"viewUncenteredMatrix",W["b"].create()),j()(this,"zoom",void 0),j()(this,"center",void 0)}return y()(t,[{key:"syncWithMapCamera",value:function(t){var e=t.zoom,n=void 0===e?1:e,r=t.center,i=void 0===r?[0,0]:r,o=t.offsetOrigin,a=void 0===o?[0,0]:o,s=t.cameraPosition,u=void 0===s?[0,0,0]:s,c=t.up,l=void 0===c?[0,1,0]:c,f=t.lookAt,p=void 0===f?[0,0,0]:f,h=t.aspect,d=void 0===h?1:h,v=t.near,m=void 0===v?.1:v,g=t.far,y=void 0===g?1e3:g,b=t.fov,_=void 0===b?45:b;this.zoom=n,this.center=i,W["b"].perspective(this.projectionMatrix,_/180*Math.PI,d,m,y);var x=W["d"].fromValues.apply(W["d"],L()(u)),w=W["d"].fromValues.apply(W["d"],L()(p)),E=W["d"].fromValues.apply(W["d"],L()(l));W["b"].lookAt(this.viewMatrix,x,w,E),this.viewUncenteredMatrix=W["b"].clone(this.viewMatrix),W["b"].translate(this.viewMatrix,this.viewMatrix,W["d"].fromValues(-a[0],a[1],0)),W["b"].multiply(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),W["b"].multiply(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 1048576}},{key:"getCenter",value:function(){var t=P()(this.center,2),e=t[0],n=t[1];return[e,n]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(t,e){var n=85.0511287798,r=Math.max(Math.min(n,t[1]),-n),i=256<<20,o=Math.PI/180,a=t[0]*o,s=r*o;s=Math.log(Math.tan(Math.PI/4+s/2));var u=.5/Math.PI,c=.5,l=-.5/Math.PI;return o=.5,a=i*(u*a+c)-215440491,s=-(i*(l*s+o)-106744817),[a,s]}}]),t}(),Q=["id","style","minZoom","maxZoom","token","mapInstance","plugin","version"];function $(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$(Object(n),!0).forEach((function(e){j()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function et(t,e){if(e||(e=document),e){var n=e.head||e.getElementsByTagName("head")[0];if(!n){n=e.createElement("head");var r=e.body||e.getElementsByTagName("body")[0];r?r.parentNode.insertBefore(n,r):e.documentElement.appendChild(n)}var i=e.createElement("style");return i.type="text/css",i.styleSheet?i.styleSheet.cssText=t:i.appendChild(e.createTextNode(t)),n.appendChild(i),i}}et(".amap-logo{\n display: none !important;\n}\n");var nt=0;window.forceWebGL=!0;var rt="ff533602d57df6f8ab3b0fea226ae52f",it="2.0",ot="amap-script",at=!1,st=[],ut=(r=Object(X["injectable"])(),i=Object(X["inject"])(G["n"].IGlobalConfigService),o=Object(X["inject"])(G["n"].MapConfig),a=Object(X["inject"])(G["n"].ICoordinateSystemService),s=Object(X["inject"])(G["n"].IEventEmitter),r((c=function(){function t(){var e=this;m()(this,t),j()(this,"version",Y["a"]["GAODE2.x"]),j()(this,"map",void 0),j()(this,"sceneCenter",void 0),j()(this,"sceneCenterMKT",void 0),D()(this,"configService",l,this),D()(this,"config",f,this),D()(this,"coordinateSystemService",p,this),D()(this,"eventEmitter",h,this),j()(this,"markerContainer",void 0),j()(this,"$mapContainer",void 0),j()(this,"viewport",void 0),j()(this,"cameraChangedCallback",void 0),j()(this,"handleViewChanged",(function(t){var n=e.map.customCoords.getCameraParams(),r=n.fov,i=n.near,o=n.far,a=n.aspect,s=n.position,u=n.lookAt,c=n.up,l=t.zoom,f=e.map.customCoords.getCenter();e.cameraChangedCallback&&(e.viewport.syncWithMapCamera({aspect:a,far:o,fov:r,cameraPosition:s,lookAt:u,up:c,near:i,zoom:l-1,center:f,offsetOrigin:[s[0],s[1]]}),e.coordinateSystemService.setCoordinateSystem(G["e"].P20_2),e.cameraChangedCallback(e.viewport))}))}return y()(t,[{key:"setCustomCoordCenter",value:function(t){var e;this.sceneCenter=t,this.sceneCenterMKT=(e=this.map.getProjection()).project.apply(e,L()(this.sceneCenter))}},{key:"getCustomCoordCenter",value:function(){return this.sceneCenterMKT}},{key:"lngLatToCoord",value:function(t){var e=this.map.getProjection(),n=e.project;return this.sceneCenter||(this.map.customCoords.setCenter(t),this.setCustomCoordCenter(t)),this._sub(n(t[0],t[1]),this.sceneCenterMKT)}},{key:"lngLatToCoords",value:function(t){var e=this;return t.map((function(t){return"number"===typeof t[0]?e.lngLatToCoord(t):t.map((function(t){return e.lngLatToCoord(t)}))}))}},{key:"addMarkerContainer",value:function(){if(this.map){var t=this.map.getContainer();null!==t&&(this.markerContainer=H["b"].create("div","l7-marker-container2",t))}}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(t,e){-1!==G["h"].indexOf(t)?this.eventEmitter.on(t,e):this.map.on(t,e)}},{key:"off",value:function(t,e){-1!==G["h"].indexOf(t)?this.eventEmitter.off(t,e):this.map.off(t,e)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){var t;return null===(t=this.map.getContainer())||void 0===t?void 0:t.getElementsByClassName("amap-maps")[0]}},{key:"getSize",value:function(){var t=this.map.getSize();return[t.getWidth(),t.getHeight()]}},{key:"getType",value:function(){return"amap2"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(t){return this.map.setZoom(t)}},{key:"getCenter",value:function(t){if(null!==t&&void 0!==t&&t.padding){var e=this.getCenter(),n=this.getSize(),r=P()(n,2),i=(r[0],r[1],Object(Z["a"])(t.padding)),o=this.lngLatToPixel([e.lng,e.lat]),a=[(i.right-i.left)/2,(i.bottom-i.top)/2],s=this.pixelToLngLat([o.x-a[0],o.y-a[1]]);return s}var u=this.map.getCenter();return{lng:u.getLng(),lat:u.getLat()}}},{key:"setCenter",value:function(t,e){if(null!==e&&void 0!==e&&e.padding){var n=Object(Z["a"])(e.padding),r=this.lngLatToPixel(t),i=[(n.right-n.left)/2,(n.bottom-n.top)/2],o=this.pixelToLngLat([r.x+i[0],r.y+i[1]]);this.map.setCenter([o.lng,o.lat])}else this.map.setCenter(t)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return 360-this.map.getRotation()}},{key:"getBounds",value:function(){var t=this.map.getBounds(),e=t.getNorthEast(),n=t.getSouthWest(),r=this.getCenter(),i=r.lng>e.getLng()||r.lng<n.getLng()?180-e.getLng():e.getLng(),o=r.lng<n.getLng()?n.getLng()-180:n.getLng();return[[o,n.getLat()],[i,e.getLat()]]}},{key:"getMinZoom",value:function(){var t=this.map.getZooms();return t[0]-1}},{key:"getMaxZoom",value:function(){var t=this.map.getZooms();return t[1]-1}},{key:"setRotation",value:function(t){return this.map.setRotation(t)}},{key:"setPitch",value:function(t){return this.map.setPitch(t)}},{key:"zoomIn",value:function(){this.map.zoomIn()}},{key:"zoomOut",value:function(){this.map.zoomOut()}},{key:"panTo",value:function(t){this.map.panTo(t)}},{key:"panBy",value:function(t){this.map.panTo(t)}},{key:"fitBounds",value:function(t){this.map.setBounds(new AMap.Bounds([t[0][0],t[0][1],t[1][0],t[1][1]]))}},{key:"setZoomAndCenter",value:function(t,e){this.map.setZoomAndCenter(t,e)}},{key:"setMapStyle",value:function(t){this.map.setMapStyle(this.getMapStyle(t))}},{key:"setMapStatus",value:function(t){this.map.setStatus(t)}},{key:"pixelToLngLat",value:function(t){var e=this.map.pixelToLngLat(new AMap.Pixel(t[0],t[1]));return{lng:e.getLng(),lat:e.getLat()}}},{key:"lngLatToPixel",value:function(t){var e=this.map.lnglatToPixel(new AMap.LngLat(t[0],t[1]));return{x:e.getX(),y:e.getY()}}},{key:"containerToLngLat",value:function(t){var e=new AMap.Pixel(t[0],t[1]),n=this.map.containerToLngLat(e);return{lng:null===n||void 0===n?void 0:n.getLng(),lat:null===n||void 0===n?void 0:n.getLat()}}},{key:"lngLatToContainer",value:function(t){var e=new AMap.LngLat(t[0],t[1]),n=this.map.lngLatToContainer(e);return{x:n.getX(),y:n.getY()}}},{key:"lngLatToMercator",value:function(t,e){return{x:0,y:0,z:0}}},{key:"getModelMatrix",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],i=this.viewport.projectFlat(t),o=W["b"].create();return W["b"].translate(o,o,W["d"].fromValues(i[0],i[1],e)),W["b"].scale(o,o,W["d"].fromValues(r[0],r[1],r[2])),W["b"].rotateX(o,o,n[0]),W["b"].rotateY(o,o,n[1]),W["b"].rotateZ(o,o,n[2]),o}},{key:"init",value:function(){var t=k()(U.a.mark((function t(){var e,n,r,i,o,a,s,u,c,l,f,p,h,d,v,m,g=this;return U.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.config,n=e.id,r=e.style,i=void 0===r?"light":r,o=e.minZoom,a=void 0===o?0:o,s=e.maxZoom,u=void 0===s?18:s,c=e.token,l=void 0===c?rt:c,f=e.mapInstance,p=e.plugin,h=void 0===p?[]:p,d=e.version,v=void 0===d?it:d,m=O()(e,Q),t.next=3,new Promise((function(t){var e=function(){if(f){var e;g.map=f,g.$mapContainer=g.map.getContainer();var r=g.map.getCenter();null===(e=g.map.customCoords)||void 0===e||e.setCenter([r.lng,r.lat]),g.setCustomCoordCenter([r.lng,r.lat]),setTimeout((function(){g.map.on("viewchange",g.handleViewChanged),t()}),30)}else{g.$mapContainer=g.creatAmapContainer(n);var o=new AMap.Map(g.$mapContainer,tt({mapStyle:g.getMapStyle(i),zooms:[a,u],viewMode:"3D"},m));g.map=o;var s=o.getCenter();o.customCoords.setCenter([s.lng,s.lat]),g.setCustomCoordCenter([s.lng,s.lat]),o.on("viewchange",g.handleViewChanged),setTimeout((function(){t()}),10)}};g.viewport=new J,at||f?at&&window.AMap||f?e():st.push(e):(l===rt&&console.warn(g.configService.getSceneWarninfo("MapToken")),at=!0,h.push("Map3D"),q.a.load({key:l,version:v,plugins:h}).then((function(t){e(),st.length&&(st.forEach((function(t){return t()})),st=[])}))["catch"]((function(t){throw new Error(t)})))}));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"exportMap",value:function(t){var e,n=null===(e=this.getContainer())||void 0===e?void 0:e.getElementsByClassName("amap-layer")[0],r="jpg"===t?null===n||void 0===n?void 0:n.toDataURL("image/jpeg"):null===n||void 0===n?void 0:n.toDataURL("image/png");return r}},{key:"emit",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=this.eventEmitter).emit.apply(e,[t].concat(r))}},{key:"once",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=this.eventEmitter).once.apply(e,[t].concat(r))}},{key:"destroy",value:function(){this.map.destroy(),delete window.initAMap;var t=document.getElementById(ot);t&&document.head.removeChild(t)}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(t){this.cameraChangedCallback=t}},{key:"initViewPort",value:function(){var t,e=null===(t=this.map.customCoords)||void 0===t?void 0:t.getCameraParams(),n=e.fov,r=e.near,i=e.far,o=e.aspect,a=e.position,s=e.lookAt,u=e.up,c=this.map.customCoords.getCenter(),l=this.map.getZoom();this.cameraChangedCallback&&(this.viewport.syncWithMapCamera({aspect:o,far:i,fov:n,cameraPosition:a,lookAt:s,near:r,up:u,zoom:l-1,center:c,offsetOrigin:[a[0],a[1]]}),this.coordinateSystemService.setCoordinateSystem(G["e"].P20_2),this.cameraChangedCallback(this.viewport))}},{key:"_sub",value:function(t,e){var n=[0,0];return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n}},{key:"getMapStyle",value:function(t){return K[t]?K[t]:t}},{key:"creatAmapContainer",value:function(t){var e=t;"string"===typeof t&&(e=document.getElementById(t));var n=document.createElement("div");return n.style.cssText+="\n      position: absolute;\n      top: 0;\n      height: 100%;\n      width: 100%;\n    ",n.id="l7_amap_div"+nt++,e.appendChild(n),n}}]),t}(),l=z()(c.prototype,"configService",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=z()(c.prototype,"config",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=z()(c.prototype,"coordinateSystemService",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=z()(c.prototype,"eventEmitter",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=c))||u);function ct(t){var e=lt();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w()(this,n)}}function lt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var ft,pt=function(t){_()(n,t);var e=ct(n);function n(){return m()(this,n),e.apply(this,arguments)}return y()(n,[{key:"getServiceConstructor",value:function(){return ut}}]),n}(C["a"]),ht=n("cZYw"),dt=n.n(ht),vt=n("Ixdt"),mt=n.n(vt),gt=n("2pGt"),yt=n("6aLv"),bt=n.n(yt),_t=n("ZJ87"),xt=n.n(_t);function wt(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Et(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function Et(t,e){if(t){if("string"===typeof t)return St(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?St(t,e):void 0}}function St(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ct(t,e,n){var r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i}function Tt(t,e,n){return Math.min(n,Math.max(e,t))}function Ot(t,e,n){return t*(1-n)+e*n}function At(t,e,n,r){var i=new xt.a(t,e,n,r);return function(t){return i.solve(t)}}var kt=At(.25,.1,.25,1);function Mt(){return!!window.matchMedia&&(null==ft&&(ft=window.matchMedia("(prefers-reduced-motion: reduce)")),ft.matches)}function Pt(t,e){var n,r={},i=wt(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;o in t&&(r[o]=t[o])}}catch(a){i.e(a)}finally{i.f()}return r}var It=window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now.bind(Date),Lt=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,Rt=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame;function Dt(t){var e=Lt(t);return{cancel:function(){return Rt(e)}}}var Nt=6371008.8,jt=function(){function t(e,n){if(m()(this,t),j()(this,"lng",void 0),j()(this,"lat",void 0),isNaN(e)||isNaN(n))throw new Error("Invalid LngLat object: (".concat(e,", ").concat(n,")"));if(this.lng=+e,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return y()(t,[{key:"wrap",value:function(){return new t(Ct(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(t){var e=Math.PI/180,n=this.lat*e,r=t.lat*e,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((t.lng-this.lng)*e),o=Nt*Math.acos(Math.min(i,1));return o}}],[{key:"convert",value:function(e){if(e instanceof t)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new t(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"===bt()(e)&&null!==e){var n="lng"in e?e.lng:e.lon;return new t(Number(n),Number(e.lat))}throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),t}(),Ft=function(){function t(e,n){m()(this,t),j()(this,"ne",void 0),j()(this,"sw",void 0),e&&(n?this.setSouthWest(e).setNorthEast(n):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}return y()(t,[{key:"setNorthEast",value:function(t){return this.ne=t instanceof jt?new jt(t.lng,t.lat):jt.convert(t),this}},{key:"setSouthWest",value:function(t){return this.sw=t instanceof jt?new jt(t.lng,t.lat):jt.convert(t),this}},{key:"extend",value:function(e){var n,r,i=this.sw,o=this.ne;if(e instanceof jt)n=e,r=e;else{if(!(e instanceof t)){if(Array.isArray(e)){if(4===e.length||e.every(Array.isArray)){var a=e;return this.extend(t.convert(a))}var s=e;return this.extend(jt.convert(s))}return this}if(n=e.sw,r=e.ne,!n||!r)return this}return i||o?(i.lng=Math.min(n.lng,i.lng),i.lat=Math.min(n.lat,i.lat),o.lng=Math.max(r.lng,o.lng),o.lat=Math.max(r.lat,o.lat)):(this.sw=new jt(n.lng,n.lat),this.ne=new jt(r.lng,r.lat)),this}},{key:"getCenter",value:function(){return new jt((this.sw.lng+this.ne.lng)/2,(this.sw.lat+this.ne.lat)/2)}},{key:"getSouthWest",value:function(){return this.sw}},{key:"getNorthEast",value:function(){return this.ne}},{key:"getNorthWest",value:function(){return new jt(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new jt(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this.sw.lng}},{key:"getSouth",value:function(){return this.sw.lat}},{key:"getEast",value:function(){return this.ne.lng}},{key:"getNorth",value:function(){return this.ne.lat}},{key:"toArray",value:function(){return[this.sw.toArray(),this.ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this.sw.toString(),", ").concat(this.ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this.sw&&this.ne)}},{key:"contains",value:function(t){var e=jt.convert(t),n=e.lng,r=e.lat,i=this.sw.lat<=r&&r<=this.ne.lat,o=this.sw.lng<=n&&n<=this.ne.lng;return this.sw.lng>this.ne.lng&&(o=this.sw.lng>=n&&n>=this.ne.lng),i&&o}}],[{key:"convert",value:function(e){return e instanceof t?e:new t(e)}}]),t}(),zt=function(){function t(e,n){m()(this,t),j()(this,"x",void 0),j()(this,"y",void 0),this.x=e,this.y=n}return y()(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"_add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"add",value:function(t){return this.clone()._add(t)}},{key:"_sub",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"sub",value:function(t){return this.clone()._sub(t)}},{key:"_multByPoint",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"multByPoint",value:function(t){return this.clone()._multByPoint(t)}},{key:"_divByPoint",value:function(t){return this.x/=t.x,this.y/=t.y,this}},{key:"divByPoint",value:function(t){return this.clone()._divByPoint(t)}},{key:"_mult",value:function(t){return this.x*=t,this.y*=t,this}},{key:"mult",value:function(t){return this.clone()._mult(t)}},{key:"_div",value:function(t){return this.x/=t,this.y/=t,this}},{key:"div",value:function(t){return this.clone()._div(t)}},{key:"_rotate",value:function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this}},{key:"rotate",value:function(t){return this.clone()._rotate(t)}},{key:"_rotateAround",value:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.x+n*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=i,this.y=o,this}},{key:"roateAround",value:function(t,e){return this.clone()._rotateAround(t,e)}},{key:"_matMult",value:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this}},{key:"matMult",value:function(t){return this.clone()._matMult(t)}},{key:"_unit",value:function(){return this.div(this.mag()),this}},{key:"unit",value:function(){return this.clone()._unit()}},{key:"_perp",value:function(){var t=this.y;return this.y=this.x,this.x=-t,this}},{key:"perp",value:function(){return this.clone()._perp()}},{key:"_round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"round",value:function(){return this.clone()._round()}},{key:"mag",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"dist",value:function(t){return Math.sqrt(this.distSqr(t))}},{key:"distSqr",value:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"angleTo",value:function(t){return Math.atan2(this.y-t.y,this.x-t.x)}},{key:"angleWith",value:function(t){return this.angleWithSep(t.x,t.y)}},{key:"angleWithSep",value:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)}}],[{key:"convert",value:function(e){return e instanceof t?e:Array.isArray(e)?new t(e[0],e[1]):e}}]),t}(),Bt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(m()(this,t),j()(this,"top",void 0),j()(this,"bottom",void 0),j()(this,"left",void 0),j()(this,"right",void 0),isNaN(e)||e<0||isNaN(n)||n<0||isNaN(r)||r<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=n,this.left=r,this.right=i}return y()(t,[{key:"interpolate",value:function(t,e,n){return null!=e.top&&null!=t.top&&(this.top=Ot(t.top,e.top,n)),null!=e.bottom&&null!=t.bottom&&(this.bottom=Ot(t.bottom,e.bottom,n)),null!=e.left&&null!=t.left&&(this.left=Ot(t.left,e.left,n)),null!=e.right&&null!=t.right&&(this.right=Ot(t.right,e.right,n)),this}},{key:"getCenter",value:function(t,e){var n=Tt((this.left+t-this.right)/2,0,t),r=Tt((this.top+e-this.bottom)/2,0,e);return new zt(n,r)}},{key:"equals",value:function(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}},{key:"clone",value:function(){return new t(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),t}(),Ut=2*Math.PI*Nt;function Vt(t){return Ut*Math.cos(t*Math.PI/180)}function qt(t){return(180+t)/360}function Gt(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Ht(t,e){return t/Vt(e)}function Wt(t){return 360*t-180}function Xt(t){var e=180-360*t;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}function Zt(t,e){return t*Vt(Xt(e))}function Yt(t){return 1/Math.cos(t*Math.PI/180)}var Kt=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;m()(this,t),j()(this,"x",void 0),j()(this,"y",void 0),j()(this,"z",void 0),this.x=+e,this.y=+n,this.z=+r}return y()(t,[{key:"toLngLat",value:function(){return new jt(Wt(this.x),Xt(this.y))}},{key:"toAltitude",value:function(){return Zt(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/Ut*Yt(Xt(this.y))}}],[{key:"fromLngLat",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=jt.convert(e);return new t(qt(r.lng),Gt(r.lat),Ht(n,r.lat))}}]),t}();function Jt(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Qt(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function Qt(t,e){if(t){if("string"===typeof t)return $t(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$t(t,e):void 0}}function $t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var te=function(){function t(e,n,r,i,o){m()(this,t),j()(this,"tileSize",void 0),j()(this,"tileZoom",void 0),j()(this,"lngRange",void 0),j()(this,"latRange",void 0),j()(this,"maxValidLatitude",void 0),j()(this,"scale",void 0),j()(this,"width",void 0),j()(this,"height",void 0),j()(this,"angle",void 0),j()(this,"rotationMatrix",void 0),j()(this,"pixelsToGLUnits",void 0),j()(this,"cameraToCenterDistance",void 0),j()(this,"mercatorMatrix",void 0),j()(this,"projMatrix",void 0),j()(this,"invProjMatrix",void 0),j()(this,"alignedProjMatrix",void 0),j()(this,"pixelMatrix",void 0),j()(this,"pixelMatrixInverse",void 0),j()(this,"glCoordMatrix",void 0),j()(this,"labelPlaneMatrix",void 0),j()(this,"_fov",void 0),j()(this,"_pitch",void 0),j()(this,"_zoom",void 0),j()(this,"_renderWorldCopies",void 0),j()(this,"_minZoom",void 0),j()(this,"_maxZoom",void 0),j()(this,"_minPitch",void 0),j()(this,"_maxPitch",void 0),j()(this,"_center",void 0),j()(this,"zoomFraction",void 0),j()(this,"unmodified",void 0),j()(this,"edgeInsets",void 0),j()(this,"constraining",void 0),j()(this,"posMatrixCache",void 0),j()(this,"alignedPosMatrixCache",void 0),this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=void 0===r||null===r?0:r,this._maxPitch=void 0===i||null===i?60:i,this.setMaxBounds(),this.width=0,this.height=0,this._center=new jt(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this.unmodified=!0,this.edgeInsets=new Bt,this.posMatrixCache={},this.alignedPosMatrixCache={}}return y()(t,[{key:"minZoom",get:function(){return this._minZoom},set:function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}},{key:"minPitch",get:function(){return this._minPitch},set:function(t){this._minPitch!==t&&(this._minPitch=t,this._pitch=Math.max(this._pitch,t))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(t){this._maxPitch!==t&&(this._maxPitch=t,this._pitch=Math.min(this._pitch,t))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies},set:function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new zt(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(t){var e=-Ct(t,-180,180)*Math.PI/180;this.angle!==e&&(this.unmodified=!1,this.angle=e,this.calcMatrices(),this.rotationMatrix=W["a"].create(),W["a"].rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(t){var e=Tt(t,this._minPitch,this._maxPitch)/180*Math.PI;this._pitch!==e&&(this.unmodified=!1,this._pitch=e,this.calcMatrices())}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this.unmodified=!1,this._fov=t/180*Math.PI,this.calcMatrices())}},{key:"zoom",get:function(){return this._zoom},set:function(t){var e=Math.min(Math.max(t,this._minZoom),this._maxZoom);this._zoom!==e&&(this.unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this.constrain(),this.calcMatrices())}},{key:"center",get:function(){return this._center},set:function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this.unmodified=!1,this._center=t,this.constrain(),this.calcMatrices())}},{key:"padding",get:function(){return this.edgeInsets.toJSON()},set:function(t){this.edgeInsets.equals(t)||(this.unmodified=!1,this.edgeInsets.interpolate(this.edgeInsets,t,1),this.calcMatrices())}},{key:"centerPoint",get:function(){return this.edgeInsets.getCenter(this.width,this.height)}},{key:"point",get:function(){return this.project(this.center)}},{key:"clone",value:function(){var e=new t(this._minZoom,this._maxZoom,this._minPitch,this._maxPitch,this._renderWorldCopies);return e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e.center=this._center,e.zoom=this.zoom,e.angle=this.angle,e.fov=this._fov,e.pitch=this._pitch,e.unmodified=this.unmodified,e.edgeInsets=this.edgeInsets.clone(),e.calcMatrices(),e}},{key:"isPaddingEqual",value:function(t){return this.edgeInsets.equals(t)}},{key:"interpolatePadding",value:function(t,e,n){this.unmodified=!1,this.edgeInsets.interpolate(t,e,n),this.constrain(),this.calcMatrices()}},{key:"coveringZoomLevel",value:function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)}},{key:"resize",value:function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this.constrain(),this.calcMatrices()}},{key:"zoomScale",value:function(t){return Math.pow(2,t)}},{key:"scaleZoom",value:function(t){return Math.log(t)/Math.LN2}},{key:"project",value:function(t){var e=Tt(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new zt(qt(t.lng)*this.worldSize,Gt(e)*this.worldSize)}},{key:"unproject",value:function(t){return new Kt(t.x/this.worldSize,t.y/this.worldSize).toLngLat()}},{key:"setLocationAtPoint",value:function(t,e){var n=this.pointCoordinate(e),r=this.pointCoordinate(this.centerPoint),i=this.locationCoordinate(t),o=new Kt(i.x-(n.x-r.x),i.y-(n.y-r.y));this.center=this.coordinateLocation(o),this._renderWorldCopies&&(this.center=this.center.wrap())}},{key:"pointCoordinate",value:function(t){var e=0,n=new Float32Array([t.x,t.y,0,1]),r=new Float32Array([t.x,t.y,1,1]);W["e"].transformMat4(n,n,this.pixelMatrixInverse),W["e"].transformMat4(r,r,this.pixelMatrixInverse);var i=n[3],o=r[3],a=n[0]/i,s=r[0]/o,u=n[1]/i,c=r[1]/o,l=n[2]/i,f=r[2]/o,p=l===f?0:(e-l)/(f-l);return new Kt(Ot(a,s,p)/this.worldSize,Ot(u,c,p)/this.worldSize)}},{key:"getBounds",value:function(){return(new Ft).extend(this.pointLocation(new zt(0,0))).extend(this.pointLocation(new zt(this.width,0))).extend(this.pointLocation(new zt(this.width,this.height))).extend(this.pointLocation(new zt(0,this.height)))}},{key:"getMaxBounds",value:function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new Ft([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}},{key:"setMaxBounds",value:function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this.constrain()):(this.lngRange=void 0,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"maxPitchScaleFactor",value:function(){if(!this.pixelMatrixInverse)return 1;var t=this.pointCoordinate(new zt(0,0)),e=new Float32Array([t.x*this.worldSize,t.y*this.worldSize,0,1]),n=W["e"].transformMat4(e,e,this.pixelMatrix);return n[3]/this.cameraToCenterDistance}},{key:"getCameraPoint",value:function(){var t=this._pitch,e=Math.tan(t)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new zt(0,e))}},{key:"getCameraQueryGeometry",value:function(t){var e=this.getCameraPoint();if(1===t.length)return[t[0],e];var n,r=e.x,i=e.y,o=e.x,a=e.y,s=Jt(t);try{for(s.s();!(n=s.n()).done;){var u=n.value;r=Math.min(r,u.x),i=Math.min(i,u.y),o=Math.max(o,u.x),a=Math.max(a,u.y)}}catch(c){s.e(c)}finally{s.f()}return[new zt(r,i),new zt(o,i),new zt(o,a),new zt(r,a),new zt(r,i)]}},{key:"coordinatePoint",value:function(t){var e=W["e"].fromValues(t.x*this.worldSize,t.y*this.worldSize,0,1);return W["e"].transformMat4(e,e,this.pixelMatrix),new zt(e[0]/e[3],e[1]/e[3])}},{key:"locationPoint",value:function(t){return this.coordinatePoint(this.locationCoordinate(t))}},{key:"pointLocation",value:function(t){return this.coordinateLocation(this.pointCoordinate(t))}},{key:"locationCoordinate",value:function(t){return Kt.fromLngLat(t)}},{key:"coordinateLocation",value:function(t){return t.toLngLat()}},{key:"getProjectionMatrix",value:function(){return this.projMatrix}},{key:"constrain",value:function(){if(this.center&&this.width&&this.height&&!this.constraining){this.constraining=!0;var t,e,n,r,i=-90,o=90,a=-180,s=180,u=this.size,c=this.unmodified;if(this.latRange){var l=this.latRange;i=Gt(l[1])*this.worldSize,o=Gt(l[0])*this.worldSize,t=o-i<u.y?u.y/(o-i):0}if(this.lngRange){var f=this.lngRange;a=qt(f[0])*this.worldSize,s=qt(f[1])*this.worldSize,e=s-a<u.x?u.x/(s-a):0}var p=this.point,h=Math.max(e||0,t||0);if(h)return this.center=this.unproject(new zt(e?(s+a)/2:p.x,t?(o+i)/2:p.y)),this.zoom+=this.scaleZoom(h),this.unmodified=c,void(this.constraining=!1);if(this.latRange){var d=p.y,v=u.y/2;d-v<i&&(r=i+v),d+v>o&&(r=o-v)}if(this.lngRange){var m=p.x,g=u.x/2;m-g<a&&(n=a+g),m+g>s&&(n=s-g)}void 0===n&&void 0===r||(this.center=this.unproject(new zt(void 0!==n?n:p.x,void 0!==r?r:p.y))),this.unmodified=c,this.constraining=!1}}},{key:"calcMatrices",value:function(){if(this.height){var t=this._fov/2,e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(t)*this.height;var n=Math.PI/2+this._pitch,r=this._fov*(.5+e.y/this.height),i=Math.sin(r)*this.cameraToCenterDistance/Math.sin(Tt(Math.PI-n-r,.01,Math.PI-.01)),o=this.point,a=o.x,s=o.y,u=Math.cos(Math.PI/2-this._pitch)*i+this.cameraToCenterDistance,c=1.01*u,l=this.height/50,f=W["b"].create();W["b"].perspective(f,this._fov,this.width/this.height,l,c),f[8]=2*-e.x/this.width,f[9]=2*e.y/this.height,W["b"].scale(f,f,[1,-1,1]),W["b"].translate(f,f,[0,0,-this.cameraToCenterDistance]),W["b"].rotateX(f,f,this._pitch),W["b"].rotateZ(f,f,this.angle),W["b"].translate(f,f,[-a,-s,0]),this.mercatorMatrix=W["b"].scale(W["b"].create(),f,[this.worldSize,this.worldSize,this.worldSize]),W["b"].scale(f,f,W["d"].fromValues(1,1,Ht(1,this.center.lat)*this.worldSize)),this.projMatrix=f,this.invProjMatrix=W["b"].invert(W["b"].create(),this.projMatrix);var p=this.width%2/2,h=this.height%2/2,d=Math.cos(this.angle),v=Math.sin(this.angle),m=a-Math.round(a)+d*p+v*h,g=s-Math.round(s)+d*h+v*p,y=W["b"].clone(f);if(W["b"].translate(y,y,[m>.5?m-1:m,g>.5?g-1:g,0]),this.alignedProjMatrix=y,f=W["b"].create(),W["b"].scale(f,f,[this.width/2,-this.height/2,1]),W["b"].translate(f,f,[1,-1,0]),this.labelPlaneMatrix=f,f=W["b"].create(),W["b"].scale(f,f,[1,-1,1]),W["b"].translate(f,f,[-1,-1,0]),W["b"].scale(f,f,[2/this.width,2/this.height,1]),this.glCoordMatrix=f,this.pixelMatrix=W["b"].multiply(W["b"].create(),this.labelPlaneMatrix,this.projMatrix),f=W["b"].invert(W["b"].create(),this.pixelMatrix),!f)throw new Error("failed to invert matrix");this.pixelMatrixInverse=f,this.posMatrixCache={},this.alignedPosMatrixCache={}}}}]),t}(),ee=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m()(this,t),j()(this,"type",void 0),mt()(this,n),this.type=e};function ne(t){var e=re();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w()(this,n)}}function re(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var ie=function(t){_()(n,t);var e=ne(n);function n(t){var r;m()(this,n),r=e.call(this),j()(dt()(r),"transform",void 0),j()(dt()(r),"options",void 0),j()(dt()(r),"moving",void 0),j()(dt()(r),"zooming",void 0),j()(dt()(r),"rotating",void 0),j()(dt()(r),"pitching",void 0),j()(dt()(r),"padding",void 0),j()(dt()(r),"bearingSnap",void 0),j()(dt()(r),"easeEndTimeoutID",void 0),j()(dt()(r),"easeStart",void 0),j()(dt()(r),"easeOptions",void 0),j()(dt()(r),"easeId",void 0),j()(dt()(r),"onEaseFrame",void 0),j()(dt()(r),"onEaseEnd",void 0),j()(dt()(r),"easeFrameId",void 0),j()(dt()(r),"renderFrameCallback",(function(){var t=Math.min((It()-r.easeStart)/r.easeOptions.duration,1);r.onEaseFrame(r.easeOptions.easing(t)),t<1?r.easeFrameId=r.requestRenderFrame(r.renderFrameCallback):r.stop()})),r.options=t;var i=t.minZoom,o=t.maxZoom,a=t.minPitch,s=t.maxPitch,u=t.renderWorldCopies;return r.moving=!1,r.zooming=!1,r.bearingSnap=t.bearingSnap,r.transform=new te(i,o,a,s,u),r}return y()(n,[{key:"requestRenderFrame",value:function(t){return 0}},{key:"cancelRenderFrame",value:function(t){}},{key:"getCenter",value:function(){var t=this.transform.center,e=t.lng,n=t.lat;return new jt(e,n)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setCenter",value:function(t,e){return this.jumpTo({center:t},e)}},{key:"setPitch",value:function(t,e){return this.jumpTo({pitch:t},e),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"panTo",value:function(t,e,n){return this.easeTo(mt()({center:t},e),n)}},{key:"zoomOut",value:function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this}},{key:"setBearing",value:function(t,e){return this.jumpTo({bearing:t},e),this}},{key:"setZoom",value:function(t,e){return this.jumpTo({zoom:t},e),this}},{key:"zoomIn",value:function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this}},{key:"zoomTo",value:function(t,e,n){return this.easeTo(mt()({zoom:t},e),n)}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(t,e){return this.jumpTo({padding:t},e),this}},{key:"rotateTo",value:function(t,e,n){return this.easeTo(mt()({bearing:t},e),n)}},{key:"resetNorth",value:function(t,e){return this.rotateTo(0,mt()({duration:1e3},t),e),this}},{key:"resetNorthPitch",value:function(t,e){return this.easeTo(mt()({bearing:0,pitch:0,duration:1e3},t),e),this}},{key:"fitBounds",value:function(t,e,n){return this.fitInternal(this.cameraForBounds(t,e),e,n)}},{key:"cameraForBounds",value:function(t,e){return t=Ft.convert(t),this.cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),0,e)}},{key:"snapToNorth",value:function(t,e){return Math.abs(this.getBearing())<this.bearingSnap?this.resetNorth(t,e):this}},{key:"jumpTo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;this.stop();var n=this.transform,r=!1,i=!1,o=!1;return t.zoom&&n.zoom!==+t.zoom&&(r=!0,n.zoom=+t.zoom),void 0!==t.center&&(n.center=jt.convert(t.center)),t.bearing&&n.bearing!==+t.bearing&&(i=!0,n.bearing=+t.bearing),t.pitch&&n.pitch!==+t.pitch&&(o=!0,n.pitch=+t.pitch),null==t.padding||n.isPaddingEqual(t.padding)||(n.padding=t.padding),this.emit("movestart",new ee("movestart",e)),this.emit("move",new ee("move",e)),r&&(this.emit("zoomstart",new ee("zoomstart",e)),this.emit("zoom",new ee("zoom",e)),this.emit("zoomend",new ee("zoomend",e))),i&&(this.emit("rotatestart",new ee("rotatestart",e)),this.emit("rotate",new ee("rotate",e)),this.emit("rotateend",new ee("rotateend",e))),o&&(this.emit("pitchstart",new ee("pitchstart",e)),this.emit("pitch",new ee("pitch",e)),this.emit("pitchend",new ee("pitchend",e))),this.emit("moveend",new ee("moveend",e))}},{key:"easeTo",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;e=mt()({offset:[0,0],duration:500,easing:kt},e),(!1===e.animate||!e.essential&&Mt())&&(e.duration=0);var r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),u=e.zoom?+e.zoom:i,c=e.bearing?this.normalizeBearing(e.bearing,o):o,l=e.pitch?+e.pitch:a,f=e.padding?e.padding:r.padding,p=zt.convert(e.offset),h=r.centerPoint.add(p),d=r.pointLocation(h),v=jt.convert(e.center||d);this.normalizeCenter(v);var m,g,y=r.project(d),b=r.project(v).sub(y),_=r.zoomScale(u-i);e.around&&(m=jt.convert(e.around),g=r.locationPoint(m));var x={moving:this.moving,zooming:this.zooming,rotating:this.rotating,pitching:this.pitching};return this.zooming=this.zooming||u!==i,this.rotating=this.rotating||o!==c,this.pitching=this.pitching||l!==a,this.padding=!r.isPaddingEqual(f),this.easeId=e.easeId,this.prepareEase(n,e.noMoveStart,x),clearTimeout(this.easeEndTimeoutID),this.ease((function(e){if(t.zooming&&(r.zoom=Ot(i,u,e)),t.rotating&&(r.bearing=Ot(o,c,e)),t.pitching&&(r.pitch=Ot(a,l,e)),t.padding&&(r.interpolatePadding(s,f,e),h=r.centerPoint.add(p)),m)r.setLocationAtPoint(m,g);else{var d=r.zoomScale(r.zoom-i),v=u>i?Math.min(2,_):Math.max(.5,_),x=Math.pow(v,1-e),w=r.unproject(y.add(b.mult(e*x)).mult(d));r.setLocationAtPoint(r.renderWorldCopies?w.wrap():w,h)}t.fireMoveEvents(n)}),(function(e){t.afterEase(n,e)}),e),this}},{key:"flyTo",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(!e.essential&&Mt()){var r=Pt(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,n)}this.stop(),e=mt()({offset:[0,0],speed:1.2,curve:1.42,easing:kt},e);var i=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),u=this.getPadding(),c=e.zoom?Tt(+e.zoom,i.minZoom,i.maxZoom):o,l=e.bearing?this.normalizeBearing(e.bearing,a):a,f=e.pitch?+e.pitch:s,p="padding"in e?e.padding:i.padding,h=i.zoomScale(c-o),d=zt.convert(e.offset),v=i.centerPoint.add(d),m=i.pointLocation(v),g=jt.convert(e.center||m);this.normalizeCenter(g);var y=i.project(m),b=i.project(g).sub(y),_=e.curve,x=Math.max(i.width,i.height),w=x/h,E=b.mag();if("minZoom"in e){var S=Tt(Math.min(e.minZoom,o,c),i.minZoom,i.maxZoom),C=x/i.zoomScale(S-o);_=Math.sqrt(C/E*2)}var T=_*_;function O(t){var e=(w*w-x*x+(t?-1:1)*T*T*E*E)/(2*(t?w:x)*T*E);return Math.log(Math.sqrt(e*e+1)-e)}function A(t){return(Math.exp(t)-Math.exp(-t))/2}function k(t){return(Math.exp(t)+Math.exp(-t))/2}function M(t){return A(t)/k(t)}var P=O(0),I=function(t){return k(P)/k(P+_*t)},L=function(t){return x*((k(P)*M(P+_*t)-A(P))/T)/E},R=(O(1)-P)/_;if(Math.abs(E)<1e-6||!isFinite(R)){if(Math.abs(x-w)<1e-6)return this.easeTo(e,n);var D=w<x?-1:1;R=Math.abs(Math.log(w/x))/_,L=function(){return 0},I=function(t){return Math.exp(D*_*t)}}if("duration"in e)e.duration=+e.duration;else{var N="screenSpeed"in e?+e.screenSpeed/_:+e.speed;e.duration=1e3*R/N}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this.zooming=!0,this.rotating=a!==l,this.pitching=f!==s,this.padding=!i.isPaddingEqual(p),this.prepareEase(n,!1),this.ease((function(e){var r=e*R,h=1/I(r);i.zoom=1===e?c:o+i.scaleZoom(h),t.rotating&&(i.bearing=Ot(a,l,e)),t.pitching&&(i.pitch=Ot(s,f,e)),t.padding&&(i.interpolatePadding(u,p,e),v=i.centerPoint.add(d));var m=1===e?g:i.unproject(y.add(b.mult(L(r))).mult(h));i.setLocationAtPoint(i.renderWorldCopies?m.wrap():m,v),t.fireMoveEvents(n)}),(function(){return t.afterEase(n)}),e),this}},{key:"fitScreenCoordinates",value:function(t,e,n,r,i){return this.fitInternal(this.cameraForBoxAndBearing(this.transform.pointLocation(zt.convert(t)),this.transform.pointLocation(zt.convert(e)),n,r),r,i)}},{key:"stop",value:function(t,e){if(this.easeFrameId&&(this.cancelRenderFrame(this.easeFrameId),delete this.easeFrameId,delete this.onEaseFrame),this.onEaseEnd){var n=this.onEaseEnd;delete this.onEaseEnd,n.call(this,e)}return this}},{key:"normalizeBearing",value:function(t,e){t=Ct(t,-180,180);var n=Math.abs(t-e);return Math.abs(t-360-e)<n&&(t-=360),Math.abs(t+360-e)<n&&(t+=360),t}},{key:"normalizeCenter",value:function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}}},{key:"fireMoveEvents",value:function(t){this.emit("move",new ee("move",t)),this.zooming&&this.emit("zoom",new ee("zoom",t)),this.rotating&&this.emit("rotate",new ee("rotate",t)),this.pitching&&this.emit("rotate",new ee("pitch",t))}},{key:"prepareEase",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.moving=!0,e||n.moving||this.emit("movestart",new ee("movestart",t)),this.zooming&&!n.zooming&&this.emit("zoomstart",new ee("zoomstart",t)),this.rotating&&!n.rotating&&this.emit("rotatestart",new ee("rotatestart",t)),this.pitching&&!n.pitching&&this.emit("pitchstart",new ee("pitchstart",t))}},{key:"afterEase",value:function(t,e){if(!this.easeId||!e||this.easeId!==e){delete this.easeId;var n=this.zooming,r=this.rotating,i=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,this.padding=!1,n&&this.emit("zoomend",new ee("zoomend",t)),r&&this.emit("rotateend",new ee("rotateend",t)),i&&this.emit("pitchend",new ee("pitchend",t)),this.emit("moveend",new ee("moveend",t))}}},{key:"ease",value:function(t,e,n){!1===n.animate||0===n.duration?(t(1),e()):(this.easeStart=It(),this.easeOptions=n,this.onEaseFrame=t,this.onEaseEnd=e,this.easeFrameId=this.requestRenderFrame(this.renderFrameCallback))}},{key:"cameraForBoxAndBearing",value:function(t,e,n,r){var i={top:0,bottom:0,right:0,left:0};if(r=mt()({padding:i,offset:[0,0],maxZoom:this.transform.maxZoom},r),"number"===typeof r.padding){var o=r.padding;r.padding={top:o,bottom:o,right:o,left:o}}r.padding=mt()(i,r.padding);var a=this.transform,s=a.padding,u=a.project(jt.convert(t)),c=a.project(jt.convert(e)),l=u.rotate(-n*Math.PI/180),f=c.rotate(-n*Math.PI/180),p=new zt(Math.max(l.x,f.x),Math.max(l.y,f.y)),h=new zt(Math.min(l.x,f.x),Math.min(l.y,f.y)),d=p.sub(h),v=(a.width-(s.left+s.right+r.padding.left+r.padding.right))/d.x,m=(a.height-(s.top+s.bottom+r.padding.top+r.padding.bottom))/d.y;if(!(m<0||v<0)){var g=Math.min(a.scaleZoom(a.scale*Math.min(v,m)),r.maxZoom),y=zt.convert(r.offset),b=(r.padding.left-r.padding.right)/2,_=(r.padding.top-r.padding.bottom)/2,x=new zt(y.x+b,y.y+_),w=x.mult(a.scale/a.zoomScale(g)),E=a.unproject(u.add(c).div(2).sub(w));return{center:E,zoom:g,bearing:n}}}},{key:"fitInternal",value:function(t,e,n){return t?(e=mt()(t,e),delete e.padding,e.linear?this.easeTo(e,n):this.flyTo(e,n)):this}}]),n}(gt["EventEmitter"]);function oe(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=ae(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function ae(t,e){if(t){if("string"===typeof t)return se(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?se(t,e):void 0}}function se(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ue={},ce=ue;ue.create=function(t,e,n){var r=window.document.createElement(t);return void 0!==e&&(r.className=e),n&&n.appendChild(r),r},ue.createNS=function(t,e){var n=window.document.createElementNS(t,e);return n};var le=window.document&&window.document.documentElement.style;function fe(t){if(!le)return t[0];var e,n=oe(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r in le)return r}}catch(i){n.e(i)}finally{n.f()}return t[0]}var pe,he=fe(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);ue.disableDrag=function(){le&&he&&(pe=le[he],le[he]="none")},ue.enableDrag=function(){le&&he&&(le[he]=pe)};var de=fe(["transform","WebkitTransform"]);ue.setTransform=function(t,e){t.style[de]=e};var ve=!1;try{var me=Object.defineProperty({},"passive",{get:function(){ve=!0}});window.addEventListener("test",me,me),window.removeEventListener("test",me,me)}catch(uo){ve=!1}ue.addEventListener=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};"passive"in r&&ve?t.addEventListener(e,n,r):t.addEventListener(e,n,r.capture)},ue.removeEventListener=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};"passive"in r&&ve?t.removeEventListener(e,n,r):t.removeEventListener(e,n,r.capture)};var ge=function t(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",t,!0)};function ye(t){var e=be();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w()(this,n)}}function be(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}ue.suppressClick=function(){window.addEventListener("click",ge,!0),window.setTimeout((function(){window.removeEventListener("click",ge,!0)}),0)},ue.mousePos=function(t,e){var n=t.getBoundingClientRect();return new zt(e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop)},ue.touchPos=function(t,e){var n,r=t.getBoundingClientRect(),i=[],o=oe(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;i.push(new zt(a.clientX-r.left-t.clientLeft,a.clientY-r.top-t.clientTop))}}catch(uo){o.e(uo)}finally{o.f()}return i},ue.mouseButton=function(t){return"undefined"!==typeof window.InstallTrigger&&2===t.button&&t.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button},ue.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var _e=function(t){_()(n,t);var e=ye(n);function n(t,r,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};m()(this,n);var s=ce.mousePos(r.getCanvasContainer(),i),u=r.unproject(s);return o=e.call(this,t,mt()({point:s,lngLat:u,originalEvent:i},a)),j()(dt()(o),"type",void 0),j()(dt()(o),"target",void 0),j()(dt()(o),"originalEvent",void 0),j()(dt()(o),"point",void 0),j()(dt()(o),"lngLat",void 0),j()(dt()(o),"defaultPrevented",void 0),o.defaultPrevented=!1,o.target=r,o}return y()(n,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),n}(ee);function xe(t){var e=we();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w()(this,n)}}function we(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Ee=function(t){_()(n,t);var e=xe(n);function n(t,r,i){var o;m()(this,n);var a="touchend"===t?i.changedTouches:i.touches,s=ce.touchPos(r.getCanvasContainer(),a),u=s.map((function(t){return r.unproject(t)})),c=s.reduce((function(t,e,n,r){return t.add(e.div(r.length))}),new zt(0,0)),l=r.unproject(c);return o=e.call(this,t,{points:s,point:c,lngLats:u,lngLat:l,originalEvent:i}),j()(dt()(o),"type",void 0),j()(dt()(o),"target",void 0),j()(dt()(o),"originalEvent",void 0),j()(dt()(o),"lngLat",void 0),j()(dt()(o),"point",void 0),j()(dt()(o),"points",void 0),j()(dt()(o),"lngLats",void 0),j()(dt()(o),"defaultPrevented",void 0),o.defaultPrevented=!1,o}return y()(n,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),n}(ee);function Se(t){var e=Ce();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w()(this,n)}}function Ce(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Te=function(t){_()(n,t);var e=Se(n);function n(t,r,i){var o;return m()(this,n),o=e.call(this,t,{originalEvent:i}),j()(dt()(o),"type",void 0),j()(dt()(o),"originalEvent",void 0),j()(dt()(o),"defaultPrevented",void 0),j()(dt()(o),"target",void 0),o.defaultPrevented=!1,o}return y()(n,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),n}(ee),Oe=function(){function t(e){m()(this,t),j()(this,"map",void 0),j()(this,"delayContextMenu",void 0),j()(this,"contextMenuEvent",void 0),this.map=e}return y()(t,[{key:"reset",value:function(){this.delayContextMenu=!1,delete this.contextMenuEvent}},{key:"mousemove",value:function(t){this.map.emit(t.type,new _e(t.type,this.map,t))}},{key:"mousedown",value:function(){this.delayContextMenu=!0}},{key:"mouseup",value:function(){this.delayContextMenu=!1,this.contextMenuEvent&&(this.map.emit("contextmenu",new _e("contextmenu",this.map,this.contextMenuEvent)),delete this.contextMenuEvent)}},{key:"contextmenu",value:function(t){this.delayContextMenu?this.contextMenuEvent=t:this.map.emit(t.type,new _e(t.type,this.map,t)),this.map.listeners("contextmenu")&&t.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!0}},{key:"disable",value:function(){return!1}}]),t}(),Ae=function(){function t(e,n){m()(this,t),j()(this,"map",void 0),j()(this,"el",void 0),j()(this,"container",void 0),j()(this,"enabled",void 0),j()(this,"active",void 0),j()(this,"startPos",void 0),j()(this,"lastPos",void 0),j()(this,"box",void 0),j()(this,"clickTolerance",void 0),this.map=e,this.el=e.getCanvasContainer(),this.container=e.getContainer(),this.clickTolerance=n.clickTolerance||1}return y()(t,[{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active}},{key:"enable",value:function(){this.isEnabled()||(this.enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this.enabled=!1)}},{key:"mousedown",value:function(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(ce.disableDrag(),this.startPos=this.lastPos=e,this.active=!0)}},{key:"mousemoveWindow",value:function(t,e){if(this.active){var n=e;if(!(this.lastPos.equals(n)||!this.box&&n.dist(this.startPos)<this.clickTolerance)){var r=this.startPos;this.lastPos=n,this.box||(this.box=ce.create("div","l7-boxzoom",this.container),this.container.classList.add("l7-crosshair"),this.fireEvent("boxzoomstart",t));var i=Math.min(r.x,n.x),o=Math.max(r.x,n.x),a=Math.min(r.y,n.y),s=Math.max(r.y,n.y);ce.setTransform(this.box,"translate(".concat(i,"px,").concat(a,"px)")),this.box&&(this.box.style.width="".concat(o-i,"px"),this.box.style.height="".concat(s-a,"px"))}}}},{key:"mouseupWindow",value:function(t,e){var n=this;if(this.active&&0===t.button){var r=this.startPos,i=e;if(this.reset(),ce.suppressClick(),r.x!==i.x||r.y!==i.y)return this.map.emit("boxzoomend",new ee("boxzoomend",{originalEvent:t})),{cameraAnimation:function(t){return t.fitScreenCoordinates(r,i,n.map.getBearing(),{linear:!0})}};this.fireEvent("boxzoomcancel",t)}}},{key:"keydown",value:function(t){this.active&&27===t.keyCode&&(this.reset(),this.fireEvent("boxzoomcancel",t))}},{key:"reset",value:function(){this.active=!1,this.container.classList.remove("l7-crosshair"),this.box&&(ce.remove(this.box),this.box=null),ce.enableDrag(),delete this.startPos,delete this.lastPos}},{key:"fireEvent",value:function(t,e){return this.map.emit(t,new ee(t,{originalEvent:e}))}}]),t}(),ke=Ae,Me=function(){function t(){m()(this,t),j()(this,"enabled",void 0),j()(this,"active",void 0),this.reset()}return y()(t,[{key:"reset",value:function(){this.active=!1}},{key:"dblclick",value:function(t,e){return t.preventDefault(),{cameraAnimation:function(n){n.easeTo({duration:300,zoom:n.getZoom()+(t.shiftKey?-1:1),around:n.unproject(e)},{originalEvent:t})}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),t}();function Pe(t){var e=Ie();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w()(this,n)}}function Ie(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Le=function(t){_()(n,t);var e=Pe(n);function n(){var t;m()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),j()(dt()(t),"type","renderFrame"),j()(dt()(t),"timeStamp",void 0),t}return n}(ee);function Re(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=De(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function De(t,e){if(t){if("string"===typeof t)return Ne(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ne(t,e):void 0}}function Ne(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var je={linearity:.3,easing:At(0,0,.3,1)},Fe=mt()({deceleration:2500,maxSpeed:1400},je),ze=mt()({deceleration:20,maxSpeed:1400},je),Be=mt()({deceleration:1e3,maxSpeed:360},je),Ue=mt()({deceleration:1e3,maxSpeed:90},je),Ve=function(){function t(e){m()(this,t),j()(this,"map",void 0),j()(this,"inertiaBuffer",void 0),this.map=e,this.clear()}return y()(t,[{key:"clear",value:function(){this.inertiaBuffer=[]}},{key:"record",value:function(t){this.drainInertiaBuffer(),this.inertiaBuffer.push({time:It(),settings:t})}},{key:"drainInertiaBuffer",value:function(){var t=this.inertiaBuffer,e=It(),n=160;while(t.length>0&&e-t[0].time>n)t.shift()}},{key:"onMoveEnd",value:function(t){if(this.drainInertiaBuffer(),!(this.inertiaBuffer.length<2)){var e,n={zoom:0,bearing:0,pitch:0,pan:new zt(0,0),pinchAround:void 0,around:void 0},r=Re(this.inertiaBuffer);try{for(r.s();!(e=r.n()).done;){var i=e.value.settings;n.zoom+=i.zoomDelta||0,n.bearing+=i.bearingDelta||0,n.pitch+=i.pitchDelta||0,i.panDelta&&n.pan._add(i.panDelta),i.around&&(n.around=i.around),i.pinchAround&&(n.pinchAround=i.pinchAround)}}catch(uo){r.e(uo)}finally{r.f()}var o=this.inertiaBuffer[this.inertiaBuffer.length-1],a=o.time-this.inertiaBuffer[0].time,s={};if(n.pan.mag()){var u=Ge(n.pan.mag(),a,mt()({},Fe,t||{}));s.offset=n.pan.mult(u.amount/n.pan.mag()),s.center=this.map.transform.center,qe(s,u)}if(n.zoom){var c=Ge(n.zoom,a,ze);s.zoom=this.map.transform.zoom+c.amount,qe(s,c)}if(n.bearing){var l=Ge(n.bearing,a,Be);s.bearing=this.map.transform.bearing+Tt(l.amount,-179,179),qe(s,l)}if(n.pitch){var f=Ge(n.pitch,a,Ue);s.pitch=this.map.transform.pitch+f.amount,qe(s,f)}if(s.zoom||s.bearing){var p=void 0===n.pinchAround?n.around:n.pinchAround;s.around=p?this.map.unproject(p):this.map.getCenter()}return this.clear(),mt()(s,{noMoveStart:!0})}}}]),t}();function qe(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function Ge(t,e,n){var r=n.maxSpeed,i=n.linearity,o=n.deceleration,a=Tt(t*i/(e/1e3),-r,r),s=Math.abs(a)/(o*i);return{easing:n.easing,duration:1e3*s,amount:a*(s/2)}}var He={panStep:100,bearingStep:15,pitchStep:10},We=function(){function t(){m()(this,t),j()(this,"enabled",void 0),j()(this,"active",void 0),j()(this,"panStep",void 0),j()(this,"bearingStep",void 0),j()(this,"pitchStep",void 0);var e=He;this.panStep=e.panStep,this.bearingStep=e.bearingStep,this.pitchStep=e.pitchStep}return y()(t,[{key:"reset",value:function(){this.active=!1}},{key:"keydown",value:function(t){var e=this;if(!(t.altKey||t.ctrlKey||t.metaKey)){var n=0,r=0,i=0,o=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:t.shiftKey?r=-1:(t.preventDefault(),o=-1);break;case 39:t.shiftKey?r=1:(t.preventDefault(),o=1);break;case 38:t.shiftKey?i=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?i=-1:(t.preventDefault(),a=1);break;default:return}return{cameraAnimation:function(s){var u=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:Xe,zoom:n?Math.round(u)+n*(t.shiftKey?2:1):u,bearing:s.getBearing()+r*e.bearingStep,pitch:s.getPitch()+i*e.pitchStep,offset:[-o*e.panStep,-a*e.panStep],center:s.getCenter()},{originalEvent:t})}}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),t}();function Xe(t){return t*(2-t)}var Ze,Ye=We,Ke=function(){function t(e,n){m()(this,t),j()(this,"mousedownPos",void 0),j()(this,"clickTolerance",void 0),j()(this,"map",void 0),this.map=e,this.clickTolerance=n.clickTolerance}return y()(t,[{key:"reset",value:function(){delete this.mousedownPos}},{key:"wheel",value:function(t){return this.firePreventable(new Te(t.type,this.map,t))}},{key:"mousedown",value:function(t,e){return this.mousedownPos=e,this.firePreventable(new _e(t.type,this.map,t))}},{key:"mouseup",value:function(t){this.map.emit(t.type,new _e(t.type,this.map,t))}},{key:"click",value:function(t,e){this.mousedownPos&&this.mousedownPos.dist(e)>=this.clickTolerance||this.map.emit(t.type,new _e(t.type,this.map,t))}},{key:"dblclick",value:function(t){return this.firePreventable(new _e(t.type,this.map,t))}},{key:"mouseover",value:function(t){this.map.emit(t.type,new _e(t.type,this.map,t))}},{key:"mouseout",value:function(t){this.map.emit(t.type,new _e(t.type,this.map,t))}},{key:"touchstart",value:function(t){return this.firePreventable(new Ee(t.type,this.map,t))}},{key:"touchmove",value:function(t){this.map.emit(t.type,new Ee(t.type,this.map,t))}},{key:"touchend",value:function(t){this.map.emit(t.type,new Ee(t.type,this.map,t))}},{key:"touchcancel",value:function(t){this.map.emit(t.type,new Ee(t.type,this.map,t))}},{key:"firePreventable",value:function(t){if(this.map.emit(t.type,t),t.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!1}},{key:"disable",value:function(){return!1}}]),t}(),Je=n("YNYt"),Qe=n.n(Je),$e=0,tn=2,en=(Ze={},j()(Ze,$e,1),j()(Ze,tn,2),Ze);function nn(t,e){var n=en[e];return void 0===t.buttons||(t.buttons&n)!==n}var rn=function(){function t(e){m()(this,t),j()(this,"enabled",void 0),j()(this,"active",void 0),j()(this,"lastPoint",void 0),j()(this,"eventButton",void 0),j()(this,"moved",void 0),j()(this,"clickTolerance",void 0),this.reset(),this.clickTolerance=e.clickTolerance||1}return y()(t,[{key:"reset",value:function(){this.active=!1,this.moved=!1,delete this.lastPoint,delete this.eventButton}},{key:"mousedown",value:function(t,e){if(!this.lastPoint){var n=ce.mouseButton(t);this.correctButton(t,n)&&(this.lastPoint=e,this.eventButton=n)}}},{key:"mousemoveWindow",value:function(t,e){var n=this.lastPoint;if(n)if(t.preventDefault(),nn(t,this.eventButton))this.reset();else if(this.moved||!(e.dist(n)<this.clickTolerance))return this.moved=!0,this.lastPoint=e,this.move(n,e)}},{key:"mouseupWindow",value:function(t){if(this.lastPoint){var e=ce.mouseButton(t);e===this.eventButton&&(this.moved&&ce.suppressClick(),this.reset())}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"correctButton",value:function(t,e){return!1}},{key:"move",value:function(t,e){}}]),t}();function on(t){var e=an();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w()(this,n)}}function an(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var sn=function(t){_()(n,t);var e=on(n);function n(){return m()(this,n),e.apply(this,arguments)}return y()(n,[{key:"mousedown",value:function(t,e){Qe()(S()(n.prototype),"mousedown",this).call(this,t,e),this.lastPoint&&(this.active=!0)}},{key:"move",value:function(t,e){return{around:e,panDelta:e.sub(t)}}},{key:"correctButton",value:function(t,e){return e===$e&&!t.ctrlKey}}]),n}(rn);function un(t){var e=cn();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w()(this,n)}}function cn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var ln=function(t){_()(n,t);var e=un(n);function n(){return m()(this,n),e.apply(this,arguments)}return y()(n,[{key:"correctButton",value:function(t,e){return e===$e&&t.ctrlKey||e===tn}},{key:"move",value:function(t,e){var n=-.5,r=(e.y-t.y)*n;if(r)return this.active=!0,{pitchDelta:r}}},{key:"contextmenu",value:function(t){t.preventDefault()}}]),n}(rn);function fn(t){var e=pn();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w()(this,n)}}function pn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var hn=function(t){_()(n,t);var e=fn(n);function n(){return m()(this,n),e.apply(this,arguments)}return y()(n,[{key:"contextmenu",value:function(t){t.preventDefault()}},{key:"correctButton",value:function(t,e){return e===$e&&t.ctrlKey||e===tn}},{key:"move",value:function(t,e){var n=.8,r=(e.x-t.x)*n;if(r)return this.active=!0,{bearingDelta:r}}}]),n}(rn),dn=4.000244140625,vn=.01,mn=1/450,gn=2,yn=function(){function t(e,n){var r=this;m()(this,t),j()(this,"map",void 0),j()(this,"el",void 0),j()(this,"enabled",void 0),j()(this,"active",void 0),j()(this,"zooming",void 0),j()(this,"aroundCenter",void 0),j()(this,"around",void 0),j()(this,"aroundPoint",void 0),j()(this,"type",void 0),j()(this,"lastValue",void 0),j()(this,"timeout",void 0),j()(this,"finishTimeout",void 0),j()(this,"lastWheelEvent",void 0),j()(this,"lastWheelEventTime",void 0),j()(this,"startZoom",void 0),j()(this,"targetZoom",void 0),j()(this,"delta",void 0),j()(this,"easing",void 0),j()(this,"prevEase",void 0),j()(this,"frameId",void 0),j()(this,"handler",void 0),j()(this,"defaultZoomRate",void 0),j()(this,"wheelZoomRate",void 0),j()(this,"onScrollFrame",(function(){if(r.frameId&&(r.frameId=null,r.isActive())){var t=r.map.transform;if(0!==r.delta){var e="wheel"===r.type&&Math.abs(r.delta)>dn?r.wheelZoomRate:r.defaultZoomRate,n=gn/(1+Math.exp(-Math.abs(r.delta*e)));r.delta<0&&0!==n&&(n=1/n);var i="number"===typeof r.targetZoom?t.zoomScale(r.targetZoom):t.scale;r.targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(i*n))),"wheel"===r.type&&(r.startZoom=t.zoom,r.easing=r.smoothOutEasing(200)),r.delta=0}var o,a="number"===typeof r.targetZoom?r.targetZoom:t.zoom,s=r.startZoom,u=r.easing,c=!1;if("wheel"===r.type&&s&&u){var l=Math.min((It()-r.lastWheelEventTime)/200,1),f=u(l);o=Ot(s,a,f),l<1?r.frameId||(r.frameId=!0):c=!0}else o=a,c=!0;return r.active=!0,c&&(r.active=!1,r.finishTimeout=setTimeout((function(){r.zooming=!1,r.handler.triggerRenderFrame(),delete r.targetZoom,delete r.finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!c,zoomDelta:o-t.zoom,around:r.aroundPoint,originalEvent:r.lastWheelEvent}}})),this.map=e,this.el=e.getCanvasContainer(),this.handler=n,this.delta=0,this.defaultZoomRate=vn,this.wheelZoomRate=mn}return y()(t,[{key:"setZoomRate",value:function(t){this.defaultZoomRate=t}},{key:"setWheelZoomRate",value:function(t){this.wheelZoomRate=t}},{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active||void 0!==this.finishTimeout}},{key:"isZooming",value:function(){return!!this.zooming}},{key:"enable",value:function(t){this.isEnabled()||(this.enabled=!0,this.aroundCenter=t&&"center"===t.around)}},{key:"disable",value:function(){this.isEnabled()&&(this.enabled=!1)}},{key:"wheel",value:function(t){if(this.isEnabled()){var e=t.deltaMode===window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,n=It(),r=n-(this.lastWheelEventTime||0);this.lastWheelEventTime=n,0!==e&&e%dn===0?this.type="wheel":0!==e&&Math.abs(e)<4?this.type="trackpad":r>400?(this.type=null,this.lastValue=e,this.timeout=setTimeout(this.onTimeout,40,t)):this.type||(this.type=Math.abs(r*e)<200?"trackpad":"wheel",this.timeout&&(clearTimeout(this.timeout),this.timeout=null,e+=this.lastValue)),t.shiftKey&&e&&(e/=4),this.type&&(this.lastWheelEvent=t,this.delta-=e,this.active||this.start(t)),t.preventDefault()}}},{key:"renderFrame",value:function(){return this.onScrollFrame()}},{key:"reset",value:function(){this.active=!1}},{key:"onTimeout",value:function(t){this.type="wheel",this.delta-=this.lastValue,this.active||this.start(t)}},{key:"start",value:function(t){if(this.delta){this.frameId&&(this.frameId=null),this.active=!0,this.isZooming()||(this.zooming=!0),this.finishTimeout&&(clearTimeout(this.finishTimeout),delete this.finishTimeout);var e=ce.mousePos(this.el,t);this.around=jt.convert(this.aroundCenter?this.map.getCenter():this.map.unproject(e)),this.aroundPoint=this.map.transform.locationPoint(this.around),this.frameId||(this.frameId=!0,this.handler.triggerRenderFrame())}}},{key:"smoothOutEasing",value:function(t){var e=kt;if(this.prevEase){var n=this.prevEase,r=(It()-n.start)/n.duration,i=n.easing(r+.01)-n.easing(r),o=.27/Math.sqrt(i*i+1e-4)*.01,a=Math.sqrt(.0729-o*o);e=At(o,a,.25,1)}return this.prevEase={start:It(),duration:t,easing:e},e}}]),t}(),bn=yn,_n=function(){function t(e,n){m()(this,t),j()(this,"clickZoom",void 0),j()(this,"tapZoom",void 0),this.clickZoom=e,this.tapZoom=n}return y()(t,[{key:"enable",value:function(){this.clickZoom.enable(),this.tapZoom.enable()}},{key:"disable",value:function(){this.clickZoom.disable(),this.tapZoom.disable()}},{key:"isEnabled",value:function(){return this.clickZoom.isEnabled()&&this.tapZoom.isEnabled()}},{key:"isActive",value:function(){return this.clickZoom.isActive()||this.tapZoom.isActive()}}]),t}(),xn=function(){function t(e,n,r){m()(this,t),j()(this,"inertiaOptions",void 0),j()(this,"el",void 0),j()(this,"mousePan",void 0),j()(this,"touchPan",void 0),this.el=e,this.mousePan=n,this.touchPan=r}return y()(t,[{key:"enable",value:function(t){this.inertiaOptions=t||{},this.mousePan.enable(),this.touchPan.enable(),this.el.classList.add("l7-touch-drag-pan")}},{key:"disable",value:function(){this.mousePan.disable(),this.touchPan.disable(),this.el.classList.remove("l7-touch-drag-pan")}},{key:"isEnabled",value:function(){return this.mousePan.isEnabled()&&this.touchPan.isEnabled()}},{key:"isActive",value:function(){return this.mousePan.isActive()||this.touchPan.isActive()}}]),t}(),wn=function(){function t(e,n,r){m()(this,t),j()(this,"mouseRotate",void 0),j()(this,"mousePitch",void 0),j()(this,"pitchWithRotate",void 0),this.pitchWithRotate=e.pitchWithRotate,this.mouseRotate=n,this.mousePitch=r}return y()(t,[{key:"enable",value:function(){this.mouseRotate.enable(),this.pitchWithRotate&&this.mousePitch.enable()}},{key:"disable",value:function(){this.mouseRotate.disable(),this.mousePitch.disable()}},{key:"isEnabled",value:function(){return this.mouseRotate.isEnabled()&&(!this.pitchWithRotate||this.mousePitch.isEnabled())}},{key:"isActive",value:function(){return this.mouseRotate.isActive()||this.mousePitch.isActive()}}]),t}(),En=function(){function t(e,n,r,i){m()(this,t),j()(this,"el",void 0),j()(this,"touchZoom",void 0),j()(this,"touchRotate",void 0),j()(this,"tapDragZoom",void 0),j()(this,"rotationDisabled",void 0),j()(this,"enabled",void 0),this.el=e,this.touchZoom=n,this.touchRotate=r,this.tapDragZoom=i,this.rotationDisabled=!1,this.enabled=!0}return y()(t,[{key:"enable",value:function(t){this.touchZoom.enable(t),this.rotationDisabled||this.touchRotate.enable(t),this.tapDragZoom.enable(),this.el.classList.add("l7-touch-zoom-rotate")}},{key:"disable",value:function(){this.touchZoom.disable(),this.touchRotate.disable(),this.tapDragZoom.disable(),this.el.classList.remove("l7-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this.touchZoom.isEnabled()&&(this.rotationDisabled||this.touchRotate.isEnabled())&&this.tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this.touchZoom.isActive()||this.touchRotate.isActive()||this.tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this.rotationDisabled=!0,this.touchRotate.disable()}},{key:"enableRotation",value:function(){this.rotationDisabled=!1,this.touchZoom.isEnabled()&&this.touchRotate.enable()}}]),t}();function Sn(t,e){for(var n={},r=0;r<t.length;r++)n[t[r].identifier]=e[r];return n}function Cn(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Tn(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function Tn(t,e){if(t){if("string"===typeof t)return On(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?On(t,e):void 0}}function On(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function An(t){var e,n=new zt(0,0),r=Cn(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;n._add(i)}}catch(uo){r.e(uo)}finally{r.f()}return n.div(t.length)}var kn=500,Mn=500,Pn=30,In=function(){function t(e){m()(this,t),j()(this,"numTouches",void 0),j()(this,"centroid",void 0),j()(this,"startTime",void 0),j()(this,"aborted",void 0),j()(this,"touches",void 0),this.reset(),this.numTouches=e.numTouches}return y()(t,[{key:"reset",value:function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}},{key:"touchstart",value:function(t,e,n){(this.centroid||n.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),n.length===this.numTouches&&(this.centroid=An(e),this.touches=Sn(n,e)))}},{key:"touchmove",value:function(t,e,n){if(!this.aborted&&this.centroid){var r=Sn(n,e);for(var i in this.touches)if(this.touches[i]){var o=this.touches[i],a=r[i];(!a||a.dist(o)>Pn)&&(this.aborted=!0)}}}},{key:"touchend",value:function(t,e,n){if((!this.centroid||t.timeStamp-this.startTime>Mn)&&(this.aborted=!0),0===n.length){var r=!this.aborted&&this.centroid;if(this.reset(),r)return r}}}]),t}(),Ln=function(){function t(e){m()(this,t),j()(this,"singleTap",void 0),j()(this,"numTaps",void 0),j()(this,"lastTime",void 0),j()(this,"lastTap",void 0),j()(this,"count",void 0),this.singleTap=new In(e),this.numTaps=e.numTaps,this.reset()}return y()(t,[{key:"reset",value:function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(t,e,n){this.singleTap.touchstart(t,e,n)}},{key:"touchmove",value:function(t,e,n){this.singleTap.touchmove(t,e,n)}},{key:"touchend",value:function(t,e,n){var r=this.singleTap.touchend(t,e,n);if(r){var i=t.timeStamp-this.lastTime<kn,o=!this.lastTap||this.lastTap.dist(r)<Pn;if(i&&o||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}]),t}(),Rn=function(){function t(){m()(this,t),j()(this,"enabled",void 0),j()(this,"active",void 0),j()(this,"swipePoint",void 0),j()(this,"swipeTouch",void 0),j()(this,"tapTime",void 0),j()(this,"tap",void 0),this.tap=new Ln({numTouches:1,numTaps:1}),this.reset()}return y()(t,[{key:"reset",value:function(){this.active=!1,delete this.swipePoint,delete this.swipeTouch,delete this.tapTime,this.tap.reset()}},{key:"touchstart",value:function(t,e,n){this.swipePoint||(this.tapTime&&t.timeStamp-this.tapTime>kn&&this.reset(),this.tapTime?n.length>0&&(this.swipePoint=e[0],this.swipeTouch=n[0].identifier):this.tap.touchstart(t,e,n))}},{key:"touchmove",value:function(t,e,n){if(this.tapTime){if(this.swipePoint){if(n[0].identifier!==this.swipeTouch)return;var r=e[0],i=r.y-this.swipePoint.y;return this.swipePoint=r,t.preventDefault(),this.active=!0,{zoomDelta:i/128}}}else this.tap.touchmove(t,e,n)}},{key:"touchend",value:function(t,e,n){if(this.tapTime)this.swipePoint&&0===n.length&&this.reset();else{var r=this.tap.touchend(t,e,n);r&&(this.tapTime=t.timeStamp)}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),t}(),Dn=function(){function t(){m()(this,t),j()(this,"enabled",void 0),j()(this,"active",void 0),j()(this,"zoomIn",void 0),j()(this,"zoomOut",void 0),this.zoomIn=new Ln({numTouches:1,numTaps:2}),this.zoomOut=new Ln({numTouches:2,numTaps:1}),this.reset()}return y()(t,[{key:"reset",value:function(){this.active=!1,this.zoomIn.reset(),this.zoomOut.reset()}},{key:"touchstart",value:function(t,e,n){this.zoomIn.touchstart(t,e,n),this.zoomOut.touchstart(t,e,n)}},{key:"touchmove",value:function(t,e,n){this.zoomIn.touchmove(t,e,n),this.zoomOut.touchmove(t,e,n)}},{key:"touchend",value:function(t,e,n){var r=this,i=this.zoomIn.touchend(t,e,n),o=this.zoomOut.touchend(t,e,n);return i?(this.active=!0,t.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(i)},{originalEvent:t})}}):o?(this.active=!0,t.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(o)},{originalEvent:t})}}):void 0}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),t}(),Nn=function(){function t(e){m()(this,t),j()(this,"enabled",void 0),j()(this,"active",void 0),j()(this,"touches",void 0),j()(this,"minTouches",void 0),j()(this,"clickTolerance",void 0),j()(this,"sum",void 0),this.minTouches=1,this.clickTolerance=e.clickTolerance||1,this.reset()}return y()(t,[{key:"reset",value:function(){this.active=!1,this.touches={},this.sum=new zt(0,0)}},{key:"touchstart",value:function(t,e,n){return this.calculateTransform(t,e,n)}},{key:"touchmove",value:function(t,e,n){if(this.active)return t.preventDefault(),this.calculateTransform(t,e,n)}},{key:"touchend",value:function(t,e,n){this.calculateTransform(t,e,n),this.active&&n.length<this.minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"calculateTransform",value:function(t,e,n){n.length>0&&(this.active=!0);var r=Sn(n,e),i=new zt(0,0),o=new zt(0,0),a=0;for(var s in r)if(r[s]){var u=r[s],c=this.touches[s];c&&(i._add(u),o._add(u.sub(c)),a++,r[s]=u)}if(this.touches=r,!(a<this.minTouches)&&o.mag()){var l=o.div(a);if(this.sum._add(l),!(this.sum.mag()<this.clickTolerance)){var f=i.div(a);return{around:f,panDelta:l}}}}}]),t}(),jn=function(){function t(){m()(this,t),j()(this,"enabled",void 0),j()(this,"active",void 0),j()(this,"firstTwoTouches",void 0),j()(this,"vector",void 0),j()(this,"startVector",void 0),j()(this,"aroundCenter",void 0),this.reset()}return y()(t,[{key:"reset",value:function(){this.active=!1,delete this.firstTwoTouches}},{key:"start",value:function(t){}},{key:"move",value:function(t,e,n){}},{key:"touchstart",value:function(t,e,n){this.firstTwoTouches||n.length<2||(this.firstTwoTouches=[n[0].identifier,n[1].identifier],this.start([e[0],e[1]]))}},{key:"touchmove",value:function(t,e,n){if(this.firstTwoTouches){t.preventDefault();var r=P()(this.firstTwoTouches,2),i=r[0],o=r[1],a=Fn(n,e,i),s=Fn(n,e,o);if(a&&s){var u=this.aroundCenter?null:a.add(s).div(2);return this.move([a,s],u,t)}}}},{key:"touchend",value:function(t,e,n){if(this.firstTwoTouches){var r=P()(this.firstTwoTouches,2),i=r[0],o=r[1],a=Fn(n,e,i),s=Fn(n,e,o);a&&s||(this.active&&ce.suppressClick(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(t){this.enabled=!0,this.aroundCenter=!!t&&"center"===t.around}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),t}();function Fn(t,e,n){for(var r=0;r<t.length;r++)if(t[r].identifier===n)return e[r]}function zn(t){var e=Bn();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w()(this,n)}}function Bn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Un(t){return Math.abs(t.y)>Math.abs(t.x)}var Vn=100,qn=function(t){_()(n,t);var e=zn(n);function n(){var t;m()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),j()(dt()(t),"valid",void 0),j()(dt()(t),"firstMove",void 0),j()(dt()(t),"lastPoints",void 0),t}return y()(n,[{key:"reset",value:function(){Qe()(S()(n.prototype),"reset",this).call(this),this.valid=void 0,delete this.firstMove,delete this.lastPoints}},{key:"start",value:function(t){this.lastPoints=t,Un(t[0].sub(t[1]))&&(this.valid=!1)}},{key:"move",value:function(t,e,n){var r=t[0].sub(this.lastPoints[0]),i=t[1].sub(this.lastPoints[1]);if(this.valid=this.gestureBeginsVertically(r,i,n.timeStamp),this.valid){this.lastPoints=t,this.active=!0;var o=(r.y+i.y)/2,a=-.5;return{pitchDelta:o*a}}}},{key:"gestureBeginsVertically",value:function(t,e,n){if(void 0!==this.valid)return this.valid;var r=2,i=t.mag()>=r,o=e.mag()>=r;if(i||o){if(!i||!o)return void 0===this.firstMove&&(this.firstMove=n),n-this.firstMove<Vn&&void 0;var a=t.y>0===e.y>0;return Un(t)&&Un(e)&&a}}}]),n}(jn);function Gn(t){var e=Hn();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w()(this,n)}}function Hn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Wn=25;function Xn(t,e){return 180*t.angleWith(e)/Math.PI}var Zn=function(t){_()(n,t);var e=Gn(n);function n(){var t;m()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),j()(dt()(t),"minDiameter",void 0),t}return y()(n,[{key:"reset",value:function(){Qe()(S()(n.prototype),"reset",this).call(this),delete this.minDiameter,delete this.startVector,delete this.vector}},{key:"start",value:function(t){this.startVector=this.vector=t[0].sub(t[1]),this.minDiameter=t[0].dist(t[1])}},{key:"move",value:function(t,e){var n=this.vector;if(this.vector=t[0].sub(t[1]),this.active||!this.isBelowThreshold(this.vector))return this.active=!0,{bearingDelta:Xn(this.vector,n),pinchAround:e}}},{key:"isBelowThreshold",value:function(t){this.minDiameter=Math.min(this.minDiameter,t.mag());var e=Math.PI*this.minDiameter,n=Wn/e*360,r=Xn(t,this.startVector);return Math.abs(r)<n}}]),n}(jn);function Yn(t){var e=Kn();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w()(this,n)}}function Kn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Jn=.1;function Qn(t,e){return Math.log(t/e)/Math.LN2}var $n=function(t){_()(n,t);var e=Yn(n);function n(){var t;m()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),j()(dt()(t),"distance",void 0),j()(dt()(t),"startDistance",void 0),t}return y()(n,[{key:"reset",value:function(){Qe()(S()(n.prototype),"reset",this).call(this),delete this.distance,delete this.startDistance}},{key:"start",value:function(t){this.startDistance=this.distance=t[0].dist(t[1])}},{key:"move",value:function(t,e){var n=this.distance;if(this.distance=t[0].dist(t[1]),this.active||!(Math.abs(Qn(this.distance,this.startDistance))<Jn))return this.active=!0,{zoomDelta:Qn(this.distance,n),pinchAround:e}}}]),n}(jn);function tr(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=er(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function er(t,e){if(t){if("string"===typeof t)return nr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nr(t,e):void 0}}function nr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var rr=function(t){return t.zoom||t.drag||t.pitch||t.rotate};function ir(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}var or=function(){function t(e,n){var r=this;m()(this,t),j()(this,"map",void 0),j()(this,"el",void 0),j()(this,"handlers",void 0),j()(this,"eventsInProgress",void 0),j()(this,"frameId",void 0),j()(this,"inertia",void 0),j()(this,"bearingSnap",void 0),j()(this,"handlersById",void 0),j()(this,"updatingCamera",void 0),j()(this,"changes",void 0),j()(this,"previousActiveHandlers",void 0),j()(this,"bearingChanged",void 0),j()(this,"listeners",void 0),j()(this,"handleWindowEvent",(function(t){r.handleEvent(t,"".concat(t.type,"Window"))})),j()(this,"handleEvent",(function(t,e){if("blur"!==t.type){r.updatingCamera=!0;var n,i="renderFrame"===t.type?void 0:t,o={needsRenderFrame:!1},a={},s={},u=t.touches?r.getMapTouches(t.touches):void 0,c=u?ce.touchPos(r.el,u):ce.mousePos(r.el,t),l=tr(r.handlers);try{for(l.s();!(n=l.n()).done;){var f=n.value,p=f.handlerName,h=f.handler,d=f.allowed;if(h.isEnabled()){var v=void 0;if(r.blockedByActive(s,d,p))h.reset();else{var m=e||t.type;h&&h[m]&&(v=h[m](t,c,u),r.mergeIHandlerResult(o,a,v,p,i),v&&v.needsRenderFrame&&r.triggerRenderFrame())}(v||h.isActive())&&(s[p]=h)}}}catch(uo){l.e(uo)}finally{l.f()}var g={};for(var y in r.previousActiveHandlers)s[y]||(g[y]=i);r.previousActiveHandlers=s,(Object.keys(g).length||ir(o))&&(r.changes.push([o,a,g]),r.triggerRenderFrame()),(Object.keys(s).length||ir(o))&&r.map.stop(!0),r.updatingCamera=!1;var b=o.cameraAnimation;b&&(r.inertia.clear(),r.fireEvents({},{}),r.changes=[],b(r.map))}else r.stop()})),this.map=e,this.el=this.map.getCanvasContainer(),this.handlers=[],this.handlersById={},this.changes=[],this.inertia=new Ve(e),this.bearingSnap=n.bearingSnap,this.previousActiveHandlers={},this.eventsInProgress={},this.addDefaultHandlers(n);var i=this.el;this.listeners=[[i,"touchstart",{passive:!1}],[i,"touchmove",{passive:!1}],[i,"touchend",void 0],[i,"touchcancel",void 0],[i,"mousedown",void 0],[i,"mousemove",void 0],[i,"mouseup",void 0],[window.document,"mousemove",{capture:!0}],[window.document,"mouseup",void 0],[i,"mouseover",void 0],[i,"mouseout",void 0],[i,"dblclick",void 0],[i,"click",void 0],[i,"keydown",{capture:!1}],[i,"keyup",void 0],[i,"wheel",{passive:!1}],[i,"contextmenu",void 0],[window,"blur",void 0]];var o,a=tr(this.listeners);try{for(a.s();!(o=a.n()).done;){var s=P()(o.value,3),u=s[0],c=s[1],l=s[2];ce.addEventListener(u,c,u===window.document?this.handleWindowEvent:this.handleEvent,l)}}catch(uo){a.e(uo)}finally{a.f()}}return y()(t,[{key:"destroy",value:function(){var t,e=tr(this.listeners);try{for(e.s();!(t=e.n()).done;){var n=P()(t.value,3),r=n[0],i=n[1],o=n[2];ce.removeEventListener(r,i,r===window.document?this.handleWindowEvent:this.handleEvent,o)}}catch(uo){e.e(uo)}finally{e.f()}}},{key:"stop",value:function(){if(!this.updatingCamera){var t,e=tr(this.handlers);try{for(e.s();!(t=e.n()).done;){var n=t.value.handler;n.reset()}}catch(uo){e.e(uo)}finally{e.f()}this.inertia.clear(),this.fireEvents({},{}),this.changes=[]}}},{key:"isActive",value:function(){var t,e=tr(this.handlers);try{for(e.s();!(t=e.n()).done;){var n=t.value.handler;if(n.isActive())return!0}}catch(uo){e.e(uo)}finally{e.f()}return!1}},{key:"isZooming",value:function(){return!!this.eventsInProgress.zoom||this.map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this.eventsInProgress.rotate}},{key:"isMoving",value:function(){return Boolean(rr(this.eventsInProgress))||this.isZooming()}},{key:"mergeIHandlerResult",value:function(t,e,n,r,i){if(n){mt()(t,n);var o={handlerName:r,originalEvent:n.originalEvent||i};void 0!==n.zoomDelta&&(e.zoom=o),void 0!==n.panDelta&&(e.drag=o),void 0!==n.pitchDelta&&(e.pitch=o),void 0!==n.bearingDelta&&(e.rotate=o)}}},{key:"triggerRenderFrame",value:function(){var t=this;void 0===this.frameId&&(this.frameId=this.map.requestRenderFrame((function(e){delete t.frameId,t.handleEvent(new Le("renderFrame",{timeStamp:e})),t.applyChanges()})))}},{key:"addDefaultHandlers",value:function(t){var e=this.map,n=e.getCanvasContainer();this.add("mapEvent",new Ke(e,t));var r=e.boxZoom=new ke(e,t);this.add("boxZoom",r);var i=new Dn,o=new Me;e.doubleClickZoom=new _n(o,i),this.add("tapZoom",i),this.add("clickZoom",o);var a=new Rn;this.add("tapDragZoom",a);var s=e.touchPitch=new qn;this.add("touchPitch",s);var u=new ln(t),c=new hn(t);e.dragRotate=new wn(t,u,c),this.add("mouseRotate",u,["mousePitch"]),this.add("mousePitch",c,["mouseRotate"]);var l=new sn(t),f=new Nn(t);e.dragPan=new xn(n,l,f),this.add("mousePan",l),this.add("touchPan",f,["touchZoom","touchRotate"]);var p=new Zn,h=new $n;e.touchZoomRotate=new En(n,h,p,a),this.add("touchRotate",p,["touchPan","touchZoom"]),this.add("touchZoom",h,["touchPan","touchRotate"]);var d=e.scrollZoom=new bn(e,this);this.add("scrollZoom",d,["mousePan"]);var v=e.keyboard=new Ye;this.add("keyboard",v),this.add("blockableMapEvent",new Oe(e));for(var m=0,g=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];m<g.length;m++){var y=g[m];t.interactive&&t[y]&&e[y].enable(t[y])}}},{key:"add",value:function(t,e,n){this.handlers.push({handlerName:t,handler:e,allowed:n}),this.handlersById[t]=e}},{key:"blockedByActive",value:function(t,e,n){for(var r in t)if(r!==n&&(!e||e.indexOf(r)<0))return!0;return!1}},{key:"getMapTouches",value:function(t){var e,n=[],r=tr(t);try{for(r.s();!(e=r.n()).done;){var i=e.value,o=i.target;this.el.contains(o)&&n.push(i)}}catch(uo){r.e(uo)}finally{r.f()}return n}},{key:"applyChanges",value:function(){var t,e={},n={},r={},i=tr(this.changes);try{for(i.s();!(t=i.n()).done;){var o=P()(t.value,3),a=o[0],s=o[1],u=o[2];a.panDelta&&(e.panDelta=(e.panDelta||new zt(0,0))._add(a.panDelta)),a.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+a.zoomDelta),a.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+a.bearingDelta),a.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+a.pitchDelta),void 0!==a.around&&(e.around=a.around),void 0!==a.pinchAround&&(e.pinchAround=a.pinchAround),a.noInertia&&(e.noInertia=a.noInertia),mt()(n,s),mt()(r,u)}}catch(uo){i.e(uo)}finally{i.f()}this.updateMapTransform(e,n,r),this.changes=[]}},{key:"updateMapTransform",value:function(t,e,n){var r=this.map,i=r.transform;if(!ir(t))return this.fireEvents(e,n);var o=t.panDelta,a=t.zoomDelta,s=t.bearingDelta,u=t.pitchDelta,c=t.pinchAround,l=t.around;void 0!==c&&(l=c),r.stop(!0),l=l||r.transform.centerPoint;var f=i.pointLocation(o?l.sub(o):l);s&&(i.bearing+=s),u&&(i.pitch+=u),a&&(i.zoom+=a),i.setLocationAtPoint(f,l),this.map.update(),t.noInertia||this.inertia.record(t),this.fireEvents(e,n)}},{key:"fireEvents",value:function(t,e){var n=this,r=rr(this.eventsInProgress),i=rr(t),o={};for(var a in t)if(t[a]){var s=t[a].originalEvent;this.eventsInProgress[a]||(o["".concat(a,"start")]=s),this.eventsInProgress[a]=t[a]}for(var u in!r&&i&&this.fireEvent("movestart",i.originalEvent),o)o[u]&&this.fireEvent(u,o[u]);for(var c in t.rotate&&(this.bearingChanged=!0),i&&this.fireEvent("move",i.originalEvent),t)if(t[c]){var l=t[c].originalEvent;this.fireEvent(c,l)}var f,p={};for(var h in this.eventsInProgress)if(this.eventsInProgress[h]){var d=this.eventsInProgress[h],v=d.handlerName,m=d.originalEvent;this.handlersById[v].isActive()||(delete this.eventsInProgress[h],f=e[v]||m,p["".concat(h,"end")]=f)}for(var g in p)p[g]&&this.fireEvent(g,p[g]);var y=rr(this.eventsInProgress);if((r||i)&&!y){this.updatingCamera=!0;var b=this.inertia.onMoveEnd(this.map.dragPan.inertiaOptions),_=function(t){return 0!==t&&-n.bearingSnap<t&&t<n.bearingSnap};b?(_(b.bearing||this.map.getBearing())&&(b.bearing=0),this.map.easeTo(b,{originalEvent:f})):(this.map.emit("moveend",new ee("moveend",{originalEvent:f})),_(this.map.getBearing())&&this.map.resetNorth()),this.bearingChanged=!1,this.updatingCamera=!1}}},{key:"fireEvent",value:function(t,e){this.map.emit(t,new ee(t,e?{originalEvent:e}:{}))}}]),t}(),ar=or,sr=n("fqg0"),ur=n.n(sr),cr=function(){function t(e){var n=this;m()(this,t),j()(this,"map",void 0),j()(this,"updateHash",void 0),j()(this,"hashName",void 0),j()(this,"onHashChange",(function(){var t=n.getCurrentHash();if(t.length>=3&&!t.some((function(t){return isNaN(+t)}))){var e=n.map.dragRotate.isEnabled()&&n.map.touchZoomRotate.isEnabled()?+(t[3]||0):n.map.getBearing();return n.map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1})),j()(this,"getCurrentHash",(function(){var t,e=window.location.hash.replace("#","");return n.hashName?(e.split("&").map((function(t){return t.split("=")})).forEach((function(e){e[0]===n.hashName&&(t=e)})),(t&&t[1]||"").split("/")):e.split("/")})),j()(this,"updateHashUnthrottled",(function(){var t=n.getHashString();try{window.history.replaceState(window.history.state,"",t)}catch(e){}})),this.hashName=e&&encodeURIComponent(e),this.updateHash=ur()(this.updateHashUnthrottled,300)}return y()(t,[{key:"addTo",value:function(t){return this.map=t,window.addEventListener("hashchange",this.onHashChange,!1),this.map.on("moveend",this.updateHash),this}},{key:"remove",value:function(){return window.removeEventListener("hashchange",this.onHashChange,!1),this.map.off("moveend",this.updateHash),delete this.map,this}},{key:"getHashString",value:function(t){var e=this.map.getCenter(),n=Math.round(100*this.map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),o=Math.round(e.lng*i)/i,a=Math.round(e.lat*i)/i,s=this.map.getBearing(),u=this.map.getPitch(),c="";if(c+=t?"/".concat(o,"/").concat(a,"/").concat(n):"".concat(n,"/").concat(a,"/").concat(o),(s||u)&&(c+="/".concat(Math.round(10*s)/10)),u&&(c+="/".concat(Math.round(u))),this.hashName){var l=this.hashName,f=!1,p=window.location.hash.slice(1).split("&").map((function(t){var e=t.split("=")[0];return e===l?(f=!0,"".concat(e,"=").concat(c)):t})).filter((function(t){return t}));return f||p.push("".concat(l,"=").concat(c)),"#".concat(p.join("&"))}return"#".concat(c)}}]),t}(),lr=cr,fr=null,pr=[],hr=30,dr=1e3/hr,vr=window.performance,mr={create:"create",load:"load",fullLoad:"fullLoad"},gr={mark:function(t){vr.mark(t)},frame:function(t){var e=t;if(null!=fr){var n=e-fr;pr.push(n)}fr=e},clearMetrics:function(){for(var t in fr=null,pr=[],vr.clearMeasures("loadTime"),vr.clearMeasures("fullLoadTime"),mr)vr.clearMarks(mr[t])},getPerformanceMetrics:function(){var t=vr.measure("loadTime",mr.create,mr.load).duration,e=vr.measure("fullLoadTime",mr.create,mr.fullLoad).duration,n=pr.length,r=pr.reduce((function(t,e){return t+e}),0)/n/1e3,i=1/r,o=pr.filter((function(t){return t>dr})).reduce((function(t,e){return t+(e-dr)/dr}),0),a=o/(n+o)*100;return{loadTime:t,fullLoadTime:e,fps:i,percentDroppedFrames:a}}};function yr(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=br(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function br(t,e){if(t){if("string"===typeof t)return _r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_r(t,e):void 0}}function _r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var xr=function(){function t(){m()(this,t),j()(this,"queue",void 0),j()(this,"id",void 0),j()(this,"cleared",void 0),j()(this,"currentlyRunning",void 0),this.queue=[],this.id=0,this.cleared=!1,this.currentlyRunning=!1}return y()(t,[{key:"add",value:function(t){var e=++this.id,n=this.queue;return n.push({callback:t,id:e,cancelled:!1}),e}},{key:"remove",value:function(t){var e,n=this.currentlyRunning,r=n?this.queue.concat(n):this.queue,i=yr(r);try{for(i.s();!(e=i.n()).done;){var o=e.value;if(o.id===t)return void(o.cancelled=!0)}}catch(uo){i.e(uo)}finally{i.f()}}},{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.currentlyRunning=this.queue;this.queue=[];var n,r=yr(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.cancelled&&(i.callback(t),this.cleared))break}}catch(uo){r.e(uo)}finally{r.f()}this.cleared=!1,this.currentlyRunning=!1}},{key:"clear",value:function(){this.currentlyRunning&&(this.cleared=!0),this.queue=[]}}]),t}(),wr=xr;function Er(t){var e=Sr();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w()(this,n)}}function Sr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Cr(t,e){if(e||(e=document),e){var n=e.head||e.getElementsByTagName("head")[0];if(!n){n=e.createElement("head");var r=e.body||e.getElementsByTagName("body")[0];r?r.parentNode.insertBefore(n,r):e.documentElement.appendChild(n)}var i=e.createElement("style");return i.type="text/css",i.styleSheet?i.styleSheet.cssText=t:i.appendChild(e.createTextNode(t)),n.appendChild(i),i}}Cr(".l7-map {\n  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;\n  overflow: hidden;\n  position: relative;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n\n.l7-canvas {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.l7-map:-webkit-full-screen {\n  width: 100%;\n  height: 100%;\n}\n\n.l7-canary {\n  background-color: salmon;\n}\n\n.l7-canvas-container.l7-interactive,\n.l7-ctrl-group button.l7-ctrl-compass {\n  cursor: -webkit-grab;\n  cursor: grab;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.l7-canvas-container.l7-interactive.l7-track-pointer {\n  cursor: pointer;\n}\n\n.l7-canvas-container.l7-interactive:active,\n.l7-ctrl-group button.l7-ctrl-compass:active {\n  cursor: -webkit-grabbing;\n  cursor: grabbing;\n}\n\n.l7-canvas-container.l7-touch-zoom-rotate,\n.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {\n  -ms-touch-action: pan-x pan-y;\n      touch-action: pan-x pan-y;\n}\n\n.l7-canvas-container.l7-touch-drag-pan,\n.l7-canvas-container.l7-touch-drag-pan .l7-canvas {\n  -ms-touch-action: pinch-zoom;\n      touch-action: pinch-zoom;\n}\n\n.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,\n.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {\n  -ms-touch-action: none;\n      touch-action: none;\n}\n\n.l7-ctrl-top-left,\n.l7-ctrl-top-right,\n.l7-ctrl-bottom-left,\n.l7-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }\n.l7-ctrl-top-left     { top: 0; left: 0; }\n.l7-ctrl-top-right    { top: 0; right: 0; }\n.l7-ctrl-bottom-left  { bottom: 0; left: 0; }\n.l7-ctrl-bottom-right { right: 0; bottom: 0; }\n\n.l7-ctrl {\n  clear: both;\n  pointer-events: auto;\n\n  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */\n  -webkit-transform: translate(0, 0);\n          transform: translate(0, 0);\n}\n.l7-ctrl-top-left .l7-ctrl     { margin: 10px 0 0 10px; float: left; }\n.l7-ctrl-top-right .l7-ctrl    { margin: 10px 10px 0 0; float: right; }\n.l7-ctrl-bottom-left .l7-ctrl  { margin: 0 0 10px 10px; float: left; }\n.l7-ctrl-bottom-right .l7-ctrl { margin: 0 10px 10px 0; float: right; }\n\n\n.l7-crosshair,\n.l7-crosshair .l7-interactive,\n.l7-crosshair .l7-interactive:active {\n    cursor: crosshair;\n}\n\n.l7-boxzoom {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 0;\n    height: 0;\n    background: #fff;\n    border: 2px dotted #202020;\n    opacity: 0.5;\n    z-index: 10;\n}\n");var Tr=-2,Or=22,Ar=0,kr=60,Mr={hash:!1,zoom:-1,center:[112,32],pitch:0,bearing:0,interactive:!0,minZoom:Tr,maxZoom:Or,minPitch:Ar,maxPitch:kr,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,trackResize:!0,renderWorldCopies:!0},Pr=function(t){_()(n,t);var e=Er(n);function n(t){var r;m()(this,n),r=e.call(this,mt()({},Mr,t)),j()(dt()(r),"doubleClickZoom",void 0),j()(dt()(r),"dragRotate",void 0),j()(dt()(r),"dragPan",void 0),j()(dt()(r),"touchZoomRotate",void 0),j()(dt()(r),"scrollZoom",void 0),j()(dt()(r),"keyboard",void 0),j()(dt()(r),"touchPitch",void 0),j()(dt()(r),"boxZoom",void 0),j()(dt()(r),"handlers",void 0),j()(dt()(r),"container",void 0),j()(dt()(r),"canvas",void 0),j()(dt()(r),"canvasContainer",void 0),j()(dt()(r),"renderTaskQueue",new wr),j()(dt()(r),"frame",void 0),j()(dt()(r),"trackResize",!0),j()(dt()(r),"hash",void 0),j()(dt()(r),"onWindowOnline",(function(){r.update()})),j()(dt()(r),"onWindowResize",(function(t){r.trackResize&&r.resize({originalEvent:t}).update()})),r.initContainer(),r.resize(),r.handlers=new ar(dt()(r),r.options),"undefined"!==typeof window&&(window.addEventListener("online",r.onWindowOnline,!1),window.addEventListener("resize",r.onWindowResize,!1),window.addEventListener("orientationchange",r.onWindowResize,!1));var i="string"===typeof t.hash&&t.hash||void 0;return t.hash&&(r.hash=new lr(i).addTo(dt()(r))),r.hash&&r.hash.onHashChange()||(r.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(r.resize(),r.fitBounds(t.bounds,mt()({},t.fitBoundsOptions,{duration:0})))),r}return y()(n,[{key:"resize",value:function(t){var e=this.containerDimensions(),n=e[0],r=e[1];this.transform.resize(n,r);var i=!this.moving;return i&&(this.stop(),this.emit("movestart",new Event("movestart",t)),this.emit("move",new Event("move",t))),this.emit("resize",new Event("resize",t)),i&&this.emit("moveend",new Event("moveend",t)),this}},{key:"getContainer",value:function(){return this.container}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getCanvasContainer",value:function(){return this.canvasContainer}},{key:"project",value:function(t){return this.transform.locationPoint(jt.convert(t))}},{key:"unproject",value:function(t){return this.transform.pointLocation(zt.convert(t))}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()}},{key:"setMaxBounds",value:function(t){this.transform.setMaxBounds(Ft.convert(t))}},{key:"setStyle",value:function(t){}},{key:"setMinZoom",value:function(t){if(t=null===t||void 0===t?Tr:t,t>=Tr&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between ".concat(Tr," and the current maxZoom, inclusive"))}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(t){if(t=null===t||void 0===t?Or:t,t>=this.transform.minZoom)return this.transform.maxZoom=t,this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(t){if(t=null===t||void 0===t?Ar:t,t<Ar)throw new Error("minPitch must be greater than or equal to ".concat(Ar));if(t>=Ar&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between ".concat(Ar," and the current maxPitch, inclusive"))}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(t){if(t=null===t||void 0===t?kr:t,t>kr)throw new Error("maxPitch must be less than or equal to ".concat(kr));if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(t){this.transform.renderWorldCopies=!!t}},{key:"remove",value:function(){this.frame&&(this.frame.cancel(),this.frame=null),this.renderTaskQueue.clear()}},{key:"requestRenderFrame",value:function(t){return this.update(),this.renderTaskQueue.add(t)}},{key:"cancelRenderFrame",value:function(t){return this.renderTaskQueue.remove(t)}},{key:"triggerRepaint",value:function(){var t=this;this.frame||(this.frame=Dt((function(e){gr.frame(e),t.frame=null,t.update(e)})))}},{key:"update",value:function(t){var e=this;this.frame||(this.frame=Dt((function(n){gr.frame(n),e.frame=null,e.renderTaskQueue.run(t)})))}},{key:"initContainer",value:function(){if("string"===typeof this.options.container){if(this.container=window.document.getElementById(this.options.container),!this.container)throw new Error("Container '".concat(this.options.container,"' not found."))}else{if(!(this.options.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this.container=this.options.container}var t=this.container;t.classList.add("l7-map");var e=this.canvasContainer=H["b"].create("div","l7-canvas-container",t);this.options.interactive&&e.classList.add("l7-interactive")}},{key:"containerDimensions",value:function(){var t=0,e=0;return this.container&&(t=this.container.clientWidth||400,e=this.container.clientHeight||300),[t,e]}},{key:"resizeCanvas",value:function(t,e){var n=H["b"].DPR||1;this.canvas.width=n*t,this.canvas.height=n*e,this.canvas.style.width="".concat(t,"px"),this.canvas.style.height="".concat(e,"px")}}]),n}(ie),Ir=n("kUw8"),Lr=n("nKrB"),Rr=n("m5dl"),Dr=n("0aPf"),Nr=n("XF5O"),jr=n("IzJh"),Fr=n("rRIJ"),zr=n("yktm");function Br(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Ur(t,e){var n=zr["transformMat4"]([],e,t);return zr["scale"](n,n,1/n[3]),n}var Vr=n("jJQI"),qr=n("d/dq"),Gr=n("gCNn");function Hr(t,e){if(!t)throw new Error(e||"viewport-mercator-project: assertion failed.")}var Wr=Math.PI,Xr=Wr/4,Zr=Wr/180,Yr=180/Wr,Kr=512,Jr=4003e4,Qr=1.5;function $r(t){return Math.pow(2,t)}function ti(t,e){var n=Object(Fr["a"])(t,2),r=n[0],i=n[1];Hr(Number.isFinite(r)&&Number.isFinite(e)),Hr(Number.isFinite(i)&&i>=-90&&i<=90,"invalid latitude"),e*=Kr;var o=r*Zr,a=i*Zr,s=e*(o+Wr)/(2*Wr),u=e*(Wr-Math.log(Math.tan(Xr+.5*a)))/(2*Wr);return[s,u]}function ei(t,e){var n=Object(Fr["a"])(t,2),r=n[0],i=n[1];e*=Kr;var o=r/e*(2*Wr)-Wr,a=2*(Math.atan(Math.exp(Wr-i/e*(2*Wr)))-Xr);return[o*Yr,a*Yr]}function ni(t){var e=t.latitude,n=t.longitude,r=t.zoom,i=t.scale,o=t.highPrecision,a=void 0!==o&&o;i=void 0!==i?i:$r(r),Hr(Number.isFinite(e)&&Number.isFinite(n)&&Number.isFinite(i));var s={},u=Kr*i,c=Math.cos(e*Zr),l=u/360,f=l/c,p=u/Jr/c;if(s.pixelsPerMeter=[p,-p,p],s.metersPerPixel=[1/p,-1/p,1/p],s.pixelsPerDegree=[l,-f,p],s.degreesPerPixel=[1/l,-1/f,1/p],a){var h=Zr*Math.tan(e*Zr)/c,d=l*h/2,v=u/Jr*h,m=v/f*p;s.pixelsPerDegree2=[0,-d,v],s.pixelsPerMeter2=[m,0,m]}return s}function ri(t){var e=t.height,n=t.pitch,r=t.bearing,i=t.altitude,o=t.center,a=void 0===o?null:o,s=t.flipY,u=void 0!==s&&s,c=Br();return Vr["translate"](c,c,[0,0,-i]),Vr["scale"](c,c,[1,1,1/e]),Vr["rotateX"](c,c,-n*Zr),Vr["rotateZ"](c,c,r*Zr),u&&Vr["scale"](c,c,[1,-1,1]),a&&Vr["translate"](c,c,Gr["negate"]([],a)),c}function ii(t){var e=t.width,n=t.height,r=t.altitude,i=void 0===r?Qr:r,o=t.pitch,a=void 0===o?0:o,s=t.nearZMultiplier,u=void 0===s?1:s,c=t.farZMultiplier,l=void 0===c?1:c,f=a*Zr,p=Math.atan(.5/i),h=Math.sin(p)*i/Math.sin(Math.PI/2-f-p),d=Math.cos(Math.PI/2-f)*h+i;return{fov:2*Math.atan(n/2/i),aspect:e/n,focalDistance:i,near:u,far:d*l}}function oi(t){var e=t.width,n=t.height,r=t.pitch,i=t.altitude,o=t.nearZMultiplier,a=t.farZMultiplier,s=ii({width:e,height:n,altitude:i,pitch:r,nearZMultiplier:o,farZMultiplier:a}),u=s.fov,c=s.aspect,l=s.near,f=s.far,p=Vr["perspective"]([],u,c,l,f);return p}function ai(t,e){var n=Object(Fr["a"])(t,3),r=n[0],i=n[1],o=n[2],a=void 0===o?0:o;return Hr(Number.isFinite(r)&&Number.isFinite(i)&&Number.isFinite(a)),Ur(e,[r,i,a,1])}function si(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Object(Fr["a"])(t,3),i=r[0],o=r[1],a=r[2];if(Hr(Number.isFinite(i)&&Number.isFinite(o),"invalid pixel coordinate"),Number.isFinite(a)){var s=Ur(e,[i,o,a,1]);return s}var u=Ur(e,[i,o,0,1]),c=Ur(e,[i,o,1,1]),l=u[2],f=c[2],p=l===f?0:((n||0)-l)/(f-l);return qr["lerp"]([],u,c,p)}var ui=Br(),ci=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width,r=e.height,i=e.viewMatrix,o=void 0===i?ui:i,a=e.projectionMatrix,s=void 0===a?ui:a;Object(Ir["a"])(this,t),this.width=n||1,this.height=r||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=o,this.projectionMatrix=s;var u=Br();Vr["multiply"](u,u,this.projectionMatrix),Vr["multiply"](u,u,this.viewMatrix),this.viewProjectionMatrix=u;var c=Br();Vr["scale"](c,c,[this.width/2,-this.height/2,1]),Vr["translate"](c,c,[1,-1,0]),Vr["multiply"](c,c,this.viewProjectionMatrix);var l=Vr["invert"](Br(),c);if(!l)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=c,this.pixelUnprojectionMatrix=l,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object(Lr["a"])(t,[{key:"equals",value:function(e){return e instanceof t&&(e.width===this.width&&e.height===this.height&&Vr["equals"](e.projectionMatrix,this.projectionMatrix)&&Vr["equals"](e.viewMatrix,this.viewMatrix))}},{key:"project",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n,i=this.projectPosition(t),o=ai(i,this.pixelProjectionMatrix),a=Object(Fr["a"])(o,2),s=a[0],u=a[1],c=r?u:this.height-u;return 2===t.length?[s,c]:[s,c,o[2]]}},{key:"unproject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n,i=e.targetZ,o=Object(Fr["a"])(t,3),a=o[0],s=o[1],u=o[2],c=r?s:this.height-s,l=i&&i*this.pixelsPerMeter,f=si([a,c,u],this.pixelUnprojectionMatrix,l),p=this.unprojectPosition(f),h=Object(Fr["a"])(p,3),d=h[0],v=h[1],m=h[2];return Number.isFinite(u)?[d,v,m]:Number.isFinite(i)?[d,v,i]:[d,v]}},{key:"projectPosition",value:function(t){var e=this.projectFlat(t),n=Object(Fr["a"])(e,2),r=n[0],i=n[1],o=(t[2]||0)*this.pixelsPerMeter;return[r,i,o]}},{key:"unprojectPosition",value:function(t){var e=this.unprojectFlat(t),n=Object(Fr["a"])(e,2),r=n[0],i=n[1],o=(t[2]||0)/this.pixelsPerMeter;return[r,i,o]}},{key:"projectFlat",value:function(t){arguments.length>1&&void 0!==arguments[1]||this.scale;return t}},{key:"unprojectFlat",value:function(t){arguments.length>1&&void 0!==arguments[1]||this.scale;return t}}]),t}();function li(t){var e=t.width,n=t.height,r=t.bounds,i=t.minExtent,o=void 0===i?0:i,a=t.maxZoom,s=void 0===a?24:a,u=t.padding,c=void 0===u?0:u,l=t.offset,f=void 0===l?[0,0]:l,p=Object(Fr["a"])(r,2),h=Object(Fr["a"])(p[0],2),d=h[0],v=h[1],m=Object(Fr["a"])(p[1],2),g=m[0],y=m[1];if(Number.isFinite(c)){var b=c;c={top:b,bottom:b,left:b,right:b}}else Hr(Number.isFinite(c.top)&&Number.isFinite(c.bottom)&&Number.isFinite(c.left)&&Number.isFinite(c.right));var _=new wi({width:e,height:n,longitude:0,latitude:0,zoom:0}),x=_.project([d,y]),w=_.project([g,v]),E=[Math.max(Math.abs(w[0]-x[0]),o),Math.max(Math.abs(w[1]-x[1]),o)],S=[e-c.left-c.right-2*Math.abs(f[0]),n-c.top-c.bottom-2*Math.abs(f[1])];Hr(S[0]>0&&S[1]>0);var C=S[0]/E[0],T=S[1]/E[1],O=(c.right-c.left)/2/C,A=(c.bottom-c.top)/2/T,k=[(w[0]+x[0])/2+O,(w[1]+x[1])/2+A],M=_.unproject(k),P=_.zoom+Math.log2(Math.abs(Math.min(C,T)));return{longitude:M[0],latitude:M[1],zoom:Math.min(P,s)}}var fi,pi,hi,di,vi,mi,gi,yi,bi,_i,xi,wi=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.width,i=n.height,o=n.latitude,a=void 0===o?0:o,s=n.longitude,u=void 0===s?0:s,c=n.zoom,l=void 0===c?0:c,f=n.pitch,p=void 0===f?0:f,h=n.bearing,d=void 0===h?0:h,v=n.altitude,m=void 0===v?1.5:v,g=n.nearZMultiplier,y=n.farZMultiplier;Object(Ir["a"])(this,e),r=r||1,i=i||1;var b=$r(l);m=Math.max(.75,m);var _=ti([u,a],b);_[2]=0;var x=oi({width:r,height:i,pitch:p,bearing:d,altitude:m,nearZMultiplier:g||1/i,farZMultiplier:y||1.01}),w=ri({height:i,center:_,pitch:p,bearing:d,altitude:m,flipY:!0});return t=Object(Rr["a"])(this,Object(Dr["a"])(e).call(this,{width:r,height:i,viewMatrix:w,projectionMatrix:x})),t.latitude=a,t.longitude=u,t.zoom=l,t.pitch=p,t.bearing=d,t.altitude=m,t.scale=b,t.center=_,t.pixelsPerMeter=ni(Object(jr["a"])(Object(jr["a"])(t))).pixelsPerMeter[2],Object.freeze(Object(jr["a"])(Object(jr["a"])(t))),t}return Object(Nr["a"])(e,t),Object(Lr["a"])(e,[{key:"projectFlat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return ti(t,e)}},{key:"unprojectFlat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return ei(t,e)}},{key:"getMapCenterByLngLatPosition",value:function(t){var e=t.lngLat,n=t.pos,r=si(n,this.pixelUnprojectionMatrix),i=ti(e,this.scale),o=qr["add"]([],i,qr["negate"]([],r)),a=qr["add"]([],this.center,o);return ei(a,this.scale)}},{key:"getLocationAtPoint",value:function(t){var e=t.lngLat,n=t.pos;return this.getMapCenterByLngLatPosition({lngLat:e,pos:n})}},{key:"fitBounds",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,o=li(Object.assign({width:r,height:i,bounds:t},n)),a=o.longitude,s=o.latitude,u=o.zoom;return new e({width:r,height:i,longitude:a,latitude:s,zoom:u})}}]),e}(ci),Ei=function(){function t(){m()(this,t),j()(this,"viewport",void 0)}return y()(t,[{key:"syncWithMapCamera",value:function(t){var e=t.center,n=t.zoom,r=t.pitch,i=t.bearing,o=t.viewportHeight,a=t.viewportWidth;this.viewport=new wi({width:a,height:o,longitude:e&&e[0],latitude:e&&e[1],zoom:n,pitch:r,bearing:i})}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(t,e){return this.viewport.projectFlat(t,e)}}]),t}(),Si={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},Ci=["id","attributionControl","style","rotation","mapInstance"];function Ti(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Oi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ti(Object(n),!0).forEach((function(e){j()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ti(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ai={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},ki=12,Mi=(fi=Object(X["injectable"])(),pi=Object(X["inject"])(G["n"].MapConfig),hi=Object(X["inject"])(G["n"].IGlobalConfigService),di=Object(X["inject"])(G["n"].ICoordinateSystemService),vi=Object(X["inject"])(G["n"].IEventEmitter),fi((gi=function(){function t(){var e=this;m()(this,t),j()(this,"version",Y["a"].L7MAP),j()(this,"map",void 0),D()(this,"config",yi,this),D()(this,"configService",bi,this),D()(this,"coordinateSystemService",_i,this),D()(this,"eventEmitter",xi,this),j()(this,"viewport",void 0),j()(this,"markerContainer",void 0),j()(this,"cameraChangedCallback",void 0),j()(this,"$mapContainer",void 0),j()(this,"handleCameraChanged",(function(){var t=e.map.getCenter(),n=t.lat,r=t.lng,i=e.config.offsetCoordinate,o=void 0===i||i;e.viewport.syncWithMapCamera({bearing:e.map.getBearing(),center:[r,n],viewportHeight:e.map.transform.height,pitch:e.map.getPitch(),viewportWidth:e.map.transform.width,zoom:e.map.getZoom(),cameraHeight:0}),e.viewport.getZoom()>ki&&o?e.coordinateSystemService.setCoordinateSystem(G["e"].LNGLAT_OFFSET):e.coordinateSystemService.setCoordinateSystem(G["e"].LNGLAT),e.cameraChangedCallback(e.viewport)}))}return y()(t,[{key:"addMarkerContainer",value:function(){var t=this.map.getCanvasContainer();this.markerContainer=H["b"].create("div","l7-marker-container",t),this.markerContainer.setAttribute("tabindex","-1")}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(t,e){-1!==G["h"].indexOf(t)?this.eventEmitter.on(t,e):this.map.on(Ai[t]||t,e)}},{key:"off",value:function(t,e){this.map.off(Ai[t]||t,e)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){var t=this.map.transform;return[t.width,t.height]}},{key:"getType",value:function(){return"default"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(t){return this.map.setZoom(t)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(t){this.map.setCenter(t)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(t){this.map.setBearing(t)}},{key:"zoomIn",value:function(t,e){this.map.zoomIn(t,e)}},{key:"zoomOut",value:function(t,e){this.map.zoomOut(t,e)}},{key:"setPitch",value:function(t){return this.map.setPitch(t)}},{key:"panTo",value:function(t){this.map.panTo(t)}},{key:"panBy",value:function(t){this.panTo(t)}},{key:"fitBounds",value:function(t,e){this.map.fitBounds(t,e)}},{key:"setMaxZoom",value:function(t){this.map.setMaxZoom(t)}},{key:"setMinZoom",value:function(t){this.map.setMinZoom(t)}},{key:"setMapStatus",value:function(t){!0===t.doubleClickZoom&&this.map.doubleClickZoom.enable(),!1===t.doubleClickZoom&&this.map.doubleClickZoom.disable(),!1===t.dragEnable&&this.map.dragPan.disable(),!0===t.dragEnable&&this.map.dragPan.enable(),!1===t.rotateEnable&&this.map.dragRotate.disable(),!0===t.dragEnable&&this.map.dragRotate.enable(),!1===t.keyboardEnable&&this.map.keyboard.disable(),!0===t.keyboardEnable&&this.map.keyboard.enable(),!1===t.zoomEnable&&this.map.scrollZoom.disable(),!0===t.zoomEnable&&this.map.scrollZoom.enable()}},{key:"setZoomAndCenter",value:function(t,e){this.map.flyTo({zoom:t,center:e})}},{key:"setMapStyle",value:function(t){this.map.setStyle(this.getMapStyle(t))}},{key:"pixelToLngLat",value:function(t){return this.map.unproject(t)}},{key:"lngLatToPixel",value:function(t){return this.map.project(t)}},{key:"containerToLngLat",value:function(t){return this.map.unproject(t)}},{key:"lngLatToContainer",value:function(t){return this.map.project(t)}},{key:"lngLatToMercator",value:function(t,e){throw new Error("not implement")}},{key:"getModelMatrix",value:function(t,e,n){throw new Error("not implement")}},{key:"init",value:function(){var t=k()(U.a.mark((function t(){var e,n,r,i,o,a,s,u,c,l;return U.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=this.config,n=e.id,r=void 0===n?"map":n,i=e.attributionControl,void 0!==i&&i,o=e.style,a=void 0===o?"light":o,s=e.rotation,u=void 0===s?0:s,c=e.mapInstance,l=O()(e,Ci),this.viewport=new Ei,c?(this.map=c,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatAmapContainer(r),this.map=new Pr(Oi({container:this.$mapContainer,style:this.getMapStyle(a),bearing:u},l))),this.map.on("load",this.handleCameraChanged),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged();case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=this.eventEmitter).emit.apply(e,[t].concat(r))}},{key:"once",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=this.eventEmitter).once.apply(e,[t].concat(r))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"exportMap",value:function(t){var e=this.map.getCanvas(),n="jpg"===t?null===e||void 0===e?void 0:e.toDataURL("image/jpeg"):null===e||void 0===e?void 0:e.toDataURL("image/png");return n}},{key:"onCameraChanged",value:function(t){this.cameraChangedCallback=t}},{key:"creatAmapContainer",value:function(t){var e=t;return"string"===typeof t&&(e=document.getElementById(t)),e}},{key:"getMapStyle",value:function(t){return"string"!==typeof t?t:Si[t]?Si[t]:t}}]),t}(),yi=z()(gi.prototype,"config",[pi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bi=z()(gi.prototype,"configService",[hi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_i=z()(gi.prototype,"coordinateSystemService",[di],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xi=z()(gi.prototype,"eventEmitter",[vi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mi=gi))||mi);function Pi(t){var e=Ii();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w()(this,n)}}function Ii(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Li,Ri,Di,Ni,ji,Fi,zi,Bi,Ui,Vi,qi,Gi=function(t){_()(n,t);var e=Pi(n);function n(){return m()(this,n),e.apply(this,arguments)}return y()(n,[{key:"getServiceConstructor",value:function(){return Mi}}]),n}(C["a"]),Hi=n("I/SS"),Wi=n.n(Hi),Xi=function(){function t(){m()(this,t),j()(this,"viewport",void 0)}return y()(t,[{key:"syncWithMapCamera",value:function(t){var e=t.center,n=t.zoom,r=t.pitch,i=t.bearing,o=t.viewportHeight,a=t.viewportWidth;this.viewport=new wi({width:a,height:o,longitude:e&&e[0],latitude:e&&e[1],zoom:n,pitch:r,bearing:i})}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(t,e){return this.viewport.projectFlat(t,e)}}]),t}(),Zi={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},Yi=["id","attributionControl","style","token","rotation","mapInstance"];function Ki(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ji(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ki(Object(n),!0).forEach((function(e){j()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ki(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Qi(t,e){if(e||(e=document),e){var n=e.head||e.getElementsByTagName("head")[0];if(!n){n=e.createElement("head");var r=e.body||e.getElementsByTagName("body")[0];r?r.parentNode.insertBefore(n,r):e.documentElement.appendChild(n)}var i=e.createElement("style");return i.type="text/css",i.styleSheet?i.styleSheet.cssText=t:i.appendChild(e.createTextNode(t)),n.appendChild(i),i}}Qi(".mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:-webkit-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:-webkit-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:pinch-zoom;touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:none;touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 2px rgba(0,0,0,.1);box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 0 2px ButtonText;box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){-webkit-box-shadow:none;box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E\")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;-webkit-box-sizing:border-box;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:-webkit-box;display:-ms-flexbox;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.1);box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:-webkit-box;display:-ms-flexbox;display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:\"\";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:\"\";height:19px;left:-2px;position:absolute;top:-2px;width:19px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 0 3px rgba(0,0,0,.35);box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}"),window.mapboxgl=Wi.a;var $i={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},to=0,eo=12,no="pk.eyJ1IjoibHp4dWUiLCJhIjoiY2tvaWZuM2s4MWZuYjJ1dHI5ZGduYTlrdiJ9.DQCfMRbZzx0VSwecQ69McA",ro=(Li=Object(X["injectable"])(),Ri=Object(X["inject"])(G["n"].MapConfig),Di=Object(X["inject"])(G["n"].IGlobalConfigService),Ni=Object(X["inject"])(G["n"].ICoordinateSystemService),ji=Object(X["inject"])(G["n"].IEventEmitter),Li((zi=function(){function t(){var e=this;m()(this,t),j()(this,"version",Y["a"].MAPBOX),j()(this,"map",void 0),D()(this,"config",Bi,this),D()(this,"configService",Ui,this),D()(this,"coordinateSystemService",Vi,this),D()(this,"eventEmitter",qi,this),j()(this,"viewport",void 0),j()(this,"markerContainer",void 0),j()(this,"cameraChangedCallback",void 0),j()(this,"$mapContainer",void 0),j()(this,"handleCameraChanged",(function(){var t=e.map.getCenter().wrap(),n=t.lat,r=t.lng;e.viewport.syncWithMapCamera({bearing:e.map.getBearing(),center:[r,n],viewportHeight:e.map.transform.height,pitch:e.map.getPitch(),viewportWidth:e.map.transform.width,zoom:e.map.getZoom(),cameraHeight:0});var i=e.config.offsetZoom,o=void 0===i?eo:i;e.viewport.getZoom()>o?e.coordinateSystemService.setCoordinateSystem(G["e"].LNGLAT_OFFSET):e.coordinateSystemService.setCoordinateSystem(G["e"].LNGLAT),e.cameraChangedCallback(e.viewport)}))}return y()(t,[{key:"addMarkerContainer",value:function(){var t=this.map.getCanvasContainer();this.markerContainer=H["b"].create("div","l7-marker-container",t),this.markerContainer.setAttribute("tabindex","-1")}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(t,e){-1!==G["h"].indexOf(t)?this.eventEmitter.on(t,e):this.map.on($i[t]||t,e)}},{key:"off",value:function(t,e){this.map.off($i[t]||t,e)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){var t=this.map.transform;return[t.width,t.height]}},{key:"getType",value:function(){return"mapbox"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(t){return this.map.setZoom(t)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(t){this.map.setCenter(t)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(t){this.map.setBearing(t)}},{key:"zoomIn",value:function(t,e){this.map.zoomIn(t,e)}},{key:"zoomOut",value:function(t,e){this.map.zoomOut(t,e)}},{key:"setPitch",value:function(t){return this.map.setPitch(t)}},{key:"panTo",value:function(t){this.map.panTo(t)}},{key:"panBy",value:function(t){this.panTo(t)}},{key:"fitBounds",value:function(t,e){this.map.fitBounds(t,e)}},{key:"setMaxZoom",value:function(t){this.map.setMaxZoom(t)}},{key:"setMinZoom",value:function(t){this.map.setMinZoom(t)}},{key:"setMapStatus",value:function(t){!0===t.doubleClickZoom&&this.map.doubleClickZoom.enable(),!1===t.doubleClickZoom&&this.map.doubleClickZoom.disable(),!1===t.dragEnable&&this.map.dragPan.disable(),!0===t.dragEnable&&this.map.dragPan.enable(),!1===t.rotateEnable&&this.map.dragRotate.disable(),!0===t.rotateEnable&&this.map.dragRotate.enable(),!1===t.keyboardEnable&&this.map.keyboard.disable(),!0===t.keyboardEnable&&this.map.keyboard.enable(),!1===t.zoomEnable&&this.map.scrollZoom.disable(),!0===t.zoomEnable&&this.map.scrollZoom.enable()}},{key:"setZoomAndCenter",value:function(t,e){this.map.flyTo({zoom:t,center:e})}},{key:"setMapStyle",value:function(t){this.map.setStyle(this.getMapStyle(t))}},{key:"pixelToLngLat",value:function(t){return this.map.unproject(t)}},{key:"lngLatToPixel",value:function(t){return this.map.project(t)}},{key:"containerToLngLat",value:function(t){return this.map.unproject(t)}},{key:"lngLatToContainer",value:function(t){return this.map.project(t)}},{key:"lngLatToMercator",value:function(t,e){var n=window.mapboxgl.MercatorCoordinate.fromLngLat(t,e),r=n.x,i=void 0===r?0:r,o=n.y,a=void 0===o?0:o,s=n.z,u=void 0===s?0:s;return{x:i,y:a,z:u}}},{key:"getModelMatrix",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{x:0,y:0,z:0},o=window.mapboxgl.MercatorCoordinate.fromLngLat(t,e),a=o.meterInMercatorCoordinateUnits(),s=W["b"].create();return W["b"].translate(s,s,W["d"].fromValues(o.x-i.x,o.y-i.y,o.z||0-i.z)),W["b"].scale(s,s,W["d"].fromValues(a*r[0],-a*r[1],a*r[2])),W["b"].rotateX(s,s,n[0]),W["b"].rotateY(s,s,n[1]),W["b"].rotateZ(s,s,n[2]),s}},{key:"init",value:function(){var t=k()(U.a.mark((function t(){var e,n,r,i,o,a,s,u,c,l,f,p,h;return U.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=this.config,n=e.id,r=void 0===n?"map":n,i=e.attributionControl,o=void 0!==i&&i,a=e.style,s=void 0===a?"light":a,u=e.token,c=void 0===u?no:u,l=e.rotation,f=void 0===l?0:l,p=e.mapInstance,h=O()(e,Yi),this.viewport=new Xi,p||window.mapboxgl||console.error(this.configService.getSceneWarninfo("SDK")),c!==no||"blank"===s||window.mapboxgl.accessToken||p||console.warn(this.configService.getSceneWarninfo("MapToken")),p||window.mapboxgl.accessToken||(window.mapboxgl.accessToken=c),p?(this.map=p,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatAmapContainer(r),this.map=new window.mapboxgl.Map(Ji({container:this.$mapContainer,style:this.getMapStyle(s),attributionControl:o,bearing:f},h))),this.map.on("load",this.handleCameraChanged),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged();case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=this.eventEmitter).emit.apply(e,[t].concat(r))}},{key:"once",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=this.eventEmitter).once.apply(e,[t].concat(r))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"exportMap",value:function(t){var e=this.map.getCanvas(),n="jpg"===t?null===e||void 0===e?void 0:e.toDataURL("image/jpeg"):null===e||void 0===e?void 0:e.toDataURL("image/png");return n}},{key:"onCameraChanged",value:function(t){this.cameraChangedCallback=t}},{key:"creatAmapContainer",value:function(t){var e=t;"string"===typeof t&&(e=document.getElementById(t));var n=document.createElement("div");return n.style.cssText+="\n      position: absolute;\n      top: 0;\n      height: 100%;\n      width: 100%;\n    ",n.id="l7_mapbox_div"+to++,e.appendChild(n),n}},{key:"getMapStyle",value:function(t){return"string"!==typeof t?t:Zi[t]?Zi[t]:t}}]),t}(),Bi=z()(zi.prototype,"config",[Ri],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ui=z()(zi.prototype,"configService",[Di],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vi=z()(zi.prototype,"coordinateSystemService",[Ni],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qi=z()(zi.prototype,"eventEmitter",[ji],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fi=zi))||Fi);function io(t){var e=oo();return function(){var n,r=S()(t);if(e){var i=S()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w()(this,n)}}function oo(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function ao(t,e){if(e||(e=document),e){var n=e.head||e.getElementsByTagName("head")[0];if(!n){n=e.createElement("head");var r=e.body||e.getElementsByTagName("body")[0];r?r.parentNode.insertBefore(n,r):e.documentElement.appendChild(n)}var i=e.createElement("style");return i.type="text/css",i.styleSheet?i.styleSheet.cssText=t:i.appendChild(e.createTextNode(t)),n.appendChild(i),i}}ao(".mapboxgl-ctrl-logo {\n display: none !important;\n}\n");var so=function(t){_()(n,t);var e=io(n);function n(){return m()(this,n),e.apply(this,arguments)}return y()(n,[{key:"getServiceConstructor",value:function(){return ro}}]),n}(C["a"])},vYQ8:function(t,e,n){var r,i,o,a=n("2JD6"),s=n("7+LC"),u=n("IRht"),c=n("40mc"),l=n("b9+m"),f=n("riWr"),p=n("dpzy"),h=a.location,d=a.setImmediate,v=a.clearImmediate,m=a.process,g=a.MessageChannel,y=a.Dispatch,b=0,_={},x="onreadystatechange",w=function(t){if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},E=function(t){return function(){w(t)}},S=function(t){w(t.data)},C=function(t){a.postMessage(t+"",h.protocol+"//"+h.host)};d&&v||(d=function(t){var e=[],n=1;while(arguments.length>n)e.push(arguments[n++]);return _[++b]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},r(b),b},v=function(t){delete _[t]},"process"==u(m)?r=function(t){m.nextTick(E(t))}:y&&y.now?r=function(t){y.now(E(t))}:g&&!p?(i=new g,o=i.port2,i.port1.onmessage=S,r=c(o.postMessage,o,1)):!a.addEventListener||"function"!=typeof postMessage||a.importScripts||s(C)||"file:"===h.protocol?r=x in f("script")?function(t){l.appendChild(f("script"))[x]=function(){l.removeChild(this),w(t)}}:function(t){setTimeout(E(t),0)}:(r=C,a.addEventListener("message",S,!1))),t.exports={set:d,clear:v}},vdin:function(t,e,n){"use strict";var r=n("xwgP"),i=Object(r["createContext"])({});e["a"]=i},vldi:function(t,e,n){"use strict";var r=n("2RC6").f,i=n("bWCM"),o=n("masK"),a=n("40mc"),s=n("xOST"),u=n("Ji6T"),c=n("me7Q"),l=n("QD/U"),f=n("Hiyu"),p=n("qDpf").fastKey,h=n("twJ5"),d=h.set,v=h.getterFor;t.exports={getConstructor:function(t,e,n,c){var l=t((function(t,r){s(t,l,e),d(t,{type:e,index:i(null),first:void 0,last:void 0,size:0}),f||(t.size=0),void 0!=r&&u(r,t[c],t,n)})),h=v(e),m=function(t,e,n){var r,i,o=h(t),a=g(t,e);return a?a.value=n:(o.last=a={index:i=p(e,!0),key:e,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=a),r&&(r.next=a),f?o.size++:t.size++,"F"!==i&&(o.index[i]=a)),t},g=function(t,e){var n,r=h(t),i=p(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return o(l.prototype,{clear:function(){var t=this,e=h(t),n=e.index,r=e.first;while(r)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete n[r.index],r=r.next;e.first=e.last=void 0,f?e.size=0:t.size=0},delete:function(t){var e=this,n=h(e),r=g(e,t);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first==r&&(n.first=i),n.last==r&&(n.last=o),f?n.size--:e.size--}return!!r},forEach:function(t){var e,n=h(this),r=a(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:n.first){r(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!g(this,t)}}),o(l.prototype,n?{get:function(t){var e=g(this,t);return e&&e.value},set:function(t,e){return m(this,0===t?0:t,e)}}:{add:function(t){return m(this,t=0===t?0:t,t)}}),f&&r(l.prototype,"size",{get:function(){return h(this).size}}),l},setStrong:function(t,e,n){var r=e+" Iterator",i=v(e),o=v(r);c(t,e,(function(t,e){d(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){var t=o(this),e=t.kind,n=t.last;while(n&&n.removed)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),l(e)}}},"vn/D":function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("bXon"),a=n("hXyk"),s=n("DDwO"),u=n("70zE"),c=n("Ji6T");r({target:"Set",proto:!0,real:!0,forced:i},{intersection:function(t){var e=a(this),n=new(u(e,o("Set"))),r=s(e.has),i=s(n.add);return c(t,(function(t){r.call(e,t)&&i.call(n,t)})),n}})},vqXp:function(t,e){function n(t){return function(){return t}}t.exports=n},w3Dd:function(t,e,n){"use strict";n("oTOb");var r=n("HIsA"),i=n("bXon"),o=n("nXFK"),a=n("GUTS"),s=n("masK"),u=n("J7X1"),c=n("afop"),l=n("twJ5"),f=n("xOST"),p=n("+qhb"),h=n("40mc"),d=n("KpHK"),v=n("hXyk"),m=n("pxmn"),g=n("bWCM"),y=n("OLna"),b=n("0Ccx"),_=n("tg/3"),x=n("kPvK"),w=i("fetch"),E=i("Headers"),S=x("iterator"),C="URLSearchParams",T=C+"Iterator",O=l.set,A=l.getterFor(C),k=l.getterFor(T),M=/\+/g,P=Array(4),I=function(t){return P[t-1]||(P[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},L=function(t){try{return decodeURIComponent(t)}catch(e){return t}},R=function(t){var e=t.replace(M," "),n=4;try{return decodeURIComponent(e)}catch(r){while(n)e=e.replace(I(n--),L);return e}},D=/[!'()~]|%20/g,N={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},j=function(t){return N[t]},F=function(t){return encodeURIComponent(t).replace(D,j)},z=function(t,e){if(e){var n,r,i=e.split("&"),o=0;while(o<i.length)n=i[o++],n.length&&(r=n.split("="),t.push({key:R(r.shift()),value:R(r.join("="))}))}},B=function(t){this.entries.length=0,z(this.entries,t)},U=function(t,e){if(t<e)throw TypeError("Not enough arguments")},V=c((function(t,e){O(this,{type:T,iterator:b(A(t).entries),kind:e})}),"Iterator",(function(){var t=k(this),e=t.kind,n=t.iterator.next(),r=n.value;return n.done||(n.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),n})),q=function(){f(this,q,C);var t,e,n,r,i,o,a,s,u,c=arguments.length>0?arguments[0]:void 0,l=this,h=[];if(O(l,{type:C,entries:h,updateURL:function(){},updateSearchParams:B}),void 0!==c)if(m(c))if(t=_(c),"function"===typeof t){e=t.call(c),n=e.next;while(!(r=n.call(e)).done){if(i=b(v(r.value)),o=i.next,(a=o.call(i)).done||(s=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");h.push({key:a.value+"",value:s.value+""})}}else for(u in c)p(c,u)&&h.push({key:u,value:c[u]+""});else z(h,"string"===typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},G=q.prototype;s(G,{append:function(t,e){U(arguments.length,2);var n=A(this);n.entries.push({key:t+"",value:e+""}),n.updateURL()},delete:function(t){U(arguments.length,1);var e=A(this),n=e.entries,r=t+"",i=0;while(i<n.length)n[i].key===r?n.splice(i,1):i++;e.updateURL()},get:function(t){U(arguments.length,1);for(var e=A(this).entries,n=t+"",r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){U(arguments.length,1);for(var e=A(this).entries,n=t+"",r=[],i=0;i<e.length;i++)e[i].key===n&&r.push(e[i].value);return r},has:function(t){U(arguments.length,1);var e=A(this).entries,n=t+"",r=0;while(r<e.length)if(e[r++].key===n)return!0;return!1},set:function(t,e){U(arguments.length,1);for(var n,r=A(this),i=r.entries,o=!1,a=t+"",s=e+"",u=0;u<i.length;u++)n=i[u],n.key===a&&(o?i.splice(u--,1):(o=!0,n.value=s));o||i.push({key:a,value:s}),r.updateURL()},sort:function(){var t,e,n,r=A(this),i=r.entries,o=i.slice();for(i.length=0,n=0;n<o.length;n++){for(t=o[n],e=0;e<n;e++)if(i[e].key>t.key){i.splice(e,0,t);break}e===n&&i.push(t)}r.updateURL()},forEach:function(t){var e,n=A(this).entries,r=h(t,arguments.length>1?arguments[1]:void 0,3),i=0;while(i<n.length)e=n[i++],r(e.value,e.key,this)},keys:function(){return new V(this,"keys")},values:function(){return new V(this,"values")},entries:function(){return new V(this,"entries")}},{enumerable:!0}),a(G,S,G.entries),a(G,"toString",(function(){var t,e=A(this).entries,n=[],r=0;while(r<e.length)t=e[r++],n.push(F(t.key)+"="+F(t.value));return n.join("&")}),{enumerable:!0}),u(q,C),r({global:!0,forced:!o},{URLSearchParams:q}),o||"function"!=typeof w||"function"!=typeof E||r({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var e,n,r,i=[t];return arguments.length>1&&(e=arguments[1],m(e)&&(n=e.body,d(n)===C&&(r=e.headers?new E(e.headers):new E,r.has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e=g(e,{body:y(0,String(n)),headers:y(0,r)}))),i.push(e)),w.apply(this,i)}}),t.exports={URLSearchParams:q,getState:A}},w7rW:function(t,e,n){"use strict";var r=n("Wp5u").exportTypedArrayMethod,i=n("7+LC"),o=n("2JD6"),a=o.Uint8Array,s=a&&a.prototype||{},u=[].toString,c=[].join;i((function(){u.call({})}))&&(u=function(){return c.call(this)});var l=s.toString!=u;r("toString",u,l)},wBVS:function(t,e,n){var r=n("sVUS"),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;function u(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(u){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}t.exports=u},wFHg:function(t,e,n){var r=n("2hCa"),i=n("szjD").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):i(r(t))}},wKMT:function(t,e,n){var r=n("m52V"),i=n("0Ccx");t.exports=r?i:function(t){return Set.prototype.values.call(t)}},wOqf:function(t,e,n){"use strict";var r=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.getFunctionName=e.getBaseClassDependencyCount=e.getDependencies=void 0;var i=n("tjpL"),o=n("196R"),a=n("2+60"),s=n("9L8m"),u=n("Rph/");Object.defineProperty(e,"getFunctionName",{enumerable:!0,get:function(){return u.getFunctionName}});var c=n("Y26w");function l(t,e){var n=u.getFunctionName(e),r=f(t,n,e,!1);return r}function f(t,e,n,i){var a=t.getConstructorMetadata(n),s=a.compilerGeneratedMetadata;if(void 0===s){var u=o.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(u)}var c=a.userGeneratedMetadata,l=Object.keys(c),f=0===n.length&&l.length>0,p=l.length>n.length,v=f||p?l.length:n.length,m=h(i,e,s,c,v),g=d(t,n),y=r(r([],m),g);return y}function p(t,e,n,r,s){var u=s[t.toString()]||[],l=m(u),f=!0!==l.unmanaged,p=r[t],h=l.inject||l.multiInject;if(p=h||p,p instanceof i.LazyServiceIdentifer&&(p=p.unwrap()),f){var d=p===Object,v=p===Function,g=void 0===p,y=d||v||g;if(!e&&y){var b=o.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+n+".";throw new Error(b)}var _=new c.Target(a.TargetTypeEnum.ConstructorArgument,l.targetName,p);return _.metadata=u,_}return null}function h(t,e,n,r,i){for(var o=[],a=0;a<i;a++){var s=a,u=p(s,t,e,n,r);null!==u&&o.push(u)}return o}function d(t,e){for(var n=t.getPropertiesMetadata(e),i=[],o=Object.keys(n),s=0,u=o;s<u.length;s++){var l=u[s],f=n[l],p=m(n[l]),h=p.targetName||l,v=p.inject||p.multiInject,g=new c.Target(a.TargetTypeEnum.ClassProperty,h,v);g.metadata=f,i.push(g)}var y=Object.getPrototypeOf(e.prototype).constructor;if(y!==Object){var b=d(t,y);i=r(r([],i),b)}return i}function v(t,e){var n=Object.getPrototypeOf(e.prototype).constructor;if(n!==Object){var r=u.getFunctionName(n),i=f(t,r,n,!0),o=i.map((function(t){return t.metadata.filter((function(t){return t.key===s.UNMANAGED_TAG}))})),a=[].concat.apply([],o).length,c=i.length-a;return c>0?c:v(t,n)}return 0}function m(t){var e={};return t.forEach((function(t){e[t.key.toString()]=t.value})),{inject:e[s.INJECT_TAG],multiInject:e[s.MULTI_INJECT_TAG],targetName:e[s.NAME_TAG],unmanaged:e[s.UNMANAGED_TAG]}}e.getDependencies=l,e.getBaseClassDependencyCount=v},"wQ+q":function(t,e,n){var r=n("JzK+"),i=n("/Izz"),o="["+i+"]",a=RegExp("^"+o+o+"*"),s=RegExp(o+o+"*$"),u=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(a,"")),2&t&&(n=n.replace(s,"")),n}};t.exports={start:u(1),end:u(2),trim:u(3)}},waKi:function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("bXon"),a=n("hXyk"),s=n("DDwO"),u=n("40mc"),c=n("70zE"),l=n("wKMT"),f=n("Ji6T");r({target:"Set",proto:!0,real:!0,forced:i},{filter:function(t){var e=a(this),n=l(e),r=u(t,arguments.length>1?arguments[1]:void 0,3),i=new(c(e,o("Set"))),p=s(i.add);return f(n,(function(t){r(t,t,e)&&p.call(i,t)}),void 0,!1,!0),i}})},wc5F:function(t,e,n){var r=n("gsbv"),i=r["__core-js_shared__"];t.exports=i},wdlL:function(t,e,n){var r=n("HIsA"),i=n("RUgK").entries;r({target:"Object",stat:!0},{entries:function(t){return i(t)}})},"wfm+":function(t,e,n){"use strict";var r=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.resolveInstance=void 0;var i=n("196R"),o=n("2+60"),a=n("9L8m");function s(t,e,n){var r=e.filter((function(t){return null!==t.target&&t.target.type===o.TargetTypeEnum.ClassProperty})),i=r.map(n);return r.forEach((function(e,n){var r="";r=e.target.name.value();var o=i[n];t[r]=o})),t}function u(t,e){return new(t.bind.apply(t,r([void 0],e)))}function c(t,e){if(Reflect.hasMetadata(a.POST_CONSTRUCT,t)){var n=Reflect.getMetadata(a.POST_CONSTRUCT,t);try{e[n.value]()}catch(r){throw new Error(i.POST_CONSTRUCT_ERROR(t.name,r.message))}}}function l(t,e,n){var r=null;if(e.length>0){var i=e.filter((function(t){return null!==t.target&&t.target.type===o.TargetTypeEnum.ConstructorArgument})),a=i.map(n);r=u(t,a),r=s(r,e,n)}else r=new t;return c(t,r),r}e.resolveInstance=l},wmqP:function(t,e,n){var r=n("3Jv6"),i=n("E5vS"),o="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",u="[object Proxy]";function c(t){if(!i(t))return!1;var e=r(t);return e==a||e==s||e==o||e==u}t.exports=c},wvSg:function(t,e,n){var r=n("TIpG"),i=n("2Swa");function o(t){return i(t)&&r(t)}t.exports=o},wvav:function(t,e){function n(t){return t.split("")}t.exports=n},"x+a2":function(t,e,n){"use strict";var r=n("PaPB"),i=n("JzK+");t.exports="".repeat||function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},x2v5:function(t){t.exports=JSON.parse("{}")},xOST:function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},xOgS:function(t,e,n){var r=n("E5vS"),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},xTzN:function(t,e,n){var r=n("nTTP"),i=n("AmsH"),o=n("/40y"),a=n("cA8S");function s(t){return function(e){e=a(e);var n=i(e)?o(e):void 0,s=n?n[0]:e.charAt(0),u=n?r(n,1).join(""):e.slice(1);return s[t]()+u}}t.exports=s},xUti:function(t,e,n){var r=n("7+LC");t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},xUzk:function(t,e,n){"use strict";var r=n("HIsA"),i=n("DDwO"),o=n("bXon"),a=n("0MLT"),s=n("uCRN"),u=n("Ji6T"),c="No one promise resolved";r({target:"Promise",stat:!0},{any:function(t){var e=this,n=a.f(e),r=n.resolve,l=n.reject,f=s((function(){var n=i(e.resolve),a=[],s=0,f=1,p=!1;u(t,(function(t){var i=s++,u=!1;a.push(void 0),f++,n.call(e,t).then((function(t){u||p||(p=!0,r(t))}),(function(t){u||p||(u=!0,a[i]=t,--f||l(new(o("AggregateError"))(a,c)))}))})),--f||l(new(o("AggregateError"))(a,c))}));return f.error&&l(f.value),n.promise}})},"xi+f":function(t,e){function n(t,e){var n=-1,r=null==t?0:t.length,i=Array(r);while(++n<r)i[n]=e(t[n],n,t);return i}t.exports=n},xlmz:function(t,e,n){var r=n("HIsA"),i=n("hXyk"),o=n("pxmn"),a=n("+qhb"),s=n("7+LC"),u=n("2RC6"),c=n("qmtO"),l=n("kI7s"),f=n("OLna");function p(t,e,n){var r,s,h=arguments.length<4?t:arguments[3],d=c.f(i(t),e);if(!d){if(o(s=l(t)))return p(s,e,n,h);d=f(0)}if(a(d,"value")){if(!1===d.writable||!o(h))return!1;if(r=c.f(h,e)){if(r.get||r.set||!1===r.writable)return!1;r.value=n,u.f(h,e,r)}else u.f(h,e,f(0,n));return!0}return void 0!==d.set&&(d.set.call(h,n),!0)}var h=s((function(){var t=u.f({},"a",{configurable:!0});return!1!==Reflect.set(l(t),"a",1,t)}));r({target:"Reflect",stat:!0,forced:h},{set:p})},xmvT:function(t,e,n){},xoxd:function(t,e,n){},xp0c:function(t,e,n){var r=n("+qhb"),i=n("jUTB"),o=n("qmtO"),a=n("2RC6");t.exports=function(t,e){for(var n=i(e),s=a.f,u=o.f,c=0;c<n.length;c++){var l=n[c];r(t,l)||s(t,l,u(e,l))}}},xwgP:function(t,e,n){"use strict";t.exports=n("9VYP")},xzaY:function(t,e,n){"use strict";var r=n("m5Te");function i(){var t=n("xwgP");return i=function(){return t},t}function o(t,e){return l(t)||c(t,e)||s(t,e)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,e){if(t){if("string"===typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function l(t){if(Array.isArray(t))return t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var f,p="https://riddle.alibaba-inc.com/riddles/define",h=function(){var t=(0,i().useState)(Boolean(f)),e=o(t,2),n=e[0],r=e[1];return(0,i().useEffect)((function(){if(void 0===f){var t=document.createElement("img");setTimeout((function(){t.src="",t.remove()}),200),t.onload=function(){f=!0,r(!0),t.remove()},t.src="https://private-alipayobjects.alipay.com/alipay-rmsdeploy-image/rmsportal/RKuAiriJqrUhyqW.png"}}),[]),n};function d(t){var e,n=t.dependencies,r=t.sources._.tsx||t.sources._.jsx;return r=r.replace(/^/,"import ReactDOM from 'react-dom@".concat((null===(e=n.react)||void 0===e?void 0:e.version)||"latest","';\n")).replace("export default","const DumiDemo =").concat("\nReactDOM.render(<DumiDemo />, mountNode);"),r=r.replace(/(from ')((?:@[^/'"]+)?[^/'"]+)/g,(function(t,e,r){var i="".concat(e).concat(r);return n[r]&&(i+="@".concat(n[r].version)),i})),r}var v=function(t){var e=(0,i().useState)(),n=o(e,2),a=n[0],s=n[1],u=h();return(0,i().useEffect)((function(){if(t&&u&&1===Object.keys(t.sources).length){var e=document.createElement("form"),n=document.createElement("input");return e.method="POST",e.target="_blank",e.style.display="none",e.action=p,e.appendChild(n),e.setAttribute("data-demo",t.title||""),n.name="data",n.value=JSON.stringify({title:t.titlle,js:d(t),css:Object.entries(t.dependencies).filter((function(t){var e=r(t,2),n=e[1];return n.css})).map((function(t){var e=r(t,2),n=e[0],i=e[1],o=i.version,a=i.css;return"@import '~".concat(a.replace(new RegExp("^(".concat(n,")")),"$1@".concat(o)),"';")})).join("\n")}),document.body.appendChild(e),s((function(){return function(){return e.submit()}})),function(){return e.remove()}}}),[t,u]),a};e["default"]=v},y0nk:function(t,e,n){var r=n("ADQb"),i=n("gsbv"),o=r(i,"DataView");t.exports=o},y5iR:function(t,e,n){"use strict";n.r(e),n.d(e,"getInstance",(function(){return et}));var r=n("M2Sr"),i=n("FpZt"),o=n("TFir"),a=n.n(o),s=n("xwgP"),u=n("Uvt4"),c=n("TWOK"),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"},f=l,p=n("XUFm"),h=function(t,e){return s["createElement"](p["a"],Object(c["a"])(Object(c["a"])({},t),{},{ref:e,icon:f}))};h.displayName="CloseOutlined";var d=s["forwardRef"](h),v=n("jK+o"),m=n.n(v),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},y=g,b=function(t,e){return s["createElement"](p["a"],Object(c["a"])(Object(c["a"])({},t),{},{ref:e,icon:y}))};b.displayName="CheckCircleOutlined";var _=s["forwardRef"](b),x={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}},{tag:"path",attrs:{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"close-circle",theme:"outlined"},w=x,E=function(t,e){return s["createElement"](p["a"],Object(c["a"])(Object(c["a"])({},t),{},{ref:e,icon:w}))};E.displayName="CloseCircleOutlined";var S=s["forwardRef"](E),C={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},T=C,O=function(t,e){return s["createElement"](p["a"],Object(c["a"])(Object(c["a"])({},t),{},{ref:e,icon:T}))};O.displayName="ExclamationCircleOutlined";var A=s["forwardRef"](O),k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},M=k,P=function(t,e){return s["createElement"](p["a"],Object(c["a"])(Object(c["a"])({},t),{},{ref:e,icon:M}))};P.displayName="InfoCircleOutlined";var I=s["forwardRef"](P),L=n("rRIJ"),R=n("OTP3"),D=n("vAUc");function N(t,e){var n=function(){var n,i=null,o={add:function(t,e){null===i||void 0===i||i.component.add(t,e)}},a=Object(R["a"])(o),u=Object(L["a"])(a,2),c=u[0],l=u[1];function f(o){var a=o.prefixCls,s=n("notification",a);t(Object(r["a"])(Object(r["a"])({},o),{prefixCls:s}),(function(t){var n=t.prefixCls,r=t.instance;i=r,c(e(o,n))}))}var p=s["useRef"]({});return p.current.open=f,["success","info","warning","error"].forEach((function(t){p.current[t]=function(e){return p.current.open(Object(r["a"])(Object(r["a"])({},e),{type:t}))}})),[p.current,s["createElement"](D["a"],{key:"holder"},(function(t){return n=t.getPrefixCls,l}))]};return n}var j,F,z=n("mYUn"),B=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))},U={},V=4.5,q=24,G=24,H="",W="topRight",X=!1;function Z(t){var e=t.duration,n=t.placement,r=t.bottom,i=t.top,o=t.getContainer,a=t.closeIcon,s=t.prefixCls;void 0!==s&&(H=s),void 0!==e&&(V=e),void 0!==n?W=n:t.rtl&&(W="topLeft"),void 0!==r&&(G=r),void 0!==i&&(q=i),void 0!==o&&(j=o),void 0!==a&&(F=a),void 0!==t.rtl&&(X=t.rtl)}function Y(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:q,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:G;switch(t){case"topLeft":e={left:0,top:n,bottom:"auto"};break;case"topRight":e={right:0,top:n,bottom:"auto"};break;case"bottomLeft":e={left:0,top:"auto",bottom:r};break;default:e={right:0,top:"auto",bottom:r};break}return e}function K(t,e){var n=t.placement,r=void 0===n?W:n,o=t.top,a=t.bottom,c=t.getContainer,l=void 0===c?j:c,f=t.closeIcon,p=void 0===f?F:f,h=t.prefixCls,v=Object(z["a"])(),g=v.getPrefixCls,y=g("notification",h||H),b="".concat(y,"-").concat(r),_=U[b];if(_)Promise.resolve(_).then((function(t){e({prefixCls:"".concat(y,"-notice"),instance:t})}));else{var x=s["createElement"]("span",{className:"".concat(y,"-close-x")},p||s["createElement"](d,{className:"".concat(y,"-close-icon")})),w=m()("".concat(y,"-").concat(r),Object(i["a"])({},"".concat(y,"-rtl"),!0===X));U[b]=new Promise((function(t){u["a"].newInstance({prefixCls:y,className:w,style:Y(r,o,a),getContainer:l,closeIcon:x},(function(n){t(n),e({prefixCls:"".concat(y,"-notice"),instance:n})}))}))}}var J={success:_,info:I,error:S,warning:A};function Q(t,e){var n=t.duration,r=t.icon,o=t.type,a=t.description,u=t.message,c=t.btn,l=t.onClose,f=t.onClick,p=t.key,h=t.style,d=t.className,v=void 0===n?V:n,g=null;r?g=s["createElement"]("span",{className:"".concat(e,"-icon")},t.icon):o&&(g=s["createElement"](J[o]||null,{className:"".concat(e,"-icon ").concat(e,"-icon-").concat(o)}));var y=!a&&g?s["createElement"]("span",{className:"".concat(e,"-message-single-line-auto-margin")}):null;return{content:s["createElement"]("div",{className:g?"".concat(e,"-with-icon"):"",role:"alert"},g,s["createElement"]("div",{className:"".concat(e,"-message")},y,u),s["createElement"]("div",{className:"".concat(e,"-description")},a),c?s["createElement"]("span",{className:"".concat(e,"-btn")},c):null),duration:v,closable:!0,onClose:l,onClick:f,key:p,style:h||{},className:m()(d,Object(i["a"])({},"".concat(e,"-").concat(o),!!o))}}function $(t){K(t,(function(e){var n=e.prefixCls,r=e.instance;r.notice(Q(t,n))}))}var tt={open:$,close:function(t){Object.keys(U).forEach((function(e){return Promise.resolve(U[e]).then((function(e){e.removeNotice(t)}))}))},config:Z,destroy:function(){Object.keys(U).forEach((function(t){Promise.resolve(U[t]).then((function(t){t.destroy()})),delete U[t]}))}};["success","info","warning","error"].forEach((function(t){tt[t]=function(e){return tt.open(Object(r["a"])(Object(r["a"])({},e),{type:t}))}})),tt.warn=tt.warning,tt.useNotification=N(K,Q);var et=function(t){return B(void 0,void 0,void 0,a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",null);case 1:case"end":return t.stop()}}),t)})))};e["default"]=tt},y6vj:function(t,e,n){"use strict";t.exports=n("WCPf")},y6vz:function(t,e,n){var r=n("6tTE"),i=n("GPbW");t.exports=Object.keys||function(t){return r(t,i)}},yBoc:function(t,e,n){var r=n("E5vS"),i=n("H4kY"),o=n("qhWv"),a="Expected a function",s=Math.max,u=Math.min;function c(t,e,n){var c,l,f,p,h,d,v=0,m=!1,g=!1,y=!0;if("function"!=typeof t)throw new TypeError(a);function b(e){var n=c,r=l;return c=l=void 0,v=e,p=t.apply(r,n),p}function _(t){return v=t,h=setTimeout(E,e),m?b(t):p}function x(t){var n=t-d,r=t-v,i=e-n;return g?u(i,f-r):i}function w(t){var n=t-d,r=t-v;return void 0===d||n>=e||n<0||g&&r>=f}function E(){var t=i();if(w(t))return S(t);h=setTimeout(E,x(t))}function S(t){return h=void 0,y&&c?b(t):(c=l=void 0,p)}function C(){void 0!==h&&clearTimeout(h),v=0,c=d=l=h=void 0}function T(){return void 0===h?p:S(i())}function O(){var t=i(),n=w(t);if(c=arguments,l=this,d=t,n){if(void 0===h)return _(d);if(g)return clearTimeout(h),h=setTimeout(E,e),b(d)}return void 0===h&&(h=setTimeout(E,e)),p}return e=o(e)||0,r(n)&&(m=!!n.leading,g="maxWait"in n,f=g?s(o(n.maxWait)||0,e):f,y="trailing"in n?!!n.trailing:y),O.cancel=C,O.flush=T,O}t.exports=c},yEfb:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var r=n("OFkz"),i=n("uT4L"),o=(0,i.LinkWrapper)(r.NavLink);e["default"]=o},ygwf:function(t,e,n){},yktm:function(t,e,n){"use strict";n.r(e),n.d(e,"create",(function(){return i})),n.d(e,"clone",(function(){return o})),n.d(e,"fromValues",(function(){return a})),n.d(e,"copy",(function(){return s})),n.d(e,"set",(function(){return u})),n.d(e,"add",(function(){return c})),n.d(e,"subtract",(function(){return l})),n.d(e,"multiply",(function(){return f})),n.d(e,"divide",(function(){return p})),n.d(e,"ceil",(function(){return h})),n.d(e,"floor",(function(){return d})),n.d(e,"min",(function(){return v})),n.d(e,"max",(function(){return m})),n.d(e,"round",(function(){return g})),n.d(e,"scale",(function(){return y})),n.d(e,"scaleAndAdd",(function(){return b})),n.d(e,"distance",(function(){return _})),n.d(e,"squaredDistance",(function(){return x})),n.d(e,"length",(function(){return w})),n.d(e,"squaredLength",(function(){return E})),n.d(e,"negate",(function(){return S})),n.d(e,"inverse",(function(){return C})),n.d(e,"normalize",(function(){return T})),n.d(e,"dot",(function(){return O})),n.d(e,"cross",(function(){return A})),n.d(e,"lerp",(function(){return k})),n.d(e,"random",(function(){return M})),n.d(e,"transformMat4",(function(){return P})),n.d(e,"transformQuat",(function(){return I})),n.d(e,"zero",(function(){return L})),n.d(e,"str",(function(){return R})),n.d(e,"exactEquals",(function(){return D})),n.d(e,"equals",(function(){return N})),n.d(e,"sub",(function(){return j})),n.d(e,"mul",(function(){return F})),n.d(e,"div",(function(){return z})),n.d(e,"dist",(function(){return B})),n.d(e,"sqrDist",(function(){return U})),n.d(e,"len",(function(){return V})),n.d(e,"sqrLen",(function(){return q})),n.d(e,"forEach",(function(){return G}));var r=n("TaHB");function i(){var t=new r["a"](4);return r["a"]!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function o(t){var e=new r["a"](4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function a(t,e,n,i){var o=new r["a"](4);return o[0]=t,o[1]=e,o[2]=n,o[3]=i,o}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function u(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function c(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function l(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function f(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function p(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function h(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function d(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function v(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function m(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function g(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function y(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function b(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function _(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.hypot(n,r,i,o)}function x(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}function w(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function E(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function S(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function C(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function T(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a,t}function O(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function A(t,e,n,r){var i=n[0]*r[1]-n[1]*r[0],o=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],u=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],l=e[0],f=e[1],p=e[2],h=e[3];return t[0]=f*c-p*u+h*s,t[1]=-l*c+p*a-h*o,t[2]=l*u-f*a+h*i,t[3]=-l*s+f*o-p*i,t}function k(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t}function M(t,e){var n,i,o,a,s,u;e=e||1;do{n=2*r["c"]()-1,i=2*r["c"]()-1,s=n*n+i*i}while(s>=1);do{o=2*r["c"]()-1,a=2*r["c"]()-1,u=o*o+a*a}while(u>=1);var c=Math.sqrt((1-s)/u);return t[0]=e*n,t[1]=e*i,t[2]=e*o*c,t[3]=e*a*c,t}function P(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function I(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*o-u*i,f=c*i+u*r-a*o,p=c*o+a*i-s*r,h=-a*r-s*i-u*o;return t[0]=l*c+h*-a+f*-u-p*-s,t[1]=f*c+h*-s+p*-a-l*-u,t[2]=p*c+h*-u+l*-s-f*-a,t[3]=e[3],t}function L(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function R(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function D(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function N(t,e){var n=t[0],i=t[1],o=t[2],a=t[3],s=e[0],u=e[1],c=e[2],l=e[3];return Math.abs(n-s)<=r["b"]*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-u)<=r["b"]*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=r["b"]*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(a-l)<=r["b"]*Math.max(1,Math.abs(a),Math.abs(l))}var j=l,F=f,z=p,B=_,U=x,V=w,q=E,G=function(){var t=i();return function(e,n,r,i,o,a){var s,u;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}()},yvuI:function(t,e,n){},zJnk:function(t,e,n){"use strict";var r=n("xwgP"),i=Object(r["createContext"])(void 0);e["a"]=i},zM5O:function(t,e,n){"use strict";var r=n("HIsA"),i=n("m52V"),o=n("hXyk"),a=n("wKMT"),s=n("Ji6T");r({target:"Set",proto:!0,real:!0,forced:i},{join:function(t){var e=o(this),n=a(e),r=void 0===t?",":String(t),i=[];return s(n,i.push,i,!1,!0),i.join(r)}})},zN6Y:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingOnSyntax=void 0;var r=n("ITfU"),i=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new r.BindingWhenSyntax(this._binding)},t}();e.BindingOnSyntax=i},zOkb:function(t,e,n){var r=n("ADQb"),i=r(Object,"create");t.exports=i},zSok:function(t,e,n){var r=n("Go1P"),i=Array.prototype,o=i.splice;function a(t){var e=this.__data__,n=r(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():o.call(e,n,1),--this.size,!0}t.exports=a},zUoc:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("Kzx3");function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Object(r["a"])(t,e)}},zZgq:function(t,e,n){"use strict";var r=n("pMf/"),i=n("Wp5u").exportTypedArrayStaticMethod,o=n("b4JQ");i("from",o,r)},zcJV:function(t,e,n){var r=n("HIsA"),i=n("5AZ8");r({target:"Set",stat:!0},{from:i})},zftb:function(t,e,n){var r=n("xOgS"),i=n("8ifL"),o=n("/g2i");function a(t){return"function"!=typeof t.constructor||o(t)?{}:r(i(t))}t.exports=a},zgkv:function(t,e,n){var r=n("RaWV"),i=n("UpgW"),o=n("RDD/"),a="['\u2019]",s=RegExp(a,"g");function u(t){return function(e){return r(o(i(e).replace(s,"")),t,"")}}t.exports=u},zzj5:function(t,e,n){var r=n("zOkb");function i(){this.__data__=r?r(null):{},this.size=0}t.exports=i}});